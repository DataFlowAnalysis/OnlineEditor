{
  "version": 3,
  "sources": ["../../monaco-editor/esm/vs/editor/common/standalone/standaloneEnums.js", "../../monaco-editor/esm/vs/editor/common/services/editorBaseApi.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneEditor.js", "../../monaco-editor/esm/vs/base/common/worker/simpleWorker.js", "../../monaco-editor/esm/vs/base/browser/defaultWorkerFactory.js", "../../monaco-editor/esm/vs/editor/common/model/mirrorTextModel.js", "../../monaco-editor/esm/vs/editor/common/languages/linkComputer.js", "../../monaco-editor/esm/vs/editor/common/languages/supports/inplaceReplaceSupport.js", "../../monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js", "../../monaco-editor/esm/vs/editor/common/diff/linesDiffComputer.js", "../../monaco-editor/esm/vs/editor/common/diff/rangeMapping.js", "../../monaco-editor/esm/vs/editor/common/diff/legacyLinesDiffComputer.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/algorithms/diffAlgorithm.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/utils.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/algorithms/dynamicProgrammingDiffing.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/algorithms/myersDiffAlgorithm.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/linesSliceCharSequence.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/computeMovedLines.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/heuristicSequenceOptimizations.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/lineSequence.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/defaultLinesDiffComputer.js", "../../monaco-editor/esm/vs/editor/common/diff/linesDiffComputers.js", "../../monaco-editor/esm/vs/editor/common/languages/defaultDocumentColorsComputer.js", "../../monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js", "../../monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js", "../../monaco-editor/esm/vs/editor/browser/services/editorWorkerService.js", "../../monaco-editor/esm/vs/editor/browser/services/webWorker.js", "../../monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCommon.js", "../../monaco-editor/esm/vs/editor/standalone/common/monarch/monarchLexer.js", "../../monaco-editor/esm/vs/editor/standalone/browser/colorizer.js", "../../monaco-editor/esm/vs/editor/browser/services/abstractCodeEditorService.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditorService.js", "../../monaco-editor/esm/vs/platform/layout/browser/layoutService.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneLayoutService.js", "../../monaco-editor/esm/vs/platform/dialogs/common/dialogs.js", "../../monaco-editor/esm/vs/platform/undoRedo/common/undoRedoService.js", "../../monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling.js", "../../monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js", "../../monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js", "../../monaco-editor/esm/vs/base/common/glob.js", "../../monaco-editor/esm/vs/editor/common/languageSelector.js", "../../monaco-editor/esm/vs/editor/common/languageFeatureRegistry.js", "../../monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js", "../../monaco-editor/esm/vs/editor/common/config/diffEditor.js", "../../monaco-editor/esm/vs/editor/common/config/editorConfigurationSchema.js", "../../monaco-editor/esm/vs/platform/configuration/common/configurationModels.js", "../../monaco-editor/esm/vs/platform/keybinding/common/keybindingResolver.js", "../../monaco-editor/esm/vs/platform/keybinding/common/abstractKeybindingService.js", "../../monaco-editor/esm/vs/platform/keybinding/common/resolvedKeybindingItem.js", "../../monaco-editor/esm/vs/platform/keybinding/common/baseResolvedKeybinding.js", "../../monaco-editor/esm/vs/platform/keybinding/common/usLayoutResolvedKeybinding.js", "../../monaco-editor/esm/vs/editor/common/standaloneStrings.js", "../../monaco-editor/esm/vs/platform/workspace/common/workspaceTrust.js", "../../monaco-editor/esm/vs/base/browser/ui/contextview/contextview.js", "../../monaco-editor/esm/vs/platform/contextview/browser/contextViewService.js", "../../monaco-editor/esm/vs/editor/common/services/languagesAssociations.js", "../../monaco-editor/esm/vs/editor/common/services/languagesRegistry.js", "../../monaco-editor/esm/vs/editor/common/services/languageService.js", "../../monaco-editor/esm/vs/base/browser/ui/menu/menu.js", "../../monaco-editor/esm/vs/platform/contextview/browser/contextMenuHandler.js", "../../monaco-editor/esm/vs/platform/contextview/browser/contextMenuService.js", "../../monaco-editor/esm/vs/platform/editor/common/editor.js", "../../monaco-editor/esm/vs/editor/browser/services/openerService.js", "../../monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js", "../../monaco-editor/esm/vs/editor/common/services/modelService.js", "../../monaco-editor/esm/vs/editor/standalone/browser/quickInput/standaloneQuickInputService.js", "../../monaco-editor/esm/vs/platform/quickinput/common/quickAccess.js", "../../monaco-editor/esm/vs/platform/quickinput/common/quickInput.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickAccess.js", "../../monaco-editor/esm/vs/base/browser/ui/button/button.js", "../../monaco-editor/esm/vs/base/browser/ui/progressbar/progressbar.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInputBox.js", "../../monaco-editor/esm/vs/base/common/comparers.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInputList.js", "../../monaco-editor/esm/vs/base/common/linkedText.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInputUtils.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInput.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInputController.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInputService.js", "../../monaco-editor/esm/vs/editor/common/languages/supports/tokenization.js", "../../monaco-editor/esm/vs/editor/standalone/common/themes.js", "../../monaco-editor/esm/vs/platform/theme/browser/iconsStyleSheet.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneThemeService.js", "../../monaco-editor/esm/vs/editor/standalone/common/standaloneTheme.js", "../../monaco-editor/esm/vs/platform/accessibility/browser/accessibilityService.js", "../../monaco-editor/esm/vs/platform/actions/common/menuService.js", "../../monaco-editor/esm/vs/platform/clipboard/browser/clipboardService.js", "../../monaco-editor/esm/vs/platform/contextkey/browser/contextKeyService.js", "../../monaco-editor/esm/vs/platform/instantiation/common/graph.js", "../../monaco-editor/esm/vs/platform/instantiation/common/instantiationService.js", "../../monaco-editor/esm/vs/platform/markers/common/markerService.js", "../../monaco-editor/esm/vs/platform/configuration/common/configurations.js", "../../monaco-editor/esm/vs/platform/log/common/logService.js", "../../monaco-editor/esm/vs/editor/common/editorFeatures.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorWidget.js", "../../monaco-editor/esm/vs/base/common/hotReload.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/utils.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/accessibleDiffViewer.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/decorations.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/movedBlocksLines.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorDecorations.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorSash.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/outlineModel.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/hideUnchangedRegionsFeature.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/workerBasedDocumentDiffProvider.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffProviderFactoryService.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorViewModel.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/inlineDiffDeletedCodeMargin.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/renderLines.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/lineAlignment.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/overviewRulerPart.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/colors.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/delegatingEditorImpl.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorEditors.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorOptions.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditor.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/multiDiffEditorWidgetImpl.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/utils.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/diffEditorItemTemplate.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/objectPool.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/colors.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/multiDiffEditorWidget.js", "../../monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCompile.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneLanguages.js", "../../monaco-editor/esm/vs/platform/extensions/common/extensions.js", "../../monaco-editor/esm/vs/editor/contrib/format/browser/format.js", "../../monaco-editor/esm/vs/editor/editor.api.js"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// THIS IS A GENERATED FILE. DO NOT EDIT DIRECTLY.\nexport var AccessibilitySupport;\n(function (AccessibilitySupport) {\n    /**\n     * This should be the browser case where it is not known if a screen reader is attached or no.\n     */\n    AccessibilitySupport[AccessibilitySupport[\"Unknown\"] = 0] = \"Unknown\";\n    AccessibilitySupport[AccessibilitySupport[\"Disabled\"] = 1] = \"Disabled\";\n    AccessibilitySupport[AccessibilitySupport[\"Enabled\"] = 2] = \"Enabled\";\n})(AccessibilitySupport || (AccessibilitySupport = {}));\nexport var CodeActionTriggerType;\n(function (CodeActionTriggerType) {\n    CodeActionTriggerType[CodeActionTriggerType[\"Invoke\"] = 1] = \"Invoke\";\n    CodeActionTriggerType[CodeActionTriggerType[\"Auto\"] = 2] = \"Auto\";\n})(CodeActionTriggerType || (CodeActionTriggerType = {}));\nexport var CompletionItemInsertTextRule;\n(function (CompletionItemInsertTextRule) {\n    CompletionItemInsertTextRule[CompletionItemInsertTextRule[\"None\"] = 0] = \"None\";\n    /**\n     * Adjust whitespace/indentation of multiline insert texts to\n     * match the current line indentation.\n     */\n    CompletionItemInsertTextRule[CompletionItemInsertTextRule[\"KeepWhitespace\"] = 1] = \"KeepWhitespace\";\n    /**\n     * `insertText` is a snippet.\n     */\n    CompletionItemInsertTextRule[CompletionItemInsertTextRule[\"InsertAsSnippet\"] = 4] = \"InsertAsSnippet\";\n})(CompletionItemInsertTextRule || (CompletionItemInsertTextRule = {}));\nexport var CompletionItemKind;\n(function (CompletionItemKind) {\n    CompletionItemKind[CompletionItemKind[\"Method\"] = 0] = \"Method\";\n    CompletionItemKind[CompletionItemKind[\"Function\"] = 1] = \"Function\";\n    CompletionItemKind[CompletionItemKind[\"Constructor\"] = 2] = \"Constructor\";\n    CompletionItemKind[CompletionItemKind[\"Field\"] = 3] = \"Field\";\n    CompletionItemKind[CompletionItemKind[\"Variable\"] = 4] = \"Variable\";\n    CompletionItemKind[CompletionItemKind[\"Class\"] = 5] = \"Class\";\n    CompletionItemKind[CompletionItemKind[\"Struct\"] = 6] = \"Struct\";\n    CompletionItemKind[CompletionItemKind[\"Interface\"] = 7] = \"Interface\";\n    CompletionItemKind[CompletionItemKind[\"Module\"] = 8] = \"Module\";\n    CompletionItemKind[CompletionItemKind[\"Property\"] = 9] = \"Property\";\n    CompletionItemKind[CompletionItemKind[\"Event\"] = 10] = \"Event\";\n    CompletionItemKind[CompletionItemKind[\"Operator\"] = 11] = \"Operator\";\n    CompletionItemKind[CompletionItemKind[\"Unit\"] = 12] = \"Unit\";\n    CompletionItemKind[CompletionItemKind[\"Value\"] = 13] = \"Value\";\n    CompletionItemKind[CompletionItemKind[\"Constant\"] = 14] = \"Constant\";\n    CompletionItemKind[CompletionItemKind[\"Enum\"] = 15] = \"Enum\";\n    CompletionItemKind[CompletionItemKind[\"EnumMember\"] = 16] = \"EnumMember\";\n    CompletionItemKind[CompletionItemKind[\"Keyword\"] = 17] = \"Keyword\";\n    CompletionItemKind[CompletionItemKind[\"Text\"] = 18] = \"Text\";\n    CompletionItemKind[CompletionItemKind[\"Color\"] = 19] = \"Color\";\n    CompletionItemKind[CompletionItemKind[\"File\"] = 20] = \"File\";\n    CompletionItemKind[CompletionItemKind[\"Reference\"] = 21] = \"Reference\";\n    CompletionItemKind[CompletionItemKind[\"Customcolor\"] = 22] = \"Customcolor\";\n    CompletionItemKind[CompletionItemKind[\"Folder\"] = 23] = \"Folder\";\n    CompletionItemKind[CompletionItemKind[\"TypeParameter\"] = 24] = \"TypeParameter\";\n    CompletionItemKind[CompletionItemKind[\"User\"] = 25] = \"User\";\n    CompletionItemKind[CompletionItemKind[\"Issue\"] = 26] = \"Issue\";\n    CompletionItemKind[CompletionItemKind[\"Snippet\"] = 27] = \"Snippet\";\n})(CompletionItemKind || (CompletionItemKind = {}));\nexport var CompletionItemTag;\n(function (CompletionItemTag) {\n    CompletionItemTag[CompletionItemTag[\"Deprecated\"] = 1] = \"Deprecated\";\n})(CompletionItemTag || (CompletionItemTag = {}));\n/**\n * How a suggest provider was triggered.\n */\nexport var CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    CompletionTriggerKind[CompletionTriggerKind[\"Invoke\"] = 0] = \"Invoke\";\n    CompletionTriggerKind[CompletionTriggerKind[\"TriggerCharacter\"] = 1] = \"TriggerCharacter\";\n    CompletionTriggerKind[CompletionTriggerKind[\"TriggerForIncompleteCompletions\"] = 2] = \"TriggerForIncompleteCompletions\";\n})(CompletionTriggerKind || (CompletionTriggerKind = {}));\n/**\n * A positioning preference for rendering content widgets.\n */\nexport var ContentWidgetPositionPreference;\n(function (ContentWidgetPositionPreference) {\n    /**\n     * Place the content widget exactly at a position\n     */\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"EXACT\"] = 0] = \"EXACT\";\n    /**\n     * Place the content widget above a position\n     */\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"ABOVE\"] = 1] = \"ABOVE\";\n    /**\n     * Place the content widget below a position\n     */\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"BELOW\"] = 2] = \"BELOW\";\n})(ContentWidgetPositionPreference || (ContentWidgetPositionPreference = {}));\n/**\n * Describes the reason the cursor has changed its position.\n */\nexport var CursorChangeReason;\n(function (CursorChangeReason) {\n    /**\n     * Unknown or not set.\n     */\n    CursorChangeReason[CursorChangeReason[\"NotSet\"] = 0] = \"NotSet\";\n    /**\n     * A `model.setValue()` was called.\n     */\n    CursorChangeReason[CursorChangeReason[\"ContentFlush\"] = 1] = \"ContentFlush\";\n    /**\n     * The `model` has been changed outside of this cursor and the cursor recovers its position from associated markers.\n     */\n    CursorChangeReason[CursorChangeReason[\"RecoverFromMarkers\"] = 2] = \"RecoverFromMarkers\";\n    /**\n     * There was an explicit user gesture.\n     */\n    CursorChangeReason[CursorChangeReason[\"Explicit\"] = 3] = \"Explicit\";\n    /**\n     * There was a Paste.\n     */\n    CursorChangeReason[CursorChangeReason[\"Paste\"] = 4] = \"Paste\";\n    /**\n     * There was an Undo.\n     */\n    CursorChangeReason[CursorChangeReason[\"Undo\"] = 5] = \"Undo\";\n    /**\n     * There was a Redo.\n     */\n    CursorChangeReason[CursorChangeReason[\"Redo\"] = 6] = \"Redo\";\n})(CursorChangeReason || (CursorChangeReason = {}));\n/**\n * The default end of line to use when instantiating models.\n */\nexport var DefaultEndOfLine;\n(function (DefaultEndOfLine) {\n    /**\n     * Use line feed (\\n) as the end of line character.\n     */\n    DefaultEndOfLine[DefaultEndOfLine[\"LF\"] = 1] = \"LF\";\n    /**\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\n     */\n    DefaultEndOfLine[DefaultEndOfLine[\"CRLF\"] = 2] = \"CRLF\";\n})(DefaultEndOfLine || (DefaultEndOfLine = {}));\n/**\n * A document highlight kind.\n */\nexport var DocumentHighlightKind;\n(function (DocumentHighlightKind) {\n    /**\n     * A textual occurrence.\n     */\n    DocumentHighlightKind[DocumentHighlightKind[\"Text\"] = 0] = \"Text\";\n    /**\n     * Read-access of a symbol, like reading a variable.\n     */\n    DocumentHighlightKind[DocumentHighlightKind[\"Read\"] = 1] = \"Read\";\n    /**\n     * Write-access of a symbol, like writing to a variable.\n     */\n    DocumentHighlightKind[DocumentHighlightKind[\"Write\"] = 2] = \"Write\";\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\n/**\n * Configuration options for auto indentation in the editor\n */\nexport var EditorAutoIndentStrategy;\n(function (EditorAutoIndentStrategy) {\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"None\"] = 0] = \"None\";\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Keep\"] = 1] = \"Keep\";\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Brackets\"] = 2] = \"Brackets\";\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Advanced\"] = 3] = \"Advanced\";\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Full\"] = 4] = \"Full\";\n})(EditorAutoIndentStrategy || (EditorAutoIndentStrategy = {}));\nexport var EditorOption;\n(function (EditorOption) {\n    EditorOption[EditorOption[\"acceptSuggestionOnCommitCharacter\"] = 0] = \"acceptSuggestionOnCommitCharacter\";\n    EditorOption[EditorOption[\"acceptSuggestionOnEnter\"] = 1] = \"acceptSuggestionOnEnter\";\n    EditorOption[EditorOption[\"accessibilitySupport\"] = 2] = \"accessibilitySupport\";\n    EditorOption[EditorOption[\"accessibilityPageSize\"] = 3] = \"accessibilityPageSize\";\n    EditorOption[EditorOption[\"ariaLabel\"] = 4] = \"ariaLabel\";\n    EditorOption[EditorOption[\"ariaRequired\"] = 5] = \"ariaRequired\";\n    EditorOption[EditorOption[\"autoClosingBrackets\"] = 6] = \"autoClosingBrackets\";\n    EditorOption[EditorOption[\"autoClosingComments\"] = 7] = \"autoClosingComments\";\n    EditorOption[EditorOption[\"screenReaderAnnounceInlineSuggestion\"] = 8] = \"screenReaderAnnounceInlineSuggestion\";\n    EditorOption[EditorOption[\"autoClosingDelete\"] = 9] = \"autoClosingDelete\";\n    EditorOption[EditorOption[\"autoClosingOvertype\"] = 10] = \"autoClosingOvertype\";\n    EditorOption[EditorOption[\"autoClosingQuotes\"] = 11] = \"autoClosingQuotes\";\n    EditorOption[EditorOption[\"autoIndent\"] = 12] = \"autoIndent\";\n    EditorOption[EditorOption[\"automaticLayout\"] = 13] = \"automaticLayout\";\n    EditorOption[EditorOption[\"autoSurround\"] = 14] = \"autoSurround\";\n    EditorOption[EditorOption[\"bracketPairColorization\"] = 15] = \"bracketPairColorization\";\n    EditorOption[EditorOption[\"guides\"] = 16] = \"guides\";\n    EditorOption[EditorOption[\"codeLens\"] = 17] = \"codeLens\";\n    EditorOption[EditorOption[\"codeLensFontFamily\"] = 18] = \"codeLensFontFamily\";\n    EditorOption[EditorOption[\"codeLensFontSize\"] = 19] = \"codeLensFontSize\";\n    EditorOption[EditorOption[\"colorDecorators\"] = 20] = \"colorDecorators\";\n    EditorOption[EditorOption[\"colorDecoratorsLimit\"] = 21] = \"colorDecoratorsLimit\";\n    EditorOption[EditorOption[\"columnSelection\"] = 22] = \"columnSelection\";\n    EditorOption[EditorOption[\"comments\"] = 23] = \"comments\";\n    EditorOption[EditorOption[\"contextmenu\"] = 24] = \"contextmenu\";\n    EditorOption[EditorOption[\"copyWithSyntaxHighlighting\"] = 25] = \"copyWithSyntaxHighlighting\";\n    EditorOption[EditorOption[\"cursorBlinking\"] = 26] = \"cursorBlinking\";\n    EditorOption[EditorOption[\"cursorSmoothCaretAnimation\"] = 27] = \"cursorSmoothCaretAnimation\";\n    EditorOption[EditorOption[\"cursorStyle\"] = 28] = \"cursorStyle\";\n    EditorOption[EditorOption[\"cursorSurroundingLines\"] = 29] = \"cursorSurroundingLines\";\n    EditorOption[EditorOption[\"cursorSurroundingLinesStyle\"] = 30] = \"cursorSurroundingLinesStyle\";\n    EditorOption[EditorOption[\"cursorWidth\"] = 31] = \"cursorWidth\";\n    EditorOption[EditorOption[\"disableLayerHinting\"] = 32] = \"disableLayerHinting\";\n    EditorOption[EditorOption[\"disableMonospaceOptimizations\"] = 33] = \"disableMonospaceOptimizations\";\n    EditorOption[EditorOption[\"domReadOnly\"] = 34] = \"domReadOnly\";\n    EditorOption[EditorOption[\"dragAndDrop\"] = 35] = \"dragAndDrop\";\n    EditorOption[EditorOption[\"dropIntoEditor\"] = 36] = \"dropIntoEditor\";\n    EditorOption[EditorOption[\"emptySelectionClipboard\"] = 37] = \"emptySelectionClipboard\";\n    EditorOption[EditorOption[\"experimentalWhitespaceRendering\"] = 38] = \"experimentalWhitespaceRendering\";\n    EditorOption[EditorOption[\"extraEditorClassName\"] = 39] = \"extraEditorClassName\";\n    EditorOption[EditorOption[\"fastScrollSensitivity\"] = 40] = \"fastScrollSensitivity\";\n    EditorOption[EditorOption[\"find\"] = 41] = \"find\";\n    EditorOption[EditorOption[\"fixedOverflowWidgets\"] = 42] = \"fixedOverflowWidgets\";\n    EditorOption[EditorOption[\"folding\"] = 43] = \"folding\";\n    EditorOption[EditorOption[\"foldingStrategy\"] = 44] = \"foldingStrategy\";\n    EditorOption[EditorOption[\"foldingHighlight\"] = 45] = \"foldingHighlight\";\n    EditorOption[EditorOption[\"foldingImportsByDefault\"] = 46] = \"foldingImportsByDefault\";\n    EditorOption[EditorOption[\"foldingMaximumRegions\"] = 47] = \"foldingMaximumRegions\";\n    EditorOption[EditorOption[\"unfoldOnClickAfterEndOfLine\"] = 48] = \"unfoldOnClickAfterEndOfLine\";\n    EditorOption[EditorOption[\"fontFamily\"] = 49] = \"fontFamily\";\n    EditorOption[EditorOption[\"fontInfo\"] = 50] = \"fontInfo\";\n    EditorOption[EditorOption[\"fontLigatures\"] = 51] = \"fontLigatures\";\n    EditorOption[EditorOption[\"fontSize\"] = 52] = \"fontSize\";\n    EditorOption[EditorOption[\"fontWeight\"] = 53] = \"fontWeight\";\n    EditorOption[EditorOption[\"fontVariations\"] = 54] = \"fontVariations\";\n    EditorOption[EditorOption[\"formatOnPaste\"] = 55] = \"formatOnPaste\";\n    EditorOption[EditorOption[\"formatOnType\"] = 56] = \"formatOnType\";\n    EditorOption[EditorOption[\"glyphMargin\"] = 57] = \"glyphMargin\";\n    EditorOption[EditorOption[\"gotoLocation\"] = 58] = \"gotoLocation\";\n    EditorOption[EditorOption[\"hideCursorInOverviewRuler\"] = 59] = \"hideCursorInOverviewRuler\";\n    EditorOption[EditorOption[\"hover\"] = 60] = \"hover\";\n    EditorOption[EditorOption[\"inDiffEditor\"] = 61] = \"inDiffEditor\";\n    EditorOption[EditorOption[\"inlineSuggest\"] = 62] = \"inlineSuggest\";\n    EditorOption[EditorOption[\"letterSpacing\"] = 63] = \"letterSpacing\";\n    EditorOption[EditorOption[\"lightbulb\"] = 64] = \"lightbulb\";\n    EditorOption[EditorOption[\"lineDecorationsWidth\"] = 65] = \"lineDecorationsWidth\";\n    EditorOption[EditorOption[\"lineHeight\"] = 66] = \"lineHeight\";\n    EditorOption[EditorOption[\"lineNumbers\"] = 67] = \"lineNumbers\";\n    EditorOption[EditorOption[\"lineNumbersMinChars\"] = 68] = \"lineNumbersMinChars\";\n    EditorOption[EditorOption[\"linkedEditing\"] = 69] = \"linkedEditing\";\n    EditorOption[EditorOption[\"links\"] = 70] = \"links\";\n    EditorOption[EditorOption[\"matchBrackets\"] = 71] = \"matchBrackets\";\n    EditorOption[EditorOption[\"minimap\"] = 72] = \"minimap\";\n    EditorOption[EditorOption[\"mouseStyle\"] = 73] = \"mouseStyle\";\n    EditorOption[EditorOption[\"mouseWheelScrollSensitivity\"] = 74] = \"mouseWheelScrollSensitivity\";\n    EditorOption[EditorOption[\"mouseWheelZoom\"] = 75] = \"mouseWheelZoom\";\n    EditorOption[EditorOption[\"multiCursorMergeOverlapping\"] = 76] = \"multiCursorMergeOverlapping\";\n    EditorOption[EditorOption[\"multiCursorModifier\"] = 77] = \"multiCursorModifier\";\n    EditorOption[EditorOption[\"multiCursorPaste\"] = 78] = \"multiCursorPaste\";\n    EditorOption[EditorOption[\"multiCursorLimit\"] = 79] = \"multiCursorLimit\";\n    EditorOption[EditorOption[\"occurrencesHighlight\"] = 80] = \"occurrencesHighlight\";\n    EditorOption[EditorOption[\"overviewRulerBorder\"] = 81] = \"overviewRulerBorder\";\n    EditorOption[EditorOption[\"overviewRulerLanes\"] = 82] = \"overviewRulerLanes\";\n    EditorOption[EditorOption[\"padding\"] = 83] = \"padding\";\n    EditorOption[EditorOption[\"pasteAs\"] = 84] = \"pasteAs\";\n    EditorOption[EditorOption[\"parameterHints\"] = 85] = \"parameterHints\";\n    EditorOption[EditorOption[\"peekWidgetDefaultFocus\"] = 86] = \"peekWidgetDefaultFocus\";\n    EditorOption[EditorOption[\"definitionLinkOpensInPeek\"] = 87] = \"definitionLinkOpensInPeek\";\n    EditorOption[EditorOption[\"quickSuggestions\"] = 88] = \"quickSuggestions\";\n    EditorOption[EditorOption[\"quickSuggestionsDelay\"] = 89] = \"quickSuggestionsDelay\";\n    EditorOption[EditorOption[\"readOnly\"] = 90] = \"readOnly\";\n    EditorOption[EditorOption[\"readOnlyMessage\"] = 91] = \"readOnlyMessage\";\n    EditorOption[EditorOption[\"renameOnType\"] = 92] = \"renameOnType\";\n    EditorOption[EditorOption[\"renderControlCharacters\"] = 93] = \"renderControlCharacters\";\n    EditorOption[EditorOption[\"renderFinalNewline\"] = 94] = \"renderFinalNewline\";\n    EditorOption[EditorOption[\"renderLineHighlight\"] = 95] = \"renderLineHighlight\";\n    EditorOption[EditorOption[\"renderLineHighlightOnlyWhenFocus\"] = 96] = \"renderLineHighlightOnlyWhenFocus\";\n    EditorOption[EditorOption[\"renderValidationDecorations\"] = 97] = \"renderValidationDecorations\";\n    EditorOption[EditorOption[\"renderWhitespace\"] = 98] = \"renderWhitespace\";\n    EditorOption[EditorOption[\"revealHorizontalRightPadding\"] = 99] = \"revealHorizontalRightPadding\";\n    EditorOption[EditorOption[\"roundedSelection\"] = 100] = \"roundedSelection\";\n    EditorOption[EditorOption[\"rulers\"] = 101] = \"rulers\";\n    EditorOption[EditorOption[\"scrollbar\"] = 102] = \"scrollbar\";\n    EditorOption[EditorOption[\"scrollBeyondLastColumn\"] = 103] = \"scrollBeyondLastColumn\";\n    EditorOption[EditorOption[\"scrollBeyondLastLine\"] = 104] = \"scrollBeyondLastLine\";\n    EditorOption[EditorOption[\"scrollPredominantAxis\"] = 105] = \"scrollPredominantAxis\";\n    EditorOption[EditorOption[\"selectionClipboard\"] = 106] = \"selectionClipboard\";\n    EditorOption[EditorOption[\"selectionHighlight\"] = 107] = \"selectionHighlight\";\n    EditorOption[EditorOption[\"selectOnLineNumbers\"] = 108] = \"selectOnLineNumbers\";\n    EditorOption[EditorOption[\"showFoldingControls\"] = 109] = \"showFoldingControls\";\n    EditorOption[EditorOption[\"showUnused\"] = 110] = \"showUnused\";\n    EditorOption[EditorOption[\"snippetSuggestions\"] = 111] = \"snippetSuggestions\";\n    EditorOption[EditorOption[\"smartSelect\"] = 112] = \"smartSelect\";\n    EditorOption[EditorOption[\"smoothScrolling\"] = 113] = \"smoothScrolling\";\n    EditorOption[EditorOption[\"stickyScroll\"] = 114] = \"stickyScroll\";\n    EditorOption[EditorOption[\"stickyTabStops\"] = 115] = \"stickyTabStops\";\n    EditorOption[EditorOption[\"stopRenderingLineAfter\"] = 116] = \"stopRenderingLineAfter\";\n    EditorOption[EditorOption[\"suggest\"] = 117] = \"suggest\";\n    EditorOption[EditorOption[\"suggestFontSize\"] = 118] = \"suggestFontSize\";\n    EditorOption[EditorOption[\"suggestLineHeight\"] = 119] = \"suggestLineHeight\";\n    EditorOption[EditorOption[\"suggestOnTriggerCharacters\"] = 120] = \"suggestOnTriggerCharacters\";\n    EditorOption[EditorOption[\"suggestSelection\"] = 121] = \"suggestSelection\";\n    EditorOption[EditorOption[\"tabCompletion\"] = 122] = \"tabCompletion\";\n    EditorOption[EditorOption[\"tabIndex\"] = 123] = \"tabIndex\";\n    EditorOption[EditorOption[\"unicodeHighlighting\"] = 124] = \"unicodeHighlighting\";\n    EditorOption[EditorOption[\"unusualLineTerminators\"] = 125] = \"unusualLineTerminators\";\n    EditorOption[EditorOption[\"useShadowDOM\"] = 126] = \"useShadowDOM\";\n    EditorOption[EditorOption[\"useTabStops\"] = 127] = \"useTabStops\";\n    EditorOption[EditorOption[\"wordBreak\"] = 128] = \"wordBreak\";\n    EditorOption[EditorOption[\"wordSeparators\"] = 129] = \"wordSeparators\";\n    EditorOption[EditorOption[\"wordWrap\"] = 130] = \"wordWrap\";\n    EditorOption[EditorOption[\"wordWrapBreakAfterCharacters\"] = 131] = \"wordWrapBreakAfterCharacters\";\n    EditorOption[EditorOption[\"wordWrapBreakBeforeCharacters\"] = 132] = \"wordWrapBreakBeforeCharacters\";\n    EditorOption[EditorOption[\"wordWrapColumn\"] = 133] = \"wordWrapColumn\";\n    EditorOption[EditorOption[\"wordWrapOverride1\"] = 134] = \"wordWrapOverride1\";\n    EditorOption[EditorOption[\"wordWrapOverride2\"] = 135] = \"wordWrapOverride2\";\n    EditorOption[EditorOption[\"wrappingIndent\"] = 136] = \"wrappingIndent\";\n    EditorOption[EditorOption[\"wrappingStrategy\"] = 137] = \"wrappingStrategy\";\n    EditorOption[EditorOption[\"showDeprecated\"] = 138] = \"showDeprecated\";\n    EditorOption[EditorOption[\"inlayHints\"] = 139] = \"inlayHints\";\n    EditorOption[EditorOption[\"editorClassName\"] = 140] = \"editorClassName\";\n    EditorOption[EditorOption[\"pixelRatio\"] = 141] = \"pixelRatio\";\n    EditorOption[EditorOption[\"tabFocusMode\"] = 142] = \"tabFocusMode\";\n    EditorOption[EditorOption[\"layoutInfo\"] = 143] = \"layoutInfo\";\n    EditorOption[EditorOption[\"wrappingInfo\"] = 144] = \"wrappingInfo\";\n    EditorOption[EditorOption[\"defaultColorDecorators\"] = 145] = \"defaultColorDecorators\";\n    EditorOption[EditorOption[\"colorDecoratorsActivatedOn\"] = 146] = \"colorDecoratorsActivatedOn\";\n    EditorOption[EditorOption[\"inlineCompletionsAccessibilityVerbose\"] = 147] = \"inlineCompletionsAccessibilityVerbose\";\n})(EditorOption || (EditorOption = {}));\n/**\n * End of line character preference.\n */\nexport var EndOfLinePreference;\n(function (EndOfLinePreference) {\n    /**\n     * Use the end of line character identified in the text buffer.\n     */\n    EndOfLinePreference[EndOfLinePreference[\"TextDefined\"] = 0] = \"TextDefined\";\n    /**\n     * Use line feed (\\n) as the end of line character.\n     */\n    EndOfLinePreference[EndOfLinePreference[\"LF\"] = 1] = \"LF\";\n    /**\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\n     */\n    EndOfLinePreference[EndOfLinePreference[\"CRLF\"] = 2] = \"CRLF\";\n})(EndOfLinePreference || (EndOfLinePreference = {}));\n/**\n * End of line character preference.\n */\nexport var EndOfLineSequence;\n(function (EndOfLineSequence) {\n    /**\n     * Use line feed (\\n) as the end of line character.\n     */\n    EndOfLineSequence[EndOfLineSequence[\"LF\"] = 0] = \"LF\";\n    /**\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\n     */\n    EndOfLineSequence[EndOfLineSequence[\"CRLF\"] = 1] = \"CRLF\";\n})(EndOfLineSequence || (EndOfLineSequence = {}));\n/**\n * Vertical Lane in the glyph margin of the editor.\n */\nexport var GlyphMarginLane;\n(function (GlyphMarginLane) {\n    GlyphMarginLane[GlyphMarginLane[\"Left\"] = 1] = \"Left\";\n    GlyphMarginLane[GlyphMarginLane[\"Right\"] = 2] = \"Right\";\n})(GlyphMarginLane || (GlyphMarginLane = {}));\n/**\n * Describes what to do with the indentation when pressing Enter.\n */\nexport var IndentAction;\n(function (IndentAction) {\n    /**\n     * Insert new line and copy the previous line's indentation.\n     */\n    IndentAction[IndentAction[\"None\"] = 0] = \"None\";\n    /**\n     * Insert new line and indent once (relative to the previous line's indentation).\n     */\n    IndentAction[IndentAction[\"Indent\"] = 1] = \"Indent\";\n    /**\n     * Insert two new lines:\n     *  - the first one indented which will hold the cursor\n     *  - the second one at the same indentation level\n     */\n    IndentAction[IndentAction[\"IndentOutdent\"] = 2] = \"IndentOutdent\";\n    /**\n     * Insert new line and outdent once (relative to the previous line's indentation).\n     */\n    IndentAction[IndentAction[\"Outdent\"] = 3] = \"Outdent\";\n})(IndentAction || (IndentAction = {}));\nexport var InjectedTextCursorStops;\n(function (InjectedTextCursorStops) {\n    InjectedTextCursorStops[InjectedTextCursorStops[\"Both\"] = 0] = \"Both\";\n    InjectedTextCursorStops[InjectedTextCursorStops[\"Right\"] = 1] = \"Right\";\n    InjectedTextCursorStops[InjectedTextCursorStops[\"Left\"] = 2] = \"Left\";\n    InjectedTextCursorStops[InjectedTextCursorStops[\"None\"] = 3] = \"None\";\n})(InjectedTextCursorStops || (InjectedTextCursorStops = {}));\nexport var InlayHintKind;\n(function (InlayHintKind) {\n    InlayHintKind[InlayHintKind[\"Type\"] = 1] = \"Type\";\n    InlayHintKind[InlayHintKind[\"Parameter\"] = 2] = \"Parameter\";\n})(InlayHintKind || (InlayHintKind = {}));\n/**\n * How an {@link InlineCompletionsProvider inline completion provider} was triggered.\n */\nexport var InlineCompletionTriggerKind;\n(function (InlineCompletionTriggerKind) {\n    /**\n     * Completion was triggered automatically while editing.\n     * It is sufficient to return a single completion item in this case.\n     */\n    InlineCompletionTriggerKind[InlineCompletionTriggerKind[\"Automatic\"] = 0] = \"Automatic\";\n    /**\n     * Completion was triggered explicitly by a user gesture.\n     * Return multiple completion items to enable cycling through them.\n     */\n    InlineCompletionTriggerKind[InlineCompletionTriggerKind[\"Explicit\"] = 1] = \"Explicit\";\n})(InlineCompletionTriggerKind || (InlineCompletionTriggerKind = {}));\n/**\n * Virtual Key Codes, the value does not hold any inherent meaning.\n * Inspired somewhat from https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx\n * But these are \"more general\", as they should work across browsers & OS`s.\n */\nexport var KeyCode;\n(function (KeyCode) {\n    KeyCode[KeyCode[\"DependsOnKbLayout\"] = -1] = \"DependsOnKbLayout\";\n    /**\n     * Placed first to cover the 0 value of the enum.\n     */\n    KeyCode[KeyCode[\"Unknown\"] = 0] = \"Unknown\";\n    KeyCode[KeyCode[\"Backspace\"] = 1] = \"Backspace\";\n    KeyCode[KeyCode[\"Tab\"] = 2] = \"Tab\";\n    KeyCode[KeyCode[\"Enter\"] = 3] = \"Enter\";\n    KeyCode[KeyCode[\"Shift\"] = 4] = \"Shift\";\n    KeyCode[KeyCode[\"Ctrl\"] = 5] = \"Ctrl\";\n    KeyCode[KeyCode[\"Alt\"] = 6] = \"Alt\";\n    KeyCode[KeyCode[\"PauseBreak\"] = 7] = \"PauseBreak\";\n    KeyCode[KeyCode[\"CapsLock\"] = 8] = \"CapsLock\";\n    KeyCode[KeyCode[\"Escape\"] = 9] = \"Escape\";\n    KeyCode[KeyCode[\"Space\"] = 10] = \"Space\";\n    KeyCode[KeyCode[\"PageUp\"] = 11] = \"PageUp\";\n    KeyCode[KeyCode[\"PageDown\"] = 12] = \"PageDown\";\n    KeyCode[KeyCode[\"End\"] = 13] = \"End\";\n    KeyCode[KeyCode[\"Home\"] = 14] = \"Home\";\n    KeyCode[KeyCode[\"LeftArrow\"] = 15] = \"LeftArrow\";\n    KeyCode[KeyCode[\"UpArrow\"] = 16] = \"UpArrow\";\n    KeyCode[KeyCode[\"RightArrow\"] = 17] = \"RightArrow\";\n    KeyCode[KeyCode[\"DownArrow\"] = 18] = \"DownArrow\";\n    KeyCode[KeyCode[\"Insert\"] = 19] = \"Insert\";\n    KeyCode[KeyCode[\"Delete\"] = 20] = \"Delete\";\n    KeyCode[KeyCode[\"Digit0\"] = 21] = \"Digit0\";\n    KeyCode[KeyCode[\"Digit1\"] = 22] = \"Digit1\";\n    KeyCode[KeyCode[\"Digit2\"] = 23] = \"Digit2\";\n    KeyCode[KeyCode[\"Digit3\"] = 24] = \"Digit3\";\n    KeyCode[KeyCode[\"Digit4\"] = 25] = \"Digit4\";\n    KeyCode[KeyCode[\"Digit5\"] = 26] = \"Digit5\";\n    KeyCode[KeyCode[\"Digit6\"] = 27] = \"Digit6\";\n    KeyCode[KeyCode[\"Digit7\"] = 28] = \"Digit7\";\n    KeyCode[KeyCode[\"Digit8\"] = 29] = \"Digit8\";\n    KeyCode[KeyCode[\"Digit9\"] = 30] = \"Digit9\";\n    KeyCode[KeyCode[\"KeyA\"] = 31] = \"KeyA\";\n    KeyCode[KeyCode[\"KeyB\"] = 32] = \"KeyB\";\n    KeyCode[KeyCode[\"KeyC\"] = 33] = \"KeyC\";\n    KeyCode[KeyCode[\"KeyD\"] = 34] = \"KeyD\";\n    KeyCode[KeyCode[\"KeyE\"] = 35] = \"KeyE\";\n    KeyCode[KeyCode[\"KeyF\"] = 36] = \"KeyF\";\n    KeyCode[KeyCode[\"KeyG\"] = 37] = \"KeyG\";\n    KeyCode[KeyCode[\"KeyH\"] = 38] = \"KeyH\";\n    KeyCode[KeyCode[\"KeyI\"] = 39] = \"KeyI\";\n    KeyCode[KeyCode[\"KeyJ\"] = 40] = \"KeyJ\";\n    KeyCode[KeyCode[\"KeyK\"] = 41] = \"KeyK\";\n    KeyCode[KeyCode[\"KeyL\"] = 42] = \"KeyL\";\n    KeyCode[KeyCode[\"KeyM\"] = 43] = \"KeyM\";\n    KeyCode[KeyCode[\"KeyN\"] = 44] = \"KeyN\";\n    KeyCode[KeyCode[\"KeyO\"] = 45] = \"KeyO\";\n    KeyCode[KeyCode[\"KeyP\"] = 46] = \"KeyP\";\n    KeyCode[KeyCode[\"KeyQ\"] = 47] = \"KeyQ\";\n    KeyCode[KeyCode[\"KeyR\"] = 48] = \"KeyR\";\n    KeyCode[KeyCode[\"KeyS\"] = 49] = \"KeyS\";\n    KeyCode[KeyCode[\"KeyT\"] = 50] = \"KeyT\";\n    KeyCode[KeyCode[\"KeyU\"] = 51] = \"KeyU\";\n    KeyCode[KeyCode[\"KeyV\"] = 52] = \"KeyV\";\n    KeyCode[KeyCode[\"KeyW\"] = 53] = \"KeyW\";\n    KeyCode[KeyCode[\"KeyX\"] = 54] = \"KeyX\";\n    KeyCode[KeyCode[\"KeyY\"] = 55] = \"KeyY\";\n    KeyCode[KeyCode[\"KeyZ\"] = 56] = \"KeyZ\";\n    KeyCode[KeyCode[\"Meta\"] = 57] = \"Meta\";\n    KeyCode[KeyCode[\"ContextMenu\"] = 58] = \"ContextMenu\";\n    KeyCode[KeyCode[\"F1\"] = 59] = \"F1\";\n    KeyCode[KeyCode[\"F2\"] = 60] = \"F2\";\n    KeyCode[KeyCode[\"F3\"] = 61] = \"F3\";\n    KeyCode[KeyCode[\"F4\"] = 62] = \"F4\";\n    KeyCode[KeyCode[\"F5\"] = 63] = \"F5\";\n    KeyCode[KeyCode[\"F6\"] = 64] = \"F6\";\n    KeyCode[KeyCode[\"F7\"] = 65] = \"F7\";\n    KeyCode[KeyCode[\"F8\"] = 66] = \"F8\";\n    KeyCode[KeyCode[\"F9\"] = 67] = \"F9\";\n    KeyCode[KeyCode[\"F10\"] = 68] = \"F10\";\n    KeyCode[KeyCode[\"F11\"] = 69] = \"F11\";\n    KeyCode[KeyCode[\"F12\"] = 70] = \"F12\";\n    KeyCode[KeyCode[\"F13\"] = 71] = \"F13\";\n    KeyCode[KeyCode[\"F14\"] = 72] = \"F14\";\n    KeyCode[KeyCode[\"F15\"] = 73] = \"F15\";\n    KeyCode[KeyCode[\"F16\"] = 74] = \"F16\";\n    KeyCode[KeyCode[\"F17\"] = 75] = \"F17\";\n    KeyCode[KeyCode[\"F18\"] = 76] = \"F18\";\n    KeyCode[KeyCode[\"F19\"] = 77] = \"F19\";\n    KeyCode[KeyCode[\"F20\"] = 78] = \"F20\";\n    KeyCode[KeyCode[\"F21\"] = 79] = \"F21\";\n    KeyCode[KeyCode[\"F22\"] = 80] = \"F22\";\n    KeyCode[KeyCode[\"F23\"] = 81] = \"F23\";\n    KeyCode[KeyCode[\"F24\"] = 82] = \"F24\";\n    KeyCode[KeyCode[\"NumLock\"] = 83] = \"NumLock\";\n    KeyCode[KeyCode[\"ScrollLock\"] = 84] = \"ScrollLock\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the ';:' key\n     */\n    KeyCode[KeyCode[\"Semicolon\"] = 85] = \"Semicolon\";\n    /**\n     * For any country/region, the '+' key\n     * For the US standard keyboard, the '=+' key\n     */\n    KeyCode[KeyCode[\"Equal\"] = 86] = \"Equal\";\n    /**\n     * For any country/region, the ',' key\n     * For the US standard keyboard, the ',<' key\n     */\n    KeyCode[KeyCode[\"Comma\"] = 87] = \"Comma\";\n    /**\n     * For any country/region, the '-' key\n     * For the US standard keyboard, the '-_' key\n     */\n    KeyCode[KeyCode[\"Minus\"] = 88] = \"Minus\";\n    /**\n     * For any country/region, the '.' key\n     * For the US standard keyboard, the '.>' key\n     */\n    KeyCode[KeyCode[\"Period\"] = 89] = \"Period\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the '/?' key\n     */\n    KeyCode[KeyCode[\"Slash\"] = 90] = \"Slash\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the '`~' key\n     */\n    KeyCode[KeyCode[\"Backquote\"] = 91] = \"Backquote\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the '[{' key\n     */\n    KeyCode[KeyCode[\"BracketLeft\"] = 92] = \"BracketLeft\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the '\\|' key\n     */\n    KeyCode[KeyCode[\"Backslash\"] = 93] = \"Backslash\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the ']}' key\n     */\n    KeyCode[KeyCode[\"BracketRight\"] = 94] = \"BracketRight\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the ''\"' key\n     */\n    KeyCode[KeyCode[\"Quote\"] = 95] = \"Quote\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     */\n    KeyCode[KeyCode[\"OEM_8\"] = 96] = \"OEM_8\";\n    /**\n     * Either the angle bracket key or the backslash key on the RT 102-key keyboard.\n     */\n    KeyCode[KeyCode[\"IntlBackslash\"] = 97] = \"IntlBackslash\";\n    KeyCode[KeyCode[\"Numpad0\"] = 98] = \"Numpad0\";\n    KeyCode[KeyCode[\"Numpad1\"] = 99] = \"Numpad1\";\n    KeyCode[KeyCode[\"Numpad2\"] = 100] = \"Numpad2\";\n    KeyCode[KeyCode[\"Numpad3\"] = 101] = \"Numpad3\";\n    KeyCode[KeyCode[\"Numpad4\"] = 102] = \"Numpad4\";\n    KeyCode[KeyCode[\"Numpad5\"] = 103] = \"Numpad5\";\n    KeyCode[KeyCode[\"Numpad6\"] = 104] = \"Numpad6\";\n    KeyCode[KeyCode[\"Numpad7\"] = 105] = \"Numpad7\";\n    KeyCode[KeyCode[\"Numpad8\"] = 106] = \"Numpad8\";\n    KeyCode[KeyCode[\"Numpad9\"] = 107] = \"Numpad9\";\n    KeyCode[KeyCode[\"NumpadMultiply\"] = 108] = \"NumpadMultiply\";\n    KeyCode[KeyCode[\"NumpadAdd\"] = 109] = \"NumpadAdd\";\n    KeyCode[KeyCode[\"NUMPAD_SEPARATOR\"] = 110] = \"NUMPAD_SEPARATOR\";\n    KeyCode[KeyCode[\"NumpadSubtract\"] = 111] = \"NumpadSubtract\";\n    KeyCode[KeyCode[\"NumpadDecimal\"] = 112] = \"NumpadDecimal\";\n    KeyCode[KeyCode[\"NumpadDivide\"] = 113] = \"NumpadDivide\";\n    /**\n     * Cover all key codes when IME is processing input.\n     */\n    KeyCode[KeyCode[\"KEY_IN_COMPOSITION\"] = 114] = \"KEY_IN_COMPOSITION\";\n    KeyCode[KeyCode[\"ABNT_C1\"] = 115] = \"ABNT_C1\";\n    KeyCode[KeyCode[\"ABNT_C2\"] = 116] = \"ABNT_C2\";\n    KeyCode[KeyCode[\"AudioVolumeMute\"] = 117] = \"AudioVolumeMute\";\n    KeyCode[KeyCode[\"AudioVolumeUp\"] = 118] = \"AudioVolumeUp\";\n    KeyCode[KeyCode[\"AudioVolumeDown\"] = 119] = \"AudioVolumeDown\";\n    KeyCode[KeyCode[\"BrowserSearch\"] = 120] = \"BrowserSearch\";\n    KeyCode[KeyCode[\"BrowserHome\"] = 121] = \"BrowserHome\";\n    KeyCode[KeyCode[\"BrowserBack\"] = 122] = \"BrowserBack\";\n    KeyCode[KeyCode[\"BrowserForward\"] = 123] = \"BrowserForward\";\n    KeyCode[KeyCode[\"MediaTrackNext\"] = 124] = \"MediaTrackNext\";\n    KeyCode[KeyCode[\"MediaTrackPrevious\"] = 125] = \"MediaTrackPrevious\";\n    KeyCode[KeyCode[\"MediaStop\"] = 126] = \"MediaStop\";\n    KeyCode[KeyCode[\"MediaPlayPause\"] = 127] = \"MediaPlayPause\";\n    KeyCode[KeyCode[\"LaunchMediaPlayer\"] = 128] = \"LaunchMediaPlayer\";\n    KeyCode[KeyCode[\"LaunchMail\"] = 129] = \"LaunchMail\";\n    KeyCode[KeyCode[\"LaunchApp2\"] = 130] = \"LaunchApp2\";\n    /**\n     * VK_CLEAR, 0x0C, CLEAR key\n     */\n    KeyCode[KeyCode[\"Clear\"] = 131] = \"Clear\";\n    /**\n     * Placed last to cover the length of the enum.\n     * Please do not depend on this value!\n     */\n    KeyCode[KeyCode[\"MAX_VALUE\"] = 132] = \"MAX_VALUE\";\n})(KeyCode || (KeyCode = {}));\nexport var MarkerSeverity;\n(function (MarkerSeverity) {\n    MarkerSeverity[MarkerSeverity[\"Hint\"] = 1] = \"Hint\";\n    MarkerSeverity[MarkerSeverity[\"Info\"] = 2] = \"Info\";\n    MarkerSeverity[MarkerSeverity[\"Warning\"] = 4] = \"Warning\";\n    MarkerSeverity[MarkerSeverity[\"Error\"] = 8] = \"Error\";\n})(MarkerSeverity || (MarkerSeverity = {}));\nexport var MarkerTag;\n(function (MarkerTag) {\n    MarkerTag[MarkerTag[\"Unnecessary\"] = 1] = \"Unnecessary\";\n    MarkerTag[MarkerTag[\"Deprecated\"] = 2] = \"Deprecated\";\n})(MarkerTag || (MarkerTag = {}));\n/**\n * Position in the minimap to render the decoration.\n */\nexport var MinimapPosition;\n(function (MinimapPosition) {\n    MinimapPosition[MinimapPosition[\"Inline\"] = 1] = \"Inline\";\n    MinimapPosition[MinimapPosition[\"Gutter\"] = 2] = \"Gutter\";\n})(MinimapPosition || (MinimapPosition = {}));\n/**\n * Type of hit element with the mouse in the editor.\n */\nexport var MouseTargetType;\n(function (MouseTargetType) {\n    /**\n     * Mouse is on top of an unknown element.\n     */\n    MouseTargetType[MouseTargetType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /**\n     * Mouse is on top of the textarea used for input.\n     */\n    MouseTargetType[MouseTargetType[\"TEXTAREA\"] = 1] = \"TEXTAREA\";\n    /**\n     * Mouse is on top of the glyph margin\n     */\n    MouseTargetType[MouseTargetType[\"GUTTER_GLYPH_MARGIN\"] = 2] = \"GUTTER_GLYPH_MARGIN\";\n    /**\n     * Mouse is on top of the line numbers\n     */\n    MouseTargetType[MouseTargetType[\"GUTTER_LINE_NUMBERS\"] = 3] = \"GUTTER_LINE_NUMBERS\";\n    /**\n     * Mouse is on top of the line decorations\n     */\n    MouseTargetType[MouseTargetType[\"GUTTER_LINE_DECORATIONS\"] = 4] = \"GUTTER_LINE_DECORATIONS\";\n    /**\n     * Mouse is on top of the whitespace left in the gutter by a view zone.\n     */\n    MouseTargetType[MouseTargetType[\"GUTTER_VIEW_ZONE\"] = 5] = \"GUTTER_VIEW_ZONE\";\n    /**\n     * Mouse is on top of text in the content.\n     */\n    MouseTargetType[MouseTargetType[\"CONTENT_TEXT\"] = 6] = \"CONTENT_TEXT\";\n    /**\n     * Mouse is on top of empty space in the content (e.g. after line text or below last line)\n     */\n    MouseTargetType[MouseTargetType[\"CONTENT_EMPTY\"] = 7] = \"CONTENT_EMPTY\";\n    /**\n     * Mouse is on top of a view zone in the content.\n     */\n    MouseTargetType[MouseTargetType[\"CONTENT_VIEW_ZONE\"] = 8] = \"CONTENT_VIEW_ZONE\";\n    /**\n     * Mouse is on top of a content widget.\n     */\n    MouseTargetType[MouseTargetType[\"CONTENT_WIDGET\"] = 9] = \"CONTENT_WIDGET\";\n    /**\n     * Mouse is on top of the decorations overview ruler.\n     */\n    MouseTargetType[MouseTargetType[\"OVERVIEW_RULER\"] = 10] = \"OVERVIEW_RULER\";\n    /**\n     * Mouse is on top of a scrollbar.\n     */\n    MouseTargetType[MouseTargetType[\"SCROLLBAR\"] = 11] = \"SCROLLBAR\";\n    /**\n     * Mouse is on top of an overlay widget.\n     */\n    MouseTargetType[MouseTargetType[\"OVERLAY_WIDGET\"] = 12] = \"OVERLAY_WIDGET\";\n    /**\n     * Mouse is outside of the editor.\n     */\n    MouseTargetType[MouseTargetType[\"OUTSIDE_EDITOR\"] = 13] = \"OUTSIDE_EDITOR\";\n})(MouseTargetType || (MouseTargetType = {}));\n/**\n * A positioning preference for rendering overlay widgets.\n */\nexport var OverlayWidgetPositionPreference;\n(function (OverlayWidgetPositionPreference) {\n    /**\n     * Position the overlay widget in the top right corner\n     */\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"TOP_RIGHT_CORNER\"] = 0] = \"TOP_RIGHT_CORNER\";\n    /**\n     * Position the overlay widget in the bottom right corner\n     */\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"BOTTOM_RIGHT_CORNER\"] = 1] = \"BOTTOM_RIGHT_CORNER\";\n    /**\n     * Position the overlay widget in the top center\n     */\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"TOP_CENTER\"] = 2] = \"TOP_CENTER\";\n})(OverlayWidgetPositionPreference || (OverlayWidgetPositionPreference = {}));\n/**\n * Vertical Lane in the overview ruler of the editor.\n */\nexport var OverviewRulerLane;\n(function (OverviewRulerLane) {\n    OverviewRulerLane[OverviewRulerLane[\"Left\"] = 1] = \"Left\";\n    OverviewRulerLane[OverviewRulerLane[\"Center\"] = 2] = \"Center\";\n    OverviewRulerLane[OverviewRulerLane[\"Right\"] = 4] = \"Right\";\n    OverviewRulerLane[OverviewRulerLane[\"Full\"] = 7] = \"Full\";\n})(OverviewRulerLane || (OverviewRulerLane = {}));\nexport var PositionAffinity;\n(function (PositionAffinity) {\n    /**\n     * Prefers the left most position.\n    */\n    PositionAffinity[PositionAffinity[\"Left\"] = 0] = \"Left\";\n    /**\n     * Prefers the right most position.\n    */\n    PositionAffinity[PositionAffinity[\"Right\"] = 1] = \"Right\";\n    /**\n     * No preference.\n    */\n    PositionAffinity[PositionAffinity[\"None\"] = 2] = \"None\";\n    /**\n     * If the given position is on injected text, prefers the position left of it.\n    */\n    PositionAffinity[PositionAffinity[\"LeftOfInjectedText\"] = 3] = \"LeftOfInjectedText\";\n    /**\n     * If the given position is on injected text, prefers the position right of it.\n    */\n    PositionAffinity[PositionAffinity[\"RightOfInjectedText\"] = 4] = \"RightOfInjectedText\";\n})(PositionAffinity || (PositionAffinity = {}));\nexport var RenderLineNumbersType;\n(function (RenderLineNumbersType) {\n    RenderLineNumbersType[RenderLineNumbersType[\"Off\"] = 0] = \"Off\";\n    RenderLineNumbersType[RenderLineNumbersType[\"On\"] = 1] = \"On\";\n    RenderLineNumbersType[RenderLineNumbersType[\"Relative\"] = 2] = \"Relative\";\n    RenderLineNumbersType[RenderLineNumbersType[\"Interval\"] = 3] = \"Interval\";\n    RenderLineNumbersType[RenderLineNumbersType[\"Custom\"] = 4] = \"Custom\";\n})(RenderLineNumbersType || (RenderLineNumbersType = {}));\nexport var RenderMinimap;\n(function (RenderMinimap) {\n    RenderMinimap[RenderMinimap[\"None\"] = 0] = \"None\";\n    RenderMinimap[RenderMinimap[\"Text\"] = 1] = \"Text\";\n    RenderMinimap[RenderMinimap[\"Blocks\"] = 2] = \"Blocks\";\n})(RenderMinimap || (RenderMinimap = {}));\nexport var ScrollType;\n(function (ScrollType) {\n    ScrollType[ScrollType[\"Smooth\"] = 0] = \"Smooth\";\n    ScrollType[ScrollType[\"Immediate\"] = 1] = \"Immediate\";\n})(ScrollType || (ScrollType = {}));\nexport var ScrollbarVisibility;\n(function (ScrollbarVisibility) {\n    ScrollbarVisibility[ScrollbarVisibility[\"Auto\"] = 1] = \"Auto\";\n    ScrollbarVisibility[ScrollbarVisibility[\"Hidden\"] = 2] = \"Hidden\";\n    ScrollbarVisibility[ScrollbarVisibility[\"Visible\"] = 3] = \"Visible\";\n})(ScrollbarVisibility || (ScrollbarVisibility = {}));\n/**\n * The direction of a selection.\n */\nexport var SelectionDirection;\n(function (SelectionDirection) {\n    /**\n     * The selection starts above where it ends.\n     */\n    SelectionDirection[SelectionDirection[\"LTR\"] = 0] = \"LTR\";\n    /**\n     * The selection starts below where it ends.\n     */\n    SelectionDirection[SelectionDirection[\"RTL\"] = 1] = \"RTL\";\n})(SelectionDirection || (SelectionDirection = {}));\nexport var ShowAiIconMode;\n(function (ShowAiIconMode) {\n    ShowAiIconMode[\"Off\"] = \"off\";\n    ShowAiIconMode[\"OnCode\"] = \"onCode\";\n    ShowAiIconMode[\"On\"] = \"on\";\n})(ShowAiIconMode || (ShowAiIconMode = {}));\nexport var SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"Invoke\"] = 1] = \"Invoke\";\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"TriggerCharacter\"] = 2] = \"TriggerCharacter\";\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"ContentChange\"] = 3] = \"ContentChange\";\n})(SignatureHelpTriggerKind || (SignatureHelpTriggerKind = {}));\n/**\n * A symbol kind.\n */\nexport var SymbolKind;\n(function (SymbolKind) {\n    SymbolKind[SymbolKind[\"File\"] = 0] = \"File\";\n    SymbolKind[SymbolKind[\"Module\"] = 1] = \"Module\";\n    SymbolKind[SymbolKind[\"Namespace\"] = 2] = \"Namespace\";\n    SymbolKind[SymbolKind[\"Package\"] = 3] = \"Package\";\n    SymbolKind[SymbolKind[\"Class\"] = 4] = \"Class\";\n    SymbolKind[SymbolKind[\"Method\"] = 5] = \"Method\";\n    SymbolKind[SymbolKind[\"Property\"] = 6] = \"Property\";\n    SymbolKind[SymbolKind[\"Field\"] = 7] = \"Field\";\n    SymbolKind[SymbolKind[\"Constructor\"] = 8] = \"Constructor\";\n    SymbolKind[SymbolKind[\"Enum\"] = 9] = \"Enum\";\n    SymbolKind[SymbolKind[\"Interface\"] = 10] = \"Interface\";\n    SymbolKind[SymbolKind[\"Function\"] = 11] = \"Function\";\n    SymbolKind[SymbolKind[\"Variable\"] = 12] = \"Variable\";\n    SymbolKind[SymbolKind[\"Constant\"] = 13] = \"Constant\";\n    SymbolKind[SymbolKind[\"String\"] = 14] = \"String\";\n    SymbolKind[SymbolKind[\"Number\"] = 15] = \"Number\";\n    SymbolKind[SymbolKind[\"Boolean\"] = 16] = \"Boolean\";\n    SymbolKind[SymbolKind[\"Array\"] = 17] = \"Array\";\n    SymbolKind[SymbolKind[\"Object\"] = 18] = \"Object\";\n    SymbolKind[SymbolKind[\"Key\"] = 19] = \"Key\";\n    SymbolKind[SymbolKind[\"Null\"] = 20] = \"Null\";\n    SymbolKind[SymbolKind[\"EnumMember\"] = 21] = \"EnumMember\";\n    SymbolKind[SymbolKind[\"Struct\"] = 22] = \"Struct\";\n    SymbolKind[SymbolKind[\"Event\"] = 23] = \"Event\";\n    SymbolKind[SymbolKind[\"Operator\"] = 24] = \"Operator\";\n    SymbolKind[SymbolKind[\"TypeParameter\"] = 25] = \"TypeParameter\";\n})(SymbolKind || (SymbolKind = {}));\nexport var SymbolTag;\n(function (SymbolTag) {\n    SymbolTag[SymbolTag[\"Deprecated\"] = 1] = \"Deprecated\";\n})(SymbolTag || (SymbolTag = {}));\n/**\n * The kind of animation in which the editor's cursor should be rendered.\n */\nexport var TextEditorCursorBlinkingStyle;\n(function (TextEditorCursorBlinkingStyle) {\n    /**\n     * Hidden\n     */\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Hidden\"] = 0] = \"Hidden\";\n    /**\n     * Blinking\n     */\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Blink\"] = 1] = \"Blink\";\n    /**\n     * Blinking with smooth fading\n     */\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Smooth\"] = 2] = \"Smooth\";\n    /**\n     * Blinking with prolonged filled state and smooth fading\n     */\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Phase\"] = 3] = \"Phase\";\n    /**\n     * Expand collapse animation on the y axis\n     */\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Expand\"] = 4] = \"Expand\";\n    /**\n     * No-Blinking\n     */\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Solid\"] = 5] = \"Solid\";\n})(TextEditorCursorBlinkingStyle || (TextEditorCursorBlinkingStyle = {}));\n/**\n * The style in which the editor's cursor should be rendered.\n */\nexport var TextEditorCursorStyle;\n(function (TextEditorCursorStyle) {\n    /**\n     * As a vertical line (sitting between two characters).\n     */\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Line\"] = 1] = \"Line\";\n    /**\n     * As a block (sitting on top of a character).\n     */\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Block\"] = 2] = \"Block\";\n    /**\n     * As a horizontal line (sitting under a character).\n     */\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Underline\"] = 3] = \"Underline\";\n    /**\n     * As a thin vertical line (sitting between two characters).\n     */\n    TextEditorCursorStyle[TextEditorCursorStyle[\"LineThin\"] = 4] = \"LineThin\";\n    /**\n     * As an outlined block (sitting on top of a character).\n     */\n    TextEditorCursorStyle[TextEditorCursorStyle[\"BlockOutline\"] = 5] = \"BlockOutline\";\n    /**\n     * As a thin horizontal line (sitting under a character).\n     */\n    TextEditorCursorStyle[TextEditorCursorStyle[\"UnderlineThin\"] = 6] = \"UnderlineThin\";\n})(TextEditorCursorStyle || (TextEditorCursorStyle = {}));\n/**\n * Describes the behavior of decorations when typing/editing near their edges.\n * Note: Please do not edit the values, as they very carefully match `DecorationRangeBehavior`\n */\nexport var TrackedRangeStickiness;\n(function (TrackedRangeStickiness) {\n    TrackedRangeStickiness[TrackedRangeStickiness[\"AlwaysGrowsWhenTypingAtEdges\"] = 0] = \"AlwaysGrowsWhenTypingAtEdges\";\n    TrackedRangeStickiness[TrackedRangeStickiness[\"NeverGrowsWhenTypingAtEdges\"] = 1] = \"NeverGrowsWhenTypingAtEdges\";\n    TrackedRangeStickiness[TrackedRangeStickiness[\"GrowsOnlyWhenTypingBefore\"] = 2] = \"GrowsOnlyWhenTypingBefore\";\n    TrackedRangeStickiness[TrackedRangeStickiness[\"GrowsOnlyWhenTypingAfter\"] = 3] = \"GrowsOnlyWhenTypingAfter\";\n})(TrackedRangeStickiness || (TrackedRangeStickiness = {}));\n/**\n * Describes how to indent wrapped lines.\n */\nexport var WrappingIndent;\n(function (WrappingIndent) {\n    /**\n     * No indentation => wrapped lines begin at column 1.\n     */\n    WrappingIndent[WrappingIndent[\"None\"] = 0] = \"None\";\n    /**\n     * Same => wrapped lines get the same indentation as the parent.\n     */\n    WrappingIndent[WrappingIndent[\"Same\"] = 1] = \"Same\";\n    /**\n     * Indent => wrapped lines get +1 indentation toward the parent.\n     */\n    WrappingIndent[WrappingIndent[\"Indent\"] = 2] = \"Indent\";\n    /**\n     * DeepIndent => wrapped lines get +2 indentation toward the parent.\n     */\n    WrappingIndent[WrappingIndent[\"DeepIndent\"] = 3] = \"DeepIndent\";\n})(WrappingIndent || (WrappingIndent = {}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { Position } from '../core/position.js';\nimport { Range } from '../core/range.js';\nimport { Selection } from '../core/selection.js';\nimport { Token } from '../languages.js';\nimport * as standaloneEnums from '../standalone/standaloneEnums.js';\nexport class KeyMod {\n    static chord(firstPart, secondPart) {\n        return KeyChord(firstPart, secondPart);\n    }\n}\nKeyMod.CtrlCmd = 2048 /* ConstKeyMod.CtrlCmd */;\nKeyMod.Shift = 1024 /* ConstKeyMod.Shift */;\nKeyMod.Alt = 512 /* ConstKeyMod.Alt */;\nKeyMod.WinCtrl = 256 /* ConstKeyMod.WinCtrl */;\nexport function createMonacoBaseAPI() {\n    return {\n        editor: undefined, // undefined override expected here\n        languages: undefined, // undefined override expected here\n        CancellationTokenSource: CancellationTokenSource,\n        Emitter: Emitter,\n        KeyCode: standaloneEnums.KeyCode,\n        KeyMod: KeyMod,\n        Position: Position,\n        Range: Range,\n        Selection: Selection,\n        SelectionDirection: standaloneEnums.SelectionDirection,\n        MarkerSeverity: standaloneEnums.MarkerSeverity,\n        MarkerTag: standaloneEnums.MarkerTag,\n        Uri: URI,\n        Token: Token\n    };\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { splitLines } from '../../../base/common/strings.js';\nimport { URI } from '../../../base/common/uri.js';\nimport './standalone-tokens.css';\nimport { FontMeasurements } from '../../browser/config/fontMeasurements.js';\nimport { EditorCommand } from '../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { createWebWorker as actualCreateWebWorker } from '../../browser/services/webWorker.js';\nimport { ApplyUpdateResult, ConfigurationChangedEvent, EditorOptions } from '../../common/config/editorOptions.js';\nimport { EditorZoom } from '../../common/config/editorZoom.js';\nimport { BareFontInfo, FontInfo } from '../../common/config/fontInfo.js';\nimport { EditorType } from '../../common/editorCommon.js';\nimport * as languages from '../../common/languages.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../common/languages/modesRegistry.js';\nimport { NullState, nullTokenize } from '../../common/languages/nullTokenize.js';\nimport { FindMatch, TextModelResolvedOptions } from '../../common/model.js';\nimport { IModelService } from '../../common/services/model.js';\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\nimport { Colorizer } from './colorizer.js';\nimport { StandaloneDiffEditor2, StandaloneEditor, createTextModel } from './standaloneCodeEditor.js';\nimport { StandaloneKeybindingService, StandaloneServices } from './standaloneServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { MenuId, MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { MultiDiffEditorWidget } from '../../browser/widget/multiDiffEditorWidget/multiDiffEditorWidget.js';\n/**\n * Create a new editor under `domElement`.\n * `domElement` should be empty (not contain other dom nodes).\n * The editor will read the size of `domElement`.\n */\nexport function create(domElement, options, override) {\n    const instantiationService = StandaloneServices.initialize(override || {});\n    return instantiationService.createInstance(StandaloneEditor, domElement, options);\n}\n/**\n * Emitted when an editor is created.\n * Creating a diff editor might cause this listener to be invoked with the two editors.\n * @event\n */\nexport function onDidCreateEditor(listener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.onCodeEditorAdd((editor) => {\n        listener(editor);\n    });\n}\n/**\n * Emitted when an diff editor is created.\n * @event\n */\nexport function onDidCreateDiffEditor(listener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.onDiffEditorAdd((editor) => {\n        listener(editor);\n    });\n}\n/**\n * Get all the created editors.\n */\nexport function getEditors() {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.listCodeEditors();\n}\n/**\n * Get all the created diff editors.\n */\nexport function getDiffEditors() {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.listDiffEditors();\n}\n/**\n * Create a new diff editor under `domElement`.\n * `domElement` should be empty (not contain other dom nodes).\n * The editor will read the size of `domElement`.\n */\nexport function createDiffEditor(domElement, options, override) {\n    const instantiationService = StandaloneServices.initialize(override || {});\n    return instantiationService.createInstance(StandaloneDiffEditor2, domElement, options);\n}\nexport function createMultiFileDiffEditor(domElement, override) {\n    const instantiationService = StandaloneServices.initialize(override || {});\n    return new MultiDiffEditorWidget(domElement, {}, instantiationService);\n}\n/**\n * Add a command.\n */\nexport function addCommand(descriptor) {\n    if ((typeof descriptor.id !== 'string') || (typeof descriptor.run !== 'function')) {\n        throw new Error('Invalid command descriptor, `id` and `run` are required properties!');\n    }\n    return CommandsRegistry.registerCommand(descriptor.id, descriptor.run);\n}\n/**\n * Add an action to all editors.\n */\nexport function addEditorAction(descriptor) {\n    if ((typeof descriptor.id !== 'string') || (typeof descriptor.label !== 'string') || (typeof descriptor.run !== 'function')) {\n        throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\n    }\n    const precondition = ContextKeyExpr.deserialize(descriptor.precondition);\n    const run = (accessor, ...args) => {\n        return EditorCommand.runEditorCommand(accessor, args, precondition, (accessor, editor, args) => Promise.resolve(descriptor.run(editor, ...args)));\n    };\n    const toDispose = new DisposableStore();\n    // Register the command\n    toDispose.add(CommandsRegistry.registerCommand(descriptor.id, run));\n    // Register the context menu item\n    if (descriptor.contextMenuGroupId) {\n        const menuItem = {\n            command: {\n                id: descriptor.id,\n                title: descriptor.label\n            },\n            when: precondition,\n            group: descriptor.contextMenuGroupId,\n            order: descriptor.contextMenuOrder || 0\n        };\n        toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\n    }\n    // Register the keybindings\n    if (Array.isArray(descriptor.keybindings)) {\n        const keybindingService = StandaloneServices.get(IKeybindingService);\n        if (!(keybindingService instanceof StandaloneKeybindingService)) {\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n        }\n        else {\n            const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(descriptor.keybindingContext));\n            toDispose.add(keybindingService.addDynamicKeybindings(descriptor.keybindings.map((keybinding) => {\n                return {\n                    keybinding,\n                    command: descriptor.id,\n                    when: keybindingsWhen\n                };\n            })));\n        }\n    }\n    return toDispose;\n}\n/**\n * Add a keybinding rule.\n */\nexport function addKeybindingRule(rule) {\n    return addKeybindingRules([rule]);\n}\n/**\n * Add keybinding rules.\n */\nexport function addKeybindingRules(rules) {\n    const keybindingService = StandaloneServices.get(IKeybindingService);\n    if (!(keybindingService instanceof StandaloneKeybindingService)) {\n        console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n        return Disposable.None;\n    }\n    return keybindingService.addDynamicKeybindings(rules.map((rule) => {\n        return {\n            keybinding: rule.keybinding,\n            command: rule.command,\n            commandArgs: rule.commandArgs,\n            when: ContextKeyExpr.deserialize(rule.when),\n        };\n    }));\n}\n/**\n * Create a new editor model.\n * You can specify the language that should be set for this model or let the language be inferred from the `uri`.\n */\nexport function createModel(value, language, uri) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const languageId = languageService.getLanguageIdByMimeType(language) || language;\n    return createTextModel(StandaloneServices.get(IModelService), languageService, value, languageId, uri);\n}\n/**\n * Change the language for a model.\n */\nexport function setModelLanguage(model, mimeTypeOrLanguageId) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const languageId = languageService.getLanguageIdByMimeType(mimeTypeOrLanguageId) || mimeTypeOrLanguageId || PLAINTEXT_LANGUAGE_ID;\n    model.setLanguage(languageService.createById(languageId));\n}\n/**\n * Set the markers for a model.\n */\nexport function setModelMarkers(model, owner, markers) {\n    if (model) {\n        const markerService = StandaloneServices.get(IMarkerService);\n        markerService.changeOne(owner, model.uri, markers);\n    }\n}\n/**\n * Remove all markers of an owner.\n */\nexport function removeAllMarkers(owner) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    markerService.changeAll(owner, []);\n}\n/**\n * Get markers for owner and/or resource\n *\n * @returns list of markers\n */\nexport function getModelMarkers(filter) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    return markerService.read(filter);\n}\n/**\n * Emitted when markers change for a model.\n * @event\n */\nexport function onDidChangeMarkers(listener) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    return markerService.onMarkerChanged(listener);\n}\n/**\n * Get the model that has `uri` if it exists.\n */\nexport function getModel(uri) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.getModel(uri);\n}\n/**\n * Get all the created models.\n */\nexport function getModels() {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.getModels();\n}\n/**\n * Emitted when a model is created.\n * @event\n */\nexport function onDidCreateModel(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelAdded(listener);\n}\n/**\n * Emitted right before a model is disposed.\n * @event\n */\nexport function onWillDisposeModel(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelRemoved(listener);\n}\n/**\n * Emitted when a different language is set to a model.\n * @event\n */\nexport function onDidChangeModelLanguage(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelLanguageChanged((e) => {\n        listener({\n            model: e.model,\n            oldLanguage: e.oldLanguageId\n        });\n    });\n}\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(opts) {\n    return actualCreateWebWorker(StandaloneServices.get(IModelService), StandaloneServices.get(ILanguageConfigurationService), opts);\n}\n/**\n * Colorize the contents of `domNode` using attribute `data-lang`.\n */\nexport function colorizeElement(domNode, options) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    return Colorizer.colorizeElement(themeService, languageService, domNode, options).then(() => {\n        themeService.registerEditorContainer(domNode);\n    });\n}\n/**\n * Colorize `text` using language `languageId`.\n */\nexport function colorize(text, languageId, options) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(mainWindow.document.body);\n    return Colorizer.colorize(languageService, text, languageId, options);\n}\n/**\n * Colorize a line in a model.\n */\nexport function colorizeModelLine(model, lineNumber, tabSize = 4) {\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(mainWindow.document.body);\n    return Colorizer.colorizeModelLine(model, lineNumber, tabSize);\n}\n/**\n * @internal\n */\nfunction getSafeTokenizationSupport(language) {\n    const tokenizationSupport = languages.TokenizationRegistry.get(language);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(language, state)\n    };\n}\n/**\n * Tokenize `text` using language `languageId`\n */\nexport function tokenize(text, languageId) {\n    // Needed in order to get the mode registered for subsequent look-ups\n    languages.TokenizationRegistry.getOrCreate(languageId);\n    const tokenizationSupport = getSafeTokenizationSupport(languageId);\n    const lines = splitLines(text);\n    const result = [];\n    let state = tokenizationSupport.getInitialState();\n    for (let i = 0, len = lines.length; i < len; i++) {\n        const line = lines[i];\n        const tokenizationResult = tokenizationSupport.tokenize(line, true, state);\n        result[i] = tokenizationResult.tokens;\n        state = tokenizationResult.endState;\n    }\n    return result;\n}\n/**\n * Define a new theme or update an existing theme.\n */\nexport function defineTheme(themeName, themeData) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    standaloneThemeService.defineTheme(themeName, themeData);\n}\n/**\n * Switches to a theme.\n */\nexport function setTheme(themeName) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    standaloneThemeService.setTheme(themeName);\n}\n/**\n * Clears all cached font measurements and triggers re-measurement.\n */\nexport function remeasureFonts() {\n    FontMeasurements.clearAllFontInfos();\n}\n/**\n * Register a command.\n */\nexport function registerCommand(id, handler) {\n    return CommandsRegistry.registerCommand({ id, handler });\n}\n/**\n * Registers a handler that is called when a link is opened in any editor. The handler callback should return `true` if the link was handled and `false` otherwise.\n * The handler that was registered last will be called first when a link is opened.\n *\n * Returns a disposable that can unregister the opener again.\n */\nexport function registerLinkOpener(opener) {\n    const openerService = StandaloneServices.get(IOpenerService);\n    return openerService.registerOpener({\n        async open(resource) {\n            if (typeof resource === 'string') {\n                resource = URI.parse(resource);\n            }\n            return opener.open(resource);\n        }\n    });\n}\n/**\n * Registers a handler that is called when a resource other than the current model should be opened in the editor (e.g. \"go to definition\").\n * The handler callback should return `true` if the request was handled and `false` otherwise.\n *\n * Returns a disposable that can unregister the opener again.\n *\n * If no handler is registered the default behavior is to do nothing for models other than the currently attached one.\n */\nexport function registerEditorOpener(opener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.registerCodeEditorOpenHandler(async (input, source, sideBySide) => {\n        var _a;\n        if (!source) {\n            return null;\n        }\n        const selection = (_a = input.options) === null || _a === void 0 ? void 0 : _a.selection;\n        let selectionOrPosition;\n        if (selection && typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\n            selectionOrPosition = selection;\n        }\n        else if (selection) {\n            selectionOrPosition = { lineNumber: selection.startLineNumber, column: selection.startColumn };\n        }\n        if (await opener.openCodeEditor(source, input.resource, selectionOrPosition)) {\n            return source; // return source editor to indicate that this handler has successfully handled the opening\n        }\n        return null; // fallback to other registered handlers\n    });\n}\n/**\n * @internal\n */\nexport function createMonacoEditorAPI() {\n    return {\n        // methods\n        create: create,\n        getEditors: getEditors,\n        getDiffEditors: getDiffEditors,\n        onDidCreateEditor: onDidCreateEditor,\n        onDidCreateDiffEditor: onDidCreateDiffEditor,\n        createDiffEditor: createDiffEditor,\n        addCommand: addCommand,\n        addEditorAction: addEditorAction,\n        addKeybindingRule: addKeybindingRule,\n        addKeybindingRules: addKeybindingRules,\n        createModel: createModel,\n        setModelLanguage: setModelLanguage,\n        setModelMarkers: setModelMarkers,\n        getModelMarkers: getModelMarkers,\n        removeAllMarkers: removeAllMarkers,\n        onDidChangeMarkers: onDidChangeMarkers,\n        getModels: getModels,\n        getModel: getModel,\n        onDidCreateModel: onDidCreateModel,\n        onWillDisposeModel: onWillDisposeModel,\n        onDidChangeModelLanguage: onDidChangeModelLanguage,\n        createWebWorker: createWebWorker,\n        colorizeElement: colorizeElement,\n        colorize: colorize,\n        colorizeModelLine: colorizeModelLine,\n        tokenize: tokenize,\n        defineTheme: defineTheme,\n        setTheme: setTheme,\n        remeasureFonts: remeasureFonts,\n        registerCommand: registerCommand,\n        registerLinkOpener: registerLinkOpener,\n        registerEditorOpener: registerEditorOpener,\n        // enums\n        AccessibilitySupport: standaloneEnums.AccessibilitySupport,\n        ContentWidgetPositionPreference: standaloneEnums.ContentWidgetPositionPreference,\n        CursorChangeReason: standaloneEnums.CursorChangeReason,\n        DefaultEndOfLine: standaloneEnums.DefaultEndOfLine,\n        EditorAutoIndentStrategy: standaloneEnums.EditorAutoIndentStrategy,\n        EditorOption: standaloneEnums.EditorOption,\n        EndOfLinePreference: standaloneEnums.EndOfLinePreference,\n        EndOfLineSequence: standaloneEnums.EndOfLineSequence,\n        MinimapPosition: standaloneEnums.MinimapPosition,\n        MouseTargetType: standaloneEnums.MouseTargetType,\n        OverlayWidgetPositionPreference: standaloneEnums.OverlayWidgetPositionPreference,\n        OverviewRulerLane: standaloneEnums.OverviewRulerLane,\n        GlyphMarginLane: standaloneEnums.GlyphMarginLane,\n        RenderLineNumbersType: standaloneEnums.RenderLineNumbersType,\n        RenderMinimap: standaloneEnums.RenderMinimap,\n        ScrollbarVisibility: standaloneEnums.ScrollbarVisibility,\n        ScrollType: standaloneEnums.ScrollType,\n        TextEditorCursorBlinkingStyle: standaloneEnums.TextEditorCursorBlinkingStyle,\n        TextEditorCursorStyle: standaloneEnums.TextEditorCursorStyle,\n        TrackedRangeStickiness: standaloneEnums.TrackedRangeStickiness,\n        WrappingIndent: standaloneEnums.WrappingIndent,\n        InjectedTextCursorStops: standaloneEnums.InjectedTextCursorStops,\n        PositionAffinity: standaloneEnums.PositionAffinity,\n        ShowAiIconMode: standaloneEnums.ShowAiIconMode,\n        // classes\n        ConfigurationChangedEvent: ConfigurationChangedEvent,\n        BareFontInfo: BareFontInfo,\n        FontInfo: FontInfo,\n        TextModelResolvedOptions: TextModelResolvedOptions,\n        FindMatch: FindMatch,\n        ApplyUpdateResult: ApplyUpdateResult,\n        EditorZoom: EditorZoom,\n        createMultiFileDiffEditor: createMultiFileDiffEditor,\n        // vars\n        EditorType: EditorType,\n        EditorOptions: EditorOptions\n    };\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { transformErrorForSerialization } from '../errors.js';\nimport { Emitter } from '../event.js';\nimport { Disposable } from '../lifecycle.js';\nimport { getAllMethodNames } from '../objects.js';\nimport { isWeb } from '../platform.js';\nimport * as strings from '../strings.js';\nconst INITIALIZE = '$initialize';\nlet webWorkerWarningLogged = false;\nexport function logOnceWebWorkerWarning(err) {\n    if (!isWeb) {\n        // running tests\n        return;\n    }\n    if (!webWorkerWarningLogged) {\n        webWorkerWarningLogged = true;\n        console.warn('Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq');\n    }\n    console.warn(err.message);\n}\nclass RequestMessage {\n    constructor(vsWorker, req, method, args) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.method = method;\n        this.args = args;\n        this.type = 0 /* MessageType.Request */;\n    }\n}\nclass ReplyMessage {\n    constructor(vsWorker, seq, res, err) {\n        this.vsWorker = vsWorker;\n        this.seq = seq;\n        this.res = res;\n        this.err = err;\n        this.type = 1 /* MessageType.Reply */;\n    }\n}\nclass SubscribeEventMessage {\n    constructor(vsWorker, req, eventName, arg) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.eventName = eventName;\n        this.arg = arg;\n        this.type = 2 /* MessageType.SubscribeEvent */;\n    }\n}\nclass EventMessage {\n    constructor(vsWorker, req, event) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.event = event;\n        this.type = 3 /* MessageType.Event */;\n    }\n}\nclass UnsubscribeEventMessage {\n    constructor(vsWorker, req) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.type = 4 /* MessageType.UnsubscribeEvent */;\n    }\n}\nclass SimpleWorkerProtocol {\n    constructor(handler) {\n        this._workerId = -1;\n        this._handler = handler;\n        this._lastSentReq = 0;\n        this._pendingReplies = Object.create(null);\n        this._pendingEmitters = new Map();\n        this._pendingEvents = new Map();\n    }\n    setWorkerId(workerId) {\n        this._workerId = workerId;\n    }\n    sendMessage(method, args) {\n        const req = String(++this._lastSentReq);\n        return new Promise((resolve, reject) => {\n            this._pendingReplies[req] = {\n                resolve: resolve,\n                reject: reject\n            };\n            this._send(new RequestMessage(this._workerId, req, method, args));\n        });\n    }\n    listen(eventName, arg) {\n        let req = null;\n        const emitter = new Emitter({\n            onWillAddFirstListener: () => {\n                req = String(++this._lastSentReq);\n                this._pendingEmitters.set(req, emitter);\n                this._send(new SubscribeEventMessage(this._workerId, req, eventName, arg));\n            },\n            onDidRemoveLastListener: () => {\n                this._pendingEmitters.delete(req);\n                this._send(new UnsubscribeEventMessage(this._workerId, req));\n                req = null;\n            }\n        });\n        return emitter.event;\n    }\n    handleMessage(message) {\n        if (!message || !message.vsWorker) {\n            return;\n        }\n        if (this._workerId !== -1 && message.vsWorker !== this._workerId) {\n            return;\n        }\n        this._handleMessage(message);\n    }\n    _handleMessage(msg) {\n        switch (msg.type) {\n            case 1 /* MessageType.Reply */:\n                return this._handleReplyMessage(msg);\n            case 0 /* MessageType.Request */:\n                return this._handleRequestMessage(msg);\n            case 2 /* MessageType.SubscribeEvent */:\n                return this._handleSubscribeEventMessage(msg);\n            case 3 /* MessageType.Event */:\n                return this._handleEventMessage(msg);\n            case 4 /* MessageType.UnsubscribeEvent */:\n                return this._handleUnsubscribeEventMessage(msg);\n        }\n    }\n    _handleReplyMessage(replyMessage) {\n        if (!this._pendingReplies[replyMessage.seq]) {\n            console.warn('Got reply to unknown seq');\n            return;\n        }\n        const reply = this._pendingReplies[replyMessage.seq];\n        delete this._pendingReplies[replyMessage.seq];\n        if (replyMessage.err) {\n            let err = replyMessage.err;\n            if (replyMessage.err.$isError) {\n                err = new Error();\n                err.name = replyMessage.err.name;\n                err.message = replyMessage.err.message;\n                err.stack = replyMessage.err.stack;\n            }\n            reply.reject(err);\n            return;\n        }\n        reply.resolve(replyMessage.res);\n    }\n    _handleRequestMessage(requestMessage) {\n        const req = requestMessage.req;\n        const result = this._handler.handleMessage(requestMessage.method, requestMessage.args);\n        result.then((r) => {\n            this._send(new ReplyMessage(this._workerId, req, r, undefined));\n        }, (e) => {\n            if (e.detail instanceof Error) {\n                // Loading errors have a detail property that points to the actual error\n                e.detail = transformErrorForSerialization(e.detail);\n            }\n            this._send(new ReplyMessage(this._workerId, req, undefined, transformErrorForSerialization(e)));\n        });\n    }\n    _handleSubscribeEventMessage(msg) {\n        const req = msg.req;\n        const disposable = this._handler.handleEvent(msg.eventName, msg.arg)((event) => {\n            this._send(new EventMessage(this._workerId, req, event));\n        });\n        this._pendingEvents.set(req, disposable);\n    }\n    _handleEventMessage(msg) {\n        if (!this._pendingEmitters.has(msg.req)) {\n            console.warn('Got event for unknown req');\n            return;\n        }\n        this._pendingEmitters.get(msg.req).fire(msg.event);\n    }\n    _handleUnsubscribeEventMessage(msg) {\n        if (!this._pendingEvents.has(msg.req)) {\n            console.warn('Got unsubscribe for unknown req');\n            return;\n        }\n        this._pendingEvents.get(msg.req).dispose();\n        this._pendingEvents.delete(msg.req);\n    }\n    _send(msg) {\n        const transfer = [];\n        if (msg.type === 0 /* MessageType.Request */) {\n            for (let i = 0; i < msg.args.length; i++) {\n                if (msg.args[i] instanceof ArrayBuffer) {\n                    transfer.push(msg.args[i]);\n                }\n            }\n        }\n        else if (msg.type === 1 /* MessageType.Reply */) {\n            if (msg.res instanceof ArrayBuffer) {\n                transfer.push(msg.res);\n            }\n        }\n        this._handler.sendMessage(msg, transfer);\n    }\n}\n/**\n * Main thread side\n */\nexport class SimpleWorkerClient extends Disposable {\n    constructor(workerFactory, moduleId, host) {\n        super();\n        let lazyProxyReject = null;\n        this._worker = this._register(workerFactory.create('vs/base/common/worker/simpleWorker', (msg) => {\n            this._protocol.handleMessage(msg);\n        }, (err) => {\n            // in Firefox, web workers fail lazily :(\n            // we will reject the proxy\n            lazyProxyReject === null || lazyProxyReject === void 0 ? void 0 : lazyProxyReject(err);\n        }));\n        this._protocol = new SimpleWorkerProtocol({\n            sendMessage: (msg, transfer) => {\n                this._worker.postMessage(msg, transfer);\n            },\n            handleMessage: (method, args) => {\n                if (typeof host[method] !== 'function') {\n                    return Promise.reject(new Error('Missing method ' + method + ' on main thread host.'));\n                }\n                try {\n                    return Promise.resolve(host[method].apply(host, args));\n                }\n                catch (e) {\n                    return Promise.reject(e);\n                }\n            },\n            handleEvent: (eventName, arg) => {\n                if (propertyIsDynamicEvent(eventName)) {\n                    const event = host[eventName].call(host, arg);\n                    if (typeof event !== 'function') {\n                        throw new Error(`Missing dynamic event ${eventName} on main thread host.`);\n                    }\n                    return event;\n                }\n                if (propertyIsEvent(eventName)) {\n                    const event = host[eventName];\n                    if (typeof event !== 'function') {\n                        throw new Error(`Missing event ${eventName} on main thread host.`);\n                    }\n                    return event;\n                }\n                throw new Error(`Malformed event name ${eventName}`);\n            }\n        });\n        this._protocol.setWorkerId(this._worker.getId());\n        // Gather loader configuration\n        let loaderConfiguration = null;\n        const globalRequire = globalThis.require;\n        if (typeof globalRequire !== 'undefined' && typeof globalRequire.getConfig === 'function') {\n            // Get the configuration from the Monaco AMD Loader\n            loaderConfiguration = globalRequire.getConfig();\n        }\n        else if (typeof globalThis.requirejs !== 'undefined') {\n            // Get the configuration from requirejs\n            loaderConfiguration = globalThis.requirejs.s.contexts._.config;\n        }\n        const hostMethods = getAllMethodNames(host);\n        // Send initialize message\n        this._onModuleLoaded = this._protocol.sendMessage(INITIALIZE, [\n            this._worker.getId(),\n            JSON.parse(JSON.stringify(loaderConfiguration)),\n            moduleId,\n            hostMethods,\n        ]);\n        // Create proxy to loaded code\n        const proxyMethodRequest = (method, args) => {\n            return this._request(method, args);\n        };\n        const proxyListen = (eventName, arg) => {\n            return this._protocol.listen(eventName, arg);\n        };\n        this._lazyProxy = new Promise((resolve, reject) => {\n            lazyProxyReject = reject;\n            this._onModuleLoaded.then((availableMethods) => {\n                resolve(createProxyObject(availableMethods, proxyMethodRequest, proxyListen));\n            }, (e) => {\n                reject(e);\n                this._onError('Worker failed to load ' + moduleId, e);\n            });\n        });\n    }\n    getProxyObject() {\n        return this._lazyProxy;\n    }\n    _request(method, args) {\n        return new Promise((resolve, reject) => {\n            this._onModuleLoaded.then(() => {\n                this._protocol.sendMessage(method, args).then(resolve, reject);\n            }, reject);\n        });\n    }\n    _onError(message, error) {\n        console.error(message);\n        console.info(error);\n    }\n}\nfunction propertyIsEvent(name) {\n    // Assume a property is an event if it has a form of \"onSomething\"\n    return name[0] === 'o' && name[1] === 'n' && strings.isUpperAsciiLetter(name.charCodeAt(2));\n}\nfunction propertyIsDynamicEvent(name) {\n    // Assume a property is a dynamic event (a method that returns an event) if it has a form of \"onDynamicSomething\"\n    return /^onDynamic/.test(name) && strings.isUpperAsciiLetter(name.charCodeAt(9));\n}\nfunction createProxyObject(methodNames, invoke, proxyListen) {\n    const createProxyMethod = (method) => {\n        return function () {\n            const args = Array.prototype.slice.call(arguments, 0);\n            return invoke(method, args);\n        };\n    };\n    const createProxyDynamicEvent = (eventName) => {\n        return function (arg) {\n            return proxyListen(eventName, arg);\n        };\n    };\n    const result = {};\n    for (const methodName of methodNames) {\n        if (propertyIsDynamicEvent(methodName)) {\n            result[methodName] = createProxyDynamicEvent(methodName);\n            continue;\n        }\n        if (propertyIsEvent(methodName)) {\n            result[methodName] = proxyListen(methodName, undefined);\n            continue;\n        }\n        result[methodName] = createProxyMethod(methodName);\n    }\n    return result;\n}\n/**\n * Worker side\n */\nexport class SimpleWorkerServer {\n    constructor(postMessage, requestHandlerFactory) {\n        this._requestHandlerFactory = requestHandlerFactory;\n        this._requestHandler = null;\n        this._protocol = new SimpleWorkerProtocol({\n            sendMessage: (msg, transfer) => {\n                postMessage(msg, transfer);\n            },\n            handleMessage: (method, args) => this._handleMessage(method, args),\n            handleEvent: (eventName, arg) => this._handleEvent(eventName, arg)\n        });\n    }\n    onmessage(msg) {\n        this._protocol.handleMessage(msg);\n    }\n    _handleMessage(method, args) {\n        if (method === INITIALIZE) {\n            return this.initialize(args[0], args[1], args[2], args[3]);\n        }\n        if (!this._requestHandler || typeof this._requestHandler[method] !== 'function') {\n            return Promise.reject(new Error('Missing requestHandler or method: ' + method));\n        }\n        try {\n            return Promise.resolve(this._requestHandler[method].apply(this._requestHandler, args));\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    _handleEvent(eventName, arg) {\n        if (!this._requestHandler) {\n            throw new Error(`Missing requestHandler`);\n        }\n        if (propertyIsDynamicEvent(eventName)) {\n            const event = this._requestHandler[eventName].call(this._requestHandler, arg);\n            if (typeof event !== 'function') {\n                throw new Error(`Missing dynamic event ${eventName} on request handler.`);\n            }\n            return event;\n        }\n        if (propertyIsEvent(eventName)) {\n            const event = this._requestHandler[eventName];\n            if (typeof event !== 'function') {\n                throw new Error(`Missing event ${eventName} on request handler.`);\n            }\n            return event;\n        }\n        throw new Error(`Malformed event name ${eventName}`);\n    }\n    initialize(workerId, loaderConfig, moduleId, hostMethods) {\n        this._protocol.setWorkerId(workerId);\n        const proxyMethodRequest = (method, args) => {\n            return this._protocol.sendMessage(method, args);\n        };\n        const proxyListen = (eventName, arg) => {\n            return this._protocol.listen(eventName, arg);\n        };\n        const hostProxy = createProxyObject(hostMethods, proxyMethodRequest, proxyListen);\n        if (this._requestHandlerFactory) {\n            // static request handler\n            this._requestHandler = this._requestHandlerFactory(hostProxy);\n            return Promise.resolve(getAllMethodNames(this._requestHandler));\n        }\n        if (loaderConfig) {\n            // Remove 'baseUrl', handling it is beyond scope for now\n            if (typeof loaderConfig.baseUrl !== 'undefined') {\n                delete loaderConfig['baseUrl'];\n            }\n            if (typeof loaderConfig.paths !== 'undefined') {\n                if (typeof loaderConfig.paths.vs !== 'undefined') {\n                    delete loaderConfig.paths['vs'];\n                }\n            }\n            if (typeof loaderConfig.trustedTypesPolicy !== undefined) {\n                // don't use, it has been destroyed during serialize\n                delete loaderConfig['trustedTypesPolicy'];\n            }\n            // Since this is in a web worker, enable catching errors\n            loaderConfig.catchError = true;\n            globalThis.require.config(loaderConfig);\n        }\n        return new Promise((resolve, reject) => {\n            // Use the global require to be sure to get the global config\n            // ESM-comment-begin\n            // \t\t\tconst req = (globalThis.require || require);\n            // ESM-comment-end\n            // ESM-uncomment-begin\n            const req = globalThis.require;\n            // ESM-uncomment-end\n            req([moduleId], (module) => {\n                this._requestHandler = module.create(hostProxy);\n                if (!this._requestHandler) {\n                    reject(new Error(`No RequestHandler!`));\n                    return;\n                }\n                resolve(getAllMethodNames(this._requestHandler));\n            }, reject);\n        });\n    }\n}\n/**\n * Called on the worker side\n * @skipMangle\n */\nexport function create(postMessage) {\n    return new SimpleWorkerServer(postMessage, null);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createTrustedTypesPolicy } from './trustedTypes.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport { logOnceWebWorkerWarning } from '../common/worker/simpleWorker.js';\nconst ttPolicy = createTrustedTypesPolicy('defaultWorkerFactory', { createScriptURL: value => value });\nfunction getWorker(label) {\n    const monacoEnvironment = globalThis.MonacoEnvironment;\n    if (monacoEnvironment) {\n        if (typeof monacoEnvironment.getWorker === 'function') {\n            return monacoEnvironment.getWorker('workerMain.js', label);\n        }\n        if (typeof monacoEnvironment.getWorkerUrl === 'function') {\n            const workerUrl = monacoEnvironment.getWorkerUrl('workerMain.js', label);\n            return new Worker(ttPolicy ? ttPolicy.createScriptURL(workerUrl) : workerUrl, { name: label });\n        }\n    }\n    // ESM-comment-begin\n    // \tif (typeof require === 'function') {\n    // \t\t// check if the JS lives on a different origin\n    // \t\tconst workerMain = require.toUrl('vs/base/worker/workerMain.js'); // explicitly using require.toUrl(), see https://github.com/microsoft/vscode/issues/107440#issuecomment-698982321\n    // \t\tconst workerUrl = getWorkerBootstrapUrl(workerMain, label);\n    // \t\treturn new Worker(ttPolicy ? ttPolicy.createScriptURL(workerUrl) as unknown as string : workerUrl, { name: label });\n    // \t}\n    // ESM-comment-end\n    throw new Error(`You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker`);\n}\n// ESM-comment-begin\n// export function getWorkerBootstrapUrl(scriptPath: string, label: string): string {\n// \tif (/^((http:)|(https:)|(file:))/.test(scriptPath) && scriptPath.substring(0, globalThis.origin.length) !== globalThis.origin) {\n// \t\t// this is the cross-origin case\n// \t\t// i.e. the webpage is running at a different origin than where the scripts are loaded from\n// \t\tconst myPath = 'vs/base/worker/defaultWorkerFactory.js';\n// \t\tconst workerBaseUrl = require.toUrl(myPath).slice(0, -myPath.length); // explicitly using require.toUrl(), see https://github.com/microsoft/vscode/issues/107440#issuecomment-698982321\n// \t\tconst js = `/*${label}*/globalThis.MonacoEnvironment={baseUrl: '${workerBaseUrl}'};const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });importScripts(ttPolicy?.createScriptURL('${scriptPath}') ?? '${scriptPath}');/*${label}*/`;\n// \t\tconst blob = new Blob([js], { type: 'application/javascript' });\n// \t\treturn URL.createObjectURL(blob);\n// \t}\n// \n// \tconst start = scriptPath.lastIndexOf('?');\n// \tconst end = scriptPath.lastIndexOf('#', start);\n// \tconst params = start > 0\n// \t\t? new URLSearchParams(scriptPath.substring(start + 1, ~end ? end : undefined))\n// \t\t: new URLSearchParams();\n// \n// \tCOI.addSearchParam(params, true, true);\n// \tconst search = params.toString();\n// \n// \tif (!search) {\n// \t\treturn `${scriptPath}#${label}`;\n// \t} else {\n// \t\treturn `${scriptPath}?${params.toString()}#${label}`;\n// \t}\n// }\n// ESM-comment-end\nfunction isPromiseLike(obj) {\n    if (typeof obj.then === 'function') {\n        return true;\n    }\n    return false;\n}\n/**\n * A worker that uses HTML5 web workers so that is has\n * its own global scope and its own thread.\n */\nclass WebWorker {\n    constructor(moduleId, id, label, onMessageCallback, onErrorCallback) {\n        this.id = id;\n        this.label = label;\n        const workerOrPromise = getWorker(label);\n        if (isPromiseLike(workerOrPromise)) {\n            this.worker = workerOrPromise;\n        }\n        else {\n            this.worker = Promise.resolve(workerOrPromise);\n        }\n        this.postMessage(moduleId, []);\n        this.worker.then((w) => {\n            w.onmessage = function (ev) {\n                onMessageCallback(ev.data);\n            };\n            w.onmessageerror = onErrorCallback;\n            if (typeof w.addEventListener === 'function') {\n                w.addEventListener('error', onErrorCallback);\n            }\n        });\n    }\n    getId() {\n        return this.id;\n    }\n    postMessage(message, transfer) {\n        var _a;\n        (_a = this.worker) === null || _a === void 0 ? void 0 : _a.then(w => {\n            try {\n                w.postMessage(message, transfer);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n                onUnexpectedError(new Error(`FAILED to post message to '${this.label}'-worker`, { cause: err }));\n            }\n        });\n    }\n    dispose() {\n        var _a;\n        (_a = this.worker) === null || _a === void 0 ? void 0 : _a.then(w => w.terminate());\n        this.worker = null;\n    }\n}\nexport class DefaultWorkerFactory {\n    constructor(label) {\n        this._label = label;\n        this._webWorkerFailedBeforeError = false;\n    }\n    create(moduleId, onMessageCallback, onErrorCallback) {\n        const workerId = (++DefaultWorkerFactory.LAST_WORKER_ID);\n        if (this._webWorkerFailedBeforeError) {\n            throw this._webWorkerFailedBeforeError;\n        }\n        return new WebWorker(moduleId, workerId, this._label || 'anonymous' + workerId, onMessageCallback, (err) => {\n            logOnceWebWorkerWarning(err);\n            this._webWorkerFailedBeforeError = err;\n            onErrorCallback(err);\n        });\n    }\n}\nDefaultWorkerFactory.LAST_WORKER_ID = 0;\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { splitLines } from '../../../base/common/strings.js';\nimport { Position } from '../core/position.js';\nimport { PrefixSumComputer } from './prefixSumComputer.js';\nexport class MirrorTextModel {\n    constructor(uri, lines, eol, versionId) {\n        this._uri = uri;\n        this._lines = lines;\n        this._eol = eol;\n        this._versionId = versionId;\n        this._lineStarts = null;\n        this._cachedTextValue = null;\n    }\n    dispose() {\n        this._lines.length = 0;\n    }\n    get version() {\n        return this._versionId;\n    }\n    getText() {\n        if (this._cachedTextValue === null) {\n            this._cachedTextValue = this._lines.join(this._eol);\n        }\n        return this._cachedTextValue;\n    }\n    onEvents(e) {\n        if (e.eol && e.eol !== this._eol) {\n            this._eol = e.eol;\n            this._lineStarts = null;\n        }\n        // Update my lines\n        const changes = e.changes;\n        for (const change of changes) {\n            this._acceptDeleteRange(change.range);\n            this._acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\n        }\n        this._versionId = e.versionId;\n        this._cachedTextValue = null;\n    }\n    _ensureLineStarts() {\n        if (!this._lineStarts) {\n            const eolLength = this._eol.length;\n            const linesLength = this._lines.length;\n            const lineStartValues = new Uint32Array(linesLength);\n            for (let i = 0; i < linesLength; i++) {\n                lineStartValues[i] = this._lines[i].length + eolLength;\n            }\n            this._lineStarts = new PrefixSumComputer(lineStartValues);\n        }\n    }\n    /**\n     * All changes to a line's text go through this method\n     */\n    _setLineText(lineIndex, newValue) {\n        this._lines[lineIndex] = newValue;\n        if (this._lineStarts) {\n            // update prefix sum\n            this._lineStarts.setValue(lineIndex, this._lines[lineIndex].length + this._eol.length);\n        }\n    }\n    _acceptDeleteRange(range) {\n        if (range.startLineNumber === range.endLineNumber) {\n            if (range.startColumn === range.endColumn) {\n                // Nothing to delete\n                return;\n            }\n            // Delete text on the affected line\n            this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n                + this._lines[range.startLineNumber - 1].substring(range.endColumn - 1));\n            return;\n        }\n        // Take remaining text on last line and append it to remaining text on first line\n        this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n            + this._lines[range.endLineNumber - 1].substring(range.endColumn - 1));\n        // Delete middle lines\n        this._lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        if (this._lineStarts) {\n            // update prefix sum\n            this._lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        }\n    }\n    _acceptInsertText(position, insertText) {\n        if (insertText.length === 0) {\n            // Nothing to insert\n            return;\n        }\n        const insertLines = splitLines(insertText);\n        if (insertLines.length === 1) {\n            // Inserting text on one line\n            this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1)\n                + insertLines[0]\n                + this._lines[position.lineNumber - 1].substring(position.column - 1));\n            return;\n        }\n        // Append overflowing text from first line to the end of text to insert\n        insertLines[insertLines.length - 1] += this._lines[position.lineNumber - 1].substring(position.column - 1);\n        // Delete overflowing text from first line and insert text on first line\n        this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1)\n            + insertLines[0]);\n        // Insert new lines & store lengths\n        const newLengths = new Uint32Array(insertLines.length - 1);\n        for (let i = 1; i < insertLines.length; i++) {\n            this._lines.splice(position.lineNumber + i - 1, 0, insertLines[i]);\n            newLengths[i - 1] = insertLines[i].length + this._eol.length;\n        }\n        if (this._lineStarts) {\n            // update prefix sum\n            this._lineStarts.insertValues(position.lineNumber, newLengths);\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CharacterClassifier } from '../core/characterClassifier.js';\nclass Uint8Matrix {\n    constructor(rows, cols, defaultValue) {\n        const data = new Uint8Array(rows * cols);\n        for (let i = 0, len = rows * cols; i < len; i++) {\n            data[i] = defaultValue;\n        }\n        this._data = data;\n        this.rows = rows;\n        this.cols = cols;\n    }\n    get(row, col) {\n        return this._data[row * this.cols + col];\n    }\n    set(row, col, value) {\n        this._data[row * this.cols + col] = value;\n    }\n}\nexport class StateMachine {\n    constructor(edges) {\n        let maxCharCode = 0;\n        let maxState = 0 /* State.Invalid */;\n        for (let i = 0, len = edges.length; i < len; i++) {\n            const [from, chCode, to] = edges[i];\n            if (chCode > maxCharCode) {\n                maxCharCode = chCode;\n            }\n            if (from > maxState) {\n                maxState = from;\n            }\n            if (to > maxState) {\n                maxState = to;\n            }\n        }\n        maxCharCode++;\n        maxState++;\n        const states = new Uint8Matrix(maxState, maxCharCode, 0 /* State.Invalid */);\n        for (let i = 0, len = edges.length; i < len; i++) {\n            const [from, chCode, to] = edges[i];\n            states.set(from, chCode, to);\n        }\n        this._states = states;\n        this._maxCharCode = maxCharCode;\n    }\n    nextState(currentState, chCode) {\n        if (chCode < 0 || chCode >= this._maxCharCode) {\n            return 0 /* State.Invalid */;\n        }\n        return this._states.get(currentState, chCode);\n    }\n}\n// State machine for http:// or https:// or file://\nlet _stateMachine = null;\nfunction getStateMachine() {\n    if (_stateMachine === null) {\n        _stateMachine = new StateMachine([\n            [1 /* State.Start */, 104 /* CharCode.h */, 2 /* State.H */],\n            [1 /* State.Start */, 72 /* CharCode.H */, 2 /* State.H */],\n            [1 /* State.Start */, 102 /* CharCode.f */, 6 /* State.F */],\n            [1 /* State.Start */, 70 /* CharCode.F */, 6 /* State.F */],\n            [2 /* State.H */, 116 /* CharCode.t */, 3 /* State.HT */],\n            [2 /* State.H */, 84 /* CharCode.T */, 3 /* State.HT */],\n            [3 /* State.HT */, 116 /* CharCode.t */, 4 /* State.HTT */],\n            [3 /* State.HT */, 84 /* CharCode.T */, 4 /* State.HTT */],\n            [4 /* State.HTT */, 112 /* CharCode.p */, 5 /* State.HTTP */],\n            [4 /* State.HTT */, 80 /* CharCode.P */, 5 /* State.HTTP */],\n            [5 /* State.HTTP */, 115 /* CharCode.s */, 9 /* State.BeforeColon */],\n            [5 /* State.HTTP */, 83 /* CharCode.S */, 9 /* State.BeforeColon */],\n            [5 /* State.HTTP */, 58 /* CharCode.Colon */, 10 /* State.AfterColon */],\n            [6 /* State.F */, 105 /* CharCode.i */, 7 /* State.FI */],\n            [6 /* State.F */, 73 /* CharCode.I */, 7 /* State.FI */],\n            [7 /* State.FI */, 108 /* CharCode.l */, 8 /* State.FIL */],\n            [7 /* State.FI */, 76 /* CharCode.L */, 8 /* State.FIL */],\n            [8 /* State.FIL */, 101 /* CharCode.e */, 9 /* State.BeforeColon */],\n            [8 /* State.FIL */, 69 /* CharCode.E */, 9 /* State.BeforeColon */],\n            [9 /* State.BeforeColon */, 58 /* CharCode.Colon */, 10 /* State.AfterColon */],\n            [10 /* State.AfterColon */, 47 /* CharCode.Slash */, 11 /* State.AlmostThere */],\n            [11 /* State.AlmostThere */, 47 /* CharCode.Slash */, 12 /* State.End */],\n        ]);\n    }\n    return _stateMachine;\n}\nlet _classifier = null;\nfunction getClassifier() {\n    if (_classifier === null) {\n        _classifier = new CharacterClassifier(0 /* CharacterClass.None */);\n        // allow-any-unicode-next-line\n        const FORCE_TERMINATION_CHARACTERS = ' \\t<>\\'\\\"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…';\n        for (let i = 0; i < FORCE_TERMINATION_CHARACTERS.length; i++) {\n            _classifier.set(FORCE_TERMINATION_CHARACTERS.charCodeAt(i), 1 /* CharacterClass.ForceTermination */);\n        }\n        const CANNOT_END_WITH_CHARACTERS = '.,;:';\n        for (let i = 0; i < CANNOT_END_WITH_CHARACTERS.length; i++) {\n            _classifier.set(CANNOT_END_WITH_CHARACTERS.charCodeAt(i), 2 /* CharacterClass.CannotEndIn */);\n        }\n    }\n    return _classifier;\n}\nexport class LinkComputer {\n    static _createLink(classifier, line, lineNumber, linkBeginIndex, linkEndIndex) {\n        // Do not allow to end link in certain characters...\n        let lastIncludedCharIndex = linkEndIndex - 1;\n        do {\n            const chCode = line.charCodeAt(lastIncludedCharIndex);\n            const chClass = classifier.get(chCode);\n            if (chClass !== 2 /* CharacterClass.CannotEndIn */) {\n                break;\n            }\n            lastIncludedCharIndex--;\n        } while (lastIncludedCharIndex > linkBeginIndex);\n        // Handle links enclosed in parens, square brackets and curlys.\n        if (linkBeginIndex > 0) {\n            const charCodeBeforeLink = line.charCodeAt(linkBeginIndex - 1);\n            const lastCharCodeInLink = line.charCodeAt(lastIncludedCharIndex);\n            if ((charCodeBeforeLink === 40 /* CharCode.OpenParen */ && lastCharCodeInLink === 41 /* CharCode.CloseParen */)\n                || (charCodeBeforeLink === 91 /* CharCode.OpenSquareBracket */ && lastCharCodeInLink === 93 /* CharCode.CloseSquareBracket */)\n                || (charCodeBeforeLink === 123 /* CharCode.OpenCurlyBrace */ && lastCharCodeInLink === 125 /* CharCode.CloseCurlyBrace */)) {\n                // Do not end in ) if ( is before the link start\n                // Do not end in ] if [ is before the link start\n                // Do not end in } if { is before the link start\n                lastIncludedCharIndex--;\n            }\n        }\n        return {\n            range: {\n                startLineNumber: lineNumber,\n                startColumn: linkBeginIndex + 1,\n                endLineNumber: lineNumber,\n                endColumn: lastIncludedCharIndex + 2\n            },\n            url: line.substring(linkBeginIndex, lastIncludedCharIndex + 1)\n        };\n    }\n    static computeLinks(model, stateMachine = getStateMachine()) {\n        const classifier = getClassifier();\n        const result = [];\n        for (let i = 1, lineCount = model.getLineCount(); i <= lineCount; i++) {\n            const line = model.getLineContent(i);\n            const len = line.length;\n            let j = 0;\n            let linkBeginIndex = 0;\n            let linkBeginChCode = 0;\n            let state = 1 /* State.Start */;\n            let hasOpenParens = false;\n            let hasOpenSquareBracket = false;\n            let inSquareBrackets = false;\n            let hasOpenCurlyBracket = false;\n            while (j < len) {\n                let resetStateMachine = false;\n                const chCode = line.charCodeAt(j);\n                if (state === 13 /* State.Accept */) {\n                    let chClass;\n                    switch (chCode) {\n                        case 40 /* CharCode.OpenParen */:\n                            hasOpenParens = true;\n                            chClass = 0 /* CharacterClass.None */;\n                            break;\n                        case 41 /* CharCode.CloseParen */:\n                            chClass = (hasOpenParens ? 0 /* CharacterClass.None */ : 1 /* CharacterClass.ForceTermination */);\n                            break;\n                        case 91 /* CharCode.OpenSquareBracket */:\n                            inSquareBrackets = true;\n                            hasOpenSquareBracket = true;\n                            chClass = 0 /* CharacterClass.None */;\n                            break;\n                        case 93 /* CharCode.CloseSquareBracket */:\n                            inSquareBrackets = false;\n                            chClass = (hasOpenSquareBracket ? 0 /* CharacterClass.None */ : 1 /* CharacterClass.ForceTermination */);\n                            break;\n                        case 123 /* CharCode.OpenCurlyBrace */:\n                            hasOpenCurlyBracket = true;\n                            chClass = 0 /* CharacterClass.None */;\n                            break;\n                        case 125 /* CharCode.CloseCurlyBrace */:\n                            chClass = (hasOpenCurlyBracket ? 0 /* CharacterClass.None */ : 1 /* CharacterClass.ForceTermination */);\n                            break;\n                        // The following three rules make it that ' or \" or ` are allowed inside links\n                        // only if the link is wrapped by some other quote character\n                        case 39 /* CharCode.SingleQuote */:\n                        case 34 /* CharCode.DoubleQuote */:\n                        case 96 /* CharCode.BackTick */:\n                            if (linkBeginChCode === chCode) {\n                                chClass = 1 /* CharacterClass.ForceTermination */;\n                            }\n                            else if (linkBeginChCode === 39 /* CharCode.SingleQuote */ || linkBeginChCode === 34 /* CharCode.DoubleQuote */ || linkBeginChCode === 96 /* CharCode.BackTick */) {\n                                chClass = 0 /* CharacterClass.None */;\n                            }\n                            else {\n                                chClass = 1 /* CharacterClass.ForceTermination */;\n                            }\n                            break;\n                        case 42 /* CharCode.Asterisk */:\n                            // `*` terminates a link if the link began with `*`\n                            chClass = (linkBeginChCode === 42 /* CharCode.Asterisk */) ? 1 /* CharacterClass.ForceTermination */ : 0 /* CharacterClass.None */;\n                            break;\n                        case 124 /* CharCode.Pipe */:\n                            // `|` terminates a link if the link began with `|`\n                            chClass = (linkBeginChCode === 124 /* CharCode.Pipe */) ? 1 /* CharacterClass.ForceTermination */ : 0 /* CharacterClass.None */;\n                            break;\n                        case 32 /* CharCode.Space */:\n                            // ` ` allow space in between [ and ]\n                            chClass = (inSquareBrackets ? 0 /* CharacterClass.None */ : 1 /* CharacterClass.ForceTermination */);\n                            break;\n                        default:\n                            chClass = classifier.get(chCode);\n                    }\n                    // Check if character terminates link\n                    if (chClass === 1 /* CharacterClass.ForceTermination */) {\n                        result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, j));\n                        resetStateMachine = true;\n                    }\n                }\n                else if (state === 12 /* State.End */) {\n                    let chClass;\n                    if (chCode === 91 /* CharCode.OpenSquareBracket */) {\n                        // Allow for the authority part to contain ipv6 addresses which contain [ and ]\n                        hasOpenSquareBracket = true;\n                        chClass = 0 /* CharacterClass.None */;\n                    }\n                    else {\n                        chClass = classifier.get(chCode);\n                    }\n                    // Check if character terminates link\n                    if (chClass === 1 /* CharacterClass.ForceTermination */) {\n                        resetStateMachine = true;\n                    }\n                    else {\n                        state = 13 /* State.Accept */;\n                    }\n                }\n                else {\n                    state = stateMachine.nextState(state, chCode);\n                    if (state === 0 /* State.Invalid */) {\n                        resetStateMachine = true;\n                    }\n                }\n                if (resetStateMachine) {\n                    state = 1 /* State.Start */;\n                    hasOpenParens = false;\n                    hasOpenSquareBracket = false;\n                    hasOpenCurlyBracket = false;\n                    // Record where the link started\n                    linkBeginIndex = j + 1;\n                    linkBeginChCode = chCode;\n                }\n                j++;\n            }\n            if (state === 13 /* State.Accept */) {\n                result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, len));\n            }\n        }\n        return result;\n    }\n}\n/**\n * Returns an array of all links contains in the provided\n * document. *Note* that this operation is computational\n * expensive and should not run in the UI thread.\n */\nexport function computeLinks(model) {\n    if (!model || typeof model.getLineCount !== 'function' || typeof model.getLineContent !== 'function') {\n        // Unknown caller!\n        return [];\n    }\n    return LinkComputer.computeLinks(model);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class BasicInplaceReplace {\n    constructor() {\n        this._defaultValueSet = [\n            ['true', 'false'],\n            ['True', 'False'],\n            ['Private', 'Public', 'Friend', 'ReadOnly', 'Partial', 'Protected', 'WriteOnly'],\n            ['public', 'protected', 'private'],\n        ];\n    }\n    navigateValueSet(range1, text1, range2, text2, up) {\n        if (range1 && text1) {\n            const result = this.doNavigateValueSet(text1, up);\n            if (result) {\n                return {\n                    range: range1,\n                    value: result\n                };\n            }\n        }\n        if (range2 && text2) {\n            const result = this.doNavigateValueSet(text2, up);\n            if (result) {\n                return {\n                    range: range2,\n                    value: result\n                };\n            }\n        }\n        return null;\n    }\n    doNavigateValueSet(text, up) {\n        const numberResult = this.numberReplace(text, up);\n        if (numberResult !== null) {\n            return numberResult;\n        }\n        return this.textReplace(text, up);\n    }\n    numberReplace(value, up) {\n        const precision = Math.pow(10, value.length - (value.lastIndexOf('.') + 1));\n        let n1 = Number(value);\n        const n2 = parseFloat(value);\n        if (!isNaN(n1) && !isNaN(n2) && n1 === n2) {\n            if (n1 === 0 && !up) {\n                return null; // don't do negative\n                //\t\t\t} else if(n1 === 9 && up) {\n                //\t\t\t\treturn null; // don't insert 10 into a number\n            }\n            else {\n                n1 = Math.floor(n1 * precision);\n                n1 += up ? precision : -precision;\n                return String(n1 / precision);\n            }\n        }\n        return null;\n    }\n    textReplace(value, up) {\n        return this.valueSetsReplace(this._defaultValueSet, value, up);\n    }\n    valueSetsReplace(valueSets, value, up) {\n        let result = null;\n        for (let i = 0, len = valueSets.length; result === null && i < len; i++) {\n            result = this.valueSetReplace(valueSets[i], value, up);\n        }\n        return result;\n    }\n    valueSetReplace(valueSet, value, up) {\n        let idx = valueSet.indexOf(value);\n        if (idx >= 0) {\n            idx += up ? +1 : -1;\n            if (idx < 0) {\n                idx = valueSet.length - 1;\n            }\n            else {\n                idx %= valueSet.length;\n            }\n            return valueSet[idx];\n        }\n        return null;\n    }\n}\nBasicInplaceReplace.INSTANCE = new BasicInplaceReplace();\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../core/range.js';\nimport { Searcher } from '../model/textModelSearch.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { assertNever } from '../../../base/common/assert.js';\nimport { DEFAULT_WORD_REGEXP, getWordAtText } from '../core/wordHelper.js';\nexport class UnicodeTextModelHighlighter {\n    static computeUnicodeHighlights(model, options, range) {\n        const startLine = range ? range.startLineNumber : 1;\n        const endLine = range ? range.endLineNumber : model.getLineCount();\n        const codePointHighlighter = new CodePointHighlighter(options);\n        const candidates = codePointHighlighter.getCandidateCodePoints();\n        let regex;\n        if (candidates === 'allNonBasicAscii') {\n            regex = new RegExp('[^\\\\t\\\\n\\\\r\\\\x20-\\\\x7E]', 'g');\n        }\n        else {\n            regex = new RegExp(`${buildRegExpCharClassExpr(Array.from(candidates))}`, 'g');\n        }\n        const searcher = new Searcher(null, regex);\n        const ranges = [];\n        let hasMore = false;\n        let m;\n        let ambiguousCharacterCount = 0;\n        let invisibleCharacterCount = 0;\n        let nonBasicAsciiCharacterCount = 0;\n        forLoop: for (let lineNumber = startLine, lineCount = endLine; lineNumber <= lineCount; lineNumber++) {\n            const lineContent = model.getLineContent(lineNumber);\n            const lineLength = lineContent.length;\n            // Reset regex to search from the beginning\n            searcher.reset(0);\n            do {\n                m = searcher.next(lineContent);\n                if (m) {\n                    let startIndex = m.index;\n                    let endIndex = m.index + m[0].length;\n                    // Extend range to entire code point\n                    if (startIndex > 0) {\n                        const charCodeBefore = lineContent.charCodeAt(startIndex - 1);\n                        if (strings.isHighSurrogate(charCodeBefore)) {\n                            startIndex--;\n                        }\n                    }\n                    if (endIndex + 1 < lineLength) {\n                        const charCodeBefore = lineContent.charCodeAt(endIndex - 1);\n                        if (strings.isHighSurrogate(charCodeBefore)) {\n                            endIndex++;\n                        }\n                    }\n                    const str = lineContent.substring(startIndex, endIndex);\n                    let word = getWordAtText(startIndex + 1, DEFAULT_WORD_REGEXP, lineContent, 0);\n                    if (word && word.endColumn <= startIndex + 1) {\n                        // The word does not include the problematic character, ignore the word\n                        word = null;\n                    }\n                    const highlightReason = codePointHighlighter.shouldHighlightNonBasicASCII(str, word ? word.word : null);\n                    if (highlightReason !== 0 /* SimpleHighlightReason.None */) {\n                        if (highlightReason === 3 /* SimpleHighlightReason.Ambiguous */) {\n                            ambiguousCharacterCount++;\n                        }\n                        else if (highlightReason === 2 /* SimpleHighlightReason.Invisible */) {\n                            invisibleCharacterCount++;\n                        }\n                        else if (highlightReason === 1 /* SimpleHighlightReason.NonBasicASCII */) {\n                            nonBasicAsciiCharacterCount++;\n                        }\n                        else {\n                            assertNever(highlightReason);\n                        }\n                        const MAX_RESULT_LENGTH = 1000;\n                        if (ranges.length >= MAX_RESULT_LENGTH) {\n                            hasMore = true;\n                            break forLoop;\n                        }\n                        ranges.push(new Range(lineNumber, startIndex + 1, lineNumber, endIndex + 1));\n                    }\n                }\n            } while (m);\n        }\n        return {\n            ranges,\n            hasMore,\n            ambiguousCharacterCount,\n            invisibleCharacterCount,\n            nonBasicAsciiCharacterCount\n        };\n    }\n    static computeUnicodeHighlightReason(char, options) {\n        const codePointHighlighter = new CodePointHighlighter(options);\n        const reason = codePointHighlighter.shouldHighlightNonBasicASCII(char, null);\n        switch (reason) {\n            case 0 /* SimpleHighlightReason.None */:\n                return null;\n            case 2 /* SimpleHighlightReason.Invisible */:\n                return { kind: 1 /* UnicodeHighlighterReasonKind.Invisible */ };\n            case 3 /* SimpleHighlightReason.Ambiguous */: {\n                const codePoint = char.codePointAt(0);\n                const primaryConfusable = codePointHighlighter.ambiguousCharacters.getPrimaryConfusable(codePoint);\n                const notAmbiguousInLocales = strings.AmbiguousCharacters.getLocales().filter((l) => !strings.AmbiguousCharacters.getInstance(new Set([...options.allowedLocales, l])).isAmbiguous(codePoint));\n                return { kind: 0 /* UnicodeHighlighterReasonKind.Ambiguous */, confusableWith: String.fromCodePoint(primaryConfusable), notAmbiguousInLocales };\n            }\n            case 1 /* SimpleHighlightReason.NonBasicASCII */:\n                return { kind: 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */ };\n        }\n    }\n}\nfunction buildRegExpCharClassExpr(codePoints, flags) {\n    const src = `[${strings.escapeRegExpCharacters(codePoints.map((i) => String.fromCodePoint(i)).join(''))}]`;\n    return src;\n}\nclass CodePointHighlighter {\n    constructor(options) {\n        this.options = options;\n        this.allowedCodePoints = new Set(options.allowedCodePoints);\n        this.ambiguousCharacters = strings.AmbiguousCharacters.getInstance(new Set(options.allowedLocales));\n    }\n    getCandidateCodePoints() {\n        if (this.options.nonBasicASCII) {\n            return 'allNonBasicAscii';\n        }\n        const set = new Set();\n        if (this.options.invisibleCharacters) {\n            for (const cp of strings.InvisibleCharacters.codePoints) {\n                if (!isAllowedInvisibleCharacter(String.fromCodePoint(cp))) {\n                    set.add(cp);\n                }\n            }\n        }\n        if (this.options.ambiguousCharacters) {\n            for (const cp of this.ambiguousCharacters.getConfusableCodePoints()) {\n                set.add(cp);\n            }\n        }\n        for (const cp of this.allowedCodePoints) {\n            set.delete(cp);\n        }\n        return set;\n    }\n    shouldHighlightNonBasicASCII(character, wordContext) {\n        const codePoint = character.codePointAt(0);\n        if (this.allowedCodePoints.has(codePoint)) {\n            return 0 /* SimpleHighlightReason.None */;\n        }\n        if (this.options.nonBasicASCII) {\n            return 1 /* SimpleHighlightReason.NonBasicASCII */;\n        }\n        let hasBasicASCIICharacters = false;\n        let hasNonConfusableNonBasicAsciiCharacter = false;\n        if (wordContext) {\n            for (const char of wordContext) {\n                const codePoint = char.codePointAt(0);\n                const isBasicASCII = strings.isBasicASCII(char);\n                hasBasicASCIICharacters = hasBasicASCIICharacters || isBasicASCII;\n                if (!isBasicASCII &&\n                    !this.ambiguousCharacters.isAmbiguous(codePoint) &&\n                    !strings.InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n                    hasNonConfusableNonBasicAsciiCharacter = true;\n                }\n            }\n        }\n        if (\n        /* Don't allow mixing weird looking characters with ASCII */ !hasBasicASCIICharacters &&\n            /* Is there an obviously weird looking character? */ hasNonConfusableNonBasicAsciiCharacter) {\n            return 0 /* SimpleHighlightReason.None */;\n        }\n        if (this.options.invisibleCharacters) {\n            // TODO check for emojis\n            if (!isAllowedInvisibleCharacter(character) && strings.InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n                return 2 /* SimpleHighlightReason.Invisible */;\n            }\n        }\n        if (this.options.ambiguousCharacters) {\n            if (this.ambiguousCharacters.isAmbiguous(codePoint)) {\n                return 3 /* SimpleHighlightReason.Ambiguous */;\n            }\n        }\n        return 0 /* SimpleHighlightReason.None */;\n    }\n}\nfunction isAllowedInvisibleCharacter(character) {\n    return character === ' ' || character === '\\n' || character === '\\t';\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class LinesDiff {\n    constructor(changes, \n    /**\n     * Sorted by original line ranges.\n     * The original line ranges and the modified line ranges must be disjoint (but can be touching).\n     */\n    moves, \n    /**\n     * Indicates if the time out was reached.\n     * In that case, the diffs might be an approximation and the user should be asked to rerun the diff with more time.\n     */\n    hitTimeout) {\n        this.changes = changes;\n        this.moves = moves;\n        this.hitTimeout = hitTimeout;\n    }\n}\nexport class MovedText {\n    constructor(lineRangeMapping, changes) {\n        this.lineRangeMapping = lineRangeMapping;\n        this.changes = changes;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LineRange } from '../core/lineRange.js';\n/**\n * Maps a line range in the original text model to a line range in the modified text model.\n */\nexport class LineRangeMapping {\n    static inverse(mapping, originalLineCount, modifiedLineCount) {\n        const result = [];\n        let lastOriginalEndLineNumber = 1;\n        let lastModifiedEndLineNumber = 1;\n        for (const m of mapping) {\n            const r = new DetailedLineRangeMapping(new LineRange(lastOriginalEndLineNumber, m.original.startLineNumber), new LineRange(lastModifiedEndLineNumber, m.modified.startLineNumber), undefined);\n            if (!r.modified.isEmpty) {\n                result.push(r);\n            }\n            lastOriginalEndLineNumber = m.original.endLineNumberExclusive;\n            lastModifiedEndLineNumber = m.modified.endLineNumberExclusive;\n        }\n        const r = new DetailedLineRangeMapping(new LineRange(lastOriginalEndLineNumber, originalLineCount + 1), new LineRange(lastModifiedEndLineNumber, modifiedLineCount + 1), undefined);\n        if (!r.modified.isEmpty) {\n            result.push(r);\n        }\n        return result;\n    }\n    constructor(originalRange, modifiedRange) {\n        this.original = originalRange;\n        this.modified = modifiedRange;\n    }\n    toString() {\n        return `{${this.original.toString()}->${this.modified.toString()}}`;\n    }\n    flip() {\n        return new LineRangeMapping(this.modified, this.original);\n    }\n    join(other) {\n        return new LineRangeMapping(this.original.join(other.original), this.modified.join(other.modified));\n    }\n}\n/**\n * Maps a line range in the original text model to a line range in the modified text model.\n * Also contains inner range mappings.\n */\nexport class DetailedLineRangeMapping extends LineRangeMapping {\n    constructor(originalRange, modifiedRange, innerChanges) {\n        super(originalRange, modifiedRange);\n        this.innerChanges = innerChanges;\n    }\n    flip() {\n        var _a;\n        return new DetailedLineRangeMapping(this.modified, this.original, (_a = this.innerChanges) === null || _a === void 0 ? void 0 : _a.map(c => c.flip()));\n    }\n}\n/**\n * Maps a range in the original text model to a range in the modified text model.\n */\nexport class RangeMapping {\n    constructor(originalRange, modifiedRange) {\n        this.originalRange = originalRange;\n        this.modifiedRange = modifiedRange;\n    }\n    toString() {\n        return `{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`;\n    }\n    flip() {\n        return new RangeMapping(this.modifiedRange, this.originalRange);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LcsDiff } from '../../../base/common/diff/diff.js';\nimport { LinesDiff } from './linesDiffComputer.js';\nimport { RangeMapping, DetailedLineRangeMapping } from './rangeMapping.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { Range } from '../core/range.js';\nimport { assertFn, checkAdjacentItems } from '../../../base/common/assert.js';\nimport { LineRange } from '../core/lineRange.js';\nconst MINIMUM_MATCHING_CHARACTER_LENGTH = 3;\nexport class LegacyLinesDiffComputer {\n    computeDiff(originalLines, modifiedLines, options) {\n        var _a;\n        const diffComputer = new DiffComputer(originalLines, modifiedLines, {\n            maxComputationTime: options.maxComputationTimeMs,\n            shouldIgnoreTrimWhitespace: options.ignoreTrimWhitespace,\n            shouldComputeCharChanges: true,\n            shouldMakePrettyDiff: true,\n            shouldPostProcessCharChanges: true,\n        });\n        const result = diffComputer.computeDiff();\n        const changes = [];\n        let lastChange = null;\n        for (const c of result.changes) {\n            let originalRange;\n            if (c.originalEndLineNumber === 0) {\n                // Insertion\n                originalRange = new LineRange(c.originalStartLineNumber + 1, c.originalStartLineNumber + 1);\n            }\n            else {\n                originalRange = new LineRange(c.originalStartLineNumber, c.originalEndLineNumber + 1);\n            }\n            let modifiedRange;\n            if (c.modifiedEndLineNumber === 0) {\n                // Deletion\n                modifiedRange = new LineRange(c.modifiedStartLineNumber + 1, c.modifiedStartLineNumber + 1);\n            }\n            else {\n                modifiedRange = new LineRange(c.modifiedStartLineNumber, c.modifiedEndLineNumber + 1);\n            }\n            let change = new DetailedLineRangeMapping(originalRange, modifiedRange, (_a = c.charChanges) === null || _a === void 0 ? void 0 : _a.map(c => new RangeMapping(new Range(c.originalStartLineNumber, c.originalStartColumn, c.originalEndLineNumber, c.originalEndColumn), new Range(c.modifiedStartLineNumber, c.modifiedStartColumn, c.modifiedEndLineNumber, c.modifiedEndColumn))));\n            if (lastChange) {\n                if (lastChange.modified.endLineNumberExclusive === change.modified.startLineNumber\n                    || lastChange.original.endLineNumberExclusive === change.original.startLineNumber) {\n                    // join touching diffs. Probably moving diffs up/down in the algorithm causes touching diffs.\n                    change = new DetailedLineRangeMapping(lastChange.original.join(change.original), lastChange.modified.join(change.modified), lastChange.innerChanges && change.innerChanges ?\n                        lastChange.innerChanges.concat(change.innerChanges) : undefined);\n                    changes.pop();\n                }\n            }\n            changes.push(change);\n            lastChange = change;\n        }\n        assertFn(() => {\n            return checkAdjacentItems(changes, (m1, m2) => m2.original.startLineNumber - m1.original.endLineNumberExclusive === m2.modified.startLineNumber - m1.modified.endLineNumberExclusive &&\n                // There has to be an unchanged line in between (otherwise both diffs should have been joined)\n                m1.original.endLineNumberExclusive < m2.original.startLineNumber &&\n                m1.modified.endLineNumberExclusive < m2.modified.startLineNumber);\n        });\n        return new LinesDiff(changes, [], result.quitEarly);\n    }\n}\nfunction computeDiff(originalSequence, modifiedSequence, continueProcessingPredicate, pretty) {\n    const diffAlgo = new LcsDiff(originalSequence, modifiedSequence, continueProcessingPredicate);\n    return diffAlgo.ComputeDiff(pretty);\n}\nclass LineSequence {\n    constructor(lines) {\n        const startColumns = [];\n        const endColumns = [];\n        for (let i = 0, length = lines.length; i < length; i++) {\n            startColumns[i] = getFirstNonBlankColumn(lines[i], 1);\n            endColumns[i] = getLastNonBlankColumn(lines[i], 1);\n        }\n        this.lines = lines;\n        this._startColumns = startColumns;\n        this._endColumns = endColumns;\n    }\n    getElements() {\n        const elements = [];\n        for (let i = 0, len = this.lines.length; i < len; i++) {\n            elements[i] = this.lines[i].substring(this._startColumns[i] - 1, this._endColumns[i] - 1);\n        }\n        return elements;\n    }\n    getStrictElement(index) {\n        return this.lines[index];\n    }\n    getStartLineNumber(i) {\n        return i + 1;\n    }\n    getEndLineNumber(i) {\n        return i + 1;\n    }\n    createCharSequence(shouldIgnoreTrimWhitespace, startIndex, endIndex) {\n        const charCodes = [];\n        const lineNumbers = [];\n        const columns = [];\n        let len = 0;\n        for (let index = startIndex; index <= endIndex; index++) {\n            const lineContent = this.lines[index];\n            const startColumn = (shouldIgnoreTrimWhitespace ? this._startColumns[index] : 1);\n            const endColumn = (shouldIgnoreTrimWhitespace ? this._endColumns[index] : lineContent.length + 1);\n            for (let col = startColumn; col < endColumn; col++) {\n                charCodes[len] = lineContent.charCodeAt(col - 1);\n                lineNumbers[len] = index + 1;\n                columns[len] = col;\n                len++;\n            }\n            if (!shouldIgnoreTrimWhitespace && index < endIndex) {\n                // Add \\n if trim whitespace is not ignored\n                charCodes[len] = 10 /* CharCode.LineFeed */;\n                lineNumbers[len] = index + 1;\n                columns[len] = lineContent.length + 1;\n                len++;\n            }\n        }\n        return new CharSequence(charCodes, lineNumbers, columns);\n    }\n}\nclass CharSequence {\n    constructor(charCodes, lineNumbers, columns) {\n        this._charCodes = charCodes;\n        this._lineNumbers = lineNumbers;\n        this._columns = columns;\n    }\n    toString() {\n        return ('[' + this._charCodes.map((s, idx) => (s === 10 /* CharCode.LineFeed */ ? '\\\\n' : String.fromCharCode(s)) + `-(${this._lineNumbers[idx]},${this._columns[idx]})`).join(', ') + ']');\n    }\n    _assertIndex(index, arr) {\n        if (index < 0 || index >= arr.length) {\n            throw new Error(`Illegal index`);\n        }\n    }\n    getElements() {\n        return this._charCodes;\n    }\n    getStartLineNumber(i) {\n        if (i > 0 && i === this._lineNumbers.length) {\n            // the start line number of the element after the last element\n            // is the end line number of the last element\n            return this.getEndLineNumber(i - 1);\n        }\n        this._assertIndex(i, this._lineNumbers);\n        return this._lineNumbers[i];\n    }\n    getEndLineNumber(i) {\n        if (i === -1) {\n            // the end line number of the element before the first element\n            // is the start line number of the first element\n            return this.getStartLineNumber(i + 1);\n        }\n        this._assertIndex(i, this._lineNumbers);\n        if (this._charCodes[i] === 10 /* CharCode.LineFeed */) {\n            return this._lineNumbers[i] + 1;\n        }\n        return this._lineNumbers[i];\n    }\n    getStartColumn(i) {\n        if (i > 0 && i === this._columns.length) {\n            // the start column of the element after the last element\n            // is the end column of the last element\n            return this.getEndColumn(i - 1);\n        }\n        this._assertIndex(i, this._columns);\n        return this._columns[i];\n    }\n    getEndColumn(i) {\n        if (i === -1) {\n            // the end column of the element before the first element\n            // is the start column of the first element\n            return this.getStartColumn(i + 1);\n        }\n        this._assertIndex(i, this._columns);\n        if (this._charCodes[i] === 10 /* CharCode.LineFeed */) {\n            return 1;\n        }\n        return this._columns[i] + 1;\n    }\n}\nclass CharChange {\n    constructor(originalStartLineNumber, originalStartColumn, originalEndLineNumber, originalEndColumn, modifiedStartLineNumber, modifiedStartColumn, modifiedEndLineNumber, modifiedEndColumn) {\n        this.originalStartLineNumber = originalStartLineNumber;\n        this.originalStartColumn = originalStartColumn;\n        this.originalEndLineNumber = originalEndLineNumber;\n        this.originalEndColumn = originalEndColumn;\n        this.modifiedStartLineNumber = modifiedStartLineNumber;\n        this.modifiedStartColumn = modifiedStartColumn;\n        this.modifiedEndLineNumber = modifiedEndLineNumber;\n        this.modifiedEndColumn = modifiedEndColumn;\n    }\n    static createFromDiffChange(diffChange, originalCharSequence, modifiedCharSequence) {\n        const originalStartLineNumber = originalCharSequence.getStartLineNumber(diffChange.originalStart);\n        const originalStartColumn = originalCharSequence.getStartColumn(diffChange.originalStart);\n        const originalEndLineNumber = originalCharSequence.getEndLineNumber(diffChange.originalStart + diffChange.originalLength - 1);\n        const originalEndColumn = originalCharSequence.getEndColumn(diffChange.originalStart + diffChange.originalLength - 1);\n        const modifiedStartLineNumber = modifiedCharSequence.getStartLineNumber(diffChange.modifiedStart);\n        const modifiedStartColumn = modifiedCharSequence.getStartColumn(diffChange.modifiedStart);\n        const modifiedEndLineNumber = modifiedCharSequence.getEndLineNumber(diffChange.modifiedStart + diffChange.modifiedLength - 1);\n        const modifiedEndColumn = modifiedCharSequence.getEndColumn(diffChange.modifiedStart + diffChange.modifiedLength - 1);\n        return new CharChange(originalStartLineNumber, originalStartColumn, originalEndLineNumber, originalEndColumn, modifiedStartLineNumber, modifiedStartColumn, modifiedEndLineNumber, modifiedEndColumn);\n    }\n}\nfunction postProcessCharChanges(rawChanges) {\n    if (rawChanges.length <= 1) {\n        return rawChanges;\n    }\n    const result = [rawChanges[0]];\n    let prevChange = result[0];\n    for (let i = 1, len = rawChanges.length; i < len; i++) {\n        const currChange = rawChanges[i];\n        const originalMatchingLength = currChange.originalStart - (prevChange.originalStart + prevChange.originalLength);\n        const modifiedMatchingLength = currChange.modifiedStart - (prevChange.modifiedStart + prevChange.modifiedLength);\n        // Both of the above should be equal, but the continueProcessingPredicate may prevent this from being true\n        const matchingLength = Math.min(originalMatchingLength, modifiedMatchingLength);\n        if (matchingLength < MINIMUM_MATCHING_CHARACTER_LENGTH) {\n            // Merge the current change into the previous one\n            prevChange.originalLength = (currChange.originalStart + currChange.originalLength) - prevChange.originalStart;\n            prevChange.modifiedLength = (currChange.modifiedStart + currChange.modifiedLength) - prevChange.modifiedStart;\n        }\n        else {\n            // Add the current change\n            result.push(currChange);\n            prevChange = currChange;\n        }\n    }\n    return result;\n}\nclass LineChange {\n    constructor(originalStartLineNumber, originalEndLineNumber, modifiedStartLineNumber, modifiedEndLineNumber, charChanges) {\n        this.originalStartLineNumber = originalStartLineNumber;\n        this.originalEndLineNumber = originalEndLineNumber;\n        this.modifiedStartLineNumber = modifiedStartLineNumber;\n        this.modifiedEndLineNumber = modifiedEndLineNumber;\n        this.charChanges = charChanges;\n    }\n    static createFromDiffResult(shouldIgnoreTrimWhitespace, diffChange, originalLineSequence, modifiedLineSequence, continueCharDiff, shouldComputeCharChanges, shouldPostProcessCharChanges) {\n        let originalStartLineNumber;\n        let originalEndLineNumber;\n        let modifiedStartLineNumber;\n        let modifiedEndLineNumber;\n        let charChanges = undefined;\n        if (diffChange.originalLength === 0) {\n            originalStartLineNumber = originalLineSequence.getStartLineNumber(diffChange.originalStart) - 1;\n            originalEndLineNumber = 0;\n        }\n        else {\n            originalStartLineNumber = originalLineSequence.getStartLineNumber(diffChange.originalStart);\n            originalEndLineNumber = originalLineSequence.getEndLineNumber(diffChange.originalStart + diffChange.originalLength - 1);\n        }\n        if (diffChange.modifiedLength === 0) {\n            modifiedStartLineNumber = modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart) - 1;\n            modifiedEndLineNumber = 0;\n        }\n        else {\n            modifiedStartLineNumber = modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart);\n            modifiedEndLineNumber = modifiedLineSequence.getEndLineNumber(diffChange.modifiedStart + diffChange.modifiedLength - 1);\n        }\n        if (shouldComputeCharChanges && diffChange.originalLength > 0 && diffChange.originalLength < 20 && diffChange.modifiedLength > 0 && diffChange.modifiedLength < 20 && continueCharDiff()) {\n            // Compute character changes for diff chunks of at most 20 lines...\n            const originalCharSequence = originalLineSequence.createCharSequence(shouldIgnoreTrimWhitespace, diffChange.originalStart, diffChange.originalStart + diffChange.originalLength - 1);\n            const modifiedCharSequence = modifiedLineSequence.createCharSequence(shouldIgnoreTrimWhitespace, diffChange.modifiedStart, diffChange.modifiedStart + diffChange.modifiedLength - 1);\n            if (originalCharSequence.getElements().length > 0 && modifiedCharSequence.getElements().length > 0) {\n                let rawChanges = computeDiff(originalCharSequence, modifiedCharSequence, continueCharDiff, true).changes;\n                if (shouldPostProcessCharChanges) {\n                    rawChanges = postProcessCharChanges(rawChanges);\n                }\n                charChanges = [];\n                for (let i = 0, length = rawChanges.length; i < length; i++) {\n                    charChanges.push(CharChange.createFromDiffChange(rawChanges[i], originalCharSequence, modifiedCharSequence));\n                }\n            }\n        }\n        return new LineChange(originalStartLineNumber, originalEndLineNumber, modifiedStartLineNumber, modifiedEndLineNumber, charChanges);\n    }\n}\nexport class DiffComputer {\n    constructor(originalLines, modifiedLines, opts) {\n        this.shouldComputeCharChanges = opts.shouldComputeCharChanges;\n        this.shouldPostProcessCharChanges = opts.shouldPostProcessCharChanges;\n        this.shouldIgnoreTrimWhitespace = opts.shouldIgnoreTrimWhitespace;\n        this.shouldMakePrettyDiff = opts.shouldMakePrettyDiff;\n        this.originalLines = originalLines;\n        this.modifiedLines = modifiedLines;\n        this.original = new LineSequence(originalLines);\n        this.modified = new LineSequence(modifiedLines);\n        this.continueLineDiff = createContinueProcessingPredicate(opts.maxComputationTime);\n        this.continueCharDiff = createContinueProcessingPredicate(opts.maxComputationTime === 0 ? 0 : Math.min(opts.maxComputationTime, 5000)); // never run after 5s for character changes...\n    }\n    computeDiff() {\n        if (this.original.lines.length === 1 && this.original.lines[0].length === 0) {\n            // empty original => fast path\n            if (this.modified.lines.length === 1 && this.modified.lines[0].length === 0) {\n                return {\n                    quitEarly: false,\n                    changes: []\n                };\n            }\n            return {\n                quitEarly: false,\n                changes: [{\n                        originalStartLineNumber: 1,\n                        originalEndLineNumber: 1,\n                        modifiedStartLineNumber: 1,\n                        modifiedEndLineNumber: this.modified.lines.length,\n                        charChanges: undefined\n                    }]\n            };\n        }\n        if (this.modified.lines.length === 1 && this.modified.lines[0].length === 0) {\n            // empty modified => fast path\n            return {\n                quitEarly: false,\n                changes: [{\n                        originalStartLineNumber: 1,\n                        originalEndLineNumber: this.original.lines.length,\n                        modifiedStartLineNumber: 1,\n                        modifiedEndLineNumber: 1,\n                        charChanges: undefined\n                    }]\n            };\n        }\n        const diffResult = computeDiff(this.original, this.modified, this.continueLineDiff, this.shouldMakePrettyDiff);\n        const rawChanges = diffResult.changes;\n        const quitEarly = diffResult.quitEarly;\n        // The diff is always computed with ignoring trim whitespace\n        // This ensures we get the prettiest diff\n        if (this.shouldIgnoreTrimWhitespace) {\n            const lineChanges = [];\n            for (let i = 0, length = rawChanges.length; i < length; i++) {\n                lineChanges.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace, rawChanges[i], this.original, this.modified, this.continueCharDiff, this.shouldComputeCharChanges, this.shouldPostProcessCharChanges));\n            }\n            return {\n                quitEarly: quitEarly,\n                changes: lineChanges\n            };\n        }\n        // Need to post-process and introduce changes where the trim whitespace is different\n        // Note that we are looping starting at -1 to also cover the lines before the first change\n        const result = [];\n        let originalLineIndex = 0;\n        let modifiedLineIndex = 0;\n        for (let i = -1 /* !!!! */, len = rawChanges.length; i < len; i++) {\n            const nextChange = (i + 1 < len ? rawChanges[i + 1] : null);\n            const originalStop = (nextChange ? nextChange.originalStart : this.originalLines.length);\n            const modifiedStop = (nextChange ? nextChange.modifiedStart : this.modifiedLines.length);\n            while (originalLineIndex < originalStop && modifiedLineIndex < modifiedStop) {\n                const originalLine = this.originalLines[originalLineIndex];\n                const modifiedLine = this.modifiedLines[modifiedLineIndex];\n                if (originalLine !== modifiedLine) {\n                    // These lines differ only in trim whitespace\n                    // Check the leading whitespace\n                    {\n                        let originalStartColumn = getFirstNonBlankColumn(originalLine, 1);\n                        let modifiedStartColumn = getFirstNonBlankColumn(modifiedLine, 1);\n                        while (originalStartColumn > 1 && modifiedStartColumn > 1) {\n                            const originalChar = originalLine.charCodeAt(originalStartColumn - 2);\n                            const modifiedChar = modifiedLine.charCodeAt(modifiedStartColumn - 2);\n                            if (originalChar !== modifiedChar) {\n                                break;\n                            }\n                            originalStartColumn--;\n                            modifiedStartColumn--;\n                        }\n                        if (originalStartColumn > 1 || modifiedStartColumn > 1) {\n                            this._pushTrimWhitespaceCharChange(result, originalLineIndex + 1, 1, originalStartColumn, modifiedLineIndex + 1, 1, modifiedStartColumn);\n                        }\n                    }\n                    // Check the trailing whitespace\n                    {\n                        let originalEndColumn = getLastNonBlankColumn(originalLine, 1);\n                        let modifiedEndColumn = getLastNonBlankColumn(modifiedLine, 1);\n                        const originalMaxColumn = originalLine.length + 1;\n                        const modifiedMaxColumn = modifiedLine.length + 1;\n                        while (originalEndColumn < originalMaxColumn && modifiedEndColumn < modifiedMaxColumn) {\n                            const originalChar = originalLine.charCodeAt(originalEndColumn - 1);\n                            const modifiedChar = originalLine.charCodeAt(modifiedEndColumn - 1);\n                            if (originalChar !== modifiedChar) {\n                                break;\n                            }\n                            originalEndColumn++;\n                            modifiedEndColumn++;\n                        }\n                        if (originalEndColumn < originalMaxColumn || modifiedEndColumn < modifiedMaxColumn) {\n                            this._pushTrimWhitespaceCharChange(result, originalLineIndex + 1, originalEndColumn, originalMaxColumn, modifiedLineIndex + 1, modifiedEndColumn, modifiedMaxColumn);\n                        }\n                    }\n                }\n                originalLineIndex++;\n                modifiedLineIndex++;\n            }\n            if (nextChange) {\n                // Emit the actual change\n                result.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace, nextChange, this.original, this.modified, this.continueCharDiff, this.shouldComputeCharChanges, this.shouldPostProcessCharChanges));\n                originalLineIndex += nextChange.originalLength;\n                modifiedLineIndex += nextChange.modifiedLength;\n            }\n        }\n        return {\n            quitEarly: quitEarly,\n            changes: result\n        };\n    }\n    _pushTrimWhitespaceCharChange(result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn) {\n        if (this._mergeTrimWhitespaceCharChange(result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn)) {\n            // Merged into previous\n            return;\n        }\n        let charChanges = undefined;\n        if (this.shouldComputeCharChanges) {\n            charChanges = [new CharChange(originalLineNumber, originalStartColumn, originalLineNumber, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedLineNumber, modifiedEndColumn)];\n        }\n        result.push(new LineChange(originalLineNumber, originalLineNumber, modifiedLineNumber, modifiedLineNumber, charChanges));\n    }\n    _mergeTrimWhitespaceCharChange(result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn) {\n        const len = result.length;\n        if (len === 0) {\n            return false;\n        }\n        const prevChange = result[len - 1];\n        if (prevChange.originalEndLineNumber === 0 || prevChange.modifiedEndLineNumber === 0) {\n            // Don't merge with inserts/deletes\n            return false;\n        }\n        if (prevChange.originalEndLineNumber === originalLineNumber && prevChange.modifiedEndLineNumber === modifiedLineNumber) {\n            if (this.shouldComputeCharChanges && prevChange.charChanges) {\n                prevChange.charChanges.push(new CharChange(originalLineNumber, originalStartColumn, originalLineNumber, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedLineNumber, modifiedEndColumn));\n            }\n            return true;\n        }\n        if (prevChange.originalEndLineNumber + 1 === originalLineNumber && prevChange.modifiedEndLineNumber + 1 === modifiedLineNumber) {\n            prevChange.originalEndLineNumber = originalLineNumber;\n            prevChange.modifiedEndLineNumber = modifiedLineNumber;\n            if (this.shouldComputeCharChanges && prevChange.charChanges) {\n                prevChange.charChanges.push(new CharChange(originalLineNumber, originalStartColumn, originalLineNumber, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedLineNumber, modifiedEndColumn));\n            }\n            return true;\n        }\n        return false;\n    }\n}\nfunction getFirstNonBlankColumn(txt, defaultValue) {\n    const r = strings.firstNonWhitespaceIndex(txt);\n    if (r === -1) {\n        return defaultValue;\n    }\n    return r + 1;\n}\nfunction getLastNonBlankColumn(txt, defaultValue) {\n    const r = strings.lastNonWhitespaceIndex(txt);\n    if (r === -1) {\n        return defaultValue;\n    }\n    return r + 2;\n}\nfunction createContinueProcessingPredicate(maximumRuntime) {\n    if (maximumRuntime === 0) {\n        return () => true;\n    }\n    const startTime = Date.now();\n    return () => {\n        return Date.now() - startTime < maximumRuntime;\n    };\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { forEachAdjacent } from '../../../../../base/common/arrays.js';\nimport { BugIndicatingError } from '../../../../../base/common/errors.js';\nimport { OffsetRange } from '../../../core/offsetRange.js';\nexport class DiffAlgorithmResult {\n    static trivial(seq1, seq2) {\n        return new DiffAlgorithmResult([new SequenceDiff(OffsetRange.ofLength(seq1.length), OffsetRange.ofLength(seq2.length))], false);\n    }\n    static trivialTimedOut(seq1, seq2) {\n        return new DiffAlgorithmResult([new SequenceDiff(OffsetRange.ofLength(seq1.length), OffsetRange.ofLength(seq2.length))], true);\n    }\n    constructor(diffs, \n    /**\n     * Indicates if the time out was reached.\n     * In that case, the diffs might be an approximation and the user should be asked to rerun the diff with more time.\n     */\n    hitTimeout) {\n        this.diffs = diffs;\n        this.hitTimeout = hitTimeout;\n    }\n}\nexport class SequenceDiff {\n    static invert(sequenceDiffs, doc1Length) {\n        const result = [];\n        forEachAdjacent(sequenceDiffs, (a, b) => {\n            result.push(SequenceDiff.fromOffsetPairs(a ? a.getEndExclusives() : OffsetPair.zero, b ? b.getStarts() : new OffsetPair(doc1Length, (a ? a.seq2Range.endExclusive - a.seq1Range.endExclusive : 0) + doc1Length)));\n        });\n        return result;\n    }\n    static fromOffsetPairs(start, endExclusive) {\n        return new SequenceDiff(new OffsetRange(start.offset1, endExclusive.offset1), new OffsetRange(start.offset2, endExclusive.offset2));\n    }\n    constructor(seq1Range, seq2Range) {\n        this.seq1Range = seq1Range;\n        this.seq2Range = seq2Range;\n    }\n    swap() {\n        return new SequenceDiff(this.seq2Range, this.seq1Range);\n    }\n    toString() {\n        return `${this.seq1Range} <-> ${this.seq2Range}`;\n    }\n    join(other) {\n        return new SequenceDiff(this.seq1Range.join(other.seq1Range), this.seq2Range.join(other.seq2Range));\n    }\n    delta(offset) {\n        if (offset === 0) {\n            return this;\n        }\n        return new SequenceDiff(this.seq1Range.delta(offset), this.seq2Range.delta(offset));\n    }\n    deltaStart(offset) {\n        if (offset === 0) {\n            return this;\n        }\n        return new SequenceDiff(this.seq1Range.deltaStart(offset), this.seq2Range.deltaStart(offset));\n    }\n    deltaEnd(offset) {\n        if (offset === 0) {\n            return this;\n        }\n        return new SequenceDiff(this.seq1Range.deltaEnd(offset), this.seq2Range.deltaEnd(offset));\n    }\n    intersect(other) {\n        const i1 = this.seq1Range.intersect(other.seq1Range);\n        const i2 = this.seq2Range.intersect(other.seq2Range);\n        if (!i1 || !i2) {\n            return undefined;\n        }\n        return new SequenceDiff(i1, i2);\n    }\n    getStarts() {\n        return new OffsetPair(this.seq1Range.start, this.seq2Range.start);\n    }\n    getEndExclusives() {\n        return new OffsetPair(this.seq1Range.endExclusive, this.seq2Range.endExclusive);\n    }\n}\nexport class OffsetPair {\n    constructor(offset1, offset2) {\n        this.offset1 = offset1;\n        this.offset2 = offset2;\n    }\n    toString() {\n        return `${this.offset1} <-> ${this.offset2}`;\n    }\n}\nOffsetPair.zero = new OffsetPair(0, 0);\nOffsetPair.max = new OffsetPair(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\nexport class InfiniteTimeout {\n    isValid() {\n        return true;\n    }\n}\nInfiniteTimeout.instance = new InfiniteTimeout();\nexport class DateTimeout {\n    constructor(timeout) {\n        this.timeout = timeout;\n        this.startTime = Date.now();\n        this.valid = true;\n        if (timeout <= 0) {\n            throw new BugIndicatingError('timeout must be positive');\n        }\n    }\n    // Recommendation: Set a log-point `{this.disable()}` in the body\n    isValid() {\n        const valid = Date.now() - this.startTime < this.timeout;\n        if (!valid && this.valid) {\n            this.valid = false; // timeout reached\n            // eslint-disable-next-line no-debugger\n            debugger; // WARNING: Most likely debugging caused the timeout. Call `this.disable()` to continue without timing out.\n        }\n        return this.valid;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Array2D {\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n        this.array = [];\n        this.array = new Array(width * height);\n    }\n    get(x, y) {\n        return this.array[x + y * this.width];\n    }\n    set(x, y, value) {\n        this.array[x + y * this.width] = value;\n    }\n}\nexport function isSpace(charCode) {\n    return charCode === 32 /* CharCode.Space */ || charCode === 9 /* CharCode.Tab */;\n}\nexport class LineRangeFragment {\n    static getKey(chr) {\n        let key = this.chrKeys.get(chr);\n        if (key === undefined) {\n            key = this.chrKeys.size;\n            this.chrKeys.set(chr, key);\n        }\n        return key;\n    }\n    constructor(range, lines, source) {\n        this.range = range;\n        this.lines = lines;\n        this.source = source;\n        this.histogram = [];\n        let counter = 0;\n        for (let i = range.startLineNumber - 1; i < range.endLineNumberExclusive - 1; i++) {\n            const line = lines[i];\n            for (let j = 0; j < line.length; j++) {\n                counter++;\n                const chr = line[j];\n                const key = LineRangeFragment.getKey(chr);\n                this.histogram[key] = (this.histogram[key] || 0) + 1;\n            }\n            counter++;\n            const key = LineRangeFragment.getKey('\\n');\n            this.histogram[key] = (this.histogram[key] || 0) + 1;\n        }\n        this.totalCount = counter;\n    }\n    computeSimilarity(other) {\n        var _a, _b;\n        let sumDifferences = 0;\n        const maxLength = Math.max(this.histogram.length, other.histogram.length);\n        for (let i = 0; i < maxLength; i++) {\n            sumDifferences += Math.abs(((_a = this.histogram[i]) !== null && _a !== void 0 ? _a : 0) - ((_b = other.histogram[i]) !== null && _b !== void 0 ? _b : 0));\n        }\n        return 1 - (sumDifferences / (this.totalCount + other.totalCount));\n    }\n}\nLineRangeFragment.chrKeys = new Map();\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { OffsetRange } from '../../../core/offsetRange.js';\nimport { SequenceDiff, InfiniteTimeout, DiffAlgorithmResult } from './diffAlgorithm.js';\nimport { Array2D } from '../utils.js';\n/**\n * A O(MN) diffing algorithm that supports a score function.\n * The algorithm can be improved by processing the 2d array diagonally.\n*/\nexport class DynamicProgrammingDiffing {\n    compute(sequence1, sequence2, timeout = InfiniteTimeout.instance, equalityScore) {\n        if (sequence1.length === 0 || sequence2.length === 0) {\n            return DiffAlgorithmResult.trivial(sequence1, sequence2);\n        }\n        /**\n         * lcsLengths.get(i, j): Length of the longest common subsequence of sequence1.substring(0, i + 1) and sequence2.substring(0, j + 1).\n         */\n        const lcsLengths = new Array2D(sequence1.length, sequence2.length);\n        const directions = new Array2D(sequence1.length, sequence2.length);\n        const lengths = new Array2D(sequence1.length, sequence2.length);\n        // ==== Initializing lcsLengths ====\n        for (let s1 = 0; s1 < sequence1.length; s1++) {\n            for (let s2 = 0; s2 < sequence2.length; s2++) {\n                if (!timeout.isValid()) {\n                    return DiffAlgorithmResult.trivialTimedOut(sequence1, sequence2);\n                }\n                const horizontalLen = s1 === 0 ? 0 : lcsLengths.get(s1 - 1, s2);\n                const verticalLen = s2 === 0 ? 0 : lcsLengths.get(s1, s2 - 1);\n                let extendedSeqScore;\n                if (sequence1.getElement(s1) === sequence2.getElement(s2)) {\n                    if (s1 === 0 || s2 === 0) {\n                        extendedSeqScore = 0;\n                    }\n                    else {\n                        extendedSeqScore = lcsLengths.get(s1 - 1, s2 - 1);\n                    }\n                    if (s1 > 0 && s2 > 0 && directions.get(s1 - 1, s2 - 1) === 3) {\n                        // Prefer consecutive diagonals\n                        extendedSeqScore += lengths.get(s1 - 1, s2 - 1);\n                    }\n                    extendedSeqScore += (equalityScore ? equalityScore(s1, s2) : 1);\n                }\n                else {\n                    extendedSeqScore = -1;\n                }\n                const newValue = Math.max(horizontalLen, verticalLen, extendedSeqScore);\n                if (newValue === extendedSeqScore) {\n                    // Prefer diagonals\n                    const prevLen = s1 > 0 && s2 > 0 ? lengths.get(s1 - 1, s2 - 1) : 0;\n                    lengths.set(s1, s2, prevLen + 1);\n                    directions.set(s1, s2, 3);\n                }\n                else if (newValue === horizontalLen) {\n                    lengths.set(s1, s2, 0);\n                    directions.set(s1, s2, 1);\n                }\n                else if (newValue === verticalLen) {\n                    lengths.set(s1, s2, 0);\n                    directions.set(s1, s2, 2);\n                }\n                lcsLengths.set(s1, s2, newValue);\n            }\n        }\n        // ==== Backtracking ====\n        const result = [];\n        let lastAligningPosS1 = sequence1.length;\n        let lastAligningPosS2 = sequence2.length;\n        function reportDecreasingAligningPositions(s1, s2) {\n            if (s1 + 1 !== lastAligningPosS1 || s2 + 1 !== lastAligningPosS2) {\n                result.push(new SequenceDiff(new OffsetRange(s1 + 1, lastAligningPosS1), new OffsetRange(s2 + 1, lastAligningPosS2)));\n            }\n            lastAligningPosS1 = s1;\n            lastAligningPosS2 = s2;\n        }\n        let s1 = sequence1.length - 1;\n        let s2 = sequence2.length - 1;\n        while (s1 >= 0 && s2 >= 0) {\n            if (directions.get(s1, s2) === 3) {\n                reportDecreasingAligningPositions(s1, s2);\n                s1--;\n                s2--;\n            }\n            else {\n                if (directions.get(s1, s2) === 1) {\n                    s1--;\n                }\n                else {\n                    s2--;\n                }\n            }\n        }\n        reportDecreasingAligningPositions(-1, -1);\n        result.reverse();\n        return new DiffAlgorithmResult(result, false);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { OffsetRange } from '../../../core/offsetRange.js';\nimport { DiffAlgorithmResult, InfiniteTimeout, SequenceDiff } from './diffAlgorithm.js';\n/**\n * An O(ND) diff algorithm that has a quadratic space worst-case complexity.\n*/\nexport class MyersDiffAlgorithm {\n    compute(seq1, seq2, timeout = InfiniteTimeout.instance) {\n        // These are common special cases.\n        // The early return improves performance dramatically.\n        if (seq1.length === 0 || seq2.length === 0) {\n            return DiffAlgorithmResult.trivial(seq1, seq2);\n        }\n        const seqX = seq1; // Text on the x axis\n        const seqY = seq2; // Text on the y axis\n        function getXAfterSnake(x, y) {\n            while (x < seqX.length && y < seqY.length && seqX.getElement(x) === seqY.getElement(y)) {\n                x++;\n                y++;\n            }\n            return x;\n        }\n        let d = 0;\n        // V[k]: X value of longest d-line that ends in diagonal k.\n        // d-line: path from (0,0) to (x,y) that uses exactly d non-diagonals.\n        // diagonal k: Set of points (x,y) with x-y = k.\n        // k=1 -> (1,0),(2,1)\n        const V = new FastInt32Array();\n        V.set(0, getXAfterSnake(0, 0));\n        const paths = new FastArrayNegativeIndices();\n        paths.set(0, V.get(0) === 0 ? null : new SnakePath(null, 0, 0, V.get(0)));\n        let k = 0;\n        loop: while (true) {\n            d++;\n            if (!timeout.isValid()) {\n                return DiffAlgorithmResult.trivialTimedOut(seqX, seqY);\n            }\n            // The paper has `for (k = -d; k <= d; k += 2)`, but we can ignore diagonals that cannot influence the result.\n            const lowerBound = -Math.min(d, seqY.length + (d % 2));\n            const upperBound = Math.min(d, seqX.length + (d % 2));\n            for (k = lowerBound; k <= upperBound; k += 2) {\n                let step = 0;\n                // We can use the X values of (d-1)-lines to compute X value of the longest d-lines.\n                const maxXofDLineTop = k === upperBound ? -1 : V.get(k + 1); // We take a vertical non-diagonal (add a symbol in seqX)\n                const maxXofDLineLeft = k === lowerBound ? -1 : V.get(k - 1) + 1; // We take a horizontal non-diagonal (+1 x) (delete a symbol in seqX)\n                step++;\n                const x = Math.min(Math.max(maxXofDLineTop, maxXofDLineLeft), seqX.length);\n                const y = x - k;\n                step++;\n                if (x > seqX.length || y > seqY.length) {\n                    // This diagonal is irrelevant for the result.\n                    // TODO: Don't pay the cost for this in the next iteration.\n                    continue;\n                }\n                const newMaxX = getXAfterSnake(x, y);\n                V.set(k, newMaxX);\n                const lastPath = x === maxXofDLineTop ? paths.get(k + 1) : paths.get(k - 1);\n                paths.set(k, newMaxX !== x ? new SnakePath(lastPath, x, y, newMaxX - x) : lastPath);\n                if (V.get(k) === seqX.length && V.get(k) - k === seqY.length) {\n                    break loop;\n                }\n            }\n        }\n        let path = paths.get(k);\n        const result = [];\n        let lastAligningPosS1 = seqX.length;\n        let lastAligningPosS2 = seqY.length;\n        while (true) {\n            const endX = path ? path.x + path.length : 0;\n            const endY = path ? path.y + path.length : 0;\n            if (endX !== lastAligningPosS1 || endY !== lastAligningPosS2) {\n                result.push(new SequenceDiff(new OffsetRange(endX, lastAligningPosS1), new OffsetRange(endY, lastAligningPosS2)));\n            }\n            if (!path) {\n                break;\n            }\n            lastAligningPosS1 = path.x;\n            lastAligningPosS2 = path.y;\n            path = path.prev;\n        }\n        result.reverse();\n        return new DiffAlgorithmResult(result, false);\n    }\n}\nclass SnakePath {\n    constructor(prev, x, y, length) {\n        this.prev = prev;\n        this.x = x;\n        this.y = y;\n        this.length = length;\n    }\n}\n/**\n * An array that supports fast negative indices.\n*/\nclass FastInt32Array {\n    constructor() {\n        this.positiveArr = new Int32Array(10);\n        this.negativeArr = new Int32Array(10);\n    }\n    get(idx) {\n        if (idx < 0) {\n            idx = -idx - 1;\n            return this.negativeArr[idx];\n        }\n        else {\n            return this.positiveArr[idx];\n        }\n    }\n    set(idx, value) {\n        if (idx < 0) {\n            idx = -idx - 1;\n            if (idx >= this.negativeArr.length) {\n                const arr = this.negativeArr;\n                this.negativeArr = new Int32Array(arr.length * 2);\n                this.negativeArr.set(arr);\n            }\n            this.negativeArr[idx] = value;\n        }\n        else {\n            if (idx >= this.positiveArr.length) {\n                const arr = this.positiveArr;\n                this.positiveArr = new Int32Array(arr.length * 2);\n                this.positiveArr.set(arr);\n            }\n            this.positiveArr[idx] = value;\n        }\n    }\n}\n/**\n * An array that supports fast negative indices.\n*/\nclass FastArrayNegativeIndices {\n    constructor() {\n        this.positiveArr = [];\n        this.negativeArr = [];\n    }\n    get(idx) {\n        if (idx < 0) {\n            idx = -idx - 1;\n            return this.negativeArr[idx];\n        }\n        else {\n            return this.positiveArr[idx];\n        }\n    }\n    set(idx, value) {\n        if (idx < 0) {\n            idx = -idx - 1;\n            this.negativeArr[idx] = value;\n        }\n        else {\n            this.positiveArr[idx] = value;\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findLastIdxMonotonous, findLastMonotonous, findFirstMonotonous } from '../../../../base/common/arraysFind.js';\nimport { OffsetRange } from '../../core/offsetRange.js';\nimport { Position } from '../../core/position.js';\nimport { Range } from '../../core/range.js';\nimport { isSpace } from './utils.js';\nexport class LinesSliceCharSequence {\n    constructor(lines, lineRange, considerWhitespaceChanges) {\n        // This slice has to have lineRange.length many \\n! (otherwise diffing against an empty slice will be problematic)\n        // (Unless it covers the entire document, in that case the other slice also has to cover the entire document ands it's okay)\n        this.lines = lines;\n        this.considerWhitespaceChanges = considerWhitespaceChanges;\n        this.elements = [];\n        this.firstCharOffsetByLine = [];\n        // To account for trimming\n        this.additionalOffsetByLine = [];\n        // If the slice covers the end, but does not start at the beginning, we include just the \\n of the previous line.\n        let trimFirstLineFully = false;\n        if (lineRange.start > 0 && lineRange.endExclusive >= lines.length) {\n            lineRange = new OffsetRange(lineRange.start - 1, lineRange.endExclusive);\n            trimFirstLineFully = true;\n        }\n        this.lineRange = lineRange;\n        this.firstCharOffsetByLine[0] = 0;\n        for (let i = this.lineRange.start; i < this.lineRange.endExclusive; i++) {\n            let line = lines[i];\n            let offset = 0;\n            if (trimFirstLineFully) {\n                offset = line.length;\n                line = '';\n                trimFirstLineFully = false;\n            }\n            else if (!considerWhitespaceChanges) {\n                const trimmedStartLine = line.trimStart();\n                offset = line.length - trimmedStartLine.length;\n                line = trimmedStartLine.trimEnd();\n            }\n            this.additionalOffsetByLine.push(offset);\n            for (let i = 0; i < line.length; i++) {\n                this.elements.push(line.charCodeAt(i));\n            }\n            // Don't add an \\n that does not exist in the document.\n            if (i < lines.length - 1) {\n                this.elements.push('\\n'.charCodeAt(0));\n                this.firstCharOffsetByLine[i - this.lineRange.start + 1] = this.elements.length;\n            }\n        }\n        // To account for the last line\n        this.additionalOffsetByLine.push(0);\n    }\n    toString() {\n        return `Slice: \"${this.text}\"`;\n    }\n    get text() {\n        return this.getText(new OffsetRange(0, this.length));\n    }\n    getText(range) {\n        return this.elements.slice(range.start, range.endExclusive).map(e => String.fromCharCode(e)).join('');\n    }\n    getElement(offset) {\n        return this.elements[offset];\n    }\n    get length() {\n        return this.elements.length;\n    }\n    getBoundaryScore(length) {\n        //   a   b   c   ,           d   e   f\n        // 11  0   0   12  15  6   13  0   0   11\n        const prevCategory = getCategory(length > 0 ? this.elements[length - 1] : -1);\n        const nextCategory = getCategory(length < this.elements.length ? this.elements[length] : -1);\n        if (prevCategory === 7 /* CharBoundaryCategory.LineBreakCR */ && nextCategory === 8 /* CharBoundaryCategory.LineBreakLF */) {\n            // don't break between \\r and \\n\n            return 0;\n        }\n        let score = 0;\n        if (prevCategory !== nextCategory) {\n            score += 10;\n            if (prevCategory === 0 /* CharBoundaryCategory.WordLower */ && nextCategory === 1 /* CharBoundaryCategory.WordUpper */) {\n                score += 1;\n            }\n        }\n        score += getCategoryBoundaryScore(prevCategory);\n        score += getCategoryBoundaryScore(nextCategory);\n        return score;\n    }\n    translateOffset(offset) {\n        // find smallest i, so that lineBreakOffsets[i] <= offset using binary search\n        if (this.lineRange.isEmpty) {\n            return new Position(this.lineRange.start + 1, 1);\n        }\n        const i = findLastIdxMonotonous(this.firstCharOffsetByLine, (value) => value <= offset);\n        return new Position(this.lineRange.start + i + 1, offset - this.firstCharOffsetByLine[i] + this.additionalOffsetByLine[i] + 1);\n    }\n    translateRange(range) {\n        return Range.fromPositions(this.translateOffset(range.start), this.translateOffset(range.endExclusive));\n    }\n    /**\n     * Finds the word that contains the character at the given offset\n     */\n    findWordContaining(offset) {\n        if (offset < 0 || offset >= this.elements.length) {\n            return undefined;\n        }\n        if (!isWordChar(this.elements[offset])) {\n            return undefined;\n        }\n        // find start\n        let start = offset;\n        while (start > 0 && isWordChar(this.elements[start - 1])) {\n            start--;\n        }\n        // find end\n        let end = offset;\n        while (end < this.elements.length && isWordChar(this.elements[end])) {\n            end++;\n        }\n        return new OffsetRange(start, end);\n    }\n    countLinesIn(range) {\n        return this.translateOffset(range.endExclusive).lineNumber - this.translateOffset(range.start).lineNumber;\n    }\n    isStronglyEqual(offset1, offset2) {\n        return this.elements[offset1] === this.elements[offset2];\n    }\n    extendToFullLines(range) {\n        var _a, _b;\n        const start = (_a = findLastMonotonous(this.firstCharOffsetByLine, x => x <= range.start)) !== null && _a !== void 0 ? _a : 0;\n        const end = (_b = findFirstMonotonous(this.firstCharOffsetByLine, x => range.endExclusive <= x)) !== null && _b !== void 0 ? _b : this.elements.length;\n        return new OffsetRange(start, end);\n    }\n}\nfunction isWordChar(charCode) {\n    return charCode >= 97 /* CharCode.a */ && charCode <= 122 /* CharCode.z */\n        || charCode >= 65 /* CharCode.A */ && charCode <= 90 /* CharCode.Z */\n        || charCode >= 48 /* CharCode.Digit0 */ && charCode <= 57 /* CharCode.Digit9 */;\n}\nconst score = {\n    [0 /* CharBoundaryCategory.WordLower */]: 0,\n    [1 /* CharBoundaryCategory.WordUpper */]: 0,\n    [2 /* CharBoundaryCategory.WordNumber */]: 0,\n    [3 /* CharBoundaryCategory.End */]: 10,\n    [4 /* CharBoundaryCategory.Other */]: 2,\n    [5 /* CharBoundaryCategory.Separator */]: 3,\n    [6 /* CharBoundaryCategory.Space */]: 3,\n    [7 /* CharBoundaryCategory.LineBreakCR */]: 10,\n    [8 /* CharBoundaryCategory.LineBreakLF */]: 10,\n};\nfunction getCategoryBoundaryScore(category) {\n    return score[category];\n}\nfunction getCategory(charCode) {\n    if (charCode === 10 /* CharCode.LineFeed */) {\n        return 8 /* CharBoundaryCategory.LineBreakLF */;\n    }\n    else if (charCode === 13 /* CharCode.CarriageReturn */) {\n        return 7 /* CharBoundaryCategory.LineBreakCR */;\n    }\n    else if (isSpace(charCode)) {\n        return 6 /* CharBoundaryCategory.Space */;\n    }\n    else if (charCode >= 97 /* CharCode.a */ && charCode <= 122 /* CharCode.z */) {\n        return 0 /* CharBoundaryCategory.WordLower */;\n    }\n    else if (charCode >= 65 /* CharCode.A */ && charCode <= 90 /* CharCode.Z */) {\n        return 1 /* CharBoundaryCategory.WordUpper */;\n    }\n    else if (charCode >= 48 /* CharCode.Digit0 */ && charCode <= 57 /* CharCode.Digit9 */) {\n        return 2 /* CharBoundaryCategory.WordNumber */;\n    }\n    else if (charCode === -1) {\n        return 3 /* CharBoundaryCategory.End */;\n    }\n    else if (charCode === 44 /* CharCode.Comma */ || charCode === 59 /* CharCode.Semicolon */) {\n        return 5 /* CharBoundaryCategory.Separator */;\n    }\n    else {\n        return 4 /* CharBoundaryCategory.Other */;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { SequenceDiff } from './algorithms/diffAlgorithm.js';\nimport { LineRangeMapping } from '../rangeMapping.js';\nimport { pushMany, compareBy, numberComparator, reverseOrder } from '../../../../base/common/arrays.js';\nimport { MonotonousArray, findLastMonotonous } from '../../../../base/common/arraysFind.js';\nimport { SetMap } from '../../../../base/common/map.js';\nimport { LineRange, LineRangeSet } from '../../core/lineRange.js';\nimport { OffsetRange } from '../../core/offsetRange.js';\nimport { LinesSliceCharSequence } from './linesSliceCharSequence.js';\nimport { LineRangeFragment, isSpace } from './utils.js';\nimport { MyersDiffAlgorithm } from './algorithms/myersDiffAlgorithm.js';\nexport function computeMovedLines(changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout) {\n    let { moves, excludedChanges } = computeMovesFromSimpleDeletionsToSimpleInsertions(changes, originalLines, modifiedLines, timeout);\n    if (!timeout.isValid()) {\n        return [];\n    }\n    const filteredChanges = changes.filter(c => !excludedChanges.has(c));\n    const unchangedMoves = computeUnchangedMoves(filteredChanges, hashedOriginalLines, hashedModifiedLines, originalLines, modifiedLines, timeout);\n    pushMany(moves, unchangedMoves);\n    moves = joinCloseConsecutiveMoves(moves);\n    // Ignore too short moves\n    moves = moves.filter(current => {\n        const lines = current.original.toOffsetRange().slice(originalLines).map(l => l.trim());\n        const originalText = lines.join('\\n');\n        return originalText.length >= 15 && countWhere(lines, l => l.length >= 2) >= 2;\n    });\n    moves = removeMovesInSameDiff(changes, moves);\n    return moves;\n}\nfunction countWhere(arr, predicate) {\n    let count = 0;\n    for (const t of arr) {\n        if (predicate(t)) {\n            count++;\n        }\n    }\n    return count;\n}\nfunction computeMovesFromSimpleDeletionsToSimpleInsertions(changes, originalLines, modifiedLines, timeout) {\n    const moves = [];\n    const deletions = changes\n        .filter(c => c.modified.isEmpty && c.original.length >= 3)\n        .map(d => new LineRangeFragment(d.original, originalLines, d));\n    const insertions = new Set(changes\n        .filter(c => c.original.isEmpty && c.modified.length >= 3)\n        .map(d => new LineRangeFragment(d.modified, modifiedLines, d)));\n    const excludedChanges = new Set();\n    for (const deletion of deletions) {\n        let highestSimilarity = -1;\n        let best;\n        for (const insertion of insertions) {\n            const similarity = deletion.computeSimilarity(insertion);\n            if (similarity > highestSimilarity) {\n                highestSimilarity = similarity;\n                best = insertion;\n            }\n        }\n        if (highestSimilarity > 0.90 && best) {\n            insertions.delete(best);\n            moves.push(new LineRangeMapping(deletion.range, best.range));\n            excludedChanges.add(deletion.source);\n            excludedChanges.add(best.source);\n        }\n        if (!timeout.isValid()) {\n            return { moves, excludedChanges };\n        }\n    }\n    return { moves, excludedChanges };\n}\nfunction computeUnchangedMoves(changes, hashedOriginalLines, hashedModifiedLines, originalLines, modifiedLines, timeout) {\n    const moves = [];\n    const original3LineHashes = new SetMap();\n    for (const change of changes) {\n        for (let i = change.original.startLineNumber; i < change.original.endLineNumberExclusive - 2; i++) {\n            const key = `${hashedOriginalLines[i - 1]}:${hashedOriginalLines[i + 1 - 1]}:${hashedOriginalLines[i + 2 - 1]}`;\n            original3LineHashes.add(key, { range: new LineRange(i, i + 3) });\n        }\n    }\n    const possibleMappings = [];\n    changes.sort(compareBy(c => c.modified.startLineNumber, numberComparator));\n    for (const change of changes) {\n        let lastMappings = [];\n        for (let i = change.modified.startLineNumber; i < change.modified.endLineNumberExclusive - 2; i++) {\n            const key = `${hashedModifiedLines[i - 1]}:${hashedModifiedLines[i + 1 - 1]}:${hashedModifiedLines[i + 2 - 1]}`;\n            const currentModifiedRange = new LineRange(i, i + 3);\n            const nextMappings = [];\n            original3LineHashes.forEach(key, ({ range }) => {\n                for (const lastMapping of lastMappings) {\n                    // does this match extend some last match?\n                    if (lastMapping.originalLineRange.endLineNumberExclusive + 1 === range.endLineNumberExclusive &&\n                        lastMapping.modifiedLineRange.endLineNumberExclusive + 1 === currentModifiedRange.endLineNumberExclusive) {\n                        lastMapping.originalLineRange = new LineRange(lastMapping.originalLineRange.startLineNumber, range.endLineNumberExclusive);\n                        lastMapping.modifiedLineRange = new LineRange(lastMapping.modifiedLineRange.startLineNumber, currentModifiedRange.endLineNumberExclusive);\n                        nextMappings.push(lastMapping);\n                        return;\n                    }\n                }\n                const mapping = {\n                    modifiedLineRange: currentModifiedRange,\n                    originalLineRange: range,\n                };\n                possibleMappings.push(mapping);\n                nextMappings.push(mapping);\n            });\n            lastMappings = nextMappings;\n        }\n        if (!timeout.isValid()) {\n            return [];\n        }\n    }\n    possibleMappings.sort(reverseOrder(compareBy(m => m.modifiedLineRange.length, numberComparator)));\n    const modifiedSet = new LineRangeSet();\n    const originalSet = new LineRangeSet();\n    for (const mapping of possibleMappings) {\n        const diffOrigToMod = mapping.modifiedLineRange.startLineNumber - mapping.originalLineRange.startLineNumber;\n        const modifiedSections = modifiedSet.subtractFrom(mapping.modifiedLineRange);\n        const originalTranslatedSections = originalSet.subtractFrom(mapping.originalLineRange).getWithDelta(diffOrigToMod);\n        const modifiedIntersectedSections = modifiedSections.getIntersection(originalTranslatedSections);\n        for (const s of modifiedIntersectedSections.ranges) {\n            if (s.length < 3) {\n                continue;\n            }\n            const modifiedLineRange = s;\n            const originalLineRange = s.delta(-diffOrigToMod);\n            moves.push(new LineRangeMapping(originalLineRange, modifiedLineRange));\n            modifiedSet.addRange(modifiedLineRange);\n            originalSet.addRange(originalLineRange);\n        }\n    }\n    moves.sort(compareBy(m => m.original.startLineNumber, numberComparator));\n    const monotonousChanges = new MonotonousArray(changes);\n    for (let i = 0; i < moves.length; i++) {\n        const move = moves[i];\n        const firstTouchingChangeOrig = monotonousChanges.findLastMonotonous(c => c.original.startLineNumber <= move.original.startLineNumber);\n        const firstTouchingChangeMod = findLastMonotonous(changes, c => c.modified.startLineNumber <= move.modified.startLineNumber);\n        const linesAbove = Math.max(move.original.startLineNumber - firstTouchingChangeOrig.original.startLineNumber, move.modified.startLineNumber - firstTouchingChangeMod.modified.startLineNumber);\n        const lastTouchingChangeOrig = monotonousChanges.findLastMonotonous(c => c.original.startLineNumber < move.original.endLineNumberExclusive);\n        const lastTouchingChangeMod = findLastMonotonous(changes, c => c.modified.startLineNumber < move.modified.endLineNumberExclusive);\n        const linesBelow = Math.max(lastTouchingChangeOrig.original.endLineNumberExclusive - move.original.endLineNumberExclusive, lastTouchingChangeMod.modified.endLineNumberExclusive - move.modified.endLineNumberExclusive);\n        let extendToTop;\n        for (extendToTop = 0; extendToTop < linesAbove; extendToTop++) {\n            const origLine = move.original.startLineNumber - extendToTop - 1;\n            const modLine = move.modified.startLineNumber - extendToTop - 1;\n            if (origLine > originalLines.length || modLine > modifiedLines.length) {\n                break;\n            }\n            if (modifiedSet.contains(modLine) || originalSet.contains(origLine)) {\n                break;\n            }\n            if (!areLinesSimilar(originalLines[origLine - 1], modifiedLines[modLine - 1], timeout)) {\n                break;\n            }\n        }\n        if (extendToTop > 0) {\n            originalSet.addRange(new LineRange(move.original.startLineNumber - extendToTop, move.original.startLineNumber));\n            modifiedSet.addRange(new LineRange(move.modified.startLineNumber - extendToTop, move.modified.startLineNumber));\n        }\n        let extendToBottom;\n        for (extendToBottom = 0; extendToBottom < linesBelow; extendToBottom++) {\n            const origLine = move.original.endLineNumberExclusive + extendToBottom;\n            const modLine = move.modified.endLineNumberExclusive + extendToBottom;\n            if (origLine > originalLines.length || modLine > modifiedLines.length) {\n                break;\n            }\n            if (modifiedSet.contains(modLine) || originalSet.contains(origLine)) {\n                break;\n            }\n            if (!areLinesSimilar(originalLines[origLine - 1], modifiedLines[modLine - 1], timeout)) {\n                break;\n            }\n        }\n        if (extendToBottom > 0) {\n            originalSet.addRange(new LineRange(move.original.endLineNumberExclusive, move.original.endLineNumberExclusive + extendToBottom));\n            modifiedSet.addRange(new LineRange(move.modified.endLineNumberExclusive, move.modified.endLineNumberExclusive + extendToBottom));\n        }\n        if (extendToTop > 0 || extendToBottom > 0) {\n            moves[i] = new LineRangeMapping(new LineRange(move.original.startLineNumber - extendToTop, move.original.endLineNumberExclusive + extendToBottom), new LineRange(move.modified.startLineNumber - extendToTop, move.modified.endLineNumberExclusive + extendToBottom));\n        }\n    }\n    return moves;\n}\nfunction areLinesSimilar(line1, line2, timeout) {\n    if (line1.trim() === line2.trim()) {\n        return true;\n    }\n    if (line1.length > 300 && line2.length > 300) {\n        return false;\n    }\n    const myersDiffingAlgorithm = new MyersDiffAlgorithm();\n    const result = myersDiffingAlgorithm.compute(new LinesSliceCharSequence([line1], new OffsetRange(0, 1), false), new LinesSliceCharSequence([line2], new OffsetRange(0, 1), false), timeout);\n    let commonNonSpaceCharCount = 0;\n    const inverted = SequenceDiff.invert(result.diffs, line1.length);\n    for (const seq of inverted) {\n        seq.seq1Range.forEach(idx => {\n            if (!isSpace(line1.charCodeAt(idx))) {\n                commonNonSpaceCharCount++;\n            }\n        });\n    }\n    function countNonWsChars(str) {\n        let count = 0;\n        for (let i = 0; i < line1.length; i++) {\n            if (!isSpace(str.charCodeAt(i))) {\n                count++;\n            }\n        }\n        return count;\n    }\n    const longerLineLength = countNonWsChars(line1.length > line2.length ? line1 : line2);\n    const r = commonNonSpaceCharCount / longerLineLength > 0.6 && longerLineLength > 10;\n    return r;\n}\nfunction joinCloseConsecutiveMoves(moves) {\n    if (moves.length === 0) {\n        return moves;\n    }\n    moves.sort(compareBy(m => m.original.startLineNumber, numberComparator));\n    const result = [moves[0]];\n    for (let i = 1; i < moves.length; i++) {\n        const last = result[result.length - 1];\n        const current = moves[i];\n        const originalDist = current.original.startLineNumber - last.original.endLineNumberExclusive;\n        const modifiedDist = current.modified.startLineNumber - last.modified.endLineNumberExclusive;\n        const currentMoveAfterLast = originalDist >= 0 && modifiedDist >= 0;\n        if (currentMoveAfterLast && originalDist + modifiedDist <= 2) {\n            result[result.length - 1] = last.join(current);\n            continue;\n        }\n        result.push(current);\n    }\n    return result;\n}\nfunction removeMovesInSameDiff(changes, moves) {\n    const changesMonotonous = new MonotonousArray(changes);\n    moves = moves.filter(m => {\n        const diffBeforeEndOfMoveOriginal = changesMonotonous.findLastMonotonous(c => c.original.startLineNumber < m.original.endLineNumberExclusive)\n            || new LineRangeMapping(new LineRange(1, 1), new LineRange(1, 1));\n        const diffBeforeEndOfMoveModified = findLastMonotonous(changes, c => c.modified.startLineNumber < m.modified.endLineNumberExclusive);\n        const differentDiffs = diffBeforeEndOfMoveOriginal !== diffBeforeEndOfMoveModified;\n        return differentDiffs;\n    });\n    return moves;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { forEachWithNeighbors } from '../../../../base/common/arrays.js';\nimport { OffsetRange } from '../../core/offsetRange.js';\nimport { OffsetPair, SequenceDiff } from './algorithms/diffAlgorithm.js';\nexport function optimizeSequenceDiffs(sequence1, sequence2, sequenceDiffs) {\n    let result = sequenceDiffs;\n    result = joinSequenceDiffsByShifting(sequence1, sequence2, result);\n    // Sometimes, calling this function twice improves the result.\n    // Uncomment the second invocation and run the tests to see the difference.\n    result = joinSequenceDiffsByShifting(sequence1, sequence2, result);\n    result = shiftSequenceDiffs(sequence1, sequence2, result);\n    return result;\n}\n/**\n * This function fixes issues like this:\n * ```\n * import { Baz, Bar } from \"foo\";\n * ```\n * <->\n * ```\n * import { Baz, Bar, Foo } from \"foo\";\n * ```\n * Computed diff: [ {Add \",\" after Bar}, {Add \"Foo \" after space} }\n * Improved diff: [{Add \", Foo\" after Bar}]\n */\nfunction joinSequenceDiffsByShifting(sequence1, sequence2, sequenceDiffs) {\n    if (sequenceDiffs.length === 0) {\n        return sequenceDiffs;\n    }\n    const result = [];\n    result.push(sequenceDiffs[0]);\n    // First move them all to the left as much as possible and join them if possible\n    for (let i = 1; i < sequenceDiffs.length; i++) {\n        const prevResult = result[result.length - 1];\n        let cur = sequenceDiffs[i];\n        if (cur.seq1Range.isEmpty || cur.seq2Range.isEmpty) {\n            const length = cur.seq1Range.start - prevResult.seq1Range.endExclusive;\n            let d;\n            for (d = 1; d <= length; d++) {\n                if (sequence1.getElement(cur.seq1Range.start - d) !== sequence1.getElement(cur.seq1Range.endExclusive - d) ||\n                    sequence2.getElement(cur.seq2Range.start - d) !== sequence2.getElement(cur.seq2Range.endExclusive - d)) {\n                    break;\n                }\n            }\n            d--;\n            if (d === length) {\n                // Merge previous and current diff\n                result[result.length - 1] = new SequenceDiff(new OffsetRange(prevResult.seq1Range.start, cur.seq1Range.endExclusive - length), new OffsetRange(prevResult.seq2Range.start, cur.seq2Range.endExclusive - length));\n                continue;\n            }\n            cur = cur.delta(-d);\n        }\n        result.push(cur);\n    }\n    const result2 = [];\n    // Then move them all to the right and join them again if possible\n    for (let i = 0; i < result.length - 1; i++) {\n        const nextResult = result[i + 1];\n        let cur = result[i];\n        if (cur.seq1Range.isEmpty || cur.seq2Range.isEmpty) {\n            const length = nextResult.seq1Range.start - cur.seq1Range.endExclusive;\n            let d;\n            for (d = 0; d < length; d++) {\n                if (!sequence1.isStronglyEqual(cur.seq1Range.start + d, cur.seq1Range.endExclusive + d) ||\n                    !sequence2.isStronglyEqual(cur.seq2Range.start + d, cur.seq2Range.endExclusive + d)) {\n                    break;\n                }\n            }\n            if (d === length) {\n                // Merge previous and current diff, write to result!\n                result[i + 1] = new SequenceDiff(new OffsetRange(cur.seq1Range.start + length, nextResult.seq1Range.endExclusive), new OffsetRange(cur.seq2Range.start + length, nextResult.seq2Range.endExclusive));\n                continue;\n            }\n            if (d > 0) {\n                cur = cur.delta(d);\n            }\n        }\n        result2.push(cur);\n    }\n    if (result.length > 0) {\n        result2.push(result[result.length - 1]);\n    }\n    return result2;\n}\n// align character level diffs at whitespace characters\n// import { IBar } from \"foo\";\n// import { I[Arr, I]Bar } from \"foo\";\n// ->\n// import { [IArr, ]IBar } from \"foo\";\n// import { ITransaction, observableValue, transaction } from 'vs/base/common/observable';\n// import { ITransaction, observable[FromEvent, observable]Value, transaction } from 'vs/base/common/observable';\n// ->\n// import { ITransaction, [observableFromEvent, ]observableValue, transaction } from 'vs/base/common/observable';\n// collectBrackets(level + 1, levelPerBracketType);\n// collectBrackets(level + 1, levelPerBracket[ + 1, levelPerBracket]Type);\n// ->\n// collectBrackets(level + 1, [levelPerBracket + 1, ]levelPerBracketType);\nfunction shiftSequenceDiffs(sequence1, sequence2, sequenceDiffs) {\n    if (!sequence1.getBoundaryScore || !sequence2.getBoundaryScore) {\n        return sequenceDiffs;\n    }\n    for (let i = 0; i < sequenceDiffs.length; i++) {\n        const prevDiff = (i > 0 ? sequenceDiffs[i - 1] : undefined);\n        const diff = sequenceDiffs[i];\n        const nextDiff = (i + 1 < sequenceDiffs.length ? sequenceDiffs[i + 1] : undefined);\n        const seq1ValidRange = new OffsetRange(prevDiff ? prevDiff.seq1Range.start + 1 : 0, nextDiff ? nextDiff.seq1Range.endExclusive - 1 : sequence1.length);\n        const seq2ValidRange = new OffsetRange(prevDiff ? prevDiff.seq2Range.start + 1 : 0, nextDiff ? nextDiff.seq2Range.endExclusive - 1 : sequence2.length);\n        if (diff.seq1Range.isEmpty) {\n            sequenceDiffs[i] = shiftDiffToBetterPosition(diff, sequence1, sequence2, seq1ValidRange, seq2ValidRange);\n        }\n        else if (diff.seq2Range.isEmpty) {\n            sequenceDiffs[i] = shiftDiffToBetterPosition(diff.swap(), sequence2, sequence1, seq2ValidRange, seq1ValidRange).swap();\n        }\n    }\n    return sequenceDiffs;\n}\nfunction shiftDiffToBetterPosition(diff, sequence1, sequence2, seq1ValidRange, seq2ValidRange) {\n    const maxShiftLimit = 100; // To prevent performance issues\n    // don't touch previous or next!\n    let deltaBefore = 1;\n    while (diff.seq1Range.start - deltaBefore >= seq1ValidRange.start &&\n        diff.seq2Range.start - deltaBefore >= seq2ValidRange.start &&\n        sequence2.isStronglyEqual(diff.seq2Range.start - deltaBefore, diff.seq2Range.endExclusive - deltaBefore) && deltaBefore < maxShiftLimit) {\n        deltaBefore++;\n    }\n    deltaBefore--;\n    let deltaAfter = 0;\n    while (diff.seq1Range.start + deltaAfter < seq1ValidRange.endExclusive &&\n        diff.seq2Range.endExclusive + deltaAfter < seq2ValidRange.endExclusive &&\n        sequence2.isStronglyEqual(diff.seq2Range.start + deltaAfter, diff.seq2Range.endExclusive + deltaAfter) && deltaAfter < maxShiftLimit) {\n        deltaAfter++;\n    }\n    if (deltaBefore === 0 && deltaAfter === 0) {\n        return diff;\n    }\n    // Visualize `[sequence1.text, diff.seq1Range.start + deltaAfter]`\n    // and `[sequence2.text, diff.seq2Range.start + deltaAfter, diff.seq2Range.endExclusive + deltaAfter]`\n    let bestDelta = 0;\n    let bestScore = -1;\n    // find best scored delta\n    for (let delta = -deltaBefore; delta <= deltaAfter; delta++) {\n        const seq2OffsetStart = diff.seq2Range.start + delta;\n        const seq2OffsetEndExclusive = diff.seq2Range.endExclusive + delta;\n        const seq1Offset = diff.seq1Range.start + delta;\n        const score = sequence1.getBoundaryScore(seq1Offset) + sequence2.getBoundaryScore(seq2OffsetStart) + sequence2.getBoundaryScore(seq2OffsetEndExclusive);\n        if (score > bestScore) {\n            bestScore = score;\n            bestDelta = delta;\n        }\n    }\n    return diff.delta(bestDelta);\n}\nexport function removeShortMatches(sequence1, sequence2, sequenceDiffs) {\n    const result = [];\n    for (const s of sequenceDiffs) {\n        const last = result[result.length - 1];\n        if (!last) {\n            result.push(s);\n            continue;\n        }\n        if (s.seq1Range.start - last.seq1Range.endExclusive <= 2 || s.seq2Range.start - last.seq2Range.endExclusive <= 2) {\n            result[result.length - 1] = new SequenceDiff(last.seq1Range.join(s.seq1Range), last.seq2Range.join(s.seq2Range));\n        }\n        else {\n            result.push(s);\n        }\n    }\n    return result;\n}\nexport function extendDiffsToEntireWordIfAppropriate(sequence1, sequence2, sequenceDiffs) {\n    const additional = [];\n    let lastModifiedWord = undefined;\n    function maybePushWordToAdditional() {\n        if (!lastModifiedWord) {\n            return;\n        }\n        const originalLength1 = lastModifiedWord.s1Range.length - lastModifiedWord.deleted;\n        const originalLength2 = lastModifiedWord.s2Range.length - lastModifiedWord.added;\n        if (originalLength1 !== originalLength2) {\n            // TODO figure out why this happens\n        }\n        if (Math.max(lastModifiedWord.deleted, lastModifiedWord.added) + (lastModifiedWord.count - 1) > originalLength1) {\n            additional.push(new SequenceDiff(lastModifiedWord.s1Range, lastModifiedWord.s2Range));\n        }\n        lastModifiedWord = undefined;\n    }\n    for (const s of sequenceDiffs) {\n        function processWord(s1Range, s2Range) {\n            var _a, _b, _c, _d;\n            if (!lastModifiedWord || !lastModifiedWord.s1Range.containsRange(s1Range) || !lastModifiedWord.s2Range.containsRange(s2Range)) {\n                if (lastModifiedWord && !(lastModifiedWord.s1Range.endExclusive < s1Range.start && lastModifiedWord.s2Range.endExclusive < s2Range.start)) {\n                    const s1Added = OffsetRange.tryCreate(lastModifiedWord.s1Range.endExclusive, s1Range.start);\n                    const s2Added = OffsetRange.tryCreate(lastModifiedWord.s2Range.endExclusive, s2Range.start);\n                    lastModifiedWord.deleted += (_a = s1Added === null || s1Added === void 0 ? void 0 : s1Added.length) !== null && _a !== void 0 ? _a : 0;\n                    lastModifiedWord.added += (_b = s2Added === null || s2Added === void 0 ? void 0 : s2Added.length) !== null && _b !== void 0 ? _b : 0;\n                    lastModifiedWord.s1Range = lastModifiedWord.s1Range.join(s1Range);\n                    lastModifiedWord.s2Range = lastModifiedWord.s2Range.join(s2Range);\n                }\n                else {\n                    maybePushWordToAdditional();\n                    lastModifiedWord = { added: 0, deleted: 0, count: 0, s1Range: s1Range, s2Range: s2Range };\n                }\n            }\n            const changedS1 = s1Range.intersect(s.seq1Range);\n            const changedS2 = s2Range.intersect(s.seq2Range);\n            lastModifiedWord.count++;\n            lastModifiedWord.deleted += (_c = changedS1 === null || changedS1 === void 0 ? void 0 : changedS1.length) !== null && _c !== void 0 ? _c : 0;\n            lastModifiedWord.added += (_d = changedS2 === null || changedS2 === void 0 ? void 0 : changedS2.length) !== null && _d !== void 0 ? _d : 0;\n        }\n        const w1Before = sequence1.findWordContaining(s.seq1Range.start - 1);\n        const w2Before = sequence2.findWordContaining(s.seq2Range.start - 1);\n        const w1After = sequence1.findWordContaining(s.seq1Range.endExclusive);\n        const w2After = sequence2.findWordContaining(s.seq2Range.endExclusive);\n        if (w1Before && w1After && w2Before && w2After && w1Before.equals(w1After) && w2Before.equals(w2After)) {\n            processWord(w1Before, w2Before);\n        }\n        else {\n            if (w1Before && w2Before) {\n                processWord(w1Before, w2Before);\n            }\n            if (w1After && w2After) {\n                processWord(w1After, w2After);\n            }\n        }\n    }\n    maybePushWordToAdditional();\n    const merged = mergeSequenceDiffs(sequenceDiffs, additional);\n    return merged;\n}\nfunction mergeSequenceDiffs(sequenceDiffs1, sequenceDiffs2) {\n    const result = [];\n    while (sequenceDiffs1.length > 0 || sequenceDiffs2.length > 0) {\n        const sd1 = sequenceDiffs1[0];\n        const sd2 = sequenceDiffs2[0];\n        let next;\n        if (sd1 && (!sd2 || sd1.seq1Range.start < sd2.seq1Range.start)) {\n            next = sequenceDiffs1.shift();\n        }\n        else {\n            next = sequenceDiffs2.shift();\n        }\n        if (result.length > 0 && result[result.length - 1].seq1Range.endExclusive >= next.seq1Range.start) {\n            result[result.length - 1] = result[result.length - 1].join(next);\n        }\n        else {\n            result.push(next);\n        }\n    }\n    return result;\n}\nexport function removeVeryShortMatchingLinesBetweenDiffs(sequence1, _sequence2, sequenceDiffs) {\n    let diffs = sequenceDiffs;\n    if (diffs.length === 0) {\n        return diffs;\n    }\n    let counter = 0;\n    let shouldRepeat;\n    do {\n        shouldRepeat = false;\n        const result = [\n            diffs[0]\n        ];\n        for (let i = 1; i < diffs.length; i++) {\n            const cur = diffs[i];\n            const lastResult = result[result.length - 1];\n            function shouldJoinDiffs(before, after) {\n                const unchangedRange = new OffsetRange(lastResult.seq1Range.endExclusive, cur.seq1Range.start);\n                const unchangedText = sequence1.getText(unchangedRange);\n                const unchangedTextWithoutWs = unchangedText.replace(/\\s/g, '');\n                if (unchangedTextWithoutWs.length <= 4\n                    && (before.seq1Range.length + before.seq2Range.length > 5 || after.seq1Range.length + after.seq2Range.length > 5)) {\n                    return true;\n                }\n                return false;\n            }\n            const shouldJoin = shouldJoinDiffs(lastResult, cur);\n            if (shouldJoin) {\n                shouldRepeat = true;\n                result[result.length - 1] = result[result.length - 1].join(cur);\n            }\n            else {\n                result.push(cur);\n            }\n        }\n        diffs = result;\n    } while (counter++ < 10 && shouldRepeat);\n    return diffs;\n}\nexport function removeVeryShortMatchingTextBetweenLongDiffs(sequence1, sequence2, sequenceDiffs) {\n    let diffs = sequenceDiffs;\n    if (diffs.length === 0) {\n        return diffs;\n    }\n    let counter = 0;\n    let shouldRepeat;\n    do {\n        shouldRepeat = false;\n        const result = [\n            diffs[0]\n        ];\n        for (let i = 1; i < diffs.length; i++) {\n            const cur = diffs[i];\n            const lastResult = result[result.length - 1];\n            function shouldJoinDiffs(before, after) {\n                const unchangedRange = new OffsetRange(lastResult.seq1Range.endExclusive, cur.seq1Range.start);\n                const unchangedLineCount = sequence1.countLinesIn(unchangedRange);\n                if (unchangedLineCount > 5 || unchangedRange.length > 500) {\n                    return false;\n                }\n                const unchangedText = sequence1.getText(unchangedRange).trim();\n                if (unchangedText.length > 20 || unchangedText.split(/\\r\\n|\\r|\\n/).length > 1) {\n                    return false;\n                }\n                const beforeLineCount1 = sequence1.countLinesIn(before.seq1Range);\n                const beforeSeq1Length = before.seq1Range.length;\n                const beforeLineCount2 = sequence2.countLinesIn(before.seq2Range);\n                const beforeSeq2Length = before.seq2Range.length;\n                const afterLineCount1 = sequence1.countLinesIn(after.seq1Range);\n                const afterSeq1Length = after.seq1Range.length;\n                const afterLineCount2 = sequence2.countLinesIn(after.seq2Range);\n                const afterSeq2Length = after.seq2Range.length;\n                // TODO: Maybe a neural net can be used to derive the result from these numbers\n                const max = 2 * 40 + 50;\n                function cap(v) {\n                    return Math.min(v, max);\n                }\n                if (Math.pow(Math.pow(cap(beforeLineCount1 * 40 + beforeSeq1Length), 1.5) + Math.pow(cap(beforeLineCount2 * 40 + beforeSeq2Length), 1.5), 1.5)\n                    + Math.pow(Math.pow(cap(afterLineCount1 * 40 + afterSeq1Length), 1.5) + Math.pow(cap(afterLineCount2 * 40 + afterSeq2Length), 1.5), 1.5) > ((max ** 1.5) ** 1.5) * 1.3) {\n                    return true;\n                }\n                return false;\n            }\n            const shouldJoin = shouldJoinDiffs(lastResult, cur);\n            if (shouldJoin) {\n                shouldRepeat = true;\n                result[result.length - 1] = result[result.length - 1].join(cur);\n            }\n            else {\n                result.push(cur);\n            }\n        }\n        diffs = result;\n    } while (counter++ < 10 && shouldRepeat);\n    const newDiffs = [];\n    // Remove short suffixes/prefixes\n    forEachWithNeighbors(diffs, (prev, cur, next) => {\n        let newDiff = cur;\n        function shouldMarkAsChanged(text) {\n            return text.length > 0 && text.trim().length <= 3 && cur.seq1Range.length + cur.seq2Range.length > 100;\n        }\n        const fullRange1 = sequence1.extendToFullLines(cur.seq1Range);\n        const prefix = sequence1.getText(new OffsetRange(fullRange1.start, cur.seq1Range.start));\n        if (shouldMarkAsChanged(prefix)) {\n            newDiff = newDiff.deltaStart(-prefix.length);\n        }\n        const suffix = sequence1.getText(new OffsetRange(cur.seq1Range.endExclusive, fullRange1.endExclusive));\n        if (shouldMarkAsChanged(suffix)) {\n            newDiff = newDiff.deltaEnd(suffix.length);\n        }\n        const availableSpace = SequenceDiff.fromOffsetPairs(prev ? prev.getEndExclusives() : OffsetPair.zero, next ? next.getStarts() : OffsetPair.max);\n        const result = newDiff.intersect(availableSpace);\n        newDiffs.push(result);\n    });\n    return newDiffs;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class LineSequence {\n    constructor(trimmedHash, lines) {\n        this.trimmedHash = trimmedHash;\n        this.lines = lines;\n    }\n    getElement(offset) {\n        return this.trimmedHash[offset];\n    }\n    get length() {\n        return this.trimmedHash.length;\n    }\n    getBoundaryScore(length) {\n        const indentationBefore = length === 0 ? 0 : getIndentation(this.lines[length - 1]);\n        const indentationAfter = length === this.lines.length ? 0 : getIndentation(this.lines[length]);\n        return 1000 - (indentationBefore + indentationAfter);\n    }\n    getText(range) {\n        return this.lines.slice(range.start, range.endExclusive).join('\\n');\n    }\n    isStronglyEqual(offset1, offset2) {\n        return this.lines[offset1] === this.lines[offset2];\n    }\n}\nfunction getIndentation(str) {\n    let i = 0;\n    while (i < str.length && (str.charCodeAt(i) === 32 /* CharCode.Space */ || str.charCodeAt(i) === 9 /* CharCode.Tab */)) {\n        i++;\n    }\n    return i;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { equals, groupAdjacentBy } from '../../../../base/common/arrays.js';\nimport { assertFn, checkAdjacentItems } from '../../../../base/common/assert.js';\nimport { LineRange } from '../../core/lineRange.js';\nimport { OffsetRange } from '../../core/offsetRange.js';\nimport { Range } from '../../core/range.js';\nimport { DateTimeout, InfiniteTimeout, SequenceDiff } from './algorithms/diffAlgorithm.js';\nimport { DynamicProgrammingDiffing } from './algorithms/dynamicProgrammingDiffing.js';\nimport { MyersDiffAlgorithm } from './algorithms/myersDiffAlgorithm.js';\nimport { computeMovedLines } from './computeMovedLines.js';\nimport { extendDiffsToEntireWordIfAppropriate, optimizeSequenceDiffs, removeVeryShortMatchingLinesBetweenDiffs, removeVeryShortMatchingTextBetweenLongDiffs, removeShortMatches } from './heuristicSequenceOptimizations.js';\nimport { LinesDiff, MovedText } from '../linesDiffComputer.js';\nimport { DetailedLineRangeMapping, RangeMapping } from '../rangeMapping.js';\nimport { LinesSliceCharSequence } from './linesSliceCharSequence.js';\nimport { LineSequence } from './lineSequence.js';\nexport class DefaultLinesDiffComputer {\n    constructor() {\n        this.dynamicProgrammingDiffing = new DynamicProgrammingDiffing();\n        this.myersDiffingAlgorithm = new MyersDiffAlgorithm();\n    }\n    computeDiff(originalLines, modifiedLines, options) {\n        if (originalLines.length <= 1 && equals(originalLines, modifiedLines, (a, b) => a === b)) {\n            return new LinesDiff([], [], false);\n        }\n        if (originalLines.length === 1 && originalLines[0].length === 0 || modifiedLines.length === 1 && modifiedLines[0].length === 0) {\n            return new LinesDiff([\n                new DetailedLineRangeMapping(new LineRange(1, originalLines.length + 1), new LineRange(1, modifiedLines.length + 1), [\n                    new RangeMapping(new Range(1, 1, originalLines.length, originalLines[0].length + 1), new Range(1, 1, modifiedLines.length, modifiedLines[0].length + 1))\n                ])\n            ], [], false);\n        }\n        const timeout = options.maxComputationTimeMs === 0 ? InfiniteTimeout.instance : new DateTimeout(options.maxComputationTimeMs);\n        const considerWhitespaceChanges = !options.ignoreTrimWhitespace;\n        const perfectHashes = new Map();\n        function getOrCreateHash(text) {\n            let hash = perfectHashes.get(text);\n            if (hash === undefined) {\n                hash = perfectHashes.size;\n                perfectHashes.set(text, hash);\n            }\n            return hash;\n        }\n        const originalLinesHashes = originalLines.map((l) => getOrCreateHash(l.trim()));\n        const modifiedLinesHashes = modifiedLines.map((l) => getOrCreateHash(l.trim()));\n        const sequence1 = new LineSequence(originalLinesHashes, originalLines);\n        const sequence2 = new LineSequence(modifiedLinesHashes, modifiedLines);\n        const lineAlignmentResult = (() => {\n            if (sequence1.length + sequence2.length < 1700) {\n                // Use the improved algorithm for small files\n                return this.dynamicProgrammingDiffing.compute(sequence1, sequence2, timeout, (offset1, offset2) => originalLines[offset1] === modifiedLines[offset2]\n                    ? modifiedLines[offset2].length === 0\n                        ? 0.1\n                        : 1 + Math.log(1 + modifiedLines[offset2].length)\n                    : 0.99);\n            }\n            return this.myersDiffingAlgorithm.compute(sequence1, sequence2);\n        })();\n        let lineAlignments = lineAlignmentResult.diffs;\n        let hitTimeout = lineAlignmentResult.hitTimeout;\n        lineAlignments = optimizeSequenceDiffs(sequence1, sequence2, lineAlignments);\n        lineAlignments = removeVeryShortMatchingLinesBetweenDiffs(sequence1, sequence2, lineAlignments);\n        const alignments = [];\n        const scanForWhitespaceChanges = (equalLinesCount) => {\n            if (!considerWhitespaceChanges) {\n                return;\n            }\n            for (let i = 0; i < equalLinesCount; i++) {\n                const seq1Offset = seq1LastStart + i;\n                const seq2Offset = seq2LastStart + i;\n                if (originalLines[seq1Offset] !== modifiedLines[seq2Offset]) {\n                    // This is because of whitespace changes, diff these lines\n                    const characterDiffs = this.refineDiff(originalLines, modifiedLines, new SequenceDiff(new OffsetRange(seq1Offset, seq1Offset + 1), new OffsetRange(seq2Offset, seq2Offset + 1)), timeout, considerWhitespaceChanges);\n                    for (const a of characterDiffs.mappings) {\n                        alignments.push(a);\n                    }\n                    if (characterDiffs.hitTimeout) {\n                        hitTimeout = true;\n                    }\n                }\n            }\n        };\n        let seq1LastStart = 0;\n        let seq2LastStart = 0;\n        for (const diff of lineAlignments) {\n            assertFn(() => diff.seq1Range.start - seq1LastStart === diff.seq2Range.start - seq2LastStart);\n            const equalLinesCount = diff.seq1Range.start - seq1LastStart;\n            scanForWhitespaceChanges(equalLinesCount);\n            seq1LastStart = diff.seq1Range.endExclusive;\n            seq2LastStart = diff.seq2Range.endExclusive;\n            const characterDiffs = this.refineDiff(originalLines, modifiedLines, diff, timeout, considerWhitespaceChanges);\n            if (characterDiffs.hitTimeout) {\n                hitTimeout = true;\n            }\n            for (const a of characterDiffs.mappings) {\n                alignments.push(a);\n            }\n        }\n        scanForWhitespaceChanges(originalLines.length - seq1LastStart);\n        const changes = lineRangeMappingFromRangeMappings(alignments, originalLines, modifiedLines);\n        let moves = [];\n        if (options.computeMoves) {\n            moves = this.computeMoves(changes, originalLines, modifiedLines, originalLinesHashes, modifiedLinesHashes, timeout, considerWhitespaceChanges);\n        }\n        // Make sure all ranges are valid\n        assertFn(() => {\n            function validatePosition(pos, lines) {\n                if (pos.lineNumber < 1 || pos.lineNumber > lines.length) {\n                    return false;\n                }\n                const line = lines[pos.lineNumber - 1];\n                if (pos.column < 1 || pos.column > line.length + 1) {\n                    return false;\n                }\n                return true;\n            }\n            function validateRange(range, lines) {\n                if (range.startLineNumber < 1 || range.startLineNumber > lines.length + 1) {\n                    return false;\n                }\n                if (range.endLineNumberExclusive < 1 || range.endLineNumberExclusive > lines.length + 1) {\n                    return false;\n                }\n                return true;\n            }\n            for (const c of changes) {\n                if (!c.innerChanges) {\n                    return false;\n                }\n                for (const ic of c.innerChanges) {\n                    const valid = validatePosition(ic.modifiedRange.getStartPosition(), modifiedLines) && validatePosition(ic.modifiedRange.getEndPosition(), modifiedLines) &&\n                        validatePosition(ic.originalRange.getStartPosition(), originalLines) && validatePosition(ic.originalRange.getEndPosition(), originalLines);\n                    if (!valid) {\n                        return false;\n                    }\n                }\n                if (!validateRange(c.modified, modifiedLines) || !validateRange(c.original, originalLines)) {\n                    return false;\n                }\n            }\n            return true;\n        });\n        return new LinesDiff(changes, moves, hitTimeout);\n    }\n    computeMoves(changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout, considerWhitespaceChanges) {\n        const moves = computeMovedLines(changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout);\n        const movesWithDiffs = moves.map(m => {\n            const moveChanges = this.refineDiff(originalLines, modifiedLines, new SequenceDiff(m.original.toOffsetRange(), m.modified.toOffsetRange()), timeout, considerWhitespaceChanges);\n            const mappings = lineRangeMappingFromRangeMappings(moveChanges.mappings, originalLines, modifiedLines, true);\n            return new MovedText(m, mappings);\n        });\n        return movesWithDiffs;\n    }\n    refineDiff(originalLines, modifiedLines, diff, timeout, considerWhitespaceChanges) {\n        const slice1 = new LinesSliceCharSequence(originalLines, diff.seq1Range, considerWhitespaceChanges);\n        const slice2 = new LinesSliceCharSequence(modifiedLines, diff.seq2Range, considerWhitespaceChanges);\n        const diffResult = slice1.length + slice2.length < 500\n            ? this.dynamicProgrammingDiffing.compute(slice1, slice2, timeout)\n            : this.myersDiffingAlgorithm.compute(slice1, slice2, timeout);\n        let diffs = diffResult.diffs;\n        diffs = optimizeSequenceDiffs(slice1, slice2, diffs);\n        diffs = extendDiffsToEntireWordIfAppropriate(slice1, slice2, diffs);\n        diffs = removeShortMatches(slice1, slice2, diffs);\n        diffs = removeVeryShortMatchingTextBetweenLongDiffs(slice1, slice2, diffs);\n        const result = diffs.map((d) => new RangeMapping(slice1.translateRange(d.seq1Range), slice2.translateRange(d.seq2Range)));\n        // Assert: result applied on original should be the same as diff applied to original\n        return {\n            mappings: result,\n            hitTimeout: diffResult.hitTimeout,\n        };\n    }\n}\nexport function lineRangeMappingFromRangeMappings(alignments, originalLines, modifiedLines, dontAssertStartLine = false) {\n    const changes = [];\n    for (const g of groupAdjacentBy(alignments.map(a => getLineRangeMapping(a, originalLines, modifiedLines)), (a1, a2) => a1.original.overlapOrTouch(a2.original)\n        || a1.modified.overlapOrTouch(a2.modified))) {\n        const first = g[0];\n        const last = g[g.length - 1];\n        changes.push(new DetailedLineRangeMapping(first.original.join(last.original), first.modified.join(last.modified), g.map(a => a.innerChanges[0])));\n    }\n    assertFn(() => {\n        if (!dontAssertStartLine) {\n            if (changes.length > 0 && changes[0].original.startLineNumber !== changes[0].modified.startLineNumber) {\n                return false;\n            }\n        }\n        return checkAdjacentItems(changes, (m1, m2) => m2.original.startLineNumber - m1.original.endLineNumberExclusive === m2.modified.startLineNumber - m1.modified.endLineNumberExclusive &&\n            // There has to be an unchanged line in between (otherwise both diffs should have been joined)\n            m1.original.endLineNumberExclusive < m2.original.startLineNumber &&\n            m1.modified.endLineNumberExclusive < m2.modified.startLineNumber);\n    });\n    return changes;\n}\nexport function getLineRangeMapping(rangeMapping, originalLines, modifiedLines) {\n    let lineStartDelta = 0;\n    let lineEndDelta = 0;\n    // rangeMapping describes the edit that replaces `rangeMapping.originalRange` with `newText := getText(modifiedLines, rangeMapping.modifiedRange)`.\n    // original: ]xxx \\n <- this line is not modified\n    // modified: ]xx  \\n\n    if (rangeMapping.modifiedRange.endColumn === 1 && rangeMapping.originalRange.endColumn === 1\n        && rangeMapping.originalRange.startLineNumber + lineStartDelta <= rangeMapping.originalRange.endLineNumber\n        && rangeMapping.modifiedRange.startLineNumber + lineStartDelta <= rangeMapping.modifiedRange.endLineNumber) {\n        // We can only do this if the range is not empty yet\n        lineEndDelta = -1;\n    }\n    // original: xxx[ \\n <- this line is not modified\n    // modified: xxx[ \\n\n    if (rangeMapping.modifiedRange.startColumn - 1 >= modifiedLines[rangeMapping.modifiedRange.startLineNumber - 1].length\n        && rangeMapping.originalRange.startColumn - 1 >= originalLines[rangeMapping.originalRange.startLineNumber - 1].length\n        && rangeMapping.originalRange.startLineNumber <= rangeMapping.originalRange.endLineNumber + lineEndDelta\n        && rangeMapping.modifiedRange.startLineNumber <= rangeMapping.modifiedRange.endLineNumber + lineEndDelta) {\n        // We can only do this if the range is not empty yet\n        lineStartDelta = 1;\n    }\n    const originalLineRange = new LineRange(rangeMapping.originalRange.startLineNumber + lineStartDelta, rangeMapping.originalRange.endLineNumber + 1 + lineEndDelta);\n    const modifiedLineRange = new LineRange(rangeMapping.modifiedRange.startLineNumber + lineStartDelta, rangeMapping.modifiedRange.endLineNumber + 1 + lineEndDelta);\n    return new DetailedLineRangeMapping(originalLineRange, modifiedLineRange, [rangeMapping]);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LegacyLinesDiffComputer } from './legacyLinesDiffComputer.js';\nimport { DefaultLinesDiffComputer } from './defaultLinesDiffComputer/defaultLinesDiffComputer.js';\nexport const linesDiffComputers = {\n    getLegacy: () => new LegacyLinesDiffComputer(),\n    getDefault: () => new DefaultLinesDiffComputer(),\n};\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Color, HSLA } from '../../../base/common/color.js';\nfunction _parseCaptureGroups(captureGroups) {\n    const values = [];\n    for (const captureGroup of captureGroups) {\n        const parsedNumber = Number(captureGroup);\n        if (parsedNumber || parsedNumber === 0 && captureGroup.replace(/\\s/g, '') !== '') {\n            values.push(parsedNumber);\n        }\n    }\n    return values;\n}\nfunction _toIColor(r, g, b, a) {\n    return {\n        red: r / 255,\n        blue: b / 255,\n        green: g / 255,\n        alpha: a\n    };\n}\nfunction _findRange(model, match) {\n    const index = match.index;\n    const length = match[0].length;\n    if (!index) {\n        return;\n    }\n    const startPosition = model.positionAt(index);\n    const range = {\n        startLineNumber: startPosition.lineNumber,\n        startColumn: startPosition.column,\n        endLineNumber: startPosition.lineNumber,\n        endColumn: startPosition.column + length\n    };\n    return range;\n}\nfunction _findHexColorInformation(range, hexValue) {\n    if (!range) {\n        return;\n    }\n    const parsedHexColor = Color.Format.CSS.parseHex(hexValue);\n    if (!parsedHexColor) {\n        return;\n    }\n    return {\n        range: range,\n        color: _toIColor(parsedHexColor.rgba.r, parsedHexColor.rgba.g, parsedHexColor.rgba.b, parsedHexColor.rgba.a)\n    };\n}\nfunction _findRGBColorInformation(range, matches, isAlpha) {\n    if (!range || matches.length !== 1) {\n        return;\n    }\n    const match = matches[0];\n    const captureGroups = match.values();\n    const parsedRegex = _parseCaptureGroups(captureGroups);\n    return {\n        range: range,\n        color: _toIColor(parsedRegex[0], parsedRegex[1], parsedRegex[2], isAlpha ? parsedRegex[3] : 1)\n    };\n}\nfunction _findHSLColorInformation(range, matches, isAlpha) {\n    if (!range || matches.length !== 1) {\n        return;\n    }\n    const match = matches[0];\n    const captureGroups = match.values();\n    const parsedRegex = _parseCaptureGroups(captureGroups);\n    const colorEquivalent = new Color(new HSLA(parsedRegex[0], parsedRegex[1] / 100, parsedRegex[2] / 100, isAlpha ? parsedRegex[3] : 1));\n    return {\n        range: range,\n        color: _toIColor(colorEquivalent.rgba.r, colorEquivalent.rgba.g, colorEquivalent.rgba.b, colorEquivalent.rgba.a)\n    };\n}\nfunction _findMatches(model, regex) {\n    if (typeof model === 'string') {\n        return [...model.matchAll(regex)];\n    }\n    else {\n        return model.findMatches(regex);\n    }\n}\nfunction computeColors(model) {\n    const result = [];\n    // Early validation for RGB and HSL\n    const initialValidationRegex = /\\b(rgb|rgba|hsl|hsla)(\\([0-9\\s,.\\%]*\\))|(#)([A-Fa-f0-9]{3})\\b|(#)([A-Fa-f0-9]{4})\\b|(#)([A-Fa-f0-9]{6})\\b|(#)([A-Fa-f0-9]{8})\\b/gm;\n    const initialValidationMatches = _findMatches(model, initialValidationRegex);\n    // Potential colors have been found, validate the parameters\n    if (initialValidationMatches.length > 0) {\n        for (const initialMatch of initialValidationMatches) {\n            const initialCaptureGroups = initialMatch.filter(captureGroup => captureGroup !== undefined);\n            const colorScheme = initialCaptureGroups[1];\n            const colorParameters = initialCaptureGroups[2];\n            if (!colorParameters) {\n                continue;\n            }\n            let colorInformation;\n            if (colorScheme === 'rgb') {\n                const regexParameters = /^\\(\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*,\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*,\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*\\)$/gm;\n                colorInformation = _findRGBColorInformation(_findRange(model, initialMatch), _findMatches(colorParameters, regexParameters), false);\n            }\n            else if (colorScheme === 'rgba') {\n                const regexParameters = /^\\(\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*,\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*,\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*,\\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\\s*\\)$/gm;\n                colorInformation = _findRGBColorInformation(_findRange(model, initialMatch), _findMatches(colorParameters, regexParameters), true);\n            }\n            else if (colorScheme === 'hsl') {\n                const regexParameters = /^\\(\\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\\s*,\\s*(100|\\d{1,2}[.]\\d*|\\d{1,2})%\\s*,\\s*(100|\\d{1,2}[.]\\d*|\\d{1,2})%\\s*\\)$/gm;\n                colorInformation = _findHSLColorInformation(_findRange(model, initialMatch), _findMatches(colorParameters, regexParameters), false);\n            }\n            else if (colorScheme === 'hsla') {\n                const regexParameters = /^\\(\\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\\s*,\\s*(100|\\d{1,2}[.]\\d*|\\d{1,2})%\\s*,\\s*(100|\\d{1,2}[.]\\d*|\\d{1,2})%\\s*,\\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\\s*\\)$/gm;\n                colorInformation = _findHSLColorInformation(_findRange(model, initialMatch), _findMatches(colorParameters, regexParameters), true);\n            }\n            else if (colorScheme === '#') {\n                colorInformation = _findHexColorInformation(_findRange(model, initialMatch), colorScheme + colorParameters);\n            }\n            if (colorInformation) {\n                result.push(colorInformation);\n            }\n        }\n    }\n    return result;\n}\n/**\n * Returns an array of all default document colors in the provided document\n */\nexport function computeDefaultDocumentColors(model) {\n    if (!model || typeof model.getValue !== 'function' || typeof model.positionAt !== 'function') {\n        // Unknown caller!\n        return [];\n    }\n    return computeColors(model);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { stringDiff } from '../../../base/common/diff/diff.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { Position } from '../core/position.js';\nimport { Range } from '../core/range.js';\nimport { MirrorTextModel as BaseMirrorModel } from '../model/mirrorTextModel.js';\nimport { ensureValidWordDefinition, getWordAtText } from '../core/wordHelper.js';\nimport { computeLinks } from '../languages/linkComputer.js';\nimport { BasicInplaceReplace } from '../languages/supports/inplaceReplaceSupport.js';\nimport { createMonacoBaseAPI } from './editorBaseApi.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { UnicodeTextModelHighlighter } from './unicodeTextModelHighlighter.js';\nimport { linesDiffComputers } from '../diff/linesDiffComputers.js';\nimport { createProxyObject, getAllMethodNames } from '../../../base/common/objects.js';\nimport { computeDefaultDocumentColors } from '../languages/defaultDocumentColorsComputer.js';\n/**\n * @internal\n */\nclass MirrorModel extends BaseMirrorModel {\n    get uri() {\n        return this._uri;\n    }\n    get eol() {\n        return this._eol;\n    }\n    getValue() {\n        return this.getText();\n    }\n    findMatches(regex) {\n        const matches = [];\n        for (let i = 0; i < this._lines.length; i++) {\n            const line = this._lines[i];\n            const offsetToAdd = this.offsetAt(new Position(i + 1, 1));\n            const iteratorOverMatches = line.matchAll(regex);\n            for (const match of iteratorOverMatches) {\n                if (match.index || match.index === 0) {\n                    match.index = match.index + offsetToAdd;\n                }\n                matches.push(match);\n            }\n        }\n        return matches;\n    }\n    getLinesContent() {\n        return this._lines.slice(0);\n    }\n    getLineCount() {\n        return this._lines.length;\n    }\n    getLineContent(lineNumber) {\n        return this._lines[lineNumber - 1];\n    }\n    getWordAtPosition(position, wordDefinition) {\n        const wordAtText = getWordAtText(position.column, ensureValidWordDefinition(wordDefinition), this._lines[position.lineNumber - 1], 0);\n        if (wordAtText) {\n            return new Range(position.lineNumber, wordAtText.startColumn, position.lineNumber, wordAtText.endColumn);\n        }\n        return null;\n    }\n    words(wordDefinition) {\n        const lines = this._lines;\n        const wordenize = this._wordenize.bind(this);\n        let lineNumber = 0;\n        let lineText = '';\n        let wordRangesIdx = 0;\n        let wordRanges = [];\n        return {\n            *[Symbol.iterator]() {\n                while (true) {\n                    if (wordRangesIdx < wordRanges.length) {\n                        const value = lineText.substring(wordRanges[wordRangesIdx].start, wordRanges[wordRangesIdx].end);\n                        wordRangesIdx += 1;\n                        yield value;\n                    }\n                    else {\n                        if (lineNumber < lines.length) {\n                            lineText = lines[lineNumber];\n                            wordRanges = wordenize(lineText, wordDefinition);\n                            wordRangesIdx = 0;\n                            lineNumber += 1;\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        };\n    }\n    getLineWords(lineNumber, wordDefinition) {\n        const content = this._lines[lineNumber - 1];\n        const ranges = this._wordenize(content, wordDefinition);\n        const words = [];\n        for (const range of ranges) {\n            words.push({\n                word: content.substring(range.start, range.end),\n                startColumn: range.start + 1,\n                endColumn: range.end + 1\n            });\n        }\n        return words;\n    }\n    _wordenize(content, wordDefinition) {\n        const result = [];\n        let match;\n        wordDefinition.lastIndex = 0; // reset lastIndex just to be sure\n        while (match = wordDefinition.exec(content)) {\n            if (match[0].length === 0) {\n                // it did match the empty string\n                break;\n            }\n            result.push({ start: match.index, end: match.index + match[0].length });\n        }\n        return result;\n    }\n    getValueInRange(range) {\n        range = this._validateRange(range);\n        if (range.startLineNumber === range.endLineNumber) {\n            return this._lines[range.startLineNumber - 1].substring(range.startColumn - 1, range.endColumn - 1);\n        }\n        const lineEnding = this._eol;\n        const startLineIndex = range.startLineNumber - 1;\n        const endLineIndex = range.endLineNumber - 1;\n        const resultLines = [];\n        resultLines.push(this._lines[startLineIndex].substring(range.startColumn - 1));\n        for (let i = startLineIndex + 1; i < endLineIndex; i++) {\n            resultLines.push(this._lines[i]);\n        }\n        resultLines.push(this._lines[endLineIndex].substring(0, range.endColumn - 1));\n        return resultLines.join(lineEnding);\n    }\n    offsetAt(position) {\n        position = this._validatePosition(position);\n        this._ensureLineStarts();\n        return this._lineStarts.getPrefixSum(position.lineNumber - 2) + (position.column - 1);\n    }\n    positionAt(offset) {\n        offset = Math.floor(offset);\n        offset = Math.max(0, offset);\n        this._ensureLineStarts();\n        const out = this._lineStarts.getIndexOf(offset);\n        const lineLength = this._lines[out.index].length;\n        // Ensure we return a valid position\n        return {\n            lineNumber: 1 + out.index,\n            column: 1 + Math.min(out.remainder, lineLength)\n        };\n    }\n    _validateRange(range) {\n        const start = this._validatePosition({ lineNumber: range.startLineNumber, column: range.startColumn });\n        const end = this._validatePosition({ lineNumber: range.endLineNumber, column: range.endColumn });\n        if (start.lineNumber !== range.startLineNumber\n            || start.column !== range.startColumn\n            || end.lineNumber !== range.endLineNumber\n            || end.column !== range.endColumn) {\n            return {\n                startLineNumber: start.lineNumber,\n                startColumn: start.column,\n                endLineNumber: end.lineNumber,\n                endColumn: end.column\n            };\n        }\n        return range;\n    }\n    _validatePosition(position) {\n        if (!Position.isIPosition(position)) {\n            throw new Error('bad position');\n        }\n        let { lineNumber, column } = position;\n        let hasChanged = false;\n        if (lineNumber < 1) {\n            lineNumber = 1;\n            column = 1;\n            hasChanged = true;\n        }\n        else if (lineNumber > this._lines.length) {\n            lineNumber = this._lines.length;\n            column = this._lines[lineNumber - 1].length + 1;\n            hasChanged = true;\n        }\n        else {\n            const maxCharacter = this._lines[lineNumber - 1].length + 1;\n            if (column < 1) {\n                column = 1;\n                hasChanged = true;\n            }\n            else if (column > maxCharacter) {\n                column = maxCharacter;\n                hasChanged = true;\n            }\n        }\n        if (!hasChanged) {\n            return position;\n        }\n        else {\n            return { lineNumber, column };\n        }\n    }\n}\n/**\n * @internal\n */\nexport class EditorSimpleWorker {\n    constructor(host, foreignModuleFactory) {\n        this._host = host;\n        this._models = Object.create(null);\n        this._foreignModuleFactory = foreignModuleFactory;\n        this._foreignModule = null;\n    }\n    dispose() {\n        this._models = Object.create(null);\n    }\n    _getModel(uri) {\n        return this._models[uri];\n    }\n    _getModels() {\n        const all = [];\n        Object.keys(this._models).forEach((key) => all.push(this._models[key]));\n        return all;\n    }\n    acceptNewModel(data) {\n        this._models[data.url] = new MirrorModel(URI.parse(data.url), data.lines, data.EOL, data.versionId);\n    }\n    acceptModelChanged(strURL, e) {\n        if (!this._models[strURL]) {\n            return;\n        }\n        const model = this._models[strURL];\n        model.onEvents(e);\n    }\n    acceptRemovedModel(strURL) {\n        if (!this._models[strURL]) {\n            return;\n        }\n        delete this._models[strURL];\n    }\n    async computeUnicodeHighlights(url, options, range) {\n        const model = this._getModel(url);\n        if (!model) {\n            return { ranges: [], hasMore: false, ambiguousCharacterCount: 0, invisibleCharacterCount: 0, nonBasicAsciiCharacterCount: 0 };\n        }\n        return UnicodeTextModelHighlighter.computeUnicodeHighlights(model, options, range);\n    }\n    // ---- BEGIN diff --------------------------------------------------------------------------\n    async computeDiff(originalUrl, modifiedUrl, options, algorithm) {\n        const original = this._getModel(originalUrl);\n        const modified = this._getModel(modifiedUrl);\n        if (!original || !modified) {\n            return null;\n        }\n        return EditorSimpleWorker.computeDiff(original, modified, options, algorithm);\n    }\n    static computeDiff(originalTextModel, modifiedTextModel, options, algorithm) {\n        const diffAlgorithm = algorithm === 'advanced' ? linesDiffComputers.getDefault() : linesDiffComputers.getLegacy();\n        const originalLines = originalTextModel.getLinesContent();\n        const modifiedLines = modifiedTextModel.getLinesContent();\n        const result = diffAlgorithm.computeDiff(originalLines, modifiedLines, options);\n        const identical = (result.changes.length > 0 ? false : this._modelsAreIdentical(originalTextModel, modifiedTextModel));\n        function getLineChanges(changes) {\n            return changes.map(m => {\n                var _a;\n                return ([m.original.startLineNumber, m.original.endLineNumberExclusive, m.modified.startLineNumber, m.modified.endLineNumberExclusive, (_a = m.innerChanges) === null || _a === void 0 ? void 0 : _a.map(m => [\n                        m.originalRange.startLineNumber,\n                        m.originalRange.startColumn,\n                        m.originalRange.endLineNumber,\n                        m.originalRange.endColumn,\n                        m.modifiedRange.startLineNumber,\n                        m.modifiedRange.startColumn,\n                        m.modifiedRange.endLineNumber,\n                        m.modifiedRange.endColumn,\n                    ])]);\n            });\n        }\n        return {\n            identical,\n            quitEarly: result.hitTimeout,\n            changes: getLineChanges(result.changes),\n            moves: result.moves.map(m => ([\n                m.lineRangeMapping.original.startLineNumber,\n                m.lineRangeMapping.original.endLineNumberExclusive,\n                m.lineRangeMapping.modified.startLineNumber,\n                m.lineRangeMapping.modified.endLineNumberExclusive,\n                getLineChanges(m.changes)\n            ])),\n        };\n    }\n    static _modelsAreIdentical(original, modified) {\n        const originalLineCount = original.getLineCount();\n        const modifiedLineCount = modified.getLineCount();\n        if (originalLineCount !== modifiedLineCount) {\n            return false;\n        }\n        for (let line = 1; line <= originalLineCount; line++) {\n            const originalLine = original.getLineContent(line);\n            const modifiedLine = modified.getLineContent(line);\n            if (originalLine !== modifiedLine) {\n                return false;\n            }\n        }\n        return true;\n    }\n    async computeMoreMinimalEdits(modelUrl, edits, pretty) {\n        const model = this._getModel(modelUrl);\n        if (!model) {\n            return edits;\n        }\n        const result = [];\n        let lastEol = undefined;\n        edits = edits.slice(0).sort((a, b) => {\n            if (a.range && b.range) {\n                return Range.compareRangesUsingStarts(a.range, b.range);\n            }\n            // eol only changes should go to the end\n            const aRng = a.range ? 0 : 1;\n            const bRng = b.range ? 0 : 1;\n            return aRng - bRng;\n        });\n        // merge adjacent edits\n        let writeIndex = 0;\n        for (let readIndex = 1; readIndex < edits.length; readIndex++) {\n            if (Range.getEndPosition(edits[writeIndex].range).equals(Range.getStartPosition(edits[readIndex].range))) {\n                edits[writeIndex].range = Range.fromPositions(Range.getStartPosition(edits[writeIndex].range), Range.getEndPosition(edits[readIndex].range));\n                edits[writeIndex].text += edits[readIndex].text;\n            }\n            else {\n                writeIndex++;\n                edits[writeIndex] = edits[readIndex];\n            }\n        }\n        edits.length = writeIndex + 1;\n        for (let { range, text, eol } of edits) {\n            if (typeof eol === 'number') {\n                lastEol = eol;\n            }\n            if (Range.isEmpty(range) && !text) {\n                // empty change\n                continue;\n            }\n            const original = model.getValueInRange(range);\n            text = text.replace(/\\r\\n|\\n|\\r/g, model.eol);\n            if (original === text) {\n                // noop\n                continue;\n            }\n            // make sure diff won't take too long\n            if (Math.max(text.length, original.length) > EditorSimpleWorker._diffLimit) {\n                result.push({ range, text });\n                continue;\n            }\n            // compute diff between original and edit.text\n            const changes = stringDiff(original, text, pretty);\n            const editOffset = model.offsetAt(Range.lift(range).getStartPosition());\n            for (const change of changes) {\n                const start = model.positionAt(editOffset + change.originalStart);\n                const end = model.positionAt(editOffset + change.originalStart + change.originalLength);\n                const newEdit = {\n                    text: text.substr(change.modifiedStart, change.modifiedLength),\n                    range: { startLineNumber: start.lineNumber, startColumn: start.column, endLineNumber: end.lineNumber, endColumn: end.column }\n                };\n                if (model.getValueInRange(newEdit.range) !== newEdit.text) {\n                    result.push(newEdit);\n                }\n            }\n        }\n        if (typeof lastEol === 'number') {\n            result.push({ eol: lastEol, text: '', range: { startLineNumber: 0, startColumn: 0, endLineNumber: 0, endColumn: 0 } });\n        }\n        return result;\n    }\n    // ---- END minimal edits ---------------------------------------------------------------\n    async computeLinks(modelUrl) {\n        const model = this._getModel(modelUrl);\n        if (!model) {\n            return null;\n        }\n        return computeLinks(model);\n    }\n    // --- BEGIN default document colors -----------------------------------------------------------\n    async computeDefaultDocumentColors(modelUrl) {\n        const model = this._getModel(modelUrl);\n        if (!model) {\n            return null;\n        }\n        return computeDefaultDocumentColors(model);\n    }\n    async textualSuggest(modelUrls, leadingWord, wordDef, wordDefFlags) {\n        const sw = new StopWatch();\n        const wordDefRegExp = new RegExp(wordDef, wordDefFlags);\n        const seen = new Set();\n        outer: for (const url of modelUrls) {\n            const model = this._getModel(url);\n            if (!model) {\n                continue;\n            }\n            for (const word of model.words(wordDefRegExp)) {\n                if (word === leadingWord || !isNaN(Number(word))) {\n                    continue;\n                }\n                seen.add(word);\n                if (seen.size > EditorSimpleWorker._suggestionsLimit) {\n                    break outer;\n                }\n            }\n        }\n        return { words: Array.from(seen), duration: sw.elapsed() };\n    }\n    // ---- END suggest --------------------------------------------------------------------------\n    //#region -- word ranges --\n    async computeWordRanges(modelUrl, range, wordDef, wordDefFlags) {\n        const model = this._getModel(modelUrl);\n        if (!model) {\n            return Object.create(null);\n        }\n        const wordDefRegExp = new RegExp(wordDef, wordDefFlags);\n        const result = Object.create(null);\n        for (let line = range.startLineNumber; line < range.endLineNumber; line++) {\n            const words = model.getLineWords(line, wordDefRegExp);\n            for (const word of words) {\n                if (!isNaN(Number(word.word))) {\n                    continue;\n                }\n                let array = result[word.word];\n                if (!array) {\n                    array = [];\n                    result[word.word] = array;\n                }\n                array.push({\n                    startLineNumber: line,\n                    startColumn: word.startColumn,\n                    endLineNumber: line,\n                    endColumn: word.endColumn\n                });\n            }\n        }\n        return result;\n    }\n    //#endregion\n    async navigateValueSet(modelUrl, range, up, wordDef, wordDefFlags) {\n        const model = this._getModel(modelUrl);\n        if (!model) {\n            return null;\n        }\n        const wordDefRegExp = new RegExp(wordDef, wordDefFlags);\n        if (range.startColumn === range.endColumn) {\n            range = {\n                startLineNumber: range.startLineNumber,\n                startColumn: range.startColumn,\n                endLineNumber: range.endLineNumber,\n                endColumn: range.endColumn + 1\n            };\n        }\n        const selectionText = model.getValueInRange(range);\n        const wordRange = model.getWordAtPosition({ lineNumber: range.startLineNumber, column: range.startColumn }, wordDefRegExp);\n        if (!wordRange) {\n            return null;\n        }\n        const word = model.getValueInRange(wordRange);\n        const result = BasicInplaceReplace.INSTANCE.navigateValueSet(range, selectionText, wordRange, word, up);\n        return result;\n    }\n    // ---- BEGIN foreign module support --------------------------------------------------------------------------\n    loadForeignModule(moduleId, createData, foreignHostMethods) {\n        const proxyMethodRequest = (method, args) => {\n            return this._host.fhr(method, args);\n        };\n        const foreignHost = createProxyObject(foreignHostMethods, proxyMethodRequest);\n        const ctx = {\n            host: foreignHost,\n            getMirrorModels: () => {\n                return this._getModels();\n            }\n        };\n        if (this._foreignModuleFactory) {\n            this._foreignModule = this._foreignModuleFactory(ctx, createData);\n            // static foreing module\n            return Promise.resolve(getAllMethodNames(this._foreignModule));\n        }\n        // ESM-comment-begin\n        // \t\treturn new Promise<any>((resolve, reject) => {\n        // \t\t\trequire([moduleId], (foreignModule: { create: IForeignModuleFactory }) => {\n        // \t\t\t\tthis._foreignModule = foreignModule.create(ctx, createData);\n        // \n        // \t\t\t\tresolve(getAllMethodNames(this._foreignModule));\n        // \n        // \t\t\t}, reject);\n        // \t\t});\n        // ESM-comment-end\n        // ESM-uncomment-begin\n        return Promise.reject(new Error(`Unexpected usage`));\n        // ESM-uncomment-end\n    }\n    // foreign method request\n    fmr(method, args) {\n        if (!this._foreignModule || typeof this._foreignModule[method] !== 'function') {\n            return Promise.reject(new Error('Missing requestHandler or method: ' + method));\n        }\n        try {\n            return Promise.resolve(this._foreignModule[method].apply(this._foreignModule, args));\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n}\n// ---- END diff --------------------------------------------------------------------------\n// ---- BEGIN minimal edits ---------------------------------------------------------------\nEditorSimpleWorker._diffLimit = 100000;\n// ---- BEGIN suggest --------------------------------------------------------------------------\nEditorSimpleWorker._suggestionsLimit = 10000;\n/**\n * Called on the worker side\n * @internal\n */\nexport function create(host) {\n    return new EditorSimpleWorker(host, null);\n}\nif (typeof importScripts === 'function') {\n    // Running in a web worker\n    globalThis.monaco = createMonacoBaseAPI();\n}\n", "import { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const ITextResourceConfigurationService = createDecorator('textResourceConfigurationService');\nexport const ITextResourcePropertiesService = createDecorator('textResourcePropertiesService');\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IntervalTimer, timeout } from '../../../base/common/async.js';\nimport { Disposable, dispose, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { SimpleWorkerClient, logOnceWebWorkerWarning } from '../../../base/common/worker/simpleWorker.js';\nimport { DefaultWorkerFactory } from '../../../base/browser/defaultWorkerFactory.js';\nimport { Range } from '../../common/core/range.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { EditorSimpleWorker } from '../../common/services/editorSimpleWorker.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextResourceConfigurationService } from '../../common/services/textResourceConfiguration.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { canceled } from '../../../base/common/errors.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { MovedText } from '../../common/diff/linesDiffComputer.js';\nimport { DetailedLineRangeMapping, RangeMapping, LineRangeMapping } from '../../common/diff/rangeMapping.js';\nimport { LineRange } from '../../common/core/lineRange.js';\nimport { $window } from '../../../base/browser/window.js';\nimport { WindowIntervalTimer } from '../../../base/browser/dom.js';\n/**\n * Stop syncing a model to the worker if it was not needed for 1 min.\n */\nconst STOP_SYNC_MODEL_DELTA_TIME_MS = 60 * 1000;\n/**\n * Stop the worker if it was not needed for 5 min.\n */\nconst STOP_WORKER_DELTA_TIME_MS = 5 * 60 * 1000;\nfunction canSyncModel(modelService, resource) {\n    const model = modelService.getModel(resource);\n    if (!model) {\n        return false;\n    }\n    if (model.isTooLargeForSyncing()) {\n        return false;\n    }\n    return true;\n}\nlet EditorWorkerService = class EditorWorkerService extends Disposable {\n    constructor(modelService, configurationService, logService, languageConfigurationService, languageFeaturesService) {\n        super();\n        this._modelService = modelService;\n        this._workerManager = this._register(new WorkerManager(this._modelService, languageConfigurationService));\n        this._logService = logService;\n        // register default link-provider and default completions-provider\n        this._register(languageFeaturesService.linkProvider.register({ language: '*', hasAccessToAllModels: true }, {\n            provideLinks: (model, token) => {\n                if (!canSyncModel(this._modelService, model.uri)) {\n                    return Promise.resolve({ links: [] }); // File too large\n                }\n                return this._workerManager.withWorker().then(client => client.computeLinks(model.uri)).then(links => {\n                    return links && { links };\n                });\n            }\n        }));\n        this._register(languageFeaturesService.completionProvider.register('*', new WordBasedCompletionItemProvider(this._workerManager, configurationService, this._modelService, languageConfigurationService)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    canComputeUnicodeHighlights(uri) {\n        return canSyncModel(this._modelService, uri);\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._workerManager.withWorker().then(client => client.computedUnicodeHighlights(uri, options, range));\n    }\n    async computeDiff(original, modified, options, algorithm) {\n        const result = await this._workerManager.withWorker().then(client => client.computeDiff(original, modified, options, algorithm));\n        if (!result) {\n            return null;\n        }\n        // Convert from space efficient JSON data to rich objects.\n        const diff = {\n            identical: result.identical,\n            quitEarly: result.quitEarly,\n            changes: toLineRangeMappings(result.changes),\n            moves: result.moves.map(m => new MovedText(new LineRangeMapping(new LineRange(m[0], m[1]), new LineRange(m[2], m[3])), toLineRangeMappings(m[4])))\n        };\n        return diff;\n        function toLineRangeMappings(changes) {\n            return changes.map((c) => {\n                var _a;\n                return new DetailedLineRangeMapping(new LineRange(c[0], c[1]), new LineRange(c[2], c[3]), (_a = c[4]) === null || _a === void 0 ? void 0 : _a.map((c) => new RangeMapping(new Range(c[0], c[1], c[2], c[3]), new Range(c[4], c[5], c[6], c[7]))));\n            });\n        }\n    }\n    computeMoreMinimalEdits(resource, edits, pretty = false) {\n        if (isNonEmptyArray(edits)) {\n            if (!canSyncModel(this._modelService, resource)) {\n                return Promise.resolve(edits); // File too large\n            }\n            const sw = StopWatch.create();\n            const result = this._workerManager.withWorker().then(client => client.computeMoreMinimalEdits(resource, edits, pretty));\n            result.finally(() => this._logService.trace('FORMAT#computeMoreMinimalEdits', resource.toString(true), sw.elapsed()));\n            return Promise.race([result, timeout(1000).then(() => edits)]);\n        }\n        else {\n            return Promise.resolve(undefined);\n        }\n    }\n    canNavigateValueSet(resource) {\n        return (canSyncModel(this._modelService, resource));\n    }\n    navigateValueSet(resource, range, up) {\n        return this._workerManager.withWorker().then(client => client.navigateValueSet(resource, range, up));\n    }\n    canComputeWordRanges(resource) {\n        return canSyncModel(this._modelService, resource);\n    }\n    computeWordRanges(resource, range) {\n        return this._workerManager.withWorker().then(client => client.computeWordRanges(resource, range));\n    }\n};\nEditorWorkerService = __decorate([\n    __param(0, IModelService),\n    __param(1, ITextResourceConfigurationService),\n    __param(2, ILogService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], EditorWorkerService);\nexport { EditorWorkerService };\nclass WordBasedCompletionItemProvider {\n    constructor(workerManager, configurationService, modelService, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._debugDisplayName = 'wordbasedCompletions';\n        this._workerManager = workerManager;\n        this._configurationService = configurationService;\n        this._modelService = modelService;\n    }\n    async provideCompletionItems(model, position) {\n        const config = this._configurationService.getValue(model.uri, position, 'editor');\n        if (config.wordBasedSuggestions === 'off') {\n            return undefined;\n        }\n        const models = [];\n        if (config.wordBasedSuggestions === 'currentDocument') {\n            // only current file and only if not too large\n            if (canSyncModel(this._modelService, model.uri)) {\n                models.push(model.uri);\n            }\n        }\n        else {\n            // either all files or files of same language\n            for (const candidate of this._modelService.getModels()) {\n                if (!canSyncModel(this._modelService, candidate.uri)) {\n                    continue;\n                }\n                if (candidate === model) {\n                    models.unshift(candidate.uri);\n                }\n                else if (config.wordBasedSuggestions === 'allDocuments' || candidate.getLanguageId() === model.getLanguageId()) {\n                    models.push(candidate.uri);\n                }\n            }\n        }\n        if (models.length === 0) {\n            return undefined; // File too large, no other files\n        }\n        const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n        const word = model.getWordAtPosition(position);\n        const replace = !word ? Range.fromPositions(position) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n        const insert = replace.setEndPosition(position.lineNumber, position.column);\n        const client = await this._workerManager.withWorker();\n        const data = await client.textualSuggest(models, word === null || word === void 0 ? void 0 : word.word, wordDefRegExp);\n        if (!data) {\n            return undefined;\n        }\n        return {\n            duration: data.duration,\n            suggestions: data.words.map((word) => {\n                return {\n                    kind: 18 /* languages.CompletionItemKind.Text */,\n                    label: word,\n                    insertText: word,\n                    range: { insert, replace }\n                };\n            }),\n        };\n    }\n}\nclass WorkerManager extends Disposable {\n    constructor(modelService, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._modelService = modelService;\n        this._editorWorkerClient = null;\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        const stopWorkerInterval = this._register(new WindowIntervalTimer());\n        stopWorkerInterval.cancelAndSet(() => this._checkStopIdleWorker(), Math.round(STOP_WORKER_DELTA_TIME_MS / 2), $window);\n        this._register(this._modelService.onModelRemoved(_ => this._checkStopEmptyWorker()));\n    }\n    dispose() {\n        if (this._editorWorkerClient) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n        super.dispose();\n    }\n    /**\n     * Check if the model service has no more models and stop the worker if that is the case.\n     */\n    _checkStopEmptyWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const models = this._modelService.getModels();\n        if (models.length === 0) {\n            // There are no more models => nothing possible for me to do\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    /**\n     * Check if the worker has been idle for a while and then stop it.\n     */\n    _checkStopIdleWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const timeSinceLastWorkerUsedTime = (new Date()).getTime() - this._lastWorkerUsedTime;\n        if (timeSinceLastWorkerUsedTime > STOP_WORKER_DELTA_TIME_MS) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    withWorker() {\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        if (!this._editorWorkerClient) {\n            this._editorWorkerClient = new EditorWorkerClient(this._modelService, false, 'editorWorkerService', this.languageConfigurationService);\n        }\n        return Promise.resolve(this._editorWorkerClient);\n    }\n}\nclass EditorModelManager extends Disposable {\n    constructor(proxy, modelService, keepIdleModels) {\n        super();\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        this._proxy = proxy;\n        this._modelService = modelService;\n        if (!keepIdleModels) {\n            const timer = new IntervalTimer();\n            timer.cancelAndSet(() => this._checkStopModelSync(), Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS / 2));\n            this._register(timer);\n        }\n    }\n    dispose() {\n        for (const modelUrl in this._syncedModels) {\n            dispose(this._syncedModels[modelUrl]);\n        }\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        super.dispose();\n    }\n    ensureSyncedResources(resources, forceLargeModels) {\n        for (const resource of resources) {\n            const resourceStr = resource.toString();\n            if (!this._syncedModels[resourceStr]) {\n                this._beginModelSync(resource, forceLargeModels);\n            }\n            if (this._syncedModels[resourceStr]) {\n                this._syncedModelsLastUsedTime[resourceStr] = (new Date()).getTime();\n            }\n        }\n    }\n    _checkStopModelSync() {\n        const currentTime = (new Date()).getTime();\n        const toRemove = [];\n        for (const modelUrl in this._syncedModelsLastUsedTime) {\n            const elapsedTime = currentTime - this._syncedModelsLastUsedTime[modelUrl];\n            if (elapsedTime > STOP_SYNC_MODEL_DELTA_TIME_MS) {\n                toRemove.push(modelUrl);\n            }\n        }\n        for (const e of toRemove) {\n            this._stopModelSync(e);\n        }\n    }\n    _beginModelSync(resource, forceLargeModels) {\n        const model = this._modelService.getModel(resource);\n        if (!model) {\n            return;\n        }\n        if (!forceLargeModels && model.isTooLargeForSyncing()) {\n            return;\n        }\n        const modelUrl = resource.toString();\n        this._proxy.acceptNewModel({\n            url: model.uri.toString(),\n            lines: model.getLinesContent(),\n            EOL: model.getEOL(),\n            versionId: model.getVersionId()\n        });\n        const toDispose = new DisposableStore();\n        toDispose.add(model.onDidChangeContent((e) => {\n            this._proxy.acceptModelChanged(modelUrl.toString(), e);\n        }));\n        toDispose.add(model.onWillDispose(() => {\n            this._stopModelSync(modelUrl);\n        }));\n        toDispose.add(toDisposable(() => {\n            this._proxy.acceptRemovedModel(modelUrl);\n        }));\n        this._syncedModels[modelUrl] = toDispose;\n    }\n    _stopModelSync(modelUrl) {\n        const toDispose = this._syncedModels[modelUrl];\n        delete this._syncedModels[modelUrl];\n        delete this._syncedModelsLastUsedTime[modelUrl];\n        dispose(toDispose);\n    }\n}\nclass SynchronousWorkerClient {\n    constructor(instance) {\n        this._instance = instance;\n        this._proxyObj = Promise.resolve(this._instance);\n    }\n    dispose() {\n        this._instance.dispose();\n    }\n    getProxyObject() {\n        return this._proxyObj;\n    }\n}\nexport class EditorWorkerHost {\n    constructor(workerClient) {\n        this._workerClient = workerClient;\n    }\n    // foreign host request\n    fhr(method, args) {\n        return this._workerClient.fhr(method, args);\n    }\n}\nexport class EditorWorkerClient extends Disposable {\n    constructor(modelService, keepIdleModels, label, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._disposed = false;\n        this._modelService = modelService;\n        this._keepIdleModels = keepIdleModels;\n        this._workerFactory = new DefaultWorkerFactory(label);\n        this._worker = null;\n        this._modelManager = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        throw new Error(`Not implemented!`);\n    }\n    _getOrCreateWorker() {\n        if (!this._worker) {\n            try {\n                this._worker = this._register(new SimpleWorkerClient(this._workerFactory, 'vs/editor/common/services/editorSimpleWorker', new EditorWorkerHost(this)));\n            }\n            catch (err) {\n                logOnceWebWorkerWarning(err);\n                this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            }\n        }\n        return this._worker;\n    }\n    _getProxy() {\n        return this._getOrCreateWorker().getProxyObject().then(undefined, (err) => {\n            logOnceWebWorkerWarning(err);\n            this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            return this._getOrCreateWorker().getProxyObject();\n        });\n    }\n    _getOrCreateModelManager(proxy) {\n        if (!this._modelManager) {\n            this._modelManager = this._register(new EditorModelManager(proxy, this._modelService, this._keepIdleModels));\n        }\n        return this._modelManager;\n    }\n    async _withSyncedResources(resources, forceLargeModels = false) {\n        if (this._disposed) {\n            return Promise.reject(canceled());\n        }\n        return this._getProxy().then((proxy) => {\n            this._getOrCreateModelManager(proxy).ensureSyncedResources(resources, forceLargeModels);\n            return proxy;\n        });\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._withSyncedResources([uri]).then(proxy => {\n            return proxy.computeUnicodeHighlights(uri.toString(), options, range);\n        });\n    }\n    computeDiff(original, modified, options, algorithm) {\n        return this._withSyncedResources([original, modified], /* forceLargeModels */ true).then(proxy => {\n            return proxy.computeDiff(original.toString(), modified.toString(), options, algorithm);\n        });\n    }\n    computeMoreMinimalEdits(resource, edits, pretty) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeMoreMinimalEdits(resource.toString(), edits, pretty);\n        });\n    }\n    computeLinks(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeLinks(resource.toString());\n        });\n    }\n    computeDefaultDocumentColors(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeDefaultDocumentColors(resource.toString());\n        });\n    }\n    async textualSuggest(resources, leadingWord, wordDefRegExp) {\n        const proxy = await this._withSyncedResources(resources);\n        const wordDef = wordDefRegExp.source;\n        const wordDefFlags = wordDefRegExp.flags;\n        return proxy.textualSuggest(resources.map(r => r.toString()), leadingWord, wordDef, wordDefFlags);\n    }\n    computeWordRanges(resource, range) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return Promise.resolve(null);\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = wordDefRegExp.flags;\n            return proxy.computeWordRanges(resource.toString(), range, wordDef, wordDefFlags);\n        });\n    }\n    navigateValueSet(resource, range, up) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return null;\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = wordDefRegExp.flags;\n            return proxy.navigateValueSet(resource.toString(), range, up, wordDef, wordDefFlags);\n        });\n    }\n    dispose() {\n        super.dispose();\n        this._disposed = true;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getAllMethodNames } from '../../../base/common/objects.js';\nimport { EditorWorkerClient } from './editorWorkerService.js';\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(modelService, languageConfigurationService, opts) {\n    return new MonacoWebWorkerImpl(modelService, languageConfigurationService, opts);\n}\nclass MonacoWebWorkerImpl extends EditorWorkerClient {\n    constructor(modelService, languageConfigurationService, opts) {\n        super(modelService, opts.keepIdleModels || false, opts.label, languageConfigurationService);\n        this._foreignModuleId = opts.moduleId;\n        this._foreignModuleCreateData = opts.createData || null;\n        this._foreignModuleHost = opts.host || null;\n        this._foreignProxy = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        if (!this._foreignModuleHost || typeof this._foreignModuleHost[method] !== 'function') {\n            return Promise.reject(new Error('Missing method ' + method + ' or missing main thread foreign host.'));\n        }\n        try {\n            return Promise.resolve(this._foreignModuleHost[method].apply(this._foreignModuleHost, args));\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    _getForeignProxy() {\n        if (!this._foreignProxy) {\n            this._foreignProxy = this._getProxy().then((proxy) => {\n                const foreignHostMethods = this._foreignModuleHost ? getAllMethodNames(this._foreignModuleHost) : [];\n                return proxy.loadForeignModule(this._foreignModuleId, this._foreignModuleCreateData, foreignHostMethods).then((foreignMethods) => {\n                    this._foreignModuleCreateData = null;\n                    const proxyMethodRequest = (method, args) => {\n                        return proxy.fmr(method, args);\n                    };\n                    const createProxyMethod = (method, proxyMethodRequest) => {\n                        return function () {\n                            const args = Array.prototype.slice.call(arguments, 0);\n                            return proxyMethodRequest(method, args);\n                        };\n                    };\n                    const foreignProxy = {};\n                    for (const foreignMethod of foreignMethods) {\n                        foreignProxy[foreignMethod] = createProxyMethod(foreignMethod, proxyMethodRequest);\n                    }\n                    return foreignProxy;\n                });\n            });\n        }\n        return this._foreignProxy;\n    }\n    getProxy() {\n        return this._getForeignProxy();\n    }\n    withSyncedResources(resources) {\n        return this._withSyncedResources(resources).then(_ => this.getProxy());\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function isFuzzyActionArr(what) {\n    return (Array.isArray(what));\n}\nexport function isFuzzyAction(what) {\n    return !isFuzzyActionArr(what);\n}\nexport function isString(what) {\n    return (typeof what === 'string');\n}\nexport function isIAction(what) {\n    return !isString(what);\n}\n// Small helper functions\n/**\n * Is a string null, undefined, or empty?\n */\nexport function empty(s) {\n    return (s ? false : true);\n}\n/**\n * Puts a string to lower case if 'ignoreCase' is set.\n */\nexport function fixCase(lexer, str) {\n    return (lexer.ignoreCase && str ? str.toLowerCase() : str);\n}\n/**\n * Ensures there are no bad characters in a CSS token class.\n */\nexport function sanitize(s) {\n    return s.replace(/[&<>'\"_]/g, '-'); // used on all output token CSS classes\n}\n// Logging\n/**\n * Logs a message.\n */\nexport function log(lexer, msg) {\n    console.log(`${lexer.languageId}: ${msg}`);\n}\n// Throwing errors\nexport function createError(lexer, msg) {\n    return new Error(`${lexer.languageId}: ${msg}`);\n}\n// Helper functions for rule finding and substitution\n/**\n * substituteMatches is used on lexer strings and can substitutes predefined patterns:\n * \t\t$$  => $\n * \t\t$#  => id\n * \t\t$n  => matched entry n\n * \t\t@attr => contents of lexer[attr]\n *\n * See documentation for more info\n */\nexport function substituteMatches(lexer, str, id, matches, state) {\n    const re = /\\$((\\$)|(#)|(\\d\\d?)|[sS](\\d\\d?)|@(\\w+))/g;\n    let stateMatches = null;\n    return str.replace(re, function (full, sub, dollar, hash, n, s, attr, ofs, total) {\n        if (!empty(dollar)) {\n            return '$'; // $$\n        }\n        if (!empty(hash)) {\n            return fixCase(lexer, id); // default $#\n        }\n        if (!empty(n) && n < matches.length) {\n            return fixCase(lexer, matches[n]); // $n\n        }\n        if (!empty(attr) && lexer && typeof (lexer[attr]) === 'string') {\n            return lexer[attr]; //@attribute\n        }\n        if (stateMatches === null) { // split state on demand\n            stateMatches = state.split('.');\n            stateMatches.unshift(state);\n        }\n        if (!empty(s) && s < stateMatches.length) {\n            return fixCase(lexer, stateMatches[s]); //$Sn\n        }\n        return '';\n    });\n}\n/**\n * Find the tokenizer rules for a specific state (i.e. next action)\n */\nexport function findRules(lexer, inState) {\n    let state = inState;\n    while (state && state.length > 0) {\n        const rules = lexer.tokenizer[state];\n        if (rules) {\n            return rules;\n        }\n        const idx = state.lastIndexOf('.');\n        if (idx < 0) {\n            state = null; // no further parent\n        }\n        else {\n            state = state.substr(0, idx);\n        }\n    }\n    return null;\n}\n/**\n * Is a certain state defined? In contrast to 'findRules' this works on a ILexerMin.\n * This is used during compilation where we may know the defined states\n * but not yet whether the corresponding rules are correct.\n */\nexport function stateExists(lexer, inState) {\n    let state = inState;\n    while (state && state.length > 0) {\n        const exist = lexer.stateNames[state];\n        if (exist) {\n            return true;\n        }\n        const idx = state.lastIndexOf('.');\n        if (idx < 0) {\n            state = null; // no further parent\n        }\n        else {\n            state = state.substr(0, idx);\n        }\n    }\n    return false;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar MonarchTokenizer_1;\n/**\n * Create a syntax highighter with a fully declarative JSON style lexer description\n * using regular expressions.\n */\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as languages from '../../../common/languages.js';\nimport { NullState, nullTokenizeEncoded, nullTokenize } from '../../../common/languages/nullTokenize.js';\nimport * as monarchCommon from './monarchCommon.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nconst CACHE_STACK_DEPTH = 5;\n/**\n * Reuse the same stack elements up to a certain depth.\n */\nclass MonarchStackElementFactory {\n    static create(parent, state) {\n        return this._INSTANCE.create(parent, state);\n    }\n    constructor(maxCacheDepth) {\n        this._maxCacheDepth = maxCacheDepth;\n        this._entries = Object.create(null);\n    }\n    create(parent, state) {\n        if (parent !== null && parent.depth >= this._maxCacheDepth) {\n            // no caching above a certain depth\n            return new MonarchStackElement(parent, state);\n        }\n        let stackElementId = MonarchStackElement.getStackElementId(parent);\n        if (stackElementId.length > 0) {\n            stackElementId += '|';\n        }\n        stackElementId += state;\n        let result = this._entries[stackElementId];\n        if (result) {\n            return result;\n        }\n        result = new MonarchStackElement(parent, state);\n        this._entries[stackElementId] = result;\n        return result;\n    }\n}\nMonarchStackElementFactory._INSTANCE = new MonarchStackElementFactory(CACHE_STACK_DEPTH);\nclass MonarchStackElement {\n    constructor(parent, state) {\n        this.parent = parent;\n        this.state = state;\n        this.depth = (this.parent ? this.parent.depth : 0) + 1;\n    }\n    static getStackElementId(element) {\n        let result = '';\n        while (element !== null) {\n            if (result.length > 0) {\n                result += '|';\n            }\n            result += element.state;\n            element = element.parent;\n        }\n        return result;\n    }\n    static _equals(a, b) {\n        while (a !== null && b !== null) {\n            if (a === b) {\n                return true;\n            }\n            if (a.state !== b.state) {\n                return false;\n            }\n            a = a.parent;\n            b = b.parent;\n        }\n        if (a === null && b === null) {\n            return true;\n        }\n        return false;\n    }\n    equals(other) {\n        return MonarchStackElement._equals(this, other);\n    }\n    push(state) {\n        return MonarchStackElementFactory.create(this, state);\n    }\n    pop() {\n        return this.parent;\n    }\n    popall() {\n        let result = this;\n        while (result.parent) {\n            result = result.parent;\n        }\n        return result;\n    }\n    switchTo(state) {\n        return MonarchStackElementFactory.create(this.parent, state);\n    }\n}\nclass EmbeddedLanguageData {\n    constructor(languageId, state) {\n        this.languageId = languageId;\n        this.state = state;\n    }\n    equals(other) {\n        return (this.languageId === other.languageId\n            && this.state.equals(other.state));\n    }\n    clone() {\n        const stateClone = this.state.clone();\n        // save an object\n        if (stateClone === this.state) {\n            return this;\n        }\n        return new EmbeddedLanguageData(this.languageId, this.state);\n    }\n}\n/**\n * Reuse the same line states up to a certain depth.\n */\nclass MonarchLineStateFactory {\n    static create(stack, embeddedLanguageData) {\n        return this._INSTANCE.create(stack, embeddedLanguageData);\n    }\n    constructor(maxCacheDepth) {\n        this._maxCacheDepth = maxCacheDepth;\n        this._entries = Object.create(null);\n    }\n    create(stack, embeddedLanguageData) {\n        if (embeddedLanguageData !== null) {\n            // no caching when embedding\n            return new MonarchLineState(stack, embeddedLanguageData);\n        }\n        if (stack !== null && stack.depth >= this._maxCacheDepth) {\n            // no caching above a certain depth\n            return new MonarchLineState(stack, embeddedLanguageData);\n        }\n        const stackElementId = MonarchStackElement.getStackElementId(stack);\n        let result = this._entries[stackElementId];\n        if (result) {\n            return result;\n        }\n        result = new MonarchLineState(stack, null);\n        this._entries[stackElementId] = result;\n        return result;\n    }\n}\nMonarchLineStateFactory._INSTANCE = new MonarchLineStateFactory(CACHE_STACK_DEPTH);\nclass MonarchLineState {\n    constructor(stack, embeddedLanguageData) {\n        this.stack = stack;\n        this.embeddedLanguageData = embeddedLanguageData;\n    }\n    clone() {\n        const embeddedlanguageDataClone = this.embeddedLanguageData ? this.embeddedLanguageData.clone() : null;\n        // save an object\n        if (embeddedlanguageDataClone === this.embeddedLanguageData) {\n            return this;\n        }\n        return MonarchLineStateFactory.create(this.stack, this.embeddedLanguageData);\n    }\n    equals(other) {\n        if (!(other instanceof MonarchLineState)) {\n            return false;\n        }\n        if (!this.stack.equals(other.stack)) {\n            return false;\n        }\n        if (this.embeddedLanguageData === null && other.embeddedLanguageData === null) {\n            return true;\n        }\n        if (this.embeddedLanguageData === null || other.embeddedLanguageData === null) {\n            return false;\n        }\n        return this.embeddedLanguageData.equals(other.embeddedLanguageData);\n    }\n}\nclass MonarchClassicTokensCollector {\n    constructor() {\n        this._tokens = [];\n        this._languageId = null;\n        this._lastTokenType = null;\n        this._lastTokenLanguage = null;\n    }\n    enterLanguage(languageId) {\n        this._languageId = languageId;\n    }\n    emit(startOffset, type) {\n        if (this._lastTokenType === type && this._lastTokenLanguage === this._languageId) {\n            return;\n        }\n        this._lastTokenType = type;\n        this._lastTokenLanguage = this._languageId;\n        this._tokens.push(new languages.Token(startOffset, type, this._languageId));\n    }\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\n        const nestedLanguageId = embeddedLanguageData.languageId;\n        const embeddedModeState = embeddedLanguageData.state;\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n        if (!nestedLanguageTokenizationSupport) {\n            this.enterLanguage(nestedLanguageId);\n            this.emit(offsetDelta, '');\n            return embeddedModeState;\n        }\n        const nestedResult = nestedLanguageTokenizationSupport.tokenize(embeddedLanguageLine, hasEOL, embeddedModeState);\n        if (offsetDelta !== 0) {\n            for (const token of nestedResult.tokens) {\n                this._tokens.push(new languages.Token(token.offset + offsetDelta, token.type, token.language));\n            }\n        }\n        else {\n            this._tokens = this._tokens.concat(nestedResult.tokens);\n        }\n        this._lastTokenType = null;\n        this._lastTokenLanguage = null;\n        this._languageId = null;\n        return nestedResult.endState;\n    }\n    finalize(endState) {\n        return new languages.TokenizationResult(this._tokens, endState);\n    }\n}\nclass MonarchModernTokensCollector {\n    constructor(languageService, theme) {\n        this._languageService = languageService;\n        this._theme = theme;\n        this._prependTokens = null;\n        this._tokens = [];\n        this._currentLanguageId = 0 /* LanguageId.Null */;\n        this._lastTokenMetadata = 0;\n    }\n    enterLanguage(languageId) {\n        this._currentLanguageId = this._languageService.languageIdCodec.encodeLanguageId(languageId);\n    }\n    emit(startOffset, type) {\n        const metadata = this._theme.match(this._currentLanguageId, type) | 1024 /* MetadataConsts.BALANCED_BRACKETS_MASK */;\n        if (this._lastTokenMetadata === metadata) {\n            return;\n        }\n        this._lastTokenMetadata = metadata;\n        this._tokens.push(startOffset);\n        this._tokens.push(metadata);\n    }\n    static _merge(a, b, c) {\n        const aLen = (a !== null ? a.length : 0);\n        const bLen = b.length;\n        const cLen = (c !== null ? c.length : 0);\n        if (aLen === 0 && bLen === 0 && cLen === 0) {\n            return new Uint32Array(0);\n        }\n        if (aLen === 0 && bLen === 0) {\n            return c;\n        }\n        if (bLen === 0 && cLen === 0) {\n            return a;\n        }\n        const result = new Uint32Array(aLen + bLen + cLen);\n        if (a !== null) {\n            result.set(a);\n        }\n        for (let i = 0; i < bLen; i++) {\n            result[aLen + i] = b[i];\n        }\n        if (c !== null) {\n            result.set(c, aLen + bLen);\n        }\n        return result;\n    }\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\n        const nestedLanguageId = embeddedLanguageData.languageId;\n        const embeddedModeState = embeddedLanguageData.state;\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n        if (!nestedLanguageTokenizationSupport) {\n            this.enterLanguage(nestedLanguageId);\n            this.emit(offsetDelta, '');\n            return embeddedModeState;\n        }\n        const nestedResult = nestedLanguageTokenizationSupport.tokenizeEncoded(embeddedLanguageLine, hasEOL, embeddedModeState);\n        if (offsetDelta !== 0) {\n            for (let i = 0, len = nestedResult.tokens.length; i < len; i += 2) {\n                nestedResult.tokens[i] += offsetDelta;\n            }\n        }\n        this._prependTokens = MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, nestedResult.tokens);\n        this._tokens = [];\n        this._currentLanguageId = 0;\n        this._lastTokenMetadata = 0;\n        return nestedResult.endState;\n    }\n    finalize(endState) {\n        return new languages.EncodedTokenizationResult(MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, null), endState);\n    }\n}\nlet MonarchTokenizer = MonarchTokenizer_1 = class MonarchTokenizer extends Disposable {\n    constructor(languageService, standaloneThemeService, languageId, lexer, _configurationService) {\n        super();\n        this._configurationService = _configurationService;\n        this._languageService = languageService;\n        this._standaloneThemeService = standaloneThemeService;\n        this._languageId = languageId;\n        this._lexer = lexer;\n        this._embeddedLanguages = Object.create(null);\n        this.embeddedLoaded = Promise.resolve(undefined);\n        // Set up listening for embedded modes\n        let emitting = false;\n        this._register(languages.TokenizationRegistry.onDidChange((e) => {\n            if (emitting) {\n                return;\n            }\n            let isOneOfMyEmbeddedModes = false;\n            for (let i = 0, len = e.changedLanguages.length; i < len; i++) {\n                const language = e.changedLanguages[i];\n                if (this._embeddedLanguages[language]) {\n                    isOneOfMyEmbeddedModes = true;\n                    break;\n                }\n            }\n            if (isOneOfMyEmbeddedModes) {\n                emitting = true;\n                languages.TokenizationRegistry.handleChange([this._languageId]);\n                emitting = false;\n            }\n        }));\n        this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n            overrideIdentifier: this._languageId\n        });\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('editor.maxTokenizationLineLength')) {\n                this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n                    overrideIdentifier: this._languageId\n                });\n            }\n        }));\n    }\n    getLoadStatus() {\n        const promises = [];\n        for (const nestedLanguageId in this._embeddedLanguages) {\n            const tokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n            if (tokenizationSupport) {\n                // The nested language is already loaded\n                if (tokenizationSupport instanceof MonarchTokenizer_1) {\n                    const nestedModeStatus = tokenizationSupport.getLoadStatus();\n                    if (nestedModeStatus.loaded === false) {\n                        promises.push(nestedModeStatus.promise);\n                    }\n                }\n                continue;\n            }\n            if (!languages.TokenizationRegistry.isResolved(nestedLanguageId)) {\n                // The nested language is in the process of being loaded\n                promises.push(languages.TokenizationRegistry.getOrCreate(nestedLanguageId));\n            }\n        }\n        if (promises.length === 0) {\n            return {\n                loaded: true\n            };\n        }\n        return {\n            loaded: false,\n            promise: Promise.all(promises).then(_ => undefined)\n        };\n    }\n    getInitialState() {\n        const rootState = MonarchStackElementFactory.create(null, this._lexer.start);\n        return MonarchLineStateFactory.create(rootState, null);\n    }\n    tokenize(line, hasEOL, lineState) {\n        if (line.length >= this._maxTokenizationLineLength) {\n            return nullTokenize(this._languageId, lineState);\n        }\n        const tokensCollector = new MonarchClassicTokensCollector();\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\n        return tokensCollector.finalize(endLineState);\n    }\n    tokenizeEncoded(line, hasEOL, lineState) {\n        if (line.length >= this._maxTokenizationLineLength) {\n            return nullTokenizeEncoded(this._languageService.languageIdCodec.encodeLanguageId(this._languageId), lineState);\n        }\n        const tokensCollector = new MonarchModernTokensCollector(this._languageService, this._standaloneThemeService.getColorTheme().tokenTheme);\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\n        return tokensCollector.finalize(endLineState);\n    }\n    _tokenize(line, hasEOL, lineState, collector) {\n        if (lineState.embeddedLanguageData) {\n            return this._nestedTokenize(line, hasEOL, lineState, 0, collector);\n        }\n        else {\n            return this._myTokenize(line, hasEOL, lineState, 0, collector);\n        }\n    }\n    _findLeavingNestedLanguageOffset(line, state) {\n        let rules = this._lexer.tokenizer[state.stack.state];\n        if (!rules) {\n            rules = monarchCommon.findRules(this._lexer, state.stack.state); // do parent matching\n            if (!rules) {\n                throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state.stack.state);\n            }\n        }\n        let popOffset = -1;\n        let hasEmbeddedPopRule = false;\n        for (const rule of rules) {\n            if (!monarchCommon.isIAction(rule.action) || rule.action.nextEmbedded !== '@pop') {\n                continue;\n            }\n            hasEmbeddedPopRule = true;\n            let regex = rule.regex;\n            const regexSource = rule.regex.source;\n            if (regexSource.substr(0, 4) === '^(?:' && regexSource.substr(regexSource.length - 1, 1) === ')') {\n                const flags = (regex.ignoreCase ? 'i' : '') + (regex.unicode ? 'u' : '');\n                regex = new RegExp(regexSource.substr(4, regexSource.length - 5), flags);\n            }\n            const result = line.search(regex);\n            if (result === -1 || (result !== 0 && rule.matchOnlyAtLineStart)) {\n                continue;\n            }\n            if (popOffset === -1 || result < popOffset) {\n                popOffset = result;\n            }\n        }\n        if (!hasEmbeddedPopRule) {\n            throw monarchCommon.createError(this._lexer, 'no rule containing nextEmbedded: \"@pop\" in tokenizer embedded state: ' + state.stack.state);\n        }\n        return popOffset;\n    }\n    _nestedTokenize(line, hasEOL, lineState, offsetDelta, tokensCollector) {\n        const popOffset = this._findLeavingNestedLanguageOffset(line, lineState);\n        if (popOffset === -1) {\n            // tokenization will not leave nested language\n            const nestedEndState = tokensCollector.nestedLanguageTokenize(line, hasEOL, lineState.embeddedLanguageData, offsetDelta);\n            return MonarchLineStateFactory.create(lineState.stack, new EmbeddedLanguageData(lineState.embeddedLanguageData.languageId, nestedEndState));\n        }\n        const nestedLanguageLine = line.substring(0, popOffset);\n        if (nestedLanguageLine.length > 0) {\n            // tokenize with the nested language\n            tokensCollector.nestedLanguageTokenize(nestedLanguageLine, false, lineState.embeddedLanguageData, offsetDelta);\n        }\n        const restOfTheLine = line.substring(popOffset);\n        return this._myTokenize(restOfTheLine, hasEOL, lineState, offsetDelta + popOffset, tokensCollector);\n    }\n    _safeRuleName(rule) {\n        if (rule) {\n            return rule.name;\n        }\n        return '(unknown)';\n    }\n    _myTokenize(lineWithoutLF, hasEOL, lineState, offsetDelta, tokensCollector) {\n        tokensCollector.enterLanguage(this._languageId);\n        const lineWithoutLFLength = lineWithoutLF.length;\n        const line = (hasEOL && this._lexer.includeLF ? lineWithoutLF + '\\n' : lineWithoutLF);\n        const lineLength = line.length;\n        let embeddedLanguageData = lineState.embeddedLanguageData;\n        let stack = lineState.stack;\n        let pos = 0;\n        let groupMatching = null;\n        // See https://github.com/microsoft/monaco-editor/issues/1235\n        // Evaluate rules at least once for an empty line\n        let forceEvaluation = true;\n        while (forceEvaluation || pos < lineLength) {\n            const pos0 = pos;\n            const stackLen0 = stack.depth;\n            const groupLen0 = groupMatching ? groupMatching.groups.length : 0;\n            const state = stack.state;\n            let matches = null;\n            let matched = null;\n            let action = null;\n            let rule = null;\n            let enteringEmbeddedLanguage = null;\n            // check if we need to process group matches first\n            if (groupMatching) {\n                matches = groupMatching.matches;\n                const groupEntry = groupMatching.groups.shift();\n                matched = groupEntry.matched;\n                action = groupEntry.action;\n                rule = groupMatching.rule;\n                // cleanup if necessary\n                if (groupMatching.groups.length === 0) {\n                    groupMatching = null;\n                }\n            }\n            else {\n                // otherwise we match on the token stream\n                if (!forceEvaluation && pos >= lineLength) {\n                    // nothing to do\n                    break;\n                }\n                forceEvaluation = false;\n                // get the rules for this state\n                let rules = this._lexer.tokenizer[state];\n                if (!rules) {\n                    rules = monarchCommon.findRules(this._lexer, state); // do parent matching\n                    if (!rules) {\n                        throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state);\n                    }\n                }\n                // try each rule until we match\n                const restOfLine = line.substr(pos);\n                for (const rule of rules) {\n                    if (pos === 0 || !rule.matchOnlyAtLineStart) {\n                        matches = restOfLine.match(rule.regex);\n                        if (matches) {\n                            matched = matches[0];\n                            action = rule.action;\n                            break;\n                        }\n                    }\n                }\n            }\n            // We matched 'rule' with 'matches' and 'action'\n            if (!matches) {\n                matches = [''];\n                matched = '';\n            }\n            if (!action) {\n                // bad: we didn't match anything, and there is no action to take\n                // we need to advance the stream or we get progress trouble\n                if (pos < lineLength) {\n                    matches = [line.charAt(pos)];\n                    matched = matches[0];\n                }\n                action = this._lexer.defaultToken;\n            }\n            if (matched === null) {\n                // should never happen, needed for strict null checking\n                break;\n            }\n            // advance stream\n            pos += matched.length;\n            // maybe call action function (used for 'cases')\n            while (monarchCommon.isFuzzyAction(action) && monarchCommon.isIAction(action) && action.test) {\n                action = action.test(matched, matches, state, pos === lineLength);\n            }\n            let result = null;\n            // set the result: either a string or an array of actions\n            if (typeof action === 'string' || Array.isArray(action)) {\n                result = action;\n            }\n            else if (action.group) {\n                result = action.group;\n            }\n            else if (action.token !== null && action.token !== undefined) {\n                // do $n replacements?\n                if (action.tokenSubst) {\n                    result = monarchCommon.substituteMatches(this._lexer, action.token, matched, matches, state);\n                }\n                else {\n                    result = action.token;\n                }\n                // enter embedded language?\n                if (action.nextEmbedded) {\n                    if (action.nextEmbedded === '@pop') {\n                        if (!embeddedLanguageData) {\n                            throw monarchCommon.createError(this._lexer, 'cannot pop embedded language if not inside one');\n                        }\n                        embeddedLanguageData = null;\n                    }\n                    else if (embeddedLanguageData) {\n                        throw monarchCommon.createError(this._lexer, 'cannot enter embedded language from within an embedded language');\n                    }\n                    else {\n                        enteringEmbeddedLanguage = monarchCommon.substituteMatches(this._lexer, action.nextEmbedded, matched, matches, state);\n                    }\n                }\n                // state transformations\n                if (action.goBack) { // back up the stream..\n                    pos = Math.max(0, pos - action.goBack);\n                }\n                if (action.switchTo && typeof action.switchTo === 'string') {\n                    let nextState = monarchCommon.substituteMatches(this._lexer, action.switchTo, matched, matches, state); // switch state without a push...\n                    if (nextState[0] === '@') {\n                        nextState = nextState.substr(1); // peel off starting '@'\n                    }\n                    if (!monarchCommon.findRules(this._lexer, nextState)) {\n                        throw monarchCommon.createError(this._lexer, 'trying to switch to a state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\n                    }\n                    else {\n                        stack = stack.switchTo(nextState);\n                    }\n                }\n                else if (action.transform && typeof action.transform === 'function') {\n                    throw monarchCommon.createError(this._lexer, 'action.transform not supported');\n                }\n                else if (action.next) {\n                    if (action.next === '@push') {\n                        if (stack.depth >= this._lexer.maxStack) {\n                            throw monarchCommon.createError(this._lexer, 'maximum tokenizer stack size reached: [' +\n                                stack.state + ',' + stack.parent.state + ',...]');\n                        }\n                        else {\n                            stack = stack.push(state);\n                        }\n                    }\n                    else if (action.next === '@pop') {\n                        if (stack.depth <= 1) {\n                            throw monarchCommon.createError(this._lexer, 'trying to pop an empty stack in rule: ' + this._safeRuleName(rule));\n                        }\n                        else {\n                            stack = stack.pop();\n                        }\n                    }\n                    else if (action.next === '@popall') {\n                        stack = stack.popall();\n                    }\n                    else {\n                        let nextState = monarchCommon.substituteMatches(this._lexer, action.next, matched, matches, state);\n                        if (nextState[0] === '@') {\n                            nextState = nextState.substr(1); // peel off starting '@'\n                        }\n                        if (!monarchCommon.findRules(this._lexer, nextState)) {\n                            throw monarchCommon.createError(this._lexer, 'trying to set a next state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\n                        }\n                        else {\n                            stack = stack.push(nextState);\n                        }\n                    }\n                }\n                if (action.log && typeof (action.log) === 'string') {\n                    monarchCommon.log(this._lexer, this._lexer.languageId + ': ' + monarchCommon.substituteMatches(this._lexer, action.log, matched, matches, state));\n                }\n            }\n            // check result\n            if (result === null) {\n                throw monarchCommon.createError(this._lexer, 'lexer rule has no well-defined action in rule: ' + this._safeRuleName(rule));\n            }\n            const computeNewStateForEmbeddedLanguage = (enteringEmbeddedLanguage) => {\n                // support language names, mime types, and language ids\n                const languageId = (this._languageService.getLanguageIdByLanguageName(enteringEmbeddedLanguage)\n                    || this._languageService.getLanguageIdByMimeType(enteringEmbeddedLanguage)\n                    || enteringEmbeddedLanguage);\n                const embeddedLanguageData = this._getNestedEmbeddedLanguageData(languageId);\n                if (pos < lineLength) {\n                    // there is content from the embedded language on this line\n                    const restOfLine = lineWithoutLF.substr(pos);\n                    return this._nestedTokenize(restOfLine, hasEOL, MonarchLineStateFactory.create(stack, embeddedLanguageData), offsetDelta + pos, tokensCollector);\n                }\n                else {\n                    return MonarchLineStateFactory.create(stack, embeddedLanguageData);\n                }\n            };\n            // is the result a group match?\n            if (Array.isArray(result)) {\n                if (groupMatching && groupMatching.groups.length > 0) {\n                    throw monarchCommon.createError(this._lexer, 'groups cannot be nested: ' + this._safeRuleName(rule));\n                }\n                if (matches.length !== result.length + 1) {\n                    throw monarchCommon.createError(this._lexer, 'matched number of groups does not match the number of actions in rule: ' + this._safeRuleName(rule));\n                }\n                let totalLen = 0;\n                for (let i = 1; i < matches.length; i++) {\n                    totalLen += matches[i].length;\n                }\n                if (totalLen !== matched.length) {\n                    throw monarchCommon.createError(this._lexer, 'with groups, all characters should be matched in consecutive groups in rule: ' + this._safeRuleName(rule));\n                }\n                groupMatching = {\n                    rule: rule,\n                    matches: matches,\n                    groups: []\n                };\n                for (let i = 0; i < result.length; i++) {\n                    groupMatching.groups[i] = {\n                        action: result[i],\n                        matched: matches[i + 1]\n                    };\n                }\n                pos -= matched.length;\n                // call recursively to initiate first result match\n                continue;\n            }\n            else {\n                // regular result\n                // check for '@rematch'\n                if (result === '@rematch') {\n                    pos -= matched.length;\n                    matched = ''; // better set the next state too..\n                    matches = null;\n                    result = '';\n                    // Even though `@rematch` was specified, if `nextEmbedded` also specified,\n                    // a state transition should occur.\n                    if (enteringEmbeddedLanguage !== null) {\n                        return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\n                    }\n                }\n                // check progress\n                if (matched.length === 0) {\n                    if (lineLength === 0 || stackLen0 !== stack.depth || state !== stack.state || (!groupMatching ? 0 : groupMatching.groups.length) !== groupLen0) {\n                        continue;\n                    }\n                    else {\n                        throw monarchCommon.createError(this._lexer, 'no progress in tokenizer in rule: ' + this._safeRuleName(rule));\n                    }\n                }\n                // return the result (and check for brace matching)\n                // todo: for efficiency we could pre-sanitize tokenPostfix and substitutions\n                let tokenType = null;\n                if (monarchCommon.isString(result) && result.indexOf('@brackets') === 0) {\n                    const rest = result.substr('@brackets'.length);\n                    const bracket = findBracket(this._lexer, matched);\n                    if (!bracket) {\n                        throw monarchCommon.createError(this._lexer, '@brackets token returned but no bracket defined as: ' + matched);\n                    }\n                    tokenType = monarchCommon.sanitize(bracket.token + rest);\n                }\n                else {\n                    const token = (result === '' ? '' : result + this._lexer.tokenPostfix);\n                    tokenType = monarchCommon.sanitize(token);\n                }\n                if (pos0 < lineWithoutLFLength) {\n                    tokensCollector.emit(pos0 + offsetDelta, tokenType);\n                }\n            }\n            if (enteringEmbeddedLanguage !== null) {\n                return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\n            }\n        }\n        return MonarchLineStateFactory.create(stack, embeddedLanguageData);\n    }\n    _getNestedEmbeddedLanguageData(languageId) {\n        if (!this._languageService.isRegisteredLanguageId(languageId)) {\n            return new EmbeddedLanguageData(languageId, NullState);\n        }\n        if (languageId !== this._languageId) {\n            // Fire language loading event\n            this._languageService.requestBasicLanguageFeatures(languageId);\n            languages.TokenizationRegistry.getOrCreate(languageId);\n            this._embeddedLanguages[languageId] = true;\n        }\n        const tokenizationSupport = languages.TokenizationRegistry.get(languageId);\n        if (tokenizationSupport) {\n            return new EmbeddedLanguageData(languageId, tokenizationSupport.getInitialState());\n        }\n        return new EmbeddedLanguageData(languageId, NullState);\n    }\n};\nMonarchTokenizer = MonarchTokenizer_1 = __decorate([\n    __param(4, IConfigurationService)\n], MonarchTokenizer);\nexport { MonarchTokenizer };\n/**\n * Searches for a bracket in the 'brackets' attribute that matches the input.\n */\nfunction findBracket(lexer, matched) {\n    if (!matched) {\n        return null;\n    }\n    matched = monarchCommon.fixCase(lexer, matched);\n    const brackets = lexer.brackets;\n    for (const bracket of brackets) {\n        if (bracket.open === matched) {\n            return { token: bracket.token, bracketType: 1 /* monarchCommon.MonarchBracket.Open */ };\n        }\n        else if (bracket.close === matched) {\n            return { token: bracket.token, bracketType: -1 /* monarchCommon.MonarchBracket.Close */ };\n        }\n    }\n    return null;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { LineTokens } from '../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 as renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../common/viewModel.js';\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\nconst ttPolicy = createTrustedTypesPolicy('standaloneColorizer', { createHTML: value => value });\nexport class Colorizer {\n    static colorizeElement(themeService, languageService, domNode, options) {\n        options = options || {};\n        const theme = options.theme || 'vs';\n        const mimeType = options.mimeType || domNode.getAttribute('lang') || domNode.getAttribute('data-lang');\n        if (!mimeType) {\n            console.error('Mode not detected');\n            return Promise.resolve();\n        }\n        const languageId = languageService.getLanguageIdByMimeType(mimeType) || mimeType;\n        themeService.setTheme(theme);\n        const text = domNode.firstChild ? domNode.firstChild.nodeValue : '';\n        domNode.className += ' ' + theme;\n        const render = (str) => {\n            var _a;\n            const trustedhtml = (_a = ttPolicy === null || ttPolicy === void 0 ? void 0 : ttPolicy.createHTML(str)) !== null && _a !== void 0 ? _a : str;\n            domNode.innerHTML = trustedhtml;\n        };\n        return this.colorize(languageService, text || '', languageId, options).then(render, (err) => console.error(err));\n    }\n    static async colorize(languageService, text, languageId, options) {\n        const languageIdCodec = languageService.languageIdCodec;\n        let tabSize = 4;\n        if (options && typeof options.tabSize === 'number') {\n            tabSize = options.tabSize;\n        }\n        if (strings.startsWithUTF8BOM(text)) {\n            text = text.substr(1);\n        }\n        const lines = strings.splitLines(text);\n        if (!languageService.isRegisteredLanguageId(languageId)) {\n            return _fakeColorize(lines, tabSize, languageIdCodec);\n        }\n        const tokenizationSupport = await TokenizationRegistry.getOrCreate(languageId);\n        if (tokenizationSupport) {\n            return _colorize(lines, tabSize, tokenizationSupport, languageIdCodec);\n        }\n        return _fakeColorize(lines, tabSize, languageIdCodec);\n    }\n    static colorizeLine(line, mightContainNonBasicASCII, mightContainRTL, tokens, tabSize = 4) {\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, mightContainNonBasicASCII);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, mightContainRTL);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, tokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        return renderResult.html;\n    }\n    static colorizeModelLine(model, lineNumber, tabSize = 4) {\n        const content = model.getLineContent(lineNumber);\n        model.tokenization.forceTokenization(lineNumber);\n        const tokens = model.tokenization.getLineTokens(lineNumber);\n        const inflatedTokens = tokens.inflate();\n        return this.colorizeLine(content, model.mightContainNonBasicASCII(), model.mightContainRTL(), inflatedTokens, tabSize);\n    }\n}\nfunction _colorize(lines, tabSize, tokenizationSupport, languageIdCodec) {\n    return new Promise((c, e) => {\n        const execute = () => {\n            const result = _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec);\n            if (tokenizationSupport instanceof MonarchTokenizer) {\n                const status = tokenizationSupport.getLoadStatus();\n                if (status.loaded === false) {\n                    status.promise.then(execute, e);\n                    return;\n                }\n            }\n            c(result);\n        };\n        execute();\n    });\n}\nfunction _fakeColorize(lines, tabSize, languageIdCodec) {\n    let html = [];\n    const defaultMetadata = ((0 /* FontStyle.None */ << 11 /* MetadataConsts.FONT_STYLE_OFFSET */)\n        | (1 /* ColorId.DefaultForeground */ << 15 /* MetadataConsts.FOREGROUND_OFFSET */)\n        | (2 /* ColorId.DefaultBackground */ << 24 /* MetadataConsts.BACKGROUND_OFFSET */)) >>> 0;\n    const tokens = new Uint32Array(2);\n    tokens[0] = 0;\n    tokens[1] = defaultMetadata;\n    for (let i = 0, length = lines.length; i < length; i++) {\n        const line = lines[i];\n        tokens[0] = line.length;\n        const lineTokens = new LineTokens(tokens, line, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        html = html.concat(renderResult.html);\n        html.push('<br/>');\n    }\n    return html.join('');\n}\nfunction _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec) {\n    let html = [];\n    let state = tokenizationSupport.getInitialState();\n    for (let i = 0, length = lines.length; i < length; i++) {\n        const line = lines[i];\n        const tokenizeResult = tokenizationSupport.tokenizeEncoded(line, true, state);\n        LineTokens.convertToEndOffset(tokenizeResult.tokens, line.length);\n        const lineTokens = new LineTokens(tokenizeResult.tokens, line, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens.inflate(), [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        html = html.concat(renderResult.html);\n        html.push('<br/>');\n        state = tokenizeResult.endState;\n    }\n    return html.join('');\n}\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet AbstractCodeEditorService = class AbstractCodeEditorService extends Disposable {\n    constructor(_themeService) {\n        super();\n        this._themeService = _themeService;\n        this._onWillCreateCodeEditor = this._register(new Emitter());\n        this._onCodeEditorAdd = this._register(new Emitter());\n        this.onCodeEditorAdd = this._onCodeEditorAdd.event;\n        this._onCodeEditorRemove = this._register(new Emitter());\n        this.onCodeEditorRemove = this._onCodeEditorRemove.event;\n        this._onWillCreateDiffEditor = this._register(new Emitter());\n        this._onDiffEditorAdd = this._register(new Emitter());\n        this.onDiffEditorAdd = this._onDiffEditorAdd.event;\n        this._onDiffEditorRemove = this._register(new Emitter());\n        this.onDiffEditorRemove = this._onDiffEditorRemove.event;\n        this._decorationOptionProviders = new Map();\n        this._codeEditorOpenHandlers = new LinkedList();\n        this._modelProperties = new Map();\n        this._codeEditors = Object.create(null);\n        this._diffEditors = Object.create(null);\n        this._globalStyleSheet = null;\n    }\n    willCreateCodeEditor() {\n        this._onWillCreateCodeEditor.fire();\n    }\n    addCodeEditor(editor) {\n        this._codeEditors[editor.getId()] = editor;\n        this._onCodeEditorAdd.fire(editor);\n    }\n    removeCodeEditor(editor) {\n        if (delete this._codeEditors[editor.getId()]) {\n            this._onCodeEditorRemove.fire(editor);\n        }\n    }\n    listCodeEditors() {\n        return Object.keys(this._codeEditors).map(id => this._codeEditors[id]);\n    }\n    willCreateDiffEditor() {\n        this._onWillCreateDiffEditor.fire();\n    }\n    addDiffEditor(editor) {\n        this._diffEditors[editor.getId()] = editor;\n        this._onDiffEditorAdd.fire(editor);\n    }\n    listDiffEditors() {\n        return Object.keys(this._diffEditors).map(id => this._diffEditors[id]);\n    }\n    getFocusedCodeEditor() {\n        let editorWithWidgetFocus = null;\n        const editors = this.listCodeEditors();\n        for (const editor of editors) {\n            if (editor.hasTextFocus()) {\n                // bingo!\n                return editor;\n            }\n            if (editor.hasWidgetFocus()) {\n                editorWithWidgetFocus = editor;\n            }\n        }\n        return editorWithWidgetFocus;\n    }\n    removeDecorationType(key) {\n        const provider = this._decorationOptionProviders.get(key);\n        if (provider) {\n            provider.refCount--;\n            if (provider.refCount <= 0) {\n                this._decorationOptionProviders.delete(key);\n                provider.dispose();\n                this.listCodeEditors().forEach((ed) => ed.removeDecorationsByType(key));\n            }\n        }\n    }\n    setModelProperty(resource, key, value) {\n        const key1 = resource.toString();\n        let dest;\n        if (this._modelProperties.has(key1)) {\n            dest = this._modelProperties.get(key1);\n        }\n        else {\n            dest = new Map();\n            this._modelProperties.set(key1, dest);\n        }\n        dest.set(key, value);\n    }\n    getModelProperty(resource, key) {\n        const key1 = resource.toString();\n        if (this._modelProperties.has(key1)) {\n            const innerMap = this._modelProperties.get(key1);\n            return innerMap.get(key);\n        }\n        return undefined;\n    }\n    async openCodeEditor(input, source, sideBySide) {\n        for (const handler of this._codeEditorOpenHandlers) {\n            const candidate = await handler(input, source, sideBySide);\n            if (candidate !== null) {\n                return candidate;\n            }\n        }\n        return null;\n    }\n    registerCodeEditorOpenHandler(handler) {\n        const rm = this._codeEditorOpenHandlers.unshift(handler);\n        return toDisposable(rm);\n    }\n};\nAbstractCodeEditorService = __decorate([\n    __param(0, IThemeService)\n], AbstractCodeEditorService);\nexport { AbstractCodeEditorService };\nexport class GlobalStyleSheet {\n    constructor(styleSheet) {\n        this._styleSheet = styleSheet;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { windowOpenNoOpener } from '../../../base/browser/dom.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { AbstractCodeEditorService } from '../../browser/services/abstractCodeEditorService.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet StandaloneCodeEditorService = class StandaloneCodeEditorService extends AbstractCodeEditorService {\n    constructor(contextKeyService, themeService) {\n        super(themeService);\n        this._register(this.onCodeEditorAdd(() => this._checkContextKey()));\n        this._register(this.onCodeEditorRemove(() => this._checkContextKey()));\n        this._editorIsOpen = contextKeyService.createKey('editorIsOpen', false);\n        this._activeCodeEditor = null;\n        this._register(this.registerCodeEditorOpenHandler(async (input, source, sideBySide) => {\n            if (!source) {\n                return null;\n            }\n            return this.doOpenEditor(source, input);\n        }));\n    }\n    _checkContextKey() {\n        let hasCodeEditor = false;\n        for (const editor of this.listCodeEditors()) {\n            if (!editor.isSimpleWidget) {\n                hasCodeEditor = true;\n                break;\n            }\n        }\n        this._editorIsOpen.set(hasCodeEditor);\n    }\n    setActiveCodeEditor(activeCodeEditor) {\n        this._activeCodeEditor = activeCodeEditor;\n    }\n    getActiveCodeEditor() {\n        return this._activeCodeEditor;\n    }\n    doOpenEditor(editor, input) {\n        const model = this.findModel(editor, input.resource);\n        if (!model) {\n            if (input.resource) {\n                const schema = input.resource.scheme;\n                if (schema === Schemas.http || schema === Schemas.https) {\n                    // This is a fully qualified http or https URL\n                    windowOpenNoOpener(input.resource.toString());\n                    return editor;\n                }\n            }\n            return null;\n        }\n        const selection = (input.options ? input.options.selection : null);\n        if (selection) {\n            if (typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\n                editor.setSelection(selection);\n                editor.revealRangeInCenter(selection, 1 /* ScrollType.Immediate */);\n            }\n            else {\n                const pos = {\n                    lineNumber: selection.startLineNumber,\n                    column: selection.startColumn\n                };\n                editor.setPosition(pos);\n                editor.revealPositionInCenter(pos, 1 /* ScrollType.Immediate */);\n            }\n        }\n        return editor;\n    }\n    findModel(editor, resource) {\n        const model = editor.getModel();\n        if (model && model.uri.toString() !== resource.toString()) {\n            return null;\n        }\n        return model;\n    }\n};\nStandaloneCodeEditorService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, IThemeService)\n], StandaloneCodeEditorService);\nexport { StandaloneCodeEditorService };\nregisterSingleton(ICodeEditorService, StandaloneCodeEditorService, 0 /* InstantiationType.Eager */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const ILayoutService = createDecorator('layoutService');\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { Event } from '../../../base/common/event.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { coalesce, firstOrDefault } from '../../../base/common/arrays.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nlet StandaloneLayoutService = class StandaloneLayoutService {\n    get mainContainer() {\n        var _a, _b;\n        return (_b = (_a = firstOrDefault(this._codeEditorService.listCodeEditors())) === null || _a === void 0 ? void 0 : _a.getContainerDomNode()) !== null && _b !== void 0 ? _b : mainWindow.document.body;\n    }\n    get activeContainer() {\n        var _a, _b;\n        const activeCodeEditor = (_a = this._codeEditorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : this._codeEditorService.getActiveCodeEditor();\n        return (_b = activeCodeEditor === null || activeCodeEditor === void 0 ? void 0 : activeCodeEditor.getContainerDomNode()) !== null && _b !== void 0 ? _b : this.mainContainer;\n    }\n    get mainContainerDimension() {\n        return dom.getClientArea(this.mainContainer);\n    }\n    get activeContainerDimension() {\n        return dom.getClientArea(this.activeContainer);\n    }\n    get containers() {\n        return coalesce(this._codeEditorService.listCodeEditors().map(codeEditor => codeEditor.getContainerDomNode()));\n    }\n    getContainer() {\n        return this.activeContainer;\n    }\n    focus() {\n        var _a;\n        (_a = this._codeEditorService.getFocusedCodeEditor()) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    constructor(_codeEditorService) {\n        this._codeEditorService = _codeEditorService;\n        this.onDidLayoutMainContainer = Event.None;\n        this.onDidLayoutActiveContainer = Event.None;\n        this.onDidLayoutContainer = Event.None;\n        this.onDidChangeActiveContainer = Event.None;\n        this.onDidAddContainer = Event.None;\n        this.mainContainerOffset = { top: 0, quickPickTop: 0 };\n        this.activeContainerOffset = { top: 0, quickPickTop: 0 };\n    }\n};\nStandaloneLayoutService = __decorate([\n    __param(0, ICodeEditorService)\n], StandaloneLayoutService);\nlet EditorScopedLayoutService = class EditorScopedLayoutService extends StandaloneLayoutService {\n    get mainContainer() {\n        return this._container;\n    }\n    constructor(_container, codeEditorService) {\n        super(codeEditorService);\n        this._container = _container;\n    }\n};\nEditorScopedLayoutService = __decorate([\n    __param(1, ICodeEditorService)\n], EditorScopedLayoutService);\nexport { EditorScopedLayoutService };\nregisterSingleton(ILayoutService, StandaloneLayoutService, 1 /* InstantiationType.Delayed */);\n", "import { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const IDialogService = createDecorator('dialogService');\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Disposable, isDisposable } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport Severity from '../../../base/common/severity.js';\nimport * as nls from '../../../nls.js';\nimport { IDialogService } from '../../dialogs/common/dialogs.js';\nimport { registerSingleton } from '../../instantiation/common/extensions.js';\nimport { INotificationService } from '../../notification/common/notification.js';\nimport { IUndoRedoService, ResourceEditStackSnapshot, UndoRedoGroup, UndoRedoSource } from './undoRedo.js';\nconst DEBUG = false;\nfunction getResourceLabel(resource) {\n    return resource.scheme === Schemas.file ? resource.fsPath : resource.path;\n}\nlet stackElementCounter = 0;\nclass ResourceStackElement {\n    constructor(actual, resourceLabel, strResource, groupId, groupOrder, sourceId, sourceOrder) {\n        this.id = (++stackElementCounter);\n        this.type = 0 /* UndoRedoElementType.Resource */;\n        this.actual = actual;\n        this.label = actual.label;\n        this.confirmBeforeUndo = actual.confirmBeforeUndo || false;\n        this.resourceLabel = resourceLabel;\n        this.strResource = strResource;\n        this.resourceLabels = [this.resourceLabel];\n        this.strResources = [this.strResource];\n        this.groupId = groupId;\n        this.groupOrder = groupOrder;\n        this.sourceId = sourceId;\n        this.sourceOrder = sourceOrder;\n        this.isValid = true;\n    }\n    setValid(isValid) {\n        this.isValid = isValid;\n    }\n    toString() {\n        return `[id:${this.id}] [group:${this.groupId}] [${this.isValid ? '  VALID' : 'INVALID'}] ${this.actual.constructor.name} - ${this.actual}`;\n    }\n}\nclass ResourceReasonPair {\n    constructor(resourceLabel, reason) {\n        this.resourceLabel = resourceLabel;\n        this.reason = reason;\n    }\n}\nclass RemovedResources {\n    constructor() {\n        this.elements = new Map();\n    }\n    createMessage() {\n        const externalRemoval = [];\n        const noParallelUniverses = [];\n        for (const [, element] of this.elements) {\n            const dest = (element.reason === 0 /* RemovedResourceReason.ExternalRemoval */\n                ? externalRemoval\n                : noParallelUniverses);\n            dest.push(element.resourceLabel);\n        }\n        const messages = [];\n        if (externalRemoval.length > 0) {\n            messages.push(nls.localize({ key: 'externalRemoval', comment: ['{0} is a list of filenames'] }, \"The following files have been closed and modified on disk: {0}.\", externalRemoval.join(', ')));\n        }\n        if (noParallelUniverses.length > 0) {\n            messages.push(nls.localize({ key: 'noParallelUniverses', comment: ['{0} is a list of filenames'] }, \"The following files have been modified in an incompatible way: {0}.\", noParallelUniverses.join(', ')));\n        }\n        return messages.join('\\n');\n    }\n    get size() {\n        return this.elements.size;\n    }\n    has(strResource) {\n        return this.elements.has(strResource);\n    }\n    set(strResource, value) {\n        this.elements.set(strResource, value);\n    }\n    delete(strResource) {\n        return this.elements.delete(strResource);\n    }\n}\nclass WorkspaceStackElement {\n    constructor(actual, resourceLabels, strResources, groupId, groupOrder, sourceId, sourceOrder) {\n        this.id = (++stackElementCounter);\n        this.type = 1 /* UndoRedoElementType.Workspace */;\n        this.actual = actual;\n        this.label = actual.label;\n        this.confirmBeforeUndo = actual.confirmBeforeUndo || false;\n        this.resourceLabels = resourceLabels;\n        this.strResources = strResources;\n        this.groupId = groupId;\n        this.groupOrder = groupOrder;\n        this.sourceId = sourceId;\n        this.sourceOrder = sourceOrder;\n        this.removedResources = null;\n        this.invalidatedResources = null;\n    }\n    canSplit() {\n        return (typeof this.actual.split === 'function');\n    }\n    removeResource(resourceLabel, strResource, reason) {\n        if (!this.removedResources) {\n            this.removedResources = new RemovedResources();\n        }\n        if (!this.removedResources.has(strResource)) {\n            this.removedResources.set(strResource, new ResourceReasonPair(resourceLabel, reason));\n        }\n    }\n    setValid(resourceLabel, strResource, isValid) {\n        if (isValid) {\n            if (this.invalidatedResources) {\n                this.invalidatedResources.delete(strResource);\n                if (this.invalidatedResources.size === 0) {\n                    this.invalidatedResources = null;\n                }\n            }\n        }\n        else {\n            if (!this.invalidatedResources) {\n                this.invalidatedResources = new RemovedResources();\n            }\n            if (!this.invalidatedResources.has(strResource)) {\n                this.invalidatedResources.set(strResource, new ResourceReasonPair(resourceLabel, 0 /* RemovedResourceReason.ExternalRemoval */));\n            }\n        }\n    }\n    toString() {\n        return `[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources ? 'INVALID' : '  VALID'}] ${this.actual.constructor.name} - ${this.actual}`;\n    }\n}\nclass ResourceEditStack {\n    constructor(resourceLabel, strResource) {\n        this.resourceLabel = resourceLabel;\n        this.strResource = strResource;\n        this._past = [];\n        this._future = [];\n        this.locked = false;\n        this.versionId = 1;\n    }\n    dispose() {\n        for (const element of this._past) {\n            if (element.type === 1 /* UndoRedoElementType.Workspace */) {\n                element.removeResource(this.resourceLabel, this.strResource, 0 /* RemovedResourceReason.ExternalRemoval */);\n            }\n        }\n        for (const element of this._future) {\n            if (element.type === 1 /* UndoRedoElementType.Workspace */) {\n                element.removeResource(this.resourceLabel, this.strResource, 0 /* RemovedResourceReason.ExternalRemoval */);\n            }\n        }\n        this.versionId++;\n    }\n    toString() {\n        const result = [];\n        result.push(`* ${this.strResource}:`);\n        for (let i = 0; i < this._past.length; i++) {\n            result.push(`   * [UNDO] ${this._past[i]}`);\n        }\n        for (let i = this._future.length - 1; i >= 0; i--) {\n            result.push(`   * [REDO] ${this._future[i]}`);\n        }\n        return result.join('\\n');\n    }\n    flushAllElements() {\n        this._past = [];\n        this._future = [];\n        this.versionId++;\n    }\n    _setElementValidFlag(element, isValid) {\n        if (element.type === 1 /* UndoRedoElementType.Workspace */) {\n            element.setValid(this.resourceLabel, this.strResource, isValid);\n        }\n        else {\n            element.setValid(isValid);\n        }\n    }\n    setElementsValidFlag(isValid, filter) {\n        for (const element of this._past) {\n            if (filter(element.actual)) {\n                this._setElementValidFlag(element, isValid);\n            }\n        }\n        for (const element of this._future) {\n            if (filter(element.actual)) {\n                this._setElementValidFlag(element, isValid);\n            }\n        }\n    }\n    pushElement(element) {\n        // remove the future\n        for (const futureElement of this._future) {\n            if (futureElement.type === 1 /* UndoRedoElementType.Workspace */) {\n                futureElement.removeResource(this.resourceLabel, this.strResource, 1 /* RemovedResourceReason.NoParallelUniverses */);\n            }\n        }\n        this._future = [];\n        this._past.push(element);\n        this.versionId++;\n    }\n    createSnapshot(resource) {\n        const elements = [];\n        for (let i = 0, len = this._past.length; i < len; i++) {\n            elements.push(this._past[i].id);\n        }\n        for (let i = this._future.length - 1; i >= 0; i--) {\n            elements.push(this._future[i].id);\n        }\n        return new ResourceEditStackSnapshot(resource, elements);\n    }\n    restoreSnapshot(snapshot) {\n        const snapshotLength = snapshot.elements.length;\n        let isOK = true;\n        let snapshotIndex = 0;\n        let removePastAfter = -1;\n        for (let i = 0, len = this._past.length; i < len; i++, snapshotIndex++) {\n            const element = this._past[i];\n            if (isOK && (snapshotIndex >= snapshotLength || element.id !== snapshot.elements[snapshotIndex])) {\n                isOK = false;\n                removePastAfter = 0;\n            }\n            if (!isOK && element.type === 1 /* UndoRedoElementType.Workspace */) {\n                element.removeResource(this.resourceLabel, this.strResource, 0 /* RemovedResourceReason.ExternalRemoval */);\n            }\n        }\n        let removeFutureBefore = -1;\n        for (let i = this._future.length - 1; i >= 0; i--, snapshotIndex++) {\n            const element = this._future[i];\n            if (isOK && (snapshotIndex >= snapshotLength || element.id !== snapshot.elements[snapshotIndex])) {\n                isOK = false;\n                removeFutureBefore = i;\n            }\n            if (!isOK && element.type === 1 /* UndoRedoElementType.Workspace */) {\n                element.removeResource(this.resourceLabel, this.strResource, 0 /* RemovedResourceReason.ExternalRemoval */);\n            }\n        }\n        if (removePastAfter !== -1) {\n            this._past = this._past.slice(0, removePastAfter);\n        }\n        if (removeFutureBefore !== -1) {\n            this._future = this._future.slice(removeFutureBefore + 1);\n        }\n        this.versionId++;\n    }\n    getElements() {\n        const past = [];\n        const future = [];\n        for (const element of this._past) {\n            past.push(element.actual);\n        }\n        for (const element of this._future) {\n            future.push(element.actual);\n        }\n        return { past, future };\n    }\n    getClosestPastElement() {\n        if (this._past.length === 0) {\n            return null;\n        }\n        return this._past[this._past.length - 1];\n    }\n    getSecondClosestPastElement() {\n        if (this._past.length < 2) {\n            return null;\n        }\n        return this._past[this._past.length - 2];\n    }\n    getClosestFutureElement() {\n        if (this._future.length === 0) {\n            return null;\n        }\n        return this._future[this._future.length - 1];\n    }\n    hasPastElements() {\n        return (this._past.length > 0);\n    }\n    hasFutureElements() {\n        return (this._future.length > 0);\n    }\n    splitPastWorkspaceElement(toRemove, individualMap) {\n        for (let j = this._past.length - 1; j >= 0; j--) {\n            if (this._past[j] === toRemove) {\n                if (individualMap.has(this.strResource)) {\n                    // gets replaced\n                    this._past[j] = individualMap.get(this.strResource);\n                }\n                else {\n                    // gets deleted\n                    this._past.splice(j, 1);\n                }\n                break;\n            }\n        }\n        this.versionId++;\n    }\n    splitFutureWorkspaceElement(toRemove, individualMap) {\n        for (let j = this._future.length - 1; j >= 0; j--) {\n            if (this._future[j] === toRemove) {\n                if (individualMap.has(this.strResource)) {\n                    // gets replaced\n                    this._future[j] = individualMap.get(this.strResource);\n                }\n                else {\n                    // gets deleted\n                    this._future.splice(j, 1);\n                }\n                break;\n            }\n        }\n        this.versionId++;\n    }\n    moveBackward(element) {\n        this._past.pop();\n        this._future.push(element);\n        this.versionId++;\n    }\n    moveForward(element) {\n        this._future.pop();\n        this._past.push(element);\n        this.versionId++;\n    }\n}\nclass EditStackSnapshot {\n    constructor(editStacks) {\n        this.editStacks = editStacks;\n        this._versionIds = [];\n        for (let i = 0, len = this.editStacks.length; i < len; i++) {\n            this._versionIds[i] = this.editStacks[i].versionId;\n        }\n    }\n    isValid() {\n        for (let i = 0, len = this.editStacks.length; i < len; i++) {\n            if (this._versionIds[i] !== this.editStacks[i].versionId) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nconst missingEditStack = new ResourceEditStack('', '');\nmissingEditStack.locked = true;\nlet UndoRedoService = class UndoRedoService {\n    constructor(_dialogService, _notificationService) {\n        this._dialogService = _dialogService;\n        this._notificationService = _notificationService;\n        this._editStacks = new Map();\n        this._uriComparisonKeyComputers = [];\n    }\n    getUriComparisonKey(resource) {\n        for (const uriComparisonKeyComputer of this._uriComparisonKeyComputers) {\n            if (uriComparisonKeyComputer[0] === resource.scheme) {\n                return uriComparisonKeyComputer[1].getComparisonKey(resource);\n            }\n        }\n        return resource.toString();\n    }\n    _print(label) {\n        console.log(`------------------------------------`);\n        console.log(`AFTER ${label}: `);\n        const str = [];\n        for (const element of this._editStacks) {\n            str.push(element[1].toString());\n        }\n        console.log(str.join('\\n'));\n    }\n    pushElement(element, group = UndoRedoGroup.None, source = UndoRedoSource.None) {\n        if (element.type === 0 /* UndoRedoElementType.Resource */) {\n            const resourceLabel = getResourceLabel(element.resource);\n            const strResource = this.getUriComparisonKey(element.resource);\n            this._pushElement(new ResourceStackElement(element, resourceLabel, strResource, group.id, group.nextOrder(), source.id, source.nextOrder()));\n        }\n        else {\n            const seen = new Set();\n            const resourceLabels = [];\n            const strResources = [];\n            for (const resource of element.resources) {\n                const resourceLabel = getResourceLabel(resource);\n                const strResource = this.getUriComparisonKey(resource);\n                if (seen.has(strResource)) {\n                    continue;\n                }\n                seen.add(strResource);\n                resourceLabels.push(resourceLabel);\n                strResources.push(strResource);\n            }\n            if (resourceLabels.length === 1) {\n                this._pushElement(new ResourceStackElement(element, resourceLabels[0], strResources[0], group.id, group.nextOrder(), source.id, source.nextOrder()));\n            }\n            else {\n                this._pushElement(new WorkspaceStackElement(element, resourceLabels, strResources, group.id, group.nextOrder(), source.id, source.nextOrder()));\n            }\n        }\n        if (DEBUG) {\n            this._print('pushElement');\n        }\n    }\n    _pushElement(element) {\n        for (let i = 0, len = element.strResources.length; i < len; i++) {\n            const resourceLabel = element.resourceLabels[i];\n            const strResource = element.strResources[i];\n            let editStack;\n            if (this._editStacks.has(strResource)) {\n                editStack = this._editStacks.get(strResource);\n            }\n            else {\n                editStack = new ResourceEditStack(resourceLabel, strResource);\n                this._editStacks.set(strResource, editStack);\n            }\n            editStack.pushElement(element);\n        }\n    }\n    getLastElement(resource) {\n        const strResource = this.getUriComparisonKey(resource);\n        if (this._editStacks.has(strResource)) {\n            const editStack = this._editStacks.get(strResource);\n            if (editStack.hasFutureElements()) {\n                return null;\n            }\n            const closestPastElement = editStack.getClosestPastElement();\n            return closestPastElement ? closestPastElement.actual : null;\n        }\n        return null;\n    }\n    _splitPastWorkspaceElement(toRemove, ignoreResources) {\n        const individualArr = toRemove.actual.split();\n        const individualMap = new Map();\n        for (const _element of individualArr) {\n            const resourceLabel = getResourceLabel(_element.resource);\n            const strResource = this.getUriComparisonKey(_element.resource);\n            const element = new ResourceStackElement(_element, resourceLabel, strResource, 0, 0, 0, 0);\n            individualMap.set(element.strResource, element);\n        }\n        for (const strResource of toRemove.strResources) {\n            if (ignoreResources && ignoreResources.has(strResource)) {\n                continue;\n            }\n            const editStack = this._editStacks.get(strResource);\n            editStack.splitPastWorkspaceElement(toRemove, individualMap);\n        }\n    }\n    _splitFutureWorkspaceElement(toRemove, ignoreResources) {\n        const individualArr = toRemove.actual.split();\n        const individualMap = new Map();\n        for (const _element of individualArr) {\n            const resourceLabel = getResourceLabel(_element.resource);\n            const strResource = this.getUriComparisonKey(_element.resource);\n            const element = new ResourceStackElement(_element, resourceLabel, strResource, 0, 0, 0, 0);\n            individualMap.set(element.strResource, element);\n        }\n        for (const strResource of toRemove.strResources) {\n            if (ignoreResources && ignoreResources.has(strResource)) {\n                continue;\n            }\n            const editStack = this._editStacks.get(strResource);\n            editStack.splitFutureWorkspaceElement(toRemove, individualMap);\n        }\n    }\n    removeElements(resource) {\n        const strResource = typeof resource === 'string' ? resource : this.getUriComparisonKey(resource);\n        if (this._editStacks.has(strResource)) {\n            const editStack = this._editStacks.get(strResource);\n            editStack.dispose();\n            this._editStacks.delete(strResource);\n        }\n        if (DEBUG) {\n            this._print('removeElements');\n        }\n    }\n    setElementsValidFlag(resource, isValid, filter) {\n        const strResource = this.getUriComparisonKey(resource);\n        if (this._editStacks.has(strResource)) {\n            const editStack = this._editStacks.get(strResource);\n            editStack.setElementsValidFlag(isValid, filter);\n        }\n        if (DEBUG) {\n            this._print('setElementsValidFlag');\n        }\n    }\n    createSnapshot(resource) {\n        const strResource = this.getUriComparisonKey(resource);\n        if (this._editStacks.has(strResource)) {\n            const editStack = this._editStacks.get(strResource);\n            return editStack.createSnapshot(resource);\n        }\n        return new ResourceEditStackSnapshot(resource, []);\n    }\n    restoreSnapshot(snapshot) {\n        const strResource = this.getUriComparisonKey(snapshot.resource);\n        if (this._editStacks.has(strResource)) {\n            const editStack = this._editStacks.get(strResource);\n            editStack.restoreSnapshot(snapshot);\n            if (!editStack.hasPastElements() && !editStack.hasFutureElements()) {\n                // the edit stack is now empty, just remove it entirely\n                editStack.dispose();\n                this._editStacks.delete(strResource);\n            }\n        }\n        if (DEBUG) {\n            this._print('restoreSnapshot');\n        }\n    }\n    getElements(resource) {\n        const strResource = this.getUriComparisonKey(resource);\n        if (this._editStacks.has(strResource)) {\n            const editStack = this._editStacks.get(strResource);\n            return editStack.getElements();\n        }\n        return { past: [], future: [] };\n    }\n    _findClosestUndoElementWithSource(sourceId) {\n        if (!sourceId) {\n            return [null, null];\n        }\n        // find an element with the sourceId and with the highest sourceOrder ready to be undone\n        let matchedElement = null;\n        let matchedStrResource = null;\n        for (const [strResource, editStack] of this._editStacks) {\n            const candidate = editStack.getClosestPastElement();\n            if (!candidate) {\n                continue;\n            }\n            if (candidate.sourceId === sourceId) {\n                if (!matchedElement || candidate.sourceOrder > matchedElement.sourceOrder) {\n                    matchedElement = candidate;\n                    matchedStrResource = strResource;\n                }\n            }\n        }\n        return [matchedElement, matchedStrResource];\n    }\n    canUndo(resourceOrSource) {\n        if (resourceOrSource instanceof UndoRedoSource) {\n            const [, matchedStrResource] = this._findClosestUndoElementWithSource(resourceOrSource.id);\n            return matchedStrResource ? true : false;\n        }\n        const strResource = this.getUriComparisonKey(resourceOrSource);\n        if (this._editStacks.has(strResource)) {\n            const editStack = this._editStacks.get(strResource);\n            return editStack.hasPastElements();\n        }\n        return false;\n    }\n    _onError(err, element) {\n        onUnexpectedError(err);\n        // An error occurred while undoing or redoing => drop the undo/redo stack for all affected resources\n        for (const strResource of element.strResources) {\n            this.removeElements(strResource);\n        }\n        this._notificationService.error(err);\n    }\n    _acquireLocks(editStackSnapshot) {\n        // first, check if all locks can be acquired\n        for (const editStack of editStackSnapshot.editStacks) {\n            if (editStack.locked) {\n                throw new Error('Cannot acquire edit stack lock');\n            }\n        }\n        // can acquire all locks\n        for (const editStack of editStackSnapshot.editStacks) {\n            editStack.locked = true;\n        }\n        return () => {\n            // release all locks\n            for (const editStack of editStackSnapshot.editStacks) {\n                editStack.locked = false;\n            }\n        };\n    }\n    _safeInvokeWithLocks(element, invoke, editStackSnapshot, cleanup, continuation) {\n        const releaseLocks = this._acquireLocks(editStackSnapshot);\n        let result;\n        try {\n            result = invoke();\n        }\n        catch (err) {\n            releaseLocks();\n            cleanup.dispose();\n            return this._onError(err, element);\n        }\n        if (result) {\n            // result is Promise<void>\n            return result.then(() => {\n                releaseLocks();\n                cleanup.dispose();\n                return continuation();\n            }, (err) => {\n                releaseLocks();\n                cleanup.dispose();\n                return this._onError(err, element);\n            });\n        }\n        else {\n            // result is void\n            releaseLocks();\n            cleanup.dispose();\n            return continuation();\n        }\n    }\n    async _invokeWorkspacePrepare(element) {\n        if (typeof element.actual.prepareUndoRedo === 'undefined') {\n            return Disposable.None;\n        }\n        const result = element.actual.prepareUndoRedo();\n        if (typeof result === 'undefined') {\n            return Disposable.None;\n        }\n        return result;\n    }\n    _invokeResourcePrepare(element, callback) {\n        if (element.actual.type !== 1 /* UndoRedoElementType.Workspace */ || typeof element.actual.prepareUndoRedo === 'undefined') {\n            // no preparation needed\n            return callback(Disposable.None);\n        }\n        const r = element.actual.prepareUndoRedo();\n        if (!r) {\n            // nothing to clean up\n            return callback(Disposable.None);\n        }\n        if (isDisposable(r)) {\n            return callback(r);\n        }\n        return r.then((disposable) => {\n            return callback(disposable);\n        });\n    }\n    _getAffectedEditStacks(element) {\n        const affectedEditStacks = [];\n        for (const strResource of element.strResources) {\n            affectedEditStacks.push(this._editStacks.get(strResource) || missingEditStack);\n        }\n        return new EditStackSnapshot(affectedEditStacks);\n    }\n    _tryToSplitAndUndo(strResource, element, ignoreResources, message) {\n        if (element.canSplit()) {\n            this._splitPastWorkspaceElement(element, ignoreResources);\n            this._notificationService.warn(message);\n            return new WorkspaceVerificationError(this._undo(strResource, 0, true));\n        }\n        else {\n            // Cannot safely split this workspace element => flush all undo/redo stacks\n            for (const strResource of element.strResources) {\n                this.removeElements(strResource);\n            }\n            this._notificationService.warn(message);\n            return new WorkspaceVerificationError();\n        }\n    }\n    _checkWorkspaceUndo(strResource, element, editStackSnapshot, checkInvalidatedResources) {\n        if (element.removedResources) {\n            return this._tryToSplitAndUndo(strResource, element, element.removedResources, nls.localize({ key: 'cannotWorkspaceUndo', comment: ['{0} is a label for an operation. {1} is another message.'] }, \"Could not undo '{0}' across all files. {1}\", element.label, element.removedResources.createMessage()));\n        }\n        if (checkInvalidatedResources && element.invalidatedResources) {\n            return this._tryToSplitAndUndo(strResource, element, element.invalidatedResources, nls.localize({ key: 'cannotWorkspaceUndo', comment: ['{0} is a label for an operation. {1} is another message.'] }, \"Could not undo '{0}' across all files. {1}\", element.label, element.invalidatedResources.createMessage()));\n        }\n        // this must be the last past element in all the impacted resources!\n        const cannotUndoDueToResources = [];\n        for (const editStack of editStackSnapshot.editStacks) {\n            if (editStack.getClosestPastElement() !== element) {\n                cannotUndoDueToResources.push(editStack.resourceLabel);\n            }\n        }\n        if (cannotUndoDueToResources.length > 0) {\n            return this._tryToSplitAndUndo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceUndoDueToChanges', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not undo '{0}' across all files because changes were made to {1}\", element.label, cannotUndoDueToResources.join(', ')));\n        }\n        const cannotLockDueToResources = [];\n        for (const editStack of editStackSnapshot.editStacks) {\n            if (editStack.locked) {\n                cannotLockDueToResources.push(editStack.resourceLabel);\n            }\n        }\n        if (cannotLockDueToResources.length > 0) {\n            return this._tryToSplitAndUndo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceUndoDueToInProgressUndoRedo', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}\", element.label, cannotLockDueToResources.join(', ')));\n        }\n        // check if new stack elements were added in the meantime...\n        if (!editStackSnapshot.isValid()) {\n            return this._tryToSplitAndUndo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceUndoDueToInMeantimeUndoRedo', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime\", element.label));\n        }\n        return null;\n    }\n    _workspaceUndo(strResource, element, undoConfirmed) {\n        const affectedEditStacks = this._getAffectedEditStacks(element);\n        const verificationError = this._checkWorkspaceUndo(strResource, element, affectedEditStacks, /*invalidated resources will be checked after the prepare call*/ false);\n        if (verificationError) {\n            return verificationError.returnValue;\n        }\n        return this._confirmAndExecuteWorkspaceUndo(strResource, element, affectedEditStacks, undoConfirmed);\n    }\n    _isPartOfUndoGroup(element) {\n        if (!element.groupId) {\n            return false;\n        }\n        // check that there is at least another element with the same groupId ready to be undone\n        for (const [, editStack] of this._editStacks) {\n            const pastElement = editStack.getClosestPastElement();\n            if (!pastElement) {\n                continue;\n            }\n            if (pastElement === element) {\n                const secondPastElement = editStack.getSecondClosestPastElement();\n                if (secondPastElement && secondPastElement.groupId === element.groupId) {\n                    // there is another element with the same group id in the same stack!\n                    return true;\n                }\n            }\n            if (pastElement.groupId === element.groupId) {\n                // there is another element with the same group id in another stack!\n                return true;\n            }\n        }\n        return false;\n    }\n    async _confirmAndExecuteWorkspaceUndo(strResource, element, editStackSnapshot, undoConfirmed) {\n        if (element.canSplit() && !this._isPartOfUndoGroup(element)) {\n            // this element can be split\n            let UndoChoice;\n            (function (UndoChoice) {\n                UndoChoice[UndoChoice[\"All\"] = 0] = \"All\";\n                UndoChoice[UndoChoice[\"This\"] = 1] = \"This\";\n                UndoChoice[UndoChoice[\"Cancel\"] = 2] = \"Cancel\";\n            })(UndoChoice || (UndoChoice = {}));\n            const { result } = await this._dialogService.prompt({\n                type: Severity.Info,\n                message: nls.localize('confirmWorkspace', \"Would you like to undo '{0}' across all files?\", element.label),\n                buttons: [\n                    {\n                        label: nls.localize({ key: 'ok', comment: ['{0} denotes a number that is > 1, && denotes a mnemonic'] }, \"&&Undo in {0} Files\", editStackSnapshot.editStacks.length),\n                        run: () => UndoChoice.All\n                    },\n                    {\n                        label: nls.localize({ key: 'nok', comment: ['&& denotes a mnemonic'] }, \"Undo this &&File\"),\n                        run: () => UndoChoice.This\n                    }\n                ],\n                cancelButton: {\n                    run: () => UndoChoice.Cancel\n                }\n            });\n            if (result === UndoChoice.Cancel) {\n                // choice: cancel\n                return;\n            }\n            if (result === UndoChoice.This) {\n                // choice: undo this file\n                this._splitPastWorkspaceElement(element, null);\n                return this._undo(strResource, 0, true);\n            }\n            // choice: undo in all files\n            // At this point, it is possible that the element has been made invalid in the meantime (due to the confirmation await)\n            const verificationError1 = this._checkWorkspaceUndo(strResource, element, editStackSnapshot, /*invalidated resources will be checked after the prepare call*/ false);\n            if (verificationError1) {\n                return verificationError1.returnValue;\n            }\n            undoConfirmed = true;\n        }\n        // prepare\n        let cleanup;\n        try {\n            cleanup = await this._invokeWorkspacePrepare(element);\n        }\n        catch (err) {\n            return this._onError(err, element);\n        }\n        // At this point, it is possible that the element has been made invalid in the meantime (due to the prepare await)\n        const verificationError2 = this._checkWorkspaceUndo(strResource, element, editStackSnapshot, /*now also check that there are no more invalidated resources*/ true);\n        if (verificationError2) {\n            cleanup.dispose();\n            return verificationError2.returnValue;\n        }\n        for (const editStack of editStackSnapshot.editStacks) {\n            editStack.moveBackward(element);\n        }\n        return this._safeInvokeWithLocks(element, () => element.actual.undo(), editStackSnapshot, cleanup, () => this._continueUndoInGroup(element.groupId, undoConfirmed));\n    }\n    _resourceUndo(editStack, element, undoConfirmed) {\n        if (!element.isValid) {\n            // invalid element => immediately flush edit stack!\n            editStack.flushAllElements();\n            return;\n        }\n        if (editStack.locked) {\n            const message = nls.localize({ key: 'cannotResourceUndoDueToInProgressUndoRedo', comment: ['{0} is a label for an operation.'] }, \"Could not undo '{0}' because there is already an undo or redo operation running.\", element.label);\n            this._notificationService.warn(message);\n            return;\n        }\n        return this._invokeResourcePrepare(element, (cleanup) => {\n            editStack.moveBackward(element);\n            return this._safeInvokeWithLocks(element, () => element.actual.undo(), new EditStackSnapshot([editStack]), cleanup, () => this._continueUndoInGroup(element.groupId, undoConfirmed));\n        });\n    }\n    _findClosestUndoElementInGroup(groupId) {\n        if (!groupId) {\n            return [null, null];\n        }\n        // find another element with the same groupId and with the highest groupOrder ready to be undone\n        let matchedElement = null;\n        let matchedStrResource = null;\n        for (const [strResource, editStack] of this._editStacks) {\n            const candidate = editStack.getClosestPastElement();\n            if (!candidate) {\n                continue;\n            }\n            if (candidate.groupId === groupId) {\n                if (!matchedElement || candidate.groupOrder > matchedElement.groupOrder) {\n                    matchedElement = candidate;\n                    matchedStrResource = strResource;\n                }\n            }\n        }\n        return [matchedElement, matchedStrResource];\n    }\n    _continueUndoInGroup(groupId, undoConfirmed) {\n        if (!groupId) {\n            return;\n        }\n        const [, matchedStrResource] = this._findClosestUndoElementInGroup(groupId);\n        if (matchedStrResource) {\n            return this._undo(matchedStrResource, 0, undoConfirmed);\n        }\n    }\n    undo(resourceOrSource) {\n        if (resourceOrSource instanceof UndoRedoSource) {\n            const [, matchedStrResource] = this._findClosestUndoElementWithSource(resourceOrSource.id);\n            return matchedStrResource ? this._undo(matchedStrResource, resourceOrSource.id, false) : undefined;\n        }\n        if (typeof resourceOrSource === 'string') {\n            return this._undo(resourceOrSource, 0, false);\n        }\n        return this._undo(this.getUriComparisonKey(resourceOrSource), 0, false);\n    }\n    _undo(strResource, sourceId = 0, undoConfirmed) {\n        if (!this._editStacks.has(strResource)) {\n            return;\n        }\n        const editStack = this._editStacks.get(strResource);\n        const element = editStack.getClosestPastElement();\n        if (!element) {\n            return;\n        }\n        if (element.groupId) {\n            // this element is a part of a group, we need to make sure undoing in a group is in order\n            const [matchedElement, matchedStrResource] = this._findClosestUndoElementInGroup(element.groupId);\n            if (element !== matchedElement && matchedStrResource) {\n                // there is an element in the same group that should be undone before this one\n                return this._undo(matchedStrResource, sourceId, undoConfirmed);\n            }\n        }\n        const shouldPromptForConfirmation = (element.sourceId !== sourceId || element.confirmBeforeUndo);\n        if (shouldPromptForConfirmation && !undoConfirmed) {\n            // Hit a different source or the element asks for prompt before undo, prompt for confirmation\n            return this._confirmAndContinueUndo(strResource, sourceId, element);\n        }\n        try {\n            if (element.type === 1 /* UndoRedoElementType.Workspace */) {\n                return this._workspaceUndo(strResource, element, undoConfirmed);\n            }\n            else {\n                return this._resourceUndo(editStack, element, undoConfirmed);\n            }\n        }\n        finally {\n            if (DEBUG) {\n                this._print('undo');\n            }\n        }\n    }\n    async _confirmAndContinueUndo(strResource, sourceId, element) {\n        const result = await this._dialogService.confirm({\n            message: nls.localize('confirmDifferentSource', \"Would you like to undo '{0}'?\", element.label),\n            primaryButton: nls.localize({ key: 'confirmDifferentSource.yes', comment: ['&& denotes a mnemonic'] }, \"&&Yes\"),\n            cancelButton: nls.localize('confirmDifferentSource.no', \"No\")\n        });\n        if (!result.confirmed) {\n            return;\n        }\n        return this._undo(strResource, sourceId, true);\n    }\n    _findClosestRedoElementWithSource(sourceId) {\n        if (!sourceId) {\n            return [null, null];\n        }\n        // find an element with sourceId and with the lowest sourceOrder ready to be redone\n        let matchedElement = null;\n        let matchedStrResource = null;\n        for (const [strResource, editStack] of this._editStacks) {\n            const candidate = editStack.getClosestFutureElement();\n            if (!candidate) {\n                continue;\n            }\n            if (candidate.sourceId === sourceId) {\n                if (!matchedElement || candidate.sourceOrder < matchedElement.sourceOrder) {\n                    matchedElement = candidate;\n                    matchedStrResource = strResource;\n                }\n            }\n        }\n        return [matchedElement, matchedStrResource];\n    }\n    canRedo(resourceOrSource) {\n        if (resourceOrSource instanceof UndoRedoSource) {\n            const [, matchedStrResource] = this._findClosestRedoElementWithSource(resourceOrSource.id);\n            return matchedStrResource ? true : false;\n        }\n        const strResource = this.getUriComparisonKey(resourceOrSource);\n        if (this._editStacks.has(strResource)) {\n            const editStack = this._editStacks.get(strResource);\n            return editStack.hasFutureElements();\n        }\n        return false;\n    }\n    _tryToSplitAndRedo(strResource, element, ignoreResources, message) {\n        if (element.canSplit()) {\n            this._splitFutureWorkspaceElement(element, ignoreResources);\n            this._notificationService.warn(message);\n            return new WorkspaceVerificationError(this._redo(strResource));\n        }\n        else {\n            // Cannot safely split this workspace element => flush all undo/redo stacks\n            for (const strResource of element.strResources) {\n                this.removeElements(strResource);\n            }\n            this._notificationService.warn(message);\n            return new WorkspaceVerificationError();\n        }\n    }\n    _checkWorkspaceRedo(strResource, element, editStackSnapshot, checkInvalidatedResources) {\n        if (element.removedResources) {\n            return this._tryToSplitAndRedo(strResource, element, element.removedResources, nls.localize({ key: 'cannotWorkspaceRedo', comment: ['{0} is a label for an operation. {1} is another message.'] }, \"Could not redo '{0}' across all files. {1}\", element.label, element.removedResources.createMessage()));\n        }\n        if (checkInvalidatedResources && element.invalidatedResources) {\n            return this._tryToSplitAndRedo(strResource, element, element.invalidatedResources, nls.localize({ key: 'cannotWorkspaceRedo', comment: ['{0} is a label for an operation. {1} is another message.'] }, \"Could not redo '{0}' across all files. {1}\", element.label, element.invalidatedResources.createMessage()));\n        }\n        // this must be the last future element in all the impacted resources!\n        const cannotRedoDueToResources = [];\n        for (const editStack of editStackSnapshot.editStacks) {\n            if (editStack.getClosestFutureElement() !== element) {\n                cannotRedoDueToResources.push(editStack.resourceLabel);\n            }\n        }\n        if (cannotRedoDueToResources.length > 0) {\n            return this._tryToSplitAndRedo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceRedoDueToChanges', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not redo '{0}' across all files because changes were made to {1}\", element.label, cannotRedoDueToResources.join(', ')));\n        }\n        const cannotLockDueToResources = [];\n        for (const editStack of editStackSnapshot.editStacks) {\n            if (editStack.locked) {\n                cannotLockDueToResources.push(editStack.resourceLabel);\n            }\n        }\n        if (cannotLockDueToResources.length > 0) {\n            return this._tryToSplitAndRedo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceRedoDueToInProgressUndoRedo', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}\", element.label, cannotLockDueToResources.join(', ')));\n        }\n        // check if new stack elements were added in the meantime...\n        if (!editStackSnapshot.isValid()) {\n            return this._tryToSplitAndRedo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceRedoDueToInMeantimeUndoRedo', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime\", element.label));\n        }\n        return null;\n    }\n    _workspaceRedo(strResource, element) {\n        const affectedEditStacks = this._getAffectedEditStacks(element);\n        const verificationError = this._checkWorkspaceRedo(strResource, element, affectedEditStacks, /*invalidated resources will be checked after the prepare call*/ false);\n        if (verificationError) {\n            return verificationError.returnValue;\n        }\n        return this._executeWorkspaceRedo(strResource, element, affectedEditStacks);\n    }\n    async _executeWorkspaceRedo(strResource, element, editStackSnapshot) {\n        // prepare\n        let cleanup;\n        try {\n            cleanup = await this._invokeWorkspacePrepare(element);\n        }\n        catch (err) {\n            return this._onError(err, element);\n        }\n        // At this point, it is possible that the element has been made invalid in the meantime (due to the prepare await)\n        const verificationError = this._checkWorkspaceRedo(strResource, element, editStackSnapshot, /*now also check that there are no more invalidated resources*/ true);\n        if (verificationError) {\n            cleanup.dispose();\n            return verificationError.returnValue;\n        }\n        for (const editStack of editStackSnapshot.editStacks) {\n            editStack.moveForward(element);\n        }\n        return this._safeInvokeWithLocks(element, () => element.actual.redo(), editStackSnapshot, cleanup, () => this._continueRedoInGroup(element.groupId));\n    }\n    _resourceRedo(editStack, element) {\n        if (!element.isValid) {\n            // invalid element => immediately flush edit stack!\n            editStack.flushAllElements();\n            return;\n        }\n        if (editStack.locked) {\n            const message = nls.localize({ key: 'cannotResourceRedoDueToInProgressUndoRedo', comment: ['{0} is a label for an operation.'] }, \"Could not redo '{0}' because there is already an undo or redo operation running.\", element.label);\n            this._notificationService.warn(message);\n            return;\n        }\n        return this._invokeResourcePrepare(element, (cleanup) => {\n            editStack.moveForward(element);\n            return this._safeInvokeWithLocks(element, () => element.actual.redo(), new EditStackSnapshot([editStack]), cleanup, () => this._continueRedoInGroup(element.groupId));\n        });\n    }\n    _findClosestRedoElementInGroup(groupId) {\n        if (!groupId) {\n            return [null, null];\n        }\n        // find another element with the same groupId and with the lowest groupOrder ready to be redone\n        let matchedElement = null;\n        let matchedStrResource = null;\n        for (const [strResource, editStack] of this._editStacks) {\n            const candidate = editStack.getClosestFutureElement();\n            if (!candidate) {\n                continue;\n            }\n            if (candidate.groupId === groupId) {\n                if (!matchedElement || candidate.groupOrder < matchedElement.groupOrder) {\n                    matchedElement = candidate;\n                    matchedStrResource = strResource;\n                }\n            }\n        }\n        return [matchedElement, matchedStrResource];\n    }\n    _continueRedoInGroup(groupId) {\n        if (!groupId) {\n            return;\n        }\n        const [, matchedStrResource] = this._findClosestRedoElementInGroup(groupId);\n        if (matchedStrResource) {\n            return this._redo(matchedStrResource);\n        }\n    }\n    redo(resourceOrSource) {\n        if (resourceOrSource instanceof UndoRedoSource) {\n            const [, matchedStrResource] = this._findClosestRedoElementWithSource(resourceOrSource.id);\n            return matchedStrResource ? this._redo(matchedStrResource) : undefined;\n        }\n        if (typeof resourceOrSource === 'string') {\n            return this._redo(resourceOrSource);\n        }\n        return this._redo(this.getUriComparisonKey(resourceOrSource));\n    }\n    _redo(strResource) {\n        if (!this._editStacks.has(strResource)) {\n            return;\n        }\n        const editStack = this._editStacks.get(strResource);\n        const element = editStack.getClosestFutureElement();\n        if (!element) {\n            return;\n        }\n        if (element.groupId) {\n            // this element is a part of a group, we need to make sure redoing in a group is in order\n            const [matchedElement, matchedStrResource] = this._findClosestRedoElementInGroup(element.groupId);\n            if (element !== matchedElement && matchedStrResource) {\n                // there is an element in the same group that should be redone before this one\n                return this._redo(matchedStrResource);\n            }\n        }\n        try {\n            if (element.type === 1 /* UndoRedoElementType.Workspace */) {\n                return this._workspaceRedo(strResource, element);\n            }\n            else {\n                return this._resourceRedo(editStack, element);\n            }\n        }\n        finally {\n            if (DEBUG) {\n                this._print('redo');\n            }\n        }\n    }\n};\nUndoRedoService = __decorate([\n    __param(0, IDialogService),\n    __param(1, INotificationService)\n], UndoRedoService);\nexport { UndoRedoService };\nclass WorkspaceVerificationError {\n    constructor(returnValue) {\n        this.returnValue = returnValue;\n    }\n}\nregisterSingleton(IUndoRedoService, UndoRedoService, 1 /* InstantiationType.Delayed */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { TokenMetadata } from '../encodedTokenAttributes.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { ILogService, LogLevel } from '../../../platform/log/common/log.js';\nimport { SparseMultilineTokens } from '../tokens/sparseMultilineTokens.js';\nimport { ILanguageService } from '../languages/language.js';\nlet SemanticTokensProviderStyling = class SemanticTokensProviderStyling {\n    constructor(_legend, _themeService, _languageService, _logService) {\n        this._legend = _legend;\n        this._themeService = _themeService;\n        this._languageService = _languageService;\n        this._logService = _logService;\n        this._hasWarnedOverlappingTokens = false;\n        this._hasWarnedInvalidLengthTokens = false;\n        this._hasWarnedInvalidEditStart = false;\n        this._hashTable = new HashTable();\n    }\n    getMetadata(tokenTypeIndex, tokenModifierSet, languageId) {\n        const encodedLanguageId = this._languageService.languageIdCodec.encodeLanguageId(languageId);\n        const entry = this._hashTable.get(tokenTypeIndex, tokenModifierSet, encodedLanguageId);\n        let metadata;\n        if (entry) {\n            metadata = entry.metadata;\n            if (this._logService.getLevel() === LogLevel.Trace) {\n                this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${tokenTypeIndex} / ${tokenModifierSet}: foreground ${TokenMetadata.getForeground(metadata)}, fontStyle ${TokenMetadata.getFontStyle(metadata).toString(2)}`);\n            }\n        }\n        else {\n            let tokenType = this._legend.tokenTypes[tokenTypeIndex];\n            const tokenModifiers = [];\n            if (tokenType) {\n                let modifierSet = tokenModifierSet;\n                for (let modifierIndex = 0; modifierSet > 0 && modifierIndex < this._legend.tokenModifiers.length; modifierIndex++) {\n                    if (modifierSet & 1) {\n                        tokenModifiers.push(this._legend.tokenModifiers[modifierIndex]);\n                    }\n                    modifierSet = modifierSet >> 1;\n                }\n                if (modifierSet > 0 && this._logService.getLevel() === LogLevel.Trace) {\n                    this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${tokenModifierSet.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`);\n                    tokenModifiers.push('not-in-legend');\n                }\n                const tokenStyle = this._themeService.getColorTheme().getTokenStyleMetadata(tokenType, tokenModifiers, languageId);\n                if (typeof tokenStyle === 'undefined') {\n                    metadata = 2147483647 /* SemanticTokensProviderStylingConstants.NO_STYLING */;\n                }\n                else {\n                    metadata = 0;\n                    if (typeof tokenStyle.italic !== 'undefined') {\n                        const italicBit = (tokenStyle.italic ? 1 /* FontStyle.Italic */ : 0) << 11 /* MetadataConsts.FONT_STYLE_OFFSET */;\n                        metadata |= italicBit | 1 /* MetadataConsts.SEMANTIC_USE_ITALIC */;\n                    }\n                    if (typeof tokenStyle.bold !== 'undefined') {\n                        const boldBit = (tokenStyle.bold ? 2 /* FontStyle.Bold */ : 0) << 11 /* MetadataConsts.FONT_STYLE_OFFSET */;\n                        metadata |= boldBit | 2 /* MetadataConsts.SEMANTIC_USE_BOLD */;\n                    }\n                    if (typeof tokenStyle.underline !== 'undefined') {\n                        const underlineBit = (tokenStyle.underline ? 4 /* FontStyle.Underline */ : 0) << 11 /* MetadataConsts.FONT_STYLE_OFFSET */;\n                        metadata |= underlineBit | 4 /* MetadataConsts.SEMANTIC_USE_UNDERLINE */;\n                    }\n                    if (typeof tokenStyle.strikethrough !== 'undefined') {\n                        const strikethroughBit = (tokenStyle.strikethrough ? 8 /* FontStyle.Strikethrough */ : 0) << 11 /* MetadataConsts.FONT_STYLE_OFFSET */;\n                        metadata |= strikethroughBit | 8 /* MetadataConsts.SEMANTIC_USE_STRIKETHROUGH */;\n                    }\n                    if (tokenStyle.foreground) {\n                        const foregroundBits = (tokenStyle.foreground) << 15 /* MetadataConsts.FOREGROUND_OFFSET */;\n                        metadata |= foregroundBits | 16 /* MetadataConsts.SEMANTIC_USE_FOREGROUND */;\n                    }\n                    if (metadata === 0) {\n                        // Nothing!\n                        metadata = 2147483647 /* SemanticTokensProviderStylingConstants.NO_STYLING */;\n                    }\n                }\n            }\n            else {\n                if (this._logService.getLevel() === LogLevel.Trace) {\n                    this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${tokenTypeIndex} for legend: ${JSON.stringify(this._legend.tokenTypes)}`);\n                }\n                metadata = 2147483647 /* SemanticTokensProviderStylingConstants.NO_STYLING */;\n                tokenType = 'not-in-legend';\n            }\n            this._hashTable.add(tokenTypeIndex, tokenModifierSet, encodedLanguageId, metadata);\n            if (this._logService.getLevel() === LogLevel.Trace) {\n                this._logService.trace(`SemanticTokensProviderStyling ${tokenTypeIndex} (${tokenType}) / ${tokenModifierSet} (${tokenModifiers.join(' ')}): foreground ${TokenMetadata.getForeground(metadata)}, fontStyle ${TokenMetadata.getFontStyle(metadata).toString(2)}`);\n            }\n        }\n        return metadata;\n    }\n    warnOverlappingSemanticTokens(lineNumber, startColumn) {\n        if (!this._hasWarnedOverlappingTokens) {\n            this._hasWarnedOverlappingTokens = true;\n            console.warn(`Overlapping semantic tokens detected at lineNumber ${lineNumber}, column ${startColumn}`);\n        }\n    }\n    warnInvalidLengthSemanticTokens(lineNumber, startColumn) {\n        if (!this._hasWarnedInvalidLengthTokens) {\n            this._hasWarnedInvalidLengthTokens = true;\n            console.warn(`Semantic token with invalid length detected at lineNumber ${lineNumber}, column ${startColumn}`);\n        }\n    }\n    warnInvalidEditStart(previousResultId, resultId, editIndex, editStart, maxExpectedStart) {\n        if (!this._hasWarnedInvalidEditStart) {\n            this._hasWarnedInvalidEditStart = true;\n            console.warn(`Invalid semantic tokens edit detected (previousResultId: ${previousResultId}, resultId: ${resultId}) at edit #${editIndex}: The provided start offset ${editStart} is outside the previous data (length ${maxExpectedStart}).`);\n        }\n    }\n};\nSemanticTokensProviderStyling = __decorate([\n    __param(1, IThemeService),\n    __param(2, ILanguageService),\n    __param(3, ILogService)\n], SemanticTokensProviderStyling);\nexport { SemanticTokensProviderStyling };\nexport function toMultilineTokens2(tokens, styling, languageId) {\n    const srcData = tokens.data;\n    const tokenCount = (tokens.data.length / 5) | 0;\n    const tokensPerArea = Math.max(Math.ceil(tokenCount / 1024 /* SemanticColoringConstants.DesiredMaxAreas */), 400 /* SemanticColoringConstants.DesiredTokensPerArea */);\n    const result = [];\n    let tokenIndex = 0;\n    let lastLineNumber = 1;\n    let lastStartCharacter = 0;\n    while (tokenIndex < tokenCount) {\n        const tokenStartIndex = tokenIndex;\n        let tokenEndIndex = Math.min(tokenStartIndex + tokensPerArea, tokenCount);\n        // Keep tokens on the same line in the same area...\n        if (tokenEndIndex < tokenCount) {\n            let smallTokenEndIndex = tokenEndIndex;\n            while (smallTokenEndIndex - 1 > tokenStartIndex && srcData[5 * smallTokenEndIndex] === 0) {\n                smallTokenEndIndex--;\n            }\n            if (smallTokenEndIndex - 1 === tokenStartIndex) {\n                // there are so many tokens on this line that our area would be empty, we must now go right\n                let bigTokenEndIndex = tokenEndIndex;\n                while (bigTokenEndIndex + 1 < tokenCount && srcData[5 * bigTokenEndIndex] === 0) {\n                    bigTokenEndIndex++;\n                }\n                tokenEndIndex = bigTokenEndIndex;\n            }\n            else {\n                tokenEndIndex = smallTokenEndIndex;\n            }\n        }\n        let destData = new Uint32Array((tokenEndIndex - tokenStartIndex) * 4);\n        let destOffset = 0;\n        let areaLine = 0;\n        let prevLineNumber = 0;\n        let prevEndCharacter = 0;\n        while (tokenIndex < tokenEndIndex) {\n            const srcOffset = 5 * tokenIndex;\n            const deltaLine = srcData[srcOffset];\n            const deltaCharacter = srcData[srcOffset + 1];\n            // Casting both `lineNumber`, `startCharacter` and `endCharacter` here to uint32 using `|0`\n            // to validate below with the actual values that will be inserted in the Uint32Array result\n            const lineNumber = (lastLineNumber + deltaLine) | 0;\n            const startCharacter = (deltaLine === 0 ? (lastStartCharacter + deltaCharacter) | 0 : deltaCharacter);\n            const length = srcData[srcOffset + 2];\n            const endCharacter = (startCharacter + length) | 0;\n            const tokenTypeIndex = srcData[srcOffset + 3];\n            const tokenModifierSet = srcData[srcOffset + 4];\n            if (endCharacter <= startCharacter) {\n                // this token is invalid (most likely a negative length casted to uint32)\n                styling.warnInvalidLengthSemanticTokens(lineNumber, startCharacter + 1);\n            }\n            else if (prevLineNumber === lineNumber && prevEndCharacter > startCharacter) {\n                // this token overlaps with the previous token\n                styling.warnOverlappingSemanticTokens(lineNumber, startCharacter + 1);\n            }\n            else {\n                const metadata = styling.getMetadata(tokenTypeIndex, tokenModifierSet, languageId);\n                if (metadata !== 2147483647 /* SemanticTokensProviderStylingConstants.NO_STYLING */) {\n                    if (areaLine === 0) {\n                        areaLine = lineNumber;\n                    }\n                    destData[destOffset] = lineNumber - areaLine;\n                    destData[destOffset + 1] = startCharacter;\n                    destData[destOffset + 2] = endCharacter;\n                    destData[destOffset + 3] = metadata;\n                    destOffset += 4;\n                    prevLineNumber = lineNumber;\n                    prevEndCharacter = endCharacter;\n                }\n            }\n            lastLineNumber = lineNumber;\n            lastStartCharacter = startCharacter;\n            tokenIndex++;\n        }\n        if (destOffset !== destData.length) {\n            destData = destData.subarray(0, destOffset);\n        }\n        const tokens = SparseMultilineTokens.create(areaLine, destData);\n        result.push(tokens);\n    }\n    return result;\n}\nclass HashTableEntry {\n    constructor(tokenTypeIndex, tokenModifierSet, languageId, metadata) {\n        this.tokenTypeIndex = tokenTypeIndex;\n        this.tokenModifierSet = tokenModifierSet;\n        this.languageId = languageId;\n        this.metadata = metadata;\n        this.next = null;\n    }\n}\nclass HashTable {\n    constructor() {\n        this._elementsCount = 0;\n        this._currentLengthIndex = 0;\n        this._currentLength = HashTable._SIZES[this._currentLengthIndex];\n        this._growCount = Math.round(this._currentLengthIndex + 1 < HashTable._SIZES.length ? 2 / 3 * this._currentLength : 0);\n        this._elements = [];\n        HashTable._nullOutEntries(this._elements, this._currentLength);\n    }\n    static _nullOutEntries(entries, length) {\n        for (let i = 0; i < length; i++) {\n            entries[i] = null;\n        }\n    }\n    _hash2(n1, n2) {\n        return (((n1 << 5) - n1) + n2) | 0; // n1 * 31 + n2, keep as int32\n    }\n    _hashFunc(tokenTypeIndex, tokenModifierSet, languageId) {\n        return this._hash2(this._hash2(tokenTypeIndex, tokenModifierSet), languageId) % this._currentLength;\n    }\n    get(tokenTypeIndex, tokenModifierSet, languageId) {\n        const hash = this._hashFunc(tokenTypeIndex, tokenModifierSet, languageId);\n        let p = this._elements[hash];\n        while (p) {\n            if (p.tokenTypeIndex === tokenTypeIndex && p.tokenModifierSet === tokenModifierSet && p.languageId === languageId) {\n                return p;\n            }\n            p = p.next;\n        }\n        return null;\n    }\n    add(tokenTypeIndex, tokenModifierSet, languageId, metadata) {\n        this._elementsCount++;\n        if (this._growCount !== 0 && this._elementsCount >= this._growCount) {\n            // expand!\n            const oldElements = this._elements;\n            this._currentLengthIndex++;\n            this._currentLength = HashTable._SIZES[this._currentLengthIndex];\n            this._growCount = Math.round(this._currentLengthIndex + 1 < HashTable._SIZES.length ? 2 / 3 * this._currentLength : 0);\n            this._elements = [];\n            HashTable._nullOutEntries(this._elements, this._currentLength);\n            for (const first of oldElements) {\n                let p = first;\n                while (p) {\n                    const oldNext = p.next;\n                    p.next = null;\n                    this._add(p);\n                    p = oldNext;\n                }\n            }\n        }\n        this._add(new HashTableEntry(tokenTypeIndex, tokenModifierSet, languageId, metadata));\n    }\n    _add(element) {\n        const hash = this._hashFunc(element.tokenTypeIndex, element.tokenModifierSet, element.languageId);\n        element.next = this._elements[hash];\n        this._elements[hash] = element;\n    }\n}\nHashTable._SIZES = [3, 7, 13, 31, 61, 127, 251, 509, 1021, 2039, 4093, 8191, 16381, 32749, 65521, 131071, 262139, 524287, 1048573, 2097143];\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const ISemanticTokensStylingService = createDecorator('semanticTokensStylingService');\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ILanguageService } from '../languages/language.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { SemanticTokensProviderStyling } from './semanticTokensProviderStyling.js';\nimport { ISemanticTokensStylingService } from './semanticTokensStyling.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nlet SemanticTokensStylingService = class SemanticTokensStylingService extends Disposable {\n    constructor(_themeService, _logService, _languageService) {\n        super();\n        this._themeService = _themeService;\n        this._logService = _logService;\n        this._languageService = _languageService;\n        this._caches = new WeakMap();\n        this._register(this._themeService.onDidColorThemeChange(() => {\n            this._caches = new WeakMap();\n        }));\n    }\n    getStyling(provider) {\n        if (!this._caches.has(provider)) {\n            this._caches.set(provider, new SemanticTokensProviderStyling(provider.getLegend(), this._themeService, this._languageService, this._logService));\n        }\n        return this._caches.get(provider);\n    }\n};\nSemanticTokensStylingService = __decorate([\n    __param(0, IThemeService),\n    __param(1, ILogService),\n    __param(2, ILanguageService)\n], SemanticTokensStylingService);\nexport { SemanticTokensStylingService };\nregisterSingleton(ISemanticTokensStylingService, SemanticTokensStylingService, 1 /* InstantiationType.Delayed */);\n", "import { isThenable } from './async.js';\nimport { isEqualOrParent } from './extpath.js';\nimport { LRUCache } from './map.js';\nimport { basename, extname, posix, sep } from './path.js';\nimport { isLinux } from './platform.js';\nimport { escapeRegExpCharacters, ltrim } from './strings.js';\nexport const GLOBSTAR = '**';\nexport const GLOB_SPLIT = '/';\nconst PATH_REGEX = '[/\\\\\\\\]'; // any slash or backslash\nconst NO_PATH_REGEX = '[^/\\\\\\\\]'; // any non-slash and non-backslash\nconst ALL_FORWARD_SLASHES = /\\//g;\nfunction starsToRegExp(starCount, isLastPattern) {\n    switch (starCount) {\n        case 0:\n            return '';\n        case 1:\n            return `${NO_PATH_REGEX}*?`; // 1 star matches any number of characters except path separator (/ and \\) - non greedy (?)\n        default:\n            // Matches:  (Path Sep OR Path Val followed by Path Sep) 0-many times except when it's the last pattern\n            //           in which case also matches (Path Sep followed by Path Val)\n            // Group is non capturing because we don't need to capture at all (?:...)\n            // Overall we use non-greedy matching because it could be that we match too much\n            return `(?:${PATH_REGEX}|${NO_PATH_REGEX}+${PATH_REGEX}${isLastPattern ? `|${PATH_REGEX}${NO_PATH_REGEX}+` : ''})*?`;\n    }\n}\nexport function splitGlobAware(pattern, splitChar) {\n    if (!pattern) {\n        return [];\n    }\n    const segments = [];\n    let inBraces = false;\n    let inBrackets = false;\n    let curVal = '';\n    for (const char of pattern) {\n        switch (char) {\n            case splitChar:\n                if (!inBraces && !inBrackets) {\n                    segments.push(curVal);\n                    curVal = '';\n                    continue;\n                }\n                break;\n            case '{':\n                inBraces = true;\n                break;\n            case '}':\n                inBraces = false;\n                break;\n            case '[':\n                inBrackets = true;\n                break;\n            case ']':\n                inBrackets = false;\n                break;\n        }\n        curVal += char;\n    }\n    // Tail\n    if (curVal) {\n        segments.push(curVal);\n    }\n    return segments;\n}\nfunction parseRegExp(pattern) {\n    if (!pattern) {\n        return '';\n    }\n    let regEx = '';\n    // Split up into segments for each slash found\n    const segments = splitGlobAware(pattern, GLOB_SPLIT);\n    // Special case where we only have globstars\n    if (segments.every(segment => segment === GLOBSTAR)) {\n        regEx = '.*';\n    }\n    // Build regex over segments\n    else {\n        let previousSegmentWasGlobStar = false;\n        segments.forEach((segment, index) => {\n            // Treat globstar specially\n            if (segment === GLOBSTAR) {\n                // if we have more than one globstar after another, just ignore it\n                if (previousSegmentWasGlobStar) {\n                    return;\n                }\n                regEx += starsToRegExp(2, index === segments.length - 1);\n            }\n            // Anything else, not globstar\n            else {\n                // States\n                let inBraces = false;\n                let braceVal = '';\n                let inBrackets = false;\n                let bracketVal = '';\n                for (const char of segment) {\n                    // Support brace expansion\n                    if (char !== '}' && inBraces) {\n                        braceVal += char;\n                        continue;\n                    }\n                    // Support brackets\n                    if (inBrackets && (char !== ']' || !bracketVal) /* ] is literally only allowed as first character in brackets to match it */) {\n                        let res;\n                        // range operator\n                        if (char === '-') {\n                            res = char;\n                        }\n                        // negation operator (only valid on first index in bracket)\n                        else if ((char === '^' || char === '!') && !bracketVal) {\n                            res = '^';\n                        }\n                        // glob split matching is not allowed within character ranges\n                        // see http://man7.org/linux/man-pages/man7/glob.7.html\n                        else if (char === GLOB_SPLIT) {\n                            res = '';\n                        }\n                        // anything else gets escaped\n                        else {\n                            res = escapeRegExpCharacters(char);\n                        }\n                        bracketVal += res;\n                        continue;\n                    }\n                    switch (char) {\n                        case '{':\n                            inBraces = true;\n                            continue;\n                        case '[':\n                            inBrackets = true;\n                            continue;\n                        case '}': {\n                            const choices = splitGlobAware(braceVal, ',');\n                            // Converts {foo,bar} => [foo|bar]\n                            const braceRegExp = `(?:${choices.map(choice => parseRegExp(choice)).join('|')})`;\n                            regEx += braceRegExp;\n                            inBraces = false;\n                            braceVal = '';\n                            break;\n                        }\n                        case ']': {\n                            regEx += ('[' + bracketVal + ']');\n                            inBrackets = false;\n                            bracketVal = '';\n                            break;\n                        }\n                        case '?':\n                            regEx += NO_PATH_REGEX; // 1 ? matches any single character except path separator (/ and \\)\n                            continue;\n                        case '*':\n                            regEx += starsToRegExp(1);\n                            continue;\n                        default:\n                            regEx += escapeRegExpCharacters(char);\n                    }\n                }\n                // Tail: Add the slash we had split on if there is more to\n                // come and the remaining pattern is not a globstar\n                // For example if pattern: some/**/*.js we want the \"/\" after\n                // some to be included in the RegEx to prevent a folder called\n                // \"something\" to match as well.\n                if (index < segments.length - 1 && // more segments to come after this\n                    (segments[index + 1] !== GLOBSTAR || // next segment is not **, or...\n                        index + 2 < segments.length // ...next segment is ** but there is more segments after that\n                    )) {\n                    regEx += PATH_REGEX;\n                }\n            }\n            // update globstar state\n            previousSegmentWasGlobStar = (segment === GLOBSTAR);\n        });\n    }\n    return regEx;\n}\n// regexes to check for trivial glob patterns that just check for String#endsWith\nconst T1 = /^\\*\\*\\/\\*\\.[\\w\\.-]+$/; // **/*.something\nconst T2 = /^\\*\\*\\/([\\w\\.-]+)\\/?$/; // **/something\nconst T3 = /^{\\*\\*\\/\\*?[\\w\\.-]+\\/?(,\\*\\*\\/\\*?[\\w\\.-]+\\/?)*}$/; // {**/*.something,**/*.else} or {**/package.json,**/project.json}\nconst T3_2 = /^{\\*\\*\\/\\*?[\\w\\.-]+(\\/(\\*\\*)?)?(,\\*\\*\\/\\*?[\\w\\.-]+(\\/(\\*\\*)?)?)*}$/; // Like T3, with optional trailing /**\nconst T4 = /^\\*\\*((\\/[\\w\\.-]+)+)\\/?$/; // **/something/else\nconst T5 = /^([\\w\\.-]+(\\/[\\w\\.-]+)*)\\/?$/; // something/else\nconst CACHE = new LRUCache(10000); // bounded to 10000 elements\nconst FALSE = function () {\n    return false;\n};\nconst NULL = function () {\n    return null;\n};\nfunction parsePattern(arg1, options) {\n    if (!arg1) {\n        return NULL;\n    }\n    // Handle relative patterns\n    let pattern;\n    if (typeof arg1 !== 'string') {\n        pattern = arg1.pattern;\n    }\n    else {\n        pattern = arg1;\n    }\n    // Whitespace trimming\n    pattern = pattern.trim();\n    // Check cache\n    const patternKey = `${pattern}_${!!options.trimForExclusions}`;\n    let parsedPattern = CACHE.get(patternKey);\n    if (parsedPattern) {\n        return wrapRelativePattern(parsedPattern, arg1);\n    }\n    // Check for Trivials\n    let match;\n    if (T1.test(pattern)) {\n        parsedPattern = trivia1(pattern.substr(4), pattern); // common pattern: **/*.txt just need endsWith check\n    }\n    else if (match = T2.exec(trimForExclusions(pattern, options))) { // common pattern: **/some.txt just need basename check\n        parsedPattern = trivia2(match[1], pattern);\n    }\n    else if ((options.trimForExclusions ? T3_2 : T3).test(pattern)) { // repetition of common patterns (see above) {**/*.txt,**/*.png}\n        parsedPattern = trivia3(pattern, options);\n    }\n    else if (match = T4.exec(trimForExclusions(pattern, options))) { // common pattern: **/something/else just need endsWith check\n        parsedPattern = trivia4and5(match[1].substr(1), pattern, true);\n    }\n    else if (match = T5.exec(trimForExclusions(pattern, options))) { // common pattern: something/else just need equals check\n        parsedPattern = trivia4and5(match[1], pattern, false);\n    }\n    // Otherwise convert to pattern\n    else {\n        parsedPattern = toRegExp(pattern);\n    }\n    // Cache\n    CACHE.set(patternKey, parsedPattern);\n    return wrapRelativePattern(parsedPattern, arg1);\n}\nfunction wrapRelativePattern(parsedPattern, arg2) {\n    if (typeof arg2 === 'string') {\n        return parsedPattern;\n    }\n    const wrappedPattern = function (path, basename) {\n        if (!isEqualOrParent(path, arg2.base, !isLinux)) {\n            // skip glob matching if `base` is not a parent of `path`\n            return null;\n        }\n        // Given we have checked `base` being a parent of `path`,\n        // we can now remove the `base` portion of the `path`\n        // and only match on the remaining path components\n        // For that we try to extract the portion of the `path`\n        // that comes after the `base` portion. We have to account\n        // for the fact that `base` might end in a path separator\n        // (https://github.com/microsoft/vscode/issues/162498)\n        return parsedPattern(ltrim(path.substr(arg2.base.length), sep), basename);\n    };\n    // Make sure to preserve associated metadata\n    wrappedPattern.allBasenames = parsedPattern.allBasenames;\n    wrappedPattern.allPaths = parsedPattern.allPaths;\n    wrappedPattern.basenames = parsedPattern.basenames;\n    wrappedPattern.patterns = parsedPattern.patterns;\n    return wrappedPattern;\n}\nfunction trimForExclusions(pattern, options) {\n    return options.trimForExclusions && pattern.endsWith('/**') ? pattern.substr(0, pattern.length - 2) : pattern; // dropping **, tailing / is dropped later\n}\n// common pattern: **/*.txt just need endsWith check\nfunction trivia1(base, pattern) {\n    return function (path, basename) {\n        return typeof path === 'string' && path.endsWith(base) ? pattern : null;\n    };\n}\n// common pattern: **/some.txt just need basename check\nfunction trivia2(base, pattern) {\n    const slashBase = `/${base}`;\n    const backslashBase = `\\\\${base}`;\n    const parsedPattern = function (path, basename) {\n        if (typeof path !== 'string') {\n            return null;\n        }\n        if (basename) {\n            return basename === base ? pattern : null;\n        }\n        return path === base || path.endsWith(slashBase) || path.endsWith(backslashBase) ? pattern : null;\n    };\n    const basenames = [base];\n    parsedPattern.basenames = basenames;\n    parsedPattern.patterns = [pattern];\n    parsedPattern.allBasenames = basenames;\n    return parsedPattern;\n}\n// repetition of common patterns (see above) {**/*.txt,**/*.png}\nfunction trivia3(pattern, options) {\n    const parsedPatterns = aggregateBasenameMatches(pattern.slice(1, -1)\n        .split(',')\n        .map(pattern => parsePattern(pattern, options))\n        .filter(pattern => pattern !== NULL), pattern);\n    const patternsLength = parsedPatterns.length;\n    if (!patternsLength) {\n        return NULL;\n    }\n    if (patternsLength === 1) {\n        return parsedPatterns[0];\n    }\n    const parsedPattern = function (path, basename) {\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            if (parsedPatterns[i](path, basename)) {\n                return pattern;\n            }\n        }\n        return null;\n    };\n    const withBasenames = parsedPatterns.find(pattern => !!pattern.allBasenames);\n    if (withBasenames) {\n        parsedPattern.allBasenames = withBasenames.allBasenames;\n    }\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, []);\n    if (allPaths.length) {\n        parsedPattern.allPaths = allPaths;\n    }\n    return parsedPattern;\n}\n// common patterns: **/something/else just need endsWith check, something/else just needs and equals check\nfunction trivia4and5(targetPath, pattern, matchPathEnds) {\n    const usingPosixSep = sep === posix.sep;\n    const nativePath = usingPosixSep ? targetPath : targetPath.replace(ALL_FORWARD_SLASHES, sep);\n    const nativePathEnd = sep + nativePath;\n    const targetPathEnd = posix.sep + targetPath;\n    let parsedPattern;\n    if (matchPathEnds) {\n        parsedPattern = function (path, basename) {\n            return typeof path === 'string' && ((path === nativePath || path.endsWith(nativePathEnd)) || !usingPosixSep && (path === targetPath || path.endsWith(targetPathEnd))) ? pattern : null;\n        };\n    }\n    else {\n        parsedPattern = function (path, basename) {\n            return typeof path === 'string' && (path === nativePath || (!usingPosixSep && path === targetPath)) ? pattern : null;\n        };\n    }\n    parsedPattern.allPaths = [(matchPathEnds ? '*/' : './') + targetPath];\n    return parsedPattern;\n}\nfunction toRegExp(pattern) {\n    try {\n        const regExp = new RegExp(`^${parseRegExp(pattern)}$`);\n        return function (path) {\n            regExp.lastIndex = 0; // reset RegExp to its initial state to reuse it!\n            return typeof path === 'string' && regExp.test(path) ? pattern : null;\n        };\n    }\n    catch (error) {\n        return NULL;\n    }\n}\nexport function match(arg1, path, hasSibling) {\n    if (!arg1 || typeof path !== 'string') {\n        return false;\n    }\n    return parse(arg1)(path, undefined, hasSibling);\n}\nexport function parse(arg1, options = {}) {\n    if (!arg1) {\n        return FALSE;\n    }\n    // Glob with String\n    if (typeof arg1 === 'string' || isRelativePattern(arg1)) {\n        const parsedPattern = parsePattern(arg1, options);\n        if (parsedPattern === NULL) {\n            return FALSE;\n        }\n        const resultPattern = function (path, basename) {\n            return !!parsedPattern(path, basename);\n        };\n        if (parsedPattern.allBasenames) {\n            resultPattern.allBasenames = parsedPattern.allBasenames;\n        }\n        if (parsedPattern.allPaths) {\n            resultPattern.allPaths = parsedPattern.allPaths;\n        }\n        return resultPattern;\n    }\n    // Glob with Expression\n    return parsedExpression(arg1, options);\n}\nexport function isRelativePattern(obj) {\n    const rp = obj;\n    if (!rp) {\n        return false;\n    }\n    return typeof rp.base === 'string' && typeof rp.pattern === 'string';\n}\nfunction parsedExpression(expression, options) {\n    const parsedPatterns = aggregateBasenameMatches(Object.getOwnPropertyNames(expression)\n        .map(pattern => parseExpressionPattern(pattern, expression[pattern], options))\n        .filter(pattern => pattern !== NULL));\n    const patternsLength = parsedPatterns.length;\n    if (!patternsLength) {\n        return NULL;\n    }\n    if (!parsedPatterns.some(parsedPattern => !!parsedPattern.requiresSiblings)) {\n        if (patternsLength === 1) {\n            return parsedPatterns[0];\n        }\n        const resultExpression = function (path, basename) {\n            let resultPromises = undefined;\n            for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n                const result = parsedPatterns[i](path, basename);\n                if (typeof result === 'string') {\n                    return result; // immediately return as soon as the first expression matches\n                }\n                // If the result is a promise, we have to keep it for\n                // later processing and await the result properly.\n                if (isThenable(result)) {\n                    if (!resultPromises) {\n                        resultPromises = [];\n                    }\n                    resultPromises.push(result);\n                }\n            }\n            // With result promises, we have to loop over each and\n            // await the result before we can return any result.\n            if (resultPromises) {\n                return (async () => {\n                    for (const resultPromise of resultPromises) {\n                        const result = await resultPromise;\n                        if (typeof result === 'string') {\n                            return result;\n                        }\n                    }\n                    return null;\n                })();\n            }\n            return null;\n        };\n        const withBasenames = parsedPatterns.find(pattern => !!pattern.allBasenames);\n        if (withBasenames) {\n            resultExpression.allBasenames = withBasenames.allBasenames;\n        }\n        const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, []);\n        if (allPaths.length) {\n            resultExpression.allPaths = allPaths;\n        }\n        return resultExpression;\n    }\n    const resultExpression = function (path, base, hasSibling) {\n        let name = undefined;\n        let resultPromises = undefined;\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            // Pattern matches path\n            const parsedPattern = parsedPatterns[i];\n            if (parsedPattern.requiresSiblings && hasSibling) {\n                if (!base) {\n                    base = basename(path);\n                }\n                if (!name) {\n                    name = base.substr(0, base.length - extname(path).length);\n                }\n            }\n            const result = parsedPattern(path, base, name, hasSibling);\n            if (typeof result === 'string') {\n                return result; // immediately return as soon as the first expression matches\n            }\n            // If the result is a promise, we have to keep it for\n            // later processing and await the result properly.\n            if (isThenable(result)) {\n                if (!resultPromises) {\n                    resultPromises = [];\n                }\n                resultPromises.push(result);\n            }\n        }\n        // With result promises, we have to loop over each and\n        // await the result before we can return any result.\n        if (resultPromises) {\n            return (async () => {\n                for (const resultPromise of resultPromises) {\n                    const result = await resultPromise;\n                    if (typeof result === 'string') {\n                        return result;\n                    }\n                }\n                return null;\n            })();\n        }\n        return null;\n    };\n    const withBasenames = parsedPatterns.find(pattern => !!pattern.allBasenames);\n    if (withBasenames) {\n        resultExpression.allBasenames = withBasenames.allBasenames;\n    }\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, []);\n    if (allPaths.length) {\n        resultExpression.allPaths = allPaths;\n    }\n    return resultExpression;\n}\nfunction parseExpressionPattern(pattern, value, options) {\n    if (value === false) {\n        return NULL; // pattern is disabled\n    }\n    const parsedPattern = parsePattern(pattern, options);\n    if (parsedPattern === NULL) {\n        return NULL;\n    }\n    // Expression Pattern is <boolean>\n    if (typeof value === 'boolean') {\n        return parsedPattern;\n    }\n    // Expression Pattern is <SiblingClause>\n    if (value) {\n        const when = value.when;\n        if (typeof when === 'string') {\n            const result = (path, basename, name, hasSibling) => {\n                if (!hasSibling || !parsedPattern(path, basename)) {\n                    return null;\n                }\n                const clausePattern = when.replace('$(basename)', () => name);\n                const matched = hasSibling(clausePattern);\n                return isThenable(matched) ?\n                    matched.then(match => match ? pattern : null) :\n                    matched ? pattern : null;\n            };\n            result.requiresSiblings = true;\n            return result;\n        }\n    }\n    // Expression is anything\n    return parsedPattern;\n}\nfunction aggregateBasenameMatches(parsedPatterns, result) {\n    const basenamePatterns = parsedPatterns.filter(parsedPattern => !!parsedPattern.basenames);\n    if (basenamePatterns.length < 2) {\n        return parsedPatterns;\n    }\n    const basenames = basenamePatterns.reduce((all, current) => {\n        const basenames = current.basenames;\n        return basenames ? all.concat(basenames) : all;\n    }, []);\n    let patterns;\n    if (result) {\n        patterns = [];\n        for (let i = 0, n = basenames.length; i < n; i++) {\n            patterns.push(result);\n        }\n    }\n    else {\n        patterns = basenamePatterns.reduce((all, current) => {\n            const patterns = current.patterns;\n            return patterns ? all.concat(patterns) : all;\n        }, []);\n    }\n    const aggregate = function (path, basename) {\n        if (typeof path !== 'string') {\n            return null;\n        }\n        if (!basename) {\n            let i;\n            for (i = path.length; i > 0; i--) {\n                const ch = path.charCodeAt(i - 1);\n                if (ch === 47 /* CharCode.Slash */ || ch === 92 /* CharCode.Backslash */) {\n                    break;\n                }\n            }\n            basename = path.substr(i);\n        }\n        const index = basenames.indexOf(basename);\n        return index !== -1 ? patterns[index] : null;\n    };\n    aggregate.basenames = basenames;\n    aggregate.patterns = patterns;\n    aggregate.allBasenames = basenames;\n    const aggregatedPatterns = parsedPatterns.filter(parsedPattern => !parsedPattern.basenames);\n    aggregatedPatterns.push(aggregate);\n    return aggregatedPatterns;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { match as matchGlobPattern } from '../../base/common/glob.js';\nimport { normalize } from '../../base/common/path.js';\nexport function score(selector, candidateUri, candidateLanguage, candidateIsSynchronized, candidateNotebookUri, candidateNotebookType) {\n    if (Array.isArray(selector)) {\n        // array -> take max individual value\n        let ret = 0;\n        for (const filter of selector) {\n            const value = score(filter, candidateUri, candidateLanguage, candidateIsSynchronized, candidateNotebookUri, candidateNotebookType);\n            if (value === 10) {\n                return value; // already at the highest\n            }\n            if (value > ret) {\n                ret = value;\n            }\n        }\n        return ret;\n    }\n    else if (typeof selector === 'string') {\n        if (!candidateIsSynchronized) {\n            return 0;\n        }\n        // short-hand notion, desugars to\n        // 'fooLang' -> { language: 'fooLang'}\n        // '*' -> { language: '*' }\n        if (selector === '*') {\n            return 5;\n        }\n        else if (selector === candidateLanguage) {\n            return 10;\n        }\n        else {\n            return 0;\n        }\n    }\n    else if (selector) {\n        // filter -> select accordingly, use defaults for scheme\n        const { language, pattern, scheme, hasAccessToAllModels, notebookType } = selector; // TODO: microsoft/TypeScript#42768\n        if (!candidateIsSynchronized && !hasAccessToAllModels) {\n            return 0;\n        }\n        // selector targets a notebook -> use the notebook uri instead\n        // of the \"normal\" document uri.\n        if (notebookType && candidateNotebookUri) {\n            candidateUri = candidateNotebookUri;\n        }\n        let ret = 0;\n        if (scheme) {\n            if (scheme === candidateUri.scheme) {\n                ret = 10;\n            }\n            else if (scheme === '*') {\n                ret = 5;\n            }\n            else {\n                return 0;\n            }\n        }\n        if (language) {\n            if (language === candidateLanguage) {\n                ret = 10;\n            }\n            else if (language === '*') {\n                ret = Math.max(ret, 5);\n            }\n            else {\n                return 0;\n            }\n        }\n        if (notebookType) {\n            if (notebookType === candidateNotebookType) {\n                ret = 10;\n            }\n            else if (notebookType === '*' && candidateNotebookType !== undefined) {\n                ret = Math.max(ret, 5);\n            }\n            else {\n                return 0;\n            }\n        }\n        if (pattern) {\n            let normalizedPattern;\n            if (typeof pattern === 'string') {\n                normalizedPattern = pattern;\n            }\n            else {\n                // Since this pattern has a `base` property, we need\n                // to normalize this path first before passing it on\n                // because we will compare it against `Uri.fsPath`\n                // which uses platform specific separators.\n                // Refs: https://github.com/microsoft/vscode/issues/99938\n                normalizedPattern = { ...pattern, base: normalize(pattern.base) };\n            }\n            if (normalizedPattern === candidateUri.fsPath || matchGlobPattern(normalizedPattern, candidateUri.fsPath)) {\n                ret = 10;\n            }\n            else {\n                return 0;\n            }\n        }\n        return ret;\n    }\n    else {\n        return 0;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../base/common/event.js';\nimport { toDisposable } from '../../base/common/lifecycle.js';\nimport { shouldSynchronizeModel } from './model.js';\nimport { score } from './languageSelector.js';\nfunction isExclusive(selector) {\n    if (typeof selector === 'string') {\n        return false;\n    }\n    else if (Array.isArray(selector)) {\n        return selector.every(isExclusive);\n    }\n    else {\n        return !!selector.exclusive; // TODO: microsoft/TypeScript#42768\n    }\n}\nclass MatchCandidate {\n    constructor(uri, languageId, notebookUri, notebookType) {\n        this.uri = uri;\n        this.languageId = languageId;\n        this.notebookUri = notebookUri;\n        this.notebookType = notebookType;\n    }\n    equals(other) {\n        var _a, _b;\n        return this.notebookType === other.notebookType\n            && this.languageId === other.languageId\n            && this.uri.toString() === other.uri.toString()\n            && ((_a = this.notebookUri) === null || _a === void 0 ? void 0 : _a.toString()) === ((_b = other.notebookUri) === null || _b === void 0 ? void 0 : _b.toString());\n    }\n}\nexport class LanguageFeatureRegistry {\n    constructor(_notebookInfoResolver) {\n        this._notebookInfoResolver = _notebookInfoResolver;\n        this._clock = 0;\n        this._entries = [];\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n    }\n    register(selector, provider) {\n        let entry = {\n            selector,\n            provider,\n            _score: -1,\n            _time: this._clock++\n        };\n        this._entries.push(entry);\n        this._lastCandidate = undefined;\n        this._onDidChange.fire(this._entries.length);\n        return toDisposable(() => {\n            if (entry) {\n                const idx = this._entries.indexOf(entry);\n                if (idx >= 0) {\n                    this._entries.splice(idx, 1);\n                    this._lastCandidate = undefined;\n                    this._onDidChange.fire(this._entries.length);\n                    entry = undefined;\n                }\n            }\n        });\n    }\n    has(model) {\n        return this.all(model).length > 0;\n    }\n    all(model) {\n        if (!model) {\n            return [];\n        }\n        this._updateScores(model);\n        const result = [];\n        // from registry\n        for (const entry of this._entries) {\n            if (entry._score > 0) {\n                result.push(entry.provider);\n            }\n        }\n        return result;\n    }\n    ordered(model) {\n        const result = [];\n        this._orderedForEach(model, entry => result.push(entry.provider));\n        return result;\n    }\n    orderedGroups(model) {\n        const result = [];\n        let lastBucket;\n        let lastBucketScore;\n        this._orderedForEach(model, entry => {\n            if (lastBucket && lastBucketScore === entry._score) {\n                lastBucket.push(entry.provider);\n            }\n            else {\n                lastBucketScore = entry._score;\n                lastBucket = [entry.provider];\n                result.push(lastBucket);\n            }\n        });\n        return result;\n    }\n    _orderedForEach(model, callback) {\n        this._updateScores(model);\n        for (const entry of this._entries) {\n            if (entry._score > 0) {\n                callback(entry);\n            }\n        }\n    }\n    _updateScores(model) {\n        var _a, _b;\n        const notebookInfo = (_a = this._notebookInfoResolver) === null || _a === void 0 ? void 0 : _a.call(this, model.uri);\n        // use the uri (scheme, pattern) of the notebook info iff we have one\n        // otherwise it's the model's/document's uri\n        const candidate = notebookInfo\n            ? new MatchCandidate(model.uri, model.getLanguageId(), notebookInfo.uri, notebookInfo.type)\n            : new MatchCandidate(model.uri, model.getLanguageId(), undefined, undefined);\n        if ((_b = this._lastCandidate) === null || _b === void 0 ? void 0 : _b.equals(candidate)) {\n            // nothing has changed\n            return;\n        }\n        this._lastCandidate = candidate;\n        for (const entry of this._entries) {\n            entry._score = score(entry.selector, candidate.uri, candidate.languageId, shouldSynchronizeModel(model), candidate.notebookUri, candidate.notebookType);\n            if (isExclusive(entry.selector) && entry._score > 0) {\n                // support for one exclusive selector that overwrites\n                // any other selector\n                for (const entry of this._entries) {\n                    entry._score = 0;\n                }\n                entry._score = 1000;\n                break;\n            }\n        }\n        // needs sorting\n        this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime);\n    }\n    static _compareByScoreAndTime(a, b) {\n        if (a._score < b._score) {\n            return 1;\n        }\n        else if (a._score > b._score) {\n            return -1;\n        }\n        // De-prioritize built-in providers\n        if (isBuiltinSelector(a.selector) && !isBuiltinSelector(b.selector)) {\n            return 1;\n        }\n        else if (!isBuiltinSelector(a.selector) && isBuiltinSelector(b.selector)) {\n            return -1;\n        }\n        if (a._time < b._time) {\n            return 1;\n        }\n        else if (a._time > b._time) {\n            return -1;\n        }\n        else {\n            return 0;\n        }\n    }\n}\nfunction isBuiltinSelector(selector) {\n    if (typeof selector === 'string') {\n        return false;\n    }\n    if (Array.isArray(selector)) {\n        return selector.some(isBuiltinSelector);\n    }\n    return Boolean(selector.isBuiltin);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LanguageFeatureRegistry } from '../languageFeatureRegistry.js';\nimport { ILanguageFeaturesService } from './languageFeatures.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nexport class LanguageFeaturesService {\n    constructor() {\n        this.referenceProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.renameProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.codeActionProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.definitionProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.typeDefinitionProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.declarationProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.implementationProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentSymbolProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.inlayHintsProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.colorProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.codeLensProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentFormattingEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentRangeFormattingEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.onTypeFormattingEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.signatureHelpProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.hoverProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentHighlightProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.multiDocumentHighlightProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.selectionRangeProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.foldingRangeProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.linkProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.inlineCompletionsProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.completionProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.linkedEditingRangeProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentRangeSemanticTokensProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentSemanticTokensProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentOnDropEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\n        this.documentPasteEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\n    }\n    _score(uri) {\n        var _a;\n        return (_a = this._notebookTypeResolver) === null || _a === void 0 ? void 0 : _a.call(this, uri);\n    }\n}\nregisterSingleton(ILanguageFeaturesService, LanguageFeaturesService, 1 /* InstantiationType.Delayed */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const diffEditorDefaultOptions = {\n    enableSplitViewResizing: true,\n    splitViewDefaultRatio: 0.5,\n    renderSideBySide: true,\n    renderMarginRevertIcon: true,\n    maxComputationTime: 5000,\n    maxFileSize: 50,\n    ignoreTrimWhitespace: true,\n    renderIndicators: true,\n    originalEditable: false,\n    diffCodeLens: false,\n    renderOverviewRuler: true,\n    diffWordWrap: 'inherit',\n    diffAlgorithm: 'advanced',\n    accessibilityVerbose: false,\n    experimental: {\n        showMoves: false,\n        showEmptyDecorations: true,\n    },\n    hideUnchangedRegions: {\n        enabled: false,\n        contextLineCount: 3,\n        minimumLineCount: 3,\n        revealLineCount: 20,\n    },\n    isInEmbeddedEditor: false,\n    onlyShowAccessibleDiffViewer: false,\n    renderSideBySideInlineBreakpoint: 900,\n    useInlineViewWhenSpaceIsLimited: true,\n};\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { diffEditorDefaultOptions } from './diffEditor.js';\nimport { editorOptionsRegistry } from './editorOptions.js';\nimport { EDITOR_MODEL_DEFAULTS } from '../core/textModelDefaults.js';\nimport * as nls from '../../../nls.js';\nimport { Extensions } from '../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nexport const editorConfigurationBaseNode = Object.freeze({\n    id: 'editor',\n    order: 5,\n    type: 'object',\n    title: nls.localize('editorConfigurationTitle', \"Editor\"),\n    scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n});\nconst editorConfiguration = {\n    ...editorConfigurationBaseNode,\n    properties: {\n        'editor.tabSize': {\n            type: 'number',\n            default: EDITOR_MODEL_DEFAULTS.tabSize,\n            minimum: 1,\n            markdownDescription: nls.localize('tabSize', \"The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.\", '`#editor.detectIndentation#`')\n        },\n        'editor.indentSize': {\n            'anyOf': [\n                {\n                    type: 'string',\n                    enum: ['tabSize']\n                },\n                {\n                    type: 'number',\n                    minimum: 1\n                }\n            ],\n            default: 'tabSize',\n            markdownDescription: nls.localize('indentSize', \"The number of spaces used for indentation or `\\\"tabSize\\\"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.\")\n        },\n        'editor.insertSpaces': {\n            type: 'boolean',\n            default: EDITOR_MODEL_DEFAULTS.insertSpaces,\n            markdownDescription: nls.localize('insertSpaces', \"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.\", '`#editor.detectIndentation#`')\n        },\n        'editor.detectIndentation': {\n            type: 'boolean',\n            default: EDITOR_MODEL_DEFAULTS.detectIndentation,\n            markdownDescription: nls.localize('detectIndentation', \"Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.\", '`#editor.tabSize#`', '`#editor.insertSpaces#`')\n        },\n        'editor.trimAutoWhitespace': {\n            type: 'boolean',\n            default: EDITOR_MODEL_DEFAULTS.trimAutoWhitespace,\n            description: nls.localize('trimAutoWhitespace', \"Remove trailing auto inserted whitespace.\")\n        },\n        'editor.largeFileOptimizations': {\n            type: 'boolean',\n            default: EDITOR_MODEL_DEFAULTS.largeFileOptimizations,\n            description: nls.localize('largeFileOptimizations', \"Special handling for large files to disable certain memory intensive features.\")\n        },\n        'editor.wordBasedSuggestions': {\n            enum: ['off', 'currentDocument', 'matchingDocuments', 'allDocuments'],\n            default: 'matchingDocuments',\n            enumDescriptions: [\n                nls.localize('wordBasedSuggestions.off', 'Turn off Word Based Suggestions.'),\n                nls.localize('wordBasedSuggestions.currentDocument', 'Only suggest words from the active document.'),\n                nls.localize('wordBasedSuggestions.matchingDocuments', 'Suggest words from all open documents of the same language.'),\n                nls.localize('wordBasedSuggestions.allDocuments', 'Suggest words from all open documents.')\n            ],\n            description: nls.localize('wordBasedSuggestions', \"Controls whether completions should be computed based on words in the document and from which documents they are computed.\")\n        },\n        'editor.semanticHighlighting.enabled': {\n            enum: [true, false, 'configuredByTheme'],\n            enumDescriptions: [\n                nls.localize('semanticHighlighting.true', 'Semantic highlighting enabled for all color themes.'),\n                nls.localize('semanticHighlighting.false', 'Semantic highlighting disabled for all color themes.'),\n                nls.localize('semanticHighlighting.configuredByTheme', 'Semantic highlighting is configured by the current color theme\\'s `semanticHighlighting` setting.')\n            ],\n            default: 'configuredByTheme',\n            description: nls.localize('semanticHighlighting.enabled', \"Controls whether the semanticHighlighting is shown for the languages that support it.\")\n        },\n        'editor.stablePeek': {\n            type: 'boolean',\n            default: false,\n            markdownDescription: nls.localize('stablePeek', \"Keep peek editors open even when double-clicking their content or when hitting `Escape`.\")\n        },\n        'editor.maxTokenizationLineLength': {\n            type: 'integer',\n            default: 20000,\n            description: nls.localize('maxTokenizationLineLength', \"Lines above this length will not be tokenized for performance reasons\")\n        },\n        'editor.experimental.asyncTokenization': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('editor.experimental.asyncTokenization', \"Controls whether the tokenization should happen asynchronously on a web worker.\"),\n            tags: ['experimental'],\n        },\n        'editor.experimental.asyncTokenizationLogging': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('editor.experimental.asyncTokenizationLogging', \"Controls whether async tokenization should be logged. For debugging only.\"),\n        },\n        'editor.experimental.asyncTokenizationVerification': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('editor.experimental.asyncTokenizationVerification', \"Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only.\"),\n            tags: ['experimental'],\n        },\n        'editor.language.brackets': {\n            type: ['array', 'null'],\n            default: null, // We want to distinguish the empty array from not configured.\n            description: nls.localize('schema.brackets', 'Defines the bracket symbols that increase or decrease the indentation.'),\n            items: {\n                type: 'array',\n                items: [\n                    {\n                        type: 'string',\n                        description: nls.localize('schema.openBracket', 'The opening bracket character or string sequence.')\n                    },\n                    {\n                        type: 'string',\n                        description: nls.localize('schema.closeBracket', 'The closing bracket character or string sequence.')\n                    }\n                ]\n            }\n        },\n        'editor.language.colorizedBracketPairs': {\n            type: ['array', 'null'],\n            default: null, // We want to distinguish the empty array from not configured.\n            description: nls.localize('schema.colorizedBracketPairs', 'Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled.'),\n            items: {\n                type: 'array',\n                items: [\n                    {\n                        type: 'string',\n                        description: nls.localize('schema.openBracket', 'The opening bracket character or string sequence.')\n                    },\n                    {\n                        type: 'string',\n                        description: nls.localize('schema.closeBracket', 'The closing bracket character or string sequence.')\n                    }\n                ]\n            }\n        },\n        'diffEditor.maxComputationTime': {\n            type: 'number',\n            default: diffEditorDefaultOptions.maxComputationTime,\n            description: nls.localize('maxComputationTime', \"Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.\")\n        },\n        'diffEditor.maxFileSize': {\n            type: 'number',\n            default: diffEditorDefaultOptions.maxFileSize,\n            description: nls.localize('maxFileSize', \"Maximum file size in MB for which to compute diffs. Use 0 for no limit.\")\n        },\n        'diffEditor.renderSideBySide': {\n            type: 'boolean',\n            default: diffEditorDefaultOptions.renderSideBySide,\n            description: nls.localize('sideBySide', \"Controls whether the diff editor shows the diff side by side or inline.\")\n        },\n        'diffEditor.renderSideBySideInlineBreakpoint': {\n            type: 'number',\n            default: diffEditorDefaultOptions.renderSideBySideInlineBreakpoint,\n            description: nls.localize('renderSideBySideInlineBreakpoint', \"If the diff editor width is smaller than this value, the inline view is used.\")\n        },\n        'diffEditor.useInlineViewWhenSpaceIsLimited': {\n            type: 'boolean',\n            default: diffEditorDefaultOptions.useInlineViewWhenSpaceIsLimited,\n            description: nls.localize('useInlineViewWhenSpaceIsLimited', \"If enabled and the editor width is too small, the inline view is used.\")\n        },\n        'diffEditor.renderMarginRevertIcon': {\n            type: 'boolean',\n            default: diffEditorDefaultOptions.renderMarginRevertIcon,\n            description: nls.localize('renderMarginRevertIcon', \"When enabled, the diff editor shows arrows in its glyph margin to revert changes.\")\n        },\n        'diffEditor.ignoreTrimWhitespace': {\n            type: 'boolean',\n            default: diffEditorDefaultOptions.ignoreTrimWhitespace,\n            description: nls.localize('ignoreTrimWhitespace', \"When enabled, the diff editor ignores changes in leading or trailing whitespace.\")\n        },\n        'diffEditor.renderIndicators': {\n            type: 'boolean',\n            default: diffEditorDefaultOptions.renderIndicators,\n            description: nls.localize('renderIndicators', \"Controls whether the diff editor shows +/- indicators for added/removed changes.\")\n        },\n        'diffEditor.codeLens': {\n            type: 'boolean',\n            default: diffEditorDefaultOptions.diffCodeLens,\n            description: nls.localize('codeLens', \"Controls whether the editor shows CodeLens.\")\n        },\n        'diffEditor.wordWrap': {\n            type: 'string',\n            enum: ['off', 'on', 'inherit'],\n            default: diffEditorDefaultOptions.diffWordWrap,\n            markdownEnumDescriptions: [\n                nls.localize('wordWrap.off', \"Lines will never wrap.\"),\n                nls.localize('wordWrap.on', \"Lines will wrap at the viewport width.\"),\n                nls.localize('wordWrap.inherit', \"Lines will wrap according to the {0} setting.\", '`#editor.wordWrap#`'),\n            ]\n        },\n        'diffEditor.diffAlgorithm': {\n            type: 'string',\n            enum: ['legacy', 'advanced'],\n            default: diffEditorDefaultOptions.diffAlgorithm,\n            markdownEnumDescriptions: [\n                nls.localize('diffAlgorithm.legacy', \"Uses the legacy diffing algorithm.\"),\n                nls.localize('diffAlgorithm.advanced', \"Uses the advanced diffing algorithm.\"),\n            ],\n            tags: ['experimental'],\n        },\n        'diffEditor.hideUnchangedRegions.enabled': {\n            type: 'boolean',\n            default: diffEditorDefaultOptions.hideUnchangedRegions.enabled,\n            markdownDescription: nls.localize('hideUnchangedRegions.enabled', \"Controls whether the diff editor shows unchanged regions.\"),\n        },\n        'diffEditor.hideUnchangedRegions.revealLineCount': {\n            type: 'integer',\n            default: diffEditorDefaultOptions.hideUnchangedRegions.revealLineCount,\n            markdownDescription: nls.localize('hideUnchangedRegions.revealLineCount', \"Controls how many lines are used for unchanged regions.\"),\n            minimum: 1,\n        },\n        'diffEditor.hideUnchangedRegions.minimumLineCount': {\n            type: 'integer',\n            default: diffEditorDefaultOptions.hideUnchangedRegions.minimumLineCount,\n            markdownDescription: nls.localize('hideUnchangedRegions.minimumLineCount', \"Controls how many lines are used as a minimum for unchanged regions.\"),\n            minimum: 1,\n        },\n        'diffEditor.hideUnchangedRegions.contextLineCount': {\n            type: 'integer',\n            default: diffEditorDefaultOptions.hideUnchangedRegions.contextLineCount,\n            markdownDescription: nls.localize('hideUnchangedRegions.contextLineCount', \"Controls how many lines are used as context when comparing unchanged regions.\"),\n            minimum: 1,\n        },\n        'diffEditor.experimental.showMoves': {\n            type: 'boolean',\n            default: diffEditorDefaultOptions.experimental.showMoves,\n            markdownDescription: nls.localize('showMoves', \"Controls whether the diff editor should show detected code moves.\")\n        },\n        'diffEditor.experimental.showEmptyDecorations': {\n            type: 'boolean',\n            default: diffEditorDefaultOptions.experimental.showEmptyDecorations,\n            description: nls.localize('showEmptyDecorations', \"Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.\"),\n        }\n    }\n};\nfunction isConfigurationPropertySchema(x) {\n    return (typeof x.type !== 'undefined' || typeof x.anyOf !== 'undefined');\n}\n// Add properties from the Editor Option Registry\nfor (const editorOption of editorOptionsRegistry) {\n    const schema = editorOption.schema;\n    if (typeof schema !== 'undefined') {\n        if (isConfigurationPropertySchema(schema)) {\n            // This is a single schema contribution\n            editorConfiguration.properties[`editor.${editorOption.name}`] = schema;\n        }\n        else {\n            for (const key in schema) {\n                if (Object.hasOwnProperty.call(schema, key)) {\n                    editorConfiguration.properties[key] = schema[key];\n                }\n            }\n        }\n    }\n}\nlet cachedEditorConfigurationKeys = null;\nfunction getEditorConfigurationKeys() {\n    if (cachedEditorConfigurationKeys === null) {\n        cachedEditorConfigurationKeys = Object.create(null);\n        Object.keys(editorConfiguration.properties).forEach((prop) => {\n            cachedEditorConfigurationKeys[prop] = true;\n        });\n    }\n    return cachedEditorConfigurationKeys;\n}\nexport function isEditorConfigurationKey(key) {\n    const editorConfigurationKeys = getEditorConfigurationKeys();\n    return (editorConfigurationKeys[`editor.${key}`] || false);\n}\nexport function isDiffEditorConfigurationKey(key) {\n    const editorConfigurationKeys = getEditorConfigurationKeys();\n    return (editorConfigurationKeys[`diffEditor.${key}`] || false);\n}\nconst configurationRegistry = Registry.as(Extensions.Configuration);\nconfigurationRegistry.registerConfiguration(editorConfiguration);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as arrays from '../../../base/common/arrays.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport * as objects from '../../../base/common/objects.js';\nimport * as types from '../../../base/common/types.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { addToValueTree, getConfigurationValue, removeFromValueTree, toValuesTree } from './configuration.js';\nimport { Extensions, overrideIdentifiersFromKey, OVERRIDE_PROPERTY_REGEX } from './configurationRegistry.js';\nimport { Registry } from '../../registry/common/platform.js';\nfunction freeze(data) {\n    return Object.isFrozen(data) ? data : objects.deepFreeze(data);\n}\nexport class ConfigurationModel {\n    constructor(_contents = {}, _keys = [], _overrides = [], raw) {\n        this._contents = _contents;\n        this._keys = _keys;\n        this._overrides = _overrides;\n        this.raw = raw;\n        this.overrideConfigurations = new Map();\n    }\n    get rawConfiguration() {\n        var _a;\n        if (!this._rawConfiguration) {\n            if ((_a = this.raw) === null || _a === void 0 ? void 0 : _a.length) {\n                const rawConfigurationModels = this.raw.map(raw => {\n                    if (raw instanceof ConfigurationModel) {\n                        return raw;\n                    }\n                    const parser = new ConfigurationModelParser('');\n                    parser.parseRaw(raw);\n                    return parser.configurationModel;\n                });\n                this._rawConfiguration = rawConfigurationModels.reduce((previous, current) => current === previous ? current : previous.merge(current), rawConfigurationModels[0]);\n            }\n            else {\n                // raw is same as current\n                this._rawConfiguration = this;\n            }\n        }\n        return this._rawConfiguration;\n    }\n    get contents() {\n        return this._contents;\n    }\n    get overrides() {\n        return this._overrides;\n    }\n    get keys() {\n        return this._keys;\n    }\n    isEmpty() {\n        return this._keys.length === 0 && Object.keys(this._contents).length === 0 && this._overrides.length === 0;\n    }\n    getValue(section) {\n        return section ? getConfigurationValue(this.contents, section) : this.contents;\n    }\n    inspect(section, overrideIdentifier) {\n        const value = this.rawConfiguration.getValue(section);\n        const override = overrideIdentifier ? this.rawConfiguration.getOverrideValue(section, overrideIdentifier) : undefined;\n        const merged = overrideIdentifier ? this.rawConfiguration.override(overrideIdentifier).getValue(section) : value;\n        return { value, override, merged };\n    }\n    getOverrideValue(section, overrideIdentifier) {\n        const overrideContents = this.getContentsForOverrideIdentifer(overrideIdentifier);\n        return overrideContents\n            ? section ? getConfigurationValue(overrideContents, section) : overrideContents\n            : undefined;\n    }\n    override(identifier) {\n        let overrideConfigurationModel = this.overrideConfigurations.get(identifier);\n        if (!overrideConfigurationModel) {\n            overrideConfigurationModel = this.createOverrideConfigurationModel(identifier);\n            this.overrideConfigurations.set(identifier, overrideConfigurationModel);\n        }\n        return overrideConfigurationModel;\n    }\n    merge(...others) {\n        var _a, _b;\n        const contents = objects.deepClone(this.contents);\n        const overrides = objects.deepClone(this.overrides);\n        const keys = [...this.keys];\n        const raws = ((_a = this.raw) === null || _a === void 0 ? void 0 : _a.length) ? [...this.raw] : [this];\n        for (const other of others) {\n            raws.push(...(((_b = other.raw) === null || _b === void 0 ? void 0 : _b.length) ? other.raw : [other]));\n            if (other.isEmpty()) {\n                continue;\n            }\n            this.mergeContents(contents, other.contents);\n            for (const otherOverride of other.overrides) {\n                const [override] = overrides.filter(o => arrays.equals(o.identifiers, otherOverride.identifiers));\n                if (override) {\n                    this.mergeContents(override.contents, otherOverride.contents);\n                    override.keys.push(...otherOverride.keys);\n                    override.keys = arrays.distinct(override.keys);\n                }\n                else {\n                    overrides.push(objects.deepClone(otherOverride));\n                }\n            }\n            for (const key of other.keys) {\n                if (keys.indexOf(key) === -1) {\n                    keys.push(key);\n                }\n            }\n        }\n        return new ConfigurationModel(contents, keys, overrides, raws.every(raw => raw instanceof ConfigurationModel) ? undefined : raws);\n    }\n    createOverrideConfigurationModel(identifier) {\n        const overrideContents = this.getContentsForOverrideIdentifer(identifier);\n        if (!overrideContents || typeof overrideContents !== 'object' || !Object.keys(overrideContents).length) {\n            // If there are no valid overrides, return self\n            return this;\n        }\n        const contents = {};\n        for (const key of arrays.distinct([...Object.keys(this.contents), ...Object.keys(overrideContents)])) {\n            let contentsForKey = this.contents[key];\n            const overrideContentsForKey = overrideContents[key];\n            // If there are override contents for the key, clone and merge otherwise use base contents\n            if (overrideContentsForKey) {\n                // Clone and merge only if base contents and override contents are of type object otherwise just override\n                if (typeof contentsForKey === 'object' && typeof overrideContentsForKey === 'object') {\n                    contentsForKey = objects.deepClone(contentsForKey);\n                    this.mergeContents(contentsForKey, overrideContentsForKey);\n                }\n                else {\n                    contentsForKey = overrideContentsForKey;\n                }\n            }\n            contents[key] = contentsForKey;\n        }\n        return new ConfigurationModel(contents, this.keys, this.overrides);\n    }\n    mergeContents(source, target) {\n        for (const key of Object.keys(target)) {\n            if (key in source) {\n                if (types.isObject(source[key]) && types.isObject(target[key])) {\n                    this.mergeContents(source[key], target[key]);\n                    continue;\n                }\n            }\n            source[key] = objects.deepClone(target[key]);\n        }\n    }\n    getContentsForOverrideIdentifer(identifier) {\n        let contentsForIdentifierOnly = null;\n        let contents = null;\n        const mergeContents = (contentsToMerge) => {\n            if (contentsToMerge) {\n                if (contents) {\n                    this.mergeContents(contents, contentsToMerge);\n                }\n                else {\n                    contents = objects.deepClone(contentsToMerge);\n                }\n            }\n        };\n        for (const override of this.overrides) {\n            if (override.identifiers.length === 1 && override.identifiers[0] === identifier) {\n                contentsForIdentifierOnly = override.contents;\n            }\n            else if (override.identifiers.includes(identifier)) {\n                mergeContents(override.contents);\n            }\n        }\n        // Merge contents of the identifier only at the end to take precedence.\n        mergeContents(contentsForIdentifierOnly);\n        return contents;\n    }\n    toJSON() {\n        return {\n            contents: this.contents,\n            overrides: this.overrides,\n            keys: this.keys\n        };\n    }\n    // Update methods\n    addValue(key, value) {\n        this.updateValue(key, value, true);\n    }\n    setValue(key, value) {\n        this.updateValue(key, value, false);\n    }\n    removeValue(key) {\n        const index = this.keys.indexOf(key);\n        if (index === -1) {\n            return;\n        }\n        this.keys.splice(index, 1);\n        removeFromValueTree(this.contents, key);\n        if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n            this.overrides.splice(this.overrides.findIndex(o => arrays.equals(o.identifiers, overrideIdentifiersFromKey(key))), 1);\n        }\n    }\n    updateValue(key, value, add) {\n        addToValueTree(this.contents, key, value, e => console.error(e));\n        add = add || this.keys.indexOf(key) === -1;\n        if (add) {\n            this.keys.push(key);\n        }\n        if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n            this.overrides.push({\n                identifiers: overrideIdentifiersFromKey(key),\n                keys: Object.keys(this.contents[key]),\n                contents: toValuesTree(this.contents[key], message => console.error(message)),\n            });\n        }\n    }\n}\nexport class ConfigurationModelParser {\n    constructor(_name) {\n        this._name = _name;\n        this._raw = null;\n        this._configurationModel = null;\n        this._restrictedConfigurations = [];\n    }\n    get configurationModel() {\n        return this._configurationModel || new ConfigurationModel();\n    }\n    parseRaw(raw, options) {\n        this._raw = raw;\n        const { contents, keys, overrides, restricted, hasExcludedProperties } = this.doParseRaw(raw, options);\n        this._configurationModel = new ConfigurationModel(contents, keys, overrides, hasExcludedProperties ? [raw] : undefined /* raw has not changed */);\n        this._restrictedConfigurations = restricted || [];\n    }\n    doParseRaw(raw, options) {\n        const configurationProperties = Registry.as(Extensions.Configuration).getConfigurationProperties();\n        const filtered = this.filter(raw, configurationProperties, true, options);\n        raw = filtered.raw;\n        const contents = toValuesTree(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\n        const keys = Object.keys(raw);\n        const overrides = this.toOverrides(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\n        return { contents, keys, overrides, restricted: filtered.restricted, hasExcludedProperties: filtered.hasExcludedProperties };\n    }\n    filter(properties, configurationProperties, filterOverriddenProperties, options) {\n        var _a, _b, _c;\n        let hasExcludedProperties = false;\n        if (!(options === null || options === void 0 ? void 0 : options.scopes) && !(options === null || options === void 0 ? void 0 : options.skipRestricted) && !((_a = options === null || options === void 0 ? void 0 : options.exclude) === null || _a === void 0 ? void 0 : _a.length)) {\n            return { raw: properties, restricted: [], hasExcludedProperties };\n        }\n        const raw = {};\n        const restricted = [];\n        for (const key in properties) {\n            if (OVERRIDE_PROPERTY_REGEX.test(key) && filterOverriddenProperties) {\n                const result = this.filter(properties[key], configurationProperties, false, options);\n                raw[key] = result.raw;\n                hasExcludedProperties = hasExcludedProperties || result.hasExcludedProperties;\n                restricted.push(...result.restricted);\n            }\n            else {\n                const propertySchema = configurationProperties[key];\n                const scope = propertySchema ? typeof propertySchema.scope !== 'undefined' ? propertySchema.scope : 3 /* ConfigurationScope.WINDOW */ : undefined;\n                if (propertySchema === null || propertySchema === void 0 ? void 0 : propertySchema.restricted) {\n                    restricted.push(key);\n                }\n                if (!((_b = options.exclude) === null || _b === void 0 ? void 0 : _b.includes(key)) /* Check exclude */\n                    && (((_c = options.include) === null || _c === void 0 ? void 0 : _c.includes(key) /* Check include */)\n                        || ((scope === undefined || options.scopes === undefined || options.scopes.includes(scope)) /* Check scopes */\n                            && !(options.skipRestricted && (propertySchema === null || propertySchema === void 0 ? void 0 : propertySchema.restricted))))) /* Check restricted */ {\n                    raw[key] = properties[key];\n                }\n                else {\n                    hasExcludedProperties = true;\n                }\n            }\n        }\n        return { raw, restricted, hasExcludedProperties };\n    }\n    toOverrides(raw, conflictReporter) {\n        const overrides = [];\n        for (const key of Object.keys(raw)) {\n            if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n                const overrideRaw = {};\n                for (const keyInOverrideRaw in raw[key]) {\n                    overrideRaw[keyInOverrideRaw] = raw[key][keyInOverrideRaw];\n                }\n                overrides.push({\n                    identifiers: overrideIdentifiersFromKey(key),\n                    keys: Object.keys(overrideRaw),\n                    contents: toValuesTree(overrideRaw, conflictReporter)\n                });\n            }\n        }\n        return overrides;\n    }\n}\nclass ConfigurationInspectValue {\n    constructor(key, overrides, _value, overrideIdentifiers, defaultConfiguration, policyConfiguration, applicationConfiguration, userConfiguration, localUserConfiguration, remoteUserConfiguration, workspaceConfiguration, folderConfigurationModel, memoryConfigurationModel) {\n        this.key = key;\n        this.overrides = overrides;\n        this._value = _value;\n        this.overrideIdentifiers = overrideIdentifiers;\n        this.defaultConfiguration = defaultConfiguration;\n        this.policyConfiguration = policyConfiguration;\n        this.applicationConfiguration = applicationConfiguration;\n        this.userConfiguration = userConfiguration;\n        this.localUserConfiguration = localUserConfiguration;\n        this.remoteUserConfiguration = remoteUserConfiguration;\n        this.workspaceConfiguration = workspaceConfiguration;\n        this.folderConfigurationModel = folderConfigurationModel;\n        this.memoryConfigurationModel = memoryConfigurationModel;\n    }\n    inspect(model, section, overrideIdentifier) {\n        const inspectValue = model.inspect(section, overrideIdentifier);\n        return {\n            get value() { return freeze(inspectValue.value); },\n            get override() { return freeze(inspectValue.override); },\n            get merged() { return freeze(inspectValue.merged); }\n        };\n    }\n    get userInspectValue() {\n        if (!this._userInspectValue) {\n            this._userInspectValue = this.inspect(this.userConfiguration, this.key, this.overrides.overrideIdentifier);\n        }\n        return this._userInspectValue;\n    }\n    get user() {\n        return this.userInspectValue.value !== undefined || this.userInspectValue.override !== undefined ? { value: this.userInspectValue.value, override: this.userInspectValue.override } : undefined;\n    }\n}\nexport class Configuration {\n    constructor(_defaultConfiguration, _policyConfiguration, _applicationConfiguration, _localUserConfiguration, _remoteUserConfiguration = new ConfigurationModel(), _workspaceConfiguration = new ConfigurationModel(), _folderConfigurations = new ResourceMap(), _memoryConfiguration = new ConfigurationModel(), _memoryConfigurationByResource = new ResourceMap()) {\n        this._defaultConfiguration = _defaultConfiguration;\n        this._policyConfiguration = _policyConfiguration;\n        this._applicationConfiguration = _applicationConfiguration;\n        this._localUserConfiguration = _localUserConfiguration;\n        this._remoteUserConfiguration = _remoteUserConfiguration;\n        this._workspaceConfiguration = _workspaceConfiguration;\n        this._folderConfigurations = _folderConfigurations;\n        this._memoryConfiguration = _memoryConfiguration;\n        this._memoryConfigurationByResource = _memoryConfigurationByResource;\n        this._workspaceConsolidatedConfiguration = null;\n        this._foldersConsolidatedConfigurations = new ResourceMap();\n        this._userConfiguration = null;\n    }\n    getValue(section, overrides, workspace) {\n        const consolidateConfigurationModel = this.getConsolidatedConfigurationModel(section, overrides, workspace);\n        return consolidateConfigurationModel.getValue(section);\n    }\n    updateValue(key, value, overrides = {}) {\n        let memoryConfiguration;\n        if (overrides.resource) {\n            memoryConfiguration = this._memoryConfigurationByResource.get(overrides.resource);\n            if (!memoryConfiguration) {\n                memoryConfiguration = new ConfigurationModel();\n                this._memoryConfigurationByResource.set(overrides.resource, memoryConfiguration);\n            }\n        }\n        else {\n            memoryConfiguration = this._memoryConfiguration;\n        }\n        if (value === undefined) {\n            memoryConfiguration.removeValue(key);\n        }\n        else {\n            memoryConfiguration.setValue(key, value);\n        }\n        if (!overrides.resource) {\n            this._workspaceConsolidatedConfiguration = null;\n        }\n    }\n    inspect(key, overrides, workspace) {\n        const consolidateConfigurationModel = this.getConsolidatedConfigurationModel(key, overrides, workspace);\n        const folderConfigurationModel = this.getFolderConfigurationModelForResource(overrides.resource, workspace);\n        const memoryConfigurationModel = overrides.resource ? this._memoryConfigurationByResource.get(overrides.resource) || this._memoryConfiguration : this._memoryConfiguration;\n        const overrideIdentifiers = new Set();\n        for (const override of consolidateConfigurationModel.overrides) {\n            for (const overrideIdentifier of override.identifiers) {\n                if (consolidateConfigurationModel.getOverrideValue(key, overrideIdentifier) !== undefined) {\n                    overrideIdentifiers.add(overrideIdentifier);\n                }\n            }\n        }\n        return new ConfigurationInspectValue(key, overrides, consolidateConfigurationModel.getValue(key), overrideIdentifiers.size ? [...overrideIdentifiers] : undefined, this._defaultConfiguration, this._policyConfiguration.isEmpty() ? undefined : this._policyConfiguration, this.applicationConfiguration.isEmpty() ? undefined : this.applicationConfiguration, this.userConfiguration, this.localUserConfiguration, this.remoteUserConfiguration, workspace ? this._workspaceConfiguration : undefined, folderConfigurationModel ? folderConfigurationModel : undefined, memoryConfigurationModel);\n    }\n    get applicationConfiguration() {\n        return this._applicationConfiguration;\n    }\n    get userConfiguration() {\n        if (!this._userConfiguration) {\n            this._userConfiguration = this._remoteUserConfiguration.isEmpty() ? this._localUserConfiguration : this._localUserConfiguration.merge(this._remoteUserConfiguration);\n        }\n        return this._userConfiguration;\n    }\n    get localUserConfiguration() {\n        return this._localUserConfiguration;\n    }\n    get remoteUserConfiguration() {\n        return this._remoteUserConfiguration;\n    }\n    getConsolidatedConfigurationModel(section, overrides, workspace) {\n        let configurationModel = this.getConsolidatedConfigurationModelForResource(overrides, workspace);\n        if (overrides.overrideIdentifier) {\n            configurationModel = configurationModel.override(overrides.overrideIdentifier);\n        }\n        if (!this._policyConfiguration.isEmpty() && this._policyConfiguration.getValue(section) !== undefined) {\n            configurationModel = configurationModel.merge(this._policyConfiguration);\n        }\n        return configurationModel;\n    }\n    getConsolidatedConfigurationModelForResource({ resource }, workspace) {\n        let consolidateConfiguration = this.getWorkspaceConsolidatedConfiguration();\n        if (workspace && resource) {\n            const root = workspace.getFolder(resource);\n            if (root) {\n                consolidateConfiguration = this.getFolderConsolidatedConfiguration(root.uri) || consolidateConfiguration;\n            }\n            const memoryConfigurationForResource = this._memoryConfigurationByResource.get(resource);\n            if (memoryConfigurationForResource) {\n                consolidateConfiguration = consolidateConfiguration.merge(memoryConfigurationForResource);\n            }\n        }\n        return consolidateConfiguration;\n    }\n    getWorkspaceConsolidatedConfiguration() {\n        if (!this._workspaceConsolidatedConfiguration) {\n            this._workspaceConsolidatedConfiguration = this._defaultConfiguration.merge(this.applicationConfiguration, this.userConfiguration, this._workspaceConfiguration, this._memoryConfiguration);\n        }\n        return this._workspaceConsolidatedConfiguration;\n    }\n    getFolderConsolidatedConfiguration(folder) {\n        let folderConsolidatedConfiguration = this._foldersConsolidatedConfigurations.get(folder);\n        if (!folderConsolidatedConfiguration) {\n            const workspaceConsolidateConfiguration = this.getWorkspaceConsolidatedConfiguration();\n            const folderConfiguration = this._folderConfigurations.get(folder);\n            if (folderConfiguration) {\n                folderConsolidatedConfiguration = workspaceConsolidateConfiguration.merge(folderConfiguration);\n                this._foldersConsolidatedConfigurations.set(folder, folderConsolidatedConfiguration);\n            }\n            else {\n                folderConsolidatedConfiguration = workspaceConsolidateConfiguration;\n            }\n        }\n        return folderConsolidatedConfiguration;\n    }\n    getFolderConfigurationModelForResource(resource, workspace) {\n        if (workspace && resource) {\n            const root = workspace.getFolder(resource);\n            if (root) {\n                return this._folderConfigurations.get(root.uri);\n            }\n        }\n        return undefined;\n    }\n    toData() {\n        return {\n            defaults: {\n                contents: this._defaultConfiguration.contents,\n                overrides: this._defaultConfiguration.overrides,\n                keys: this._defaultConfiguration.keys\n            },\n            policy: {\n                contents: this._policyConfiguration.contents,\n                overrides: this._policyConfiguration.overrides,\n                keys: this._policyConfiguration.keys\n            },\n            application: {\n                contents: this.applicationConfiguration.contents,\n                overrides: this.applicationConfiguration.overrides,\n                keys: this.applicationConfiguration.keys\n            },\n            user: {\n                contents: this.userConfiguration.contents,\n                overrides: this.userConfiguration.overrides,\n                keys: this.userConfiguration.keys\n            },\n            workspace: {\n                contents: this._workspaceConfiguration.contents,\n                overrides: this._workspaceConfiguration.overrides,\n                keys: this._workspaceConfiguration.keys\n            },\n            folders: [...this._folderConfigurations.keys()].reduce((result, folder) => {\n                const { contents, overrides, keys } = this._folderConfigurations.get(folder);\n                result.push([folder, { contents, overrides, keys }]);\n                return result;\n            }, [])\n        };\n    }\n    static parse(data) {\n        const defaultConfiguration = this.parseConfigurationModel(data.defaults);\n        const policyConfiguration = this.parseConfigurationModel(data.policy);\n        const applicationConfiguration = this.parseConfigurationModel(data.application);\n        const userConfiguration = this.parseConfigurationModel(data.user);\n        const workspaceConfiguration = this.parseConfigurationModel(data.workspace);\n        const folders = data.folders.reduce((result, value) => {\n            result.set(URI.revive(value[0]), this.parseConfigurationModel(value[1]));\n            return result;\n        }, new ResourceMap());\n        return new Configuration(defaultConfiguration, policyConfiguration, applicationConfiguration, userConfiguration, new ConfigurationModel(), workspaceConfiguration, folders, new ConfigurationModel(), new ResourceMap());\n    }\n    static parseConfigurationModel(model) {\n        return new ConfigurationModel(model.contents, model.keys, model.overrides);\n    }\n}\nexport class ConfigurationChangeEvent {\n    constructor(change, previous, currentConfiguraiton, currentWorkspace) {\n        this.change = change;\n        this.previous = previous;\n        this.currentConfiguraiton = currentConfiguraiton;\n        this.currentWorkspace = currentWorkspace;\n        this._marker = '\\n';\n        this._markerCode1 = this._marker.charCodeAt(0);\n        this._markerCode2 = '.'.charCodeAt(0);\n        this.affectedKeys = new Set();\n        this._previousConfiguration = undefined;\n        for (const key of change.keys) {\n            this.affectedKeys.add(key);\n        }\n        for (const [, keys] of change.overrides) {\n            for (const key of keys) {\n                this.affectedKeys.add(key);\n            }\n        }\n        // Example: '\\nfoo.bar\\nabc.def\\n'\n        this._affectsConfigStr = this._marker;\n        for (const key of this.affectedKeys) {\n            this._affectsConfigStr += key + this._marker;\n        }\n    }\n    get previousConfiguration() {\n        if (!this._previousConfiguration && this.previous) {\n            this._previousConfiguration = Configuration.parse(this.previous.data);\n        }\n        return this._previousConfiguration;\n    }\n    affectsConfiguration(section, overrides) {\n        var _a;\n        // we have one large string with all keys that have changed. we pad (marker) the section\n        // and check that either find it padded or before a segment character\n        const needle = this._marker + section;\n        const idx = this._affectsConfigStr.indexOf(needle);\n        if (idx < 0) {\n            // NOT: (marker + section)\n            return false;\n        }\n        const pos = idx + needle.length;\n        if (pos >= this._affectsConfigStr.length) {\n            return false;\n        }\n        const code = this._affectsConfigStr.charCodeAt(pos);\n        if (code !== this._markerCode1 && code !== this._markerCode2) {\n            // NOT: section + (marker | segment)\n            return false;\n        }\n        if (overrides) {\n            const value1 = this.previousConfiguration ? this.previousConfiguration.getValue(section, overrides, (_a = this.previous) === null || _a === void 0 ? void 0 : _a.workspace) : undefined;\n            const value2 = this.currentConfiguraiton.getValue(section, overrides, this.currentWorkspace);\n            return !objects.equals(value1, value2);\n        }\n        return true;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { implies, expressionsAreEqualWithConstantSubstitution } from '../../contextkey/common/contextkey.js';\n// util definitions to make working with the above types easier within this module:\nexport const NoMatchingKb = { kind: 0 /* ResultKind.NoMatchingKb */ };\nconst MoreChordsNeeded = { kind: 1 /* ResultKind.MoreChordsNeeded */ };\nfunction KbFound(commandId, commandArgs, isBubble) {\n    return { kind: 2 /* ResultKind.KbFound */, commandId, commandArgs, isBubble };\n}\n//#endregion\n/**\n * Stores mappings from keybindings to commands and from commands to keybindings.\n * Given a sequence of chords, `resolve`s which keybinding it matches\n */\nexport class KeybindingResolver {\n    constructor(\n    /** built-in and extension-provided keybindings */\n    defaultKeybindings, \n    /** user's keybindings */\n    overrides, log) {\n        var _a;\n        this._log = log;\n        this._defaultKeybindings = defaultKeybindings;\n        this._defaultBoundCommands = new Map();\n        for (const defaultKeybinding of defaultKeybindings) {\n            const command = defaultKeybinding.command;\n            if (command && command.charAt(0) !== '-') {\n                this._defaultBoundCommands.set(command, true);\n            }\n        }\n        this._map = new Map();\n        this._lookupMap = new Map();\n        this._keybindings = KeybindingResolver.handleRemovals([].concat(defaultKeybindings).concat(overrides));\n        for (let i = 0, len = this._keybindings.length; i < len; i++) {\n            const k = this._keybindings[i];\n            if (k.chords.length === 0) {\n                // unbound\n                continue;\n            }\n            // substitute with constants that are registered after startup - https://github.com/microsoft/vscode/issues/174218#issuecomment-1437972127\n            const when = (_a = k.when) === null || _a === void 0 ? void 0 : _a.substituteConstants();\n            if (when && when.type === 0 /* ContextKeyExprType.False */) {\n                // when condition is false\n                continue;\n            }\n            this._addKeyPress(k.chords[0], k);\n        }\n    }\n    static _isTargetedForRemoval(defaultKb, keypress, when) {\n        if (keypress) {\n            for (let i = 0; i < keypress.length; i++) {\n                if (keypress[i] !== defaultKb.chords[i]) {\n                    return false;\n                }\n            }\n        }\n        // `true` means always, as does `undefined`\n        // so we will treat `true` === `undefined`\n        if (when && when.type !== 1 /* ContextKeyExprType.True */) {\n            if (!defaultKb.when) {\n                return false;\n            }\n            if (!expressionsAreEqualWithConstantSubstitution(when, defaultKb.when)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Looks for rules containing \"-commandId\" and removes them.\n     */\n    static handleRemovals(rules) {\n        // Do a first pass and construct a hash-map for removals\n        const removals = new Map();\n        for (let i = 0, len = rules.length; i < len; i++) {\n            const rule = rules[i];\n            if (rule.command && rule.command.charAt(0) === '-') {\n                const command = rule.command.substring(1);\n                if (!removals.has(command)) {\n                    removals.set(command, [rule]);\n                }\n                else {\n                    removals.get(command).push(rule);\n                }\n            }\n        }\n        if (removals.size === 0) {\n            // There are no removals\n            return rules;\n        }\n        // Do a second pass and keep only non-removed keybindings\n        const result = [];\n        for (let i = 0, len = rules.length; i < len; i++) {\n            const rule = rules[i];\n            if (!rule.command || rule.command.length === 0) {\n                result.push(rule);\n                continue;\n            }\n            if (rule.command.charAt(0) === '-') {\n                continue;\n            }\n            const commandRemovals = removals.get(rule.command);\n            if (!commandRemovals || !rule.isDefault) {\n                result.push(rule);\n                continue;\n            }\n            let isRemoved = false;\n            for (const commandRemoval of commandRemovals) {\n                const when = commandRemoval.when;\n                if (this._isTargetedForRemoval(rule, commandRemoval.chords, when)) {\n                    isRemoved = true;\n                    break;\n                }\n            }\n            if (!isRemoved) {\n                result.push(rule);\n                continue;\n            }\n        }\n        return result;\n    }\n    _addKeyPress(keypress, item) {\n        const conflicts = this._map.get(keypress);\n        if (typeof conflicts === 'undefined') {\n            // There is no conflict so far\n            this._map.set(keypress, [item]);\n            this._addToLookupMap(item);\n            return;\n        }\n        for (let i = conflicts.length - 1; i >= 0; i--) {\n            const conflict = conflicts[i];\n            if (conflict.command === item.command) {\n                continue;\n            }\n            // Test if the shorter keybinding is a prefix of the longer one.\n            // If the shorter keybinding is a prefix, it effectively will shadow the longer one and is considered a conflict.\n            let isShorterKbPrefix = true;\n            for (let i = 1; i < conflict.chords.length && i < item.chords.length; i++) {\n                if (conflict.chords[i] !== item.chords[i]) {\n                    // The ith step does not conflict\n                    isShorterKbPrefix = false;\n                    break;\n                }\n            }\n            if (!isShorterKbPrefix) {\n                continue;\n            }\n            if (KeybindingResolver.whenIsEntirelyIncluded(conflict.when, item.when)) {\n                // `item` completely overwrites `conflict`\n                // Remove conflict from the lookupMap\n                this._removeFromLookupMap(conflict);\n            }\n        }\n        conflicts.push(item);\n        this._addToLookupMap(item);\n    }\n    _addToLookupMap(item) {\n        if (!item.command) {\n            return;\n        }\n        let arr = this._lookupMap.get(item.command);\n        if (typeof arr === 'undefined') {\n            arr = [item];\n            this._lookupMap.set(item.command, arr);\n        }\n        else {\n            arr.push(item);\n        }\n    }\n    _removeFromLookupMap(item) {\n        if (!item.command) {\n            return;\n        }\n        const arr = this._lookupMap.get(item.command);\n        if (typeof arr === 'undefined') {\n            return;\n        }\n        for (let i = 0, len = arr.length; i < len; i++) {\n            if (arr[i] === item) {\n                arr.splice(i, 1);\n                return;\n            }\n        }\n    }\n    /**\n     * Returns true if it is provable `a` implies `b`.\n     */\n    static whenIsEntirelyIncluded(a, b) {\n        if (!b || b.type === 1 /* ContextKeyExprType.True */) {\n            return true;\n        }\n        if (!a || a.type === 1 /* ContextKeyExprType.True */) {\n            return false;\n        }\n        return implies(a, b);\n    }\n    getKeybindings() {\n        return this._keybindings;\n    }\n    lookupPrimaryKeybinding(commandId, context) {\n        const items = this._lookupMap.get(commandId);\n        if (typeof items === 'undefined' || items.length === 0) {\n            return null;\n        }\n        if (items.length === 1) {\n            return items[0];\n        }\n        for (let i = items.length - 1; i >= 0; i--) {\n            const item = items[i];\n            if (context.contextMatchesRules(item.when)) {\n                return item;\n            }\n        }\n        return items[items.length - 1];\n    }\n    /**\n     * Looks up a keybinding trigged as a result of pressing a sequence of chords - `[...currentChords, keypress]`\n     *\n     * Example: resolving 3 chords pressed sequentially - `cmd+k cmd+p cmd+i`:\n     * \t`currentChords = [ 'cmd+k' , 'cmd+p' ]` and `keypress = `cmd+i` - last pressed chord\n     */\n    resolve(context, currentChords, keypress) {\n        const pressedChords = [...currentChords, keypress];\n        this._log(`| Resolving ${pressedChords}`);\n        const kbCandidates = this._map.get(pressedChords[0]);\n        if (kbCandidates === undefined) {\n            // No bindings with such 0-th chord\n            this._log(`\\\\ No keybinding entries.`);\n            return NoMatchingKb;\n        }\n        let lookupMap = null;\n        if (pressedChords.length < 2) {\n            lookupMap = kbCandidates;\n        }\n        else {\n            // Fetch all chord bindings for `currentChords`\n            lookupMap = [];\n            for (let i = 0, len = kbCandidates.length; i < len; i++) {\n                const candidate = kbCandidates[i];\n                if (pressedChords.length > candidate.chords.length) { // # of pressed chords can't be less than # of chords in a keybinding to invoke\n                    continue;\n                }\n                let prefixMatches = true;\n                for (let i = 1; i < pressedChords.length; i++) {\n                    if (candidate.chords[i] !== pressedChords[i]) {\n                        prefixMatches = false;\n                        break;\n                    }\n                }\n                if (prefixMatches) {\n                    lookupMap.push(candidate);\n                }\n            }\n        }\n        // check there's a keybinding with a matching when clause\n        const result = this._findCommand(context, lookupMap);\n        if (!result) {\n            this._log(`\\\\ From ${lookupMap.length} keybinding entries, no when clauses matched the context.`);\n            return NoMatchingKb;\n        }\n        // check we got all chords necessary to be sure a particular keybinding needs to be invoked\n        if (pressedChords.length < result.chords.length) {\n            // The chord sequence is not complete\n            this._log(`\\\\ From ${lookupMap.length} keybinding entries, awaiting ${result.chords.length - pressedChords.length} more chord(s), when: ${printWhenExplanation(result.when)}, source: ${printSourceExplanation(result)}.`);\n            return MoreChordsNeeded;\n        }\n        this._log(`\\\\ From ${lookupMap.length} keybinding entries, matched ${result.command}, when: ${printWhenExplanation(result.when)}, source: ${printSourceExplanation(result)}.`);\n        return KbFound(result.command, result.commandArgs, result.bubble);\n    }\n    _findCommand(context, matches) {\n        for (let i = matches.length - 1; i >= 0; i--) {\n            const k = matches[i];\n            if (!KeybindingResolver._contextMatchesRules(context, k.when)) {\n                continue;\n            }\n            return k;\n        }\n        return null;\n    }\n    static _contextMatchesRules(context, rules) {\n        if (!rules) {\n            return true;\n        }\n        return rules.evaluate(context);\n    }\n}\nfunction printWhenExplanation(when) {\n    if (!when) {\n        return `no when condition`;\n    }\n    return `${when.serialize()}`;\n}\nfunction printSourceExplanation(kb) {\n    return (kb.extensionId\n        ? (kb.isBuiltinExtension ? `built-in extension ${kb.extensionId}` : `user extension ${kb.extensionId}`)\n        : (kb.isDefault ? `built-in` : `user`));\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IntervalTimer, TimeoutTimer } from '../../../base/common/async.js';\nimport { illegalState } from '../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { IME } from '../../../base/common/ime.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as nls from '../../../nls.js';\nimport { NoMatchingKb } from './keybindingResolver.js';\nconst HIGH_FREQ_COMMANDS = /^(cursor|delete|undo|redo|tab|editor\\.action\\.clipboard)/;\nexport class AbstractKeybindingService extends Disposable {\n    get onDidUpdateKeybindings() {\n        return this._onDidUpdateKeybindings ? this._onDidUpdateKeybindings.event : Event.None; // Sinon stubbing walks properties on prototype\n    }\n    get inChordMode() {\n        return this._currentChords.length > 0;\n    }\n    constructor(_contextKeyService, _commandService, _telemetryService, _notificationService, _logService) {\n        super();\n        this._contextKeyService = _contextKeyService;\n        this._commandService = _commandService;\n        this._telemetryService = _telemetryService;\n        this._notificationService = _notificationService;\n        this._logService = _logService;\n        this._onDidUpdateKeybindings = this._register(new Emitter());\n        this._currentChords = [];\n        this._currentChordChecker = new IntervalTimer();\n        this._currentChordStatusMessage = null;\n        this._ignoreSingleModifiers = KeybindingModifierSet.EMPTY;\n        this._currentSingleModifier = null;\n        this._currentSingleModifierClearTimeout = new TimeoutTimer();\n        this._logging = false;\n    }\n    dispose() {\n        super.dispose();\n    }\n    _log(str) {\n        if (this._logging) {\n            this._logService.info(`[KeybindingService]: ${str}`);\n        }\n    }\n    getKeybindings() {\n        return this._getResolver().getKeybindings();\n    }\n    lookupKeybinding(commandId, context) {\n        const result = this._getResolver().lookupPrimaryKeybinding(commandId, context || this._contextKeyService);\n        if (!result) {\n            return undefined;\n        }\n        return result.resolvedKeybinding;\n    }\n    dispatchEvent(e, target) {\n        return this._dispatch(e, target);\n    }\n    // TODO@ulugbekna: update namings to align with `_doDispatch`\n    // TODO@ulugbekna: this fn doesn't seem to take into account single-modifier keybindings, eg `shift shift`\n    softDispatch(e, target) {\n        this._log(`/ Soft dispatching keyboard event`);\n        const keybinding = this.resolveKeyboardEvent(e);\n        if (keybinding.hasMultipleChords()) {\n            console.warn('keyboard event should not be mapped to multiple chords');\n            return NoMatchingKb;\n        }\n        const [firstChord,] = keybinding.getDispatchChords();\n        if (firstChord === null) {\n            // cannot be dispatched, probably only modifier keys\n            this._log(`\\\\ Keyboard event cannot be dispatched`);\n            return NoMatchingKb;\n        }\n        const contextValue = this._contextKeyService.getContext(target);\n        const currentChords = this._currentChords.map((({ keypress }) => keypress));\n        return this._getResolver().resolve(contextValue, currentChords, firstChord);\n    }\n    _scheduleLeaveChordMode() {\n        const chordLastInteractedTime = Date.now();\n        this._currentChordChecker.cancelAndSet(() => {\n            if (!this._documentHasFocus()) {\n                // Focus has been lost => leave chord mode\n                this._leaveChordMode();\n                return;\n            }\n            if (Date.now() - chordLastInteractedTime > 5000) {\n                // 5 seconds elapsed => leave chord mode\n                this._leaveChordMode();\n            }\n        }, 500);\n    }\n    _expectAnotherChord(firstChord, keypressLabel) {\n        this._currentChords.push({ keypress: firstChord, label: keypressLabel });\n        switch (this._currentChords.length) {\n            case 0:\n                throw illegalState('impossible');\n            case 1:\n                // TODO@ulugbekna: revise this message and the one below (at least, fix terminology)\n                this._currentChordStatusMessage = this._notificationService.status(nls.localize('first.chord', \"({0}) was pressed. Waiting for second key of chord...\", keypressLabel));\n                break;\n            default: {\n                const fullKeypressLabel = this._currentChords.map(({ label }) => label).join(', ');\n                this._currentChordStatusMessage = this._notificationService.status(nls.localize('next.chord', \"({0}) was pressed. Waiting for next key of chord...\", fullKeypressLabel));\n            }\n        }\n        this._scheduleLeaveChordMode();\n        if (IME.enabled) {\n            IME.disable();\n        }\n    }\n    _leaveChordMode() {\n        if (this._currentChordStatusMessage) {\n            this._currentChordStatusMessage.dispose();\n            this._currentChordStatusMessage = null;\n        }\n        this._currentChordChecker.cancel();\n        this._currentChords = [];\n        IME.enable();\n    }\n    _dispatch(e, target) {\n        return this._doDispatch(this.resolveKeyboardEvent(e), target, /*isSingleModiferChord*/ false);\n    }\n    _singleModifierDispatch(e, target) {\n        const keybinding = this.resolveKeyboardEvent(e);\n        const [singleModifier,] = keybinding.getSingleModifierDispatchChords();\n        if (singleModifier) {\n            if (this._ignoreSingleModifiers.has(singleModifier)) {\n                this._log(`+ Ignoring single modifier ${singleModifier} due to it being pressed together with other keys.`);\n                this._ignoreSingleModifiers = KeybindingModifierSet.EMPTY;\n                this._currentSingleModifierClearTimeout.cancel();\n                this._currentSingleModifier = null;\n                return false;\n            }\n            this._ignoreSingleModifiers = KeybindingModifierSet.EMPTY;\n            if (this._currentSingleModifier === null) {\n                // we have a valid `singleModifier`, store it for the next keyup, but clear it in 300ms\n                this._log(`+ Storing single modifier for possible chord ${singleModifier}.`);\n                this._currentSingleModifier = singleModifier;\n                this._currentSingleModifierClearTimeout.cancelAndSet(() => {\n                    this._log(`+ Clearing single modifier due to 300ms elapsed.`);\n                    this._currentSingleModifier = null;\n                }, 300);\n                return false;\n            }\n            if (singleModifier === this._currentSingleModifier) {\n                // bingo!\n                this._log(`/ Dispatching single modifier chord ${singleModifier} ${singleModifier}`);\n                this._currentSingleModifierClearTimeout.cancel();\n                this._currentSingleModifier = null;\n                return this._doDispatch(keybinding, target, /*isSingleModiferChord*/ true);\n            }\n            this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${singleModifier}`);\n            this._currentSingleModifierClearTimeout.cancel();\n            this._currentSingleModifier = null;\n            return false;\n        }\n        // When pressing a modifier and holding it pressed with any other modifier or key combination,\n        // the pressed modifiers should no longer be considered for single modifier dispatch.\n        const [firstChord,] = keybinding.getChords();\n        this._ignoreSingleModifiers = new KeybindingModifierSet(firstChord);\n        if (this._currentSingleModifier !== null) {\n            this._log(`+ Clearing single modifier due to other key up.`);\n        }\n        this._currentSingleModifierClearTimeout.cancel();\n        this._currentSingleModifier = null;\n        return false;\n    }\n    _doDispatch(userKeypress, target, isSingleModiferChord = false) {\n        var _a;\n        let shouldPreventDefault = false;\n        if (userKeypress.hasMultipleChords()) { // warn - because user can press a single chord at a time\n            console.warn('Unexpected keyboard event mapped to multiple chords');\n            return false;\n        }\n        let userPressedChord = null;\n        let currentChords = null;\n        if (isSingleModiferChord) {\n            // The keybinding is the second keypress of a single modifier chord, e.g. \"shift shift\".\n            // A single modifier can only occur when the same modifier is pressed in short sequence,\n            // hence we disregard `_currentChord` and use the same modifier instead.\n            const [dispatchKeyname,] = userKeypress.getSingleModifierDispatchChords();\n            userPressedChord = dispatchKeyname;\n            currentChords = dispatchKeyname ? [dispatchKeyname] : []; // TODO@ulugbekna: in the `else` case we assign an empty array - make sure `resolve` can handle an empty array well\n        }\n        else {\n            [userPressedChord,] = userKeypress.getDispatchChords();\n            currentChords = this._currentChords.map(({ keypress }) => keypress);\n        }\n        if (userPressedChord === null) {\n            this._log(`\\\\ Keyboard event cannot be dispatched in keydown phase.`);\n            // cannot be dispatched, probably only modifier keys\n            return shouldPreventDefault;\n        }\n        const contextValue = this._contextKeyService.getContext(target);\n        const keypressLabel = userKeypress.getLabel();\n        const resolveResult = this._getResolver().resolve(contextValue, currentChords, userPressedChord);\n        switch (resolveResult.kind) {\n            case 0 /* ResultKind.NoMatchingKb */: {\n                this._logService.trace('KeybindingService#dispatch', keypressLabel, `[ No matching keybinding ]`);\n                if (this.inChordMode) {\n                    const currentChordsLabel = this._currentChords.map(({ label }) => label).join(', ');\n                    this._log(`+ Leaving multi-chord mode: Nothing bound to \"${currentChordsLabel}, ${keypressLabel}\".`);\n                    this._notificationService.status(nls.localize('missing.chord', \"The key combination ({0}, {1}) is not a command.\", currentChordsLabel, keypressLabel), { hideAfter: 10 * 1000 /* 10s */ });\n                    this._leaveChordMode();\n                    shouldPreventDefault = true;\n                }\n                return shouldPreventDefault;\n            }\n            case 1 /* ResultKind.MoreChordsNeeded */: {\n                this._logService.trace('KeybindingService#dispatch', keypressLabel, `[ Several keybindings match - more chords needed ]`);\n                shouldPreventDefault = true;\n                this._expectAnotherChord(userPressedChord, keypressLabel);\n                this._log(this._currentChords.length === 1 ? `+ Entering multi-chord mode...` : `+ Continuing multi-chord mode...`);\n                return shouldPreventDefault;\n            }\n            case 2 /* ResultKind.KbFound */: {\n                this._logService.trace('KeybindingService#dispatch', keypressLabel, `[ Will dispatch command ${resolveResult.commandId} ]`);\n                if (resolveResult.commandId === null || resolveResult.commandId === '') {\n                    if (this.inChordMode) {\n                        const currentChordsLabel = this._currentChords.map(({ label }) => label).join(', ');\n                        this._log(`+ Leaving chord mode: Nothing bound to \"${currentChordsLabel}, ${keypressLabel}\".`);\n                        this._notificationService.status(nls.localize('missing.chord', \"The key combination ({0}, {1}) is not a command.\", currentChordsLabel, keypressLabel), { hideAfter: 10 * 1000 /* 10s */ });\n                        this._leaveChordMode();\n                        shouldPreventDefault = true;\n                    }\n                }\n                else {\n                    if (this.inChordMode) {\n                        this._leaveChordMode();\n                    }\n                    if (!resolveResult.isBubble) {\n                        shouldPreventDefault = true;\n                    }\n                    this._log(`+ Invoking command ${resolveResult.commandId}.`);\n                    if (typeof resolveResult.commandArgs === 'undefined') {\n                        this._commandService.executeCommand(resolveResult.commandId).then(undefined, err => this._notificationService.warn(err));\n                    }\n                    else {\n                        this._commandService.executeCommand(resolveResult.commandId, resolveResult.commandArgs).then(undefined, err => this._notificationService.warn(err));\n                    }\n                    if (!HIGH_FREQ_COMMANDS.test(resolveResult.commandId)) {\n                        this._telemetryService.publicLog2('workbenchActionExecuted', { id: resolveResult.commandId, from: 'keybinding', detail: (_a = userKeypress.getUserSettingsLabel()) !== null && _a !== void 0 ? _a : undefined });\n                    }\n                }\n                return shouldPreventDefault;\n            }\n        }\n    }\n    mightProducePrintableCharacter(event) {\n        if (event.ctrlKey || event.metaKey) {\n            // ignore ctrl/cmd-combination but not shift/alt-combinatios\n            return false;\n        }\n        // weak check for certain ranges. this is properly implemented in a subclass\n        // with access to the KeyboardMapperFactory.\n        if ((event.keyCode >= 31 /* KeyCode.KeyA */ && event.keyCode <= 56 /* KeyCode.KeyZ */)\n            || (event.keyCode >= 21 /* KeyCode.Digit0 */ && event.keyCode <= 30 /* KeyCode.Digit9 */)) {\n            return true;\n        }\n        return false;\n    }\n}\nclass KeybindingModifierSet {\n    constructor(source) {\n        this._ctrlKey = source ? source.ctrlKey : false;\n        this._shiftKey = source ? source.shiftKey : false;\n        this._altKey = source ? source.altKey : false;\n        this._metaKey = source ? source.metaKey : false;\n    }\n    has(modifier) {\n        switch (modifier) {\n            case 'ctrl': return this._ctrlKey;\n            case 'shift': return this._shiftKey;\n            case 'alt': return this._altKey;\n            case 'meta': return this._metaKey;\n        }\n    }\n}\nKeybindingModifierSet.EMPTY = new KeybindingModifierSet(null);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class ResolvedKeybindingItem {\n    constructor(resolvedKeybinding, command, commandArgs, when, isDefault, extensionId, isBuiltinExtension) {\n        this._resolvedKeybindingItemBrand = undefined;\n        this.resolvedKeybinding = resolvedKeybinding;\n        this.chords = resolvedKeybinding ? toEmptyArrayIfContainsNull(resolvedKeybinding.getDispatchChords()) : [];\n        if (resolvedKeybinding && this.chords.length === 0) {\n            // handle possible single modifier chord keybindings\n            this.chords = toEmptyArrayIfContainsNull(resolvedKeybinding.getSingleModifierDispatchChords());\n        }\n        this.bubble = (command ? command.charCodeAt(0) === 94 /* CharCode.Caret */ : false);\n        this.command = this.bubble ? command.substr(1) : command;\n        this.commandArgs = commandArgs;\n        this.when = when;\n        this.isDefault = isDefault;\n        this.extensionId = extensionId;\n        this.isBuiltinExtension = isBuiltinExtension;\n    }\n}\nexport function toEmptyArrayIfContainsNull(arr) {\n    const result = [];\n    for (let i = 0, len = arr.length; i < len; i++) {\n        const element = arr[i];\n        if (!element) {\n            return [];\n        }\n        result.push(element);\n    }\n    return result;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { illegalArgument } from '../../../base/common/errors.js';\nimport { AriaLabelProvider, ElectronAcceleratorLabelProvider, UILabelProvider, UserSettingsLabelProvider } from '../../../base/common/keybindingLabels.js';\nimport { ResolvedKeybinding, ResolvedChord } from '../../../base/common/keybindings.js';\nexport class BaseResolvedKeybinding extends ResolvedKeybinding {\n    constructor(os, chords) {\n        super();\n        if (chords.length === 0) {\n            throw illegalArgument(`chords`);\n        }\n        this._os = os;\n        this._chords = chords;\n    }\n    getLabel() {\n        return UILabelProvider.toLabel(this._os, this._chords, (keybinding) => this._getLabel(keybinding));\n    }\n    getAriaLabel() {\n        return AriaLabelProvider.toLabel(this._os, this._chords, (keybinding) => this._getAriaLabel(keybinding));\n    }\n    getElectronAccelerator() {\n        if (this._chords.length > 1) {\n            // [Electron Accelerators] Electron cannot handle chords\n            return null;\n        }\n        if (this._chords[0].isDuplicateModifierCase()) {\n            // [Electron Accelerators] Electron cannot handle modifier only keybindings\n            // e.g. \"shift shift\"\n            return null;\n        }\n        return ElectronAcceleratorLabelProvider.toLabel(this._os, this._chords, (keybinding) => this._getElectronAccelerator(keybinding));\n    }\n    getUserSettingsLabel() {\n        return UserSettingsLabelProvider.toLabel(this._os, this._chords, (keybinding) => this._getUserSettingsLabel(keybinding));\n    }\n    hasMultipleChords() {\n        return (this._chords.length > 1);\n    }\n    getChords() {\n        return this._chords.map((keybinding) => this._getChord(keybinding));\n    }\n    _getChord(keybinding) {\n        return new ResolvedChord(keybinding.ctrlKey, keybinding.shiftKey, keybinding.altKey, keybinding.metaKey, this._getLabel(keybinding), this._getAriaLabel(keybinding));\n    }\n    getDispatchChords() {\n        return this._chords.map((keybinding) => this._getChordDispatch(keybinding));\n    }\n    getSingleModifierDispatchChords() {\n        return this._chords.map((keybinding) => this._getSingleModifierChordDispatch(keybinding));\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyCodeUtils, IMMUTABLE_CODE_TO_KEY_CODE } from '../../../base/common/keyCodes.js';\nimport { KeyCodeChord } from '../../../base/common/keybindings.js';\nimport { BaseResolvedKeybinding } from './baseResolvedKeybinding.js';\nimport { toEmptyArrayIfContainsNull } from './resolvedKeybindingItem.js';\n/**\n * Do not instantiate. Use KeybindingService to get a ResolvedKeybinding seeded with information about the current kb layout.\n */\nexport class USLayoutResolvedKeybinding extends BaseResolvedKeybinding {\n    constructor(chords, os) {\n        super(os, chords);\n    }\n    _keyCodeToUILabel(keyCode) {\n        if (this._os === 2 /* OperatingSystem.Macintosh */) {\n            switch (keyCode) {\n                case 15 /* KeyCode.LeftArrow */:\n                    return '←';\n                case 16 /* KeyCode.UpArrow */:\n                    return '↑';\n                case 17 /* KeyCode.RightArrow */:\n                    return '→';\n                case 18 /* KeyCode.DownArrow */:\n                    return '↓';\n            }\n        }\n        return KeyCodeUtils.toString(keyCode);\n    }\n    _getLabel(chord) {\n        if (chord.isDuplicateModifierCase()) {\n            return '';\n        }\n        return this._keyCodeToUILabel(chord.keyCode);\n    }\n    _getAriaLabel(chord) {\n        if (chord.isDuplicateModifierCase()) {\n            return '';\n        }\n        return KeyCodeUtils.toString(chord.keyCode);\n    }\n    _getElectronAccelerator(chord) {\n        return KeyCodeUtils.toElectronAccelerator(chord.keyCode);\n    }\n    _getUserSettingsLabel(chord) {\n        if (chord.isDuplicateModifierCase()) {\n            return '';\n        }\n        const result = KeyCodeUtils.toUserSettingsUS(chord.keyCode);\n        return (result ? result.toLowerCase() : result);\n    }\n    _getChordDispatch(chord) {\n        return USLayoutResolvedKeybinding.getDispatchStr(chord);\n    }\n    static getDispatchStr(chord) {\n        if (chord.isModifierKey()) {\n            return null;\n        }\n        let result = '';\n        if (chord.ctrlKey) {\n            result += 'ctrl+';\n        }\n        if (chord.shiftKey) {\n            result += 'shift+';\n        }\n        if (chord.altKey) {\n            result += 'alt+';\n        }\n        if (chord.metaKey) {\n            result += 'meta+';\n        }\n        result += KeyCodeUtils.toString(chord.keyCode);\n        return result;\n    }\n    _getSingleModifierChordDispatch(keybinding) {\n        if (keybinding.keyCode === 5 /* KeyCode.Ctrl */ && !keybinding.shiftKey && !keybinding.altKey && !keybinding.metaKey) {\n            return 'ctrl';\n        }\n        if (keybinding.keyCode === 4 /* KeyCode.Shift */ && !keybinding.ctrlKey && !keybinding.altKey && !keybinding.metaKey) {\n            return 'shift';\n        }\n        if (keybinding.keyCode === 6 /* KeyCode.Alt */ && !keybinding.ctrlKey && !keybinding.shiftKey && !keybinding.metaKey) {\n            return 'alt';\n        }\n        if (keybinding.keyCode === 57 /* KeyCode.Meta */ && !keybinding.ctrlKey && !keybinding.shiftKey && !keybinding.altKey) {\n            return 'meta';\n        }\n        return null;\n    }\n    /**\n     * *NOTE*: Check return value for `KeyCode.Unknown`.\n     */\n    static _scanCodeToKeyCode(scanCode) {\n        const immutableKeyCode = IMMUTABLE_CODE_TO_KEY_CODE[scanCode];\n        if (immutableKeyCode !== -1 /* KeyCode.DependsOnKbLayout */) {\n            return immutableKeyCode;\n        }\n        switch (scanCode) {\n            case 10 /* ScanCode.KeyA */: return 31 /* KeyCode.KeyA */;\n            case 11 /* ScanCode.KeyB */: return 32 /* KeyCode.KeyB */;\n            case 12 /* ScanCode.KeyC */: return 33 /* KeyCode.KeyC */;\n            case 13 /* ScanCode.KeyD */: return 34 /* KeyCode.KeyD */;\n            case 14 /* ScanCode.KeyE */: return 35 /* KeyCode.KeyE */;\n            case 15 /* ScanCode.KeyF */: return 36 /* KeyCode.KeyF */;\n            case 16 /* ScanCode.KeyG */: return 37 /* KeyCode.KeyG */;\n            case 17 /* ScanCode.KeyH */: return 38 /* KeyCode.KeyH */;\n            case 18 /* ScanCode.KeyI */: return 39 /* KeyCode.KeyI */;\n            case 19 /* ScanCode.KeyJ */: return 40 /* KeyCode.KeyJ */;\n            case 20 /* ScanCode.KeyK */: return 41 /* KeyCode.KeyK */;\n            case 21 /* ScanCode.KeyL */: return 42 /* KeyCode.KeyL */;\n            case 22 /* ScanCode.KeyM */: return 43 /* KeyCode.KeyM */;\n            case 23 /* ScanCode.KeyN */: return 44 /* KeyCode.KeyN */;\n            case 24 /* ScanCode.KeyO */: return 45 /* KeyCode.KeyO */;\n            case 25 /* ScanCode.KeyP */: return 46 /* KeyCode.KeyP */;\n            case 26 /* ScanCode.KeyQ */: return 47 /* KeyCode.KeyQ */;\n            case 27 /* ScanCode.KeyR */: return 48 /* KeyCode.KeyR */;\n            case 28 /* ScanCode.KeyS */: return 49 /* KeyCode.KeyS */;\n            case 29 /* ScanCode.KeyT */: return 50 /* KeyCode.KeyT */;\n            case 30 /* ScanCode.KeyU */: return 51 /* KeyCode.KeyU */;\n            case 31 /* ScanCode.KeyV */: return 52 /* KeyCode.KeyV */;\n            case 32 /* ScanCode.KeyW */: return 53 /* KeyCode.KeyW */;\n            case 33 /* ScanCode.KeyX */: return 54 /* KeyCode.KeyX */;\n            case 34 /* ScanCode.KeyY */: return 55 /* KeyCode.KeyY */;\n            case 35 /* ScanCode.KeyZ */: return 56 /* KeyCode.KeyZ */;\n            case 36 /* ScanCode.Digit1 */: return 22 /* KeyCode.Digit1 */;\n            case 37 /* ScanCode.Digit2 */: return 23 /* KeyCode.Digit2 */;\n            case 38 /* ScanCode.Digit3 */: return 24 /* KeyCode.Digit3 */;\n            case 39 /* ScanCode.Digit4 */: return 25 /* KeyCode.Digit4 */;\n            case 40 /* ScanCode.Digit5 */: return 26 /* KeyCode.Digit5 */;\n            case 41 /* ScanCode.Digit6 */: return 27 /* KeyCode.Digit6 */;\n            case 42 /* ScanCode.Digit7 */: return 28 /* KeyCode.Digit7 */;\n            case 43 /* ScanCode.Digit8 */: return 29 /* KeyCode.Digit8 */;\n            case 44 /* ScanCode.Digit9 */: return 30 /* KeyCode.Digit9 */;\n            case 45 /* ScanCode.Digit0 */: return 21 /* KeyCode.Digit0 */;\n            case 51 /* ScanCode.Minus */: return 88 /* KeyCode.Minus */;\n            case 52 /* ScanCode.Equal */: return 86 /* KeyCode.Equal */;\n            case 53 /* ScanCode.BracketLeft */: return 92 /* KeyCode.BracketLeft */;\n            case 54 /* ScanCode.BracketRight */: return 94 /* KeyCode.BracketRight */;\n            case 55 /* ScanCode.Backslash */: return 93 /* KeyCode.Backslash */;\n            case 56 /* ScanCode.IntlHash */: return 0 /* KeyCode.Unknown */; // missing\n            case 57 /* ScanCode.Semicolon */: return 85 /* KeyCode.Semicolon */;\n            case 58 /* ScanCode.Quote */: return 95 /* KeyCode.Quote */;\n            case 59 /* ScanCode.Backquote */: return 91 /* KeyCode.Backquote */;\n            case 60 /* ScanCode.Comma */: return 87 /* KeyCode.Comma */;\n            case 61 /* ScanCode.Period */: return 89 /* KeyCode.Period */;\n            case 62 /* ScanCode.Slash */: return 90 /* KeyCode.Slash */;\n            case 106 /* ScanCode.IntlBackslash */: return 97 /* KeyCode.IntlBackslash */;\n        }\n        return 0 /* KeyCode.Unknown */;\n    }\n    static _toKeyCodeChord(chord) {\n        if (!chord) {\n            return null;\n        }\n        if (chord instanceof KeyCodeChord) {\n            return chord;\n        }\n        const keyCode = this._scanCodeToKeyCode(chord.scanCode);\n        if (keyCode === 0 /* KeyCode.Unknown */) {\n            return null;\n        }\n        return new KeyCodeChord(chord.ctrlKey, chord.shiftKey, chord.altKey, chord.metaKey, keyCode);\n    }\n    static resolveKeybinding(keybinding, os) {\n        const chords = toEmptyArrayIfContainsNull(keybinding.chords.map(chord => this._toKeyCodeChord(chord)));\n        if (chords.length > 0) {\n            return [new USLayoutResolvedKeybinding(chords, os)];\n        }\n        return [];\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../nls.js';\nexport var InspectTokensNLS;\n(function (InspectTokensNLS) {\n    InspectTokensNLS.inspectTokensAction = nls.localize('inspectTokens', \"Developer: Inspect Tokens\");\n})(InspectTokensNLS || (InspectTokensNLS = {}));\nexport var GoToLineNLS;\n(function (GoToLineNLS) {\n    GoToLineNLS.gotoLineActionLabel = nls.localize('gotoLineActionLabel', \"Go to Line/Column...\");\n})(GoToLineNLS || (GoToLineNLS = {}));\nexport var QuickHelpNLS;\n(function (QuickHelpNLS) {\n    QuickHelpNLS.helpQuickAccessActionLabel = nls.localize('helpQuickAccess', \"Show all Quick Access Providers\");\n})(QuickHelpNLS || (QuickHelpNLS = {}));\nexport var QuickCommandNLS;\n(function (QuickCommandNLS) {\n    QuickCommandNLS.quickCommandActionLabel = nls.localize('quickCommandActionLabel', \"Command Palette\");\n    QuickCommandNLS.quickCommandHelp = nls.localize('quickCommandActionHelp', \"Show And Run Commands\");\n})(QuickCommandNLS || (QuickCommandNLS = {}));\nexport var QuickOutlineNLS;\n(function (QuickOutlineNLS) {\n    QuickOutlineNLS.quickOutlineActionLabel = nls.localize('quickOutlineActionLabel', \"Go to Symbol...\");\n    QuickOutlineNLS.quickOutlineByCategoryActionLabel = nls.localize('quickOutlineByCategoryActionLabel', \"Go to Symbol by Category...\");\n})(QuickOutlineNLS || (QuickOutlineNLS = {}));\nexport var StandaloneCodeEditorNLS;\n(function (StandaloneCodeEditorNLS) {\n    StandaloneCodeEditorNLS.editorViewAccessibleLabel = nls.localize('editorViewAccessibleLabel', \"Editor content\");\n    StandaloneCodeEditorNLS.accessibilityHelpMessage = nls.localize('accessibilityHelpMessage', \"Press Alt+F1 for Accessibility Options.\");\n})(StandaloneCodeEditorNLS || (StandaloneCodeEditorNLS = {}));\nexport var ToggleHighContrastNLS;\n(function (ToggleHighContrastNLS) {\n    ToggleHighContrastNLS.toggleHighContrast = nls.localize('toggleHighContrast', \"Toggle High Contrast Theme\");\n})(ToggleHighContrastNLS || (ToggleHighContrastNLS = {}));\nexport var StandaloneServicesNLS;\n(function (StandaloneServicesNLS) {\n    StandaloneServicesNLS.bulkEditServiceSummary = nls.localize('bulkEditServiceSummary', \"Made {0} edits in {1} files\");\n})(StandaloneServicesNLS || (StandaloneServicesNLS = {}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const IWorkspaceTrustManagementService = createDecorator('workspaceTrustManagementService');\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BrowserFeatures } from '../../canIUse.js';\nimport * as DOM from '../../dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Range } from '../../../common/range.js';\nimport './contextview.css';\nexport function isAnchor(obj) {\n    const anchor = obj;\n    return !!anchor && typeof anchor.x === 'number' && typeof anchor.y === 'number';\n}\nexport var LayoutAnchorMode;\n(function (LayoutAnchorMode) {\n    LayoutAnchorMode[LayoutAnchorMode[\"AVOID\"] = 0] = \"AVOID\";\n    LayoutAnchorMode[LayoutAnchorMode[\"ALIGN\"] = 1] = \"ALIGN\";\n})(LayoutAnchorMode || (LayoutAnchorMode = {}));\n/**\n * Lays out a one dimensional view next to an anchor in a viewport.\n *\n * @returns The view offset within the viewport.\n */\nexport function layout(viewportSize, viewSize, anchor) {\n    const layoutAfterAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset : anchor.offset + anchor.size;\n    const layoutBeforeAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset + anchor.size : anchor.offset;\n    if (anchor.position === 0 /* LayoutAnchorPosition.Before */) {\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // happy case, lay it out after the anchor\n        }\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // ok case, lay it out before the anchor\n        }\n        return Math.max(viewportSize - viewSize, 0); // sad case, lay it over the anchor\n    }\n    else {\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // happy case, lay it out before the anchor\n        }\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // ok case, lay it out after the anchor\n        }\n        return 0; // sad case, lay it over the anchor\n    }\n}\nexport class ContextView extends Disposable {\n    constructor(container, domPosition) {\n        super();\n        this.container = null;\n        this.useFixedPosition = false;\n        this.useShadowDOM = false;\n        this.delegate = null;\n        this.toDisposeOnClean = Disposable.None;\n        this.toDisposeOnSetContainer = Disposable.None;\n        this.shadowRoot = null;\n        this.shadowRootHostElement = null;\n        this.view = DOM.$('.context-view');\n        DOM.hide(this.view);\n        this.setContainer(container, domPosition);\n        this._register(toDisposable(() => this.setContainer(null, 1 /* ContextViewDOMPosition.ABSOLUTE */)));\n    }\n    setContainer(container, domPosition) {\n        var _a;\n        this.useFixedPosition = domPosition !== 1 /* ContextViewDOMPosition.ABSOLUTE */;\n        const usedShadowDOM = this.useShadowDOM;\n        this.useShadowDOM = domPosition === 3 /* ContextViewDOMPosition.FIXED_SHADOW */;\n        if (container === this.container && usedShadowDOM !== this.useShadowDOM) {\n            return; // container is the same and now shadow DOM usage has changed\n        }\n        if (this.container) {\n            this.toDisposeOnSetContainer.dispose();\n            if (this.shadowRoot) {\n                this.shadowRoot.removeChild(this.view);\n                this.shadowRoot = null;\n                (_a = this.shadowRootHostElement) === null || _a === void 0 ? void 0 : _a.remove();\n                this.shadowRootHostElement = null;\n            }\n            else {\n                this.container.removeChild(this.view);\n            }\n            this.container = null;\n        }\n        if (container) {\n            this.container = container;\n            if (this.useShadowDOM) {\n                this.shadowRootHostElement = DOM.$('.shadow-root-host');\n                this.container.appendChild(this.shadowRootHostElement);\n                this.shadowRoot = this.shadowRootHostElement.attachShadow({ mode: 'open' });\n                const style = document.createElement('style');\n                style.textContent = SHADOW_ROOT_CSS;\n                this.shadowRoot.appendChild(style);\n                this.shadowRoot.appendChild(this.view);\n                this.shadowRoot.appendChild(DOM.$('slot'));\n            }\n            else {\n                this.container.appendChild(this.view);\n            }\n            const toDisposeOnSetContainer = new DisposableStore();\n            ContextView.BUBBLE_UP_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n                    this.onDOMEvent(e, false);\n                }));\n            });\n            ContextView.BUBBLE_DOWN_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n                    this.onDOMEvent(e, true);\n                }, true));\n            });\n            this.toDisposeOnSetContainer = toDisposeOnSetContainer;\n        }\n    }\n    show(delegate) {\n        var _a, _b;\n        if (this.isVisible()) {\n            this.hide();\n        }\n        // Show static box\n        DOM.clearNode(this.view);\n        this.view.className = 'context-view';\n        this.view.style.top = '0px';\n        this.view.style.left = '0px';\n        this.view.style.zIndex = '2575';\n        this.view.style.position = this.useFixedPosition ? 'fixed' : 'absolute';\n        DOM.show(this.view);\n        // Render content\n        this.toDisposeOnClean = delegate.render(this.view) || Disposable.None;\n        // Set active delegate\n        this.delegate = delegate;\n        // Layout\n        this.doLayout();\n        // Focus\n        (_b = (_a = this.delegate).focus) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n    getViewElement() {\n        return this.view;\n    }\n    layout() {\n        if (!this.isVisible()) {\n            return;\n        }\n        if (this.delegate.canRelayout === false && !(platform.isIOS && BrowserFeatures.pointerEvents)) {\n            this.hide();\n            return;\n        }\n        if (this.delegate.layout) {\n            this.delegate.layout();\n        }\n        this.doLayout();\n    }\n    doLayout() {\n        // Check that we still have a delegate - this.delegate.layout may have hidden\n        if (!this.isVisible()) {\n            return;\n        }\n        // Get anchor\n        const anchor = this.delegate.getAnchor();\n        // Compute around\n        let around;\n        // Get the element's position and size (to anchor the view)\n        if (anchor instanceof HTMLElement) {\n            const elementPosition = DOM.getDomNodePagePosition(anchor);\n            // In areas where zoom is applied to the element or its ancestors, we need to adjust the size of the element\n            // e.g. The title bar has counter zoom behavior meaning it applies the inverse of zoom level.\n            // Window Zoom Level: 1.5, Title Bar Zoom: 1/1.5, Size Multiplier: 1.5\n            const zoom = DOM.getDomNodeZoomLevel(anchor);\n            around = {\n                top: elementPosition.top * zoom,\n                left: elementPosition.left * zoom,\n                width: elementPosition.width * zoom,\n                height: elementPosition.height * zoom\n            };\n        }\n        else if (isAnchor(anchor)) {\n            around = {\n                top: anchor.y,\n                left: anchor.x,\n                width: anchor.width || 1,\n                height: anchor.height || 2\n            };\n        }\n        else {\n            around = {\n                top: anchor.posy,\n                left: anchor.posx,\n                // We are about to position the context view where the mouse\n                // cursor is. To prevent the view being exactly under the mouse\n                // when showing and thus potentially triggering an action within,\n                // we treat the mouse location like a small sized block element.\n                width: 2,\n                height: 2\n            };\n        }\n        const viewSizeWidth = DOM.getTotalWidth(this.view);\n        const viewSizeHeight = DOM.getTotalHeight(this.view);\n        const anchorPosition = this.delegate.anchorPosition || 0 /* AnchorPosition.BELOW */;\n        const anchorAlignment = this.delegate.anchorAlignment || 0 /* AnchorAlignment.LEFT */;\n        const anchorAxisAlignment = this.delegate.anchorAxisAlignment || 0 /* AnchorAxisAlignment.VERTICAL */;\n        let top;\n        let left;\n        const activeWindow = DOM.getActiveWindow();\n        if (anchorAxisAlignment === 0 /* AnchorAxisAlignment.VERTICAL */) {\n            const verticalAnchor = { offset: around.top - activeWindow.pageYOffset, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\n            top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\n            // if view intersects vertically with anchor,  we must avoid the anchor\n            if (Range.intersects({ start: top, end: top + viewSizeHeight }, { start: verticalAnchor.offset, end: verticalAnchor.offset + verticalAnchor.size })) {\n                horizontalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\n        }\n        else {\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\n            const verticalAnchor = { offset: around.top, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\n            left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\n            // if view intersects horizontally with anchor, we must avoid the anchor\n            if (Range.intersects({ start: left, end: left + viewSizeWidth }, { start: horizontalAnchor.offset, end: horizontalAnchor.offset + horizontalAnchor.size })) {\n                verticalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\n        }\n        this.view.classList.remove('top', 'bottom', 'left', 'right');\n        this.view.classList.add(anchorPosition === 0 /* AnchorPosition.BELOW */ ? 'bottom' : 'top');\n        this.view.classList.add(anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 'left' : 'right');\n        this.view.classList.toggle('fixed', this.useFixedPosition);\n        const containerPosition = DOM.getDomNodePagePosition(this.container);\n        this.view.style.top = `${top - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).top : containerPosition.top)}px`;\n        this.view.style.left = `${left - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).left : containerPosition.left)}px`;\n        this.view.style.width = 'initial';\n    }\n    hide(data) {\n        const delegate = this.delegate;\n        this.delegate = null;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.onHide) {\n            delegate.onHide(data);\n        }\n        this.toDisposeOnClean.dispose();\n        DOM.hide(this.view);\n    }\n    isVisible() {\n        return !!this.delegate;\n    }\n    onDOMEvent(e, onCapture) {\n        if (this.delegate) {\n            if (this.delegate.onDOMEvent) {\n                this.delegate.onDOMEvent(e, DOM.getWindow(e).document.activeElement);\n            }\n            else if (onCapture && !DOM.isAncestor(e.target, this.container)) {\n                this.hide();\n            }\n        }\n    }\n    dispose() {\n        this.hide();\n        super.dispose();\n    }\n}\nContextView.BUBBLE_UP_EVENTS = ['click', 'keydown', 'focus', 'blur'];\nContextView.BUBBLE_DOWN_EVENTS = ['click'];\nconst SHADOW_ROOT_CSS = /* css */ `\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*='codicon-'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"HelveticaNeue-Light\", system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Hiragino Sans GB\", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang TC\", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, \"Hiragino Kaku Gothic Pro\", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, \"Nanum Gothic\", \"Apple SD Gothic Neo\", \"AppleGothic\", sans-serif; }\n\n\t:host-context(.windows) { font-family: \"Segoe WPC\", \"Segoe UI\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft YaHei\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft Jhenghei\", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Yu Gothic UI\", \"Meiryo UI\", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Malgun Gothic\", \"Dotom\", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans SC\", \"Source Han Sans CN\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans TC\", \"Source Han Sans TW\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans J\", \"Source Han Sans JP\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans K\", \"Source Han Sans JR\", \"Source Han Sans\", \"UnDotum\", \"FBaekmuk Gulim\", sans-serif; }\n`;\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { ContextView } from '../../../base/browser/ui/contextview/contextview.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\nimport { getWindow } from '../../../base/browser/dom.js';\nlet ContextViewService = class ContextViewService extends Disposable {\n    constructor(layoutService) {\n        super();\n        this.layoutService = layoutService;\n        this.currentViewDisposable = Disposable.None;\n        this.contextView = this._register(new ContextView(this.layoutService.mainContainer, 1 /* ContextViewDOMPosition.ABSOLUTE */));\n        this.layout();\n        this._register(layoutService.onDidLayoutContainer(() => this.layout()));\n    }\n    // ContextView\n    showContextView(delegate, container, shadowRoot) {\n        let domPosition;\n        if (container) {\n            if (container === this.layoutService.getContainer(getWindow(container))) {\n                domPosition = 1 /* ContextViewDOMPosition.ABSOLUTE */;\n            }\n            else if (shadowRoot) {\n                domPosition = 3 /* ContextViewDOMPosition.FIXED_SHADOW */;\n            }\n            else {\n                domPosition = 2 /* ContextViewDOMPosition.FIXED */;\n            }\n        }\n        else {\n            domPosition = 1 /* ContextViewDOMPosition.ABSOLUTE */;\n        }\n        this.contextView.setContainer(container !== null && container !== void 0 ? container : this.layoutService.activeContainer, domPosition);\n        this.contextView.show(delegate);\n        const disposable = toDisposable(() => {\n            if (this.currentViewDisposable === disposable) {\n                this.hideContextView();\n            }\n        });\n        this.currentViewDisposable = disposable;\n        return disposable;\n    }\n    getContextViewElement() {\n        return this.contextView.getViewElement();\n    }\n    layout() {\n        this.contextView.layout();\n    }\n    hideContextView(data) {\n        this.contextView.hide(data);\n    }\n    dispose() {\n        super.dispose();\n        this.currentViewDisposable.dispose();\n        this.currentViewDisposable = Disposable.None;\n    }\n};\nContextViewService = __decorate([\n    __param(0, ILayoutService)\n], ContextViewService);\nexport { ContextViewService };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { parse } from '../../../base/common/glob.js';\nimport { Mimes } from '../../../base/common/mime.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { basename, posix } from '../../../base/common/path.js';\nimport { DataUri } from '../../../base/common/resources.js';\nimport { startsWithUTF8BOM } from '../../../base/common/strings.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nlet registeredAssociations = [];\nlet nonUserRegisteredAssociations = [];\nlet userRegisteredAssociations = [];\n/**\n * Associate a language to the registry (platform).\n * * **NOTE**: This association will lose over associations registered using `registerConfiguredLanguageAssociation`.\n * * **NOTE**: Use `clearPlatformLanguageAssociations` to remove all associations registered using this function.\n */\nexport function registerPlatformLanguageAssociation(association, warnOnOverwrite = false) {\n    _registerLanguageAssociation(association, false, warnOnOverwrite);\n}\nfunction _registerLanguageAssociation(association, userConfigured, warnOnOverwrite) {\n    // Register\n    const associationItem = toLanguageAssociationItem(association, userConfigured);\n    registeredAssociations.push(associationItem);\n    if (!associationItem.userConfigured) {\n        nonUserRegisteredAssociations.push(associationItem);\n    }\n    else {\n        userRegisteredAssociations.push(associationItem);\n    }\n    // Check for conflicts unless this is a user configured association\n    if (warnOnOverwrite && !associationItem.userConfigured) {\n        registeredAssociations.forEach(a => {\n            if (a.mime === associationItem.mime || a.userConfigured) {\n                return; // same mime or userConfigured is ok\n            }\n            if (associationItem.extension && a.extension === associationItem.extension) {\n                console.warn(`Overwriting extension <<${associationItem.extension}>> to now point to mime <<${associationItem.mime}>>`);\n            }\n            if (associationItem.filename && a.filename === associationItem.filename) {\n                console.warn(`Overwriting filename <<${associationItem.filename}>> to now point to mime <<${associationItem.mime}>>`);\n            }\n            if (associationItem.filepattern && a.filepattern === associationItem.filepattern) {\n                console.warn(`Overwriting filepattern <<${associationItem.filepattern}>> to now point to mime <<${associationItem.mime}>>`);\n            }\n            if (associationItem.firstline && a.firstline === associationItem.firstline) {\n                console.warn(`Overwriting firstline <<${associationItem.firstline}>> to now point to mime <<${associationItem.mime}>>`);\n            }\n        });\n    }\n}\nfunction toLanguageAssociationItem(association, userConfigured) {\n    return {\n        id: association.id,\n        mime: association.mime,\n        filename: association.filename,\n        extension: association.extension,\n        filepattern: association.filepattern,\n        firstline: association.firstline,\n        userConfigured: userConfigured,\n        filenameLowercase: association.filename ? association.filename.toLowerCase() : undefined,\n        extensionLowercase: association.extension ? association.extension.toLowerCase() : undefined,\n        filepatternLowercase: association.filepattern ? parse(association.filepattern.toLowerCase()) : undefined,\n        filepatternOnPath: association.filepattern ? association.filepattern.indexOf(posix.sep) >= 0 : false\n    };\n}\n/**\n * Clear language associations from the registry (platform).\n */\nexport function clearPlatformLanguageAssociations() {\n    registeredAssociations = registeredAssociations.filter(a => a.userConfigured);\n    nonUserRegisteredAssociations = [];\n}\n/**\n * @see `getMimeTypes`\n */\nexport function getLanguageIds(resource, firstLine) {\n    return getAssociations(resource, firstLine).map(item => item.id);\n}\nfunction getAssociations(resource, firstLine) {\n    let path;\n    if (resource) {\n        switch (resource.scheme) {\n            case Schemas.file:\n                path = resource.fsPath;\n                break;\n            case Schemas.data: {\n                const metadata = DataUri.parseMetaData(resource);\n                path = metadata.get(DataUri.META_DATA_LABEL);\n                break;\n            }\n            case Schemas.vscodeNotebookCell:\n                // File path not relevant for language detection of cell\n                path = undefined;\n                break;\n            default:\n                path = resource.path;\n        }\n    }\n    if (!path) {\n        return [{ id: 'unknown', mime: Mimes.unknown }];\n    }\n    path = path.toLowerCase();\n    const filename = basename(path);\n    // 1.) User configured mappings have highest priority\n    const configuredLanguage = getAssociationByPath(path, filename, userRegisteredAssociations);\n    if (configuredLanguage) {\n        return [configuredLanguage, { id: PLAINTEXT_LANGUAGE_ID, mime: Mimes.text }];\n    }\n    // 2.) Registered mappings have middle priority\n    const registeredLanguage = getAssociationByPath(path, filename, nonUserRegisteredAssociations);\n    if (registeredLanguage) {\n        return [registeredLanguage, { id: PLAINTEXT_LANGUAGE_ID, mime: Mimes.text }];\n    }\n    // 3.) Firstline has lowest priority\n    if (firstLine) {\n        const firstlineLanguage = getAssociationByFirstline(firstLine);\n        if (firstlineLanguage) {\n            return [firstlineLanguage, { id: PLAINTEXT_LANGUAGE_ID, mime: Mimes.text }];\n        }\n    }\n    return [{ id: 'unknown', mime: Mimes.unknown }];\n}\nfunction getAssociationByPath(path, filename, associations) {\n    var _a;\n    let filenameMatch = undefined;\n    let patternMatch = undefined;\n    let extensionMatch = undefined;\n    // We want to prioritize associations based on the order they are registered so that the last registered\n    // association wins over all other. This is for https://github.com/microsoft/vscode/issues/20074\n    for (let i = associations.length - 1; i >= 0; i--) {\n        const association = associations[i];\n        // First exact name match\n        if (filename === association.filenameLowercase) {\n            filenameMatch = association;\n            break; // take it!\n        }\n        // Longest pattern match\n        if (association.filepattern) {\n            if (!patternMatch || association.filepattern.length > patternMatch.filepattern.length) {\n                const target = association.filepatternOnPath ? path : filename; // match on full path if pattern contains path separator\n                if ((_a = association.filepatternLowercase) === null || _a === void 0 ? void 0 : _a.call(association, target)) {\n                    patternMatch = association;\n                }\n            }\n        }\n        // Longest extension match\n        if (association.extension) {\n            if (!extensionMatch || association.extension.length > extensionMatch.extension.length) {\n                if (filename.endsWith(association.extensionLowercase)) {\n                    extensionMatch = association;\n                }\n            }\n        }\n    }\n    // 1.) Exact name match has second highest priority\n    if (filenameMatch) {\n        return filenameMatch;\n    }\n    // 2.) Match on pattern\n    if (patternMatch) {\n        return patternMatch;\n    }\n    // 3.) Match on extension comes next\n    if (extensionMatch) {\n        return extensionMatch;\n    }\n    return undefined;\n}\nfunction getAssociationByFirstline(firstLine) {\n    if (startsWithUTF8BOM(firstLine)) {\n        firstLine = firstLine.substr(1);\n    }\n    if (firstLine.length > 0) {\n        // We want to prioritize associations based on the order they are registered so that the last registered\n        // association wins over all other. This is for https://github.com/microsoft/vscode/issues/20074\n        for (let i = registeredAssociations.length - 1; i >= 0; i--) {\n            const association = registeredAssociations[i];\n            if (!association.firstline) {\n                continue;\n            }\n            const matches = firstLine.match(association.firstline);\n            if (matches && matches.length > 0) {\n                return association;\n            }\n        }\n    }\n    return undefined;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { regExpLeadsToEndlessLoop } from '../../../base/common/strings.js';\nimport { clearPlatformLanguageAssociations, getLanguageIds, registerPlatformLanguageAssociation } from './languagesAssociations.js';\nimport { ModesRegistry, PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nimport { Extensions } from '../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst NULL_LANGUAGE_ID = 'vs.editor.nullLanguage';\nexport class LanguageIdCodec {\n    constructor() {\n        this._languageIdToLanguage = [];\n        this._languageToLanguageId = new Map();\n        this._register(NULL_LANGUAGE_ID, 0 /* LanguageId.Null */);\n        this._register(PLAINTEXT_LANGUAGE_ID, 1 /* LanguageId.PlainText */);\n        this._nextLanguageId = 2;\n    }\n    _register(language, languageId) {\n        this._languageIdToLanguage[languageId] = language;\n        this._languageToLanguageId.set(language, languageId);\n    }\n    register(language) {\n        if (this._languageToLanguageId.has(language)) {\n            return;\n        }\n        const languageId = this._nextLanguageId++;\n        this._register(language, languageId);\n    }\n    encodeLanguageId(languageId) {\n        return this._languageToLanguageId.get(languageId) || 0 /* LanguageId.Null */;\n    }\n    decodeLanguageId(languageId) {\n        return this._languageIdToLanguage[languageId] || NULL_LANGUAGE_ID;\n    }\n}\nexport class LanguagesRegistry extends Disposable {\n    constructor(useModesRegistry = true, warnOnOverwrite = false) {\n        super();\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        LanguagesRegistry.instanceCount++;\n        this._warnOnOverwrite = warnOnOverwrite;\n        this.languageIdCodec = new LanguageIdCodec();\n        this._dynamicLanguages = [];\n        this._languages = {};\n        this._mimeTypesMap = {};\n        this._nameMap = {};\n        this._lowercaseNameMap = {};\n        if (useModesRegistry) {\n            this._initializeFromRegistry();\n            this._register(ModesRegistry.onDidChangeLanguages((m) => {\n                this._initializeFromRegistry();\n            }));\n        }\n    }\n    dispose() {\n        LanguagesRegistry.instanceCount--;\n        super.dispose();\n    }\n    _initializeFromRegistry() {\n        this._languages = {};\n        this._mimeTypesMap = {};\n        this._nameMap = {};\n        this._lowercaseNameMap = {};\n        clearPlatformLanguageAssociations();\n        const desc = [].concat(ModesRegistry.getLanguages()).concat(this._dynamicLanguages);\n        this._registerLanguages(desc);\n    }\n    _registerLanguages(desc) {\n        for (const d of desc) {\n            this._registerLanguage(d);\n        }\n        // Rebuild fast path maps\n        this._mimeTypesMap = {};\n        this._nameMap = {};\n        this._lowercaseNameMap = {};\n        Object.keys(this._languages).forEach((langId) => {\n            const language = this._languages[langId];\n            if (language.name) {\n                this._nameMap[language.name] = language.identifier;\n            }\n            language.aliases.forEach((alias) => {\n                this._lowercaseNameMap[alias.toLowerCase()] = language.identifier;\n            });\n            language.mimetypes.forEach((mimetype) => {\n                this._mimeTypesMap[mimetype] = language.identifier;\n            });\n        });\n        Registry.as(Extensions.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds());\n        this._onDidChange.fire();\n    }\n    _registerLanguage(lang) {\n        const langId = lang.id;\n        let resolvedLanguage;\n        if (hasOwnProperty.call(this._languages, langId)) {\n            resolvedLanguage = this._languages[langId];\n        }\n        else {\n            this.languageIdCodec.register(langId);\n            resolvedLanguage = {\n                identifier: langId,\n                name: null,\n                mimetypes: [],\n                aliases: [],\n                extensions: [],\n                filenames: [],\n                configurationFiles: [],\n                icons: []\n            };\n            this._languages[langId] = resolvedLanguage;\n        }\n        this._mergeLanguage(resolvedLanguage, lang);\n    }\n    _mergeLanguage(resolvedLanguage, lang) {\n        const langId = lang.id;\n        let primaryMime = null;\n        if (Array.isArray(lang.mimetypes) && lang.mimetypes.length > 0) {\n            resolvedLanguage.mimetypes.push(...lang.mimetypes);\n            primaryMime = lang.mimetypes[0];\n        }\n        if (!primaryMime) {\n            primaryMime = `text/x-${langId}`;\n            resolvedLanguage.mimetypes.push(primaryMime);\n        }\n        if (Array.isArray(lang.extensions)) {\n            if (lang.configuration) {\n                // insert first as this appears to be the 'primary' language definition\n                resolvedLanguage.extensions = lang.extensions.concat(resolvedLanguage.extensions);\n            }\n            else {\n                resolvedLanguage.extensions = resolvedLanguage.extensions.concat(lang.extensions);\n            }\n            for (const extension of lang.extensions) {\n                registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, extension: extension }, this._warnOnOverwrite);\n            }\n        }\n        if (Array.isArray(lang.filenames)) {\n            for (const filename of lang.filenames) {\n                registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, filename: filename }, this._warnOnOverwrite);\n                resolvedLanguage.filenames.push(filename);\n            }\n        }\n        if (Array.isArray(lang.filenamePatterns)) {\n            for (const filenamePattern of lang.filenamePatterns) {\n                registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, filepattern: filenamePattern }, this._warnOnOverwrite);\n            }\n        }\n        if (typeof lang.firstLine === 'string' && lang.firstLine.length > 0) {\n            let firstLineRegexStr = lang.firstLine;\n            if (firstLineRegexStr.charAt(0) !== '^') {\n                firstLineRegexStr = '^' + firstLineRegexStr;\n            }\n            try {\n                const firstLineRegex = new RegExp(firstLineRegexStr);\n                if (!regExpLeadsToEndlessLoop(firstLineRegex)) {\n                    registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, firstline: firstLineRegex }, this._warnOnOverwrite);\n                }\n            }\n            catch (err) {\n                // Most likely, the regex was bad\n                console.warn(`[${lang.id}]: Invalid regular expression \\`${firstLineRegexStr}\\`: `, err);\n            }\n        }\n        resolvedLanguage.aliases.push(langId);\n        let langAliases = null;\n        if (typeof lang.aliases !== 'undefined' && Array.isArray(lang.aliases)) {\n            if (lang.aliases.length === 0) {\n                // signal that this language should not get a name\n                langAliases = [null];\n            }\n            else {\n                langAliases = lang.aliases;\n            }\n        }\n        if (langAliases !== null) {\n            for (const langAlias of langAliases) {\n                if (!langAlias || langAlias.length === 0) {\n                    continue;\n                }\n                resolvedLanguage.aliases.push(langAlias);\n            }\n        }\n        const containsAliases = (langAliases !== null && langAliases.length > 0);\n        if (containsAliases && langAliases[0] === null) {\n            // signal that this language should not get a name\n        }\n        else {\n            const bestName = (containsAliases ? langAliases[0] : null) || langId;\n            if (containsAliases || !resolvedLanguage.name) {\n                resolvedLanguage.name = bestName;\n            }\n        }\n        if (lang.configuration) {\n            resolvedLanguage.configurationFiles.push(lang.configuration);\n        }\n        if (lang.icon) {\n            resolvedLanguage.icons.push(lang.icon);\n        }\n    }\n    isRegisteredLanguageId(languageId) {\n        if (!languageId) {\n            return false;\n        }\n        return hasOwnProperty.call(this._languages, languageId);\n    }\n    getRegisteredLanguageIds() {\n        return Object.keys(this._languages);\n    }\n    getLanguageIdByLanguageName(languageName) {\n        const languageNameLower = languageName.toLowerCase();\n        if (!hasOwnProperty.call(this._lowercaseNameMap, languageNameLower)) {\n            return null;\n        }\n        return this._lowercaseNameMap[languageNameLower];\n    }\n    getLanguageIdByMimeType(mimeType) {\n        if (!mimeType) {\n            return null;\n        }\n        if (hasOwnProperty.call(this._mimeTypesMap, mimeType)) {\n            return this._mimeTypesMap[mimeType];\n        }\n        return null;\n    }\n    guessLanguageIdByFilepathOrFirstLine(resource, firstLine) {\n        if (!resource && !firstLine) {\n            return [];\n        }\n        return getLanguageIds(resource, firstLine);\n    }\n}\nLanguagesRegistry.instanceCount = 0;\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { LanguagesRegistry } from './languagesRegistry.js';\nimport { firstOrDefault } from '../../../base/common/arrays.js';\nimport { TokenizationRegistry } from '../languages.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nexport class LanguageService extends Disposable {\n    constructor(warnOnOverwrite = false) {\n        super();\n        this._onDidRequestBasicLanguageFeatures = this._register(new Emitter());\n        this.onDidRequestBasicLanguageFeatures = this._onDidRequestBasicLanguageFeatures.event;\n        this._onDidRequestRichLanguageFeatures = this._register(new Emitter());\n        this.onDidRequestRichLanguageFeatures = this._onDidRequestRichLanguageFeatures.event;\n        this._onDidChange = this._register(new Emitter({ leakWarningThreshold: 200 /* https://github.com/microsoft/vscode/issues/119968 */ }));\n        this.onDidChange = this._onDidChange.event;\n        this._requestedBasicLanguages = new Set();\n        this._requestedRichLanguages = new Set();\n        LanguageService.instanceCount++;\n        this._registry = this._register(new LanguagesRegistry(true, warnOnOverwrite));\n        this.languageIdCodec = this._registry.languageIdCodec;\n        this._register(this._registry.onDidChange(() => this._onDidChange.fire()));\n    }\n    dispose() {\n        LanguageService.instanceCount--;\n        super.dispose();\n    }\n    isRegisteredLanguageId(languageId) {\n        return this._registry.isRegisteredLanguageId(languageId);\n    }\n    getLanguageIdByLanguageName(languageName) {\n        return this._registry.getLanguageIdByLanguageName(languageName);\n    }\n    getLanguageIdByMimeType(mimeType) {\n        return this._registry.getLanguageIdByMimeType(mimeType);\n    }\n    guessLanguageIdByFilepathOrFirstLine(resource, firstLine) {\n        const languageIds = this._registry.guessLanguageIdByFilepathOrFirstLine(resource, firstLine);\n        return firstOrDefault(languageIds, null);\n    }\n    createById(languageId) {\n        return new LanguageSelection(this.onDidChange, () => {\n            return this._createAndGetLanguageIdentifier(languageId);\n        });\n    }\n    createByFilepathOrFirstLine(resource, firstLine) {\n        return new LanguageSelection(this.onDidChange, () => {\n            const languageId = this.guessLanguageIdByFilepathOrFirstLine(resource, firstLine);\n            return this._createAndGetLanguageIdentifier(languageId);\n        });\n    }\n    _createAndGetLanguageIdentifier(languageId) {\n        if (!languageId || !this.isRegisteredLanguageId(languageId)) {\n            // Fall back to plain text if language is unknown\n            languageId = PLAINTEXT_LANGUAGE_ID;\n        }\n        return languageId;\n    }\n    requestBasicLanguageFeatures(languageId) {\n        if (!this._requestedBasicLanguages.has(languageId)) {\n            this._requestedBasicLanguages.add(languageId);\n            this._onDidRequestBasicLanguageFeatures.fire(languageId);\n        }\n    }\n    requestRichLanguageFeatures(languageId) {\n        if (!this._requestedRichLanguages.has(languageId)) {\n            this._requestedRichLanguages.add(languageId);\n            // Ensure basic features are requested\n            this.requestBasicLanguageFeatures(languageId);\n            // Ensure tokenizers are created\n            TokenizationRegistry.getOrCreate(languageId);\n            this._onDidRequestRichLanguageFeatures.fire(languageId);\n        }\n    }\n}\nLanguageService.instanceCount = 0;\nclass LanguageSelection {\n    constructor(_onDidChangeLanguages, _selector) {\n        this._onDidChangeLanguages = _onDidChangeLanguages;\n        this._selector = _selector;\n        this._listener = null;\n        this._emitter = null;\n        this.languageId = this._selector();\n    }\n    _dispose() {\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = null;\n        }\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = null;\n        }\n    }\n    get onDidChange() {\n        if (!this._listener) {\n            this._listener = this._onDidChangeLanguages(() => this._evaluate());\n        }\n        if (!this._emitter) {\n            this._emitter = new Emitter({\n                onDidRemoveLastListener: () => {\n                    this._dispose();\n                }\n            });\n        }\n        return this._emitter.event;\n    }\n    _evaluate() {\n        var _a;\n        const languageId = this._selector();\n        if (languageId === this.languageId) {\n            // no change\n            return;\n        }\n        this.languageId = languageId;\n        (_a = this._emitter) === null || _a === void 0 ? void 0 : _a.fire(this.languageId);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { $, addDisposableListener, append, clearNode, createStyleSheet, Dimension, EventHelper, EventType, getActiveElement, getWindow, isAncestor, isInShadowDOM } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { ActionViewItem, BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { layout } from '../contextview/contextview.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { EmptySubmenuAction, Separator, SubmenuAction } from '../../../common/actions.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Codicon, getCodiconFontCharacters } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\nimport * as strings from '../../../common/strings.js';\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\nexport var Direction;\n(function (Direction) {\n    Direction[Direction[\"Right\"] = 0] = \"Right\";\n    Direction[Direction[\"Left\"] = 1] = \"Left\";\n})(Direction || (Direction = {}));\nexport class Menu extends ActionBar {\n    constructor(container, actions, options, menuStyles) {\n        container.classList.add('monaco-menu-container');\n        container.setAttribute('role', 'presentation');\n        const menuElement = document.createElement('div');\n        menuElement.classList.add('monaco-menu');\n        menuElement.setAttribute('role', 'presentation');\n        super(menuElement, {\n            orientation: 1 /* ActionsOrientation.VERTICAL */,\n            actionViewItemProvider: action => this.doGetActionViewItem(action, options, parentData),\n            context: options.context,\n            actionRunner: options.actionRunner,\n            ariaLabel: options.ariaLabel,\n            ariaRole: 'menu',\n            focusOnlyEnabledItems: true,\n            triggerKeys: { keys: [3 /* KeyCode.Enter */, ...(isMacintosh || isLinux ? [10 /* KeyCode.Space */] : [])], keyDown: true }\n        });\n        this.menuStyles = menuStyles;\n        this.menuElement = menuElement;\n        this.actionsList.tabIndex = 0;\n        this.initializeOrUpdateStyleSheet(container, menuStyles);\n        this._register(Gesture.addTarget(menuElement));\n        this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            // Stop tab navigation of menus\n            if (event.equals(2 /* KeyCode.Tab */)) {\n                e.preventDefault();\n            }\n        }));\n        if (options.enableMnemonics) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n                const key = e.key.toLocaleLowerCase();\n                if (this.mnemonics.has(key)) {\n                    EventHelper.stop(e, true);\n                    const actions = this.mnemonics.get(key);\n                    if (actions.length === 1) {\n                        if (actions[0] instanceof SubmenuMenuActionViewItem && actions[0].container) {\n                            this.focusItemByElement(actions[0].container);\n                        }\n                        actions[0].onClick(e);\n                    }\n                    if (actions.length > 1) {\n                        const action = actions.shift();\n                        if (action && action.container) {\n                            this.focusItemByElement(action.container);\n                            actions.push(action);\n                        }\n                        this.mnemonics.set(key, actions);\n                    }\n                }\n            }));\n        }\n        if (isLinux) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {\n                    this.focusedItem = this.viewItems.length - 1;\n                    this.focusNext();\n                    EventHelper.stop(e, true);\n                }\n                else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {\n                    this.focusedItem = 0;\n                    this.focusPrevious();\n                    EventHelper.stop(e, true);\n                }\n            }));\n        }\n        this._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\n            const relatedTarget = e.relatedTarget;\n            if (!isAncestor(relatedTarget, this.domNode)) {\n                this.focusedItem = undefined;\n                this.updateFocus();\n                e.stopPropagation();\n            }\n        }));\n        this._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\n            let target = e.target;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        // Support touch on actions list to focus items (needed for submenus)\n        this._register(Gesture.addTarget(this.actionsList));\n        this._register(addDisposableListener(this.actionsList, TouchEventType.Tap, e => {\n            let target = e.initialTarget;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        const parentData = {\n            parent: this\n        };\n        this.mnemonics = new Map();\n        // Scroll Logic\n        this.scrollableElement = this._register(new DomScrollableElement(menuElement, {\n            alwaysConsumeMouseWheel: true,\n            horizontal: 2 /* ScrollbarVisibility.Hidden */,\n            vertical: 3 /* ScrollbarVisibility.Visible */,\n            verticalScrollbarSize: 7,\n            handleMouseWheel: true,\n            useShadows: true\n        }));\n        const scrollElement = this.scrollableElement.getDomNode();\n        scrollElement.style.position = '';\n        this.styleScrollElement(scrollElement, menuStyles);\n        // Support scroll on menu drag\n        this._register(addDisposableListener(menuElement, TouchEventType.Change, e => {\n            EventHelper.stop(e, true);\n            const scrollTop = this.scrollableElement.getScrollPosition().scrollTop;\n            this.scrollableElement.setScrollPosition({ scrollTop: scrollTop - e.translationY });\n        }));\n        this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, e => {\n            // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n            e.preventDefault();\n        }));\n        const window = getWindow(container);\n        menuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35)}px`;\n        actions = actions.filter(a => {\n            var _a;\n            if ((_a = options.submenuIds) === null || _a === void 0 ? void 0 : _a.has(a.id)) {\n                console.warn(`Found submenu cycle: ${a.id}`);\n                return false;\n            }\n            return true;\n        });\n        this.push(actions, { icon: true, label: true, isMenu: true });\n        container.appendChild(this.scrollableElement.getDomNode());\n        this.scrollableElement.scanDomNode();\n        this.viewItems.filter(item => !(item instanceof MenuSeparatorActionViewItem)).forEach((item, index, array) => {\n            item.updatePositionInSet(index + 1, array.length);\n        });\n    }\n    initializeOrUpdateStyleSheet(container, style) {\n        if (!this.styleSheet) {\n            if (isInShadowDOM(container)) {\n                this.styleSheet = createStyleSheet(container);\n            }\n            else {\n                if (!Menu.globalStyleSheet) {\n                    Menu.globalStyleSheet = createStyleSheet();\n                }\n                this.styleSheet = Menu.globalStyleSheet;\n            }\n        }\n        this.styleSheet.textContent = getMenuWidgetCSS(style, isInShadowDOM(container));\n    }\n    styleScrollElement(scrollElement, style) {\n        var _a, _b;\n        const fgColor = (_a = style.foregroundColor) !== null && _a !== void 0 ? _a : '';\n        const bgColor = (_b = style.backgroundColor) !== null && _b !== void 0 ? _b : '';\n        const border = style.borderColor ? `1px solid ${style.borderColor}` : '';\n        const borderRadius = '5px';\n        const shadow = style.shadowColor ? `0 2px 8px ${style.shadowColor}` : '';\n        scrollElement.style.outline = border;\n        scrollElement.style.borderRadius = borderRadius;\n        scrollElement.style.color = fgColor;\n        scrollElement.style.backgroundColor = bgColor;\n        scrollElement.style.boxShadow = shadow;\n    }\n    getContainer() {\n        return this.scrollableElement.getDomNode();\n    }\n    get onScroll() {\n        return this.scrollableElement.onScroll;\n    }\n    focusItemByElement(element) {\n        const lastFocusedItem = this.focusedItem;\n        this.setFocusedItem(element);\n        if (lastFocusedItem !== this.focusedItem) {\n            this.updateFocus();\n        }\n    }\n    setFocusedItem(element) {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (element === elem) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    }\n    updateFocus(fromRight) {\n        super.updateFocus(fromRight, true, true);\n        if (typeof this.focusedItem !== 'undefined') {\n            // Workaround for #80047 caused by an issue in chromium\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\n            this.scrollableElement.setScrollPosition({\n                scrollTop: Math.round(this.menuElement.scrollTop)\n            });\n        }\n    }\n    doGetActionViewItem(action, options, parentData) {\n        if (action instanceof Separator) {\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true }, this.menuStyles);\n        }\n        else if (action instanceof SubmenuAction) {\n            const menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, { ...options, submenuIds: new Set([...(options.submenuIds || []), action.id]) }, this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n        else {\n            const menuItemOptions = { enableMnemonics: options.enableMnemonics, useEventAsContext: options.useEventAsContext };\n            if (options.getKeyBinding) {\n                const keybinding = options.getKeyBinding(action);\n                if (keybinding) {\n                    const keybindingLabel = keybinding.getLabel();\n                    if (keybindingLabel) {\n                        menuItemOptions.keybinding = keybindingLabel;\n                    }\n                }\n            }\n            const menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions, this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n    }\n}\nclass BaseMenuActionViewItem extends BaseActionViewItem {\n    constructor(ctx, action, options, menuStyle) {\n        options.isMenu = true;\n        super(action, action, options);\n        this.menuStyle = menuStyle;\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n        // Set mnemonic\n        if (this.options.label && options.enableMnemonics) {\n            const label = this.action.label;\n            if (label) {\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\n                }\n            }\n        }\n        // Add mouse up listener later to avoid accidental clicks\n        this.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\n            if (!this.element) {\n                return;\n            }\n            this._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\n                // removed default prevention as it conflicts\n                // with BaseActionViewItem #101537\n                // add back if issues arise and link new issue\n                EventHelper.stop(e, true);\n                // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n                // > Writing to the clipboard\n                // > You can use the \"cut\" and \"copy\" commands without any special\n                // permission if you are using them in a short-lived event handler\n                // for a user action (for example, a click handler).\n                // => to get the Copy and Paste context menu actions working on Firefox,\n                // there should be no timeout here\n                if (isFirefox) {\n                    const mouseEvent = new StandardMouseEvent(getWindow(this.element), e);\n                    // Allowing right click to trigger the event causes the issue described below,\n                    // but since the solution below does not work in FF, we must disable right click\n                    if (mouseEvent.rightButton) {\n                        return;\n                    }\n                    this.onClick(e);\n                }\n                // In all other cases, set timeout to allow context menu cancellation to trigger\n                // otherwise the action will destroy the menu and a second context menu\n                // will still trigger for right click.\n                else {\n                    setTimeout(() => {\n                        this.onClick(e);\n                    }, 0);\n                }\n            }));\n            this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => {\n                EventHelper.stop(e, true);\n            }));\n        }, 100);\n        this._register(this.runOnceToEnableMouseUp);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        this.container = container;\n        this.item = append(this.element, $('a.action-menu-item'));\n        if (this._action.id === Separator.ID) {\n            // A separator is a presentation item\n            this.item.setAttribute('role', 'presentation');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            if (this.mnemonic) {\n                this.item.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);\n            }\n        }\n        this.check = append(this.item, $('span.menu-item-check' + ThemeIcon.asCSSSelector(Codicon.menuSelection)));\n        this.check.setAttribute('role', 'none');\n        this.label = append(this.item, $('span.action-label'));\n        if (this.options.label && this.options.keybinding) {\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n        }\n        // Adds mouse up listener to actually run the action\n        this.runOnceToEnableMouseUp.schedule();\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n        this.applyStyle();\n    }\n    blur() {\n        super.blur();\n        this.applyStyle();\n    }\n    focus() {\n        var _a;\n        super.focus();\n        (_a = this.item) === null || _a === void 0 ? void 0 : _a.focus();\n        this.applyStyle();\n    }\n    updatePositionInSet(pos, setSize) {\n        if (this.item) {\n            this.item.setAttribute('aria-posinset', `${pos}`);\n            this.item.setAttribute('aria-setsize', `${setSize}`);\n        }\n    }\n    updateLabel() {\n        var _a;\n        if (!this.label) {\n            return;\n        }\n        if (this.options.label) {\n            clearNode(this.label);\n            let label = stripIcons(this.action.label);\n            if (label) {\n                const cleanLabel = cleanMnemonic(label);\n                if (!this.options.enableMnemonics) {\n                    label = cleanLabel;\n                }\n                this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    label = strings.escape(label);\n                    // This is global, reset it\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n                    let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    // We can't use negative lookbehind so if we match our negative and skip\n                    while (escMatch && escMatch[1]) {\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    }\n                    const replaceDoubleEscapes = (str) => str.replace(/&amp;&amp;/g, '&amp;');\n                    if (escMatch) {\n                        this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', { 'aria-hidden': 'true' }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\n                    }\n                    else {\n                        this.label.innerText = replaceDoubleEscapes(label).trim();\n                    }\n                    (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\n                }\n                else {\n                    this.label.innerText = label.replace(/&&/g, '&').trim();\n                }\n            }\n        }\n    }\n    updateTooltip() {\n        // menus should function like native menus and they do not have tooltips\n    }\n    updateClass() {\n        if (this.cssClass && this.item) {\n            this.item.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon && this.label) {\n            this.cssClass = this.action.class || '';\n            this.label.classList.add('icon');\n            if (this.cssClass) {\n                this.label.classList.add(...this.cssClass.split(' '));\n            }\n            this.updateEnabled();\n        }\n        else if (this.label) {\n            this.label.classList.remove('icon');\n        }\n    }\n    updateEnabled() {\n        if (this.action.enabled) {\n            if (this.element) {\n                this.element.classList.remove('disabled');\n                this.element.removeAttribute('aria-disabled');\n            }\n            if (this.item) {\n                this.item.classList.remove('disabled');\n                this.item.removeAttribute('aria-disabled');\n                this.item.tabIndex = 0;\n            }\n        }\n        else {\n            if (this.element) {\n                this.element.classList.add('disabled');\n                this.element.setAttribute('aria-disabled', 'true');\n            }\n            if (this.item) {\n                this.item.classList.add('disabled');\n                this.item.setAttribute('aria-disabled', 'true');\n            }\n        }\n    }\n    updateChecked() {\n        if (!this.item) {\n            return;\n        }\n        const checked = this.action.checked;\n        this.item.classList.toggle('checked', !!checked);\n        if (checked !== undefined) {\n            this.item.setAttribute('role', 'menuitemcheckbox');\n            this.item.setAttribute('aria-checked', checked ? 'true' : 'false');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            this.item.setAttribute('aria-checked', '');\n        }\n    }\n    getMnemonic() {\n        return this.mnemonic;\n    }\n    applyStyle() {\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\n        const outline = isSelected && this.menuStyle.selectionBorderColor ? `1px solid ${this.menuStyle.selectionBorderColor}` : '';\n        const outlineOffset = isSelected && this.menuStyle.selectionBorderColor ? `-1px` : '';\n        if (this.item) {\n            this.item.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n            this.item.style.backgroundColor = bgColor !== null && bgColor !== void 0 ? bgColor : '';\n            this.item.style.outline = outline;\n            this.item.style.outlineOffset = outlineOffset;\n        }\n        if (this.check) {\n            this.check.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n        }\n    }\n}\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\n    constructor(action, submenuActions, parentData, submenuOptions, menuStyles) {\n        super(action, action, submenuOptions, menuStyles);\n        this.submenuActions = submenuActions;\n        this.parentData = parentData;\n        this.submenuOptions = submenuOptions;\n        this.mysubmenu = null;\n        this.submenuDisposables = this._register(new DisposableStore());\n        this.mouseOver = false;\n        this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : Direction.Right;\n        this.showScheduler = new RunOnceScheduler(() => {\n            if (this.mouseOver) {\n                this.cleanupExistingSubmenu(false);\n                this.createSubmenu(false);\n            }\n        }, 250);\n        this.hideScheduler = new RunOnceScheduler(() => {\n            if (this.element && (!isAncestor(getActiveElement(), this.element) && this.parentData.submenu === this.mysubmenu)) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }, 750);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        if (this.item) {\n            this.item.classList.add('monaco-submenu-item');\n            this.item.tabIndex = 0;\n            this.item.setAttribute('aria-haspopup', 'true');\n            this.updateAriaExpanded('false');\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator' + ThemeIcon.asCSSSelector(Codicon.menuSubmenu)));\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\n        }\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                EventHelper.stop(e, true);\n                this.createSubmenu(true);\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (getActiveElement() === this.item) {\n                if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                    EventHelper.stop(e, true);\n                }\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\n            if (!this.mouseOver) {\n                this.mouseOver = true;\n                this.showScheduler.schedule();\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\n            this.mouseOver = false;\n        }));\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\n            if (this.element && !isAncestor(getActiveElement(), this.element)) {\n                this.hideScheduler.schedule();\n            }\n        }));\n        this._register(this.parentData.parent.onScroll(() => {\n            if (this.parentData.submenu === this.mysubmenu) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }));\n    }\n    updateEnabled() {\n        // override on submenu entry\n        // native menus do not observe enablement on sumbenus\n        // we mimic that behavior\n    }\n    onClick(e) {\n        // stop clicking from trying to run an action\n        EventHelper.stop(e, true);\n        this.cleanupExistingSubmenu(false);\n        this.createSubmenu(true);\n    }\n    cleanupExistingSubmenu(force) {\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\n            // disposal may throw if the submenu has already been removed\n            try {\n                this.parentData.submenu.dispose();\n            }\n            catch (_a) { }\n            this.parentData.submenu = undefined;\n            this.updateAriaExpanded('false');\n            if (this.submenuContainer) {\n                this.submenuDisposables.clear();\n                this.submenuContainer = undefined;\n            }\n        }\n    }\n    calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\n        const ret = { top: 0, left: 0 };\n        // Start with horizontal\n        ret.left = layout(windowDimensions.width, submenu.width, { position: expandDirection === Direction.Right ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, offset: entry.left, size: entry.width });\n        // We don't have enough room to layout the menu fully, so we are overlapping the menu\n        if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\n            if (entry.left + 10 + submenu.width <= windowDimensions.width) {\n                ret.left = entry.left + 10;\n            }\n            entry.top += 10;\n            entry.height = 0;\n        }\n        // Now that we have a horizontal position, try layout vertically\n        ret.top = layout(windowDimensions.height, submenu.height, { position: 0 /* LayoutAnchorPosition.Before */, offset: entry.top, size: 0 });\n        // We didn't have enough room below, but we did above, so we shift down to align the menu\n        if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\n            ret.top += entry.height;\n        }\n        return ret;\n    }\n    createSubmenu(selectFirstItem = true) {\n        if (!this.element) {\n            return;\n        }\n        if (!this.parentData.submenu) {\n            this.updateAriaExpanded('true');\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\n            this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view');\n            // Set the top value of the menu container before construction\n            // This allows the menu constructor to calculate the proper max height\n            const computedStyles = getWindow(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode);\n            const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n            // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n            this.submenuContainer.style.zIndex = '1';\n            this.submenuContainer.style.position = 'fixed';\n            this.submenuContainer.style.top = '0';\n            this.submenuContainer.style.left = '0';\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions, this.menuStyle);\n            // layout submenu\n            const entryBox = this.element.getBoundingClientRect();\n            const entryBoxUpdated = {\n                top: entryBox.top - paddingTop,\n                left: entryBox.left,\n                height: entryBox.height + 2 * paddingTop,\n                width: entryBox.width\n            };\n            const viewBox = this.submenuContainer.getBoundingClientRect();\n            const window = getWindow(this.element);\n            const { top, left } = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection);\n            // subtract offsets caused by transform parent\n            this.submenuContainer.style.left = `${left - viewBox.left}px`;\n            this.submenuContainer.style.top = `${top - viewBox.top}px`;\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                    this.parentData.parent.focus();\n                    this.cleanupExistingSubmenu(true);\n                }\n            }));\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                }\n            }));\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(() => {\n                this.parentData.parent.focus();\n                this.cleanupExistingSubmenu(true);\n            }));\n            this.parentData.submenu.focus(selectFirstItem);\n            this.mysubmenu = this.parentData.submenu;\n        }\n        else {\n            this.parentData.submenu.focus(false);\n        }\n    }\n    updateAriaExpanded(value) {\n        var _a;\n        if (this.item) {\n            (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\n        }\n    }\n    applyStyle() {\n        super.applyStyle();\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        if (this.submenuIndicator) {\n            this.submenuIndicator.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hideScheduler.dispose();\n        if (this.mysubmenu) {\n            this.mysubmenu.dispose();\n            this.mysubmenu = null;\n        }\n        if (this.submenuContainer) {\n            this.submenuContainer = undefined;\n        }\n    }\n}\nclass MenuSeparatorActionViewItem extends ActionViewItem {\n    constructor(context, action, options, menuStyles) {\n        super(context, action, options);\n        this.menuStyles = menuStyles;\n    }\n    render(container) {\n        super.render(container);\n        if (this.label) {\n            this.label.style.borderBottomColor = this.menuStyles.separatorColor ? `${this.menuStyles.separatorColor}` : '';\n        }\n    }\n}\nexport function cleanMnemonic(label) {\n    const regex = MENU_MNEMONIC_REGEX;\n    const matches = regex.exec(label);\n    if (!matches) {\n        return label;\n    }\n    const mnemonicInText = !matches[1];\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\n}\nexport function formatRule(c) {\n    const fontCharacter = getCodiconFontCharacters()[c.id];\n    return `.codicon-${c.id}:before { content: '\\\\${fontCharacter.toString(16)}'; }`;\n}\nfunction getMenuWidgetCSS(style, isForShadowDom) {\n    let result = /* css */ `\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${formatRule(Codicon.menuSelection)}\n${formatRule(Codicon.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar.animated .action-item.active {\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;\n    if (isForShadowDom) {\n        // Only define scrollbar styles when used inside shadow dom,\n        // otherwise leave their styling to the global workbench styling.\n        result += `\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t`;\n        // Scrollbars\n        const scrollbarShadowColor = style.scrollbarShadow;\n        if (scrollbarShadowColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderBackgroundColor = style.scrollbarSliderBackground;\n        if (scrollbarSliderBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderHoverBackgroundColor = style.scrollbarSliderHoverBackground;\n        if (scrollbarSliderHoverBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderActiveBackgroundColor = style.scrollbarSliderActiveBackground;\n        if (scrollbarSliderActiveBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n    }\n    return result;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, EventType, getActiveElement, getWindow, isAncestor } from '../../../base/browser/dom.js';\nimport { StandardMouseEvent } from '../../../base/browser/mouseEvent.js';\nimport { Menu } from '../../../base/browser/ui/menu/menu.js';\nimport { ActionRunner } from '../../../base/common/actions.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport { combinedDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { defaultMenuStyles } from '../../theme/browser/defaultStyles.js';\nexport class ContextMenuHandler {\n    constructor(contextViewService, telemetryService, notificationService, keybindingService) {\n        this.contextViewService = contextViewService;\n        this.telemetryService = telemetryService;\n        this.notificationService = notificationService;\n        this.keybindingService = keybindingService;\n        this.focusToReturn = null;\n        this.lastContainer = null;\n        this.block = null;\n        this.blockDisposable = null;\n        this.options = { blockMouse: true };\n    }\n    configure(options) {\n        this.options = options;\n    }\n    showContextMenu(delegate) {\n        const actions = delegate.getActions();\n        if (!actions.length) {\n            return; // Don't render an empty context menu\n        }\n        this.focusToReturn = getActiveElement();\n        let menu;\n        const shadowRootElement = delegate.domForShadowRoot instanceof HTMLElement ? delegate.domForShadowRoot : undefined;\n        this.contextViewService.showContextView({\n            getAnchor: () => delegate.getAnchor(),\n            canRelayout: false,\n            anchorAlignment: delegate.anchorAlignment,\n            anchorAxisAlignment: delegate.anchorAxisAlignment,\n            render: (container) => {\n                var _a;\n                this.lastContainer = container;\n                const className = delegate.getMenuClassName ? delegate.getMenuClassName() : '';\n                if (className) {\n                    container.className += ' ' + className;\n                }\n                // Render invisible div to block mouse interaction in the rest of the UI\n                if (this.options.blockMouse) {\n                    this.block = container.appendChild($('.context-view-block'));\n                    this.block.style.position = 'fixed';\n                    this.block.style.cursor = 'initial';\n                    this.block.style.left = '0';\n                    this.block.style.top = '0';\n                    this.block.style.width = '100%';\n                    this.block.style.height = '100%';\n                    this.block.style.zIndex = '-1';\n                    (_a = this.blockDisposable) === null || _a === void 0 ? void 0 : _a.dispose();\n                    this.blockDisposable = addDisposableListener(this.block, EventType.MOUSE_DOWN, e => e.stopPropagation());\n                }\n                const menuDisposables = new DisposableStore();\n                const actionRunner = delegate.actionRunner || new ActionRunner();\n                actionRunner.onWillRun(evt => this.onActionRun(evt, !delegate.skipTelemetry), this, menuDisposables);\n                actionRunner.onDidRun(this.onDidActionRun, this, menuDisposables);\n                menu = new Menu(container, actions, {\n                    actionViewItemProvider: delegate.getActionViewItem,\n                    context: delegate.getActionsContext ? delegate.getActionsContext() : null,\n                    actionRunner,\n                    getKeyBinding: delegate.getKeyBinding ? delegate.getKeyBinding : action => this.keybindingService.lookupKeybinding(action.id)\n                }, defaultMenuStyles);\n                menu.onDidCancel(() => this.contextViewService.hideContextView(true), null, menuDisposables);\n                menu.onDidBlur(() => this.contextViewService.hideContextView(true), null, menuDisposables);\n                const targetWindow = getWindow(container);\n                menuDisposables.add(addDisposableListener(targetWindow, EventType.BLUR, () => this.contextViewService.hideContextView(true)));\n                menuDisposables.add(addDisposableListener(targetWindow, EventType.MOUSE_DOWN, (e) => {\n                    if (e.defaultPrevented) {\n                        return;\n                    }\n                    const event = new StandardMouseEvent(targetWindow, e);\n                    let element = event.target;\n                    // Don't do anything as we are likely creating a context menu\n                    if (event.rightButton) {\n                        return;\n                    }\n                    while (element) {\n                        if (element === container) {\n                            return;\n                        }\n                        element = element.parentElement;\n                    }\n                    this.contextViewService.hideContextView(true);\n                }));\n                return combinedDisposable(menuDisposables, menu);\n            },\n            focus: () => {\n                menu === null || menu === void 0 ? void 0 : menu.focus(!!delegate.autoSelectFirstItem);\n            },\n            onHide: (didCancel) => {\n                var _a, _b, _c;\n                (_a = delegate.onHide) === null || _a === void 0 ? void 0 : _a.call(delegate, !!didCancel);\n                if (this.block) {\n                    this.block.remove();\n                    this.block = null;\n                }\n                (_b = this.blockDisposable) === null || _b === void 0 ? void 0 : _b.dispose();\n                this.blockDisposable = null;\n                if (!!this.lastContainer && (getActiveElement() === this.lastContainer || isAncestor(getActiveElement(), this.lastContainer))) {\n                    (_c = this.focusToReturn) === null || _c === void 0 ? void 0 : _c.focus();\n                }\n                this.lastContainer = null;\n            }\n        }, shadowRootElement, !!shadowRootElement);\n    }\n    onActionRun(e, logTelemetry) {\n        if (logTelemetry) {\n            this.telemetryService.publicLog2('workbenchActionExecuted', { id: e.action.id, from: 'contextMenu' });\n        }\n        this.contextViewService.hideContextView(false);\n    }\n    onDidActionRun(e) {\n        if (e.error && !isCancellationError(e.error)) {\n            this.notificationService.error(e.error);\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { ModifierKeyEmitter } from '../../../base/browser/dom.js';\nimport { Separator } from '../../../base/common/actions.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { createAndFillInContextMenuActions } from '../../actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../actions/common/actions.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { INotificationService } from '../../notification/common/notification.js';\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\nimport { ContextMenuHandler } from './contextMenuHandler.js';\nimport { IContextViewService } from './contextView.js';\nlet ContextMenuService = class ContextMenuService extends Disposable {\n    get contextMenuHandler() {\n        if (!this._contextMenuHandler) {\n            this._contextMenuHandler = new ContextMenuHandler(this.contextViewService, this.telemetryService, this.notificationService, this.keybindingService);\n        }\n        return this._contextMenuHandler;\n    }\n    constructor(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService) {\n        super();\n        this.telemetryService = telemetryService;\n        this.notificationService = notificationService;\n        this.contextViewService = contextViewService;\n        this.keybindingService = keybindingService;\n        this.menuService = menuService;\n        this.contextKeyService = contextKeyService;\n        this._contextMenuHandler = undefined;\n        this._onDidShowContextMenu = this._store.add(new Emitter());\n        this._onDidHideContextMenu = this._store.add(new Emitter());\n    }\n    configure(options) {\n        this.contextMenuHandler.configure(options);\n    }\n    // ContextMenu\n    showContextMenu(delegate) {\n        delegate = ContextMenuMenuDelegate.transform(delegate, this.menuService, this.contextKeyService);\n        this.contextMenuHandler.showContextMenu({\n            ...delegate,\n            onHide: (didCancel) => {\n                var _a;\n                (_a = delegate.onHide) === null || _a === void 0 ? void 0 : _a.call(delegate, didCancel);\n                this._onDidHideContextMenu.fire();\n            }\n        });\n        ModifierKeyEmitter.getInstance().resetKeyStatus();\n        this._onDidShowContextMenu.fire();\n    }\n};\nContextMenuService = __decorate([\n    __param(0, ITelemetryService),\n    __param(1, INotificationService),\n    __param(2, IContextViewService),\n    __param(3, IKeybindingService),\n    __param(4, IMenuService),\n    __param(5, IContextKeyService)\n], ContextMenuService);\nexport { ContextMenuService };\nexport var ContextMenuMenuDelegate;\n(function (ContextMenuMenuDelegate) {\n    function is(thing) {\n        return thing && thing.menuId instanceof MenuId;\n    }\n    function transform(delegate, menuService, globalContextKeyService) {\n        if (!is(delegate)) {\n            return delegate;\n        }\n        const { menuId, menuActionOptions, contextKeyService } = delegate;\n        return {\n            ...delegate,\n            getActions: () => {\n                const target = [];\n                if (menuId) {\n                    const menu = menuService.createMenu(menuId, contextKeyService !== null && contextKeyService !== void 0 ? contextKeyService : globalContextKeyService);\n                    createAndFillInContextMenuActions(menu, menuActionOptions, target);\n                    menu.dispose();\n                }\n                if (!delegate.getActions) {\n                    return target;\n                }\n                else {\n                    return Separator.join(delegate.getActions(), target);\n                }\n            }\n        };\n    }\n    ContextMenuMenuDelegate.transform = transform;\n})(ContextMenuMenuDelegate || (ContextMenuMenuDelegate = {}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport var EditorOpenSource;\n(function (EditorOpenSource) {\n    /**\n     * Default: the editor is opening via a programmatic call\n     * to the editor service API.\n     */\n    EditorOpenSource[EditorOpenSource[\"API\"] = 0] = \"API\";\n    /**\n     * Indicates that a user action triggered the opening, e.g.\n     * via mouse or keyboard use.\n     */\n    EditorOpenSource[EditorOpenSource[\"USER\"] = 1] = \"USER\";\n})(EditorOpenSource || (EditorOpenSource = {}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { parse } from '../../../base/common/marshalling.js';\nimport { matchesScheme, matchesSomeScheme, Schemas } from '../../../base/common/network.js';\nimport { normalizePath } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ICodeEditorService } from './codeEditorService.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { EditorOpenSource } from '../../../platform/editor/common/editor.js';\nimport { extractSelection } from '../../../platform/opener/common/opener.js';\nlet CommandOpener = class CommandOpener {\n    constructor(_commandService) {\n        this._commandService = _commandService;\n    }\n    async open(target, options) {\n        if (!matchesScheme(target, Schemas.command)) {\n            return false;\n        }\n        if (!(options === null || options === void 0 ? void 0 : options.allowCommands)) {\n            // silently ignore commands when command-links are disabled, also\n            // suppress other openers by returning TRUE\n            return true;\n        }\n        if (typeof target === 'string') {\n            target = URI.parse(target);\n        }\n        if (Array.isArray(options.allowCommands)) {\n            // Only allow specific commands\n            if (!options.allowCommands.includes(target.path)) {\n                // Suppress other openers by returning TRUE\n                return true;\n            }\n        }\n        // execute as command\n        let args = [];\n        try {\n            args = parse(decodeURIComponent(target.query));\n        }\n        catch (_a) {\n            // ignore and retry\n            try {\n                args = parse(target.query);\n            }\n            catch (_b) {\n                // ignore error\n            }\n        }\n        if (!Array.isArray(args)) {\n            args = [args];\n        }\n        await this._commandService.executeCommand(target.path, ...args);\n        return true;\n    }\n};\nCommandOpener = __decorate([\n    __param(0, ICommandService)\n], CommandOpener);\nlet EditorOpener = class EditorOpener {\n    constructor(_editorService) {\n        this._editorService = _editorService;\n    }\n    async open(target, options) {\n        if (typeof target === 'string') {\n            target = URI.parse(target);\n        }\n        const { selection, uri } = extractSelection(target);\n        target = uri;\n        if (target.scheme === Schemas.file) {\n            target = normalizePath(target); // workaround for non-normalized paths (https://github.com/microsoft/vscode/issues/12954)\n        }\n        await this._editorService.openCodeEditor({\n            resource: target,\n            options: {\n                selection,\n                source: (options === null || options === void 0 ? void 0 : options.fromUserGesture) ? EditorOpenSource.USER : EditorOpenSource.API,\n                ...options === null || options === void 0 ? void 0 : options.editorOptions\n            }\n        }, this._editorService.getFocusedCodeEditor(), options === null || options === void 0 ? void 0 : options.openToSide);\n        return true;\n    }\n};\nEditorOpener = __decorate([\n    __param(0, ICodeEditorService)\n], EditorOpener);\nlet OpenerService = class OpenerService {\n    constructor(editorService, commandService) {\n        this._openers = new LinkedList();\n        this._validators = new LinkedList();\n        this._resolvers = new LinkedList();\n        this._resolvedUriTargets = new ResourceMap(uri => uri.with({ path: null, fragment: null, query: null }).toString());\n        this._externalOpeners = new LinkedList();\n        // Default external opener is going through window.open()\n        this._defaultExternalOpener = {\n            openExternal: async (href) => {\n                // ensure to open HTTP/HTTPS links into new windows\n                // to not trigger a navigation. Any other link is\n                // safe to be set as HREF to prevent a blank window\n                // from opening.\n                if (matchesSomeScheme(href, Schemas.http, Schemas.https)) {\n                    dom.windowOpenNoOpener(href);\n                }\n                else {\n                    mainWindow.location.href = href;\n                }\n                return true;\n            }\n        };\n        // Default opener: any external, maito, http(s), command, and catch-all-editors\n        this._openers.push({\n            open: async (target, options) => {\n                if ((options === null || options === void 0 ? void 0 : options.openExternal) || matchesSomeScheme(target, Schemas.mailto, Schemas.http, Schemas.https, Schemas.vsls)) {\n                    // open externally\n                    await this._doOpenExternal(target, options);\n                    return true;\n                }\n                return false;\n            }\n        });\n        this._openers.push(new CommandOpener(commandService));\n        this._openers.push(new EditorOpener(editorService));\n    }\n    registerOpener(opener) {\n        const remove = this._openers.unshift(opener);\n        return { dispose: remove };\n    }\n    async open(target, options) {\n        var _a;\n        // check with contributed validators\n        const targetURI = typeof target === 'string' ? URI.parse(target) : target;\n        // validate against the original URI that this URI resolves to, if one exists\n        const validationTarget = (_a = this._resolvedUriTargets.get(targetURI)) !== null && _a !== void 0 ? _a : target;\n        for (const validator of this._validators) {\n            if (!(await validator.shouldOpen(validationTarget, options))) {\n                return false;\n            }\n        }\n        // check with contributed openers\n        for (const opener of this._openers) {\n            const handled = await opener.open(target, options);\n            if (handled) {\n                return true;\n            }\n        }\n        return false;\n    }\n    async resolveExternalUri(resource, options) {\n        for (const resolver of this._resolvers) {\n            try {\n                const result = await resolver.resolveExternalUri(resource, options);\n                if (result) {\n                    if (!this._resolvedUriTargets.has(result.resolved)) {\n                        this._resolvedUriTargets.set(result.resolved, resource);\n                    }\n                    return result;\n                }\n            }\n            catch (_a) {\n                // noop\n            }\n        }\n        throw new Error('Could not resolve external URI: ' + resource.toString());\n    }\n    async _doOpenExternal(resource, options) {\n        //todo@jrieken IExternalUriResolver should support `uri: URI | string`\n        const uri = typeof resource === 'string' ? URI.parse(resource) : resource;\n        let externalUri;\n        try {\n            externalUri = (await this.resolveExternalUri(uri, options)).resolved;\n        }\n        catch (_a) {\n            externalUri = uri;\n        }\n        let href;\n        if (typeof resource === 'string' && uri.toString() === externalUri.toString()) {\n            // open the url-string AS IS\n            href = resource;\n        }\n        else {\n            // open URI using the toString(noEncode)+encodeURI-trick\n            href = encodeURI(externalUri.toString(true));\n        }\n        if (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) {\n            const preferredOpenerId = typeof (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) === 'string' ? options === null || options === void 0 ? void 0 : options.allowContributedOpeners : undefined;\n            for (const opener of this._externalOpeners) {\n                const didOpen = await opener.openExternal(href, {\n                    sourceUri: uri,\n                    preferredOpenerId,\n                }, CancellationToken.None);\n                if (didOpen) {\n                    return true;\n                }\n            }\n        }\n        return this._defaultExternalOpener.openExternal(href, { sourceUri: uri }, CancellationToken.None);\n    }\n    dispose() {\n        this._validators.clear();\n    }\n};\nOpenerService = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ICommandService)\n], OpenerService);\nexport { OpenerService };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IMarkerService, MarkerSeverity } from '../../../platform/markers/common/markers.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { OverviewRulerLane, MinimapPosition } from '../model.js';\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\nimport { overviewRulerWarning, overviewRulerInfo, overviewRulerError } from '../core/editorColorRegistry.js';\nimport { IModelService } from './model.js';\nimport { Range } from '../core/range.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { minimapInfo, minimapWarning, minimapError } from '../../../platform/theme/common/colorRegistry.js';\nimport { BidirectionalMap, ResourceMap } from '../../../base/common/map.js';\nimport { diffSets } from '../../../base/common/collections.js';\nlet MarkerDecorationsService = class MarkerDecorationsService extends Disposable {\n    constructor(modelService, _markerService) {\n        super();\n        this._markerService = _markerService;\n        this._onDidChangeMarker = this._register(new Emitter());\n        this._markerDecorations = new ResourceMap();\n        modelService.getModels().forEach(model => this._onModelAdded(model));\n        this._register(modelService.onModelAdded(this._onModelAdded, this));\n        this._register(modelService.onModelRemoved(this._onModelRemoved, this));\n        this._register(this._markerService.onMarkerChanged(this._handleMarkerChange, this));\n    }\n    dispose() {\n        super.dispose();\n        this._markerDecorations.forEach(value => value.dispose());\n        this._markerDecorations.clear();\n    }\n    getMarker(uri, decoration) {\n        const markerDecorations = this._markerDecorations.get(uri);\n        return markerDecorations ? (markerDecorations.getMarker(decoration) || null) : null;\n    }\n    _handleMarkerChange(changedResources) {\n        changedResources.forEach((resource) => {\n            const markerDecorations = this._markerDecorations.get(resource);\n            if (markerDecorations) {\n                this._updateDecorations(markerDecorations);\n            }\n        });\n    }\n    _onModelAdded(model) {\n        const markerDecorations = new MarkerDecorations(model);\n        this._markerDecorations.set(model.uri, markerDecorations);\n        this._updateDecorations(markerDecorations);\n    }\n    _onModelRemoved(model) {\n        var _a;\n        const markerDecorations = this._markerDecorations.get(model.uri);\n        if (markerDecorations) {\n            markerDecorations.dispose();\n            this._markerDecorations.delete(model.uri);\n        }\n        // clean up markers for internal, transient models\n        if (model.uri.scheme === Schemas.inMemory\n            || model.uri.scheme === Schemas.internal\n            || model.uri.scheme === Schemas.vscode) {\n            (_a = this._markerService) === null || _a === void 0 ? void 0 : _a.read({ resource: model.uri }).map(marker => marker.owner).forEach(owner => this._markerService.remove(owner, [model.uri]));\n        }\n    }\n    _updateDecorations(markerDecorations) {\n        // Limit to the first 500 errors/warnings\n        const markers = this._markerService.read({ resource: markerDecorations.model.uri, take: 500 });\n        if (markerDecorations.update(markers)) {\n            this._onDidChangeMarker.fire(markerDecorations.model);\n        }\n    }\n};\nMarkerDecorationsService = __decorate([\n    __param(0, IModelService),\n    __param(1, IMarkerService)\n], MarkerDecorationsService);\nexport { MarkerDecorationsService };\nclass MarkerDecorations extends Disposable {\n    constructor(model) {\n        super();\n        this.model = model;\n        this._map = new BidirectionalMap();\n        this._register(toDisposable(() => {\n            this.model.deltaDecorations([...this._map.values()], []);\n            this._map.clear();\n        }));\n    }\n    update(markers) {\n        // We use the fact that marker instances are not recreated when different owners\n        // update. So we can compare references to find out what changed since the last update.\n        const { added, removed } = diffSets(new Set(this._map.keys()), new Set(markers));\n        if (added.length === 0 && removed.length === 0) {\n            return false;\n        }\n        const oldIds = removed.map(marker => this._map.get(marker));\n        const newDecorations = added.map(marker => {\n            return {\n                range: this._createDecorationRange(this.model, marker),\n                options: this._createDecorationOption(marker)\n            };\n        });\n        const ids = this.model.deltaDecorations(oldIds, newDecorations);\n        for (const removedMarker of removed) {\n            this._map.delete(removedMarker);\n        }\n        for (let index = 0; index < ids.length; index++) {\n            this._map.set(added[index], ids[index]);\n        }\n        return true;\n    }\n    getMarker(decoration) {\n        return this._map.getKey(decoration.id);\n    }\n    _createDecorationRange(model, rawMarker) {\n        let ret = Range.lift(rawMarker);\n        if (rawMarker.severity === MarkerSeverity.Hint && !this._hasMarkerTag(rawMarker, 1 /* MarkerTag.Unnecessary */) && !this._hasMarkerTag(rawMarker, 2 /* MarkerTag.Deprecated */)) {\n            // * never render hints on multiple lines\n            // * make enough space for three dots\n            ret = ret.setEndPosition(ret.startLineNumber, ret.startColumn + 2);\n        }\n        ret = model.validateRange(ret);\n        if (ret.isEmpty()) {\n            const maxColumn = model.getLineLastNonWhitespaceColumn(ret.startLineNumber) ||\n                model.getLineMaxColumn(ret.startLineNumber);\n            if (maxColumn === 1 || ret.endColumn >= maxColumn) {\n                // empty line or behind eol\n                // keep the range as is, it will be rendered 1ch wide\n                return ret;\n            }\n            const word = model.getWordAtPosition(ret.getStartPosition());\n            if (word) {\n                ret = new Range(ret.startLineNumber, word.startColumn, ret.endLineNumber, word.endColumn);\n            }\n        }\n        else if (rawMarker.endColumn === Number.MAX_VALUE && rawMarker.startColumn === 1 && ret.startLineNumber === ret.endLineNumber) {\n            const minColumn = model.getLineFirstNonWhitespaceColumn(rawMarker.startLineNumber);\n            if (minColumn < ret.endColumn) {\n                ret = new Range(ret.startLineNumber, minColumn, ret.endLineNumber, ret.endColumn);\n                rawMarker.startColumn = minColumn;\n            }\n        }\n        return ret;\n    }\n    _createDecorationOption(marker) {\n        let className;\n        let color = undefined;\n        let zIndex;\n        let inlineClassName = undefined;\n        let minimap;\n        switch (marker.severity) {\n            case MarkerSeverity.Hint:\n                if (this._hasMarkerTag(marker, 2 /* MarkerTag.Deprecated */)) {\n                    className = undefined;\n                }\n                else if (this._hasMarkerTag(marker, 1 /* MarkerTag.Unnecessary */)) {\n                    className = \"squiggly-unnecessary\" /* ClassName.EditorUnnecessaryDecoration */;\n                }\n                else {\n                    className = \"squiggly-hint\" /* ClassName.EditorHintDecoration */;\n                }\n                zIndex = 0;\n                break;\n            case MarkerSeverity.Info:\n                className = \"squiggly-info\" /* ClassName.EditorInfoDecoration */;\n                color = themeColorFromId(overviewRulerInfo);\n                zIndex = 10;\n                minimap = {\n                    color: themeColorFromId(minimapInfo),\n                    position: MinimapPosition.Inline\n                };\n                break;\n            case MarkerSeverity.Warning:\n                className = \"squiggly-warning\" /* ClassName.EditorWarningDecoration */;\n                color = themeColorFromId(overviewRulerWarning);\n                zIndex = 20;\n                minimap = {\n                    color: themeColorFromId(minimapWarning),\n                    position: MinimapPosition.Inline\n                };\n                break;\n            case MarkerSeverity.Error:\n            default:\n                className = \"squiggly-error\" /* ClassName.EditorErrorDecoration */;\n                color = themeColorFromId(overviewRulerError);\n                zIndex = 30;\n                minimap = {\n                    color: themeColorFromId(minimapError),\n                    position: MinimapPosition.Inline\n                };\n                break;\n        }\n        if (marker.tags) {\n            if (marker.tags.indexOf(1 /* MarkerTag.Unnecessary */) !== -1) {\n                inlineClassName = \"squiggly-inline-unnecessary\" /* ClassName.EditorUnnecessaryInlineDecoration */;\n            }\n            if (marker.tags.indexOf(2 /* MarkerTag.Deprecated */) !== -1) {\n                inlineClassName = \"squiggly-inline-deprecated\" /* ClassName.EditorDeprecatedInlineDecoration */;\n            }\n        }\n        return {\n            description: 'marker-decoration',\n            stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n            className,\n            showIfCollapsed: true,\n            overviewRuler: {\n                color,\n                position: OverviewRulerLane.Right\n            },\n            minimap,\n            zIndex,\n            inlineClassName,\n        };\n    }\n    _hasMarkerTag(marker, tag) {\n        if (marker.tags) {\n            return marker.tags.indexOf(tag) >= 0;\n        }\n        return false;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ModelService_1;\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { TextModel } from '../model/textModel.js';\nimport { EDITOR_MODEL_DEFAULTS } from '../core/textModelDefaults.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nimport { ILanguageService } from '../languages/language.js';\nimport { ITextResourcePropertiesService } from './textResourceConfiguration.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { IUndoRedoService } from '../../../platform/undoRedo/common/undoRedo.js';\nimport { StringSHA1 } from '../../../base/common/hash.js';\nimport { isEditStackElement } from '../model/editStack.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { equals } from '../../../base/common/objects.js';\nimport { ILanguageConfigurationService } from '../languages/languageConfigurationRegistry.js';\nfunction MODEL_ID(resource) {\n    return resource.toString();\n}\nclass ModelData {\n    constructor(model, onWillDispose, onDidChangeLanguage) {\n        this.model = model;\n        this._modelEventListeners = new DisposableStore();\n        this.model = model;\n        this._modelEventListeners.add(model.onWillDispose(() => onWillDispose(model)));\n        this._modelEventListeners.add(model.onDidChangeLanguage((e) => onDidChangeLanguage(model, e)));\n    }\n    dispose() {\n        this._modelEventListeners.dispose();\n    }\n}\nconst DEFAULT_EOL = (platform.isLinux || platform.isMacintosh) ? 1 /* DefaultEndOfLine.LF */ : 2 /* DefaultEndOfLine.CRLF */;\nclass DisposedModelInfo {\n    constructor(uri, initialUndoRedoSnapshot, time, sharesUndoRedoStack, heapSize, sha1, versionId, alternativeVersionId) {\n        this.uri = uri;\n        this.initialUndoRedoSnapshot = initialUndoRedoSnapshot;\n        this.time = time;\n        this.sharesUndoRedoStack = sharesUndoRedoStack;\n        this.heapSize = heapSize;\n        this.sha1 = sha1;\n        this.versionId = versionId;\n        this.alternativeVersionId = alternativeVersionId;\n    }\n}\nlet ModelService = ModelService_1 = class ModelService extends Disposable {\n    constructor(_configurationService, _resourcePropertiesService, _undoRedoService, _languageService, _languageConfigurationService) {\n        super();\n        this._configurationService = _configurationService;\n        this._resourcePropertiesService = _resourcePropertiesService;\n        this._undoRedoService = _undoRedoService;\n        this._languageService = _languageService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._onModelAdded = this._register(new Emitter());\n        this.onModelAdded = this._onModelAdded.event;\n        this._onModelRemoved = this._register(new Emitter());\n        this.onModelRemoved = this._onModelRemoved.event;\n        this._onModelModeChanged = this._register(new Emitter());\n        this.onModelLanguageChanged = this._onModelModeChanged.event;\n        this._modelCreationOptionsByLanguageAndResource = Object.create(null);\n        this._models = {};\n        this._disposedModels = new Map();\n        this._disposedModelsHeapSize = 0;\n        this._register(this._configurationService.onDidChangeConfiguration(e => this._updateModelOptions(e)));\n        this._updateModelOptions(undefined);\n    }\n    static _readModelOptions(config, isForSimpleWidget) {\n        var _a;\n        let tabSize = EDITOR_MODEL_DEFAULTS.tabSize;\n        if (config.editor && typeof config.editor.tabSize !== 'undefined') {\n            const parsedTabSize = parseInt(config.editor.tabSize, 10);\n            if (!isNaN(parsedTabSize)) {\n                tabSize = parsedTabSize;\n            }\n            if (tabSize < 1) {\n                tabSize = 1;\n            }\n        }\n        let indentSize = 'tabSize';\n        if (config.editor && typeof config.editor.indentSize !== 'undefined' && config.editor.indentSize !== 'tabSize') {\n            const parsedIndentSize = parseInt(config.editor.indentSize, 10);\n            if (!isNaN(parsedIndentSize)) {\n                indentSize = Math.max(parsedIndentSize, 1);\n            }\n        }\n        let insertSpaces = EDITOR_MODEL_DEFAULTS.insertSpaces;\n        if (config.editor && typeof config.editor.insertSpaces !== 'undefined') {\n            insertSpaces = (config.editor.insertSpaces === 'false' ? false : Boolean(config.editor.insertSpaces));\n        }\n        let newDefaultEOL = DEFAULT_EOL;\n        const eol = config.eol;\n        if (eol === '\\r\\n') {\n            newDefaultEOL = 2 /* DefaultEndOfLine.CRLF */;\n        }\n        else if (eol === '\\n') {\n            newDefaultEOL = 1 /* DefaultEndOfLine.LF */;\n        }\n        let trimAutoWhitespace = EDITOR_MODEL_DEFAULTS.trimAutoWhitespace;\n        if (config.editor && typeof config.editor.trimAutoWhitespace !== 'undefined') {\n            trimAutoWhitespace = (config.editor.trimAutoWhitespace === 'false' ? false : Boolean(config.editor.trimAutoWhitespace));\n        }\n        let detectIndentation = EDITOR_MODEL_DEFAULTS.detectIndentation;\n        if (config.editor && typeof config.editor.detectIndentation !== 'undefined') {\n            detectIndentation = (config.editor.detectIndentation === 'false' ? false : Boolean(config.editor.detectIndentation));\n        }\n        let largeFileOptimizations = EDITOR_MODEL_DEFAULTS.largeFileOptimizations;\n        if (config.editor && typeof config.editor.largeFileOptimizations !== 'undefined') {\n            largeFileOptimizations = (config.editor.largeFileOptimizations === 'false' ? false : Boolean(config.editor.largeFileOptimizations));\n        }\n        let bracketPairColorizationOptions = EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions;\n        if (((_a = config.editor) === null || _a === void 0 ? void 0 : _a.bracketPairColorization) && typeof config.editor.bracketPairColorization === 'object') {\n            bracketPairColorizationOptions = {\n                enabled: !!config.editor.bracketPairColorization.enabled,\n                independentColorPoolPerBracketType: !!config.editor.bracketPairColorization.independentColorPoolPerBracketType\n            };\n        }\n        return {\n            isForSimpleWidget: isForSimpleWidget,\n            tabSize: tabSize,\n            indentSize: indentSize,\n            insertSpaces: insertSpaces,\n            detectIndentation: detectIndentation,\n            defaultEOL: newDefaultEOL,\n            trimAutoWhitespace: trimAutoWhitespace,\n            largeFileOptimizations: largeFileOptimizations,\n            bracketPairColorizationOptions\n        };\n    }\n    _getEOL(resource, language) {\n        if (resource) {\n            return this._resourcePropertiesService.getEOL(resource, language);\n        }\n        const eol = this._configurationService.getValue('files.eol', { overrideIdentifier: language });\n        if (eol && typeof eol === 'string' && eol !== 'auto') {\n            return eol;\n        }\n        return platform.OS === 3 /* platform.OperatingSystem.Linux */ || platform.OS === 2 /* platform.OperatingSystem.Macintosh */ ? '\\n' : '\\r\\n';\n    }\n    _shouldRestoreUndoStack() {\n        const result = this._configurationService.getValue('files.restoreUndoStack');\n        if (typeof result === 'boolean') {\n            return result;\n        }\n        return true;\n    }\n    getCreationOptions(languageIdOrSelection, resource, isForSimpleWidget) {\n        const language = (typeof languageIdOrSelection === 'string' ? languageIdOrSelection : languageIdOrSelection.languageId);\n        let creationOptions = this._modelCreationOptionsByLanguageAndResource[language + resource];\n        if (!creationOptions) {\n            const editor = this._configurationService.getValue('editor', { overrideIdentifier: language, resource });\n            const eol = this._getEOL(resource, language);\n            creationOptions = ModelService_1._readModelOptions({ editor, eol }, isForSimpleWidget);\n            this._modelCreationOptionsByLanguageAndResource[language + resource] = creationOptions;\n        }\n        return creationOptions;\n    }\n    _updateModelOptions(e) {\n        const oldOptionsByLanguageAndResource = this._modelCreationOptionsByLanguageAndResource;\n        this._modelCreationOptionsByLanguageAndResource = Object.create(null);\n        // Update options on all models\n        const keys = Object.keys(this._models);\n        for (let i = 0, len = keys.length; i < len; i++) {\n            const modelId = keys[i];\n            const modelData = this._models[modelId];\n            const language = modelData.model.getLanguageId();\n            const uri = modelData.model.uri;\n            if (e && !e.affectsConfiguration('editor', { overrideIdentifier: language, resource: uri }) && !e.affectsConfiguration('files.eol', { overrideIdentifier: language, resource: uri })) {\n                continue; // perf: skip if this model is not affected by configuration change\n            }\n            const oldOptions = oldOptionsByLanguageAndResource[language + uri];\n            const newOptions = this.getCreationOptions(language, uri, modelData.model.isForSimpleWidget);\n            ModelService_1._setModelOptionsForModel(modelData.model, newOptions, oldOptions);\n        }\n    }\n    static _setModelOptionsForModel(model, newOptions, currentOptions) {\n        if (currentOptions && currentOptions.defaultEOL !== newOptions.defaultEOL && model.getLineCount() === 1) {\n            model.setEOL(newOptions.defaultEOL === 1 /* DefaultEndOfLine.LF */ ? 0 /* EndOfLineSequence.LF */ : 1 /* EndOfLineSequence.CRLF */);\n        }\n        if (currentOptions\n            && (currentOptions.detectIndentation === newOptions.detectIndentation)\n            && (currentOptions.insertSpaces === newOptions.insertSpaces)\n            && (currentOptions.tabSize === newOptions.tabSize)\n            && (currentOptions.indentSize === newOptions.indentSize)\n            && (currentOptions.trimAutoWhitespace === newOptions.trimAutoWhitespace)\n            && equals(currentOptions.bracketPairColorizationOptions, newOptions.bracketPairColorizationOptions)) {\n            // Same indent opts, no need to touch the model\n            return;\n        }\n        if (newOptions.detectIndentation) {\n            model.detectIndentation(newOptions.insertSpaces, newOptions.tabSize);\n            model.updateOptions({\n                trimAutoWhitespace: newOptions.trimAutoWhitespace,\n                bracketColorizationOptions: newOptions.bracketPairColorizationOptions\n            });\n        }\n        else {\n            model.updateOptions({\n                insertSpaces: newOptions.insertSpaces,\n                tabSize: newOptions.tabSize,\n                indentSize: newOptions.indentSize,\n                trimAutoWhitespace: newOptions.trimAutoWhitespace,\n                bracketColorizationOptions: newOptions.bracketPairColorizationOptions\n            });\n        }\n    }\n    // --- begin IModelService\n    _insertDisposedModel(disposedModelData) {\n        this._disposedModels.set(MODEL_ID(disposedModelData.uri), disposedModelData);\n        this._disposedModelsHeapSize += disposedModelData.heapSize;\n    }\n    _removeDisposedModel(resource) {\n        const disposedModelData = this._disposedModels.get(MODEL_ID(resource));\n        if (disposedModelData) {\n            this._disposedModelsHeapSize -= disposedModelData.heapSize;\n        }\n        this._disposedModels.delete(MODEL_ID(resource));\n        return disposedModelData;\n    }\n    _ensureDisposedModelsHeapSize(maxModelsHeapSize) {\n        if (this._disposedModelsHeapSize > maxModelsHeapSize) {\n            // we must remove some old undo stack elements to free up some memory\n            const disposedModels = [];\n            this._disposedModels.forEach(entry => {\n                if (!entry.sharesUndoRedoStack) {\n                    disposedModels.push(entry);\n                }\n            });\n            disposedModels.sort((a, b) => a.time - b.time);\n            while (disposedModels.length > 0 && this._disposedModelsHeapSize > maxModelsHeapSize) {\n                const disposedModel = disposedModels.shift();\n                this._removeDisposedModel(disposedModel.uri);\n                if (disposedModel.initialUndoRedoSnapshot !== null) {\n                    this._undoRedoService.restoreSnapshot(disposedModel.initialUndoRedoSnapshot);\n                }\n            }\n        }\n    }\n    _createModelData(value, languageIdOrSelection, resource, isForSimpleWidget) {\n        // create & save the model\n        const options = this.getCreationOptions(languageIdOrSelection, resource, isForSimpleWidget);\n        const model = new TextModel(value, languageIdOrSelection, options, resource, this._undoRedoService, this._languageService, this._languageConfigurationService);\n        if (resource && this._disposedModels.has(MODEL_ID(resource))) {\n            const disposedModelData = this._removeDisposedModel(resource);\n            const elements = this._undoRedoService.getElements(resource);\n            const sha1Computer = this._getSHA1Computer();\n            const sha1IsEqual = (sha1Computer.canComputeSHA1(model)\n                ? sha1Computer.computeSHA1(model) === disposedModelData.sha1\n                : false);\n            if (sha1IsEqual || disposedModelData.sharesUndoRedoStack) {\n                for (const element of elements.past) {\n                    if (isEditStackElement(element) && element.matchesResource(resource)) {\n                        element.setModel(model);\n                    }\n                }\n                for (const element of elements.future) {\n                    if (isEditStackElement(element) && element.matchesResource(resource)) {\n                        element.setModel(model);\n                    }\n                }\n                this._undoRedoService.setElementsValidFlag(resource, true, (element) => (isEditStackElement(element) && element.matchesResource(resource)));\n                if (sha1IsEqual) {\n                    model._overwriteVersionId(disposedModelData.versionId);\n                    model._overwriteAlternativeVersionId(disposedModelData.alternativeVersionId);\n                    model._overwriteInitialUndoRedoSnapshot(disposedModelData.initialUndoRedoSnapshot);\n                }\n            }\n            else {\n                if (disposedModelData.initialUndoRedoSnapshot !== null) {\n                    this._undoRedoService.restoreSnapshot(disposedModelData.initialUndoRedoSnapshot);\n                }\n            }\n        }\n        const modelId = MODEL_ID(model.uri);\n        if (this._models[modelId]) {\n            // There already exists a model with this id => this is a programmer error\n            throw new Error('ModelService: Cannot add model because it already exists!');\n        }\n        const modelData = new ModelData(model, (model) => this._onWillDispose(model), (model, e) => this._onDidChangeLanguage(model, e));\n        this._models[modelId] = modelData;\n        return modelData;\n    }\n    createModel(value, languageSelection, resource, isForSimpleWidget = false) {\n        let modelData;\n        if (languageSelection) {\n            modelData = this._createModelData(value, languageSelection, resource, isForSimpleWidget);\n        }\n        else {\n            modelData = this._createModelData(value, PLAINTEXT_LANGUAGE_ID, resource, isForSimpleWidget);\n        }\n        this._onModelAdded.fire(modelData.model);\n        return modelData.model;\n    }\n    getModels() {\n        const ret = [];\n        const keys = Object.keys(this._models);\n        for (let i = 0, len = keys.length; i < len; i++) {\n            const modelId = keys[i];\n            ret.push(this._models[modelId].model);\n        }\n        return ret;\n    }\n    getModel(resource) {\n        const modelId = MODEL_ID(resource);\n        const modelData = this._models[modelId];\n        if (!modelData) {\n            return null;\n        }\n        return modelData.model;\n    }\n    // --- end IModelService\n    _schemaShouldMaintainUndoRedoElements(resource) {\n        return (resource.scheme === Schemas.file\n            || resource.scheme === Schemas.vscodeRemote\n            || resource.scheme === Schemas.vscodeUserData\n            || resource.scheme === Schemas.vscodeNotebookCell\n            || resource.scheme === 'fake-fs' // for tests\n        );\n    }\n    _onWillDispose(model) {\n        const modelId = MODEL_ID(model.uri);\n        const modelData = this._models[modelId];\n        const sharesUndoRedoStack = (this._undoRedoService.getUriComparisonKey(model.uri) !== model.uri.toString());\n        let maintainUndoRedoStack = false;\n        let heapSize = 0;\n        if (sharesUndoRedoStack || (this._shouldRestoreUndoStack() && this._schemaShouldMaintainUndoRedoElements(model.uri))) {\n            const elements = this._undoRedoService.getElements(model.uri);\n            if (elements.past.length > 0 || elements.future.length > 0) {\n                for (const element of elements.past) {\n                    if (isEditStackElement(element) && element.matchesResource(model.uri)) {\n                        maintainUndoRedoStack = true;\n                        heapSize += element.heapSize(model.uri);\n                        element.setModel(model.uri); // remove reference from text buffer instance\n                    }\n                }\n                for (const element of elements.future) {\n                    if (isEditStackElement(element) && element.matchesResource(model.uri)) {\n                        maintainUndoRedoStack = true;\n                        heapSize += element.heapSize(model.uri);\n                        element.setModel(model.uri); // remove reference from text buffer instance\n                    }\n                }\n            }\n        }\n        const maxMemory = ModelService_1.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;\n        const sha1Computer = this._getSHA1Computer();\n        if (!maintainUndoRedoStack) {\n            if (!sharesUndoRedoStack) {\n                const initialUndoRedoSnapshot = modelData.model.getInitialUndoRedoSnapshot();\n                if (initialUndoRedoSnapshot !== null) {\n                    this._undoRedoService.restoreSnapshot(initialUndoRedoSnapshot);\n                }\n            }\n        }\n        else if (!sharesUndoRedoStack && (heapSize > maxMemory || !sha1Computer.canComputeSHA1(model))) {\n            // the undo stack for this file would never fit in the configured memory or the file is very large, so don't bother with it.\n            const initialUndoRedoSnapshot = modelData.model.getInitialUndoRedoSnapshot();\n            if (initialUndoRedoSnapshot !== null) {\n                this._undoRedoService.restoreSnapshot(initialUndoRedoSnapshot);\n            }\n        }\n        else {\n            this._ensureDisposedModelsHeapSize(maxMemory - heapSize);\n            // We only invalidate the elements, but they remain in the undo-redo service.\n            this._undoRedoService.setElementsValidFlag(model.uri, false, (element) => (isEditStackElement(element) && element.matchesResource(model.uri)));\n            this._insertDisposedModel(new DisposedModelInfo(model.uri, modelData.model.getInitialUndoRedoSnapshot(), Date.now(), sharesUndoRedoStack, heapSize, sha1Computer.computeSHA1(model), model.getVersionId(), model.getAlternativeVersionId()));\n        }\n        delete this._models[modelId];\n        modelData.dispose();\n        // clean up cache\n        delete this._modelCreationOptionsByLanguageAndResource[model.getLanguageId() + model.uri];\n        this._onModelRemoved.fire(model);\n    }\n    _onDidChangeLanguage(model, e) {\n        const oldLanguageId = e.oldLanguage;\n        const newLanguageId = model.getLanguageId();\n        const oldOptions = this.getCreationOptions(oldLanguageId, model.uri, model.isForSimpleWidget);\n        const newOptions = this.getCreationOptions(newLanguageId, model.uri, model.isForSimpleWidget);\n        ModelService_1._setModelOptionsForModel(model, newOptions, oldOptions);\n        this._onModelModeChanged.fire({ model, oldLanguageId: oldLanguageId });\n    }\n    _getSHA1Computer() {\n        return new DefaultModelSHA1Computer();\n    }\n};\nModelService.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK = 20 * 1024 * 1024;\nModelService = ModelService_1 = __decorate([\n    __param(0, IConfigurationService),\n    __param(1, ITextResourcePropertiesService),\n    __param(2, IUndoRedoService),\n    __param(3, ILanguageService),\n    __param(4, ILanguageConfigurationService)\n], ModelService);\nexport { ModelService };\nexport class DefaultModelSHA1Computer {\n    canComputeSHA1(model) {\n        return (model.getValueLength() <= DefaultModelSHA1Computer.MAX_MODEL_SIZE);\n    }\n    computeSHA1(model) {\n        // compute the sha1\n        const shaComputer = new StringSHA1();\n        const snapshot = model.createSnapshot();\n        let text;\n        while ((text = snapshot.read())) {\n            shaComputer.update(text);\n        }\n        return shaComputer.digest();\n    }\n}\nDefaultModelSHA1Computer.MAX_MODEL_SIZE = 10 * 1024 * 1024; // takes 200ms to compute a sha1 on a 10MB model on a new machine\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './standaloneQuickInput.css';\nimport { Event } from '../../../../base/common/event.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorScopedLayoutService } from '../standaloneLayoutService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { QuickInputService } from '../../../../platform/quickinput/browser/quickInputService.js';\nimport { createSingleCallFunction } from '../../../../base/common/functional.js';\nlet EditorScopedQuickInputService = class EditorScopedQuickInputService extends QuickInputService {\n    constructor(editor, instantiationService, contextKeyService, themeService, codeEditorService) {\n        super(instantiationService, contextKeyService, themeService, new EditorScopedLayoutService(editor.getContainerDomNode(), codeEditorService));\n        this.host = undefined;\n        // Use the passed in code editor as host for the quick input widget\n        const contribution = QuickInputEditorContribution.get(editor);\n        if (contribution) {\n            const widget = contribution.widget;\n            this.host = {\n                _serviceBrand: undefined,\n                get mainContainer() { return widget.getDomNode(); },\n                getContainer() { return widget.getDomNode(); },\n                get containers() { return [widget.getDomNode()]; },\n                get activeContainer() { return widget.getDomNode(); },\n                get mainContainerDimension() { return editor.getLayoutInfo(); },\n                get activeContainerDimension() { return editor.getLayoutInfo(); },\n                get onDidLayoutMainContainer() { return editor.onDidLayoutChange; },\n                get onDidLayoutActiveContainer() { return editor.onDidLayoutChange; },\n                get onDidLayoutContainer() { return Event.map(editor.onDidLayoutChange, dimension => ({ container: widget.getDomNode(), dimension })); },\n                get onDidChangeActiveContainer() { return Event.None; },\n                get onDidAddContainer() { return Event.None; },\n                get mainContainerOffset() { return { top: 0, quickPickTop: 0 }; },\n                get activeContainerOffset() { return { top: 0, quickPickTop: 0 }; },\n                focus: () => editor.focus()\n            };\n        }\n        else {\n            this.host = undefined;\n        }\n    }\n    createController() {\n        return super.createController(this.host);\n    }\n};\nEditorScopedQuickInputService = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, ICodeEditorService)\n], EditorScopedQuickInputService);\nlet StandaloneQuickInputService = class StandaloneQuickInputService {\n    get activeService() {\n        const editor = this.codeEditorService.getFocusedCodeEditor();\n        if (!editor) {\n            throw new Error('Quick input service needs a focused editor to work.');\n        }\n        // Find the quick input implementation for the focused\n        // editor or create it lazily if not yet created\n        let quickInputService = this.mapEditorToService.get(editor);\n        if (!quickInputService) {\n            const newQuickInputService = quickInputService = this.instantiationService.createInstance(EditorScopedQuickInputService, editor);\n            this.mapEditorToService.set(editor, quickInputService);\n            createSingleCallFunction(editor.onDidDispose)(() => {\n                newQuickInputService.dispose();\n                this.mapEditorToService.delete(editor);\n            });\n        }\n        return quickInputService;\n    }\n    get quickAccess() { return this.activeService.quickAccess; }\n    constructor(instantiationService, codeEditorService) {\n        this.instantiationService = instantiationService;\n        this.codeEditorService = codeEditorService;\n        this.mapEditorToService = new Map();\n    }\n    pick(picks, options = {}, token = CancellationToken.None) {\n        return this.activeService /* TS fail */.pick(picks, options, token);\n    }\n    createQuickPick() {\n        return this.activeService.createQuickPick();\n    }\n    createInputBox() {\n        return this.activeService.createInputBox();\n    }\n};\nStandaloneQuickInputService = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, ICodeEditorService)\n], StandaloneQuickInputService);\nexport { StandaloneQuickInputService };\nexport class QuickInputEditorContribution {\n    static get(editor) {\n        return editor.getContribution(QuickInputEditorContribution.ID);\n    }\n    constructor(editor) {\n        this.editor = editor;\n        this.widget = new QuickInputEditorWidget(this.editor);\n    }\n    dispose() {\n        this.widget.dispose();\n    }\n}\nQuickInputEditorContribution.ID = 'editor.controller.quickInput';\nexport class QuickInputEditorWidget {\n    constructor(codeEditor) {\n        this.codeEditor = codeEditor;\n        this.domNode = document.createElement('div');\n        this.codeEditor.addOverlayWidget(this);\n    }\n    getId() {\n        return QuickInputEditorWidget.ID;\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    getPosition() {\n        return { preference: 2 /* OverlayWidgetPositionPreference.TOP_CENTER */ };\n    }\n    dispose() {\n        this.codeEditor.removeOverlayWidget(this);\n    }\n}\nQuickInputEditorWidget.ID = 'editor.contrib.quickInputWidget';\nregisterEditorContribution(QuickInputEditorContribution.ID, QuickInputEditorContribution, 4 /* EditorContributionInstantiation.Lazy */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { coalesce } from '../../../base/common/arrays.js';\nimport { toDisposable } from '../../../base/common/lifecycle.js';\nimport { Registry } from '../../registry/common/platform.js';\nexport var DefaultQuickAccessFilterValue;\n(function (DefaultQuickAccessFilterValue) {\n    /**\n     * Keep the value as it is given to quick access.\n     */\n    DefaultQuickAccessFilterValue[DefaultQuickAccessFilterValue[\"PRESERVE\"] = 0] = \"PRESERVE\";\n    /**\n     * Use the value that was used last time something was accepted from the picker.\n     */\n    DefaultQuickAccessFilterValue[DefaultQuickAccessFilterValue[\"LAST\"] = 1] = \"LAST\";\n})(DefaultQuickAccessFilterValue || (DefaultQuickAccessFilterValue = {}));\nexport const Extensions = {\n    Quickaccess: 'workbench.contributions.quickaccess'\n};\nexport class QuickAccessRegistry {\n    constructor() {\n        this.providers = [];\n        this.defaultProvider = undefined;\n    }\n    registerQuickAccessProvider(provider) {\n        // Extract the default provider when no prefix is present\n        if (provider.prefix.length === 0) {\n            this.defaultProvider = provider;\n        }\n        else {\n            this.providers.push(provider);\n        }\n        // sort the providers by decreasing prefix length, such that longer\n        // prefixes take priority: 'ext' vs 'ext install' - the latter should win\n        this.providers.sort((providerA, providerB) => providerB.prefix.length - providerA.prefix.length);\n        return toDisposable(() => {\n            this.providers.splice(this.providers.indexOf(provider), 1);\n            if (this.defaultProvider === provider) {\n                this.defaultProvider = undefined;\n            }\n        });\n    }\n    getQuickAccessProviders() {\n        return coalesce([this.defaultProvider, ...this.providers]);\n    }\n    getQuickAccessProvider(prefix) {\n        const result = prefix ? (this.providers.find(provider => prefix.startsWith(provider.prefix)) || undefined) : undefined;\n        return result || this.defaultProvider;\n    }\n}\nRegistry.add(Extensions.Quickaccess, new QuickAccessRegistry());\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const NO_KEY_MODS = { ctrlCmd: false, alt: false };\nexport var QuickInputHideReason;\n(function (QuickInputHideReason) {\n    /**\n     * Focus moved away from the quick input.\n     */\n    QuickInputHideReason[QuickInputHideReason[\"Blur\"] = 1] = \"Blur\";\n    /**\n     * An explicit user gesture, e.g. pressing Escape key.\n     */\n    QuickInputHideReason[QuickInputHideReason[\"Gesture\"] = 2] = \"Gesture\";\n    /**\n     * Anything else.\n     */\n    QuickInputHideReason[QuickInputHideReason[\"Other\"] = 3] = \"Other\";\n})(QuickInputHideReason || (QuickInputHideReason = {}));\nexport var ItemActivation;\n(function (ItemActivation) {\n    ItemActivation[ItemActivation[\"NONE\"] = 0] = \"NONE\";\n    ItemActivation[ItemActivation[\"FIRST\"] = 1] = \"FIRST\";\n    ItemActivation[ItemActivation[\"SECOND\"] = 2] = \"SECOND\";\n    ItemActivation[ItemActivation[\"LAST\"] = 3] = \"LAST\";\n})(ItemActivation || (ItemActivation = {}));\nexport class QuickPickItemScorerAccessor {\n    constructor(options) {\n        this.options = options;\n    }\n}\nexport const quickPickItemScorerAccessor = new QuickPickItemScorerAccessor();\n//#endregion\nexport const IQuickInputService = createDecorator('quickInputService');\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DeferredPromise } from '../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { Event } from '../../../base/common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { DefaultQuickAccessFilterValue, Extensions } from '../common/quickAccess.js';\nimport { IQuickInputService, ItemActivation } from '../common/quickInput.js';\nimport { Registry } from '../../registry/common/platform.js';\nlet QuickAccessController = class QuickAccessController extends Disposable {\n    constructor(quickInputService, instantiationService) {\n        super();\n        this.quickInputService = quickInputService;\n        this.instantiationService = instantiationService;\n        this.registry = Registry.as(Extensions.Quickaccess);\n        this.mapProviderToDescriptor = new Map();\n        this.lastAcceptedPickerValues = new Map();\n        this.visibleQuickAccess = undefined;\n    }\n    show(value = '', options) {\n        this.doShowOrPick(value, false, options);\n    }\n    doShowOrPick(value, pick, options) {\n        var _a;\n        // Find provider for the value to show\n        const [provider, descriptor] = this.getOrInstantiateProvider(value);\n        // Return early if quick access is already showing on that same prefix\n        const visibleQuickAccess = this.visibleQuickAccess;\n        const visibleDescriptor = visibleQuickAccess === null || visibleQuickAccess === void 0 ? void 0 : visibleQuickAccess.descriptor;\n        if (visibleQuickAccess && descriptor && visibleDescriptor === descriptor) {\n            // Apply value only if it is more specific than the prefix\n            // from the provider and we are not instructed to preserve\n            if (value !== descriptor.prefix && !(options === null || options === void 0 ? void 0 : options.preserveValue)) {\n                visibleQuickAccess.picker.value = value;\n            }\n            // Always adjust selection\n            this.adjustValueSelection(visibleQuickAccess.picker, descriptor, options);\n            return;\n        }\n        // Rewrite the filter value based on certain rules unless disabled\n        if (descriptor && !(options === null || options === void 0 ? void 0 : options.preserveValue)) {\n            let newValue = undefined;\n            // If we have a visible provider with a value, take it's filter value but\n            // rewrite to new provider prefix in case they differ\n            if (visibleQuickAccess && visibleDescriptor && visibleDescriptor !== descriptor) {\n                const newValueCandidateWithoutPrefix = visibleQuickAccess.value.substr(visibleDescriptor.prefix.length);\n                if (newValueCandidateWithoutPrefix) {\n                    newValue = `${descriptor.prefix}${newValueCandidateWithoutPrefix}`;\n                }\n            }\n            // Otherwise, take a default value as instructed\n            if (!newValue) {\n                const defaultFilterValue = provider === null || provider === void 0 ? void 0 : provider.defaultFilterValue;\n                if (defaultFilterValue === DefaultQuickAccessFilterValue.LAST) {\n                    newValue = this.lastAcceptedPickerValues.get(descriptor);\n                }\n                else if (typeof defaultFilterValue === 'string') {\n                    newValue = `${descriptor.prefix}${defaultFilterValue}`;\n                }\n            }\n            if (typeof newValue === 'string') {\n                value = newValue;\n            }\n        }\n        // Create a picker for the provider to use with the initial value\n        // and adjust the filtering to exclude the prefix from filtering\n        const disposables = new DisposableStore();\n        const picker = disposables.add(this.quickInputService.createQuickPick());\n        picker.value = value;\n        this.adjustValueSelection(picker, descriptor, options);\n        picker.placeholder = descriptor === null || descriptor === void 0 ? void 0 : descriptor.placeholder;\n        picker.quickNavigate = options === null || options === void 0 ? void 0 : options.quickNavigateConfiguration;\n        picker.hideInput = !!picker.quickNavigate && !visibleQuickAccess; // only hide input if there was no picker opened already\n        if (typeof (options === null || options === void 0 ? void 0 : options.itemActivation) === 'number' || (options === null || options === void 0 ? void 0 : options.quickNavigateConfiguration)) {\n            picker.itemActivation = (_a = options === null || options === void 0 ? void 0 : options.itemActivation) !== null && _a !== void 0 ? _a : ItemActivation.SECOND /* quick nav is always second */;\n        }\n        picker.contextKey = descriptor === null || descriptor === void 0 ? void 0 : descriptor.contextKey;\n        picker.filterValue = (value) => value.substring(descriptor ? descriptor.prefix.length : 0);\n        // Pick mode: setup a promise that can be resolved\n        // with the selected items and prevent execution\n        let pickPromise = undefined;\n        if (pick) {\n            pickPromise = new DeferredPromise();\n            disposables.add(Event.once(picker.onWillAccept)(e => {\n                e.veto();\n                picker.hide();\n            }));\n        }\n        // Register listeners\n        disposables.add(this.registerPickerListeners(picker, provider, descriptor, value, options === null || options === void 0 ? void 0 : options.providerOptions));\n        // Ask provider to fill the picker as needed if we have one\n        // and pass over a cancellation token that will indicate when\n        // the picker is hiding without a pick being made.\n        const cts = disposables.add(new CancellationTokenSource());\n        if (provider) {\n            disposables.add(provider.provide(picker, cts.token, options === null || options === void 0 ? void 0 : options.providerOptions));\n        }\n        // Finally, trigger disposal and cancellation when the picker\n        // hides depending on items selected or not.\n        Event.once(picker.onDidHide)(() => {\n            if (picker.selectedItems.length === 0) {\n                cts.cancel();\n            }\n            // Start to dispose once picker hides\n            disposables.dispose();\n            // Resolve pick promise with selected items\n            pickPromise === null || pickPromise === void 0 ? void 0 : pickPromise.complete(picker.selectedItems.slice(0));\n        });\n        // Finally, show the picker. This is important because a provider\n        // may not call this and then our disposables would leak that rely\n        // on the onDidHide event.\n        picker.show();\n        // Pick mode: return with promise\n        if (pick) {\n            return pickPromise === null || pickPromise === void 0 ? void 0 : pickPromise.p;\n        }\n    }\n    adjustValueSelection(picker, descriptor, options) {\n        var _a;\n        let valueSelection;\n        // Preserve: just always put the cursor at the end\n        if (options === null || options === void 0 ? void 0 : options.preserveValue) {\n            valueSelection = [picker.value.length, picker.value.length];\n        }\n        // Otherwise: select the value up until the prefix\n        else {\n            valueSelection = [(_a = descriptor === null || descriptor === void 0 ? void 0 : descriptor.prefix.length) !== null && _a !== void 0 ? _a : 0, picker.value.length];\n        }\n        picker.valueSelection = valueSelection;\n    }\n    registerPickerListeners(picker, provider, descriptor, value, providerOptions) {\n        const disposables = new DisposableStore();\n        // Remember as last visible picker and clean up once picker get's disposed\n        const visibleQuickAccess = this.visibleQuickAccess = { picker, descriptor, value };\n        disposables.add(toDisposable(() => {\n            if (visibleQuickAccess === this.visibleQuickAccess) {\n                this.visibleQuickAccess = undefined;\n            }\n        }));\n        // Whenever the value changes, check if the provider has\n        // changed and if so - re-create the picker from the beginning\n        disposables.add(picker.onDidChangeValue(value => {\n            const [providerForValue] = this.getOrInstantiateProvider(value);\n            if (providerForValue !== provider) {\n                this.show(value, {\n                    // do not rewrite value from user typing!\n                    preserveValue: true,\n                    // persist the value of the providerOptions from the original showing\n                    providerOptions\n                });\n            }\n            else {\n                visibleQuickAccess.value = value; // remember the value in our visible one\n            }\n        }));\n        // Remember picker input for future use when accepting\n        if (descriptor) {\n            disposables.add(picker.onDidAccept(() => {\n                this.lastAcceptedPickerValues.set(descriptor, picker.value);\n            }));\n        }\n        return disposables;\n    }\n    getOrInstantiateProvider(value) {\n        const providerDescriptor = this.registry.getQuickAccessProvider(value);\n        if (!providerDescriptor) {\n            return [undefined, undefined];\n        }\n        let provider = this.mapProviderToDescriptor.get(providerDescriptor);\n        if (!provider) {\n            provider = this.instantiationService.createInstance(providerDescriptor.ctor);\n            this.mapProviderToDescriptor.set(providerDescriptor, provider);\n        }\n        return [provider, providerDescriptor];\n    }\n};\nQuickAccessController = __decorate([\n    __param(0, IQuickInputService),\n    __param(1, IInstantiationService)\n], QuickAccessController);\nexport { QuickAccessController };\n", "import { addDisposableListener, EventHelper, EventType, reset, trackFocus } from '../../dom.js';\nimport { sanitize } from '../../dompurify/dompurify.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { renderMarkdown, renderStringAsPlaintext } from '../../markdownRenderer.js';\nimport { Gesture, EventType as TouchEventType } from '../../touch.js';\nimport { renderLabelWithIcons } from '../iconLabel/iconLabels.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter } from '../../../common/event.js';\nimport { isMarkdownString, markdownStringEqual } from '../../../common/htmlContent.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport './button.css';\nexport const unthemedButtonStyles = {\n    buttonBackground: '#0E639C',\n    buttonHoverBackground: '#006BB3',\n    buttonSeparator: Color.white.toString(),\n    buttonForeground: Color.white.toString(),\n    buttonBorder: undefined,\n    buttonSecondaryBackground: undefined,\n    buttonSecondaryForeground: undefined,\n    buttonSecondaryHoverBackground: undefined\n};\nexport class Button extends Disposable {\n    get onDidClick() { return this._onDidClick.event; }\n    constructor(container, options) {\n        super();\n        this._label = '';\n        this._onDidClick = this._register(new Emitter());\n        this.options = options;\n        this._element = document.createElement('a');\n        this._element.classList.add('monaco-button');\n        this._element.tabIndex = 0;\n        this._element.setAttribute('role', 'button');\n        this._element.classList.toggle('secondary', !!options.secondary);\n        const background = options.secondary ? options.buttonSecondaryBackground : options.buttonBackground;\n        const foreground = options.secondary ? options.buttonSecondaryForeground : options.buttonForeground;\n        this._element.style.color = foreground || '';\n        this._element.style.backgroundColor = background || '';\n        if (options.supportShortLabel) {\n            this._labelShortElement = document.createElement('div');\n            this._labelShortElement.classList.add('monaco-button-label-short');\n            this._element.appendChild(this._labelShortElement);\n            this._labelElement = document.createElement('div');\n            this._labelElement.classList.add('monaco-button-label');\n            this._element.appendChild(this._labelElement);\n            this._element.classList.add('monaco-text-button-with-short-label');\n        }\n        container.appendChild(this._element);\n        this._register(Gesture.addTarget(this._element));\n        [EventType.CLICK, TouchEventType.Tap].forEach(eventType => {\n            this._register(addDisposableListener(this._element, eventType, e => {\n                if (!this.enabled) {\n                    EventHelper.stop(e);\n                    return;\n                }\n                this._onDidClick.fire(e);\n            }));\n        });\n        this._register(addDisposableListener(this._element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            let eventHandled = false;\n            if (this.enabled && (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */))) {\n                this._onDidClick.fire(e);\n                eventHandled = true;\n            }\n            else if (event.equals(9 /* KeyCode.Escape */)) {\n                this._element.blur();\n                eventHandled = true;\n            }\n            if (eventHandled) {\n                EventHelper.stop(event, true);\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OVER, e => {\n            if (!this._element.classList.contains('disabled')) {\n                this.updateBackground(true);\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OUT, e => {\n            this.updateBackground(false); // restore standard styles\n        }));\n        // Also set hover background when button is focused for feedback\n        this.focusTracker = this._register(trackFocus(this._element));\n        this._register(this.focusTracker.onDidFocus(() => { if (this.enabled) {\n            this.updateBackground(true);\n        } }));\n        this._register(this.focusTracker.onDidBlur(() => { if (this.enabled) {\n            this.updateBackground(false);\n        } }));\n    }\n    dispose() {\n        super.dispose();\n        this._element.remove();\n    }\n    getContentElements(content) {\n        const elements = [];\n        for (let segment of renderLabelWithIcons(content)) {\n            if (typeof (segment) === 'string') {\n                segment = segment.trim();\n                // Ignore empty segment\n                if (segment === '') {\n                    continue;\n                }\n                // Convert string segments to <span> nodes\n                const node = document.createElement('span');\n                node.textContent = segment;\n                elements.push(node);\n            }\n            else {\n                elements.push(segment);\n            }\n        }\n        return elements;\n    }\n    updateBackground(hover) {\n        let background;\n        if (this.options.secondary) {\n            background = hover ? this.options.buttonSecondaryHoverBackground : this.options.buttonSecondaryBackground;\n        }\n        else {\n            background = hover ? this.options.buttonHoverBackground : this.options.buttonBackground;\n        }\n        if (background) {\n            this._element.style.backgroundColor = background;\n        }\n    }\n    get element() {\n        return this._element;\n    }\n    set label(value) {\n        var _a;\n        if (this._label === value) {\n            return;\n        }\n        if (isMarkdownString(this._label) && isMarkdownString(value) && markdownStringEqual(this._label, value)) {\n            return;\n        }\n        this._element.classList.add('monaco-text-button');\n        const labelElement = this.options.supportShortLabel ? this._labelElement : this._element;\n        if (isMarkdownString(value)) {\n            const rendered = renderMarkdown(value, { inline: true });\n            rendered.dispose();\n            // Don't include outer `<p>`\n            const root = (_a = rendered.element.querySelector('p')) === null || _a === void 0 ? void 0 : _a.innerHTML;\n            if (root) {\n                // Only allow a very limited set of inline html tags\n                const sanitized = sanitize(root, { ADD_TAGS: ['b', 'i', 'u', 'code', 'span'], ALLOWED_ATTR: ['class'], RETURN_TRUSTED_TYPE: true });\n                labelElement.innerHTML = sanitized;\n            }\n            else {\n                reset(labelElement);\n            }\n        }\n        else {\n            if (this.options.supportIcons) {\n                reset(labelElement, ...this.getContentElements(value));\n            }\n            else {\n                labelElement.textContent = value;\n            }\n        }\n        if (typeof this.options.title === 'string') {\n            this._element.title = this.options.title;\n        }\n        else if (this.options.title) {\n            this._element.title = renderStringAsPlaintext(value);\n        }\n        this._label = value;\n    }\n    get label() {\n        return this._label;\n    }\n    set icon(icon) {\n        this._element.classList.add(...ThemeIcon.asClassNameArray(icon));\n    }\n    set enabled(value) {\n        if (value) {\n            this._element.classList.remove('disabled');\n            this._element.setAttribute('aria-disabled', String(false));\n            this._element.tabIndex = 0;\n        }\n        else {\n            this._element.classList.add('disabled');\n            this._element.setAttribute('aria-disabled', String(true));\n        }\n    }\n    get enabled() {\n        return !this._element.classList.contains('disabled');\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { show } from '../../dom.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './progressbar.css';\nconst CSS_DONE = 'done';\nconst CSS_ACTIVE = 'active';\nconst CSS_INFINITE = 'infinite';\nconst CSS_INFINITE_LONG_RUNNING = 'infinite-long-running';\nconst CSS_DISCRETE = 'discrete';\n/**\n * A progress bar with support for infinite or discrete progress.\n */\nexport class ProgressBar extends Disposable {\n    constructor(container, options) {\n        super();\n        this.workedVal = 0;\n        this.showDelayedScheduler = this._register(new RunOnceScheduler(() => show(this.element), 0));\n        this.longRunningScheduler = this._register(new RunOnceScheduler(() => this.infiniteLongRunning(), ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD));\n        this.create(container, options);\n    }\n    create(container, options) {\n        this.element = document.createElement('div');\n        this.element.classList.add('monaco-progress-container');\n        this.element.setAttribute('role', 'progressbar');\n        this.element.setAttribute('aria-valuemin', '0');\n        container.appendChild(this.element);\n        this.bit = document.createElement('div');\n        this.bit.classList.add('progress-bit');\n        this.bit.style.backgroundColor = (options === null || options === void 0 ? void 0 : options.progressBarBackground) || '#0E70C0';\n        this.element.appendChild(this.bit);\n    }\n    off() {\n        this.bit.style.width = 'inherit';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_ACTIVE, CSS_INFINITE, CSS_INFINITE_LONG_RUNNING, CSS_DISCRETE);\n        this.workedVal = 0;\n        this.totalWork = undefined;\n        this.longRunningScheduler.cancel();\n    }\n    /**\n     * Stops the progressbar from showing any progress instantly without fading out.\n     */\n    stop() {\n        return this.doDone(false);\n    }\n    doDone(delayed) {\n        this.element.classList.add(CSS_DONE);\n        // discrete: let it grow to 100% width and hide afterwards\n        if (!this.element.classList.contains(CSS_INFINITE)) {\n            this.bit.style.width = 'inherit';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        // infinite: let it fade out and hide afterwards\n        else {\n            this.bit.style.opacity = '0';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        return this;\n    }\n    /**\n     * Use this mode to indicate progress that has no total number of work units.\n     */\n    infinite() {\n        this.bit.style.width = '2%';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_DISCRETE, CSS_DONE, CSS_INFINITE_LONG_RUNNING);\n        this.element.classList.add(CSS_ACTIVE, CSS_INFINITE);\n        this.longRunningScheduler.schedule();\n        return this;\n    }\n    infiniteLongRunning() {\n        this.element.classList.add(CSS_INFINITE_LONG_RUNNING);\n    }\n    getContainer() {\n        return this.element;\n    }\n}\n/**\n * After a certain time of showing the progress bar, switch\n * to long-running mode and throttle animations to reduce\n * the pressure on the GPU process.\n *\n * https://github.com/microsoft/vscode/issues/97900\n * https://github.com/microsoft/vscode/issues/138396\n */\nProgressBar.LONG_RUNNING_INFINITE_THRESHOLD = 10000;\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { FindInput } from '../../../base/browser/ui/findinput/findInput.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport Severity from '../../../base/common/severity.js';\nimport './media/quickInput.css';\nconst $ = dom.$;\nexport class QuickInputBox extends Disposable {\n    constructor(parent, inputBoxStyles, toggleStyles) {\n        super();\n        this.parent = parent;\n        this.onKeyDown = (handler) => {\n            return dom.addStandardDisposableListener(this.findInput.inputBox.inputElement, dom.EventType.KEY_DOWN, handler);\n        };\n        this.onMouseDown = (handler) => {\n            return dom.addStandardDisposableListener(this.findInput.inputBox.inputElement, dom.EventType.MOUSE_DOWN, handler);\n        };\n        this.onDidChange = (handler) => {\n            return this.findInput.onDidChange(handler);\n        };\n        this.container = dom.append(this.parent, $('.quick-input-box'));\n        this.findInput = this._register(new FindInput(this.container, undefined, { label: '', inputBoxStyles, toggleStyles }));\n        const input = this.findInput.inputBox.inputElement;\n        input.role = 'combobox';\n        input.ariaHasPopup = 'menu';\n        input.ariaAutoComplete = 'list';\n        input.ariaExpanded = 'true';\n    }\n    get value() {\n        return this.findInput.getValue();\n    }\n    set value(value) {\n        this.findInput.setValue(value);\n    }\n    select(range = null) {\n        this.findInput.inputBox.select(range);\n    }\n    isSelectionAtEnd() {\n        return this.findInput.inputBox.isSelectionAtEnd();\n    }\n    get placeholder() {\n        return this.findInput.inputBox.inputElement.getAttribute('placeholder') || '';\n    }\n    set placeholder(placeholder) {\n        this.findInput.inputBox.setPlaceHolder(placeholder);\n    }\n    get password() {\n        return this.findInput.inputBox.inputElement.type === 'password';\n    }\n    set password(password) {\n        this.findInput.inputBox.inputElement.type = password ? 'password' : 'text';\n    }\n    set enabled(enabled) {\n        // We can't disable the input box because it is still used for\n        // navigating the list. Instead, we disable the list and the OK\n        // so that nothing can be selected.\n        // TODO: should this be what we do for all find inputs? Or maybe some _other_ API\n        // on findInput to change it to readonly?\n        this.findInput.inputBox.inputElement.toggleAttribute('readonly', !enabled);\n        // TODO: styles of the quick pick need to be moved to the CSS instead of being in line\n        // so things like this can be done in CSS\n        // this.findInput.inputBox.inputElement.classList.toggle('disabled', !enabled);\n    }\n    set toggles(toggles) {\n        this.findInput.setAdditionalToggles(toggles);\n    }\n    setAttribute(name, value) {\n        this.findInput.inputBox.inputElement.setAttribute(name, value);\n    }\n    showDecoration(decoration) {\n        if (decoration === Severity.Ignore) {\n            this.findInput.clearMessage();\n        }\n        else {\n            this.findInput.showMessage({ type: decoration === Severity.Info ? 1 /* MessageType.INFO */ : decoration === Severity.Warning ? 2 /* MessageType.WARNING */ : 3 /* MessageType.ERROR */, content: '' });\n        }\n    }\n    stylesForType(decoration) {\n        return this.findInput.inputBox.stylesForType(decoration === Severity.Info ? 1 /* MessageType.INFO */ : decoration === Severity.Warning ? 2 /* MessageType.WARNING */ : 3 /* MessageType.ERROR */);\n    }\n    setFocus() {\n        this.findInput.focus();\n    }\n    layout() {\n        this.findInput.inputBox.layout();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Lazy } from './lazy.js';\n// When comparing large numbers of strings it's better for performance to create an\n// Intl.Collator object and use the function provided by its compare property\n// than it is to use String.prototype.localeCompare()\n// A collator with numeric sorting enabled, and no sensitivity to case, accents or diacritics.\nconst intlFileNameCollatorBaseNumeric = new Lazy(() => {\n    const collator = new Intl.Collator(undefined, { numeric: true, sensitivity: 'base' });\n    return {\n        collator,\n        collatorIsNumeric: collator.resolvedOptions().numeric\n    };\n});\n// A collator with numeric sorting enabled.\nconst intlFileNameCollatorNumeric = new Lazy(() => {\n    const collator = new Intl.Collator(undefined, { numeric: true });\n    return {\n        collator\n    };\n});\n// A collator with numeric sorting enabled, and sensitivity to accents and diacritics but not case.\nconst intlFileNameCollatorNumericCaseInsensitive = new Lazy(() => {\n    const collator = new Intl.Collator(undefined, { numeric: true, sensitivity: 'accent' });\n    return {\n        collator\n    };\n});\n/** Compares filenames without distinguishing the name from the extension. Disambiguates by unicode comparison. */\nexport function compareFileNames(one, other, caseSensitive = false) {\n    const a = one || '';\n    const b = other || '';\n    const result = intlFileNameCollatorBaseNumeric.value.collator.compare(a, b);\n    // Using the numeric option will make compare(`foo1`, `foo01`) === 0. Disambiguate.\n    if (intlFileNameCollatorBaseNumeric.value.collatorIsNumeric && result === 0 && a !== b) {\n        return a < b ? -1 : 1;\n    }\n    return result;\n}\nexport function compareAnything(one, other, lookFor) {\n    const elementAName = one.toLowerCase();\n    const elementBName = other.toLowerCase();\n    // Sort prefix matches over non prefix matches\n    const prefixCompare = compareByPrefix(one, other, lookFor);\n    if (prefixCompare) {\n        return prefixCompare;\n    }\n    // Sort suffix matches over non suffix matches\n    const elementASuffixMatch = elementAName.endsWith(lookFor);\n    const elementBSuffixMatch = elementBName.endsWith(lookFor);\n    if (elementASuffixMatch !== elementBSuffixMatch) {\n        return elementASuffixMatch ? -1 : 1;\n    }\n    // Understand file names\n    const r = compareFileNames(elementAName, elementBName);\n    if (r !== 0) {\n        return r;\n    }\n    // Compare by name\n    return elementAName.localeCompare(elementBName);\n}\nexport function compareByPrefix(one, other, lookFor) {\n    const elementAName = one.toLowerCase();\n    const elementBName = other.toLowerCase();\n    // Sort prefix matches over non prefix matches\n    const elementAPrefixMatch = elementAName.startsWith(lookFor);\n    const elementBPrefixMatch = elementBName.startsWith(lookFor);\n    if (elementAPrefixMatch !== elementBPrefixMatch) {\n        return elementAPrefixMatch ? -1 : 1;\n    }\n    // Same prefix: Sort shorter matches to the top to have those on top that match more precisely\n    else if (elementAPrefixMatch && elementBPrefixMatch) {\n        if (elementAName.length < elementBName.length) {\n            return -1;\n        }\n        if (elementAName.length > elementBName.length) {\n            return 1;\n        }\n    }\n    return 0;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { KeybindingLabel } from '../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { range } from '../../../base/common/arrays.js';\nimport { ThrottledDelayer } from '../../../base/common/async.js';\nimport { compareAnything } from '../../../base/common/comparers.js';\nimport { memoize } from '../../../base/common/decorators.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { getCodiconAriaLabel, matchesFuzzyIconAware, parseLabelWithIcons } from '../../../base/common/iconLabels.js';\nimport { DisposableStore, dispose } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { ltrim } from '../../../base/common/strings.js';\nimport './media/quickInput.css';\nimport { localize } from '../../../nls.js';\nimport { getIconClass } from './quickInputUtils.js';\nimport { Lazy } from '../../../base/common/lazy.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { isDark } from '../../theme/common/theme.js';\nconst $ = dom.$;\nclass ListElement {\n    constructor(mainItem, previous, index, hasCheckbox, fireButtonTriggered, fireSeparatorButtonTriggered, onCheckedEmitter) {\n        var _a, _b, _c;\n        // state will get updated later\n        this._checked = false;\n        this._hidden = false;\n        this.hasCheckbox = hasCheckbox;\n        this.index = index;\n        this.fireButtonTriggered = fireButtonTriggered;\n        this.fireSeparatorButtonTriggered = fireSeparatorButtonTriggered;\n        this._onChecked = onCheckedEmitter;\n        this.onChecked = hasCheckbox\n            ? Event.map(Event.filter(this._onChecked.event, e => e.listElement === this), e => e.checked)\n            : Event.None;\n        if (mainItem.type === 'separator') {\n            this._separator = mainItem;\n        }\n        else {\n            this.item = mainItem;\n            if (previous && previous.type === 'separator' && !previous.buttons) {\n                this._separator = previous;\n            }\n            this.saneDescription = this.item.description;\n            this.saneDetail = this.item.detail;\n            this._labelHighlights = (_a = this.item.highlights) === null || _a === void 0 ? void 0 : _a.label;\n            this._descriptionHighlights = (_b = this.item.highlights) === null || _b === void 0 ? void 0 : _b.description;\n            this._detailHighlights = (_c = this.item.highlights) === null || _c === void 0 ? void 0 : _c.detail;\n            this.saneTooltip = this.item.tooltip;\n        }\n        this._init = new Lazy(() => {\n            var _a;\n            const saneLabel = (_a = mainItem.label) !== null && _a !== void 0 ? _a : '';\n            const saneSortLabel = parseLabelWithIcons(saneLabel).text.trim();\n            const saneAriaLabel = mainItem.ariaLabel || [saneLabel, this.saneDescription, this.saneDetail]\n                .map(s => getCodiconAriaLabel(s))\n                .filter(s => !!s)\n                .join(', ');\n            return {\n                saneLabel,\n                saneSortLabel,\n                saneAriaLabel\n            };\n        });\n    }\n    // #region Lazy Getters\n    get saneLabel() {\n        return this._init.value.saneLabel;\n    }\n    get saneSortLabel() {\n        return this._init.value.saneSortLabel;\n    }\n    get saneAriaLabel() {\n        return this._init.value.saneAriaLabel;\n    }\n    // #endregion\n    // #region Getters and Setters\n    get element() {\n        return this._element;\n    }\n    set element(value) {\n        this._element = value;\n    }\n    get hidden() {\n        return this._hidden;\n    }\n    set hidden(value) {\n        this._hidden = value;\n    }\n    get checked() {\n        return this._checked;\n    }\n    set checked(value) {\n        if (value !== this._checked) {\n            this._checked = value;\n            this._onChecked.fire({ listElement: this, checked: value });\n        }\n    }\n    get separator() {\n        return this._separator;\n    }\n    set separator(value) {\n        this._separator = value;\n    }\n    get labelHighlights() {\n        return this._labelHighlights;\n    }\n    set labelHighlights(value) {\n        this._labelHighlights = value;\n    }\n    get descriptionHighlights() {\n        return this._descriptionHighlights;\n    }\n    set descriptionHighlights(value) {\n        this._descriptionHighlights = value;\n    }\n    get detailHighlights() {\n        return this._detailHighlights;\n    }\n    set detailHighlights(value) {\n        this._detailHighlights = value;\n    }\n}\nclass ListElementRenderer {\n    constructor(themeService) {\n        this.themeService = themeService;\n    }\n    get templateId() {\n        return ListElementRenderer.ID;\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.toDisposeElement = [];\n        data.toDisposeTemplate = [];\n        data.entry = dom.append(container, $('.quick-input-list-entry'));\n        // Checkbox\n        const label = dom.append(data.entry, $('label.quick-input-list-label'));\n        data.toDisposeTemplate.push(dom.addStandardDisposableListener(label, dom.EventType.CLICK, e => {\n            if (!data.checkbox.offsetParent) { // If checkbox not visible:\n                e.preventDefault(); // Prevent toggle of checkbox when it is immediately shown afterwards. #91740\n            }\n        }));\n        data.checkbox = dom.append(label, $('input.quick-input-list-checkbox'));\n        data.checkbox.type = 'checkbox';\n        data.toDisposeTemplate.push(dom.addStandardDisposableListener(data.checkbox, dom.EventType.CHANGE, e => {\n            data.element.checked = data.checkbox.checked;\n        }));\n        // Rows\n        const rows = dom.append(label, $('.quick-input-list-rows'));\n        const row1 = dom.append(rows, $('.quick-input-list-row'));\n        const row2 = dom.append(rows, $('.quick-input-list-row'));\n        // Label\n        data.label = new IconLabel(row1, { supportHighlights: true, supportDescriptionHighlights: true, supportIcons: true });\n        data.toDisposeTemplate.push(data.label);\n        data.icon = dom.prepend(data.label.element, $('.quick-input-list-icon'));\n        // Keybinding\n        const keybindingContainer = dom.append(row1, $('.quick-input-list-entry-keybinding'));\n        data.keybinding = new KeybindingLabel(keybindingContainer, platform.OS);\n        // Detail\n        const detailContainer = dom.append(row2, $('.quick-input-list-label-meta'));\n        data.detail = new IconLabel(detailContainer, { supportHighlights: true, supportIcons: true });\n        data.toDisposeTemplate.push(data.detail);\n        // Separator\n        data.separator = dom.append(data.entry, $('.quick-input-list-separator'));\n        // Actions\n        data.actionBar = new ActionBar(data.entry);\n        data.actionBar.domNode.classList.add('quick-input-list-entry-action-bar');\n        data.toDisposeTemplate.push(data.actionBar);\n        return data;\n    }\n    renderElement(element, index, data) {\n        var _a, _b, _c, _d;\n        data.element = element;\n        element.element = (_a = data.entry) !== null && _a !== void 0 ? _a : undefined;\n        const mainItem = element.item ? element.item : element.separator;\n        data.checkbox.checked = element.checked;\n        data.toDisposeElement.push(element.onChecked(checked => data.checkbox.checked = checked));\n        const { labelHighlights, descriptionHighlights, detailHighlights } = element;\n        if ((_b = element.item) === null || _b === void 0 ? void 0 : _b.iconPath) {\n            const icon = isDark(this.themeService.getColorTheme().type) ? element.item.iconPath.dark : ((_c = element.item.iconPath.light) !== null && _c !== void 0 ? _c : element.item.iconPath.dark);\n            const iconUrl = URI.revive(icon);\n            data.icon.className = 'quick-input-list-icon';\n            data.icon.style.backgroundImage = dom.asCSSUrl(iconUrl);\n        }\n        else {\n            data.icon.style.backgroundImage = '';\n            data.icon.className = ((_d = element.item) === null || _d === void 0 ? void 0 : _d.iconClass) ? `quick-input-list-icon ${element.item.iconClass}` : '';\n        }\n        // Label\n        const options = {\n            matches: labelHighlights || [],\n            descriptionTitle: element.saneDescription,\n            descriptionMatches: descriptionHighlights || [],\n            labelEscapeNewLines: true\n        };\n        if (mainItem.type !== 'separator') {\n            options.extraClasses = mainItem.iconClasses;\n            options.italic = mainItem.italic;\n            options.strikethrough = mainItem.strikethrough;\n            data.entry.classList.remove('quick-input-list-separator-as-item');\n        }\n        else {\n            data.entry.classList.add('quick-input-list-separator-as-item');\n        }\n        data.label.setLabel(element.saneLabel, element.saneDescription, options);\n        // Keybinding\n        data.keybinding.set(mainItem.type === 'separator' ? undefined : mainItem.keybinding);\n        // Detail\n        if (element.saneDetail) {\n            data.detail.element.style.display = '';\n            data.detail.setLabel(element.saneDetail, undefined, {\n                matches: detailHighlights,\n                title: element.saneDetail,\n                labelEscapeNewLines: true\n            });\n        }\n        else {\n            data.detail.element.style.display = 'none';\n        }\n        // Separator\n        if (element.item && element.separator && element.separator.label) {\n            data.separator.textContent = element.separator.label;\n            data.separator.style.display = '';\n        }\n        else {\n            data.separator.style.display = 'none';\n        }\n        data.entry.classList.toggle('quick-input-list-separator-border', !!element.separator);\n        // Actions\n        const buttons = mainItem.buttons;\n        if (buttons && buttons.length) {\n            data.actionBar.push(buttons.map((button, index) => {\n                let cssClasses = button.iconClass || (button.iconPath ? getIconClass(button.iconPath) : undefined);\n                if (button.alwaysVisible) {\n                    cssClasses = cssClasses ? `${cssClasses} always-visible` : 'always-visible';\n                }\n                return {\n                    id: `id-${index}`,\n                    class: cssClasses,\n                    enabled: true,\n                    label: '',\n                    tooltip: button.tooltip || '',\n                    run: () => {\n                        mainItem.type !== 'separator'\n                            ? element.fireButtonTriggered({\n                                button,\n                                item: mainItem\n                            })\n                            : element.fireSeparatorButtonTriggered({\n                                button,\n                                separator: mainItem\n                            });\n                    }\n                };\n            }), { icon: true, label: false });\n            data.entry.classList.add('has-actions');\n        }\n        else {\n            data.entry.classList.remove('has-actions');\n        }\n    }\n    disposeElement(element, index, data) {\n        data.toDisposeElement = dispose(data.toDisposeElement);\n        data.actionBar.clear();\n    }\n    disposeTemplate(data) {\n        data.toDisposeElement = dispose(data.toDisposeElement);\n        data.toDisposeTemplate = dispose(data.toDisposeTemplate);\n    }\n}\nListElementRenderer.ID = 'listelement';\nclass ListElementDelegate {\n    getHeight(element) {\n        if (!element.item) {\n            // must be a separator\n            return 24;\n        }\n        return element.saneDetail ? 44 : 22;\n    }\n    getTemplateId(element) {\n        return ListElementRenderer.ID;\n    }\n}\nexport var QuickInputListFocus;\n(function (QuickInputListFocus) {\n    QuickInputListFocus[QuickInputListFocus[\"First\"] = 1] = \"First\";\n    QuickInputListFocus[QuickInputListFocus[\"Second\"] = 2] = \"Second\";\n    QuickInputListFocus[QuickInputListFocus[\"Last\"] = 3] = \"Last\";\n    QuickInputListFocus[QuickInputListFocus[\"Next\"] = 4] = \"Next\";\n    QuickInputListFocus[QuickInputListFocus[\"Previous\"] = 5] = \"Previous\";\n    QuickInputListFocus[QuickInputListFocus[\"NextPage\"] = 6] = \"NextPage\";\n    QuickInputListFocus[QuickInputListFocus[\"PreviousPage\"] = 7] = \"PreviousPage\";\n})(QuickInputListFocus || (QuickInputListFocus = {}));\nexport class QuickInputList {\n    constructor(parent, id, options, themeService) {\n        this.parent = parent;\n        this.options = options;\n        this.inputElements = [];\n        this.elements = [];\n        this.elementsToIndexes = new Map();\n        this.matchOnDescription = false;\n        this.matchOnDetail = false;\n        this.matchOnLabel = true;\n        this.matchOnLabelMode = 'fuzzy';\n        this.sortByLabel = true;\n        this._onChangedAllVisibleChecked = new Emitter();\n        this.onChangedAllVisibleChecked = this._onChangedAllVisibleChecked.event;\n        this._onChangedCheckedCount = new Emitter();\n        this.onChangedCheckedCount = this._onChangedCheckedCount.event;\n        this._onChangedVisibleCount = new Emitter();\n        this.onChangedVisibleCount = this._onChangedVisibleCount.event;\n        this._onChangedCheckedElements = new Emitter();\n        this.onChangedCheckedElements = this._onChangedCheckedElements.event;\n        this._onButtonTriggered = new Emitter();\n        this.onButtonTriggered = this._onButtonTriggered.event;\n        this._onSeparatorButtonTriggered = new Emitter();\n        this.onSeparatorButtonTriggered = this._onSeparatorButtonTriggered.event;\n        this._onKeyDown = new Emitter();\n        this.onKeyDown = this._onKeyDown.event;\n        this._onLeave = new Emitter();\n        this.onLeave = this._onLeave.event;\n        this._listElementChecked = new Emitter();\n        this._fireCheckedEvents = true;\n        this.elementDisposables = [];\n        this.disposables = [];\n        this.id = id;\n        this.container = dom.append(this.parent, $('.quick-input-list'));\n        const delegate = new ListElementDelegate();\n        const accessibilityProvider = new QuickInputAccessibilityProvider();\n        this.list = options.createList('QuickInput', this.container, delegate, [new ListElementRenderer(themeService)], {\n            identityProvider: {\n                getId: element => {\n                    var _a, _b, _c, _d, _e, _f, _g, _h;\n                    // always prefer item over separator because if item is defined, it must be the main item type\n                    // always prefer a defined id if one was specified and use label as a fallback\n                    return (_h = (_f = (_d = (_b = (_a = element.item) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (_c = element.item) === null || _c === void 0 ? void 0 : _c.label) !== null && _d !== void 0 ? _d : (_e = element.separator) === null || _e === void 0 ? void 0 : _e.id) !== null && _f !== void 0 ? _f : (_g = element.separator) === null || _g === void 0 ? void 0 : _g.label) !== null && _h !== void 0 ? _h : '';\n                }\n            },\n            setRowLineHeight: false,\n            multipleSelectionSupport: false,\n            horizontalScrolling: false,\n            accessibilityProvider\n        });\n        this.list.getHTMLElement().id = id;\n        this.disposables.push(this.list);\n        this.disposables.push(this.list.onKeyDown(e => {\n            const event = new StandardKeyboardEvent(e);\n            switch (event.keyCode) {\n                case 10 /* KeyCode.Space */:\n                    this.toggleCheckbox();\n                    break;\n                case 31 /* KeyCode.KeyA */:\n                    if (platform.isMacintosh ? e.metaKey : e.ctrlKey) {\n                        this.list.setFocus(range(this.list.length));\n                    }\n                    break;\n                case 16 /* KeyCode.UpArrow */: {\n                    const focus1 = this.list.getFocus();\n                    if (focus1.length === 1 && focus1[0] === 0) {\n                        this._onLeave.fire();\n                    }\n                    break;\n                }\n                case 18 /* KeyCode.DownArrow */: {\n                    const focus2 = this.list.getFocus();\n                    if (focus2.length === 1 && focus2[0] === this.list.length - 1) {\n                        this._onLeave.fire();\n                    }\n                    break;\n                }\n            }\n            this._onKeyDown.fire(event);\n        }));\n        this.disposables.push(this.list.onMouseDown(e => {\n            if (e.browserEvent.button !== 2) {\n                // Works around / fixes #64350.\n                e.browserEvent.preventDefault();\n            }\n        }));\n        this.disposables.push(dom.addDisposableListener(this.container, dom.EventType.CLICK, e => {\n            if (e.x || e.y) { // Avoid 'click' triggered by 'space' on checkbox.\n                this._onLeave.fire();\n            }\n        }));\n        this.disposables.push(this.list.onMouseMiddleClick(e => {\n            this._onLeave.fire();\n        }));\n        this.disposables.push(this.list.onContextMenu(e => {\n            if (typeof e.index === 'number') {\n                e.browserEvent.preventDefault();\n                // we want to treat a context menu event as\n                // a gesture to open the item at the index\n                // since we do not have any context menu\n                // this enables for example macOS to Ctrl-\n                // click on an item to open it.\n                this.list.setSelection([e.index]);\n            }\n        }));\n        if (options.hoverDelegate) {\n            const delayer = new ThrottledDelayer(options.hoverDelegate.delay);\n            // onMouseOver triggers every time a new element has been moused over\n            // even if it's on the same list item.\n            this.disposables.push(this.list.onMouseOver(async (e) => {\n                var _a;\n                // If we hover over an anchor element, we don't want to show the hover because\n                // the anchor may have a tooltip that we want to show instead.\n                if (e.browserEvent.target instanceof HTMLAnchorElement) {\n                    delayer.cancel();\n                    return;\n                }\n                if (\n                // anchors are an exception as called out above so we skip them here\n                !(e.browserEvent.relatedTarget instanceof HTMLAnchorElement) &&\n                    // check if the mouse is still over the same element\n                    dom.isAncestor(e.browserEvent.relatedTarget, (_a = e.element) === null || _a === void 0 ? void 0 : _a.element)) {\n                    return;\n                }\n                try {\n                    await delayer.trigger(async () => {\n                        if (e.element) {\n                            this.showHover(e.element);\n                        }\n                    });\n                }\n                catch (e) {\n                    // Ignore cancellation errors due to mouse out\n                    if (!isCancellationError(e)) {\n                        throw e;\n                    }\n                }\n            }));\n            this.disposables.push(this.list.onMouseOut(e => {\n                var _a;\n                // onMouseOut triggers every time a new element has been moused over\n                // even if it's on the same list item. We only want one event, so we\n                // check if the mouse is still over the same element.\n                if (dom.isAncestor(e.browserEvent.relatedTarget, (_a = e.element) === null || _a === void 0 ? void 0 : _a.element)) {\n                    return;\n                }\n                delayer.cancel();\n            }));\n            this.disposables.push(delayer);\n        }\n        this.disposables.push(this._listElementChecked.event(_ => this.fireCheckedEvents()));\n        this.disposables.push(this._onChangedAllVisibleChecked, this._onChangedCheckedCount, this._onChangedVisibleCount, this._onChangedCheckedElements, this._onButtonTriggered, this._onSeparatorButtonTriggered, this._onLeave, this._onKeyDown);\n    }\n    get onDidChangeFocus() {\n        return Event.map(this.list.onDidChangeFocus, e => e.elements.map(e => e.item));\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.list.onDidChangeSelection, e => ({ items: e.elements.map(e => e.item), event: e.browserEvent }));\n    }\n    get scrollTop() {\n        return this.list.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.list.scrollTop = scrollTop;\n    }\n    get ariaLabel() {\n        return this.list.getHTMLElement().ariaLabel;\n    }\n    set ariaLabel(label) {\n        this.list.getHTMLElement().ariaLabel = label;\n    }\n    getAllVisibleChecked() {\n        return this.allVisibleChecked(this.elements, false);\n    }\n    allVisibleChecked(elements, whenNoneVisible = true) {\n        for (let i = 0, n = elements.length; i < n; i++) {\n            const element = elements[i];\n            if (!element.hidden) {\n                if (!element.checked) {\n                    return false;\n                }\n                else {\n                    whenNoneVisible = true;\n                }\n            }\n        }\n        return whenNoneVisible;\n    }\n    getCheckedCount() {\n        let count = 0;\n        const elements = this.elements;\n        for (let i = 0, n = elements.length; i < n; i++) {\n            if (elements[i].checked) {\n                count++;\n            }\n        }\n        return count;\n    }\n    getVisibleCount() {\n        let count = 0;\n        const elements = this.elements;\n        for (let i = 0, n = elements.length; i < n; i++) {\n            if (!elements[i].hidden) {\n                count++;\n            }\n        }\n        return count;\n    }\n    setAllVisibleChecked(checked) {\n        try {\n            this._fireCheckedEvents = false;\n            this.elements.forEach(element => {\n                if (!element.hidden) {\n                    element.checked = checked;\n                }\n            });\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    setElements(inputElements) {\n        this.elementDisposables = dispose(this.elementDisposables);\n        const fireButtonTriggered = (event) => this.fireButtonTriggered(event);\n        const fireSeparatorButtonTriggered = (event) => this.fireSeparatorButtonTriggered(event);\n        this.inputElements = inputElements;\n        const elementsToIndexes = new Map();\n        const hasCheckbox = this.parent.classList.contains('show-checkboxes');\n        this.elements = inputElements.reduce((result, item, index) => {\n            var _a;\n            const previous = index > 0 ? inputElements[index - 1] : undefined;\n            if (item.type === 'separator') {\n                if (!item.buttons) {\n                    // This separator will be rendered as a part of the list item\n                    return result;\n                }\n            }\n            const element = new ListElement(item, previous, index, hasCheckbox, fireButtonTriggered, fireSeparatorButtonTriggered, this._listElementChecked);\n            const resultIndex = result.length;\n            result.push(element);\n            elementsToIndexes.set((_a = element.item) !== null && _a !== void 0 ? _a : element.separator, resultIndex);\n            return result;\n        }, []);\n        this.elementsToIndexes = elementsToIndexes;\n        this.list.splice(0, this.list.length); // Clear focus and selection first, sending the events when the list is empty.\n        this.list.splice(0, this.list.length, this.elements);\n        this._onChangedVisibleCount.fire(this.elements.length);\n    }\n    getFocusedElements() {\n        return this.list.getFocusedElements()\n            .map(e => e.item);\n    }\n    setFocusedElements(items) {\n        this.list.setFocus(items\n            .filter(item => this.elementsToIndexes.has(item))\n            .map(item => this.elementsToIndexes.get(item)));\n        if (items.length > 0) {\n            const focused = this.list.getFocus()[0];\n            if (typeof focused === 'number') {\n                this.list.reveal(focused);\n            }\n        }\n    }\n    getActiveDescendant() {\n        return this.list.getHTMLElement().getAttribute('aria-activedescendant');\n    }\n    setSelectedElements(items) {\n        this.list.setSelection(items\n            .filter(item => this.elementsToIndexes.has(item))\n            .map(item => this.elementsToIndexes.get(item)));\n    }\n    getCheckedElements() {\n        return this.elements.filter(e => e.checked)\n            .map(e => e.item)\n            .filter(e => !!e);\n    }\n    setCheckedElements(items) {\n        try {\n            this._fireCheckedEvents = false;\n            const checked = new Set();\n            for (const item of items) {\n                checked.add(item);\n            }\n            for (const element of this.elements) {\n                element.checked = checked.has(element.item);\n            }\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    set enabled(value) {\n        this.list.getHTMLElement().style.pointerEvents = value ? '' : 'none';\n    }\n    focus(what) {\n        if (!this.list.length) {\n            return;\n        }\n        if (what === QuickInputListFocus.Second && this.list.length < 2) {\n            what = QuickInputListFocus.First;\n        }\n        switch (what) {\n            case QuickInputListFocus.First:\n                this.list.scrollTop = 0;\n                this.list.focusFirst(undefined, (e) => !!e.item);\n                break;\n            case QuickInputListFocus.Second:\n                this.list.scrollTop = 0;\n                this.list.focusNth(1, undefined, (e) => !!e.item);\n                break;\n            case QuickInputListFocus.Last:\n                this.list.scrollTop = this.list.scrollHeight;\n                this.list.focusLast(undefined, (e) => !!e.item);\n                break;\n            case QuickInputListFocus.Next: {\n                this.list.focusNext(undefined, true, undefined, (e) => !!e.item);\n                const index = this.list.getFocus()[0];\n                if (index !== 0 && !this.elements[index - 1].item && this.list.firstVisibleIndex > index - 1) {\n                    this.list.reveal(index - 1);\n                }\n                break;\n            }\n            case QuickInputListFocus.Previous: {\n                this.list.focusPrevious(undefined, true, undefined, (e) => !!e.item);\n                const index = this.list.getFocus()[0];\n                if (index !== 0 && !this.elements[index - 1].item && this.list.firstVisibleIndex > index - 1) {\n                    this.list.reveal(index - 1);\n                }\n                break;\n            }\n            case QuickInputListFocus.NextPage:\n                this.list.focusNextPage(undefined, (e) => !!e.item);\n                break;\n            case QuickInputListFocus.PreviousPage:\n                this.list.focusPreviousPage(undefined, (e) => !!e.item);\n                break;\n        }\n        const focused = this.list.getFocus()[0];\n        if (typeof focused === 'number') {\n            this.list.reveal(focused);\n        }\n    }\n    clearFocus() {\n        this.list.setFocus([]);\n    }\n    domFocus() {\n        this.list.domFocus();\n    }\n    /**\n     * Disposes of the hover and shows a new one for the given index if it has a tooltip.\n     * @param element The element to show the hover for\n     */\n    showHover(element) {\n        var _a, _b, _c;\n        if (this.options.hoverDelegate === undefined) {\n            return;\n        }\n        if (this._lastHover && !this._lastHover.isDisposed) {\n            (_b = (_a = this.options.hoverDelegate).onDidHideHover) === null || _b === void 0 ? void 0 : _b.call(_a);\n            (_c = this._lastHover) === null || _c === void 0 ? void 0 : _c.dispose();\n        }\n        if (!element.element || !element.saneTooltip) {\n            return;\n        }\n        this._lastHover = this.options.hoverDelegate.showHover({\n            content: element.saneTooltip,\n            target: element.element,\n            linkHandler: (url) => {\n                this.options.linkOpenerDelegate(url);\n            },\n            appearance: {\n                showPointer: true,\n            },\n            container: this.container,\n            position: {\n                hoverPosition: 1 /* HoverPosition.RIGHT */\n            }\n        }, false);\n    }\n    layout(maxHeight) {\n        this.list.getHTMLElement().style.maxHeight = maxHeight ? `${\n        // Make sure height aligns with list item heights\n        Math.floor(maxHeight / 44) * 44\n            // Add some extra height so that it's clear there's more to scroll\n            + 6}px` : '';\n        this.list.layout();\n    }\n    filter(query) {\n        if (!(this.sortByLabel || this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\n            this.list.layout();\n            return false;\n        }\n        const queryWithWhitespace = query;\n        query = query.trim();\n        // Reset filtering\n        if (!query || !(this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\n            this.elements.forEach(element => {\n                element.labelHighlights = undefined;\n                element.descriptionHighlights = undefined;\n                element.detailHighlights = undefined;\n                element.hidden = false;\n                const previous = element.index && this.inputElements[element.index - 1];\n                if (element.item) {\n                    element.separator = previous && previous.type === 'separator' && !previous.buttons ? previous : undefined;\n                }\n            });\n        }\n        // Filter by value (since we support icons in labels, use $(..) aware fuzzy matching)\n        else {\n            let currentSeparator;\n            this.elements.forEach(element => {\n                var _a, _b, _c, _d;\n                let labelHighlights;\n                if (this.matchOnLabelMode === 'fuzzy') {\n                    labelHighlights = this.matchOnLabel ? (_a = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneLabel))) !== null && _a !== void 0 ? _a : undefined : undefined;\n                }\n                else {\n                    labelHighlights = this.matchOnLabel ? (_b = matchesContiguousIconAware(queryWithWhitespace, parseLabelWithIcons(element.saneLabel))) !== null && _b !== void 0 ? _b : undefined : undefined;\n                }\n                const descriptionHighlights = this.matchOnDescription ? (_c = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDescription || ''))) !== null && _c !== void 0 ? _c : undefined : undefined;\n                const detailHighlights = this.matchOnDetail ? (_d = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDetail || ''))) !== null && _d !== void 0 ? _d : undefined : undefined;\n                if (labelHighlights || descriptionHighlights || detailHighlights) {\n                    element.labelHighlights = labelHighlights;\n                    element.descriptionHighlights = descriptionHighlights;\n                    element.detailHighlights = detailHighlights;\n                    element.hidden = false;\n                }\n                else {\n                    element.labelHighlights = undefined;\n                    element.descriptionHighlights = undefined;\n                    element.detailHighlights = undefined;\n                    element.hidden = element.item ? !element.item.alwaysShow : true;\n                }\n                // Ensure separators are filtered out first before deciding if we need to bring them back\n                if (element.item) {\n                    element.separator = undefined;\n                }\n                else if (element.separator) {\n                    element.hidden = true;\n                }\n                // we can show the separator unless the list gets sorted by match\n                if (!this.sortByLabel) {\n                    const previous = element.index && this.inputElements[element.index - 1];\n                    currentSeparator = previous && previous.type === 'separator' ? previous : currentSeparator;\n                    if (currentSeparator && !element.hidden) {\n                        element.separator = currentSeparator;\n                        currentSeparator = undefined;\n                    }\n                }\n            });\n        }\n        const shownElements = this.elements.filter(element => !element.hidden);\n        // Sort by value\n        if (this.sortByLabel && query) {\n            const normalizedSearchValue = query.toLowerCase();\n            shownElements.sort((a, b) => {\n                return compareEntries(a, b, normalizedSearchValue);\n            });\n        }\n        this.elementsToIndexes = shownElements.reduce((map, element, index) => {\n            var _a;\n            map.set((_a = element.item) !== null && _a !== void 0 ? _a : element.separator, index);\n            return map;\n        }, new Map());\n        this.list.splice(0, this.list.length, shownElements);\n        this.list.setFocus([]);\n        this.list.layout();\n        this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\n        this._onChangedVisibleCount.fire(shownElements.length);\n        return true;\n    }\n    toggleCheckbox() {\n        try {\n            this._fireCheckedEvents = false;\n            const elements = this.list.getFocusedElements();\n            const allChecked = this.allVisibleChecked(elements);\n            for (const element of elements) {\n                element.checked = !allChecked;\n            }\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    display(display) {\n        this.container.style.display = display ? '' : 'none';\n    }\n    isDisplayed() {\n        return this.container.style.display !== 'none';\n    }\n    dispose() {\n        this.elementDisposables = dispose(this.elementDisposables);\n        this.disposables = dispose(this.disposables);\n    }\n    fireCheckedEvents() {\n        if (this._fireCheckedEvents) {\n            this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\n            this._onChangedCheckedCount.fire(this.getCheckedCount());\n            this._onChangedCheckedElements.fire(this.getCheckedElements());\n        }\n    }\n    fireButtonTriggered(event) {\n        this._onButtonTriggered.fire(event);\n    }\n    fireSeparatorButtonTriggered(event) {\n        this._onSeparatorButtonTriggered.fire(event);\n    }\n    style(styles) {\n        this.list.style(styles);\n    }\n    toggleHover() {\n        const element = this.list.getFocusedElements()[0];\n        if (!(element === null || element === void 0 ? void 0 : element.saneTooltip)) {\n            return;\n        }\n        // if there's a hover already, hide it (toggle off)\n        if (this._lastHover && !this._lastHover.isDisposed) {\n            this._lastHover.dispose();\n            return;\n        }\n        // If there is no hover, show it (toggle on)\n        const focused = this.list.getFocusedElements()[0];\n        if (!focused) {\n            return;\n        }\n        this.showHover(focused);\n        const store = new DisposableStore();\n        store.add(this.list.onDidChangeFocus(e => {\n            if (e.indexes.length) {\n                this.showHover(e.elements[0]);\n            }\n        }));\n        if (this._lastHover) {\n            store.add(this._lastHover);\n        }\n        this._toggleHover = store;\n        this.elementDisposables.push(this._toggleHover);\n    }\n}\n__decorate([\n    memoize\n], QuickInputList.prototype, \"onDidChangeFocus\", null);\n__decorate([\n    memoize\n], QuickInputList.prototype, \"onDidChangeSelection\", null);\nfunction matchesContiguousIconAware(query, target) {\n    const { text, iconOffsets } = target;\n    // Return early if there are no icon markers in the word to match against\n    if (!iconOffsets || iconOffsets.length === 0) {\n        return matchesContiguous(query, text);\n    }\n    // Trim the word to match against because it could have leading\n    // whitespace now if the word started with an icon\n    const wordToMatchAgainstWithoutIconsTrimmed = ltrim(text, ' ');\n    const leadingWhitespaceOffset = text.length - wordToMatchAgainstWithoutIconsTrimmed.length;\n    // match on value without icon\n    const matches = matchesContiguous(query, wordToMatchAgainstWithoutIconsTrimmed);\n    // Map matches back to offsets with icon and trimming\n    if (matches) {\n        for (const match of matches) {\n            const iconOffset = iconOffsets[match.start + leadingWhitespaceOffset] /* icon offsets at index */ + leadingWhitespaceOffset /* overall leading whitespace offset */;\n            match.start += iconOffset;\n            match.end += iconOffset;\n        }\n    }\n    return matches;\n}\nfunction matchesContiguous(word, wordToMatchAgainst) {\n    const matchIndex = wordToMatchAgainst.toLowerCase().indexOf(word.toLowerCase());\n    if (matchIndex !== -1) {\n        return [{ start: matchIndex, end: matchIndex + word.length }];\n    }\n    return null;\n}\nfunction compareEntries(elementA, elementB, lookFor) {\n    const labelHighlightsA = elementA.labelHighlights || [];\n    const labelHighlightsB = elementB.labelHighlights || [];\n    if (labelHighlightsA.length && !labelHighlightsB.length) {\n        return -1;\n    }\n    if (!labelHighlightsA.length && labelHighlightsB.length) {\n        return 1;\n    }\n    if (labelHighlightsA.length === 0 && labelHighlightsB.length === 0) {\n        return 0;\n    }\n    return compareAnything(elementA.saneSortLabel, elementB.saneSortLabel, lookFor);\n}\nclass QuickInputAccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('quickInput', \"Quick Input\");\n    }\n    getAriaLabel(element) {\n        var _a;\n        return ((_a = element.separator) === null || _a === void 0 ? void 0 : _a.label)\n            ? `${element.saneAriaLabel}, ${element.separator.label}`\n            : element.saneAriaLabel;\n    }\n    getWidgetRole() {\n        return 'listbox';\n    }\n    getRole(element) {\n        return element.hasCheckbox ? 'checkbox' : 'option';\n    }\n    isChecked(element) {\n        if (!element.hasCheckbox) {\n            return undefined;\n        }\n        return {\n            value: element.checked,\n            onDidChange: element.onChecked\n        };\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { memoize } from './decorators.js';\nexport class LinkedText {\n    constructor(nodes) {\n        this.nodes = nodes;\n    }\n    toString() {\n        return this.nodes.map(node => typeof node === 'string' ? node : node.label).join('');\n    }\n}\n__decorate([\n    memoize\n], LinkedText.prototype, \"toString\", null);\nconst LINK_REGEX = /\\[([^\\]]+)\\]\\(((?:https?:\\/\\/|command:|file:)[^\\)\\s]+)(?: ([\"'])(.+?)(\\3))?\\)/gi;\nexport function parseLinkedText(text) {\n    const result = [];\n    let index = 0;\n    let match;\n    while (match = LINK_REGEX.exec(text)) {\n        if (match.index - index > 0) {\n            result.push(text.substring(index, match.index));\n        }\n        const [, label, href, , title] = match;\n        if (title) {\n            result.push({ label, href, title });\n        }\n        else {\n            result.push({ label, href });\n        }\n        index = match.index + match[0].length;\n    }\n    if (index < text.length) {\n        result.push(text.substring(index));\n    }\n    return new LinkedText(result);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { DomEmitter } from '../../../base/browser/event.js';\nimport { Event } from '../../../base/common/event.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { Gesture, EventType as GestureEventType } from '../../../base/browser/touch.js';\nimport { renderLabelWithIcons } from '../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { IdGenerator } from '../../../base/common/idGenerator.js';\nimport { parseLinkedText } from '../../../base/common/linkedText.js';\nimport './media/quickInput.css';\nimport { localize } from '../../../nls.js';\nconst iconPathToClass = {};\nconst iconClassGenerator = new IdGenerator('quick-input-button-icon-');\nexport function getIconClass(iconPath) {\n    if (!iconPath) {\n        return undefined;\n    }\n    let iconClass;\n    const key = iconPath.dark.toString();\n    if (iconPathToClass[key]) {\n        iconClass = iconPathToClass[key];\n    }\n    else {\n        iconClass = iconClassGenerator.nextId();\n        dom.createCSSRule(`.${iconClass}, .hc-light .${iconClass}`, `background-image: ${dom.asCSSUrl(iconPath.light || iconPath.dark)}`);\n        dom.createCSSRule(`.vs-dark .${iconClass}, .hc-black .${iconClass}`, `background-image: ${dom.asCSSUrl(iconPath.dark)}`);\n        iconPathToClass[key] = iconClass;\n    }\n    return iconClass;\n}\nexport function renderQuickInputDescription(description, container, actionHandler) {\n    dom.reset(container);\n    const parsed = parseLinkedText(description);\n    let tabIndex = 0;\n    for (const node of parsed.nodes) {\n        if (typeof node === 'string') {\n            container.append(...renderLabelWithIcons(node));\n        }\n        else {\n            let title = node.title;\n            if (!title && node.href.startsWith('command:')) {\n                title = localize('executeCommand', \"Click to execute command '{0}'\", node.href.substring('command:'.length));\n            }\n            else if (!title) {\n                title = node.href;\n            }\n            const anchor = dom.$('a', { href: node.href, title, tabIndex: tabIndex++ }, node.label);\n            anchor.style.textDecoration = 'underline';\n            const handleOpen = (e) => {\n                if (dom.isEventLike(e)) {\n                    dom.EventHelper.stop(e, true);\n                }\n                actionHandler.callback(node.href);\n            };\n            const onClick = actionHandler.disposables.add(new DomEmitter(anchor, dom.EventType.CLICK)).event;\n            const onKeydown = actionHandler.disposables.add(new DomEmitter(anchor, dom.EventType.KEY_DOWN)).event;\n            const onSpaceOrEnter = Event.chain(onKeydown, $ => $.filter(e => {\n                const event = new StandardKeyboardEvent(e);\n                return event.equals(10 /* KeyCode.Space */) || event.equals(3 /* KeyCode.Enter */);\n            }));\n            actionHandler.disposables.add(Gesture.addTarget(anchor));\n            const onTap = actionHandler.disposables.add(new DomEmitter(anchor, GestureEventType.Tap)).event;\n            Event.any(onClick, onTap, onSpaceOrEnter)(handleOpen, null, actionHandler.disposables);\n            container.appendChild(anchor);\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { Toggle } from '../../../base/browser/ui/toggle/toggle.js';\nimport { Action } from '../../../base/common/actions.js';\nimport { equals } from '../../../base/common/arrays.js';\nimport { TimeoutTimer } from '../../../base/common/async.js';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../base/common/platform.js';\nimport Severity from '../../../base/common/severity.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport './media/quickInput.css';\nimport { localize } from '../../../nls.js';\nimport { ItemActivation, NO_KEY_MODS, QuickInputHideReason } from '../common/quickInput.js';\nimport { QuickInputListFocus } from './quickInputList.js';\nimport { getIconClass, renderQuickInputDescription } from './quickInputUtils.js';\nexport const backButton = {\n    iconClass: ThemeIcon.asClassName(Codicon.quickInputBack),\n    tooltip: localize('quickInput.back', \"Back\"),\n    handle: -1 // TODO\n};\nclass QuickInput extends Disposable {\n    constructor(ui) {\n        super();\n        this.ui = ui;\n        this._widgetUpdated = false;\n        this.visible = false;\n        this._enabled = true;\n        this._busy = false;\n        this._ignoreFocusOut = false;\n        this._buttons = [];\n        this.buttonsUpdated = false;\n        this._toggles = [];\n        this.togglesUpdated = false;\n        this.noValidationMessage = QuickInput.noPromptMessage;\n        this._severity = Severity.Ignore;\n        this.onDidTriggerButtonEmitter = this._register(new Emitter());\n        this.onDidHideEmitter = this._register(new Emitter());\n        this.onDisposeEmitter = this._register(new Emitter());\n        this.visibleDisposables = this._register(new DisposableStore());\n        this.onDidHide = this.onDidHideEmitter.event;\n    }\n    get title() {\n        return this._title;\n    }\n    set title(title) {\n        this._title = title;\n        this.update();\n    }\n    get description() {\n        return this._description;\n    }\n    set description(description) {\n        this._description = description;\n        this.update();\n    }\n    get step() {\n        return this._steps;\n    }\n    set step(step) {\n        this._steps = step;\n        this.update();\n    }\n    get totalSteps() {\n        return this._totalSteps;\n    }\n    set totalSteps(totalSteps) {\n        this._totalSteps = totalSteps;\n        this.update();\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    set enabled(enabled) {\n        this._enabled = enabled;\n        this.update();\n    }\n    get contextKey() {\n        return this._contextKey;\n    }\n    set contextKey(contextKey) {\n        this._contextKey = contextKey;\n        this.update();\n    }\n    get busy() {\n        return this._busy;\n    }\n    set busy(busy) {\n        this._busy = busy;\n        this.update();\n    }\n    get ignoreFocusOut() {\n        return this._ignoreFocusOut;\n    }\n    set ignoreFocusOut(ignoreFocusOut) {\n        const shouldUpdate = this._ignoreFocusOut !== ignoreFocusOut && !isIOS;\n        this._ignoreFocusOut = ignoreFocusOut && !isIOS;\n        if (shouldUpdate) {\n            this.update();\n        }\n    }\n    get buttons() {\n        return this._buttons;\n    }\n    set buttons(buttons) {\n        this._buttons = buttons;\n        this.buttonsUpdated = true;\n        this.update();\n    }\n    get toggles() {\n        return this._toggles;\n    }\n    set toggles(toggles) {\n        this._toggles = toggles !== null && toggles !== void 0 ? toggles : [];\n        this.togglesUpdated = true;\n        this.update();\n    }\n    get validationMessage() {\n        return this._validationMessage;\n    }\n    set validationMessage(validationMessage) {\n        this._validationMessage = validationMessage;\n        this.update();\n    }\n    get severity() {\n        return this._severity;\n    }\n    set severity(severity) {\n        this._severity = severity;\n        this.update();\n    }\n    show() {\n        if (this.visible) {\n            return;\n        }\n        this.visibleDisposables.add(this.ui.onDidTriggerButton(button => {\n            if (this.buttons.indexOf(button) !== -1) {\n                this.onDidTriggerButtonEmitter.fire(button);\n            }\n        }));\n        this.ui.show(this);\n        // update properties in the controller that get reset in the ui.show() call\n        this.visible = true;\n        // This ensures the message/prompt gets rendered\n        this._lastValidationMessage = undefined;\n        // This ensures the input box has the right severity applied\n        this._lastSeverity = undefined;\n        if (this.buttons.length) {\n            // if there are buttons, the ui.show() clears them out of the UI so we should\n            // rerender them.\n            this.buttonsUpdated = true;\n        }\n        if (this.toggles.length) {\n            // if there are toggles, the ui.show() clears them out of the UI so we should\n            // rerender them.\n            this.togglesUpdated = true;\n        }\n        this.update();\n    }\n    hide() {\n        if (!this.visible) {\n            return;\n        }\n        this.ui.hide();\n    }\n    didHide(reason = QuickInputHideReason.Other) {\n        this.visible = false;\n        this.visibleDisposables.clear();\n        this.onDidHideEmitter.fire({ reason });\n    }\n    update() {\n        var _a, _b;\n        if (!this.visible) {\n            return;\n        }\n        const title = this.getTitle();\n        if (title && this.ui.title.textContent !== title) {\n            this.ui.title.textContent = title;\n        }\n        else if (!title && this.ui.title.innerHTML !== '&nbsp;') {\n            this.ui.title.innerText = '\\u00a0';\n        }\n        const description = this.getDescription();\n        if (this.ui.description1.textContent !== description) {\n            this.ui.description1.textContent = description;\n        }\n        if (this.ui.description2.textContent !== description) {\n            this.ui.description2.textContent = description;\n        }\n        if (this._widgetUpdated) {\n            this._widgetUpdated = false;\n            if (this._widget) {\n                dom.reset(this.ui.widget, this._widget);\n            }\n            else {\n                dom.reset(this.ui.widget);\n            }\n        }\n        if (this.busy && !this.busyDelay) {\n            this.busyDelay = new TimeoutTimer();\n            this.busyDelay.setIfNotSet(() => {\n                if (this.visible) {\n                    this.ui.progressBar.infinite();\n                }\n            }, 800);\n        }\n        if (!this.busy && this.busyDelay) {\n            this.ui.progressBar.stop();\n            this.busyDelay.cancel();\n            this.busyDelay = undefined;\n        }\n        if (this.buttonsUpdated) {\n            this.buttonsUpdated = false;\n            this.ui.leftActionBar.clear();\n            const leftButtons = this.buttons.filter(button => button === backButton);\n            this.ui.leftActionBar.push(leftButtons.map((button, index) => {\n                const action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath), true, async () => {\n                    this.onDidTriggerButtonEmitter.fire(button);\n                });\n                action.tooltip = button.tooltip || '';\n                return action;\n            }), { icon: true, label: false });\n            this.ui.rightActionBar.clear();\n            const rightButtons = this.buttons.filter(button => button !== backButton);\n            this.ui.rightActionBar.push(rightButtons.map((button, index) => {\n                const action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath), true, async () => {\n                    this.onDidTriggerButtonEmitter.fire(button);\n                });\n                action.tooltip = button.tooltip || '';\n                return action;\n            }), { icon: true, label: false });\n        }\n        if (this.togglesUpdated) {\n            this.togglesUpdated = false;\n            // HACK: Filter out toggles here that are not concrete Toggle objects. This is to workaround\n            // a layering issue as quick input's interface is in common but Toggle is in browser and\n            // it requires a HTMLElement on its interface\n            const concreteToggles = (_b = (_a = this.toggles) === null || _a === void 0 ? void 0 : _a.filter(opts => opts instanceof Toggle)) !== null && _b !== void 0 ? _b : [];\n            this.ui.inputBox.toggles = concreteToggles;\n        }\n        this.ui.ignoreFocusOut = this.ignoreFocusOut;\n        this.ui.setEnabled(this.enabled);\n        this.ui.setContextKey(this.contextKey);\n        const validationMessage = this.validationMessage || this.noValidationMessage;\n        if (this._lastValidationMessage !== validationMessage) {\n            this._lastValidationMessage = validationMessage;\n            dom.reset(this.ui.message);\n            renderQuickInputDescription(validationMessage, this.ui.message, {\n                callback: (content) => {\n                    this.ui.linkOpenerDelegate(content);\n                },\n                disposables: this.visibleDisposables,\n            });\n        }\n        if (this._lastSeverity !== this.severity) {\n            this._lastSeverity = this.severity;\n            this.showMessageDecoration(this.severity);\n        }\n    }\n    getTitle() {\n        if (this.title && this.step) {\n            return `${this.title} (${this.getSteps()})`;\n        }\n        if (this.title) {\n            return this.title;\n        }\n        if (this.step) {\n            return this.getSteps();\n        }\n        return '';\n    }\n    getDescription() {\n        return this.description || '';\n    }\n    getSteps() {\n        if (this.step && this.totalSteps) {\n            return localize('quickInput.steps', \"{0}/{1}\", this.step, this.totalSteps);\n        }\n        if (this.step) {\n            return String(this.step);\n        }\n        return '';\n    }\n    showMessageDecoration(severity) {\n        this.ui.inputBox.showDecoration(severity);\n        if (severity !== Severity.Ignore) {\n            const styles = this.ui.inputBox.stylesForType(severity);\n            this.ui.message.style.color = styles.foreground ? `${styles.foreground}` : '';\n            this.ui.message.style.backgroundColor = styles.background ? `${styles.background}` : '';\n            this.ui.message.style.border = styles.border ? `1px solid ${styles.border}` : '';\n            this.ui.message.style.marginBottom = '-2px';\n        }\n        else {\n            this.ui.message.style.color = '';\n            this.ui.message.style.backgroundColor = '';\n            this.ui.message.style.border = '';\n            this.ui.message.style.marginBottom = '';\n        }\n    }\n    dispose() {\n        this.hide();\n        this.onDisposeEmitter.fire();\n        super.dispose();\n    }\n}\nQuickInput.noPromptMessage = localize('inputModeEntry', \"Press 'Enter' to confirm your input or 'Escape' to cancel\");\nexport class QuickPick extends QuickInput {\n    constructor() {\n        super(...arguments);\n        this._value = '';\n        this.onDidChangeValueEmitter = this._register(new Emitter());\n        this.onWillAcceptEmitter = this._register(new Emitter());\n        this.onDidAcceptEmitter = this._register(new Emitter());\n        this.onDidCustomEmitter = this._register(new Emitter());\n        this._items = [];\n        this.itemsUpdated = false;\n        this._canSelectMany = false;\n        this._canAcceptInBackground = false;\n        this._matchOnDescription = false;\n        this._matchOnDetail = false;\n        this._matchOnLabel = true;\n        this._matchOnLabelMode = 'fuzzy';\n        this._sortByLabel = true;\n        this._autoFocusOnList = true;\n        this._keepScrollPosition = false;\n        this._itemActivation = ItemActivation.FIRST;\n        this._activeItems = [];\n        this.activeItemsUpdated = false;\n        this.activeItemsToConfirm = [];\n        this.onDidChangeActiveEmitter = this._register(new Emitter());\n        this._selectedItems = [];\n        this.selectedItemsUpdated = false;\n        this.selectedItemsToConfirm = [];\n        this.onDidChangeSelectionEmitter = this._register(new Emitter());\n        this.onDidTriggerItemButtonEmitter = this._register(new Emitter());\n        this.onDidTriggerSeparatorButtonEmitter = this._register(new Emitter());\n        this.valueSelectionUpdated = true;\n        this._ok = 'default';\n        this._customButton = false;\n        this.filterValue = (value) => value;\n        this.onDidChangeValue = this.onDidChangeValueEmitter.event;\n        this.onWillAccept = this.onWillAcceptEmitter.event;\n        this.onDidAccept = this.onDidAcceptEmitter.event;\n        this.onDidChangeActive = this.onDidChangeActiveEmitter.event;\n        this.onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n        this.onDidTriggerItemButton = this.onDidTriggerItemButtonEmitter.event;\n        this.onDidTriggerSeparatorButton = this.onDidTriggerSeparatorButtonEmitter.event;\n    }\n    get quickNavigate() {\n        return this._quickNavigate;\n    }\n    set quickNavigate(quickNavigate) {\n        this._quickNavigate = quickNavigate;\n        this.update();\n    }\n    get value() {\n        return this._value;\n    }\n    set value(value) {\n        this.doSetValue(value);\n    }\n    doSetValue(value, skipUpdate) {\n        if (this._value !== value) {\n            this._value = value;\n            if (!skipUpdate) {\n                this.update();\n            }\n            if (this.visible) {\n                const didFilter = this.ui.list.filter(this.filterValue(this._value));\n                if (didFilter) {\n                    this.trySelectFirst();\n                }\n            }\n            this.onDidChangeValueEmitter.fire(this._value);\n        }\n    }\n    set ariaLabel(ariaLabel) {\n        this._ariaLabel = ariaLabel;\n        this.update();\n    }\n    get ariaLabel() {\n        return this._ariaLabel;\n    }\n    get placeholder() {\n        return this._placeholder;\n    }\n    set placeholder(placeholder) {\n        this._placeholder = placeholder;\n        this.update();\n    }\n    get items() {\n        return this._items;\n    }\n    get scrollTop() {\n        return this.ui.list.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.ui.list.scrollTop = scrollTop;\n    }\n    set items(items) {\n        this._items = items;\n        this.itemsUpdated = true;\n        this.update();\n    }\n    get canSelectMany() {\n        return this._canSelectMany;\n    }\n    set canSelectMany(canSelectMany) {\n        this._canSelectMany = canSelectMany;\n        this.update();\n    }\n    get canAcceptInBackground() {\n        return this._canAcceptInBackground;\n    }\n    set canAcceptInBackground(canAcceptInBackground) {\n        this._canAcceptInBackground = canAcceptInBackground;\n    }\n    get matchOnDescription() {\n        return this._matchOnDescription;\n    }\n    set matchOnDescription(matchOnDescription) {\n        this._matchOnDescription = matchOnDescription;\n        this.update();\n    }\n    get matchOnDetail() {\n        return this._matchOnDetail;\n    }\n    set matchOnDetail(matchOnDetail) {\n        this._matchOnDetail = matchOnDetail;\n        this.update();\n    }\n    get matchOnLabel() {\n        return this._matchOnLabel;\n    }\n    set matchOnLabel(matchOnLabel) {\n        this._matchOnLabel = matchOnLabel;\n        this.update();\n    }\n    get matchOnLabelMode() {\n        return this._matchOnLabelMode;\n    }\n    set matchOnLabelMode(matchOnLabelMode) {\n        this._matchOnLabelMode = matchOnLabelMode;\n        this.update();\n    }\n    get sortByLabel() {\n        return this._sortByLabel;\n    }\n    set sortByLabel(sortByLabel) {\n        this._sortByLabel = sortByLabel;\n        this.update();\n    }\n    get autoFocusOnList() {\n        return this._autoFocusOnList;\n    }\n    set autoFocusOnList(autoFocusOnList) {\n        this._autoFocusOnList = autoFocusOnList;\n        this.update();\n    }\n    get keepScrollPosition() {\n        return this._keepScrollPosition;\n    }\n    set keepScrollPosition(keepScrollPosition) {\n        this._keepScrollPosition = keepScrollPosition;\n    }\n    get itemActivation() {\n        return this._itemActivation;\n    }\n    set itemActivation(itemActivation) {\n        this._itemActivation = itemActivation;\n    }\n    get activeItems() {\n        return this._activeItems;\n    }\n    set activeItems(activeItems) {\n        this._activeItems = activeItems;\n        this.activeItemsUpdated = true;\n        this.update();\n    }\n    get selectedItems() {\n        return this._selectedItems;\n    }\n    set selectedItems(selectedItems) {\n        this._selectedItems = selectedItems;\n        this.selectedItemsUpdated = true;\n        this.update();\n    }\n    get keyMods() {\n        if (this._quickNavigate) {\n            // Disable keyMods when quick navigate is enabled\n            // because in this model the interaction is purely\n            // keyboard driven and Ctrl/Alt are typically\n            // pressed and hold during this interaction.\n            return NO_KEY_MODS;\n        }\n        return this.ui.keyMods;\n    }\n    set valueSelection(valueSelection) {\n        this._valueSelection = valueSelection;\n        this.valueSelectionUpdated = true;\n        this.update();\n    }\n    get customButton() {\n        return this._customButton;\n    }\n    set customButton(showCustomButton) {\n        this._customButton = showCustomButton;\n        this.update();\n    }\n    get customLabel() {\n        return this._customButtonLabel;\n    }\n    set customLabel(label) {\n        this._customButtonLabel = label;\n        this.update();\n    }\n    get customHover() {\n        return this._customButtonHover;\n    }\n    set customHover(hover) {\n        this._customButtonHover = hover;\n        this.update();\n    }\n    get ok() {\n        return this._ok;\n    }\n    set ok(showOkButton) {\n        this._ok = showOkButton;\n        this.update();\n    }\n    get hideInput() {\n        return !!this._hideInput;\n    }\n    set hideInput(hideInput) {\n        this._hideInput = hideInput;\n        this.update();\n    }\n    trySelectFirst() {\n        if (this.autoFocusOnList) {\n            if (!this.canSelectMany) {\n                this.ui.list.focus(QuickInputListFocus.First);\n            }\n        }\n    }\n    show() {\n        if (!this.visible) {\n            this.visibleDisposables.add(this.ui.inputBox.onDidChange(value => {\n                this.doSetValue(value, true /* skip update since this originates from the UI */);\n            }));\n            this.visibleDisposables.add(this.ui.inputBox.onMouseDown(event => {\n                if (!this.autoFocusOnList) {\n                    this.ui.list.clearFocus();\n                }\n            }));\n            this.visibleDisposables.add((this._hideInput ? this.ui.list : this.ui.inputBox).onKeyDown((event) => {\n                switch (event.keyCode) {\n                    case 18 /* KeyCode.DownArrow */:\n                        this.ui.list.focus(QuickInputListFocus.Next);\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 16 /* KeyCode.UpArrow */:\n                        if (this.ui.list.getFocusedElements().length) {\n                            this.ui.list.focus(QuickInputListFocus.Previous);\n                        }\n                        else {\n                            this.ui.list.focus(QuickInputListFocus.Last);\n                        }\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 12 /* KeyCode.PageDown */:\n                        this.ui.list.focus(QuickInputListFocus.NextPage);\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 11 /* KeyCode.PageUp */:\n                        this.ui.list.focus(QuickInputListFocus.PreviousPage);\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 17 /* KeyCode.RightArrow */:\n                        if (!this._canAcceptInBackground) {\n                            return; // needs to be enabled\n                        }\n                        if (!this.ui.inputBox.isSelectionAtEnd()) {\n                            return; // ensure input box selection at end\n                        }\n                        if (this.activeItems[0]) {\n                            this._selectedItems = [this.activeItems[0]];\n                            this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                            this.handleAccept(true);\n                        }\n                        break;\n                    case 14 /* KeyCode.Home */:\n                        if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\n                            this.ui.list.focus(QuickInputListFocus.First);\n                            dom.EventHelper.stop(event, true);\n                        }\n                        break;\n                    case 13 /* KeyCode.End */:\n                        if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\n                            this.ui.list.focus(QuickInputListFocus.Last);\n                            dom.EventHelper.stop(event, true);\n                        }\n                        break;\n                }\n            }));\n            this.visibleDisposables.add(this.ui.onDidAccept(() => {\n                if (this.canSelectMany) {\n                    // if there are no checked elements, it means that an onDidChangeSelection never fired to overwrite\n                    // `_selectedItems`. In that case, we should emit one with an empty array to ensure that\n                    // `.selectedItems` is up to date.\n                    if (!this.ui.list.getCheckedElements().length) {\n                        this._selectedItems = [];\n                        this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                    }\n                }\n                else if (this.activeItems[0]) {\n                    // For single-select, we set `selectedItems` to the item that was accepted.\n                    this._selectedItems = [this.activeItems[0]];\n                    this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                }\n                this.handleAccept(false);\n            }));\n            this.visibleDisposables.add(this.ui.onDidCustom(() => {\n                this.onDidCustomEmitter.fire();\n            }));\n            this.visibleDisposables.add(this.ui.list.onDidChangeFocus(focusedItems => {\n                if (this.activeItemsUpdated) {\n                    return; // Expect another event.\n                }\n                if (this.activeItemsToConfirm !== this._activeItems && equals(focusedItems, this._activeItems, (a, b) => a === b)) {\n                    return;\n                }\n                this._activeItems = focusedItems;\n                this.onDidChangeActiveEmitter.fire(focusedItems);\n            }));\n            this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({ items: selectedItems, event }) => {\n                if (this.canSelectMany) {\n                    if (selectedItems.length) {\n                        this.ui.list.setSelectedElements([]);\n                    }\n                    return;\n                }\n                if (this.selectedItemsToConfirm !== this._selectedItems && equals(selectedItems, this._selectedItems, (a, b) => a === b)) {\n                    return;\n                }\n                this._selectedItems = selectedItems;\n                this.onDidChangeSelectionEmitter.fire(selectedItems);\n                if (selectedItems.length) {\n                    this.handleAccept(dom.isMouseEvent(event) && event.button === 1 /* mouse middle click */);\n                }\n            }));\n            this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(checkedItems => {\n                if (!this.canSelectMany) {\n                    return;\n                }\n                if (this.selectedItemsToConfirm !== this._selectedItems && equals(checkedItems, this._selectedItems, (a, b) => a === b)) {\n                    return;\n                }\n                this._selectedItems = checkedItems;\n                this.onDidChangeSelectionEmitter.fire(checkedItems);\n            }));\n            this.visibleDisposables.add(this.ui.list.onButtonTriggered(event => this.onDidTriggerItemButtonEmitter.fire(event)));\n            this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(event => this.onDidTriggerSeparatorButtonEmitter.fire(event)));\n            this.visibleDisposables.add(this.registerQuickNavigation());\n            this.valueSelectionUpdated = true;\n        }\n        super.show(); // TODO: Why have show() bubble up while update() trickles down?\n    }\n    handleAccept(inBackground) {\n        // Figure out veto via `onWillAccept` event\n        let veto = false;\n        this.onWillAcceptEmitter.fire({ veto: () => veto = true });\n        // Continue with `onDidAccept` if no veto\n        if (!veto) {\n            this.onDidAcceptEmitter.fire({ inBackground });\n        }\n    }\n    registerQuickNavigation() {\n        return dom.addDisposableListener(this.ui.container, dom.EventType.KEY_UP, e => {\n            if (this.canSelectMany || !this._quickNavigate) {\n                return;\n            }\n            const keyboardEvent = new StandardKeyboardEvent(e);\n            const keyCode = keyboardEvent.keyCode;\n            // Select element when keys are pressed that signal it\n            const quickNavKeys = this._quickNavigate.keybindings;\n            const wasTriggerKeyPressed = quickNavKeys.some(k => {\n                const chords = k.getChords();\n                if (chords.length > 1) {\n                    return false;\n                }\n                if (chords[0].shiftKey && keyCode === 4 /* KeyCode.Shift */) {\n                    if (keyboardEvent.ctrlKey || keyboardEvent.altKey || keyboardEvent.metaKey) {\n                        return false; // this is an optimistic check for the shift key being used to navigate back in quick input\n                    }\n                    return true;\n                }\n                if (chords[0].altKey && keyCode === 6 /* KeyCode.Alt */) {\n                    return true;\n                }\n                if (chords[0].ctrlKey && keyCode === 5 /* KeyCode.Ctrl */) {\n                    return true;\n                }\n                if (chords[0].metaKey && keyCode === 57 /* KeyCode.Meta */) {\n                    return true;\n                }\n                return false;\n            });\n            if (wasTriggerKeyPressed) {\n                if (this.activeItems[0]) {\n                    this._selectedItems = [this.activeItems[0]];\n                    this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                    this.handleAccept(false);\n                }\n                // Unset quick navigate after press. It is only valid once\n                // and should not result in any behaviour change afterwards\n                // if the picker remains open because there was no active item\n                this._quickNavigate = undefined;\n            }\n        });\n    }\n    update() {\n        if (!this.visible) {\n            return;\n        }\n        // store the scrollTop before it is reset\n        const scrollTopBefore = this.keepScrollPosition ? this.scrollTop : 0;\n        const hasDescription = !!this.description;\n        const visibilities = {\n            title: !!this.title || !!this.step || !!this.buttons.length,\n            description: hasDescription,\n            checkAll: this.canSelectMany && !this._hideCheckAll,\n            checkBox: this.canSelectMany,\n            inputBox: !this._hideInput,\n            progressBar: !this._hideInput || hasDescription,\n            visibleCount: true,\n            count: this.canSelectMany && !this._hideCountBadge,\n            ok: this.ok === 'default' ? this.canSelectMany : this.ok,\n            list: true,\n            message: !!this.validationMessage,\n            customButton: this.customButton\n        };\n        this.ui.setVisibilities(visibilities);\n        super.update();\n        if (this.ui.inputBox.value !== this.value) {\n            this.ui.inputBox.value = this.value;\n        }\n        if (this.valueSelectionUpdated) {\n            this.valueSelectionUpdated = false;\n            this.ui.inputBox.select(this._valueSelection && { start: this._valueSelection[0], end: this._valueSelection[1] });\n        }\n        if (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\n            this.ui.inputBox.placeholder = (this.placeholder || '');\n        }\n        let ariaLabel = this.ariaLabel;\n        // Only set aria label to the input box placeholder if we actually have an input box.\n        if (!ariaLabel && visibilities.inputBox) {\n            ariaLabel = this.placeholder || QuickPick.DEFAULT_ARIA_LABEL;\n            // If we have a title, include it in the aria label.\n            if (this.title) {\n                ariaLabel += ` - ${this.title}`;\n            }\n        }\n        if (this.ui.list.ariaLabel !== ariaLabel) {\n            this.ui.list.ariaLabel = ariaLabel !== null && ariaLabel !== void 0 ? ariaLabel : null;\n        }\n        this.ui.list.matchOnDescription = this.matchOnDescription;\n        this.ui.list.matchOnDetail = this.matchOnDetail;\n        this.ui.list.matchOnLabel = this.matchOnLabel;\n        this.ui.list.matchOnLabelMode = this.matchOnLabelMode;\n        this.ui.list.sortByLabel = this.sortByLabel;\n        if (this.itemsUpdated) {\n            this.itemsUpdated = false;\n            this.ui.list.setElements(this.items);\n            this.ui.list.filter(this.filterValue(this.ui.inputBox.value));\n            this.ui.checkAll.checked = this.ui.list.getAllVisibleChecked();\n            this.ui.visibleCount.setCount(this.ui.list.getVisibleCount());\n            this.ui.count.setCount(this.ui.list.getCheckedCount());\n            switch (this._itemActivation) {\n                case ItemActivation.NONE:\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n                    break;\n                case ItemActivation.SECOND:\n                    this.ui.list.focus(QuickInputListFocus.Second);\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n                    break;\n                case ItemActivation.LAST:\n                    this.ui.list.focus(QuickInputListFocus.Last);\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n                    break;\n                default:\n                    this.trySelectFirst();\n                    break;\n            }\n        }\n        if (this.ui.container.classList.contains('show-checkboxes') !== !!this.canSelectMany) {\n            if (this.canSelectMany) {\n                this.ui.list.clearFocus();\n            }\n            else {\n                this.trySelectFirst();\n            }\n        }\n        if (this.activeItemsUpdated) {\n            this.activeItemsUpdated = false;\n            this.activeItemsToConfirm = this._activeItems;\n            this.ui.list.setFocusedElements(this.activeItems);\n            if (this.activeItemsToConfirm === this._activeItems) {\n                this.activeItemsToConfirm = null;\n            }\n        }\n        if (this.selectedItemsUpdated) {\n            this.selectedItemsUpdated = false;\n            this.selectedItemsToConfirm = this._selectedItems;\n            if (this.canSelectMany) {\n                this.ui.list.setCheckedElements(this.selectedItems);\n            }\n            else {\n                this.ui.list.setSelectedElements(this.selectedItems);\n            }\n            if (this.selectedItemsToConfirm === this._selectedItems) {\n                this.selectedItemsToConfirm = null;\n            }\n        }\n        this.ui.customButton.label = this.customLabel || '';\n        this.ui.customButton.element.title = this.customHover || '';\n        if (!visibilities.inputBox) {\n            // we need to move focus into the tree to detect keybindings\n            // properly when the input box is not visible (quick nav)\n            this.ui.list.domFocus();\n            // Focus the first element in the list if multiselect is enabled\n            if (this.canSelectMany) {\n                this.ui.list.focus(QuickInputListFocus.First);\n            }\n        }\n        // Set the scroll position to what it was before updating the items\n        if (this.keepScrollPosition) {\n            this.scrollTop = scrollTopBefore;\n        }\n    }\n}\nQuickPick.DEFAULT_ARIA_LABEL = localize('quickInputBox.ariaLabel', \"Type to narrow down results.\");\nexport class InputBox extends QuickInput {\n    constructor() {\n        super(...arguments);\n        this._value = '';\n        this.valueSelectionUpdated = true;\n        this._password = false;\n        this.onDidValueChangeEmitter = this._register(new Emitter());\n        this.onDidAcceptEmitter = this._register(new Emitter());\n        this.onDidChangeValue = this.onDidValueChangeEmitter.event;\n        this.onDidAccept = this.onDidAcceptEmitter.event;\n    }\n    get value() {\n        return this._value;\n    }\n    set value(value) {\n        this._value = value || '';\n        this.update();\n    }\n    get placeholder() {\n        return this._placeholder;\n    }\n    set placeholder(placeholder) {\n        this._placeholder = placeholder;\n        this.update();\n    }\n    get password() {\n        return this._password;\n    }\n    set password(password) {\n        this._password = password;\n        this.update();\n    }\n    show() {\n        if (!this.visible) {\n            this.visibleDisposables.add(this.ui.inputBox.onDidChange(value => {\n                if (value === this.value) {\n                    return;\n                }\n                this._value = value;\n                this.onDidValueChangeEmitter.fire(value);\n            }));\n            this.visibleDisposables.add(this.ui.onDidAccept(() => this.onDidAcceptEmitter.fire()));\n            this.valueSelectionUpdated = true;\n        }\n        super.show();\n    }\n    update() {\n        if (!this.visible) {\n            return;\n        }\n        this.ui.container.classList.remove('hidden-input');\n        const visibilities = {\n            title: !!this.title || !!this.step || !!this.buttons.length,\n            description: !!this.description || !!this.step,\n            inputBox: true,\n            message: true,\n            progressBar: true\n        };\n        this.ui.setVisibilities(visibilities);\n        super.update();\n        if (this.ui.inputBox.value !== this.value) {\n            this.ui.inputBox.value = this.value;\n        }\n        if (this.valueSelectionUpdated) {\n            this.valueSelectionUpdated = false;\n            this.ui.inputBox.select(this._valueSelection && { start: this._valueSelection[0], end: this._valueSelection[1] });\n        }\n        if (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\n            this.ui.inputBox.placeholder = (this.placeholder || '');\n        }\n        if (this.ui.inputBox.password !== this.password) {\n            this.ui.inputBox.password = this.password;\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { Button } from '../../../base/browser/ui/button/button.js';\nimport { CountBadge } from '../../../base/browser/ui/countBadge/countBadge.js';\nimport { ProgressBar } from '../../../base/browser/ui/progressbar/progressbar.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\nimport Severity from '../../../base/common/severity.js';\nimport { localize } from '../../../nls.js';\nimport { QuickInputHideReason } from '../common/quickInput.js';\nimport { QuickInputBox } from './quickInputBox.js';\nimport { QuickInputList } from './quickInputList.js';\nimport { QuickPick, backButton, InputBox } from './quickInput.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nconst $ = dom.$;\nexport class QuickInputController extends Disposable {\n    constructor(options, themeService, layoutService) {\n        super();\n        this.options = options;\n        this.themeService = themeService;\n        this.layoutService = layoutService;\n        this.enabled = true;\n        this.onDidAcceptEmitter = this._register(new Emitter());\n        this.onDidCustomEmitter = this._register(new Emitter());\n        this.onDidTriggerButtonEmitter = this._register(new Emitter());\n        this.keyMods = { ctrlCmd: false, alt: false };\n        this.controller = null;\n        this.onShowEmitter = this._register(new Emitter());\n        this.onShow = this.onShowEmitter.event;\n        this.onHideEmitter = this._register(new Emitter());\n        this.onHide = this.onHideEmitter.event;\n        this.idPrefix = options.idPrefix;\n        this.parentElement = options.container;\n        this.styles = options.styles;\n        this._register(Event.runAndSubscribe(dom.onDidRegisterWindow, ({ window, disposables }) => this.registerKeyModsListeners(window, disposables), { window: mainWindow, disposables: this._store }));\n        this._register(dom.onWillUnregisterWindow(window => {\n            if (this.ui && dom.getWindow(this.ui.container) === window) {\n                // The window this quick input is contained in is about to\n                // close, so we have to make sure to reparent it back to an\n                // existing parent to not loose functionality.\n                // (https://github.com/microsoft/vscode/issues/195870)\n                this.reparentUI(this.layoutService.mainContainer);\n            }\n        }));\n    }\n    registerKeyModsListeners(window, disposables) {\n        const listener = (e) => {\n            this.keyMods.ctrlCmd = e.ctrlKey || e.metaKey;\n            this.keyMods.alt = e.altKey;\n        };\n        for (const event of [dom.EventType.KEY_DOWN, dom.EventType.KEY_UP, dom.EventType.MOUSE_DOWN]) {\n            disposables.add(dom.addDisposableListener(window, event, listener, true));\n        }\n    }\n    getUI(showInActiveContainer) {\n        if (this.ui) {\n            // In order to support aux windows, re-parent the controller\n            // if the original event is from a different document\n            if (showInActiveContainer) {\n                if (this.parentElement.ownerDocument !== this.layoutService.activeContainer.ownerDocument) {\n                    this.reparentUI(this.layoutService.activeContainer);\n                }\n            }\n            return this.ui;\n        }\n        const container = dom.append(this.parentElement, $('.quick-input-widget.show-file-icons'));\n        container.tabIndex = -1;\n        container.style.display = 'none';\n        const styleSheet = dom.createStyleSheet(container);\n        const titleBar = dom.append(container, $('.quick-input-titlebar'));\n        const actionBarOption = this.options.hoverDelegate ? { hoverDelegate: this.options.hoverDelegate } : undefined;\n        const leftActionBar = this._register(new ActionBar(titleBar, actionBarOption));\n        leftActionBar.domNode.classList.add('quick-input-left-action-bar');\n        const title = dom.append(titleBar, $('.quick-input-title'));\n        const rightActionBar = this._register(new ActionBar(titleBar, actionBarOption));\n        rightActionBar.domNode.classList.add('quick-input-right-action-bar');\n        const headerContainer = dom.append(container, $('.quick-input-header'));\n        const checkAll = dom.append(headerContainer, $('input.quick-input-check-all'));\n        checkAll.type = 'checkbox';\n        checkAll.setAttribute('aria-label', localize('quickInput.checkAll', \"Toggle all checkboxes\"));\n        this._register(dom.addStandardDisposableListener(checkAll, dom.EventType.CHANGE, e => {\n            const checked = checkAll.checked;\n            list.setAllVisibleChecked(checked);\n        }));\n        this._register(dom.addDisposableListener(checkAll, dom.EventType.CLICK, e => {\n            if (e.x || e.y) { // Avoid 'click' triggered by 'space'...\n                inputBox.setFocus();\n            }\n        }));\n        const description2 = dom.append(headerContainer, $('.quick-input-description'));\n        const inputContainer = dom.append(headerContainer, $('.quick-input-and-message'));\n        const filterContainer = dom.append(inputContainer, $('.quick-input-filter'));\n        const inputBox = this._register(new QuickInputBox(filterContainer, this.styles.inputBox, this.styles.toggle));\n        inputBox.setAttribute('aria-describedby', `${this.idPrefix}message`);\n        const visibleCountContainer = dom.append(filterContainer, $('.quick-input-visible-count'));\n        visibleCountContainer.setAttribute('aria-live', 'polite');\n        visibleCountContainer.setAttribute('aria-atomic', 'true');\n        const visibleCount = new CountBadge(visibleCountContainer, { countFormat: localize({ key: 'quickInput.visibleCount', comment: ['This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers.'] }, \"{0} Results\") }, this.styles.countBadge);\n        const countContainer = dom.append(filterContainer, $('.quick-input-count'));\n        countContainer.setAttribute('aria-live', 'polite');\n        const count = new CountBadge(countContainer, { countFormat: localize({ key: 'quickInput.countSelected', comment: ['This tells the user how many items are selected in a list of items to select from. The items can be anything.'] }, \"{0} Selected\") }, this.styles.countBadge);\n        const okContainer = dom.append(headerContainer, $('.quick-input-action'));\n        const ok = this._register(new Button(okContainer, this.styles.button));\n        ok.label = localize('ok', \"OK\");\n        this._register(ok.onDidClick(e => {\n            this.onDidAcceptEmitter.fire();\n        }));\n        const customButtonContainer = dom.append(headerContainer, $('.quick-input-action'));\n        const customButton = this._register(new Button(customButtonContainer, this.styles.button));\n        customButton.label = localize('custom', \"Custom\");\n        this._register(customButton.onDidClick(e => {\n            this.onDidCustomEmitter.fire();\n        }));\n        const message = dom.append(inputContainer, $(`#${this.idPrefix}message.quick-input-message`));\n        const progressBar = this._register(new ProgressBar(container, this.styles.progressBar));\n        progressBar.getContainer().classList.add('quick-input-progress');\n        const widget = dom.append(container, $('.quick-input-html-widget'));\n        widget.tabIndex = -1;\n        const description1 = dom.append(container, $('.quick-input-description'));\n        const listId = this.idPrefix + 'list';\n        const list = this._register(new QuickInputList(container, listId, this.options, this.themeService));\n        inputBox.setAttribute('aria-controls', listId);\n        this._register(list.onDidChangeFocus(() => {\n            var _a;\n            inputBox.setAttribute('aria-activedescendant', (_a = list.getActiveDescendant()) !== null && _a !== void 0 ? _a : '');\n        }));\n        this._register(list.onChangedAllVisibleChecked(checked => {\n            checkAll.checked = checked;\n        }));\n        this._register(list.onChangedVisibleCount(c => {\n            visibleCount.setCount(c);\n        }));\n        this._register(list.onChangedCheckedCount(c => {\n            count.setCount(c);\n        }));\n        this._register(list.onLeave(() => {\n            // Defer to avoid the input field reacting to the triggering key.\n            setTimeout(() => {\n                inputBox.setFocus();\n                if (this.controller instanceof QuickPick && this.controller.canSelectMany) {\n                    list.clearFocus();\n                }\n            }, 0);\n        }));\n        const focusTracker = dom.trackFocus(container);\n        this._register(focusTracker);\n        this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, e => {\n            // Ignore focus events within container\n            if (dom.isAncestor(e.relatedTarget, container)) {\n                return;\n            }\n            this.previousFocusElement = e.relatedTarget instanceof HTMLElement ? e.relatedTarget : undefined;\n        }, true));\n        this._register(focusTracker.onDidBlur(() => {\n            if (!this.getUI().ignoreFocusOut && !this.options.ignoreFocusOut()) {\n                this.hide(QuickInputHideReason.Blur);\n            }\n            this.previousFocusElement = undefined;\n        }));\n        this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, (e) => {\n            inputBox.setFocus();\n        }));\n        // TODO: Turn into commands instead of handling KEY_DOWN\n        this._register(dom.addStandardDisposableListener(container, dom.EventType.KEY_DOWN, (event) => {\n            if (dom.isAncestor(event.target, widget)) {\n                return; // Ignore event if target is inside widget to allow the widget to handle the event.\n            }\n            switch (event.keyCode) {\n                case 3 /* KeyCode.Enter */:\n                    dom.EventHelper.stop(event, true);\n                    if (this.enabled) {\n                        this.onDidAcceptEmitter.fire();\n                    }\n                    break;\n                case 9 /* KeyCode.Escape */:\n                    dom.EventHelper.stop(event, true);\n                    this.hide(QuickInputHideReason.Gesture);\n                    break;\n                case 2 /* KeyCode.Tab */:\n                    if (!event.altKey && !event.ctrlKey && !event.metaKey) {\n                        // detect only visible actions\n                        const selectors = [\n                            '.quick-input-list .monaco-action-bar .always-visible',\n                            '.quick-input-list-entry:hover .monaco-action-bar',\n                            '.monaco-list-row.focused .monaco-action-bar'\n                        ];\n                        if (container.classList.contains('show-checkboxes')) {\n                            selectors.push('input');\n                        }\n                        else {\n                            selectors.push('input[type=text]');\n                        }\n                        if (this.getUI().list.isDisplayed()) {\n                            selectors.push('.monaco-list');\n                        }\n                        // focus links if there are any\n                        if (this.getUI().message) {\n                            selectors.push('.quick-input-message a');\n                        }\n                        if (this.getUI().widget) {\n                            if (dom.isAncestor(event.target, this.getUI().widget)) {\n                                // let the widget control tab\n                                break;\n                            }\n                            selectors.push('.quick-input-html-widget');\n                        }\n                        const stops = container.querySelectorAll(selectors.join(', '));\n                        if (event.shiftKey && event.target === stops[0]) {\n                            // Clear the focus from the list in order to allow\n                            // screen readers to read operations in the input box.\n                            dom.EventHelper.stop(event, true);\n                            list.clearFocus();\n                        }\n                        else if (!event.shiftKey && dom.isAncestor(event.target, stops[stops.length - 1])) {\n                            dom.EventHelper.stop(event, true);\n                            stops[0].focus();\n                        }\n                    }\n                    break;\n                case 10 /* KeyCode.Space */:\n                    if (event.ctrlKey) {\n                        dom.EventHelper.stop(event, true);\n                        this.getUI().list.toggleHover();\n                    }\n                    break;\n            }\n        }));\n        this.ui = {\n            container,\n            styleSheet,\n            leftActionBar,\n            titleBar,\n            title,\n            description1,\n            description2,\n            widget,\n            rightActionBar,\n            checkAll,\n            inputContainer,\n            filterContainer,\n            inputBox,\n            visibleCountContainer,\n            visibleCount,\n            countContainer,\n            count,\n            okContainer,\n            ok,\n            message,\n            customButtonContainer,\n            customButton,\n            list,\n            progressBar,\n            onDidAccept: this.onDidAcceptEmitter.event,\n            onDidCustom: this.onDidCustomEmitter.event,\n            onDidTriggerButton: this.onDidTriggerButtonEmitter.event,\n            ignoreFocusOut: false,\n            keyMods: this.keyMods,\n            show: controller => this.show(controller),\n            hide: () => this.hide(),\n            setVisibilities: visibilities => this.setVisibilities(visibilities),\n            setEnabled: enabled => this.setEnabled(enabled),\n            setContextKey: contextKey => this.options.setContextKey(contextKey),\n            linkOpenerDelegate: content => this.options.linkOpenerDelegate(content)\n        };\n        this.updateStyles();\n        return this.ui;\n    }\n    reparentUI(container) {\n        if (this.ui) {\n            this.parentElement = container;\n            dom.append(this.parentElement, this.ui.container);\n        }\n    }\n    pick(picks, options = {}, token = CancellationToken.None) {\n        return new Promise((doResolve, reject) => {\n            let resolve = (result) => {\n                var _a;\n                resolve = doResolve;\n                (_a = options.onKeyMods) === null || _a === void 0 ? void 0 : _a.call(options, input.keyMods);\n                doResolve(result);\n            };\n            if (token.isCancellationRequested) {\n                resolve(undefined);\n                return;\n            }\n            const input = this.createQuickPick();\n            let activeItem;\n            const disposables = [\n                input,\n                input.onDidAccept(() => {\n                    if (input.canSelectMany) {\n                        resolve(input.selectedItems.slice());\n                        input.hide();\n                    }\n                    else {\n                        const result = input.activeItems[0];\n                        if (result) {\n                            resolve(result);\n                            input.hide();\n                        }\n                    }\n                }),\n                input.onDidChangeActive(items => {\n                    const focused = items[0];\n                    if (focused && options.onDidFocus) {\n                        options.onDidFocus(focused);\n                    }\n                }),\n                input.onDidChangeSelection(items => {\n                    if (!input.canSelectMany) {\n                        const result = items[0];\n                        if (result) {\n                            resolve(result);\n                            input.hide();\n                        }\n                    }\n                }),\n                input.onDidTriggerItemButton(event => options.onDidTriggerItemButton && options.onDidTriggerItemButton({\n                    ...event,\n                    removeItem: () => {\n                        const index = input.items.indexOf(event.item);\n                        if (index !== -1) {\n                            const items = input.items.slice();\n                            const removed = items.splice(index, 1);\n                            const activeItems = input.activeItems.filter(activeItem => activeItem !== removed[0]);\n                            const keepScrollPositionBefore = input.keepScrollPosition;\n                            input.keepScrollPosition = true;\n                            input.items = items;\n                            if (activeItems) {\n                                input.activeItems = activeItems;\n                            }\n                            input.keepScrollPosition = keepScrollPositionBefore;\n                        }\n                    }\n                })),\n                input.onDidTriggerSeparatorButton(event => { var _a; return (_a = options.onDidTriggerSeparatorButton) === null || _a === void 0 ? void 0 : _a.call(options, event); }),\n                input.onDidChangeValue(value => {\n                    if (activeItem && !value && (input.activeItems.length !== 1 || input.activeItems[0] !== activeItem)) {\n                        input.activeItems = [activeItem];\n                    }\n                }),\n                token.onCancellationRequested(() => {\n                    input.hide();\n                }),\n                input.onDidHide(() => {\n                    dispose(disposables);\n                    resolve(undefined);\n                }),\n            ];\n            input.title = options.title;\n            input.canSelectMany = !!options.canPickMany;\n            input.placeholder = options.placeHolder;\n            input.ignoreFocusOut = !!options.ignoreFocusLost;\n            input.matchOnDescription = !!options.matchOnDescription;\n            input.matchOnDetail = !!options.matchOnDetail;\n            input.matchOnLabel = (options.matchOnLabel === undefined) || options.matchOnLabel; // default to true\n            input.autoFocusOnList = (options.autoFocusOnList === undefined) || options.autoFocusOnList; // default to true\n            input.quickNavigate = options.quickNavigate;\n            input.hideInput = !!options.hideInput;\n            input.contextKey = options.contextKey;\n            input.busy = true;\n            Promise.all([picks, options.activeItem])\n                .then(([items, _activeItem]) => {\n                activeItem = _activeItem;\n                input.busy = false;\n                input.items = items;\n                if (input.canSelectMany) {\n                    input.selectedItems = items.filter(item => item.type !== 'separator' && item.picked);\n                }\n                if (activeItem) {\n                    input.activeItems = [activeItem];\n                }\n            });\n            input.show();\n            Promise.resolve(picks).then(undefined, err => {\n                reject(err);\n                input.hide();\n            });\n        });\n    }\n    createQuickPick() {\n        const ui = this.getUI(true);\n        return new QuickPick(ui);\n    }\n    createInputBox() {\n        const ui = this.getUI(true);\n        return new InputBox(ui);\n    }\n    show(controller) {\n        const ui = this.getUI(true);\n        this.onShowEmitter.fire();\n        const oldController = this.controller;\n        this.controller = controller;\n        oldController === null || oldController === void 0 ? void 0 : oldController.didHide();\n        this.setEnabled(true);\n        ui.leftActionBar.clear();\n        ui.title.textContent = '';\n        ui.description1.textContent = '';\n        ui.description2.textContent = '';\n        dom.reset(ui.widget);\n        ui.rightActionBar.clear();\n        ui.checkAll.checked = false;\n        // ui.inputBox.value = ''; Avoid triggering an event.\n        ui.inputBox.placeholder = '';\n        ui.inputBox.password = false;\n        ui.inputBox.showDecoration(Severity.Ignore);\n        ui.visibleCount.setCount(0);\n        ui.count.setCount(0);\n        dom.reset(ui.message);\n        ui.progressBar.stop();\n        ui.list.setElements([]);\n        ui.list.matchOnDescription = false;\n        ui.list.matchOnDetail = false;\n        ui.list.matchOnLabel = true;\n        ui.list.sortByLabel = true;\n        ui.ignoreFocusOut = false;\n        ui.inputBox.toggles = undefined;\n        const backKeybindingLabel = this.options.backKeybindingLabel();\n        backButton.tooltip = backKeybindingLabel ? localize('quickInput.backWithKeybinding', \"Back ({0})\", backKeybindingLabel) : localize('quickInput.back', \"Back\");\n        ui.container.style.display = '';\n        this.updateLayout();\n        ui.inputBox.setFocus();\n    }\n    isVisible() {\n        return !!this.ui && this.ui.container.style.display !== 'none';\n    }\n    setVisibilities(visibilities) {\n        const ui = this.getUI();\n        ui.title.style.display = visibilities.title ? '' : 'none';\n        ui.description1.style.display = visibilities.description && (visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\n        ui.description2.style.display = visibilities.description && !(visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\n        ui.checkAll.style.display = visibilities.checkAll ? '' : 'none';\n        ui.inputContainer.style.display = visibilities.inputBox ? '' : 'none';\n        ui.filterContainer.style.display = visibilities.inputBox ? '' : 'none';\n        ui.visibleCountContainer.style.display = visibilities.visibleCount ? '' : 'none';\n        ui.countContainer.style.display = visibilities.count ? '' : 'none';\n        ui.okContainer.style.display = visibilities.ok ? '' : 'none';\n        ui.customButtonContainer.style.display = visibilities.customButton ? '' : 'none';\n        ui.message.style.display = visibilities.message ? '' : 'none';\n        ui.progressBar.getContainer().style.display = visibilities.progressBar ? '' : 'none';\n        ui.list.display(!!visibilities.list);\n        ui.container.classList.toggle('show-checkboxes', !!visibilities.checkBox);\n        ui.container.classList.toggle('hidden-input', !visibilities.inputBox && !visibilities.description);\n        this.updateLayout(); // TODO\n    }\n    setEnabled(enabled) {\n        if (enabled !== this.enabled) {\n            this.enabled = enabled;\n            for (const item of this.getUI().leftActionBar.viewItems) {\n                item.action.enabled = enabled;\n            }\n            for (const item of this.getUI().rightActionBar.viewItems) {\n                item.action.enabled = enabled;\n            }\n            this.getUI().checkAll.disabled = !enabled;\n            this.getUI().inputBox.enabled = enabled;\n            this.getUI().ok.enabled = enabled;\n            this.getUI().list.enabled = enabled;\n        }\n    }\n    hide(reason) {\n        var _a, _b;\n        const controller = this.controller;\n        if (!controller) {\n            return;\n        }\n        const container = (_a = this.ui) === null || _a === void 0 ? void 0 : _a.container;\n        const focusChanged = container && !dom.isAncestorOfActiveElement(container);\n        this.controller = null;\n        this.onHideEmitter.fire();\n        if (container) {\n            container.style.display = 'none';\n        }\n        if (!focusChanged) {\n            let currentElement = this.previousFocusElement;\n            while (currentElement && !currentElement.offsetParent) {\n                currentElement = (_b = currentElement.parentElement) !== null && _b !== void 0 ? _b : undefined;\n            }\n            if (currentElement === null || currentElement === void 0 ? void 0 : currentElement.offsetParent) {\n                currentElement.focus();\n                this.previousFocusElement = undefined;\n            }\n            else {\n                this.options.returnFocus();\n            }\n        }\n        controller.didHide(reason);\n    }\n    layout(dimension, titleBarOffset) {\n        this.dimension = dimension;\n        this.titleBarOffset = titleBarOffset;\n        this.updateLayout();\n    }\n    updateLayout() {\n        if (this.ui && this.isVisible()) {\n            this.ui.container.style.top = `${this.titleBarOffset}px`;\n            const style = this.ui.container.style;\n            const width = Math.min(this.dimension.width * 0.62 /* golden cut */, QuickInputController.MAX_WIDTH);\n            style.width = width + 'px';\n            style.marginLeft = '-' + (width / 2) + 'px';\n            this.ui.inputBox.layout();\n            this.ui.list.layout(this.dimension && this.dimension.height * 0.4);\n        }\n    }\n    applyStyles(styles) {\n        this.styles = styles;\n        this.updateStyles();\n    }\n    updateStyles() {\n        if (this.ui) {\n            const { quickInputTitleBackground, quickInputBackground, quickInputForeground, widgetBorder, widgetShadow, } = this.styles.widget;\n            this.ui.titleBar.style.backgroundColor = quickInputTitleBackground !== null && quickInputTitleBackground !== void 0 ? quickInputTitleBackground : '';\n            this.ui.container.style.backgroundColor = quickInputBackground !== null && quickInputBackground !== void 0 ? quickInputBackground : '';\n            this.ui.container.style.color = quickInputForeground !== null && quickInputForeground !== void 0 ? quickInputForeground : '';\n            this.ui.container.style.border = widgetBorder ? `1px solid ${widgetBorder}` : '';\n            this.ui.container.style.boxShadow = widgetShadow ? `0 0 8px 2px ${widgetShadow}` : '';\n            this.ui.list.style(this.styles.list);\n            const content = [];\n            if (this.styles.pickerGroup.pickerGroupBorder) {\n                content.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`);\n            }\n            if (this.styles.pickerGroup.pickerGroupForeground) {\n                content.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`);\n            }\n            if (this.styles.pickerGroup.pickerGroupForeground) {\n                content.push(`.quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }`);\n            }\n            if (this.styles.keybindingLabel.keybindingLabelBackground ||\n                this.styles.keybindingLabel.keybindingLabelBorder ||\n                this.styles.keybindingLabel.keybindingLabelBottomBorder ||\n                this.styles.keybindingLabel.keybindingLabelShadow ||\n                this.styles.keybindingLabel.keybindingLabelForeground) {\n                content.push('.quick-input-list .monaco-keybinding > .monaco-keybinding-key {');\n                if (this.styles.keybindingLabel.keybindingLabelBackground) {\n                    content.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelBorder) {\n                    // Order matters here. `border-color` must come before `border-bottom-color`.\n                    content.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelBottomBorder) {\n                    content.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelShadow) {\n                    content.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelForeground) {\n                    content.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`);\n                }\n                content.push('}');\n            }\n            const newStyles = content.join('\\n');\n            if (newStyles !== this.ui.styleSheet.textContent) {\n                this.ui.styleSheet.textContent = newStyles;\n            }\n        }\n    }\n}\nQuickInputController.MAX_WIDTH = 600; // Max total width of quick input widget\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\nimport { WorkbenchList } from '../../list/browser/listService.js';\nimport { IOpenerService } from '../../opener/common/opener.js';\nimport { QuickAccessController } from './quickAccess.js';\nimport { defaultButtonStyles, defaultCountBadgeStyles, defaultInputBoxStyles, defaultKeybindingLabelStyles, defaultProgressBarStyles, defaultToggleStyles, getListStyles } from '../../theme/browser/defaultStyles.js';\nimport { activeContrastBorder, asCssVariable, pickerGroupBorder, pickerGroupForeground, quickInputBackground, quickInputForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, quickInputTitleBackground, widgetBorder, widgetShadow } from '../../theme/common/colorRegistry.js';\nimport { IThemeService, Themable } from '../../theme/common/themeService.js';\nimport { QuickInputController } from './quickInputController.js';\nlet QuickInputService = class QuickInputService extends Themable {\n    get controller() {\n        if (!this._controller) {\n            this._controller = this._register(this.createController());\n        }\n        return this._controller;\n    }\n    get hasController() { return !!this._controller; }\n    get quickAccess() {\n        if (!this._quickAccess) {\n            this._quickAccess = this._register(this.instantiationService.createInstance(QuickAccessController));\n        }\n        return this._quickAccess;\n    }\n    constructor(instantiationService, contextKeyService, themeService, layoutService) {\n        super(themeService);\n        this.instantiationService = instantiationService;\n        this.contextKeyService = contextKeyService;\n        this.layoutService = layoutService;\n        this._onShow = this._register(new Emitter());\n        this._onHide = this._register(new Emitter());\n        this.contexts = new Map();\n    }\n    createController(host = this.layoutService, options) {\n        const defaultOptions = {\n            idPrefix: 'quickInput_',\n            container: host.activeContainer,\n            ignoreFocusOut: () => false,\n            backKeybindingLabel: () => undefined,\n            setContextKey: (id) => this.setContextKey(id),\n            linkOpenerDelegate: (content) => {\n                // HACK: https://github.com/microsoft/vscode/issues/173691\n                this.instantiationService.invokeFunction(accessor => {\n                    const openerService = accessor.get(IOpenerService);\n                    openerService.open(content, { allowCommands: true, fromUserGesture: true });\n                });\n            },\n            returnFocus: () => host.focus(),\n            createList: (user, container, delegate, renderers, options) => this.instantiationService.createInstance(WorkbenchList, user, container, delegate, renderers, options),\n            styles: this.computeStyles()\n        };\n        const controller = this._register(new QuickInputController({\n            ...defaultOptions,\n            ...options\n        }, this.themeService, this.layoutService));\n        controller.layout(host.activeContainerDimension, host.activeContainerOffset.quickPickTop);\n        // Layout changes\n        this._register(host.onDidLayoutActiveContainer(dimension => controller.layout(dimension, host.activeContainerOffset.quickPickTop)));\n        this._register(host.onDidChangeActiveContainer(() => {\n            if (controller.isVisible()) {\n                return;\n            }\n            controller.layout(host.activeContainerDimension, host.activeContainerOffset.quickPickTop);\n        }));\n        // Context keys\n        this._register(controller.onShow(() => {\n            this.resetContextKeys();\n            this._onShow.fire();\n        }));\n        this._register(controller.onHide(() => {\n            this.resetContextKeys();\n            this._onHide.fire();\n        }));\n        return controller;\n    }\n    setContextKey(id) {\n        let key;\n        if (id) {\n            key = this.contexts.get(id);\n            if (!key) {\n                key = new RawContextKey(id, false)\n                    .bindTo(this.contextKeyService);\n                this.contexts.set(id, key);\n            }\n        }\n        if (key && key.get()) {\n            return; // already active context\n        }\n        this.resetContextKeys();\n        key === null || key === void 0 ? void 0 : key.set(true);\n    }\n    resetContextKeys() {\n        this.contexts.forEach(context => {\n            if (context.get()) {\n                context.reset();\n            }\n        });\n    }\n    pick(picks, options = {}, token = CancellationToken.None) {\n        return this.controller.pick(picks, options, token);\n    }\n    createQuickPick() {\n        return this.controller.createQuickPick();\n    }\n    createInputBox() {\n        return this.controller.createInputBox();\n    }\n    updateStyles() {\n        if (this.hasController) {\n            this.controller.applyStyles(this.computeStyles());\n        }\n    }\n    computeStyles() {\n        return {\n            widget: {\n                quickInputBackground: asCssVariable(quickInputBackground),\n                quickInputForeground: asCssVariable(quickInputForeground),\n                quickInputTitleBackground: asCssVariable(quickInputTitleBackground),\n                widgetBorder: asCssVariable(widgetBorder),\n                widgetShadow: asCssVariable(widgetShadow),\n            },\n            inputBox: defaultInputBoxStyles,\n            toggle: defaultToggleStyles,\n            countBadge: defaultCountBadgeStyles,\n            button: defaultButtonStyles,\n            progressBar: defaultProgressBarStyles,\n            keybindingLabel: defaultKeybindingLabelStyles,\n            list: getListStyles({\n                listBackground: quickInputBackground,\n                listFocusBackground: quickInputListFocusBackground,\n                listFocusForeground: quickInputListFocusForeground,\n                // Look like focused when inactive.\n                listInactiveFocusForeground: quickInputListFocusForeground,\n                listInactiveSelectionIconForeground: quickInputListFocusIconForeground,\n                listInactiveFocusBackground: quickInputListFocusBackground,\n                listFocusOutline: activeContrastBorder,\n                listInactiveFocusOutline: activeContrastBorder,\n            }),\n            pickerGroup: {\n                pickerGroupBorder: asCssVariable(pickerGroupBorder),\n                pickerGroupForeground: asCssVariable(pickerGroupForeground),\n            }\n        };\n    }\n};\nQuickInputService = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, IContextKeyService),\n    __param(2, IThemeService),\n    __param(3, ILayoutService)\n], QuickInputService);\nexport { QuickInputService };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Color } from '../../../../base/common/color.js';\nexport class ParsedTokenThemeRule {\n    constructor(token, index, fontStyle, foreground, background) {\n        this._parsedThemeRuleBrand = undefined;\n        this.token = token;\n        this.index = index;\n        this.fontStyle = fontStyle;\n        this.foreground = foreground;\n        this.background = background;\n    }\n}\n/**\n * Parse a raw theme into rules.\n */\nexport function parseTokenTheme(source) {\n    if (!source || !Array.isArray(source)) {\n        return [];\n    }\n    const result = [];\n    let resultLen = 0;\n    for (let i = 0, len = source.length; i < len; i++) {\n        const entry = source[i];\n        let fontStyle = -1 /* FontStyle.NotSet */;\n        if (typeof entry.fontStyle === 'string') {\n            fontStyle = 0 /* FontStyle.None */;\n            const segments = entry.fontStyle.split(' ');\n            for (let j = 0, lenJ = segments.length; j < lenJ; j++) {\n                const segment = segments[j];\n                switch (segment) {\n                    case 'italic':\n                        fontStyle = fontStyle | 1 /* FontStyle.Italic */;\n                        break;\n                    case 'bold':\n                        fontStyle = fontStyle | 2 /* FontStyle.Bold */;\n                        break;\n                    case 'underline':\n                        fontStyle = fontStyle | 4 /* FontStyle.Underline */;\n                        break;\n                    case 'strikethrough':\n                        fontStyle = fontStyle | 8 /* FontStyle.Strikethrough */;\n                        break;\n                }\n            }\n        }\n        let foreground = null;\n        if (typeof entry.foreground === 'string') {\n            foreground = entry.foreground;\n        }\n        let background = null;\n        if (typeof entry.background === 'string') {\n            background = entry.background;\n        }\n        result[resultLen++] = new ParsedTokenThemeRule(entry.token || '', i, fontStyle, foreground, background);\n    }\n    return result;\n}\n/**\n * Resolve rules (i.e. inheritance).\n */\nfunction resolveParsedTokenThemeRules(parsedThemeRules, customTokenColors) {\n    // Sort rules lexicographically, and then by index if necessary\n    parsedThemeRules.sort((a, b) => {\n        const r = strcmp(a.token, b.token);\n        if (r !== 0) {\n            return r;\n        }\n        return a.index - b.index;\n    });\n    // Determine defaults\n    let defaultFontStyle = 0 /* FontStyle.None */;\n    let defaultForeground = '000000';\n    let defaultBackground = 'ffffff';\n    while (parsedThemeRules.length >= 1 && parsedThemeRules[0].token === '') {\n        const incomingDefaults = parsedThemeRules.shift();\n        if (incomingDefaults.fontStyle !== -1 /* FontStyle.NotSet */) {\n            defaultFontStyle = incomingDefaults.fontStyle;\n        }\n        if (incomingDefaults.foreground !== null) {\n            defaultForeground = incomingDefaults.foreground;\n        }\n        if (incomingDefaults.background !== null) {\n            defaultBackground = incomingDefaults.background;\n        }\n    }\n    const colorMap = new ColorMap();\n    // start with token colors from custom token themes\n    for (const color of customTokenColors) {\n        colorMap.getId(color);\n    }\n    const foregroundColorId = colorMap.getId(defaultForeground);\n    const backgroundColorId = colorMap.getId(defaultBackground);\n    const defaults = new ThemeTrieElementRule(defaultFontStyle, foregroundColorId, backgroundColorId);\n    const root = new ThemeTrieElement(defaults);\n    for (let i = 0, len = parsedThemeRules.length; i < len; i++) {\n        const rule = parsedThemeRules[i];\n        root.insert(rule.token, rule.fontStyle, colorMap.getId(rule.foreground), colorMap.getId(rule.background));\n    }\n    return new TokenTheme(colorMap, root);\n}\nconst colorRegExp = /^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;\nexport class ColorMap {\n    constructor() {\n        this._lastColorId = 0;\n        this._id2color = [];\n        this._color2id = new Map();\n    }\n    getId(color) {\n        if (color === null) {\n            return 0;\n        }\n        const match = color.match(colorRegExp);\n        if (!match) {\n            throw new Error('Illegal value for token color: ' + color);\n        }\n        color = match[1].toUpperCase();\n        let value = this._color2id.get(color);\n        if (value) {\n            return value;\n        }\n        value = ++this._lastColorId;\n        this._color2id.set(color, value);\n        this._id2color[value] = Color.fromHex('#' + color);\n        return value;\n    }\n    getColorMap() {\n        return this._id2color.slice(0);\n    }\n}\nexport class TokenTheme {\n    static createFromRawTokenTheme(source, customTokenColors) {\n        return this.createFromParsedTokenTheme(parseTokenTheme(source), customTokenColors);\n    }\n    static createFromParsedTokenTheme(source, customTokenColors) {\n        return resolveParsedTokenThemeRules(source, customTokenColors);\n    }\n    constructor(colorMap, root) {\n        this._colorMap = colorMap;\n        this._root = root;\n        this._cache = new Map();\n    }\n    getColorMap() {\n        return this._colorMap.getColorMap();\n    }\n    _match(token) {\n        return this._root.match(token);\n    }\n    match(languageId, token) {\n        // The cache contains the metadata without the language bits set.\n        let result = this._cache.get(token);\n        if (typeof result === 'undefined') {\n            const rule = this._match(token);\n            const standardToken = toStandardTokenType(token);\n            result = (rule.metadata\n                | (standardToken << 8 /* MetadataConsts.TOKEN_TYPE_OFFSET */)) >>> 0;\n            this._cache.set(token, result);\n        }\n        return (result\n            | (languageId << 0 /* MetadataConsts.LANGUAGEID_OFFSET */)) >>> 0;\n    }\n}\nconst STANDARD_TOKEN_TYPE_REGEXP = /\\b(comment|string|regex|regexp)\\b/;\nexport function toStandardTokenType(tokenType) {\n    const m = tokenType.match(STANDARD_TOKEN_TYPE_REGEXP);\n    if (!m) {\n        return 0 /* StandardTokenType.Other */;\n    }\n    switch (m[1]) {\n        case 'comment':\n            return 1 /* StandardTokenType.Comment */;\n        case 'string':\n            return 2 /* StandardTokenType.String */;\n        case 'regex':\n            return 3 /* StandardTokenType.RegEx */;\n        case 'regexp':\n            return 3 /* StandardTokenType.RegEx */;\n    }\n    throw new Error('Unexpected match for standard token type!');\n}\nexport function strcmp(a, b) {\n    if (a < b) {\n        return -1;\n    }\n    if (a > b) {\n        return 1;\n    }\n    return 0;\n}\nexport class ThemeTrieElementRule {\n    constructor(fontStyle, foreground, background) {\n        this._themeTrieElementRuleBrand = undefined;\n        this._fontStyle = fontStyle;\n        this._foreground = foreground;\n        this._background = background;\n        this.metadata = ((this._fontStyle << 11 /* MetadataConsts.FONT_STYLE_OFFSET */)\n            | (this._foreground << 15 /* MetadataConsts.FOREGROUND_OFFSET */)\n            | (this._background << 24 /* MetadataConsts.BACKGROUND_OFFSET */)) >>> 0;\n    }\n    clone() {\n        return new ThemeTrieElementRule(this._fontStyle, this._foreground, this._background);\n    }\n    acceptOverwrite(fontStyle, foreground, background) {\n        if (fontStyle !== -1 /* FontStyle.NotSet */) {\n            this._fontStyle = fontStyle;\n        }\n        if (foreground !== 0 /* ColorId.None */) {\n            this._foreground = foreground;\n        }\n        if (background !== 0 /* ColorId.None */) {\n            this._background = background;\n        }\n        this.metadata = ((this._fontStyle << 11 /* MetadataConsts.FONT_STYLE_OFFSET */)\n            | (this._foreground << 15 /* MetadataConsts.FOREGROUND_OFFSET */)\n            | (this._background << 24 /* MetadataConsts.BACKGROUND_OFFSET */)) >>> 0;\n    }\n}\nexport class ThemeTrieElement {\n    constructor(mainRule) {\n        this._themeTrieElementBrand = undefined;\n        this._mainRule = mainRule;\n        this._children = new Map();\n    }\n    match(token) {\n        if (token === '') {\n            return this._mainRule;\n        }\n        const dotIndex = token.indexOf('.');\n        let head;\n        let tail;\n        if (dotIndex === -1) {\n            head = token;\n            tail = '';\n        }\n        else {\n            head = token.substring(0, dotIndex);\n            tail = token.substring(dotIndex + 1);\n        }\n        const child = this._children.get(head);\n        if (typeof child !== 'undefined') {\n            return child.match(tail);\n        }\n        return this._mainRule;\n    }\n    insert(token, fontStyle, foreground, background) {\n        if (token === '') {\n            // Merge into the main rule\n            this._mainRule.acceptOverwrite(fontStyle, foreground, background);\n            return;\n        }\n        const dotIndex = token.indexOf('.');\n        let head;\n        let tail;\n        if (dotIndex === -1) {\n            head = token;\n            tail = '';\n        }\n        else {\n            head = token.substring(0, dotIndex);\n            tail = token.substring(dotIndex + 1);\n        }\n        let child = this._children.get(head);\n        if (typeof child === 'undefined') {\n            child = new ThemeTrieElement(this._mainRule.clone());\n            this._children.set(head, child);\n        }\n        child.insert(tail, fontStyle, foreground, background);\n    }\n}\nexport function generateTokensCSSForColorMap(colorMap) {\n    const rules = [];\n    for (let i = 1, len = colorMap.length; i < len; i++) {\n        const color = colorMap[i];\n        rules[i] = `.mtk${i} { color: ${color}; }`;\n    }\n    rules.push('.mtki { font-style: italic; }');\n    rules.push('.mtkb { font-weight: bold; }');\n    rules.push('.mtku { text-decoration: underline; text-underline-position: under; }');\n    rules.push('.mtks { text-decoration: line-through; }');\n    rules.push('.mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }');\n    return rules.join('\\n');\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { editorActiveIndentGuide1, editorIndentGuide1 } from '../../common/core/editorColorRegistry.js';\nimport { editorBackground, editorForeground, editorInactiveSelection, editorSelectionHighlight } from '../../../platform/theme/common/colorRegistry.js';\n/* -------------------------------- Begin vs theme -------------------------------- */\nexport const vs = {\n    base: 'vs',\n    inherit: false,\n    rules: [\n        { token: '', foreground: '000000', background: 'fffffe' },\n        { token: 'invalid', foreground: 'cd3131' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '001188' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'constant', foreground: 'dd0000' },\n        { token: 'comment', foreground: '008000' },\n        { token: 'number', foreground: '098658' },\n        { token: 'number.hex', foreground: '3030c0' },\n        { token: 'regexp', foreground: '800000' },\n        { token: 'annotation', foreground: '808080' },\n        { token: 'type', foreground: '008080' },\n        { token: 'delimiter', foreground: '000000' },\n        { token: 'delimiter.html', foreground: '383838' },\n        { token: 'delimiter.xml', foreground: '0000FF' },\n        { token: 'tag', foreground: '800000' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: '800000' },\n        { token: 'metatag', foreground: 'e00000' },\n        { token: 'metatag.content.html', foreground: 'FF0000' },\n        { token: 'metatag.html', foreground: '808080' },\n        { token: 'metatag.xml', foreground: '808080' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '863B00' },\n        { token: 'string.key.json', foreground: 'A31515' },\n        { token: 'string.value.json', foreground: '0451A5' },\n        { token: 'attribute.name', foreground: 'FF0000' },\n        { token: 'attribute.value', foreground: '0451A5' },\n        { token: 'attribute.value.number', foreground: '098658' },\n        { token: 'attribute.value.unit', foreground: '098658' },\n        { token: 'attribute.value.html', foreground: '0000FF' },\n        { token: 'attribute.value.xml', foreground: '0000FF' },\n        { token: 'string', foreground: 'A31515' },\n        { token: 'string.html', foreground: '0000FF' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'string.yaml', foreground: '0451A5' },\n        { token: 'keyword', foreground: '0000FF' },\n        { token: 'keyword.json', foreground: '0451A5' },\n        { token: 'keyword.flow', foreground: 'AF00DB' },\n        { token: 'keyword.flow.scss', foreground: '0000FF' },\n        { token: 'operator.scss', foreground: '666666' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '666666' },\n        { token: 'predefined.sql', foreground: 'C700C7' },\n    ],\n    colors: {\n        [editorBackground]: '#FFFFFE',\n        [editorForeground]: '#000000',\n        [editorInactiveSelection]: '#E5EBF1',\n        [editorIndentGuide1]: '#D3D3D3',\n        [editorActiveIndentGuide1]: '#939393',\n        [editorSelectionHighlight]: '#ADD6FF4D'\n    }\n};\n/* -------------------------------- End vs theme -------------------------------- */\n/* -------------------------------- Begin vs-dark theme -------------------------------- */\nexport const vs_dark = {\n    base: 'vs-dark',\n    inherit: false,\n    rules: [\n        { token: '', foreground: 'D4D4D4', background: '1E1E1E' },\n        { token: 'invalid', foreground: 'f44747' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '74B0DF' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'variable.parameter', foreground: '9CDCFE' },\n        { token: 'constant', foreground: '569CD6' },\n        { token: 'comment', foreground: '608B4E' },\n        { token: 'number', foreground: 'B5CEA8' },\n        { token: 'number.hex', foreground: '5BB498' },\n        { token: 'regexp', foreground: 'B46695' },\n        { token: 'annotation', foreground: 'cc6666' },\n        { token: 'type', foreground: '3DC9B0' },\n        { token: 'delimiter', foreground: 'DCDCDC' },\n        { token: 'delimiter.html', foreground: '808080' },\n        { token: 'delimiter.xml', foreground: '808080' },\n        { token: 'tag', foreground: '569CD6' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: 'A79873' },\n        { token: 'meta.tag', foreground: 'CE9178' },\n        { token: 'metatag', foreground: 'DD6A6F' },\n        { token: 'metatag.content.html', foreground: '9CDCFE' },\n        { token: 'metatag.html', foreground: '569CD6' },\n        { token: 'metatag.xml', foreground: '569CD6' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '9CDCFE' },\n        { token: 'string.key.json', foreground: '9CDCFE' },\n        { token: 'string.value.json', foreground: 'CE9178' },\n        { token: 'attribute.name', foreground: '9CDCFE' },\n        { token: 'attribute.value', foreground: 'CE9178' },\n        { token: 'attribute.value.number.css', foreground: 'B5CEA8' },\n        { token: 'attribute.value.unit.css', foreground: 'B5CEA8' },\n        { token: 'attribute.value.hex.css', foreground: 'D4D4D4' },\n        { token: 'string', foreground: 'CE9178' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'keyword', foreground: '569CD6' },\n        { token: 'keyword.flow', foreground: 'C586C0' },\n        { token: 'keyword.json', foreground: 'CE9178' },\n        { token: 'keyword.flow.scss', foreground: '569CD6' },\n        { token: 'operator.scss', foreground: '909090' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '909090' },\n        { token: 'predefined.sql', foreground: 'FF00FF' },\n    ],\n    colors: {\n        [editorBackground]: '#1E1E1E',\n        [editorForeground]: '#D4D4D4',\n        [editorInactiveSelection]: '#3A3D41',\n        [editorIndentGuide1]: '#404040',\n        [editorActiveIndentGuide1]: '#707070',\n        [editorSelectionHighlight]: '#ADD6FF26'\n    }\n};\n/* -------------------------------- End vs-dark theme -------------------------------- */\n/* -------------------------------- Begin hc-black theme -------------------------------- */\nexport const hc_black = {\n    base: 'hc-black',\n    inherit: false,\n    rules: [\n        { token: '', foreground: 'FFFFFF', background: '000000' },\n        { token: 'invalid', foreground: 'f44747' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '1AEBFF' },\n        { token: 'variable.parameter', foreground: '9CDCFE' },\n        { token: 'constant', foreground: '569CD6' },\n        { token: 'comment', foreground: '608B4E' },\n        { token: 'number', foreground: 'FFFFFF' },\n        { token: 'regexp', foreground: 'C0C0C0' },\n        { token: 'annotation', foreground: '569CD6' },\n        { token: 'type', foreground: '3DC9B0' },\n        { token: 'delimiter', foreground: 'FFFF00' },\n        { token: 'delimiter.html', foreground: 'FFFF00' },\n        { token: 'tag', foreground: '569CD6' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta', foreground: 'D4D4D4' },\n        { token: 'meta.tag', foreground: 'CE9178' },\n        { token: 'metatag', foreground: '569CD6' },\n        { token: 'metatag.content.html', foreground: '1AEBFF' },\n        { token: 'metatag.html', foreground: '569CD6' },\n        { token: 'metatag.xml', foreground: '569CD6' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '9CDCFE' },\n        { token: 'string.key', foreground: '9CDCFE' },\n        { token: 'string.value', foreground: 'CE9178' },\n        { token: 'attribute.name', foreground: '569CD6' },\n        { token: 'attribute.value', foreground: '3FF23F' },\n        { token: 'string', foreground: 'CE9178' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'keyword', foreground: '569CD6' },\n        { token: 'keyword.flow', foreground: 'C586C0' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '909090' },\n        { token: 'predefined.sql', foreground: 'FF00FF' },\n    ],\n    colors: {\n        [editorBackground]: '#000000',\n        [editorForeground]: '#FFFFFF',\n        [editorIndentGuide1]: '#FFFFFF',\n        [editorActiveIndentGuide1]: '#FFFFFF',\n    }\n};\n/* -------------------------------- End hc-black theme -------------------------------- */\n/* -------------------------------- Begin hc-light theme -------------------------------- */\nexport const hc_light = {\n    base: 'hc-light',\n    inherit: false,\n    rules: [\n        { token: '', foreground: '292929', background: 'FFFFFF' },\n        { token: 'invalid', foreground: 'B5200D' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '264F70' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'constant', foreground: 'dd0000' },\n        { token: 'comment', foreground: '008000' },\n        { token: 'number', foreground: '098658' },\n        { token: 'number.hex', foreground: '3030c0' },\n        { token: 'regexp', foreground: '800000' },\n        { token: 'annotation', foreground: '808080' },\n        { token: 'type', foreground: '008080' },\n        { token: 'delimiter', foreground: '000000' },\n        { token: 'delimiter.html', foreground: '383838' },\n        { token: 'tag', foreground: '800000' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: '800000' },\n        { token: 'metatag', foreground: 'e00000' },\n        { token: 'metatag.content.html', foreground: 'B5200D' },\n        { token: 'metatag.html', foreground: '808080' },\n        { token: 'metatag.xml', foreground: '808080' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '863B00' },\n        { token: 'string.key.json', foreground: 'A31515' },\n        { token: 'string.value.json', foreground: '0451A5' },\n        { token: 'attribute.name', foreground: '264F78' },\n        { token: 'attribute.value', foreground: '0451A5' },\n        { token: 'string', foreground: 'A31515' },\n        { token: 'string.sql', foreground: 'B5200D' },\n        { token: 'keyword', foreground: '0000FF' },\n        { token: 'keyword.flow', foreground: 'AF00DB' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '666666' },\n        { token: 'predefined.sql', foreground: 'C700C7' },\n    ],\n    colors: {\n        [editorBackground]: '#FFFFFF',\n        [editorForeground]: '#292929',\n        [editorIndentGuide1]: '#292929',\n        [editorActiveIndentGuide1]: '#292929',\n    }\n};\n/* -------------------------------- End hc-light theme -------------------------------- */\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { asCSSPropertyValue, asCSSUrl } from '../../../base/browser/dom.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport { getIconRegistry } from '../common/iconRegistry.js';\nexport function getIconsStyleSheet(themeService) {\n    const disposable = new DisposableStore();\n    const onDidChangeEmmiter = disposable.add(new Emitter());\n    const iconRegistry = getIconRegistry();\n    disposable.add(iconRegistry.onDidChange(() => onDidChangeEmmiter.fire()));\n    if (themeService) {\n        disposable.add(themeService.onDidProductIconThemeChange(() => onDidChangeEmmiter.fire()));\n    }\n    return {\n        dispose: () => disposable.dispose(),\n        onDidChange: onDidChangeEmmiter.event,\n        getCSS() {\n            const productIconTheme = themeService ? themeService.getProductIconTheme() : new UnthemedProductIconTheme();\n            const usedFontIds = {};\n            const formatIconRule = (contribution) => {\n                const definition = productIconTheme.getIcon(contribution);\n                if (!definition) {\n                    return undefined;\n                }\n                const fontContribution = definition.font;\n                if (fontContribution) {\n                    usedFontIds[fontContribution.id] = fontContribution.definition;\n                    return `.codicon-${contribution.id}:before { content: '${definition.fontCharacter}'; font-family: ${asCSSPropertyValue(fontContribution.id)}; }`;\n                }\n                // default font (codicon)\n                return `.codicon-${contribution.id}:before { content: '${definition.fontCharacter}'; }`;\n            };\n            const rules = [];\n            for (const contribution of iconRegistry.getIcons()) {\n                const rule = formatIconRule(contribution);\n                if (rule) {\n                    rules.push(rule);\n                }\n            }\n            for (const id in usedFontIds) {\n                const definition = usedFontIds[id];\n                const fontWeight = definition.weight ? `font-weight: ${definition.weight};` : '';\n                const fontStyle = definition.style ? `font-style: ${definition.style};` : '';\n                const src = definition.src.map(l => `${asCSSUrl(l.location)} format('${l.format}')`).join(', ');\n                rules.push(`@font-face { src: ${src}; font-family: ${asCSSPropertyValue(id)};${fontWeight}${fontStyle} font-display: block; }`);\n            }\n            return rules.join('\\n');\n        }\n    };\n}\nexport class UnthemedProductIconTheme {\n    getIcon(contribution) {\n        const iconRegistry = getIconRegistry();\n        let definition = contribution.defaults;\n        while (ThemeIcon.isThemeIcon(definition)) {\n            const c = iconRegistry.getIcon(definition.id);\n            if (!c) {\n                return undefined;\n            }\n            definition = c.defaults;\n        }\n        return definition;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { addMatchMediaChangeListener } from '../../../base/browser/browser.js';\nimport { Color } from '../../../base/common/color.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { TokenMetadata } from '../../common/encodedTokenAttributes.js';\nimport { TokenTheme, generateTokensCSSForColorMap } from '../../common/languages/supports/tokenization.js';\nimport { hc_black, hc_light, vs, vs_dark } from '../common/themes.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { asCssVariableName, Extensions } from '../../../platform/theme/common/colorRegistry.js';\nimport { Extensions as ThemingExtensions } from '../../../platform/theme/common/themeService.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ColorScheme, isDark, isHighContrast } from '../../../platform/theme/common/theme.js';\nimport { getIconsStyleSheet, UnthemedProductIconTheme } from '../../../platform/theme/browser/iconsStyleSheet.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nexport const VS_LIGHT_THEME_NAME = 'vs';\nexport const VS_DARK_THEME_NAME = 'vs-dark';\nexport const HC_BLACK_THEME_NAME = 'hc-black';\nexport const HC_LIGHT_THEME_NAME = 'hc-light';\nconst colorRegistry = Registry.as(Extensions.ColorContribution);\nconst themingRegistry = Registry.as(ThemingExtensions.ThemingContribution);\nclass StandaloneTheme {\n    constructor(name, standaloneThemeData) {\n        this.semanticHighlighting = false;\n        this.themeData = standaloneThemeData;\n        const base = standaloneThemeData.base;\n        if (name.length > 0) {\n            if (isBuiltinTheme(name)) {\n                this.id = name;\n            }\n            else {\n                this.id = base + ' ' + name;\n            }\n            this.themeName = name;\n        }\n        else {\n            this.id = base;\n            this.themeName = base;\n        }\n        this.colors = null;\n        this.defaultColors = Object.create(null);\n        this._tokenTheme = null;\n    }\n    get base() {\n        return this.themeData.base;\n    }\n    notifyBaseUpdated() {\n        if (this.themeData.inherit) {\n            this.colors = null;\n            this._tokenTheme = null;\n        }\n    }\n    getColors() {\n        if (!this.colors) {\n            const colors = new Map();\n            for (const id in this.themeData.colors) {\n                colors.set(id, Color.fromHex(this.themeData.colors[id]));\n            }\n            if (this.themeData.inherit) {\n                const baseData = getBuiltinRules(this.themeData.base);\n                for (const id in baseData.colors) {\n                    if (!colors.has(id)) {\n                        colors.set(id, Color.fromHex(baseData.colors[id]));\n                    }\n                }\n            }\n            this.colors = colors;\n        }\n        return this.colors;\n    }\n    getColor(colorId, useDefault) {\n        const color = this.getColors().get(colorId);\n        if (color) {\n            return color;\n        }\n        if (useDefault !== false) {\n            return this.getDefault(colorId);\n        }\n        return undefined;\n    }\n    getDefault(colorId) {\n        let color = this.defaultColors[colorId];\n        if (color) {\n            return color;\n        }\n        color = colorRegistry.resolveDefaultColor(colorId, this);\n        this.defaultColors[colorId] = color;\n        return color;\n    }\n    defines(colorId) {\n        return this.getColors().has(colorId);\n    }\n    get type() {\n        switch (this.base) {\n            case VS_LIGHT_THEME_NAME: return ColorScheme.LIGHT;\n            case HC_BLACK_THEME_NAME: return ColorScheme.HIGH_CONTRAST_DARK;\n            case HC_LIGHT_THEME_NAME: return ColorScheme.HIGH_CONTRAST_LIGHT;\n            default: return ColorScheme.DARK;\n        }\n    }\n    get tokenTheme() {\n        if (!this._tokenTheme) {\n            let rules = [];\n            let encodedTokensColors = [];\n            if (this.themeData.inherit) {\n                const baseData = getBuiltinRules(this.themeData.base);\n                rules = baseData.rules;\n                if (baseData.encodedTokensColors) {\n                    encodedTokensColors = baseData.encodedTokensColors;\n                }\n            }\n            // Pick up default colors from `editor.foreground` and `editor.background` if available\n            const editorForeground = this.themeData.colors['editor.foreground'];\n            const editorBackground = this.themeData.colors['editor.background'];\n            if (editorForeground || editorBackground) {\n                const rule = { token: '' };\n                if (editorForeground) {\n                    rule.foreground = editorForeground;\n                }\n                if (editorBackground) {\n                    rule.background = editorBackground;\n                }\n                rules.push(rule);\n            }\n            rules = rules.concat(this.themeData.rules);\n            if (this.themeData.encodedTokensColors) {\n                encodedTokensColors = this.themeData.encodedTokensColors;\n            }\n            this._tokenTheme = TokenTheme.createFromRawTokenTheme(rules, encodedTokensColors);\n        }\n        return this._tokenTheme;\n    }\n    getTokenStyleMetadata(type, modifiers, modelLanguage) {\n        // use theme rules match\n        const style = this.tokenTheme._match([type].concat(modifiers).join('.'));\n        const metadata = style.metadata;\n        const foreground = TokenMetadata.getForeground(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        return {\n            foreground: foreground,\n            italic: Boolean(fontStyle & 1 /* FontStyle.Italic */),\n            bold: Boolean(fontStyle & 2 /* FontStyle.Bold */),\n            underline: Boolean(fontStyle & 4 /* FontStyle.Underline */),\n            strikethrough: Boolean(fontStyle & 8 /* FontStyle.Strikethrough */)\n        };\n    }\n}\nfunction isBuiltinTheme(themeName) {\n    return (themeName === VS_LIGHT_THEME_NAME\n        || themeName === VS_DARK_THEME_NAME\n        || themeName === HC_BLACK_THEME_NAME\n        || themeName === HC_LIGHT_THEME_NAME);\n}\nfunction getBuiltinRules(builtinTheme) {\n    switch (builtinTheme) {\n        case VS_LIGHT_THEME_NAME:\n            return vs;\n        case VS_DARK_THEME_NAME:\n            return vs_dark;\n        case HC_BLACK_THEME_NAME:\n            return hc_black;\n        case HC_LIGHT_THEME_NAME:\n            return hc_light;\n    }\n}\nfunction newBuiltInTheme(builtinTheme) {\n    const themeData = getBuiltinRules(builtinTheme);\n    return new StandaloneTheme(builtinTheme, themeData);\n}\nexport class StandaloneThemeService extends Disposable {\n    constructor() {\n        super();\n        this._onColorThemeChange = this._register(new Emitter());\n        this.onDidColorThemeChange = this._onColorThemeChange.event;\n        this._onProductIconThemeChange = this._register(new Emitter());\n        this.onDidProductIconThemeChange = this._onProductIconThemeChange.event;\n        this._environment = Object.create(null);\n        this._builtInProductIconTheme = new UnthemedProductIconTheme();\n        this._autoDetectHighContrast = true;\n        this._knownThemes = new Map();\n        this._knownThemes.set(VS_LIGHT_THEME_NAME, newBuiltInTheme(VS_LIGHT_THEME_NAME));\n        this._knownThemes.set(VS_DARK_THEME_NAME, newBuiltInTheme(VS_DARK_THEME_NAME));\n        this._knownThemes.set(HC_BLACK_THEME_NAME, newBuiltInTheme(HC_BLACK_THEME_NAME));\n        this._knownThemes.set(HC_LIGHT_THEME_NAME, newBuiltInTheme(HC_LIGHT_THEME_NAME));\n        const iconsStyleSheet = this._register(getIconsStyleSheet(this));\n        this._codiconCSS = iconsStyleSheet.getCSS();\n        this._themeCSS = '';\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n        this._globalStyleElement = null;\n        this._styleElements = [];\n        this._colorMapOverride = null;\n        this.setTheme(VS_LIGHT_THEME_NAME);\n        this._onOSSchemeChanged();\n        this._register(iconsStyleSheet.onDidChange(() => {\n            this._codiconCSS = iconsStyleSheet.getCSS();\n            this._updateCSS();\n        }));\n        addMatchMediaChangeListener('(forced-colors: active)', () => {\n            this._onOSSchemeChanged();\n        });\n    }\n    registerEditorContainer(domNode) {\n        if (dom.isInShadowDOM(domNode)) {\n            return this._registerShadowDomContainer(domNode);\n        }\n        return this._registerRegularEditorContainer();\n    }\n    _registerRegularEditorContainer() {\n        if (!this._globalStyleElement) {\n            this._globalStyleElement = dom.createStyleSheet(undefined, style => {\n                style.className = 'monaco-colors';\n                style.textContent = this._allCSS;\n            });\n            this._styleElements.push(this._globalStyleElement);\n        }\n        return Disposable.None;\n    }\n    _registerShadowDomContainer(domNode) {\n        const styleElement = dom.createStyleSheet(domNode, style => {\n            style.className = 'monaco-colors';\n            style.textContent = this._allCSS;\n        });\n        this._styleElements.push(styleElement);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._styleElements.length; i++) {\n                    if (this._styleElements[i] === styleElement) {\n                        this._styleElements.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    defineTheme(themeName, themeData) {\n        if (!/^[a-z0-9\\-]+$/i.test(themeName)) {\n            throw new Error('Illegal theme name!');\n        }\n        if (!isBuiltinTheme(themeData.base) && !isBuiltinTheme(themeName)) {\n            throw new Error('Illegal theme base!');\n        }\n        // set or replace theme\n        this._knownThemes.set(themeName, new StandaloneTheme(themeName, themeData));\n        if (isBuiltinTheme(themeName)) {\n            this._knownThemes.forEach(theme => {\n                if (theme.base === themeName) {\n                    theme.notifyBaseUpdated();\n                }\n            });\n        }\n        if (this._theme.themeName === themeName) {\n            this.setTheme(themeName); // refresh theme\n        }\n    }\n    getColorTheme() {\n        return this._theme;\n    }\n    setColorMapOverride(colorMapOverride) {\n        this._colorMapOverride = colorMapOverride;\n        this._updateThemeOrColorMap();\n    }\n    setTheme(themeName) {\n        let theme;\n        if (this._knownThemes.has(themeName)) {\n            theme = this._knownThemes.get(themeName);\n        }\n        else {\n            theme = this._knownThemes.get(VS_LIGHT_THEME_NAME);\n        }\n        this._updateActualTheme(theme);\n    }\n    _updateActualTheme(desiredTheme) {\n        if (!desiredTheme || this._theme === desiredTheme) {\n            // Nothing to do\n            return;\n        }\n        this._theme = desiredTheme;\n        this._updateThemeOrColorMap();\n    }\n    _onOSSchemeChanged() {\n        if (this._autoDetectHighContrast) {\n            const wantsHighContrast = mainWindow.matchMedia(`(forced-colors: active)`).matches;\n            if (wantsHighContrast !== isHighContrast(this._theme.type)) {\n                // switch to high contrast or non-high contrast but stick to dark or light\n                let newThemeName;\n                if (isDark(this._theme.type)) {\n                    newThemeName = wantsHighContrast ? HC_BLACK_THEME_NAME : VS_DARK_THEME_NAME;\n                }\n                else {\n                    newThemeName = wantsHighContrast ? HC_LIGHT_THEME_NAME : VS_LIGHT_THEME_NAME;\n                }\n                this._updateActualTheme(this._knownThemes.get(newThemeName));\n            }\n        }\n    }\n    setAutoDetectHighContrast(autoDetectHighContrast) {\n        this._autoDetectHighContrast = autoDetectHighContrast;\n        this._onOSSchemeChanged();\n    }\n    _updateThemeOrColorMap() {\n        const cssRules = [];\n        const hasRule = {};\n        const ruleCollector = {\n            addRule: (rule) => {\n                if (!hasRule[rule]) {\n                    cssRules.push(rule);\n                    hasRule[rule] = true;\n                }\n            }\n        };\n        themingRegistry.getThemingParticipants().forEach(p => p(this._theme, ruleCollector, this._environment));\n        const colorVariables = [];\n        for (const item of colorRegistry.getColors()) {\n            const color = this._theme.getColor(item.id, true);\n            if (color) {\n                colorVariables.push(`${asCssVariableName(item.id)}: ${color.toString()};`);\n            }\n        }\n        ruleCollector.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${colorVariables.join('\\n')} }`);\n        const colorMap = this._colorMapOverride || this._theme.tokenTheme.getColorMap();\n        ruleCollector.addRule(generateTokensCSSForColorMap(colorMap));\n        this._themeCSS = cssRules.join('\\n');\n        this._updateCSS();\n        TokenizationRegistry.setColorMap(colorMap);\n        this._onColorThemeChange.fire(this._theme);\n    }\n    _updateCSS() {\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n        this._styleElements.forEach(styleElement => styleElement.textContent = this._allCSS);\n    }\n    getFileIconTheme() {\n        return {\n            hasFileIcons: false,\n            hasFolderIcons: false,\n            hidesExplorerArrows: false\n        };\n    }\n    getProductIconTheme() {\n        return this._builtInProductIconTheme;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const IStandaloneThemeService = createDecorator('themeService');\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { addDisposableListener } from '../../../base/browser/dom.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../common/accessibility.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\nlet AccessibilityService = class AccessibilityService extends Disposable {\n    constructor(_contextKeyService, _layoutService, _configurationService) {\n        super();\n        this._contextKeyService = _contextKeyService;\n        this._layoutService = _layoutService;\n        this._configurationService = _configurationService;\n        this._accessibilitySupport = 0 /* AccessibilitySupport.Unknown */;\n        this._onDidChangeScreenReaderOptimized = new Emitter();\n        this._onDidChangeReducedMotion = new Emitter();\n        this._accessibilityModeEnabledContext = CONTEXT_ACCESSIBILITY_MODE_ENABLED.bindTo(this._contextKeyService);\n        const updateContextKey = () => this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('editor.accessibilitySupport')) {\n                updateContextKey();\n                this._onDidChangeScreenReaderOptimized.fire();\n            }\n            if (e.affectsConfiguration('workbench.reduceMotion')) {\n                this._configMotionReduced = this._configurationService.getValue('workbench.reduceMotion');\n                this._onDidChangeReducedMotion.fire();\n            }\n        }));\n        updateContextKey();\n        this._register(this.onDidChangeScreenReaderOptimized(() => updateContextKey()));\n        const reduceMotionMatcher = mainWindow.matchMedia(`(prefers-reduced-motion: reduce)`);\n        this._systemMotionReduced = reduceMotionMatcher.matches;\n        this._configMotionReduced = this._configurationService.getValue('workbench.reduceMotion');\n        this.initReducedMotionListeners(reduceMotionMatcher);\n    }\n    initReducedMotionListeners(reduceMotionMatcher) {\n        this._register(addDisposableListener(reduceMotionMatcher, 'change', () => {\n            this._systemMotionReduced = reduceMotionMatcher.matches;\n            if (this._configMotionReduced === 'auto') {\n                this._onDidChangeReducedMotion.fire();\n            }\n        }));\n        const updateRootClasses = () => {\n            const reduce = this.isMotionReduced();\n            this._layoutService.mainContainer.classList.toggle('reduce-motion', reduce);\n            this._layoutService.mainContainer.classList.toggle('enable-motion', !reduce);\n        };\n        updateRootClasses();\n        this._register(this.onDidChangeReducedMotion(() => updateRootClasses()));\n    }\n    get onDidChangeScreenReaderOptimized() {\n        return this._onDidChangeScreenReaderOptimized.event;\n    }\n    isScreenReaderOptimized() {\n        const config = this._configurationService.getValue('editor.accessibilitySupport');\n        return config === 'on' || (config === 'auto' && this._accessibilitySupport === 2 /* AccessibilitySupport.Enabled */);\n    }\n    get onDidChangeReducedMotion() {\n        return this._onDidChangeReducedMotion.event;\n    }\n    isMotionReduced() {\n        const config = this._configMotionReduced;\n        return config === 'on' || (config === 'auto' && this._systemMotionReduced);\n    }\n    getAccessibilitySupport() {\n        return this._accessibilitySupport;\n    }\n};\nAccessibilityService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ILayoutService),\n    __param(2, IConfigurationService)\n], AccessibilityService);\nexport { AccessibilityService };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar PersistedMenuHideState_1, MenuInfo_1;\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { DebounceEmitter, Emitter } from '../../../base/common/event.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { isIMenuItem, isISubmenuItem, MenuItemAction, MenuRegistry, SubmenuItemAction } from './actions.js';\nimport { ICommandService } from '../../commands/common/commands.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { Separator, toAction } from '../../../base/common/actions.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { removeFastWithoutKeepingOrder } from '../../../base/common/arrays.js';\nimport { localize } from '../../../nls.js';\nlet MenuService = class MenuService {\n    constructor(_commandService, storageService) {\n        this._commandService = _commandService;\n        this._hiddenStates = new PersistedMenuHideState(storageService);\n    }\n    createMenu(id, contextKeyService, options) {\n        return new MenuImpl(id, this._hiddenStates, { emitEventsForSubmenuChanges: false, eventDebounceDelay: 50, ...options }, this._commandService, contextKeyService);\n    }\n    resetHiddenStates(ids) {\n        this._hiddenStates.reset(ids);\n    }\n};\nMenuService = __decorate([\n    __param(0, ICommandService),\n    __param(1, IStorageService)\n], MenuService);\nexport { MenuService };\nlet PersistedMenuHideState = PersistedMenuHideState_1 = class PersistedMenuHideState {\n    constructor(_storageService) {\n        this._storageService = _storageService;\n        this._disposables = new DisposableStore();\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._ignoreChangeEvent = false;\n        this._hiddenByDefaultCache = new Map();\n        try {\n            const raw = _storageService.get(PersistedMenuHideState_1._key, 0 /* StorageScope.PROFILE */, '{}');\n            this._data = JSON.parse(raw);\n        }\n        catch (err) {\n            this._data = Object.create(null);\n        }\n        this._disposables.add(_storageService.onDidChangeValue(0 /* StorageScope.PROFILE */, PersistedMenuHideState_1._key, this._disposables)(() => {\n            if (!this._ignoreChangeEvent) {\n                try {\n                    const raw = _storageService.get(PersistedMenuHideState_1._key, 0 /* StorageScope.PROFILE */, '{}');\n                    this._data = JSON.parse(raw);\n                }\n                catch (err) {\n                    console.log('FAILED to read storage after UPDATE', err);\n                }\n            }\n            this._onDidChange.fire();\n        }));\n    }\n    dispose() {\n        this._onDidChange.dispose();\n        this._disposables.dispose();\n    }\n    _isHiddenByDefault(menu, commandId) {\n        var _a;\n        return (_a = this._hiddenByDefaultCache.get(`${menu.id}/${commandId}`)) !== null && _a !== void 0 ? _a : false;\n    }\n    setDefaultState(menu, commandId, hidden) {\n        this._hiddenByDefaultCache.set(`${menu.id}/${commandId}`, hidden);\n    }\n    isHidden(menu, commandId) {\n        var _a, _b;\n        const hiddenByDefault = this._isHiddenByDefault(menu, commandId);\n        const state = (_b = (_a = this._data[menu.id]) === null || _a === void 0 ? void 0 : _a.includes(commandId)) !== null && _b !== void 0 ? _b : false;\n        return hiddenByDefault ? !state : state;\n    }\n    updateHidden(menu, commandId, hidden) {\n        const hiddenByDefault = this._isHiddenByDefault(menu, commandId);\n        if (hiddenByDefault) {\n            hidden = !hidden;\n        }\n        const entries = this._data[menu.id];\n        if (!hidden) {\n            // remove and cleanup\n            if (entries) {\n                const idx = entries.indexOf(commandId);\n                if (idx >= 0) {\n                    removeFastWithoutKeepingOrder(entries, idx);\n                }\n                if (entries.length === 0) {\n                    delete this._data[menu.id];\n                }\n            }\n        }\n        else {\n            // add unless already added\n            if (!entries) {\n                this._data[menu.id] = [commandId];\n            }\n            else {\n                const idx = entries.indexOf(commandId);\n                if (idx < 0) {\n                    entries.push(commandId);\n                }\n            }\n        }\n        this._persist();\n    }\n    reset(menus) {\n        if (menus === undefined) {\n            // reset all\n            this._data = Object.create(null);\n            this._persist();\n        }\n        else {\n            // reset only for a specific menu\n            for (const { id } of menus) {\n                if (this._data[id]) {\n                    delete this._data[id];\n                }\n            }\n            this._persist();\n        }\n    }\n    _persist() {\n        try {\n            this._ignoreChangeEvent = true;\n            const raw = JSON.stringify(this._data);\n            this._storageService.store(PersistedMenuHideState_1._key, raw, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n        }\n        finally {\n            this._ignoreChangeEvent = false;\n        }\n    }\n};\nPersistedMenuHideState._key = 'menu.hiddenCommands';\nPersistedMenuHideState = PersistedMenuHideState_1 = __decorate([\n    __param(0, IStorageService)\n], PersistedMenuHideState);\nlet MenuInfo = MenuInfo_1 = class MenuInfo {\n    constructor(_id, _hiddenStates, _collectContextKeysForSubmenus, _commandService, _contextKeyService) {\n        this._id = _id;\n        this._hiddenStates = _hiddenStates;\n        this._collectContextKeysForSubmenus = _collectContextKeysForSubmenus;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._menuGroups = [];\n        this._structureContextKeys = new Set();\n        this._preconditionContextKeys = new Set();\n        this._toggledContextKeys = new Set();\n        this.refresh();\n    }\n    get structureContextKeys() {\n        return this._structureContextKeys;\n    }\n    get preconditionContextKeys() {\n        return this._preconditionContextKeys;\n    }\n    get toggledContextKeys() {\n        return this._toggledContextKeys;\n    }\n    refresh() {\n        // reset\n        this._menuGroups.length = 0;\n        this._structureContextKeys.clear();\n        this._preconditionContextKeys.clear();\n        this._toggledContextKeys.clear();\n        const menuItems = MenuRegistry.getMenuItems(this._id);\n        let group;\n        menuItems.sort(MenuInfo_1._compareMenuItems);\n        for (const item of menuItems) {\n            // group by groupId\n            const groupName = item.group || '';\n            if (!group || group[0] !== groupName) {\n                group = [groupName, []];\n                this._menuGroups.push(group);\n            }\n            group[1].push(item);\n            // keep keys for eventing\n            this._collectContextKeys(item);\n        }\n    }\n    _collectContextKeys(item) {\n        MenuInfo_1._fillInKbExprKeys(item.when, this._structureContextKeys);\n        if (isIMenuItem(item)) {\n            // keep precondition keys for event if applicable\n            if (item.command.precondition) {\n                MenuInfo_1._fillInKbExprKeys(item.command.precondition, this._preconditionContextKeys);\n            }\n            // keep toggled keys for event if applicable\n            if (item.command.toggled) {\n                const toggledExpression = item.command.toggled.condition || item.command.toggled;\n                MenuInfo_1._fillInKbExprKeys(toggledExpression, this._toggledContextKeys);\n            }\n        }\n        else if (this._collectContextKeysForSubmenus) {\n            // recursively collect context keys from submenus so that this\n            // menu fires events when context key changes affect submenus\n            MenuRegistry.getMenuItems(item.submenu).forEach(this._collectContextKeys, this);\n        }\n    }\n    createActionGroups(options) {\n        const result = [];\n        for (const group of this._menuGroups) {\n            const [id, items] = group;\n            const activeActions = [];\n            for (const item of items) {\n                if (this._contextKeyService.contextMatchesRules(item.when)) {\n                    const isMenuItem = isIMenuItem(item);\n                    if (isMenuItem) {\n                        this._hiddenStates.setDefaultState(this._id, item.command.id, !!item.isHiddenByDefault);\n                    }\n                    const menuHide = createMenuHide(this._id, isMenuItem ? item.command : item, this._hiddenStates);\n                    if (isMenuItem) {\n                        // MenuItemAction\n                        activeActions.push(new MenuItemAction(item.command, item.alt, options, menuHide, this._contextKeyService, this._commandService));\n                    }\n                    else {\n                        // SubmenuItemAction\n                        const groups = new MenuInfo_1(item.submenu, this._hiddenStates, this._collectContextKeysForSubmenus, this._commandService, this._contextKeyService).createActionGroups(options);\n                        const submenuActions = Separator.join(...groups.map(g => g[1]));\n                        if (submenuActions.length > 0) {\n                            activeActions.push(new SubmenuItemAction(item, menuHide, submenuActions));\n                        }\n                    }\n                }\n            }\n            if (activeActions.length > 0) {\n                result.push([id, activeActions]);\n            }\n        }\n        return result;\n    }\n    static _fillInKbExprKeys(exp, set) {\n        if (exp) {\n            for (const key of exp.keys()) {\n                set.add(key);\n            }\n        }\n    }\n    static _compareMenuItems(a, b) {\n        const aGroup = a.group;\n        const bGroup = b.group;\n        if (aGroup !== bGroup) {\n            // Falsy groups come last\n            if (!aGroup) {\n                return 1;\n            }\n            else if (!bGroup) {\n                return -1;\n            }\n            // 'navigation' group comes first\n            if (aGroup === 'navigation') {\n                return -1;\n            }\n            else if (bGroup === 'navigation') {\n                return 1;\n            }\n            // lexical sort for groups\n            const value = aGroup.localeCompare(bGroup);\n            if (value !== 0) {\n                return value;\n            }\n        }\n        // sort on priority - default is 0\n        const aPrio = a.order || 0;\n        const bPrio = b.order || 0;\n        if (aPrio < bPrio) {\n            return -1;\n        }\n        else if (aPrio > bPrio) {\n            return 1;\n        }\n        // sort on titles\n        return MenuInfo_1._compareTitles(isIMenuItem(a) ? a.command.title : a.title, isIMenuItem(b) ? b.command.title : b.title);\n    }\n    static _compareTitles(a, b) {\n        const aStr = typeof a === 'string' ? a : a.original;\n        const bStr = typeof b === 'string' ? b : b.original;\n        return aStr.localeCompare(bStr);\n    }\n};\nMenuInfo = MenuInfo_1 = __decorate([\n    __param(3, ICommandService),\n    __param(4, IContextKeyService)\n], MenuInfo);\nlet MenuImpl = class MenuImpl {\n    constructor(id, hiddenStates, options, commandService, contextKeyService) {\n        this._disposables = new DisposableStore();\n        this._menuInfo = new MenuInfo(id, hiddenStates, options.emitEventsForSubmenuChanges, commandService, contextKeyService);\n        // Rebuild this menu whenever the menu registry reports an event for this MenuId.\n        // This usually happen while code and extensions are loaded and affects the over\n        // structure of the menu\n        const rebuildMenuSoon = new RunOnceScheduler(() => {\n            this._menuInfo.refresh();\n            this._onDidChange.fire({ menu: this, isStructuralChange: true, isEnablementChange: true, isToggleChange: true });\n        }, options.eventDebounceDelay);\n        this._disposables.add(rebuildMenuSoon);\n        this._disposables.add(MenuRegistry.onDidChangeMenu(e => {\n            if (e.has(id)) {\n                rebuildMenuSoon.schedule();\n            }\n        }));\n        // When context keys or storage state changes we need to check if the menu also has changed. However,\n        // we only do that when someone listens on this menu because (1) these events are\n        // firing often and (2) menu are often leaked\n        const lazyListener = this._disposables.add(new DisposableStore());\n        const merge = (events) => {\n            let isStructuralChange = false;\n            let isEnablementChange = false;\n            let isToggleChange = false;\n            for (const item of events) {\n                isStructuralChange = isStructuralChange || item.isStructuralChange;\n                isEnablementChange = isEnablementChange || item.isEnablementChange;\n                isToggleChange = isToggleChange || item.isToggleChange;\n                if (isStructuralChange && isEnablementChange && isToggleChange) {\n                    // everything is TRUE, no need to continue iterating\n                    break;\n                }\n            }\n            return { menu: this, isStructuralChange, isEnablementChange, isToggleChange };\n        };\n        const startLazyListener = () => {\n            lazyListener.add(contextKeyService.onDidChangeContext(e => {\n                const isStructuralChange = e.affectsSome(this._menuInfo.structureContextKeys);\n                const isEnablementChange = e.affectsSome(this._menuInfo.preconditionContextKeys);\n                const isToggleChange = e.affectsSome(this._menuInfo.toggledContextKeys);\n                if (isStructuralChange || isEnablementChange || isToggleChange) {\n                    this._onDidChange.fire({ menu: this, isStructuralChange, isEnablementChange, isToggleChange });\n                }\n            }));\n            lazyListener.add(hiddenStates.onDidChange(e => {\n                this._onDidChange.fire({ menu: this, isStructuralChange: true, isEnablementChange: false, isToggleChange: false });\n            }));\n        };\n        this._onDidChange = new DebounceEmitter({\n            // start/stop context key listener\n            onWillAddFirstListener: startLazyListener,\n            onDidRemoveLastListener: lazyListener.clear.bind(lazyListener),\n            delay: options.eventDebounceDelay,\n            merge\n        });\n        this.onDidChange = this._onDidChange.event;\n    }\n    getActions(options) {\n        return this._menuInfo.createActionGroups(options);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._onDidChange.dispose();\n    }\n};\nMenuImpl = __decorate([\n    __param(3, ICommandService),\n    __param(4, IContextKeyService)\n], MenuImpl);\nfunction createMenuHide(menu, command, states) {\n    const id = isISubmenuItem(command) ? command.submenu.id : command.id;\n    const title = typeof command.title === 'string' ? command.title : command.title.value;\n    const hide = toAction({\n        id: `hide/${menu.id}/${id}`,\n        label: localize('hide.label', 'Hide \\'{0}\\'', title),\n        run() { states.updateHidden(menu, id, true); }\n    });\n    const toggle = toAction({\n        id: `toggle/${menu.id}/${id}`,\n        label: title,\n        get checked() { return !states.isHidden(menu, id); },\n        run() { states.updateHidden(menu, id, !!this.checked); }\n    });\n    return {\n        hide,\n        toggle,\n        get isHidden() { return !toggle.checked; },\n    };\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { isSafari, isWebkitWebView } from '../../../base/browser/browser.js';\nimport { $, addDisposableListener, getActiveDocument } from '../../../base/browser/dom.js';\nimport { DeferredPromise } from '../../../base/common/async.js';\nimport { Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\nimport { ILogService } from '../../log/common/log.js';\nlet BrowserClipboardService = class BrowserClipboardService extends Disposable {\n    constructor(layoutService, logService) {\n        super();\n        this.layoutService = layoutService;\n        this.logService = logService;\n        this.mapTextToType = new Map(); // unsupported in web (only in-memory)\n        this.findText = ''; // unsupported in web (only in-memory)\n        this.resources = []; // unsupported in web (only in-memory)\n        if (isSafari || isWebkitWebView) {\n            this.installWebKitWriteTextWorkaround();\n        }\n    }\n    // In Safari, it has the following note:\n    //\n    // \"The request to write to the clipboard must be triggered during a user gesture.\n    // A call to clipboard.write or clipboard.writeText outside the scope of a user\n    // gesture(such as \"click\" or \"touch\" event handlers) will result in the immediate\n    // rejection of the promise returned by the API call.\"\n    // From: https://webkit.org/blog/10855/async-clipboard-api/\n    //\n    // Since extensions run in a web worker, and handle gestures in an asynchronous way,\n    // they are not classified by Safari as \"in response to a user gesture\" and will reject.\n    //\n    // This function sets up some handlers to work around that behavior.\n    installWebKitWriteTextWorkaround() {\n        const handler = () => {\n            const currentWritePromise = new DeferredPromise();\n            // Cancel the previous promise since we just created a new one in response to this new event\n            if (this.webKitPendingClipboardWritePromise && !this.webKitPendingClipboardWritePromise.isSettled) {\n                this.webKitPendingClipboardWritePromise.cancel();\n            }\n            this.webKitPendingClipboardWritePromise = currentWritePromise;\n            // The ctor of ClipboardItem allows you to pass in a promise that will resolve to a string.\n            // This allows us to pass in a Promise that will either be cancelled by another event or\n            // resolved with the contents of the first call to this.writeText.\n            // see https://developer.mozilla.org/en-US/docs/Web/API/ClipboardItem/ClipboardItem#parameters\n            navigator.clipboard.write([new ClipboardItem({\n                    'text/plain': currentWritePromise.p,\n                })]).catch(async (err) => {\n                if (!(err instanceof Error) || err.name !== 'NotAllowedError' || !currentWritePromise.isRejected) {\n                    this.logService.error(err);\n                }\n            });\n        };\n        this._register(Event.runAndSubscribe(this.layoutService.onDidAddContainer, ({ container, disposables }) => {\n            disposables.add(addDisposableListener(container, 'click', handler));\n            disposables.add(addDisposableListener(container, 'keydown', handler));\n        }, { container: this.layoutService.mainContainer, disposables: this._store }));\n    }\n    async writeText(text, type) {\n        // With type: only in-memory is supported\n        if (type) {\n            this.mapTextToType.set(type, text);\n            return;\n        }\n        if (this.webKitPendingClipboardWritePromise) {\n            // For Safari, we complete this Promise which allows the call to `navigator.clipboard.write()`\n            // above to resolve and successfully copy to the clipboard. If we let this continue, Safari\n            // would throw an error because this call stack doesn't appear to originate from a user gesture.\n            return this.webKitPendingClipboardWritePromise.complete(text);\n        }\n        // Guard access to navigator.clipboard with try/catch\n        // as we have seen DOMExceptions in certain browsers\n        // due to security policies.\n        try {\n            return await navigator.clipboard.writeText(text);\n        }\n        catch (error) {\n            console.error(error);\n        }\n        // Fallback to textarea and execCommand solution\n        const activeDocument = getActiveDocument();\n        const activeElement = activeDocument.activeElement;\n        const textArea = activeDocument.body.appendChild($('textarea', { 'aria-hidden': true }));\n        textArea.style.height = '1px';\n        textArea.style.width = '1px';\n        textArea.style.position = 'absolute';\n        textArea.value = text;\n        textArea.focus();\n        textArea.select();\n        activeDocument.execCommand('copy');\n        if (activeElement instanceof HTMLElement) {\n            activeElement.focus();\n        }\n        activeDocument.body.removeChild(textArea);\n        return;\n    }\n    async readText(type) {\n        // With type: only in-memory is supported\n        if (type) {\n            return this.mapTextToType.get(type) || '';\n        }\n        // Guard access to navigator.clipboard with try/catch\n        // as we have seen DOMExceptions in certain browsers\n        // due to security policies.\n        try {\n            return await navigator.clipboard.readText();\n        }\n        catch (error) {\n            console.error(error);\n            return '';\n        }\n    }\n    async readFindText() {\n        return this.findText;\n    }\n    async writeFindText(text) {\n        this.findText = text;\n    }\n    async writeResources(resources) {\n        this.resources = resources;\n    }\n    async readResources() {\n        return this.resources;\n    }\n};\nBrowserClipboardService = __decorate([\n    __param(0, ILayoutService),\n    __param(1, ILogService)\n], BrowserClipboardService);\nexport { BrowserClipboardService };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { PauseableEmitter } from '../../../base/common/event.js';\nimport { Iterable } from '../../../base/common/iterator.js';\nimport { Disposable, MutableDisposable } from '../../../base/common/lifecycle.js';\nimport { cloneAndChange } from '../../../base/common/objects.js';\nimport { TernarySearchTree } from '../../../base/common/ternarySearchTree.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { localize } from '../../../nls.js';\nimport { CommandsRegistry } from '../../commands/common/commands.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IContextKeyService, RawContextKey } from '../common/contextkey.js';\nconst KEYBINDING_CONTEXT_ATTR = 'data-keybinding-context';\nexport class Context {\n    constructor(id, parent) {\n        this._id = id;\n        this._parent = parent;\n        this._value = Object.create(null);\n        this._value['_contextId'] = id;\n    }\n    get value() {\n        return { ...this._value };\n    }\n    setValue(key, value) {\n        // console.log('SET ' + key + ' = ' + value + ' ON ' + this._id);\n        if (this._value[key] !== value) {\n            this._value[key] = value;\n            return true;\n        }\n        return false;\n    }\n    removeValue(key) {\n        // console.log('REMOVE ' + key + ' FROM ' + this._id);\n        if (key in this._value) {\n            delete this._value[key];\n            return true;\n        }\n        return false;\n    }\n    getValue(key) {\n        const ret = this._value[key];\n        if (typeof ret === 'undefined' && this._parent) {\n            return this._parent.getValue(key);\n        }\n        return ret;\n    }\n}\nclass NullContext extends Context {\n    constructor() {\n        super(-1, null);\n    }\n    setValue(key, value) {\n        return false;\n    }\n    removeValue(key) {\n        return false;\n    }\n    getValue(key) {\n        return undefined;\n    }\n}\nNullContext.INSTANCE = new NullContext();\nclass ConfigAwareContextValuesContainer extends Context {\n    constructor(id, _configurationService, emitter) {\n        super(id, null);\n        this._configurationService = _configurationService;\n        this._values = TernarySearchTree.forConfigKeys();\n        this._listener = this._configurationService.onDidChangeConfiguration(event => {\n            if (event.source === 7 /* ConfigurationTarget.DEFAULT */) {\n                // new setting, reset everything\n                const allKeys = Array.from(this._values, ([k]) => k);\n                this._values.clear();\n                emitter.fire(new ArrayContextKeyChangeEvent(allKeys));\n            }\n            else {\n                const changedKeys = [];\n                for (const configKey of event.affectedKeys) {\n                    const contextKey = `config.${configKey}`;\n                    const cachedItems = this._values.findSuperstr(contextKey);\n                    if (cachedItems !== undefined) {\n                        changedKeys.push(...Iterable.map(cachedItems, ([key]) => key));\n                        this._values.deleteSuperstr(contextKey);\n                    }\n                    if (this._values.has(contextKey)) {\n                        changedKeys.push(contextKey);\n                        this._values.delete(contextKey);\n                    }\n                }\n                emitter.fire(new ArrayContextKeyChangeEvent(changedKeys));\n            }\n        });\n    }\n    dispose() {\n        this._listener.dispose();\n    }\n    getValue(key) {\n        if (key.indexOf(ConfigAwareContextValuesContainer._keyPrefix) !== 0) {\n            return super.getValue(key);\n        }\n        if (this._values.has(key)) {\n            return this._values.get(key);\n        }\n        const configKey = key.substr(ConfigAwareContextValuesContainer._keyPrefix.length);\n        const configValue = this._configurationService.getValue(configKey);\n        let value = undefined;\n        switch (typeof configValue) {\n            case 'number':\n            case 'boolean':\n            case 'string':\n                value = configValue;\n                break;\n            default:\n                if (Array.isArray(configValue)) {\n                    value = JSON.stringify(configValue);\n                }\n                else {\n                    value = configValue;\n                }\n        }\n        this._values.set(key, value);\n        return value;\n    }\n    setValue(key, value) {\n        return super.setValue(key, value);\n    }\n    removeValue(key) {\n        return super.removeValue(key);\n    }\n}\nConfigAwareContextValuesContainer._keyPrefix = 'config.';\nclass ContextKey {\n    constructor(service, key, defaultValue) {\n        this._service = service;\n        this._key = key;\n        this._defaultValue = defaultValue;\n        this.reset();\n    }\n    set(value) {\n        this._service.setContext(this._key, value);\n    }\n    reset() {\n        if (typeof this._defaultValue === 'undefined') {\n            this._service.removeContext(this._key);\n        }\n        else {\n            this._service.setContext(this._key, this._defaultValue);\n        }\n    }\n    get() {\n        return this._service.getContextKeyValue(this._key);\n    }\n}\nclass SimpleContextKeyChangeEvent {\n    constructor(key) {\n        this.key = key;\n    }\n    affectsSome(keys) {\n        return keys.has(this.key);\n    }\n    allKeysContainedIn(keys) {\n        return this.affectsSome(keys);\n    }\n}\nclass ArrayContextKeyChangeEvent {\n    constructor(keys) {\n        this.keys = keys;\n    }\n    affectsSome(keys) {\n        for (const key of this.keys) {\n            if (keys.has(key)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    allKeysContainedIn(keys) {\n        return this.keys.every(key => keys.has(key));\n    }\n}\nclass CompositeContextKeyChangeEvent {\n    constructor(events) {\n        this.events = events;\n    }\n    affectsSome(keys) {\n        for (const e of this.events) {\n            if (e.affectsSome(keys)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    allKeysContainedIn(keys) {\n        return this.events.every(evt => evt.allKeysContainedIn(keys));\n    }\n}\nfunction allEventKeysInContext(event, context) {\n    return event.allKeysContainedIn(new Set(Object.keys(context)));\n}\nexport class AbstractContextKeyService extends Disposable {\n    constructor(myContextId) {\n        super();\n        this._onDidChangeContext = this._register(new PauseableEmitter({ merge: input => new CompositeContextKeyChangeEvent(input) }));\n        this.onDidChangeContext = this._onDidChangeContext.event;\n        this._isDisposed = false;\n        this._myContextId = myContextId;\n    }\n    createKey(key, defaultValue) {\n        if (this._isDisposed) {\n            throw new Error(`AbstractContextKeyService has been disposed`);\n        }\n        return new ContextKey(this, key, defaultValue);\n    }\n    bufferChangeEvents(callback) {\n        this._onDidChangeContext.pause();\n        try {\n            callback();\n        }\n        finally {\n            this._onDidChangeContext.resume();\n        }\n    }\n    createScoped(domNode) {\n        if (this._isDisposed) {\n            throw new Error(`AbstractContextKeyService has been disposed`);\n        }\n        return new ScopedContextKeyService(this, domNode);\n    }\n    contextMatchesRules(rules) {\n        if (this._isDisposed) {\n            throw new Error(`AbstractContextKeyService has been disposed`);\n        }\n        const context = this.getContextValuesContainer(this._myContextId);\n        const result = (rules ? rules.evaluate(context) : true);\n        // console.group(rules.serialize() + ' -> ' + result);\n        // rules.keys().forEach(key => { console.log(key, ctx[key]); });\n        // console.groupEnd();\n        return result;\n    }\n    getContextKeyValue(key) {\n        if (this._isDisposed) {\n            return undefined;\n        }\n        return this.getContextValuesContainer(this._myContextId).getValue(key);\n    }\n    setContext(key, value) {\n        if (this._isDisposed) {\n            return;\n        }\n        const myContext = this.getContextValuesContainer(this._myContextId);\n        if (!myContext) {\n            return;\n        }\n        if (myContext.setValue(key, value)) {\n            this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\n        }\n    }\n    removeContext(key) {\n        if (this._isDisposed) {\n            return;\n        }\n        if (this.getContextValuesContainer(this._myContextId).removeValue(key)) {\n            this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\n        }\n    }\n    getContext(target) {\n        if (this._isDisposed) {\n            return NullContext.INSTANCE;\n        }\n        return this.getContextValuesContainer(findContextAttr(target));\n    }\n    dispose() {\n        super.dispose();\n        this._isDisposed = true;\n    }\n}\nlet ContextKeyService = class ContextKeyService extends AbstractContextKeyService {\n    constructor(configurationService) {\n        super(0);\n        this._contexts = new Map();\n        this._lastContextId = 0;\n        const myContext = this._register(new ConfigAwareContextValuesContainer(this._myContextId, configurationService, this._onDidChangeContext));\n        this._contexts.set(this._myContextId, myContext);\n        // Uncomment this to see the contexts continuously logged\n        // let lastLoggedValue: string | null = null;\n        // setInterval(() => {\n        // \tlet values = Object.keys(this._contexts).map((key) => this._contexts[key]);\n        // \tlet logValue = values.map(v => JSON.stringify(v._value, null, '\\t')).join('\\n');\n        // \tif (lastLoggedValue !== logValue) {\n        // \t\tlastLoggedValue = logValue;\n        // \t\tconsole.log(lastLoggedValue);\n        // \t}\n        // }, 2000);\n    }\n    getContextValuesContainer(contextId) {\n        if (this._isDisposed) {\n            return NullContext.INSTANCE;\n        }\n        return this._contexts.get(contextId) || NullContext.INSTANCE;\n    }\n    createChildContext(parentContextId = this._myContextId) {\n        if (this._isDisposed) {\n            throw new Error(`ContextKeyService has been disposed`);\n        }\n        const id = (++this._lastContextId);\n        this._contexts.set(id, new Context(id, this.getContextValuesContainer(parentContextId)));\n        return id;\n    }\n    disposeContext(contextId) {\n        if (!this._isDisposed) {\n            this._contexts.delete(contextId);\n        }\n    }\n};\nContextKeyService = __decorate([\n    __param(0, IConfigurationService)\n], ContextKeyService);\nexport { ContextKeyService };\nclass ScopedContextKeyService extends AbstractContextKeyService {\n    constructor(parent, domNode) {\n        super(parent.createChildContext());\n        this._parentChangeListener = this._register(new MutableDisposable());\n        this._parent = parent;\n        this._updateParentChangeListener();\n        this._domNode = domNode;\n        if (this._domNode.hasAttribute(KEYBINDING_CONTEXT_ATTR)) {\n            let extraInfo = '';\n            if (this._domNode.classList) {\n                extraInfo = Array.from(this._domNode.classList.values()).join(', ');\n            }\n            console.error(`Element already has context attribute${extraInfo ? ': ' + extraInfo : ''}`);\n        }\n        this._domNode.setAttribute(KEYBINDING_CONTEXT_ATTR, String(this._myContextId));\n    }\n    _updateParentChangeListener() {\n        // Forward parent events to this listener. Parent will change.\n        this._parentChangeListener.value = this._parent.onDidChangeContext(e => {\n            const thisContainer = this._parent.getContextValuesContainer(this._myContextId);\n            const thisContextValues = thisContainer.value;\n            if (!allEventKeysInContext(e, thisContextValues)) {\n                this._onDidChangeContext.fire(e);\n            }\n        });\n    }\n    dispose() {\n        if (this._isDisposed) {\n            return;\n        }\n        this._parent.disposeContext(this._myContextId);\n        this._domNode.removeAttribute(KEYBINDING_CONTEXT_ATTR);\n        super.dispose();\n    }\n    getContextValuesContainer(contextId) {\n        if (this._isDisposed) {\n            return NullContext.INSTANCE;\n        }\n        return this._parent.getContextValuesContainer(contextId);\n    }\n    createChildContext(parentContextId = this._myContextId) {\n        if (this._isDisposed) {\n            throw new Error(`ScopedContextKeyService has been disposed`);\n        }\n        return this._parent.createChildContext(parentContextId);\n    }\n    disposeContext(contextId) {\n        if (this._isDisposed) {\n            return;\n        }\n        this._parent.disposeContext(contextId);\n    }\n}\nfunction findContextAttr(domNode) {\n    while (domNode) {\n        if (domNode.hasAttribute(KEYBINDING_CONTEXT_ATTR)) {\n            const attr = domNode.getAttribute(KEYBINDING_CONTEXT_ATTR);\n            if (attr) {\n                return parseInt(attr, 10);\n            }\n            return NaN;\n        }\n        domNode = domNode.parentElement;\n    }\n    return 0;\n}\nexport function setContext(accessor, contextKey, contextValue) {\n    const contextKeyService = accessor.get(IContextKeyService);\n    contextKeyService.createKey(String(contextKey), stringifyURIs(contextValue));\n}\nfunction stringifyURIs(contextValue) {\n    return cloneAndChange(contextValue, (obj) => {\n        if (typeof obj === 'object' && obj.$mid === 1 /* MarshalledId.Uri */) {\n            return URI.revive(obj).toString();\n        }\n        if (obj instanceof URI) {\n            return obj.toString();\n        }\n        return undefined;\n    });\n}\nCommandsRegistry.registerCommand('_setContext', setContext);\nCommandsRegistry.registerCommand({\n    id: 'getContextKeyInfo',\n    handler() {\n        return [...RawContextKey.all()].sort((a, b) => a.key.localeCompare(b.key));\n    },\n    metadata: {\n        description: localize('getContextKeyInfo', \"A command that returns information about context keys\"),\n        args: []\n    }\n});\nCommandsRegistry.registerCommand('_generateContextKeyInfo', function () {\n    const result = [];\n    const seen = new Set();\n    for (const info of RawContextKey.all()) {\n        if (!seen.has(info.key)) {\n            seen.add(info.key);\n            result.push(info);\n        }\n    }\n    result.sort((a, b) => a.key.localeCompare(b.key));\n    console.log(JSON.stringify(result, undefined, 2));\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Node {\n    constructor(key, data) {\n        this.key = key;\n        this.data = data;\n        this.incoming = new Map();\n        this.outgoing = new Map();\n    }\n}\nexport class Graph {\n    constructor(_hashFn) {\n        this._hashFn = _hashFn;\n        this._nodes = new Map();\n        // empty\n    }\n    roots() {\n        const ret = [];\n        for (const node of this._nodes.values()) {\n            if (node.outgoing.size === 0) {\n                ret.push(node);\n            }\n        }\n        return ret;\n    }\n    insertEdge(from, to) {\n        const fromNode = this.lookupOrInsertNode(from);\n        const toNode = this.lookupOrInsertNode(to);\n        fromNode.outgoing.set(toNode.key, toNode);\n        toNode.incoming.set(fromNode.key, fromNode);\n    }\n    removeNode(data) {\n        const key = this._hashFn(data);\n        this._nodes.delete(key);\n        for (const node of this._nodes.values()) {\n            node.outgoing.delete(key);\n            node.incoming.delete(key);\n        }\n    }\n    lookupOrInsertNode(data) {\n        const key = this._hashFn(data);\n        let node = this._nodes.get(key);\n        if (!node) {\n            node = new Node(key, data);\n            this._nodes.set(key, node);\n        }\n        return node;\n    }\n    isEmpty() {\n        return this._nodes.size === 0;\n    }\n    toString() {\n        const data = [];\n        for (const [key, value] of this._nodes) {\n            data.push(`${key}\\n\\t(-> incoming)[${[...value.incoming.keys()].join(', ')}]\\n\\t(outgoing ->)[${[...value.outgoing.keys()].join(',')}]\\n`);\n        }\n        return data.join('\\n');\n    }\n    /**\n     * This is brute force and slow and **only** be used\n     * to trouble shoot.\n     */\n    findCycleSlow() {\n        for (const [id, node] of this._nodes) {\n            const seen = new Set([id]);\n            const res = this._findCycle(node, seen);\n            if (res) {\n                return res;\n            }\n        }\n        return undefined;\n    }\n    _findCycle(node, seen) {\n        for (const [id, outgoing] of node.outgoing) {\n            if (seen.has(id)) {\n                return [...seen, id].join(' -> ');\n            }\n            seen.add(id);\n            const value = this._findCycle(outgoing, seen);\n            if (value) {\n                return value;\n            }\n            seen.delete(id);\n        }\n        return undefined;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { GlobalIdleValue } from '../../../base/common/async.js';\nimport { illegalState } from '../../../base/common/errors.js';\nimport { toDisposable } from '../../../base/common/lifecycle.js';\nimport { SyncDescriptor } from './descriptors.js';\nimport { Graph } from './graph.js';\nimport { IInstantiationService, _util } from './instantiation.js';\nimport { ServiceCollection } from './serviceCollection.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\n// TRACING\nconst _enableAllTracing = false;\nclass CyclicDependencyError extends Error {\n    constructor(graph) {\n        var _a;\n        super('cyclic dependency between services');\n        this.message = (_a = graph.findCycleSlow()) !== null && _a !== void 0 ? _a : `UNABLE to detect cycle, dumping graph: \\n${graph.toString()}`;\n    }\n}\nexport class InstantiationService {\n    constructor(_services = new ServiceCollection(), _strict = false, _parent, _enableTracing = _enableAllTracing) {\n        var _a;\n        this._services = _services;\n        this._strict = _strict;\n        this._parent = _parent;\n        this._enableTracing = _enableTracing;\n        this._activeInstantiations = new Set();\n        this._services.set(IInstantiationService, this);\n        this._globalGraph = _enableTracing ? (_a = _parent === null || _parent === void 0 ? void 0 : _parent._globalGraph) !== null && _a !== void 0 ? _a : new Graph(e => e) : undefined;\n    }\n    createChild(services) {\n        return new InstantiationService(services, this._strict, this, this._enableTracing);\n    }\n    invokeFunction(fn, ...args) {\n        const _trace = Trace.traceInvocation(this._enableTracing, fn);\n        let _done = false;\n        try {\n            const accessor = {\n                get: (id) => {\n                    if (_done) {\n                        throw illegalState('service accessor is only valid during the invocation of its target method');\n                    }\n                    const result = this._getOrCreateServiceInstance(id, _trace);\n                    if (!result) {\n                        throw new Error(`[invokeFunction] unknown service '${id}'`);\n                    }\n                    return result;\n                }\n            };\n            return fn(accessor, ...args);\n        }\n        finally {\n            _done = true;\n            _trace.stop();\n        }\n    }\n    createInstance(ctorOrDescriptor, ...rest) {\n        let _trace;\n        let result;\n        if (ctorOrDescriptor instanceof SyncDescriptor) {\n            _trace = Trace.traceCreation(this._enableTracing, ctorOrDescriptor.ctor);\n            result = this._createInstance(ctorOrDescriptor.ctor, ctorOrDescriptor.staticArguments.concat(rest), _trace);\n        }\n        else {\n            _trace = Trace.traceCreation(this._enableTracing, ctorOrDescriptor);\n            result = this._createInstance(ctorOrDescriptor, rest, _trace);\n        }\n        _trace.stop();\n        return result;\n    }\n    _createInstance(ctor, args = [], _trace) {\n        // arguments defined by service decorators\n        const serviceDependencies = _util.getServiceDependencies(ctor).sort((a, b) => a.index - b.index);\n        const serviceArgs = [];\n        for (const dependency of serviceDependencies) {\n            const service = this._getOrCreateServiceInstance(dependency.id, _trace);\n            if (!service) {\n                this._throwIfStrict(`[createInstance] ${ctor.name} depends on UNKNOWN service ${dependency.id}.`, false);\n            }\n            serviceArgs.push(service);\n        }\n        const firstServiceArgPos = serviceDependencies.length > 0 ? serviceDependencies[0].index : args.length;\n        // check for argument mismatches, adjust static args if needed\n        if (args.length !== firstServiceArgPos) {\n            console.trace(`[createInstance] First service dependency of ${ctor.name} at position ${firstServiceArgPos + 1} conflicts with ${args.length} static arguments`);\n            const delta = firstServiceArgPos - args.length;\n            if (delta > 0) {\n                args = args.concat(new Array(delta));\n            }\n            else {\n                args = args.slice(0, firstServiceArgPos);\n            }\n        }\n        // now create the instance\n        return Reflect.construct(ctor, args.concat(serviceArgs));\n    }\n    _setServiceInstance(id, instance) {\n        if (this._services.get(id) instanceof SyncDescriptor) {\n            this._services.set(id, instance);\n        }\n        else if (this._parent) {\n            this._parent._setServiceInstance(id, instance);\n        }\n        else {\n            throw new Error('illegalState - setting UNKNOWN service instance');\n        }\n    }\n    _getServiceInstanceOrDescriptor(id) {\n        const instanceOrDesc = this._services.get(id);\n        if (!instanceOrDesc && this._parent) {\n            return this._parent._getServiceInstanceOrDescriptor(id);\n        }\n        else {\n            return instanceOrDesc;\n        }\n    }\n    _getOrCreateServiceInstance(id, _trace) {\n        if (this._globalGraph && this._globalGraphImplicitDependency) {\n            this._globalGraph.insertEdge(this._globalGraphImplicitDependency, String(id));\n        }\n        const thing = this._getServiceInstanceOrDescriptor(id);\n        if (thing instanceof SyncDescriptor) {\n            return this._safeCreateAndCacheServiceInstance(id, thing, _trace.branch(id, true));\n        }\n        else {\n            _trace.branch(id, false);\n            return thing;\n        }\n    }\n    _safeCreateAndCacheServiceInstance(id, desc, _trace) {\n        if (this._activeInstantiations.has(id)) {\n            throw new Error(`illegal state - RECURSIVELY instantiating service '${id}'`);\n        }\n        this._activeInstantiations.add(id);\n        try {\n            return this._createAndCacheServiceInstance(id, desc, _trace);\n        }\n        finally {\n            this._activeInstantiations.delete(id);\n        }\n    }\n    _createAndCacheServiceInstance(id, desc, _trace) {\n        var _a;\n        const graph = new Graph(data => data.id.toString());\n        let cycleCount = 0;\n        const stack = [{ id, desc, _trace }];\n        while (stack.length) {\n            const item = stack.pop();\n            graph.lookupOrInsertNode(item);\n            // a weak but working heuristic for cycle checks\n            if (cycleCount++ > 1000) {\n                throw new CyclicDependencyError(graph);\n            }\n            // check all dependencies for existence and if they need to be created first\n            for (const dependency of _util.getServiceDependencies(item.desc.ctor)) {\n                const instanceOrDesc = this._getServiceInstanceOrDescriptor(dependency.id);\n                if (!instanceOrDesc) {\n                    this._throwIfStrict(`[createInstance] ${id} depends on ${dependency.id} which is NOT registered.`, true);\n                }\n                // take note of all service dependencies\n                (_a = this._globalGraph) === null || _a === void 0 ? void 0 : _a.insertEdge(String(item.id), String(dependency.id));\n                if (instanceOrDesc instanceof SyncDescriptor) {\n                    const d = { id: dependency.id, desc: instanceOrDesc, _trace: item._trace.branch(dependency.id, true) };\n                    graph.insertEdge(item, d);\n                    stack.push(d);\n                }\n            }\n        }\n        while (true) {\n            const roots = graph.roots();\n            // if there is no more roots but still\n            // nodes in the graph we have a cycle\n            if (roots.length === 0) {\n                if (!graph.isEmpty()) {\n                    throw new CyclicDependencyError(graph);\n                }\n                break;\n            }\n            for (const { data } of roots) {\n                // Repeat the check for this still being a service sync descriptor. That's because\n                // instantiating a dependency might have side-effect and recursively trigger instantiation\n                // so that some dependencies are now fullfilled already.\n                const instanceOrDesc = this._getServiceInstanceOrDescriptor(data.id);\n                if (instanceOrDesc instanceof SyncDescriptor) {\n                    // create instance and overwrite the service collections\n                    const instance = this._createServiceInstanceWithOwner(data.id, data.desc.ctor, data.desc.staticArguments, data.desc.supportsDelayedInstantiation, data._trace);\n                    this._setServiceInstance(data.id, instance);\n                }\n                graph.removeNode(data);\n            }\n        }\n        return this._getServiceInstanceOrDescriptor(id);\n    }\n    _createServiceInstanceWithOwner(id, ctor, args = [], supportsDelayedInstantiation, _trace) {\n        if (this._services.get(id) instanceof SyncDescriptor) {\n            return this._createServiceInstance(id, ctor, args, supportsDelayedInstantiation, _trace);\n        }\n        else if (this._parent) {\n            return this._parent._createServiceInstanceWithOwner(id, ctor, args, supportsDelayedInstantiation, _trace);\n        }\n        else {\n            throw new Error(`illegalState - creating UNKNOWN service instance ${ctor.name}`);\n        }\n    }\n    _createServiceInstance(id, ctor, args = [], supportsDelayedInstantiation, _trace) {\n        if (!supportsDelayedInstantiation) {\n            // eager instantiation\n            return this._createInstance(ctor, args, _trace);\n        }\n        else {\n            const child = new InstantiationService(undefined, this._strict, this, this._enableTracing);\n            child._globalGraphImplicitDependency = String(id);\n            // Return a proxy object that's backed by an idle value. That\n            // strategy is to instantiate services in our idle time or when actually\n            // needed but not when injected into a consumer\n            // return \"empty events\" when the service isn't instantiated yet\n            const earlyListeners = new Map();\n            const idle = new GlobalIdleValue(() => {\n                const result = child._createInstance(ctor, args, _trace);\n                // early listeners that we kept are now being subscribed to\n                // the real service\n                for (const [key, values] of earlyListeners) {\n                    const candidate = result[key];\n                    if (typeof candidate === 'function') {\n                        for (const listener of values) {\n                            candidate.apply(result, listener);\n                        }\n                    }\n                }\n                earlyListeners.clear();\n                return result;\n            });\n            return new Proxy(Object.create(null), {\n                get(target, key) {\n                    if (!idle.isInitialized) {\n                        // looks like an event\n                        if (typeof key === 'string' && (key.startsWith('onDid') || key.startsWith('onWill'))) {\n                            let list = earlyListeners.get(key);\n                            if (!list) {\n                                list = new LinkedList();\n                                earlyListeners.set(key, list);\n                            }\n                            const event = (callback, thisArg, disposables) => {\n                                const rm = list.push([callback, thisArg, disposables]);\n                                return toDisposable(rm);\n                            };\n                            return event;\n                        }\n                    }\n                    // value already exists\n                    if (key in target) {\n                        return target[key];\n                    }\n                    // create value\n                    const obj = idle.value;\n                    let prop = obj[key];\n                    if (typeof prop !== 'function') {\n                        return prop;\n                    }\n                    prop = prop.bind(obj);\n                    target[key] = prop;\n                    return prop;\n                },\n                set(_target, p, value) {\n                    idle.value[p] = value;\n                    return true;\n                },\n                getPrototypeOf(_target) {\n                    return ctor.prototype;\n                }\n            });\n        }\n    }\n    _throwIfStrict(msg, printWarning) {\n        if (printWarning) {\n            console.warn(msg);\n        }\n        if (this._strict) {\n            throw new Error(msg);\n        }\n    }\n}\nexport class Trace {\n    static traceInvocation(_enableTracing, ctor) {\n        return !_enableTracing ? Trace._None : new Trace(2 /* TraceType.Invocation */, ctor.name || new Error().stack.split('\\n').slice(3, 4).join('\\n'));\n    }\n    static traceCreation(_enableTracing, ctor) {\n        return !_enableTracing ? Trace._None : new Trace(1 /* TraceType.Creation */, ctor.name);\n    }\n    constructor(type, name) {\n        this.type = type;\n        this.name = name;\n        this._start = Date.now();\n        this._dep = [];\n    }\n    branch(id, first) {\n        const child = new Trace(3 /* TraceType.Branch */, id.toString());\n        this._dep.push([id, first, child]);\n        return child;\n    }\n    stop() {\n        const dur = Date.now() - this._start;\n        Trace._totals += dur;\n        let causedCreation = false;\n        function printChild(n, trace) {\n            const res = [];\n            const prefix = new Array(n + 1).join('\\t');\n            for (const [id, first, child] of trace._dep) {\n                if (first && child) {\n                    causedCreation = true;\n                    res.push(`${prefix}CREATES -> ${id}`);\n                    const nested = printChild(n + 1, child);\n                    if (nested) {\n                        res.push(nested);\n                    }\n                }\n                else {\n                    res.push(`${prefix}uses -> ${id}`);\n                }\n            }\n            return res.join('\\n');\n        }\n        const lines = [\n            `${this.type === 1 /* TraceType.Creation */ ? 'CREATE' : 'CALL'} ${this.name}`,\n            `${printChild(1, this)}`,\n            `DONE, took ${dur.toFixed(2)}ms (grand total ${Trace._totals.toFixed(2)}ms)`\n        ];\n        if (dur > 2 || causedCreation) {\n            Trace.all.add(lines.join('\\n'));\n        }\n    }\n}\nTrace.all = new Set();\nTrace._None = new class extends Trace {\n    constructor() { super(0 /* TraceType.None */, null); }\n    stop() { }\n    branch() { return this; }\n};\nTrace._totals = 0;\n//#endregion\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFalsyOrEmpty, isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { DebounceEmitter } from '../../../base/common/event.js';\nimport { Iterable } from '../../../base/common/iterator.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { MarkerSeverity } from './markers.js';\nexport const unsupportedSchemas = new Set([Schemas.inMemory, Schemas.vscodeSourceControl, Schemas.walkThrough, Schemas.walkThroughSnippet]);\nclass DoubleResourceMap {\n    constructor() {\n        this._byResource = new ResourceMap();\n        this._byOwner = new Map();\n    }\n    set(resource, owner, value) {\n        let ownerMap = this._byResource.get(resource);\n        if (!ownerMap) {\n            ownerMap = new Map();\n            this._byResource.set(resource, ownerMap);\n        }\n        ownerMap.set(owner, value);\n        let resourceMap = this._byOwner.get(owner);\n        if (!resourceMap) {\n            resourceMap = new ResourceMap();\n            this._byOwner.set(owner, resourceMap);\n        }\n        resourceMap.set(resource, value);\n    }\n    get(resource, owner) {\n        const ownerMap = this._byResource.get(resource);\n        return ownerMap === null || ownerMap === void 0 ? void 0 : ownerMap.get(owner);\n    }\n    delete(resource, owner) {\n        let removedA = false;\n        let removedB = false;\n        const ownerMap = this._byResource.get(resource);\n        if (ownerMap) {\n            removedA = ownerMap.delete(owner);\n        }\n        const resourceMap = this._byOwner.get(owner);\n        if (resourceMap) {\n            removedB = resourceMap.delete(resource);\n        }\n        if (removedA !== removedB) {\n            throw new Error('illegal state');\n        }\n        return removedA && removedB;\n    }\n    values(key) {\n        var _a, _b, _c, _d;\n        if (typeof key === 'string') {\n            return (_b = (_a = this._byOwner.get(key)) === null || _a === void 0 ? void 0 : _a.values()) !== null && _b !== void 0 ? _b : Iterable.empty();\n        }\n        if (URI.isUri(key)) {\n            return (_d = (_c = this._byResource.get(key)) === null || _c === void 0 ? void 0 : _c.values()) !== null && _d !== void 0 ? _d : Iterable.empty();\n        }\n        return Iterable.map(Iterable.concat(...this._byOwner.values()), map => map[1]);\n    }\n}\nclass MarkerStats {\n    constructor(service) {\n        this.errors = 0;\n        this.infos = 0;\n        this.warnings = 0;\n        this.unknowns = 0;\n        this._data = new ResourceMap();\n        this._service = service;\n        this._subscription = service.onMarkerChanged(this._update, this);\n    }\n    dispose() {\n        this._subscription.dispose();\n    }\n    _update(resources) {\n        for (const resource of resources) {\n            const oldStats = this._data.get(resource);\n            if (oldStats) {\n                this._substract(oldStats);\n            }\n            const newStats = this._resourceStats(resource);\n            this._add(newStats);\n            this._data.set(resource, newStats);\n        }\n    }\n    _resourceStats(resource) {\n        const result = { errors: 0, warnings: 0, infos: 0, unknowns: 0 };\n        // TODO this is a hack\n        if (unsupportedSchemas.has(resource.scheme)) {\n            return result;\n        }\n        for (const { severity } of this._service.read({ resource })) {\n            if (severity === MarkerSeverity.Error) {\n                result.errors += 1;\n            }\n            else if (severity === MarkerSeverity.Warning) {\n                result.warnings += 1;\n            }\n            else if (severity === MarkerSeverity.Info) {\n                result.infos += 1;\n            }\n            else {\n                result.unknowns += 1;\n            }\n        }\n        return result;\n    }\n    _substract(op) {\n        this.errors -= op.errors;\n        this.warnings -= op.warnings;\n        this.infos -= op.infos;\n        this.unknowns -= op.unknowns;\n    }\n    _add(op) {\n        this.errors += op.errors;\n        this.warnings += op.warnings;\n        this.infos += op.infos;\n        this.unknowns += op.unknowns;\n    }\n}\nexport class MarkerService {\n    constructor() {\n        this._onMarkerChanged = new DebounceEmitter({\n            delay: 0,\n            merge: MarkerService._merge\n        });\n        this.onMarkerChanged = this._onMarkerChanged.event;\n        this._data = new DoubleResourceMap();\n        this._stats = new MarkerStats(this);\n    }\n    dispose() {\n        this._stats.dispose();\n        this._onMarkerChanged.dispose();\n    }\n    remove(owner, resources) {\n        for (const resource of resources || []) {\n            this.changeOne(owner, resource, []);\n        }\n    }\n    changeOne(owner, resource, markerData) {\n        if (isFalsyOrEmpty(markerData)) {\n            // remove marker for this (owner,resource)-tuple\n            const removed = this._data.delete(resource, owner);\n            if (removed) {\n                this._onMarkerChanged.fire([resource]);\n            }\n        }\n        else {\n            // insert marker for this (owner,resource)-tuple\n            const markers = [];\n            for (const data of markerData) {\n                const marker = MarkerService._toMarker(owner, resource, data);\n                if (marker) {\n                    markers.push(marker);\n                }\n            }\n            this._data.set(resource, owner, markers);\n            this._onMarkerChanged.fire([resource]);\n        }\n    }\n    static _toMarker(owner, resource, data) {\n        let { code, severity, message, source, startLineNumber, startColumn, endLineNumber, endColumn, relatedInformation, tags, } = data;\n        if (!message) {\n            return undefined;\n        }\n        // santize data\n        startLineNumber = startLineNumber > 0 ? startLineNumber : 1;\n        startColumn = startColumn > 0 ? startColumn : 1;\n        endLineNumber = endLineNumber >= startLineNumber ? endLineNumber : startLineNumber;\n        endColumn = endColumn > 0 ? endColumn : startColumn;\n        return {\n            resource,\n            owner,\n            code,\n            severity,\n            message,\n            source,\n            startLineNumber,\n            startColumn,\n            endLineNumber,\n            endColumn,\n            relatedInformation,\n            tags,\n        };\n    }\n    changeAll(owner, data) {\n        const changes = [];\n        // remove old marker\n        const existing = this._data.values(owner);\n        if (existing) {\n            for (const data of existing) {\n                const first = Iterable.first(data);\n                if (first) {\n                    changes.push(first.resource);\n                    this._data.delete(first.resource, owner);\n                }\n            }\n        }\n        // add new markers\n        if (isNonEmptyArray(data)) {\n            // group by resource\n            const groups = new ResourceMap();\n            for (const { resource, marker: markerData } of data) {\n                const marker = MarkerService._toMarker(owner, resource, markerData);\n                if (!marker) {\n                    // filter bad markers\n                    continue;\n                }\n                const array = groups.get(resource);\n                if (!array) {\n                    groups.set(resource, [marker]);\n                    changes.push(resource);\n                }\n                else {\n                    array.push(marker);\n                }\n            }\n            // insert all\n            for (const [resource, value] of groups) {\n                this._data.set(resource, owner, value);\n            }\n        }\n        if (changes.length > 0) {\n            this._onMarkerChanged.fire(changes);\n        }\n    }\n    read(filter = Object.create(null)) {\n        let { owner, resource, severities, take } = filter;\n        if (!take || take < 0) {\n            take = -1;\n        }\n        if (owner && resource) {\n            // exactly one owner AND resource\n            const data = this._data.get(resource, owner);\n            if (!data) {\n                return [];\n            }\n            else {\n                const result = [];\n                for (const marker of data) {\n                    if (MarkerService._accept(marker, severities)) {\n                        const newLen = result.push(marker);\n                        if (take > 0 && newLen === take) {\n                            break;\n                        }\n                    }\n                }\n                return result;\n            }\n        }\n        else if (!owner && !resource) {\n            // all\n            const result = [];\n            for (const markers of this._data.values()) {\n                for (const data of markers) {\n                    if (MarkerService._accept(data, severities)) {\n                        const newLen = result.push(data);\n                        if (take > 0 && newLen === take) {\n                            return result;\n                        }\n                    }\n                }\n            }\n            return result;\n        }\n        else {\n            // of one resource OR owner\n            const iterable = this._data.values(resource !== null && resource !== void 0 ? resource : owner);\n            const result = [];\n            for (const markers of iterable) {\n                for (const data of markers) {\n                    if (MarkerService._accept(data, severities)) {\n                        const newLen = result.push(data);\n                        if (take > 0 && newLen === take) {\n                            return result;\n                        }\n                    }\n                }\n            }\n            return result;\n        }\n    }\n    static _accept(marker, severities) {\n        return severities === undefined || (severities & marker.severity) === marker.severity;\n    }\n    // --- event debounce logic\n    static _merge(all) {\n        const set = new ResourceMap();\n        for (const array of all) {\n            for (const item of array) {\n                set.set(item, true);\n            }\n        }\n        return Array.from(set.keys());\n    }\n}\n", "import { Disposable } from '../../../base/common/lifecycle.js';\nimport { ConfigurationModel } from './configurationModels.js';\nimport { Extensions } from './configurationRegistry.js';\nimport { Registry } from '../../registry/common/platform.js';\nexport class DefaultConfiguration extends Disposable {\n    constructor() {\n        super(...arguments);\n        this._configurationModel = new ConfigurationModel();\n    }\n    get configurationModel() {\n        return this._configurationModel;\n    }\n    reload() {\n        this.resetConfigurationModel();\n        return this.configurationModel;\n    }\n    getConfigurationDefaultOverrides() {\n        return {};\n    }\n    resetConfigurationModel() {\n        this._configurationModel = new ConfigurationModel();\n        const properties = Registry.as(Extensions.Configuration).getConfigurationProperties();\n        this.updateConfigurationModel(Object.keys(properties), properties);\n    }\n    updateConfigurationModel(properties, configurationProperties) {\n        const configurationDefaultsOverrides = this.getConfigurationDefaultOverrides();\n        for (const key of properties) {\n            const defaultOverrideValue = configurationDefaultsOverrides[key];\n            const propertySchema = configurationProperties[key];\n            if (defaultOverrideValue !== undefined) {\n                this._configurationModel.addValue(key, defaultOverrideValue);\n            }\n            else if (propertySchema) {\n                this._configurationModel.addValue(key, propertySchema.default);\n            }\n            else {\n                this._configurationModel.removeValue(key);\n            }\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { MultiplexLogger } from './log.js';\nexport class LogService extends Disposable {\n    constructor(primaryLogger, otherLoggers = []) {\n        super();\n        this.logger = new MultiplexLogger([primaryLogger, ...otherLoggers]);\n        this._register(primaryLogger.onDidChangeLogLevel(level => this.setLevel(level)));\n    }\n    get onDidChangeLogLevel() {\n        return this.logger.onDidChangeLogLevel;\n    }\n    setLevel(level) {\n        this.logger.setLevel(level);\n    }\n    getLevel() {\n        return this.logger.getLevel();\n    }\n    trace(message, ...args) {\n        this.logger.trace(message, ...args);\n    }\n    debug(message, ...args) {\n        this.logger.debug(message, ...args);\n    }\n    info(message, ...args) {\n        this.logger.info(message, ...args);\n    }\n    warn(message, ...args) {\n        this.logger.warn(message, ...args);\n    }\n    error(message, ...args) {\n        this.logger.error(message, ...args);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nconst editorFeatures = [];\n/**\n * Registers an editor feature. Editor features will be instantiated only once, as soon as\n * the first code editor is instantiated.\n */\nexport function registerEditorFeature(ctor) {\n    editorFeatures.push(ctor);\n}\nexport function getEditorFeatures() {\n    return editorFeatures.slice(0);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport '../../common/languages/languageConfigurationRegistry.js';\nimport './standaloneCodeEditorService.js';\nimport './standaloneLayoutService.js';\nimport '../../../platform/undoRedo/common/undoRedoService.js';\nimport '../../common/services/languageFeatureDebounce.js';\nimport '../../common/services/semanticTokensStylingService.js';\nimport '../../common/services/languageFeaturesService.js';\nimport * as strings from '../../../base/common/strings.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { KeyCodeChord, decodeKeybinding } from '../../../base/common/keybindings.js';\nimport { ImmortalReference, toDisposable, DisposableStore, Disposable, combinedDisposable } from '../../../base/common/lifecycle.js';\nimport { OS, isLinux, isMacintosh } from '../../../base/common/platform.js';\nimport Severity from '../../../base/common/severity.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IBulkEditService, ResourceEdit, ResourceTextEdit } from '../../browser/services/bulkEditService.js';\nimport { isDiffEditorConfigurationKey, isEditorConfigurationKey } from '../../common/config/editorConfigurationSchema.js';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Position as Pos } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextModelService } from '../../common/services/resolverService.js';\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfiguration.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { Configuration, ConfigurationModel, ConfigurationChangeEvent } from '../../../platform/configuration/common/configurationModels.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\nimport { createDecorator, IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { AbstractKeybindingService } from '../../../platform/keybinding/common/abstractKeybindingService.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingResolver } from '../../../platform/keybinding/common/keybindingResolver.js';\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ResolvedKeybindingItem } from '../../../platform/keybinding/common/resolvedKeybindingItem.js';\nimport { USLayoutResolvedKeybinding } from '../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { INotificationService, NoOpNotification } from '../../../platform/notification/common/notification.js';\nimport { IEditorProgressService, IProgressService } from '../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService, WorkspaceFolder, STANDALONE_EDITOR_WORKSPACE_ID } from '../../../platform/workspace/common/workspace.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { StandaloneServicesNLS } from '../../common/standaloneStrings.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { ConsoleLogger, ILogService } from '../../../platform/log/common/log.js';\nimport { IWorkspaceTrustManagementService } from '../../../platform/workspace/common/workspaceTrust.js';\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\nimport { LanguageService } from '../../common/services/languageService.js';\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\nimport { getSingletonServiceDescriptors, registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { OpenerService } from '../../browser/services/openerService.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorker.js';\nimport { EditorWorkerService } from '../../browser/services/editorWorkerService.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsService.js';\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { ModelService } from '../../common/services/modelService.js';\nimport { StandaloneQuickInputService } from './quickInput/standaloneQuickInputService.js';\nimport { StandaloneThemeService } from './standaloneThemeService.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { AccessibilityService } from '../../../platform/accessibility/browser/accessibilityService.js';\nimport { IAccessibilityService, IAccessibleNotificationService } from '../../../platform/accessibility/common/accessibility.js';\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\nimport { BrowserClipboardService } from '../../../platform/clipboard/browser/clipboardService.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\nimport { SyncDescriptor } from '../../../platform/instantiation/common/descriptors.js';\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\nimport { DefaultConfiguration } from '../../../platform/configuration/common/configurations.js';\nimport { IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\nimport { LogService } from '../../../platform/log/common/logService.js';\nimport { getEditorFeatures } from '../../common/editorFeatures.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nclass SimpleModel {\n    constructor(model) {\n        this.disposed = false;\n        this.model = model;\n        this._onWillDispose = new Emitter();\n    }\n    get textEditorModel() {\n        return this.model;\n    }\n    dispose() {\n        this.disposed = true;\n        this._onWillDispose.fire();\n    }\n}\nlet StandaloneTextModelService = class StandaloneTextModelService {\n    constructor(modelService) {\n        this.modelService = modelService;\n    }\n    createModelReference(resource) {\n        const model = this.modelService.getModel(resource);\n        if (!model) {\n            return Promise.reject(new Error(`Model not found`));\n        }\n        return Promise.resolve(new ImmortalReference(new SimpleModel(model)));\n    }\n};\nStandaloneTextModelService = __decorate([\n    __param(0, IModelService)\n], StandaloneTextModelService);\nclass StandaloneEditorProgressService {\n    show() {\n        return StandaloneEditorProgressService.NULL_PROGRESS_RUNNER;\n    }\n    async showWhile(promise, delay) {\n        await promise;\n    }\n}\nStandaloneEditorProgressService.NULL_PROGRESS_RUNNER = {\n    done: () => { },\n    total: () => { },\n    worked: () => { }\n};\nclass StandaloneProgressService {\n    withProgress(_options, task, onDidCancel) {\n        return task({\n            report: () => { },\n        });\n    }\n}\nclass StandaloneEnvironmentService {\n    constructor() {\n        this.isExtensionDevelopment = false;\n        this.isBuilt = false;\n    }\n}\nclass StandaloneDialogService {\n    async confirm(confirmation) {\n        const confirmed = this.doConfirm(confirmation.message, confirmation.detail);\n        return {\n            confirmed,\n            checkboxChecked: false // unsupported\n        };\n    }\n    doConfirm(message, detail) {\n        let messageText = message;\n        if (detail) {\n            messageText = messageText + '\\n\\n' + detail;\n        }\n        return mainWindow.confirm(messageText);\n    }\n    async prompt(prompt) {\n        var _a, _b;\n        let result = undefined;\n        const confirmed = this.doConfirm(prompt.message, prompt.detail);\n        if (confirmed) {\n            const promptButtons = [...((_a = prompt.buttons) !== null && _a !== void 0 ? _a : [])];\n            if (prompt.cancelButton && typeof prompt.cancelButton !== 'string' && typeof prompt.cancelButton !== 'boolean') {\n                promptButtons.push(prompt.cancelButton);\n            }\n            result = await ((_b = promptButtons[0]) === null || _b === void 0 ? void 0 : _b.run({ checkboxChecked: false }));\n        }\n        return { result };\n    }\n    async error(message, detail) {\n        await this.prompt({ type: Severity.Error, message, detail });\n    }\n}\nexport class StandaloneNotificationService {\n    info(message) {\n        return this.notify({ severity: Severity.Info, message });\n    }\n    warn(message) {\n        return this.notify({ severity: Severity.Warning, message });\n    }\n    error(error) {\n        return this.notify({ severity: Severity.Error, message: error });\n    }\n    notify(notification) {\n        switch (notification.severity) {\n            case Severity.Error:\n                console.error(notification.message);\n                break;\n            case Severity.Warning:\n                console.warn(notification.message);\n                break;\n            default:\n                console.log(notification.message);\n                break;\n        }\n        return StandaloneNotificationService.NO_OP;\n    }\n    prompt(severity, message, choices, options) {\n        return StandaloneNotificationService.NO_OP;\n    }\n    status(message, options) {\n        return Disposable.None;\n    }\n}\nStandaloneNotificationService.NO_OP = new NoOpNotification();\nlet StandaloneCommandService = class StandaloneCommandService {\n    constructor(instantiationService) {\n        this._onWillExecuteCommand = new Emitter();\n        this._onDidExecuteCommand = new Emitter();\n        this.onDidExecuteCommand = this._onDidExecuteCommand.event;\n        this._instantiationService = instantiationService;\n    }\n    executeCommand(id, ...args) {\n        const command = CommandsRegistry.getCommand(id);\n        if (!command) {\n            return Promise.reject(new Error(`command '${id}' not found`));\n        }\n        try {\n            this._onWillExecuteCommand.fire({ commandId: id, args });\n            const result = this._instantiationService.invokeFunction.apply(this._instantiationService, [command.handler, ...args]);\n            this._onDidExecuteCommand.fire({ commandId: id, args });\n            return Promise.resolve(result);\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    }\n};\nStandaloneCommandService = __decorate([\n    __param(0, IInstantiationService)\n], StandaloneCommandService);\nexport { StandaloneCommandService };\nlet StandaloneKeybindingService = class StandaloneKeybindingService extends AbstractKeybindingService {\n    constructor(contextKeyService, commandService, telemetryService, notificationService, logService, codeEditorService) {\n        super(contextKeyService, commandService, telemetryService, notificationService, logService);\n        this._cachedResolver = null;\n        this._dynamicKeybindings = [];\n        this._domNodeListeners = [];\n        const addContainer = (domNode) => {\n            const disposables = new DisposableStore();\n            // for standard keybindings\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._dispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                    keyEvent.stopPropagation();\n                }\n            }));\n            // for single modifier chord keybindings (e.g. shift shift)\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._singleModifierDispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                }\n            }));\n            this._domNodeListeners.push(new DomNodeListeners(domNode, disposables));\n        };\n        const removeContainer = (domNode) => {\n            for (let i = 0; i < this._domNodeListeners.length; i++) {\n                const domNodeListeners = this._domNodeListeners[i];\n                if (domNodeListeners.domNode === domNode) {\n                    this._domNodeListeners.splice(i, 1);\n                    domNodeListeners.dispose();\n                }\n            }\n        };\n        const addCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(61 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            addContainer(codeEditor.getContainerDomNode());\n        };\n        const removeCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(61 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            removeContainer(codeEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onCodeEditorAdd(addCodeEditor));\n        this._register(codeEditorService.onCodeEditorRemove(removeCodeEditor));\n        codeEditorService.listCodeEditors().forEach(addCodeEditor);\n        const addDiffEditor = (diffEditor) => {\n            addContainer(diffEditor.getContainerDomNode());\n        };\n        const removeDiffEditor = (diffEditor) => {\n            removeContainer(diffEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onDiffEditorAdd(addDiffEditor));\n        this._register(codeEditorService.onDiffEditorRemove(removeDiffEditor));\n        codeEditorService.listDiffEditors().forEach(addDiffEditor);\n    }\n    addDynamicKeybinding(command, keybinding, handler, when) {\n        return combinedDisposable(CommandsRegistry.registerCommand(command, handler), this.addDynamicKeybindings([{\n                keybinding,\n                command,\n                when\n            }]));\n    }\n    addDynamicKeybindings(rules) {\n        const entries = rules.map((rule) => {\n            var _a;\n            const keybinding = decodeKeybinding(rule.keybinding, OS);\n            return {\n                keybinding,\n                command: (_a = rule.command) !== null && _a !== void 0 ? _a : null,\n                commandArgs: rule.commandArgs,\n                when: rule.when,\n                weight1: 1000,\n                weight2: 0,\n                extensionId: null,\n                isBuiltinExtension: false\n            };\n        });\n        this._dynamicKeybindings = this._dynamicKeybindings.concat(entries);\n        this.updateResolver();\n        return toDisposable(() => {\n            // Search the first entry and remove them all since they will be contiguous\n            for (let i = 0; i < this._dynamicKeybindings.length; i++) {\n                if (this._dynamicKeybindings[i] === entries[0]) {\n                    this._dynamicKeybindings.splice(i, entries.length);\n                    this.updateResolver();\n                    return;\n                }\n            }\n        });\n    }\n    updateResolver() {\n        this._cachedResolver = null;\n        this._onDidUpdateKeybindings.fire();\n    }\n    _getResolver() {\n        if (!this._cachedResolver) {\n            const defaults = this._toNormalizedKeybindingItems(KeybindingsRegistry.getDefaultKeybindings(), true);\n            const overrides = this._toNormalizedKeybindingItems(this._dynamicKeybindings, false);\n            this._cachedResolver = new KeybindingResolver(defaults, overrides, (str) => this._log(str));\n        }\n        return this._cachedResolver;\n    }\n    _documentHasFocus() {\n        return mainWindow.document.hasFocus();\n    }\n    _toNormalizedKeybindingItems(items, isDefault) {\n        const result = [];\n        let resultLen = 0;\n        for (const item of items) {\n            const when = item.when || undefined;\n            const keybinding = item.keybinding;\n            if (!keybinding) {\n                // This might be a removal keybinding item in user settings => accept it\n                result[resultLen++] = new ResolvedKeybindingItem(undefined, item.command, item.commandArgs, when, isDefault, null, false);\n            }\n            else {\n                const resolvedKeybindings = USLayoutResolvedKeybinding.resolveKeybinding(keybinding, OS);\n                for (const resolvedKeybinding of resolvedKeybindings) {\n                    result[resultLen++] = new ResolvedKeybindingItem(resolvedKeybinding, item.command, item.commandArgs, when, isDefault, null, false);\n                }\n            }\n        }\n        return result;\n    }\n    resolveKeyboardEvent(keyboardEvent) {\n        const chord = new KeyCodeChord(keyboardEvent.ctrlKey, keyboardEvent.shiftKey, keyboardEvent.altKey, keyboardEvent.metaKey, keyboardEvent.keyCode);\n        return new USLayoutResolvedKeybinding([chord], OS);\n    }\n};\nStandaloneKeybindingService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICommandService),\n    __param(2, ITelemetryService),\n    __param(3, INotificationService),\n    __param(4, ILogService),\n    __param(5, ICodeEditorService)\n], StandaloneKeybindingService);\nexport { StandaloneKeybindingService };\nclass DomNodeListeners extends Disposable {\n    constructor(domNode, disposables) {\n        super();\n        this.domNode = domNode;\n        this._register(disposables);\n    }\n}\nfunction isConfigurationOverrides(thing) {\n    return thing\n        && typeof thing === 'object'\n        && (!thing.overrideIdentifier || typeof thing.overrideIdentifier === 'string')\n        && (!thing.resource || thing.resource instanceof URI);\n}\nexport class StandaloneConfigurationService {\n    constructor() {\n        this._onDidChangeConfiguration = new Emitter();\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        const defaultConfiguration = new DefaultConfiguration();\n        this._configuration = new Configuration(defaultConfiguration.reload(), new ConfigurationModel(), new ConfigurationModel(), new ConfigurationModel());\n        defaultConfiguration.dispose();\n    }\n    getValue(arg1, arg2) {\n        const section = typeof arg1 === 'string' ? arg1 : undefined;\n        const overrides = isConfigurationOverrides(arg1) ? arg1 : isConfigurationOverrides(arg2) ? arg2 : {};\n        return this._configuration.getValue(section, overrides, undefined);\n    }\n    updateValues(values) {\n        const previous = { data: this._configuration.toData() };\n        const changedKeys = [];\n        for (const entry of values) {\n            const [key, value] = entry;\n            if (this.getValue(key) === value) {\n                continue;\n            }\n            this._configuration.updateValue(key, value);\n            changedKeys.push(key);\n        }\n        if (changedKeys.length > 0) {\n            const configurationChangeEvent = new ConfigurationChangeEvent({ keys: changedKeys, overrides: [] }, previous, this._configuration);\n            configurationChangeEvent.source = 8 /* ConfigurationTarget.MEMORY */;\n            configurationChangeEvent.sourceConfig = null;\n            this._onDidChangeConfiguration.fire(configurationChangeEvent);\n        }\n        return Promise.resolve();\n    }\n    updateValue(key, value, arg3, arg4) {\n        return this.updateValues([[key, value]]);\n    }\n    inspect(key, options = {}) {\n        return this._configuration.inspect(key, options, undefined);\n    }\n}\nlet StandaloneResourceConfigurationService = class StandaloneResourceConfigurationService {\n    constructor(configurationService, modelService, languageService) {\n        this.configurationService = configurationService;\n        this.modelService = modelService;\n        this.languageService = languageService;\n        this._onDidChangeConfiguration = new Emitter();\n        this.configurationService.onDidChangeConfiguration((e) => {\n            this._onDidChangeConfiguration.fire({ affectedKeys: e.affectedKeys, affectsConfiguration: (resource, configuration) => e.affectsConfiguration(configuration) });\n        });\n    }\n    getValue(resource, arg2, arg3) {\n        const position = Pos.isIPosition(arg2) ? arg2 : null;\n        const section = position ? (typeof arg3 === 'string' ? arg3 : undefined) : (typeof arg2 === 'string' ? arg2 : undefined);\n        const language = resource ? this.getLanguage(resource, position) : undefined;\n        if (typeof section === 'undefined') {\n            return this.configurationService.getValue({\n                resource,\n                overrideIdentifier: language\n            });\n        }\n        return this.configurationService.getValue(section, {\n            resource,\n            overrideIdentifier: language\n        });\n    }\n    getLanguage(resource, position) {\n        const model = this.modelService.getModel(resource);\n        if (model) {\n            return position ? model.getLanguageIdAtPosition(position.lineNumber, position.column) : model.getLanguageId();\n        }\n        return this.languageService.guessLanguageIdByFilepathOrFirstLine(resource);\n    }\n};\nStandaloneResourceConfigurationService = __decorate([\n    __param(0, IConfigurationService),\n    __param(1, IModelService),\n    __param(2, ILanguageService)\n], StandaloneResourceConfigurationService);\nlet StandaloneResourcePropertiesService = class StandaloneResourcePropertiesService {\n    constructor(configurationService) {\n        this.configurationService = configurationService;\n    }\n    getEOL(resource, language) {\n        const eol = this.configurationService.getValue('files.eol', { overrideIdentifier: language, resource });\n        if (eol && typeof eol === 'string' && eol !== 'auto') {\n            return eol;\n        }\n        return (isLinux || isMacintosh) ? '\\n' : '\\r\\n';\n    }\n};\nStandaloneResourcePropertiesService = __decorate([\n    __param(0, IConfigurationService)\n], StandaloneResourcePropertiesService);\nclass StandaloneTelemetryService {\n    publicLog2() { }\n}\nclass StandaloneWorkspaceContextService {\n    constructor() {\n        const resource = URI.from({ scheme: StandaloneWorkspaceContextService.SCHEME, authority: 'model', path: '/' });\n        this.workspace = { id: STANDALONE_EDITOR_WORKSPACE_ID, folders: [new WorkspaceFolder({ uri: resource, name: '', index: 0 })] };\n    }\n    getWorkspace() {\n        return this.workspace;\n    }\n    getWorkspaceFolder(resource) {\n        return resource && resource.scheme === StandaloneWorkspaceContextService.SCHEME ? this.workspace.folders[0] : null;\n    }\n}\nStandaloneWorkspaceContextService.SCHEME = 'inmemory';\nexport function updateConfigurationService(configurationService, source, isDiffEditor) {\n    if (!source) {\n        return;\n    }\n    if (!(configurationService instanceof StandaloneConfigurationService)) {\n        return;\n    }\n    const toUpdate = [];\n    Object.keys(source).forEach((key) => {\n        if (isEditorConfigurationKey(key)) {\n            toUpdate.push([`editor.${key}`, source[key]]);\n        }\n        if (isDiffEditor && isDiffEditorConfigurationKey(key)) {\n            toUpdate.push([`diffEditor.${key}`, source[key]]);\n        }\n    });\n    if (toUpdate.length > 0) {\n        configurationService.updateValues(toUpdate);\n    }\n}\nlet StandaloneBulkEditService = class StandaloneBulkEditService {\n    constructor(_modelService) {\n        this._modelService = _modelService;\n        //\n    }\n    hasPreviewHandler() {\n        return false;\n    }\n    async apply(editsIn, _options) {\n        const edits = Array.isArray(editsIn) ? editsIn : ResourceEdit.convert(editsIn);\n        const textEdits = new Map();\n        for (const edit of edits) {\n            if (!(edit instanceof ResourceTextEdit)) {\n                throw new Error('bad edit - only text edits are supported');\n            }\n            const model = this._modelService.getModel(edit.resource);\n            if (!model) {\n                throw new Error('bad edit - model not found');\n            }\n            if (typeof edit.versionId === 'number' && model.getVersionId() !== edit.versionId) {\n                throw new Error('bad state - model changed in the meantime');\n            }\n            let array = textEdits.get(model);\n            if (!array) {\n                array = [];\n                textEdits.set(model, array);\n            }\n            array.push(EditOperation.replaceMove(Range.lift(edit.textEdit.range), edit.textEdit.text));\n        }\n        let totalEdits = 0;\n        let totalFiles = 0;\n        for (const [model, edits] of textEdits) {\n            model.pushStackElement();\n            model.pushEditOperations([], edits, () => []);\n            model.pushStackElement();\n            totalFiles += 1;\n            totalEdits += edits.length;\n        }\n        return {\n            ariaSummary: strings.format(StandaloneServicesNLS.bulkEditServiceSummary, totalEdits, totalFiles),\n            isApplied: totalEdits > 0\n        };\n    }\n};\nStandaloneBulkEditService = __decorate([\n    __param(0, IModelService)\n], StandaloneBulkEditService);\nclass StandaloneUriLabelService {\n    getUriLabel(resource, options) {\n        if (resource.scheme === 'file') {\n            return resource.fsPath;\n        }\n        return resource.path;\n    }\n    getUriBasenameLabel(resource) {\n        return basename(resource);\n    }\n}\nlet StandaloneContextViewService = class StandaloneContextViewService extends ContextViewService {\n    constructor(layoutService, _codeEditorService) {\n        super(layoutService);\n        this._codeEditorService = _codeEditorService;\n    }\n    showContextView(delegate, container, shadowRoot) {\n        if (!container) {\n            const codeEditor = this._codeEditorService.getFocusedCodeEditor() || this._codeEditorService.getActiveCodeEditor();\n            if (codeEditor) {\n                container = codeEditor.getContainerDomNode();\n            }\n        }\n        return super.showContextView(delegate, container, shadowRoot);\n    }\n};\nStandaloneContextViewService = __decorate([\n    __param(0, ILayoutService),\n    __param(1, ICodeEditorService)\n], StandaloneContextViewService);\nclass StandaloneWorkspaceTrustManagementService {\n    constructor() {\n        this._neverEmitter = new Emitter();\n        this.onDidChangeTrust = this._neverEmitter.event;\n    }\n    isWorkspaceTrusted() {\n        return true;\n    }\n}\nclass StandaloneLanguageService extends LanguageService {\n    constructor() {\n        super();\n    }\n}\nclass StandaloneLogService extends LogService {\n    constructor() {\n        super(new ConsoleLogger());\n    }\n}\nlet StandaloneContextMenuService = class StandaloneContextMenuService extends ContextMenuService {\n    constructor(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService) {\n        super(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService);\n        this.configure({ blockMouse: false }); // we do not want that in the standalone editor\n    }\n};\nStandaloneContextMenuService = __decorate([\n    __param(0, ITelemetryService),\n    __param(1, INotificationService),\n    __param(2, IContextViewService),\n    __param(3, IKeybindingService),\n    __param(4, IMenuService),\n    __param(5, IContextKeyService)\n], StandaloneContextMenuService);\nclass StandaloneAudioService {\n    async playAudioCue(cue, options) {\n    }\n}\nclass StandaloneAccessibleNotificationService {\n    notify(event, userGesture) {\n        // NOOP\n    }\n}\nregisterSingleton(IConfigurationService, StandaloneConfigurationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextResourceConfigurationService, StandaloneResourceConfigurationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextResourcePropertiesService, StandaloneResourcePropertiesService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IWorkspaceContextService, StandaloneWorkspaceContextService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILabelService, StandaloneUriLabelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITelemetryService, StandaloneTelemetryService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IDialogService, StandaloneDialogService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEnvironmentService, StandaloneEnvironmentService, 0 /* InstantiationType.Eager */);\nregisterSingleton(INotificationService, StandaloneNotificationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMarkerService, MarkerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILanguageService, StandaloneLanguageService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IStandaloneThemeService, StandaloneThemeService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILogService, StandaloneLogService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IModelService, ModelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMarkerDecorationsService, MarkerDecorationsService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextKeyService, ContextKeyService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IProgressService, StandaloneProgressService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEditorProgressService, StandaloneEditorProgressService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IStorageService, InMemoryStorageService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEditorWorkerService, EditorWorkerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IBulkEditService, StandaloneBulkEditService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IWorkspaceTrustManagementService, StandaloneWorkspaceTrustManagementService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextModelService, StandaloneTextModelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IAccessibilityService, AccessibilityService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IListService, ListService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ICommandService, StandaloneCommandService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IKeybindingService, StandaloneKeybindingService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IQuickInputService, StandaloneQuickInputService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextViewService, StandaloneContextViewService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IOpenerService, OpenerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IClipboardService, BrowserClipboardService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextMenuService, StandaloneContextMenuService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMenuService, MenuService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IAudioCueService, StandaloneAudioService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IAccessibleNotificationService, StandaloneAccessibleNotificationService, 0 /* InstantiationType.Eager */);\n/**\n * We don't want to eagerly instantiate services because embedders get a one time chance\n * to override services when they create the first editor.\n */\nexport var StandaloneServices;\n(function (StandaloneServices) {\n    const serviceCollection = new ServiceCollection();\n    for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n        serviceCollection.set(id, descriptor);\n    }\n    const instantiationService = new InstantiationService(serviceCollection, true);\n    serviceCollection.set(IInstantiationService, instantiationService);\n    function get(serviceId) {\n        if (!initialized) {\n            initialize({});\n        }\n        const r = serviceCollection.get(serviceId);\n        if (!r) {\n            throw new Error('Missing service ' + serviceId);\n        }\n        if (r instanceof SyncDescriptor) {\n            return instantiationService.invokeFunction((accessor) => accessor.get(serviceId));\n        }\n        else {\n            return r;\n        }\n    }\n    StandaloneServices.get = get;\n    let initialized = false;\n    const onDidInitialize = new Emitter();\n    function initialize(overrides) {\n        if (initialized) {\n            return instantiationService;\n        }\n        initialized = true;\n        // Add singletons that were registered after this module loaded\n        for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n            if (!serviceCollection.get(id)) {\n                serviceCollection.set(id, descriptor);\n            }\n        }\n        // Initialize the service collection with the overrides, but only if the\n        // service was not instantiated in the meantime.\n        for (const serviceId in overrides) {\n            if (overrides.hasOwnProperty(serviceId)) {\n                const serviceIdentifier = createDecorator(serviceId);\n                const r = serviceCollection.get(serviceIdentifier);\n                if (r instanceof SyncDescriptor) {\n                    serviceCollection.set(serviceIdentifier, overrides[serviceId]);\n                }\n            }\n        }\n        // Instantiate all editor features\n        const editorFeatures = getEditorFeatures();\n        for (const feature of editorFeatures) {\n            try {\n                instantiationService.createInstance(feature);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n        onDidInitialize.fire();\n        return instantiationService;\n    }\n    StandaloneServices.initialize = initialize;\n    /**\n     * Executes callback once services are initialized.\n     */\n    function withServices(callback) {\n        if (initialized) {\n            return callback();\n        }\n        const disposable = new DisposableStore();\n        const listener = disposable.add(onDidInitialize.event(() => {\n            listener.dispose();\n            disposable.add(callback());\n        }));\n        return disposable;\n    }\n    StandaloneServices.withServices = withServices;\n})(StandaloneServices || (StandaloneServices = {}));\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, getWindow, h } from '../../../../base/browser/dom.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableValue, recomputeInitiallyAndOnChange, subtransaction, transaction } from '../../../../base/common/observable.js';\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\nimport './style.css';\nimport { EditorExtensionsRegistry } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { StableEditorScrollState } from '../../stableEditorScroll.js';\nimport { CodeEditorWidget } from '../codeEditorWidget.js';\nimport { AccessibleDiffViewer } from './accessibleDiffViewer.js';\nimport { DiffEditorDecorations } from './diffEditorDecorations.js';\nimport { DiffEditorSash } from './diffEditorSash.js';\nimport { HideUnchangedRegionsFeature } from './hideUnchangedRegionsFeature.js';\nimport { ViewZoneManager } from './lineAlignment.js';\nimport { MovedBlocksLinesPart } from './movedBlocksLines.js';\nimport { OverviewRulerPart } from './overviewRulerPart.js';\nimport { ObservableElementSizeObserver, applyStyle, applyViewZones, bindContextKey, readHotReloadableExport, translatePosition } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorType } from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport './colors.js';\nimport { DelegatingEditor } from './delegatingEditorImpl.js';\nimport { DiffEditorEditors } from './diffEditorEditors.js';\nimport { DiffEditorOptions } from './diffEditorOptions.js';\nimport { DiffEditorViewModel } from './diffEditorViewModel.js';\nlet DiffEditorWidget = class DiffEditorWidget extends DelegatingEditor {\n    get onDidContentSizeChange() { return this._editors.onDidContentSizeChange; }\n    constructor(_domElement, options, codeEditorWidgetOptions, _parentContextKeyService, _parentInstantiationService, codeEditorService, _audioCueService, _editorProgressService) {\n        var _a;\n        super();\n        this._domElement = _domElement;\n        this._parentContextKeyService = _parentContextKeyService;\n        this._parentInstantiationService = _parentInstantiationService;\n        this._audioCueService = _audioCueService;\n        this._editorProgressService = _editorProgressService;\n        this.elements = h('div.monaco-diff-editor.side-by-side', { style: { position: 'relative', height: '100%' } }, [\n            h('div.noModificationsOverlay@overlay', { style: { position: 'absolute', height: '100%', visibility: 'hidden', } }, [$('span', {}, 'No Changes')]),\n            h('div.editor.original@original', { style: { position: 'absolute', height: '100%' } }),\n            h('div.editor.modified@modified', { style: { position: 'absolute', height: '100%' } }),\n            h('div.accessibleDiffViewer@accessibleDiffViewer', { style: { position: 'absolute', height: '100%' } }),\n        ]);\n        this._diffModel = observableValue(this, undefined);\n        this._shouldDisposeDiffModel = false;\n        this.onDidChangeModel = Event.fromObservableLight(this._diffModel);\n        this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._domElement));\n        this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._boundarySashes = observableValue(this, undefined);\n        this._accessibleDiffViewerShouldBeVisible = observableValue(this, false);\n        this._accessibleDiffViewerVisible = derived(this, reader => this._options.onlyShowAccessibleDiffViewer.read(reader)\n            ? true\n            : this._accessibleDiffViewerShouldBeVisible.read(reader));\n        this._movedBlocksLinesPart = observableValue(this, undefined);\n        this._layoutInfo = derived(this, reader => {\n            var _a, _b, _c, _d, _e;\n            const width = this._rootSizeObserver.width.read(reader);\n            const height = this._rootSizeObserver.height.read(reader);\n            const sashLeft = (_a = this._sash.read(reader)) === null || _a === void 0 ? void 0 : _a.sashLeft.read(reader);\n            const originalWidth = sashLeft !== null && sashLeft !== void 0 ? sashLeft : Math.max(5, this._editors.original.getLayoutInfo().decorationsLeft);\n            const modifiedWidth = width - originalWidth - ((_c = (_b = this._overviewRulerPart.read(reader)) === null || _b === void 0 ? void 0 : _b.width) !== null && _c !== void 0 ? _c : 0);\n            const movedBlocksLinesWidth = (_e = (_d = this._movedBlocksLinesPart.read(reader)) === null || _d === void 0 ? void 0 : _d.width.read(reader)) !== null && _e !== void 0 ? _e : 0;\n            const originalWidthWithoutMovedBlockLines = originalWidth - movedBlocksLinesWidth;\n            this.elements.original.style.width = originalWidthWithoutMovedBlockLines + 'px';\n            this.elements.original.style.left = '0px';\n            this.elements.modified.style.width = modifiedWidth + 'px';\n            this.elements.modified.style.left = originalWidth + 'px';\n            this._editors.original.layout({ width: originalWidthWithoutMovedBlockLines, height }, true);\n            this._editors.modified.layout({ width: modifiedWidth, height }, true);\n            return {\n                modifiedEditor: this._editors.modified.getLayoutInfo(),\n                originalEditor: this._editors.original.getLayoutInfo(),\n            };\n        });\n        this._diffValue = this._diffModel.map((m, r) => m === null || m === void 0 ? void 0 : m.diff.read(r));\n        this.onDidUpdateDiff = Event.fromObservableLight(this._diffValue);\n        codeEditorService.willCreateDiffEditor();\n        this._contextKeyService.createKey('isInDiffEditor', true);\n        this._domElement.appendChild(this.elements.root);\n        this._register(toDisposable(() => this._domElement.removeChild(this.elements.root)));\n        this._rootSizeObserver = this._register(new ObservableElementSizeObserver(this.elements.root, options.dimension));\n        this._rootSizeObserver.setAutomaticLayout((_a = options.automaticLayout) !== null && _a !== void 0 ? _a : false);\n        this._options = new DiffEditorOptions(options);\n        this._register(autorun(reader => {\n            this._options.setWidth(this._rootSizeObserver.width.read(reader));\n        }));\n        this._contextKeyService.createKey(EditorContextKeys.isEmbeddedDiffEditor.key, false);\n        this._register(bindContextKey(EditorContextKeys.isEmbeddedDiffEditor, this._contextKeyService, reader => this._options.isInEmbeddedEditor.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.comparingMovedCode, this._contextKeyService, reader => { var _a; return !!((_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader)); }));\n        this._register(bindContextKey(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, this._contextKeyService, reader => this._options.couldShowInlineViewBecauseOfSize.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.hasChanges, this._contextKeyService, reader => { var _a, _b, _c; return ((_c = (_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) !== null && _c !== void 0 ? _c : 0) > 0; }));\n        this._editors = this._register(this._instantiationService.createInstance(DiffEditorEditors, this.elements.original, this.elements.modified, this._options, codeEditorWidgetOptions, (i, c, o, o2) => this._createInnerEditor(i, c, o, o2)));\n        this._overviewRulerPart = derivedDisposable(this, reader => !this._options.renderOverviewRuler.read(reader)\n            ? undefined\n            : this._instantiationService.createInstance(readHotReloadableExport(OverviewRulerPart, reader), this._editors, this.elements.root, this._diffModel, this._rootSizeObserver.width, this._rootSizeObserver.height, this._layoutInfo.map(i => i.modifiedEditor))).recomputeInitiallyAndOnChange(this._store);\n        this._sash = derivedDisposable(this, reader => {\n            const showSash = this._options.renderSideBySide.read(reader);\n            this.elements.root.classList.toggle('side-by-side', showSash);\n            return !showSash ? undefined : new DiffEditorSash(this._options, this.elements.root, {\n                height: this._rootSizeObserver.height,\n                width: this._rootSizeObserver.width.map((w, reader) => { var _a, _b; return w - ((_b = (_a = this._overviewRulerPart.read(reader)) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0); }),\n            }, this._boundarySashes);\n        }).recomputeInitiallyAndOnChange(this._store);\n        const unchangedRangesFeature = derivedDisposable(this, reader => /** @description UnchangedRangesFeature */ this._instantiationService.createInstance(readHotReloadableExport(HideUnchangedRegionsFeature, reader), this._editors, this._diffModel, this._options)).recomputeInitiallyAndOnChange(this._store);\n        derivedDisposable(this, reader => /** @description DiffEditorDecorations */ this._instantiationService.createInstance(readHotReloadableExport(DiffEditorDecorations, reader), this._editors, this._diffModel, this._options, this)).recomputeInitiallyAndOnChange(this._store);\n        const origViewZoneIdsToIgnore = new Set();\n        const modViewZoneIdsToIgnore = new Set();\n        let isUpdatingViewZones = false;\n        const viewZoneManager = derivedDisposable(this, reader => /** @description ViewZoneManager */ this._instantiationService.createInstance(readHotReloadableExport(ViewZoneManager, reader), getWindow(this._domElement), this._editors, this._diffModel, this._options, this, () => isUpdatingViewZones || unchangedRangesFeature.get().isUpdatingHiddenAreas, origViewZoneIdsToIgnore, modViewZoneIdsToIgnore)).recomputeInitiallyAndOnChange(this._store);\n        const originalViewZones = derived(this, (reader) => {\n            const orig = viewZoneManager.read(reader).viewZones.read(reader).orig;\n            const orig2 = unchangedRangesFeature.read(reader).viewZones.read(reader).origViewZones;\n            return orig.concat(orig2);\n        });\n        const modifiedViewZones = derived(this, (reader) => {\n            const mod = viewZoneManager.read(reader).viewZones.read(reader).mod;\n            const mod2 = unchangedRangesFeature.read(reader).viewZones.read(reader).modViewZones;\n            return mod.concat(mod2);\n        });\n        this._register(applyViewZones(this._editors.original, originalViewZones, isUpdatingOrigViewZones => {\n            isUpdatingViewZones = isUpdatingOrigViewZones;\n        }, origViewZoneIdsToIgnore));\n        let scrollState;\n        this._register(applyViewZones(this._editors.modified, modifiedViewZones, isUpdatingModViewZones => {\n            isUpdatingViewZones = isUpdatingModViewZones;\n            if (isUpdatingViewZones) {\n                scrollState = StableEditorScrollState.capture(this._editors.modified);\n            }\n            else {\n                scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(this._editors.modified);\n                scrollState = undefined;\n            }\n        }, modViewZoneIdsToIgnore));\n        this._accessibleDiffViewer = derivedDisposable(this, reader => this._instantiationService.createInstance(readHotReloadableExport(AccessibleDiffViewer, reader), this.elements.accessibleDiffViewer, this._accessibleDiffViewerVisible, (visible, tx) => this._accessibleDiffViewerShouldBeVisible.set(visible, tx), this._options.onlyShowAccessibleDiffViewer.map(v => !v), this._rootSizeObserver.width, this._rootSizeObserver.height, this._diffModel.map((m, r) => { var _a; return (_a = m === null || m === void 0 ? void 0 : m.diff.read(r)) === null || _a === void 0 ? void 0 : _a.mappings.map(m => m.lineRangeMapping); }), this._editors)).recomputeInitiallyAndOnChange(this._store);\n        const visibility = this._accessibleDiffViewerVisible.map(v => v ? 'hidden' : 'visible');\n        this._register(applyStyle(this.elements.modified, { visibility }));\n        this._register(applyStyle(this.elements.original, { visibility }));\n        this._createDiffEditorContributions();\n        codeEditorService.addDiffEditor(this);\n        this._register(recomputeInitiallyAndOnChange(this._layoutInfo));\n        derivedDisposable(this, reader => /** @description MovedBlocksLinesPart */ new (readHotReloadableExport(MovedBlocksLinesPart, reader))(this.elements.root, this._diffModel, this._layoutInfo.map(i => i.originalEditor), this._layoutInfo.map(i => i.modifiedEditor), this._editors)).recomputeInitiallyAndOnChange(this._store, value => {\n            // This is to break the layout info <-> moved blocks lines part dependency cycle.\n            this._movedBlocksLinesPart.set(value, undefined);\n        });\n        this._register(applyStyle(this.elements.overlay, {\n            width: this._layoutInfo.map((i, r) => i.originalEditor.width + (this._options.renderSideBySide.read(r) ? 0 : i.modifiedEditor.width)),\n            visibility: derived(reader => /** @description visibility */ {\n                var _a, _b;\n                return (this._options.hideUnchangedRegions.read(reader) && ((_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) === 0)\n                    ? 'visible' : 'hidden';\n            }),\n        }));\n        this._register(Event.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition, (e) => {\n            var _a, _b;\n            if ((e === null || e === void 0 ? void 0 : e.reason) === 3 /* CursorChangeReason.Explicit */) {\n                const diff = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.find(m => m.lineRangeMapping.modified.contains(e.position.lineNumber));\n                if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.modified.isEmpty) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, { source: 'diffEditor.cursorPositionChanged' });\n                }\n                else if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.original.isEmpty) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineInserted, { source: 'diffEditor.cursorPositionChanged' });\n                }\n                else if (diff) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineModified, { source: 'diffEditor.cursorPositionChanged' });\n                }\n            }\n        }));\n        const isInitializingDiff = this._diffModel.map(this, (m, reader) => {\n            /** @isInitializingDiff isDiffUpToDate */\n            if (!m) {\n                return undefined;\n            }\n            return m.diff.read(reader) === undefined && !m.isDiffUpToDate.read(reader);\n        });\n        this._register(autorunWithStore((reader, store) => {\n            /** @description DiffEditorWidgetHelper.ShowProgress */\n            if (isInitializingDiff.read(reader) === true) {\n                const r = this._editorProgressService.show(true, 1000);\n                store.add(toDisposable(() => r.done()));\n            }\n        }));\n        this._register(toDisposable(() => {\n            var _a;\n            if (this._shouldDisposeDiffModel) {\n                (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.dispose();\n            }\n        }));\n    }\n    _createInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        const editor = instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n        return editor;\n    }\n    _createDiffEditorContributions() {\n        const contributions = EditorExtensionsRegistry.getDiffEditorContributions();\n        for (const desc of contributions) {\n            try {\n                this._register(this._instantiationService.createInstance(desc.ctor, this));\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n    }\n    get _targetEditor() { return this._editors.modified; }\n    getEditorType() { return EditorType.IDiffEditor; }\n    layout(dimension) {\n        this._rootSizeObserver.observe(dimension);\n    }\n    hasTextFocus() { return this._editors.original.hasTextFocus() || this._editors.modified.hasTextFocus(); }\n    saveViewState() {\n        var _a;\n        const originalViewState = this._editors.original.saveViewState();\n        const modifiedViewState = this._editors.modified.saveViewState();\n        return {\n            original: originalViewState,\n            modified: modifiedViewState,\n            modelState: (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.serializeState(),\n        };\n    }\n    restoreViewState(s) {\n        var _a;\n        if (s && s.original && s.modified) {\n            const diffEditorState = s;\n            this._editors.original.restoreViewState(diffEditorState.original);\n            this._editors.modified.restoreViewState(diffEditorState.modified);\n            if (diffEditorState.modelState) {\n                (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.restoreSerializedState(diffEditorState.modelState);\n            }\n        }\n    }\n    handleInitialized() {\n        this._editors.original.handleInitialized();\n        this._editors.modified.handleInitialized();\n    }\n    createViewModel(model) {\n        return this._instantiationService.createInstance(DiffEditorViewModel, model, this._options);\n    }\n    getModel() { var _a, _b; return (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model) !== null && _b !== void 0 ? _b : null; }\n    setModel(model, tx) {\n        if (!model && this._diffModel.get()) {\n            // Transitioning from a model to no-model\n            this._accessibleDiffViewer.get().close();\n        }\n        const vm = model ? ('model' in model) ? { model, shouldDispose: false } : { model: this.createViewModel(model), shouldDispose: true } : undefined;\n        if (this._diffModel.get() !== (vm === null || vm === void 0 ? void 0 : vm.model)) {\n            subtransaction(tx, tx => {\n                var _a;\n                /** @description DiffEditorWidget.setModel */\n                observableFromEvent.batchEventsGlobally(tx, () => {\n                    this._editors.original.setModel(vm ? vm.model.model.original : null);\n                    this._editors.modified.setModel(vm ? vm.model.model.modified : null);\n                });\n                const prevValue = this._diffModel.get();\n                const shouldDispose = this._shouldDisposeDiffModel;\n                this._shouldDisposeDiffModel = (_a = vm === null || vm === void 0 ? void 0 : vm.shouldDispose) !== null && _a !== void 0 ? _a : false;\n                this._diffModel.set(vm === null || vm === void 0 ? void 0 : vm.model, tx);\n                if (shouldDispose) {\n                    prevValue === null || prevValue === void 0 ? void 0 : prevValue.dispose();\n                }\n            });\n        }\n    }\n    /**\n     * @param changedOptions Only has values for top-level options that have actually changed.\n     */\n    updateOptions(changedOptions) {\n        this._options.updateOptions(changedOptions);\n    }\n    getContainerDomNode() { return this._domElement; }\n    getOriginalEditor() { return this._editors.original; }\n    getModifiedEditor() { return this._editors.modified; }\n    /**\n     * @deprecated Use `this.getDiffComputationResult().changes2` instead.\n     */\n    getLineChanges() {\n        var _a;\n        const diffState = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get();\n        if (!diffState) {\n            return null;\n        }\n        return toLineChanges(diffState);\n    }\n    revert(diff) {\n        var _a;\n        if (diff.innerChanges) {\n            this.revertRangeMappings(diff.innerChanges);\n            return;\n        }\n        const model = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model;\n        if (!model) {\n            return;\n        }\n        this._editors.modified.executeEdits('diffEditor', [\n            {\n                range: diff.modified.toExclusiveRange(),\n                text: model.original.getValueInRange(diff.original.toExclusiveRange())\n            }\n        ]);\n    }\n    revertRangeMappings(diffs) {\n        const model = this._diffModel.get();\n        if (!model || !model.isDiffUpToDate.get()) {\n            return;\n        }\n        const changes = diffs.map(c => ({\n            range: c.modifiedRange,\n            text: model.model.original.getValueInRange(c.originalRange)\n        }));\n        this._editors.modified.executeEdits('diffEditor', changes);\n    }\n    _goTo(diff) {\n        this._editors.modified.setPosition(new Position(diff.lineRangeMapping.modified.startLineNumber, 1));\n        this._editors.modified.revealRangeInCenter(diff.lineRangeMapping.modified.toExclusiveRange());\n    }\n    goToDiff(target) {\n        var _a, _b, _c, _d;\n        const diffs = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings;\n        if (!diffs || diffs.length === 0) {\n            return;\n        }\n        const curLineNumber = this._editors.modified.getPosition().lineNumber;\n        let diff;\n        if (target === 'next') {\n            diff = (_c = diffs.find(d => d.lineRangeMapping.modified.startLineNumber > curLineNumber)) !== null && _c !== void 0 ? _c : diffs[0];\n        }\n        else {\n            diff = (_d = findLast(diffs, d => d.lineRangeMapping.modified.startLineNumber < curLineNumber)) !== null && _d !== void 0 ? _d : diffs[diffs.length - 1];\n        }\n        this._goTo(diff);\n        if (diff.lineRangeMapping.modified.isEmpty) {\n            this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, { source: 'diffEditor.goToDiff' });\n        }\n        else if (diff.lineRangeMapping.original.isEmpty) {\n            this._audioCueService.playAudioCue(AudioCue.diffLineInserted, { source: 'diffEditor.goToDiff' });\n        }\n        else if (diff) {\n            this._audioCueService.playAudioCue(AudioCue.diffLineModified, { source: 'diffEditor.goToDiff' });\n        }\n    }\n    revealFirstDiff() {\n        const diffModel = this._diffModel.get();\n        if (!diffModel) {\n            return;\n        }\n        // wait for the diff computation to finish\n        this.waitForDiff().then(() => {\n            var _a;\n            const diffs = (_a = diffModel.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings;\n            if (!diffs || diffs.length === 0) {\n                return;\n            }\n            this._goTo(diffs[0]);\n        });\n    }\n    accessibleDiffViewerNext() { this._accessibleDiffViewer.get().next(); }\n    accessibleDiffViewerPrev() { this._accessibleDiffViewer.get().prev(); }\n    async waitForDiff() {\n        const diffModel = this._diffModel.get();\n        if (!diffModel) {\n            return;\n        }\n        await diffModel.waitForDiff();\n    }\n    mapToOtherSide() {\n        var _a, _b;\n        const isModifiedFocus = this._editors.modified.hasWidgetFocus();\n        const source = isModifiedFocus ? this._editors.modified : this._editors.original;\n        const destination = isModifiedFocus ? this._editors.original : this._editors.modified;\n        let destinationSelection;\n        const sourceSelection = source.getSelection();\n        if (sourceSelection) {\n            const mappings = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.map(m => isModifiedFocus ? m.lineRangeMapping.flip() : m.lineRangeMapping);\n            if (mappings) {\n                const newRange1 = translatePosition(sourceSelection.getStartPosition(), mappings);\n                const newRange2 = translatePosition(sourceSelection.getEndPosition(), mappings);\n                destinationSelection = Range.plusRange(newRange1, newRange2);\n            }\n        }\n        return { destination, destinationSelection };\n    }\n    switchSide() {\n        const { destination, destinationSelection } = this.mapToOtherSide();\n        destination.focus();\n        if (destinationSelection) {\n            destination.setSelection(destinationSelection);\n        }\n    }\n    exitCompareMove() {\n        const model = this._diffModel.get();\n        if (!model) {\n            return;\n        }\n        model.movedTextToCompare.set(undefined, undefined);\n    }\n    collapseAllUnchangedRegions() {\n        var _a;\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n        if (!unchangedRegions) {\n            return;\n        }\n        transaction(tx => {\n            for (const region of unchangedRegions) {\n                region.collapseAll(tx);\n            }\n        });\n    }\n    showAllUnchangedRegions() {\n        var _a;\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n        if (!unchangedRegions) {\n            return;\n        }\n        transaction(tx => {\n            for (const region of unchangedRegions) {\n                region.showAll(tx);\n            }\n        });\n    }\n};\nDiffEditorWidget = __decorate([\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ICodeEditorService),\n    __param(6, IAudioCueService),\n    __param(7, IEditorProgressService)\n], DiffEditorWidget);\nexport { DiffEditorWidget };\nfunction toLineChanges(state) {\n    return state.mappings.map(x => {\n        const m = x.lineRangeMapping;\n        let originalStartLineNumber;\n        let originalEndLineNumber;\n        let modifiedStartLineNumber;\n        let modifiedEndLineNumber;\n        let innerChanges = m.innerChanges;\n        if (m.original.isEmpty) {\n            // Insertion\n            originalStartLineNumber = m.original.startLineNumber - 1;\n            originalEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            originalStartLineNumber = m.original.startLineNumber;\n            originalEndLineNumber = m.original.endLineNumberExclusive - 1;\n        }\n        if (m.modified.isEmpty) {\n            // Deletion\n            modifiedStartLineNumber = m.modified.startLineNumber - 1;\n            modifiedEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            modifiedStartLineNumber = m.modified.startLineNumber;\n            modifiedEndLineNumber = m.modified.endLineNumberExclusive - 1;\n        }\n        return {\n            originalStartLineNumber,\n            originalEndLineNumber,\n            modifiedStartLineNumber,\n            modifiedEndLineNumber,\n            charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(m => ({\n                originalStartLineNumber: m.originalRange.startLineNumber,\n                originalStartColumn: m.originalRange.startColumn,\n                originalEndLineNumber: m.originalRange.endLineNumber,\n                originalEndColumn: m.originalRange.endColumn,\n                modifiedStartLineNumber: m.modifiedRange.startLineNumber,\n                modifiedStartColumn: m.modifiedRange.startColumn,\n                modifiedEndLineNumber: m.modifiedRange.endLineNumber,\n                modifiedEndColumn: m.modifiedRange.endColumn,\n            }))\n        };\n    });\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { env } from './process.js';\nexport function isHotReloadEnabled() {\n    return env && !!env['VSCODE_DEV'];\n}\nexport function registerHotReloadHandler(handler) {\n    if (!isHotReloadEnabled()) {\n        return { dispose() { } };\n    }\n    else {\n        const handlers = registerGlobalHotReloadHandler();\n        handlers.add(handler);\n        return {\n            dispose() { handlers.delete(handler); }\n        };\n    }\n}\nfunction registerGlobalHotReloadHandler() {\n    if (!hotReloadHandlers) {\n        hotReloadHandlers = new Set();\n    }\n    const g = globalThis;\n    if (!g.$hotReload_applyNewExports) {\n        g.$hotReload_applyNewExports = oldExports => {\n            for (const h of hotReloadHandlers) {\n                const result = h(oldExports);\n                if (result) {\n                    return result;\n                }\n            }\n            return undefined;\n        };\n    }\n    return hotReloadHandlers;\n}\nlet hotReloadHandlers = undefined;\nif (isHotReloadEnabled()) {\n    // This code does not run in production.\n    registerHotReloadHandler(({ oldExports, newSrc }) => {\n        // Don't match its own source code\n        if (newSrc.indexOf('/* ' + 'hot-reload:patch-prototype-methods */') === -1) {\n            return undefined;\n        }\n        return newExports => {\n            var _a, _b;\n            for (const key in newExports) {\n                const exportedItem = newExports[key];\n                console.log(`[hot-reload] Patching prototype methods of '${key}'`, { exportedItem });\n                if (typeof exportedItem === 'function' && exportedItem.prototype) {\n                    const oldExportedItem = oldExports[key];\n                    if (oldExportedItem) {\n                        for (const prop of Object.getOwnPropertyNames(exportedItem.prototype)) {\n                            const descriptor = Object.getOwnPropertyDescriptor(exportedItem.prototype, prop);\n                            const oldDescriptor = Object.getOwnPropertyDescriptor(oldExportedItem.prototype, prop);\n                            if (((_a = descriptor === null || descriptor === void 0 ? void 0 : descriptor.value) === null || _a === void 0 ? void 0 : _a.toString()) !== ((_b = oldDescriptor === null || oldDescriptor === void 0 ? void 0 : oldDescriptor.value) === null || _b === void 0 ? void 0 : _b.toString())) {\n                                console.log(`[hot-reload] Patching prototype method '${key}.${prop}'`);\n                            }\n                            Object.defineProperty(oldExportedItem.prototype, prop, descriptor);\n                        }\n                        newExports[key] = oldExportedItem;\n                    }\n                }\n            }\n            return true;\n        };\n    });\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { isHotReloadEnabled, registerHotReloadHandler } from '../../../../base/common/hotReload.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunHandleChanges, autorunOpts, autorunWithStore, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ElementSizeObserver } from '../../config/elementSizeObserver.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { LengthObj } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/length.js';\nexport function joinCombine(arr1, arr2, keySelector, combine) {\n    if (arr1.length === 0) {\n        return arr2;\n    }\n    if (arr2.length === 0) {\n        return arr1;\n    }\n    const result = [];\n    let i = 0;\n    let j = 0;\n    while (i < arr1.length && j < arr2.length) {\n        const val1 = arr1[i];\n        const val2 = arr2[j];\n        const key1 = keySelector(val1);\n        const key2 = keySelector(val2);\n        if (key1 < key2) {\n            result.push(val1);\n            i++;\n        }\n        else if (key1 > key2) {\n            result.push(val2);\n            j++;\n        }\n        else {\n            result.push(combine(val1, val2));\n            i++;\n            j++;\n        }\n    }\n    while (i < arr1.length) {\n        result.push(arr1[i]);\n        i++;\n    }\n    while (j < arr2.length) {\n        result.push(arr2[j]);\n        j++;\n    }\n    return result;\n}\n// TODO make utility\nexport function applyObservableDecorations(editor, decorations) {\n    const d = new DisposableStore();\n    const decorationsCollection = editor.createDecorationsCollection();\n    d.add(autorunOpts({ debugName: () => `Apply decorations from ${decorations.debugName}` }, reader => {\n        const d = decorations.read(reader);\n        decorationsCollection.set(d);\n    }));\n    d.add({\n        dispose: () => {\n            decorationsCollection.clear();\n        }\n    });\n    return d;\n}\nexport function appendRemoveOnDispose(parent, child) {\n    parent.appendChild(child);\n    return toDisposable(() => {\n        parent.removeChild(child);\n    });\n}\nexport class ObservableElementSizeObserver extends Disposable {\n    get width() { return this._width; }\n    get height() { return this._height; }\n    constructor(element, dimension) {\n        super();\n        this.elementSizeObserver = this._register(new ElementSizeObserver(element, dimension));\n        this._width = observableValue(this, this.elementSizeObserver.getWidth());\n        this._height = observableValue(this, this.elementSizeObserver.getHeight());\n        this._register(this.elementSizeObserver.onDidChange(e => transaction(tx => {\n            /** @description Set width/height from elementSizeObserver */\n            this._width.set(this.elementSizeObserver.getWidth(), tx);\n            this._height.set(this.elementSizeObserver.getHeight(), tx);\n        })));\n    }\n    observe(dimension) {\n        this.elementSizeObserver.observe(dimension);\n    }\n    setAutomaticLayout(automaticLayout) {\n        if (automaticLayout) {\n            this.elementSizeObserver.startObserving();\n        }\n        else {\n            this.elementSizeObserver.stopObserving();\n        }\n    }\n}\nexport function animatedObservable(targetWindow, base, store) {\n    let targetVal = base.get();\n    let startVal = targetVal;\n    let curVal = targetVal;\n    const result = observableValue('animatedValue', targetVal);\n    let animationStartMs = -1;\n    const durationMs = 300;\n    let animationFrame = undefined;\n    store.add(autorunHandleChanges({\n        createEmptyChangeSummary: () => ({ animate: false }),\n        handleChange: (ctx, s) => {\n            if (ctx.didChange(base)) {\n                s.animate = s.animate || ctx.change;\n            }\n            return true;\n        }\n    }, (reader, s) => {\n        /** @description update value */\n        if (animationFrame !== undefined) {\n            targetWindow.cancelAnimationFrame(animationFrame);\n            animationFrame = undefined;\n        }\n        startVal = curVal;\n        targetVal = base.read(reader);\n        animationStartMs = Date.now() - (s.animate ? 0 : durationMs);\n        update();\n    }));\n    function update() {\n        const passedMs = Date.now() - animationStartMs;\n        curVal = Math.floor(easeOutExpo(passedMs, startVal, targetVal - startVal, durationMs));\n        if (passedMs < durationMs) {\n            animationFrame = targetWindow.requestAnimationFrame(update);\n        }\n        else {\n            curVal = targetVal;\n        }\n        result.set(curVal, undefined);\n    }\n    return result;\n}\nfunction easeOutExpo(t, b, c, d) {\n    return t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nexport class ViewZoneOverlayWidget extends Disposable {\n    constructor(editor, viewZone, htmlElement) {\n        super();\n        this._register(new ManagedOverlayWidget(editor, htmlElement));\n        this._register(applyStyle(htmlElement, {\n            height: viewZone.actualHeight,\n            top: viewZone.actualTop,\n        }));\n    }\n}\nexport class PlaceholderViewZone {\n    get afterLineNumber() { return this._afterLineNumber.get(); }\n    constructor(_afterLineNumber, heightInPx) {\n        this._afterLineNumber = _afterLineNumber;\n        this.heightInPx = heightInPx;\n        this.domNode = document.createElement('div');\n        this._actualTop = observableValue(this, undefined);\n        this._actualHeight = observableValue(this, undefined);\n        this.actualTop = this._actualTop;\n        this.actualHeight = this._actualHeight;\n        this.showInHiddenAreas = true;\n        this.onChange = this._afterLineNumber;\n        this.onDomNodeTop = (top) => {\n            this._actualTop.set(top, undefined);\n        };\n        this.onComputedHeight = (height) => {\n            this._actualHeight.set(height, undefined);\n        };\n    }\n}\nexport class ManagedOverlayWidget {\n    constructor(_editor, _domElement) {\n        this._editor = _editor;\n        this._domElement = _domElement;\n        this._overlayWidgetId = `managedOverlayWidget-${ManagedOverlayWidget._counter++}`;\n        this._overlayWidget = {\n            getId: () => this._overlayWidgetId,\n            getDomNode: () => this._domElement,\n            getPosition: () => null\n        };\n        this._editor.addOverlayWidget(this._overlayWidget);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this._overlayWidget);\n    }\n}\nManagedOverlayWidget._counter = 0;\nexport function applyStyle(domNode, style) {\n    return autorun(reader => {\n        /** @description applyStyle */\n        for (let [key, val] of Object.entries(style)) {\n            if (val && typeof val === 'object' && 'read' in val) {\n                val = val.read(reader);\n            }\n            if (typeof val === 'number') {\n                val = `${val}px`;\n            }\n            key = key.replace(/[A-Z]/g, m => '-' + m.toLowerCase());\n            domNode.style[key] = val;\n        }\n    });\n}\nexport function readHotReloadableExport(value, reader) {\n    observeHotReloadableExports([value], reader);\n    return value;\n}\nexport function observeHotReloadableExports(values, reader) {\n    if (isHotReloadEnabled()) {\n        const o = observableSignalFromEvent('reload', event => registerHotReloadHandler(({ oldExports }) => {\n            if (![...Object.values(oldExports)].some(v => values.includes(v))) {\n                return undefined;\n            }\n            return (_newExports) => {\n                event(undefined);\n                return true;\n            };\n        }));\n        o.read(reader);\n    }\n}\nexport function applyViewZones(editor, viewZones, setIsUpdating, zoneIds) {\n    const store = new DisposableStore();\n    const lastViewZoneIds = [];\n    store.add(autorunWithStore((reader, store) => {\n        /** @description applyViewZones */\n        const curViewZones = viewZones.read(reader);\n        const viewZonIdsPerViewZone = new Map();\n        const viewZoneIdPerOnChangeObservable = new Map();\n        // Add/remove view zones\n        if (setIsUpdating) {\n            setIsUpdating(true);\n        }\n        editor.changeViewZones(a => {\n            for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n                zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.delete(id);\n            }\n            lastViewZoneIds.length = 0;\n            for (const z of curViewZones) {\n                const id = a.addZone(z);\n                if (z.setZoneId) {\n                    z.setZoneId(id);\n                }\n                lastViewZoneIds.push(id);\n                zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.add(id);\n                viewZonIdsPerViewZone.set(z, id);\n            }\n        });\n        if (setIsUpdating) {\n            setIsUpdating(false);\n        }\n        // Layout zone on change\n        store.add(autorunHandleChanges({\n            createEmptyChangeSummary() {\n                return { zoneIds: [] };\n            },\n            handleChange(context, changeSummary) {\n                const id = viewZoneIdPerOnChangeObservable.get(context.changedObservable);\n                if (id !== undefined) {\n                    changeSummary.zoneIds.push(id);\n                }\n                return true;\n            },\n        }, (reader, changeSummary) => {\n            /** @description layoutZone on change */\n            for (const vz of curViewZones) {\n                if (vz.onChange) {\n                    viewZoneIdPerOnChangeObservable.set(vz.onChange, viewZonIdsPerViewZone.get(vz));\n                    vz.onChange.read(reader);\n                }\n            }\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of changeSummary.zoneIds) {\n                a.layoutZone(id);\n            } });\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }));\n    }));\n    store.add({\n        dispose() {\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n            } });\n            zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.clear();\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }\n    });\n    return store;\n}\nexport class DisposableCancellationTokenSource extends CancellationTokenSource {\n    dispose() {\n        super.dispose(true);\n    }\n}\nexport function translatePosition(posInOriginal, mappings) {\n    const mapping = findLast(mappings, m => m.original.startLineNumber <= posInOriginal.lineNumber);\n    if (!mapping) {\n        // No changes before the position\n        return Range.fromPositions(posInOriginal);\n    }\n    if (mapping.original.endLineNumberExclusive <= posInOriginal.lineNumber) {\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.endLineNumberExclusive + mapping.modified.endLineNumberExclusive;\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n    }\n    if (!mapping.innerChanges) {\n        // Only for legacy algorithm\n        return Range.fromPositions(new Position(mapping.modified.startLineNumber, 1));\n    }\n    const innerMapping = findLast(mapping.innerChanges, m => m.originalRange.getStartPosition().isBeforeOrEqual(posInOriginal));\n    if (!innerMapping) {\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.startLineNumber + mapping.modified.startLineNumber;\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n    }\n    if (innerMapping.originalRange.containsPosition(posInOriginal)) {\n        return innerMapping.modifiedRange;\n    }\n    else {\n        const l = lengthBetweenPositions(innerMapping.originalRange.getEndPosition(), posInOriginal);\n        return Range.fromPositions(addLength(innerMapping.modifiedRange.getEndPosition(), l));\n    }\n}\nfunction lengthBetweenPositions(position1, position2) {\n    if (position1.lineNumber === position2.lineNumber) {\n        return new LengthObj(0, position2.column - position1.column);\n    }\n    else {\n        return new LengthObj(position2.lineNumber - position1.lineNumber, position2.column - 1);\n    }\n}\nfunction addLength(position, length) {\n    if (length.lineCount === 0) {\n        return new Position(position.lineNumber, position.column + length.columnCount);\n    }\n    else {\n        return new Position(position.lineNumber + length.lineCount, length.columnCount + 1);\n    }\n}\nexport function bindContextKey(key, service, computeValue) {\n    const boundKey = key.bindTo(service);\n    return autorunOpts({ debugName: () => `Update ${key.key}` }, reader => {\n        boundKey.set(computeValue(reader));\n    });\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { forEachAdjacent, groupAdjacentBy } from '../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableValue, subtransaction, transaction } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { applyStyle } from './utils.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../common/core/offsetRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { LineRangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\nimport { localize } from '../../../../nls.js';\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport './accessibleDiffViewer.css';\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\nlet AccessibleDiffViewer = class AccessibleDiffViewer extends Disposable {\n    constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _editors, _instantiationService) {\n        super();\n        this._parentNode = _parentNode;\n        this._visible = _visible;\n        this._setVisible = _setVisible;\n        this._canClose = _canClose;\n        this._width = _width;\n        this._height = _height;\n        this._diffs = _diffs;\n        this._editors = _editors;\n        this._instantiationService = _instantiationService;\n        this._state = derivedWithStore(this, (reader, store) => {\n            const visible = this._visible.read(reader);\n            this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n            if (!visible) {\n                return null;\n            }\n            const model = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._editors, this._setVisible, this._canClose));\n            const view = store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._editors));\n            return { model, view, };\n        }).recomputeInitiallyAndOnChange(this._store);\n    }\n    next() {\n        transaction(tx => {\n            const isVisible = this._visible.get();\n            this._setVisible(true, tx);\n            if (isVisible) {\n                this._state.get().model.nextGroup(tx);\n            }\n        });\n    }\n    prev() {\n        transaction(tx => {\n            this._setVisible(true, tx);\n            this._state.get().model.previousGroup(tx);\n        });\n    }\n    close() {\n        transaction(tx => {\n            this._setVisible(false, tx);\n        });\n    }\n};\nAccessibleDiffViewer._ttPolicy = createTrustedTypesPolicy('diffReview', { createHTML: value => value });\nAccessibleDiffViewer = __decorate([\n    __param(8, IInstantiationService)\n], AccessibleDiffViewer);\nexport { AccessibleDiffViewer };\nlet ViewModel = class ViewModel extends Disposable {\n    constructor(_diffs, _editors, _setVisible, canClose, _audioCueService) {\n        super();\n        this._diffs = _diffs;\n        this._editors = _editors;\n        this._setVisible = _setVisible;\n        this.canClose = canClose;\n        this._audioCueService = _audioCueService;\n        this._groups = observableValue(this, []);\n        this._currentGroupIdx = observableValue(this, 0);\n        this._currentElementIdx = observableValue(this, 0);\n        this.groups = this._groups;\n        this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\n        this.currentGroupIndex = this._currentGroupIdx;\n        this.currentElement = this._currentElementIdx.map((idx, r) => { var _a; return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx]; });\n        this._register(autorun(reader => {\n            /** @description update groups */\n            const diffs = this._diffs.read(reader);\n            if (!diffs) {\n                this._groups.set([], undefined);\n                return;\n            }\n            const groups = computeViewElementGroups(diffs, this._editors.original.getModel().getLineCount(), this._editors.modified.getModel().getLineCount());\n            transaction(tx => {\n                const p = this._editors.modified.getPosition();\n                if (p) {\n                    const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);\n                    if (nextGroup !== -1) {\n                        this._currentGroupIdx.set(nextGroup, tx);\n                    }\n                }\n                this._groups.set(groups, tx);\n            });\n        }));\n        this._register(autorun(reader => {\n            /** @description play audio-cue for diff */\n            const currentViewItem = this.currentElement.read(reader);\n            if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\n                this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n            else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\n                this._audioCueService.playAudioCue(AudioCue.diffLineInserted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n        }));\n        this._register(autorun(reader => {\n            var _a;\n            /** @description select lines in editor */\n            // This ensures editor commands (like revert/stage) work\n            const currentViewItem = this.currentElement.read(reader);\n            if (currentViewItem && currentViewItem.type !== LineType.Header) {\n                const lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modified.startLineNumber;\n                this._editors.modified.setSelection(Range.fromPositions(new Position(lineNumber, 1)));\n            }\n        }));\n    }\n    _goToGroupDelta(delta, tx) {\n        const groups = this.groups.get();\n        if (!groups || groups.length <= 1) {\n            return;\n        }\n        subtransaction(tx, tx => {\n            this._currentGroupIdx.set(OffsetRange.ofLength(groups.length).clipCyclic(this._currentGroupIdx.get() + delta), tx);\n            this._currentElementIdx.set(0, tx);\n        });\n    }\n    nextGroup(tx) { this._goToGroupDelta(1, tx); }\n    previousGroup(tx) { this._goToGroupDelta(-1, tx); }\n    _goToLineDelta(delta) {\n        const group = this.currentGroup.get();\n        if (!group || group.lines.length <= 1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(OffsetRange.ofLength(group.lines.length).clip(this._currentElementIdx.get() + delta), tx);\n        });\n    }\n    goToNextLine() { this._goToLineDelta(1); }\n    goToPreviousLine() { this._goToLineDelta(-1); }\n    goToLine(line) {\n        const group = this.currentGroup.get();\n        if (!group) {\n            return;\n        }\n        const idx = group.lines.indexOf(line);\n        if (idx === -1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(idx, tx);\n        });\n    }\n    revealCurrentElementInEditor() {\n        this._setVisible(false, undefined);\n        const curElem = this.currentElement.get();\n        if (curElem) {\n            if (curElem.type === LineType.Deleted) {\n                this._editors.original.setSelection(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n                this._editors.original.revealLine(curElem.originalLineNumber);\n                this._editors.original.focus();\n            }\n            else {\n                if (curElem.type !== LineType.Header) {\n                    this._editors.modified.setSelection(Range.fromPositions(new Position(curElem.modifiedLineNumber, 1)));\n                    this._editors.modified.revealLine(curElem.modifiedLineNumber);\n                }\n                this._editors.modified.focus();\n            }\n        }\n    }\n    close() {\n        this._setVisible(false, undefined);\n        this._editors.modified.focus();\n    }\n};\nViewModel = __decorate([\n    __param(4, IAudioCueService)\n], ViewModel);\nconst viewElementGroupLineMargin = 3;\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\n    const result = [];\n    for (const g of groupAdjacentBy(diffs, (a, b) => (b.modified.startLineNumber - a.modified.endLineNumberExclusive < 2 * viewElementGroupLineMargin))) {\n        const viewElements = [];\n        viewElements.push(new HeaderViewElement());\n        const origFullRange = new LineRange(Math.max(1, g[0].original.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].original.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\n        const modifiedFullRange = new LineRange(Math.max(1, g[0].modified.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modified.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\n        forEachAdjacent(g, (a, b) => {\n            const origRange = new LineRange(a ? a.original.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.original.startLineNumber : origFullRange.endLineNumberExclusive);\n            const modifiedRange = new LineRange(a ? a.modified.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modified.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n            origRange.forEach(origLineNumber => {\n                viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n            });\n            if (b) {\n                b.original.forEach(origLineNumber => {\n                    viewElements.push(new DeletedLineViewElement(b, origLineNumber));\n                });\n                b.modified.forEach(modifiedLineNumber => {\n                    viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n                });\n            }\n        });\n        const modifiedRange = g[0].modified.join(g[g.length - 1].modified);\n        const originalRange = g[0].original.join(g[g.length - 1].original);\n        result.push(new ViewElementGroup(new LineRangeMapping(modifiedRange, originalRange), viewElements));\n    }\n    return result;\n}\nvar LineType;\n(function (LineType) {\n    LineType[LineType[\"Header\"] = 0] = \"Header\";\n    LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\n    LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\n    LineType[LineType[\"Added\"] = 3] = \"Added\";\n})(LineType || (LineType = {}));\nclass ViewElementGroup {\n    constructor(range, lines) {\n        this.range = range;\n        this.lines = lines;\n    }\n}\nclass HeaderViewElement {\n    constructor() {\n        this.type = LineType.Header;\n    }\n}\nclass DeletedLineViewElement {\n    constructor(diff, originalLineNumber) {\n        this.diff = diff;\n        this.originalLineNumber = originalLineNumber;\n        this.type = LineType.Deleted;\n        this.modifiedLineNumber = undefined;\n    }\n}\nclass AddedLineViewElement {\n    constructor(diff, modifiedLineNumber) {\n        this.diff = diff;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Added;\n        this.originalLineNumber = undefined;\n    }\n}\nclass UnchangedLineViewElement {\n    constructor(originalLineNumber, modifiedLineNumber) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Unchanged;\n    }\n}\nlet View = class View extends Disposable {\n    constructor(_element, _model, _width, _height, _editors, _languageService) {\n        super();\n        this._element = _element;\n        this._model = _model;\n        this._width = _width;\n        this._height = _height;\n        this._editors = _editors;\n        this._languageService = _languageService;\n        this.domNode = this._element;\n        this.domNode.className = 'diff-review monaco-editor-background';\n        const actionBarContainer = document.createElement('div');\n        actionBarContainer.className = 'diff-review-actions';\n        this._actionBar = this._register(new ActionBar(actionBarContainer));\n        this._register(autorun(reader => {\n            /** @description update actions */\n            this._actionBar.clear();\n            if (this._model.canClose.read(reader)) {\n                this._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, async () => _model.close()), { label: false, icon: true });\n            }\n        }));\n        this._content = document.createElement('div');\n        this._content.className = 'diff-review-content';\n        this._content.setAttribute('role', 'code');\n        this._scrollbar = this._register(new DomScrollableElement(this._content, {}));\n        reset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\n        this._register(toDisposable(() => { reset(this.domNode); }));\n        this._register(applyStyle(this.domNode, { width: this._width, height: this._height }));\n        this._register(applyStyle(this._content, { width: this._width, height: this._height }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description render */\n            this._model.currentGroup.read(reader);\n            this._render(store);\n        }));\n        // TODO@hediet use commands\n        this._register(addStandardDisposableListener(this.domNode, 'keydown', (e) => {\n            if (e.equals(18 /* KeyCode.DownArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                this._model.goToNextLine();\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                this._model.goToPreviousLine();\n            }\n            if (e.equals(9 /* KeyCode.Escape */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */)\n                || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */)\n                || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\n                e.preventDefault();\n                this._model.close();\n            }\n            if (e.equals(10 /* KeyCode.Space */)\n                || e.equals(3 /* KeyCode.Enter */)) {\n                e.preventDefault();\n                this._model.revealCurrentElementInEditor();\n            }\n        }));\n    }\n    _render(store) {\n        const originalOptions = this._editors.original.getOptions();\n        const modifiedOptions = this._editors.modified.getOptions();\n        const container = document.createElement('div');\n        container.className = 'diff-review-table';\n        container.setAttribute('role', 'list');\n        container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n        applyFontInfo(container, modifiedOptions.get(50 /* EditorOption.fontInfo */));\n        reset(this._content, container);\n        const originalModel = this._editors.original.getModel();\n        const modifiedModel = this._editors.modified.getModel();\n        if (!originalModel || !modifiedModel) {\n            return;\n        }\n        const originalModelOpts = originalModel.getOptions();\n        const modifiedModelOpts = modifiedModel.getOptions();\n        const lineHeight = modifiedOptions.get(66 /* EditorOption.lineHeight */);\n        const group = this._model.currentGroup.get();\n        for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {\n            if (!group) {\n                break;\n            }\n            let row;\n            if (viewItem.type === LineType.Header) {\n                const header = document.createElement('div');\n                header.className = 'diff-review-row';\n                header.setAttribute('role', 'listitem');\n                const r = group.range;\n                const diffIndex = this._model.currentGroupIndex.get();\n                const diffsLength = this._model.groups.get().length;\n                const getAriaLines = (lines) => lines === 0 ? localize('no_lines_changed', \"no lines changed\")\n                    : lines === 1 ? localize('one_line_changed', \"1 line changed\")\n                        : localize('more_lines_changed', \"{0} lines changed\", lines);\n                const originalChangedLinesCntAria = getAriaLines(r.original.length);\n                const modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n                header.setAttribute('aria-label', localize({\n                    key: 'header',\n                    comment: [\n                        'This is the ARIA label for a git diff header.',\n                        'A git diff header looks like this: @@ -154,12 +159,39 @@.',\n                        'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\n                        'Variables 0 and 1 refer to the diff index out of total number of diffs.',\n                        'Variables 2 and 4 will be numbers (a line number).',\n                        'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\n                    ]\n                }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", (diffIndex + 1), diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\n                const cell = document.createElement('div');\n                cell.className = 'diff-review-cell diff-review-summary';\n                // e.g.: `1/10: @@ -504,7 +517,7 @@`\n                cell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\n                header.appendChild(cell);\n                row = header;\n            }\n            else {\n                row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\n            }\n            container.appendChild(row);\n            const isSelectedObs = derived(reader => /** @description isSelected */ this._model.currentElement.read(reader) === viewItem);\n            store.add(autorun(reader => {\n                /** @description update tab index */\n                const isSelected = isSelectedObs.read(reader);\n                row.tabIndex = isSelected ? 0 : -1;\n                if (isSelected) {\n                    row.focus();\n                }\n            }));\n            store.add(addDisposableListener(row, 'focus', () => {\n                this._model.goToLine(viewItem);\n            }));\n        }\n        this._scrollbar.scanDomNode();\n    }\n    _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\n        const originalLayoutInfo = originalOptions.get(143 /* EditorOption.layoutInfo */);\n        const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n        const modifiedLayoutInfo = modifiedOptions.get(143 /* EditorOption.layoutInfo */);\n        const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n        let rowClassName = 'diff-review-row';\n        let lineNumbersExtraClassName = '';\n        const spacerClassName = 'diff-review-spacer';\n        let spacerIcon = null;\n        switch (item.type) {\n            case LineType.Added:\n                rowClassName = 'diff-review-row line-insert';\n                lineNumbersExtraClassName = ' char-insert';\n                spacerIcon = accessibleDiffViewerInsertIcon;\n                break;\n            case LineType.Deleted:\n                rowClassName = 'diff-review-row line-delete';\n                lineNumbersExtraClassName = ' char-delete';\n                spacerIcon = accessibleDiffViewerRemoveIcon;\n                break;\n        }\n        const row = document.createElement('div');\n        row.style.minWidth = width + 'px';\n        row.className = rowClassName;\n        row.setAttribute('role', 'listitem');\n        row.ariaLevel = '';\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell';\n        cell.style.height = `${lineHeight}px`;\n        row.appendChild(cell);\n        const originalLineNumber = document.createElement('span');\n        originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\n        originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\n        originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.originalLineNumber !== undefined) {\n            originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n        }\n        else {\n            originalLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(originalLineNumber);\n        const modifiedLineNumber = document.createElement('span');\n        modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.paddingRight = '10px';\n        modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.modifiedLineNumber !== undefined) {\n            modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n        }\n        else {\n            modifiedLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(modifiedLineNumber);\n        const spacer = document.createElement('span');\n        spacer.className = spacerClassName;\n        if (spacerIcon) {\n            const spacerCodicon = document.createElement('span');\n            spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n            spacerCodicon.innerText = '\\u00a0\\u00a0';\n            spacer.appendChild(spacerCodicon);\n        }\n        else {\n            spacer.innerText = '\\u00a0\\u00a0';\n        }\n        cell.appendChild(spacer);\n        let lineContent;\n        if (item.modifiedLineNumber !== undefined) {\n            let html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n        }\n        else {\n            let html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = originalModel.getLineContent(item.originalLineNumber);\n        }\n        if (lineContent.length === 0) {\n            lineContent = localize('blankLine', \"blank\");\n        }\n        let ariaLabel = '';\n        switch (item.type) {\n            case LineType.Unchanged:\n                if (item.originalLineNumber === item.modifiedLineNumber) {\n                    ariaLabel = localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n                }\n                else {\n                    ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n                }\n                break;\n            case LineType.Added:\n                ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n                break;\n            case LineType.Deleted:\n                ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n                break;\n        }\n        row.setAttribute('aria-label', ariaLabel);\n        return row;\n    }\n    _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\n        const lineContent = model.getLineContent(lineNumber);\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n        const r = renderViewLine2(new RenderLineInput((fontInfo.isMonospace && !options.get(33 /* EditorOption.disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(116 /* EditorOption.stopRenderingLineAfter */), options.get(98 /* EditorOption.renderWhitespace */), options.get(93 /* EditorOption.renderControlCharacters */), options.get(51 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n        return r.html;\n    }\n};\nView = __decorate([\n    __param(5, ILanguageService)\n], View);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nexport const diffInsertIcon = registerIcon('diff-insert', Codicon.add, localize('diffInsertIcon', 'Line decoration for inserts in the diff editor.'));\nexport const diffRemoveIcon = registerIcon('diff-remove', Codicon.remove, localize('diffRemoveIcon', 'Line decoration for removals in the diff editor.'));\nexport const diffLineAddDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n    className: 'line-insert',\n    description: 'line-insert',\n    isWholeLine: true,\n    linesDecorationsClassName: 'insert-sign ' + ThemeIcon.asClassName(diffInsertIcon),\n    marginClassName: 'gutter-insert',\n});\nexport const diffLineDeleteDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n    className: 'line-delete',\n    description: 'line-delete',\n    isWholeLine: true,\n    linesDecorationsClassName: 'delete-sign ' + ThemeIcon.asClassName(diffRemoveIcon),\n    marginClassName: 'gutter-delete',\n});\nexport const diffLineAddDecorationBackground = ModelDecorationOptions.register({\n    className: 'line-insert',\n    description: 'line-insert',\n    isWholeLine: true,\n    marginClassName: 'gutter-insert',\n});\nexport const diffLineDeleteDecorationBackground = ModelDecorationOptions.register({\n    className: 'line-delete',\n    description: 'line-delete',\n    isWholeLine: true,\n    marginClassName: 'gutter-delete',\n});\nexport const diffAddDecoration = ModelDecorationOptions.register({\n    className: 'char-insert',\n    description: 'char-insert',\n    shouldFillLineOnLineBreak: true,\n});\nexport const diffWholeLineAddDecoration = ModelDecorationOptions.register({\n    className: 'char-insert',\n    description: 'char-insert',\n    isWholeLine: true,\n});\nexport const diffAddDecorationEmpty = ModelDecorationOptions.register({\n    className: 'char-insert diff-range-empty',\n    description: 'char-insert diff-range-empty',\n});\nexport const diffDeleteDecoration = ModelDecorationOptions.register({\n    className: 'char-delete',\n    description: 'char-delete',\n    shouldFillLineOnLineBreak: true,\n});\nexport const diffWholeLineDeleteDecoration = ModelDecorationOptions.register({\n    className: 'char-delete',\n    description: 'char-delete',\n    isWholeLine: true,\n});\nexport const diffDeleteDecorationEmpty = ModelDecorationOptions.register({\n    className: 'char-delete diff-range-empty',\n    description: 'char-delete diff-range-empty',\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { booleanComparator, compareBy, numberComparator, tieBreakComparators } from '../../../../base/common/arrays.js';\nimport { findMaxIdxBy } from '../../../../base/common/arraysFind.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunHandleChanges, autorunWithStore, constObservable, derived, derivedWithStore, observableFromEvent, observableSignalFromEvent, observableValue, recomputeInitiallyAndOnChange } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { PlaceholderViewZone, ViewZoneOverlayWidget, applyStyle, applyViewZones } from './utils.js';\nimport { OffsetRange, OffsetRangeSet } from '../../../common/core/offsetRange.js';\nimport { localize } from '../../../../nls.js';\nexport class MovedBlocksLinesPart extends Disposable {\n    constructor(_rootElement, _diffModel, _originalEditorLayoutInfo, _modifiedEditorLayoutInfo, _editors) {\n        super();\n        this._rootElement = _rootElement;\n        this._diffModel = _diffModel;\n        this._originalEditorLayoutInfo = _originalEditorLayoutInfo;\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\n        this._editors = _editors;\n        this._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => this._editors.original.getScrollTop());\n        this._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n        this._viewZonesChanged = observableSignalFromEvent('onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n        this.width = observableValue(this, 0);\n        this._modifiedViewZonesChangedSignal = observableSignalFromEvent('modified.onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n        this._originalViewZonesChangedSignal = observableSignalFromEvent('original.onDidChangeViewZones', this._editors.original.onDidChangeViewZones);\n        this._state = derivedWithStore(this, (reader, store) => {\n            /** @description state */\n            var _a;\n            this._element.replaceChildren();\n            const model = this._diffModel.read(reader);\n            const moves = (_a = model === null || model === void 0 ? void 0 : model.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTexts;\n            if (!moves || moves.length === 0) {\n                this.width.set(0, undefined);\n                return;\n            }\n            this._viewZonesChanged.read(reader);\n            const infoOrig = this._originalEditorLayoutInfo.read(reader);\n            const infoMod = this._modifiedEditorLayoutInfo.read(reader);\n            if (!infoOrig || !infoMod) {\n                this.width.set(0, undefined);\n                return;\n            }\n            this._modifiedViewZonesChangedSignal.read(reader);\n            this._originalViewZonesChangedSignal.read(reader);\n            const lines = moves.map((move) => {\n                function computeLineStart(range, editor) {\n                    const t1 = editor.getTopForLineNumber(range.startLineNumber, true);\n                    const t2 = editor.getTopForLineNumber(range.endLineNumberExclusive, true);\n                    return (t1 + t2) / 2;\n                }\n                const start = computeLineStart(move.lineRangeMapping.original, this._editors.original);\n                const startOffset = this._originalScrollTop.read(reader);\n                const end = computeLineStart(move.lineRangeMapping.modified, this._editors.modified);\n                const endOffset = this._modifiedScrollTop.read(reader);\n                const from = start - startOffset;\n                const to = end - endOffset;\n                const top = Math.min(start, end);\n                const bottom = Math.max(start, end);\n                return { range: new OffsetRange(top, bottom), from, to, fromWithoutScroll: start, toWithoutScroll: end, move };\n            });\n            lines.sort(tieBreakComparators(compareBy(l => l.fromWithoutScroll > l.toWithoutScroll, booleanComparator), compareBy(l => l.fromWithoutScroll > l.toWithoutScroll ? l.fromWithoutScroll : -l.toWithoutScroll, numberComparator)));\n            const layout = LinesLayout.compute(lines.map(l => l.range));\n            const padding = 10;\n            const lineAreaLeft = infoOrig.verticalScrollbarWidth;\n            const lineAreaWidth = (layout.getTrackCount() - 1) * 10 + padding * 2;\n            const width = lineAreaLeft + lineAreaWidth + (infoMod.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding);\n            let idx = 0;\n            for (const line of lines) {\n                const track = layout.getTrack(idx);\n                const verticalY = lineAreaLeft + padding + track * 10;\n                const arrowHeight = 15;\n                const arrowWidth = 15;\n                const right = width;\n                const rectWidth = infoMod.glyphMarginWidth + infoMod.lineNumbersWidth;\n                const rectHeight = 18;\n                const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n                rect.classList.add('arrow-rectangle');\n                rect.setAttribute('x', `${right - rectWidth}`);\n                rect.setAttribute('y', `${line.to - rectHeight / 2}`);\n                rect.setAttribute('width', `${rectWidth}`);\n                rect.setAttribute('height', `${rectHeight}`);\n                this._element.appendChild(rect);\n                const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n                path.setAttribute('d', `M ${0} ${line.from} L ${verticalY} ${line.from} L ${verticalY} ${line.to} L ${right - arrowWidth} ${line.to}`);\n                path.setAttribute('fill', 'none');\n                g.appendChild(path);\n                const arrowRight = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n                arrowRight.classList.add('arrow');\n                store.add(autorun(reader => {\n                    path.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n                    arrowRight.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n                }));\n                arrowRight.setAttribute('points', `${right - arrowWidth},${line.to - arrowHeight / 2} ${right},${line.to} ${right - arrowWidth},${line.to + arrowHeight / 2}`);\n                g.appendChild(arrowRight);\n                this._element.appendChild(g);\n                /*\n                TODO@hediet\n                path.addEventListener('mouseenter', () => {\n                    model.setHoveredMovedText(line.move);\n                });\n                path.addEventListener('mouseleave', () => {\n                    model.setHoveredMovedText(undefined);\n                });*/\n                idx++;\n            }\n            this.width.set(lineAreaWidth, undefined);\n        });\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        this._element.setAttribute('class', 'moved-blocks-lines');\n        this._rootElement.appendChild(this._element);\n        this._register(toDisposable(() => this._element.remove()));\n        this._register(autorun(reader => {\n            /** @description update moved blocks lines positioning */\n            const info = this._originalEditorLayoutInfo.read(reader);\n            const info2 = this._modifiedEditorLayoutInfo.read(reader);\n            if (!info || !info2) {\n                return;\n            }\n            this._element.style.left = `${info.width - info.verticalScrollbarWidth}px`;\n            this._element.style.height = `${info.height}px`;\n            this._element.style.width = `${info.verticalScrollbarWidth + info.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding + this.width.read(reader)}px`;\n        }));\n        this._register(recomputeInitiallyAndOnChange(this._state));\n        const movedBlockViewZones = derived(reader => {\n            const model = this._diffModel.read(reader);\n            const d = model === null || model === void 0 ? void 0 : model.diff.read(reader);\n            if (!d) {\n                return [];\n            }\n            return d.movedTexts.map(move => ({\n                move,\n                original: new PlaceholderViewZone(constObservable(move.lineRangeMapping.original.startLineNumber - 1), 18),\n                modified: new PlaceholderViewZone(constObservable(move.lineRangeMapping.modified.startLineNumber - 1), 18),\n            }));\n        });\n        this._register(applyViewZones(this._editors.original, movedBlockViewZones.map(zones => /** @description movedBlockViewZones.original */ zones.map(z => z.original))));\n        this._register(applyViewZones(this._editors.modified, movedBlockViewZones.map(zones => /** @description movedBlockViewZones.modified */ zones.map(z => z.modified))));\n        this._register(autorunWithStore((reader, store) => {\n            const blocks = movedBlockViewZones.read(reader);\n            for (const b of blocks) {\n                store.add(new MovedBlockOverlayWidget(this._editors.original, b.original, b.move, 'original', this._diffModel.get()));\n                store.add(new MovedBlockOverlayWidget(this._editors.modified, b.modified, b.move, 'modified', this._diffModel.get()));\n            }\n        }));\n        const originalCursorPosition = observableFromEvent(this._editors.original.onDidChangeCursorPosition, () => this._editors.original.getPosition());\n        const modifiedCursorPosition = observableFromEvent(this._editors.modified.onDidChangeCursorPosition, () => this._editors.modified.getPosition());\n        const originalHasFocus = observableSignalFromEvent('original.onDidFocusEditorWidget', e => this._editors.original.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0)));\n        const modifiedHasFocus = observableSignalFromEvent('modified.onDidFocusEditorWidget', e => this._editors.modified.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0)));\n        let lastChangedEditor = 'modified';\n        this._register(autorunHandleChanges({\n            createEmptyChangeSummary: () => undefined,\n            handleChange: (ctx, summary) => {\n                if (ctx.didChange(originalHasFocus)) {\n                    lastChangedEditor = 'original';\n                }\n                if (ctx.didChange(modifiedHasFocus)) {\n                    lastChangedEditor = 'modified';\n                }\n                return true;\n            }\n        }, reader => {\n            /** @description MovedBlocksLines.setActiveMovedTextFromCursor */\n            originalHasFocus.read(reader);\n            modifiedHasFocus.read(reader);\n            const m = this._diffModel.read(reader);\n            if (!m) {\n                return;\n            }\n            const diff = m.diff.read(reader);\n            let movedText = undefined;\n            if (diff && lastChangedEditor === 'original') {\n                const originalPos = originalCursorPosition.read(reader);\n                if (originalPos) {\n                    movedText = diff.movedTexts.find(m => m.lineRangeMapping.original.contains(originalPos.lineNumber));\n                }\n            }\n            if (diff && lastChangedEditor === 'modified') {\n                const modifiedPos = modifiedCursorPosition.read(reader);\n                if (modifiedPos) {\n                    movedText = diff.movedTexts.find(m => m.lineRangeMapping.modified.contains(modifiedPos.lineNumber));\n                }\n            }\n            if (movedText !== m.movedTextToCompare.get()) {\n                m.movedTextToCompare.set(undefined, undefined);\n            }\n            m.setActiveMovedText(movedText);\n        }));\n    }\n}\nMovedBlocksLinesPart.movedCodeBlockPadding = 4;\nclass LinesLayout {\n    static compute(lines) {\n        const setsPerTrack = [];\n        const trackPerLineIdx = [];\n        for (const line of lines) {\n            let trackIdx = setsPerTrack.findIndex(set => !set.intersectsStrict(line));\n            if (trackIdx === -1) {\n                const maxTrackCount = 6;\n                if (setsPerTrack.length >= maxTrackCount) {\n                    trackIdx = findMaxIdxBy(setsPerTrack, compareBy(set => set.intersectWithRangeLength(line), numberComparator));\n                }\n                else {\n                    trackIdx = setsPerTrack.length;\n                    setsPerTrack.push(new OffsetRangeSet());\n                }\n            }\n            setsPerTrack[trackIdx].addRange(line);\n            trackPerLineIdx.push(trackIdx);\n        }\n        return new LinesLayout(setsPerTrack.length, trackPerLineIdx);\n    }\n    constructor(_trackCount, trackPerLineIdx) {\n        this._trackCount = _trackCount;\n        this.trackPerLineIdx = trackPerLineIdx;\n    }\n    getTrack(lineIdx) {\n        return this.trackPerLineIdx[lineIdx];\n    }\n    getTrackCount() {\n        return this._trackCount;\n    }\n}\nclass MovedBlockOverlayWidget extends ViewZoneOverlayWidget {\n    constructor(_editor, _viewZone, _move, _kind, _diffModel) {\n        const root = h('div.diff-hidden-lines-widget');\n        super(_editor, _viewZone, root.root);\n        this._editor = _editor;\n        this._move = _move;\n        this._kind = _kind;\n        this._diffModel = _diffModel;\n        this._nodes = h('div.diff-moved-code-block', { style: { marginRight: '4px' } }, [\n            h('div.text-content@textContent'),\n            h('div.action-bar@actionBar'),\n        ]);\n        root.root.appendChild(this._nodes.root);\n        const editorLayout = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n        this._register(applyStyle(this._nodes.root, {\n            paddingRight: editorLayout.map(l => l.verticalScrollbarWidth)\n        }));\n        let text;\n        if (_move.changes.length > 0) {\n            text = this._kind === 'original' ? localize('codeMovedToWithChanges', 'Code moved with changes to line {0}-{1}', this._move.lineRangeMapping.modified.startLineNumber, this._move.lineRangeMapping.modified.endLineNumberExclusive - 1) : localize('codeMovedFromWithChanges', 'Code moved with changes from line {0}-{1}', this._move.lineRangeMapping.original.startLineNumber, this._move.lineRangeMapping.original.endLineNumberExclusive - 1);\n        }\n        else {\n            text = this._kind === 'original' ? localize('codeMovedTo', 'Code moved to line {0}-{1}', this._move.lineRangeMapping.modified.startLineNumber, this._move.lineRangeMapping.modified.endLineNumberExclusive - 1) : localize('codeMovedFrom', 'Code moved from line {0}-{1}', this._move.lineRangeMapping.original.startLineNumber, this._move.lineRangeMapping.original.endLineNumberExclusive - 1);\n        }\n        const actionBar = this._register(new ActionBar(this._nodes.actionBar, {\n            highlightToggledItems: true,\n        }));\n        const caption = new Action('', text, '', false);\n        actionBar.push(caption, { icon: false, label: true });\n        const actionCompare = new Action('', 'Compare', ThemeIcon.asClassName(Codicon.compareChanges), true, () => {\n            this._editor.focus();\n            this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get() === _move ? undefined : this._move, undefined);\n        });\n        this._register(autorun(reader => {\n            const isActive = this._diffModel.movedTextToCompare.read(reader) === _move;\n            actionCompare.checked = isActive;\n        }));\n        actionBar.push(actionCompare, { icon: false, label: true });\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../base/browser/dom.js';\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorunWithStore, derived } from '../../../../base/common/observable.js';\nimport { diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecoration, diffDeleteDecorationEmpty, diffLineAddDecorationBackground, diffLineAddDecorationBackgroundWithIndicator, diffLineDeleteDecorationBackground, diffLineDeleteDecorationBackgroundWithIndicator, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from './decorations.js';\nimport { MovedBlocksLinesPart } from './movedBlocksLines.js';\nimport { applyObservableDecorations } from './utils.js';\nimport { LineRange, LineRangeSet } from '../../../common/core/lineRange.js';\nimport { Range } from '../../../common/core/range.js';\nimport { GlyphMarginLane } from '../../../common/model.js';\nimport { localize } from '../../../../nls.js';\nexport class DiffEditorDecorations extends Disposable {\n    constructor(_editors, _diffModel, _options, widget) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._decorations = derived(this, (reader) => {\n            var _a;\n            const diff = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader);\n            if (!diff) {\n                return null;\n            }\n            const movedTextToCompare = this._diffModel.read(reader).movedTextToCompare.read(reader);\n            const renderIndicators = this._options.renderIndicators.read(reader);\n            const showEmptyDecorations = this._options.showEmptyDecorations.read(reader);\n            const originalDecorations = [];\n            const modifiedDecorations = [];\n            if (!movedTextToCompare) {\n                for (const m of diff.mappings) {\n                    if (!m.lineRangeMapping.original.isEmpty) {\n                        originalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange(), options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n                    }\n                    if (!m.lineRangeMapping.modified.isEmpty) {\n                        modifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange(), options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n                    }\n                    if (m.lineRangeMapping.modified.isEmpty || m.lineRangeMapping.original.isEmpty) {\n                        if (!m.lineRangeMapping.original.isEmpty) {\n                            originalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange(), options: diffWholeLineDeleteDecoration });\n                        }\n                        if (!m.lineRangeMapping.modified.isEmpty) {\n                            modifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange(), options: diffWholeLineAddDecoration });\n                        }\n                    }\n                    else {\n                        for (const i of m.lineRangeMapping.innerChanges || []) {\n                            // Don't show empty markers outside the line range\n                            if (m.lineRangeMapping.original.contains(i.originalRange.startLineNumber)) {\n                                originalDecorations.push({ range: i.originalRange, options: (i.originalRange.isEmpty() && showEmptyDecorations) ? diffDeleteDecorationEmpty : diffDeleteDecoration });\n                            }\n                            if (m.lineRangeMapping.modified.contains(i.modifiedRange.startLineNumber)) {\n                                modifiedDecorations.push({ range: i.modifiedRange, options: (i.modifiedRange.isEmpty() && showEmptyDecorations) ? diffAddDecorationEmpty : diffAddDecoration });\n                            }\n                        }\n                    }\n                }\n            }\n            if (movedTextToCompare) {\n                for (const m of movedTextToCompare.changes) {\n                    const fullRangeOriginal = m.original.toInclusiveRange();\n                    if (fullRangeOriginal) {\n                        originalDecorations.push({ range: fullRangeOriginal, options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n                    }\n                    const fullRangeModified = m.modified.toInclusiveRange();\n                    if (fullRangeModified) {\n                        modifiedDecorations.push({ range: fullRangeModified, options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n                    }\n                    for (const i of m.innerChanges || []) {\n                        originalDecorations.push({ range: i.originalRange, options: diffDeleteDecoration });\n                        modifiedDecorations.push({ range: i.modifiedRange, options: diffAddDecoration });\n                    }\n                }\n            }\n            const activeMovedText = this._diffModel.read(reader).activeMovedText.read(reader);\n            for (const m of diff.movedTexts) {\n                originalDecorations.push({\n                    range: m.lineRangeMapping.original.toInclusiveRange(), options: {\n                        description: 'moved',\n                        blockClassName: 'movedOriginal' + (m === activeMovedText ? ' currentMove' : ''),\n                        blockPadding: [MovedBlocksLinesPart.movedCodeBlockPadding, 0, MovedBlocksLinesPart.movedCodeBlockPadding, MovedBlocksLinesPart.movedCodeBlockPadding],\n                    }\n                });\n                modifiedDecorations.push({\n                    range: m.lineRangeMapping.modified.toInclusiveRange(), options: {\n                        description: 'moved',\n                        blockClassName: 'movedModified' + (m === activeMovedText ? ' currentMove' : ''),\n                        blockPadding: [4, 0, 4, 4],\n                    }\n                });\n            }\n            return { originalDecorations, modifiedDecorations };\n        });\n        this._register(new RevertButtonsFeature(_editors, _diffModel, _options, widget));\n        this._register(applyObservableDecorations(this._editors.original, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.originalDecorations) || [])));\n        this._register(applyObservableDecorations(this._editors.modified, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.modifiedDecorations) || [])));\n    }\n}\nclass RevertButtonsFeature extends Disposable {\n    constructor(_editors, _diffModel, _options, _widget) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._widget = _widget;\n        const emptyArr = [];\n        const selectedDiffs = derived(this, (reader) => {\n            /** @description selectedDiffs */\n            const model = this._diffModel.read(reader);\n            const diff = model === null || model === void 0 ? void 0 : model.diff.read(reader);\n            if (!diff) {\n                return emptyArr;\n            }\n            const selections = this._editors.modifiedSelections.read(reader);\n            if (selections.every(s => s.isEmpty())) {\n                return emptyArr;\n            }\n            const lineRanges = new LineRangeSet(selections.map(s => LineRange.fromRangeInclusive(s)));\n            const mappings = diff.mappings.filter(m => m.lineRangeMapping.innerChanges && lineRanges.intersects(m.lineRangeMapping.modified));\n            const result = mappings.map(mapping => ({\n                mapping,\n                rangeMappings: mapping.lineRangeMapping.innerChanges.filter(c => selections.some(s => Range.areIntersecting(c.modifiedRange, s)))\n            }));\n            if (result.length === 0 || result.every(r => r.rangeMappings.length === 0)) {\n                return emptyArr;\n            }\n            return result;\n        });\n        this._register(autorunWithStore((reader, store) => {\n            const model = this._diffModel.read(reader);\n            const diff = model === null || model === void 0 ? void 0 : model.diff.read(reader);\n            if (!model || !diff) {\n                return;\n            }\n            const movedTextToCompare = this._diffModel.read(reader).movedTextToCompare.read(reader);\n            if (movedTextToCompare) {\n                return;\n            }\n            if (!this._options.shouldRenderRevertArrows.read(reader)) {\n                return;\n            }\n            const glyphWidgetsModified = [];\n            const selectedDiffs_ = selectedDiffs.read(reader);\n            const diffsSet = new Set(selectedDiffs_.map(d => d.mapping));\n            if (selectedDiffs_.length > 0) {\n                const selections = this._editors.modifiedSelections.read(reader);\n                const btn = new RevertButton(selections[selections.length - 1].positionLineNumber, this._widget, selectedDiffs_.flatMap(d => d.rangeMappings), true);\n                this._editors.modified.addGlyphMarginWidget(btn);\n                glyphWidgetsModified.push(btn);\n            }\n            for (const m of diff.mappings) {\n                if (diffsSet.has(m)) {\n                    continue;\n                }\n                if (!m.lineRangeMapping.modified.isEmpty && m.lineRangeMapping.innerChanges) {\n                    const btn = new RevertButton(m.lineRangeMapping.modified.startLineNumber, this._widget, m.lineRangeMapping.innerChanges, false);\n                    this._editors.modified.addGlyphMarginWidget(btn);\n                    glyphWidgetsModified.push(btn);\n                }\n            }\n            store.add(toDisposable(() => {\n                for (const w of glyphWidgetsModified) {\n                    this._editors.modified.removeGlyphMarginWidget(w);\n                }\n            }));\n        }));\n    }\n}\nclass RevertButton {\n    getId() { return this._id; }\n    constructor(_lineNumber, _widget, _diffs, _selection) {\n        this._lineNumber = _lineNumber;\n        this._widget = _widget;\n        this._diffs = _diffs;\n        this._selection = _selection;\n        this._id = `revertButton${RevertButton.counter++}`;\n        this._domNode = h('div.revertButton', {\n            title: this._selection\n                ? localize('revertSelectedChanges', 'Revert Selected Changes')\n                : localize('revertChange', 'Revert Change')\n        }, [renderIcon(Codicon.arrowRight)]).root;\n        this._domNode.onmousedown = e => {\n            // don't prevent context menu from showing up\n            if (e.button !== 2) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        };\n        this._domNode.onmouseup = e => {\n            e.stopPropagation();\n            e.preventDefault();\n        };\n        this._domNode.onclick = (e) => {\n            this._widget.revertRangeMappings(this._diffs);\n            e.stopPropagation();\n            e.preventDefault();\n        };\n    }\n    /**\n     * Get the dom node of the glyph widget.\n     */\n    getDomNode() {\n        return this._domNode;\n    }\n    /**\n     * Get the placement of the glyph widget.\n     */\n    getPosition() {\n        return {\n            lane: GlyphMarginLane.Right,\n            range: {\n                startColumn: 1,\n                startLineNumber: this._lineNumber,\n                endColumn: 1,\n                endLineNumber: this._lineNumber,\n            },\n            zIndex: 10001,\n        };\n    }\n}\nRevertButton.counter = 0;\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableValue } from '../../../../base/common/observable.js';\nexport class DiffEditorSash extends Disposable {\n    constructor(_options, _domNode, _dimensions, _sashes) {\n        super();\n        this._options = _options;\n        this._domNode = _domNode;\n        this._dimensions = _dimensions;\n        this._sashes = _sashes;\n        this._sashRatio = observableValue(this, undefined);\n        this.sashLeft = derived(this, reader => {\n            var _a;\n            const ratio = (_a = this._sashRatio.read(reader)) !== null && _a !== void 0 ? _a : this._options.splitViewDefaultRatio.read(reader);\n            return this._computeSashLeft(ratio, reader);\n        });\n        this._sash = this._register(new Sash(this._domNode, {\n            getVerticalSashTop: (_sash) => 0,\n            getVerticalSashLeft: (_sash) => this.sashLeft.get(),\n            getVerticalSashHeight: (_sash) => this._dimensions.height.get(),\n        }, { orientation: 0 /* Orientation.VERTICAL */ }));\n        this._startSashPosition = undefined;\n        this._register(this._sash.onDidStart(() => {\n            this._startSashPosition = this.sashLeft.get();\n        }));\n        this._register(this._sash.onDidChange((e) => {\n            const contentWidth = this._dimensions.width.get();\n            const sashPosition = this._computeSashLeft((this._startSashPosition + (e.currentX - e.startX)) / contentWidth, undefined);\n            this._sashRatio.set(sashPosition / contentWidth, undefined);\n        }));\n        this._register(this._sash.onDidEnd(() => this._sash.layout()));\n        this._register(this._sash.onDidReset(() => this._sashRatio.set(undefined, undefined)));\n        this._register(autorun(reader => {\n            const sashes = this._sashes.read(reader);\n            if (sashes) {\n                this._sash.orthogonalEndSash = sashes.bottom;\n            }\n        }));\n        this._register(autorun(reader => {\n            /** @description DiffEditorSash.layoutSash */\n            const enabled = this._options.enableSplitViewResizing.read(reader);\n            this._sash.state = enabled ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n            this.sashLeft.read(reader);\n            this._dimensions.height.read(reader);\n            this._sash.layout();\n        }));\n    }\n    /** @pure */\n    _computeSashLeft(desiredRatio, reader) {\n        const contentWidth = this._dimensions.width.read(reader);\n        const midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\n        const sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\n        const MINIMUM_EDITOR_WIDTH = 100;\n        if (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n            return midPoint;\n        }\n        if (sashLeft < MINIMUM_EDITOR_WIDTH) {\n            return MINIMUM_EDITOR_WIDTH;\n        }\n        if (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n            return contentWidth - MINIMUM_EDITOR_WIDTH;\n        }\n        return sashLeft;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { equals } from '../../../../base/common/arrays.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\n// TODO@hediet: These classes are copied from outlineModel.ts because of layering issues.\n// Because these classes just depend on the DocumentSymbolProvider (which is in the core editor),\n// they should be moved to the core editor as well.\nexport class TreeElement {\n    remove() {\n        var _a;\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.delete(this.id);\n    }\n    static findId(candidate, container) {\n        // complex id-computation which contains the origin/extension,\n        // the parent path, and some dedupe logic when names collide\n        let candidateId;\n        if (typeof candidate === 'string') {\n            candidateId = `${container.id}/${candidate}`;\n        }\n        else {\n            candidateId = `${container.id}/${candidate.name}`;\n            if (container.children.get(candidateId) !== undefined) {\n                candidateId = `${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`;\n            }\n        }\n        let id = candidateId;\n        for (let i = 0; container.children.get(id) !== undefined; i++) {\n            id = `${candidateId}_${i}`;\n        }\n        return id;\n    }\n    static empty(element) {\n        return element.children.size === 0;\n    }\n}\nexport class OutlineElement extends TreeElement {\n    constructor(id, parent, symbol) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.symbol = symbol;\n        this.children = new Map();\n    }\n}\nexport class OutlineGroup extends TreeElement {\n    constructor(id, parent, label, order) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.label = label;\n        this.order = order;\n        this.children = new Map();\n    }\n}\nexport class OutlineModel extends TreeElement {\n    static create(registry, textModel, token) {\n        const cts = new CancellationTokenSource(token);\n        const result = new OutlineModel(textModel.uri);\n        const provider = registry.ordered(textModel);\n        const promises = provider.map((provider, index) => {\n            var _a;\n            const id = TreeElement.findId(`provider_${index}`, result);\n            const group = new OutlineGroup(id, result, (_a = provider.displayName) !== null && _a !== void 0 ? _a : 'Unknown Outline Provider', index);\n            return Promise.resolve(provider.provideDocumentSymbols(textModel, cts.token)).then(result => {\n                for (const info of result || []) {\n                    OutlineModel._makeOutlineElement(info, group);\n                }\n                return group;\n            }, err => {\n                onUnexpectedExternalError(err);\n                return group;\n            }).then(group => {\n                if (!TreeElement.empty(group)) {\n                    result._groups.set(id, group);\n                }\n                else {\n                    group.remove();\n                }\n            });\n        });\n        const listener = registry.onDidChange(() => {\n            const newProvider = registry.ordered(textModel);\n            if (!equals(newProvider, provider)) {\n                cts.cancel();\n            }\n        });\n        return Promise.all(promises).then(() => {\n            if (cts.token.isCancellationRequested && !token.isCancellationRequested) {\n                return OutlineModel.create(registry, textModel, token);\n            }\n            else {\n                return result._compact();\n            }\n        }).finally(() => {\n            cts.dispose();\n            listener.dispose();\n        });\n    }\n    static _makeOutlineElement(info, container) {\n        const id = TreeElement.findId(info, container);\n        const res = new OutlineElement(id, container, info);\n        if (info.children) {\n            for (const childInfo of info.children) {\n                OutlineModel._makeOutlineElement(childInfo, res);\n            }\n        }\n        container.children.set(res.id, res);\n    }\n    constructor(uri) {\n        super();\n        this.uri = uri;\n        this.id = 'root';\n        this.parent = undefined;\n        this._groups = new Map();\n        this.children = new Map();\n        this.id = 'root';\n        this.parent = undefined;\n    }\n    _compact() {\n        let count = 0;\n        for (const [key, group] of this._groups) {\n            if (group.children.size === 0) { // empty\n                this._groups.delete(key);\n            }\n            else {\n                count += 1;\n            }\n        }\n        if (count !== 1) {\n            //\n            this.children = this._groups;\n        }\n        else {\n            // adopt all elements of the first group\n            const group = Iterable.first(this._groups.values());\n            for (const [, child] of group.children) {\n                child.parent = this;\n                this.children.set(child.id, child);\n            }\n        }\n        return this;\n    }\n    getTopLevelSymbols() {\n        const roots = [];\n        for (const child of this.children.values()) {\n            if (child instanceof OutlineElement) {\n                roots.push(child.symbol);\n            }\n            else {\n                roots.push(...Iterable.map(child.children.values(), child => child.symbol));\n            }\n        }\n        return roots.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n    }\n    asListOfDocumentSymbols() {\n        const roots = this.getTopLevelSymbols();\n        const bucket = [];\n        OutlineModel._flattenDocumentSymbols(bucket, roots, '');\n        return bucket.sort((a, b) => Position.compare(Range.getStartPosition(a.range), Range.getStartPosition(b.range)) || Position.compare(Range.getEndPosition(b.range), Range.getEndPosition(a.range)));\n    }\n    static _flattenDocumentSymbols(bucket, entries, overrideContainerLabel) {\n        for (const entry of entries) {\n            bucket.push({\n                kind: entry.kind,\n                tags: entry.tags,\n                name: entry.name,\n                detail: entry.detail,\n                containerName: entry.containerName || overrideContainerLabel,\n                range: entry.range,\n                selectionRange: entry.selectionRange,\n                children: undefined, // we flatten it...\n            });\n            // Recurse over children\n            if (entry.children) {\n                OutlineModel._flattenDocumentSymbols(bucket, entry.children, entry.name);\n            }\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { $, addDisposableListener, getWindow, h, reset } from '../../../../base/browser/dom.js';\nimport { renderIcon, renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { compareBy, numberComparator, reverseOrder } from '../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableFromEvent, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { OutlineModel } from './outlineModel.js';\nimport { DisposableCancellationTokenSource, PlaceholderViewZone, ViewZoneOverlayWidget, applyObservableDecorations, applyStyle } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\n/**\n * Make sure to add the view zones to the editor!\n */\nlet HideUnchangedRegionsFeature = class HideUnchangedRegionsFeature extends Disposable {\n    get isUpdatingHiddenAreas() { return this._isUpdatingHiddenAreas; }\n    constructor(_editors, _diffModel, _options, _languageFeaturesService) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._modifiedOutlineSource = derivedDisposable(this, reader => {\n            const m = this._editors.modifiedModel.read(reader);\n            return !m ? undefined : new OutlineSource(this._languageFeaturesService, m);\n        });\n        this._isUpdatingHiddenAreas = false;\n        this._register(this._editors.original.onDidChangeCursorPosition(e => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                const m = this._diffModel.get();\n                transaction(tx => {\n                    for (const s of this._editors.original.getSelections() || []) {\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getStartPosition().lineNumber, tx);\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getEndPosition().lineNumber, tx);\n                    }\n                });\n            }\n        }));\n        this._register(this._editors.modified.onDidChangeCursorPosition(e => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                const m = this._diffModel.get();\n                transaction(tx => {\n                    for (const s of this._editors.modified.getSelections() || []) {\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getStartPosition().lineNumber, tx);\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getEndPosition().lineNumber, tx);\n                    }\n                });\n            }\n        }));\n        const unchangedRegions = this._diffModel.map((m, reader) => { var _a, _b; return ((_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0 ? [] : (_b = m === null || m === void 0 ? void 0 : m.unchangedRegions.read(reader)) !== null && _b !== void 0 ? _b : []; });\n        this.viewZones = derivedWithStore(this, (reader, store) => {\n            /** @description view Zones */\n            const modifiedOutlineSource = this._modifiedOutlineSource.read(reader);\n            if (!modifiedOutlineSource) {\n                return { origViewZones: [], modViewZones: [] };\n            }\n            const origViewZones = [];\n            const modViewZones = [];\n            const sideBySide = this._options.renderSideBySide.read(reader);\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    continue;\n                }\n                {\n                    const d = derived(this, reader => /** @description hiddenOriginalRangeStart */ r.getHiddenOriginalRange(reader).startLineNumber - 1);\n                    const origVz = new PlaceholderViewZone(d, 24);\n                    origViewZones.push(origVz);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.original, origVz, r, r.originalUnchangedRange, !sideBySide, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, undefined), this._options));\n                }\n                {\n                    const d = derived(this, reader => /** @description hiddenModifiedRangeStart */ r.getHiddenModifiedRange(reader).startLineNumber - 1);\n                    const modViewZone = new PlaceholderViewZone(d, 24);\n                    modViewZones.push(modViewZone);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.modified, modViewZone, r, r.modifiedUnchangedRange, false, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, undefined), this._options));\n                }\n            }\n            return { origViewZones, modViewZones, };\n        });\n        const unchangedLinesDecoration = {\n            description: 'unchanged lines',\n            className: 'diff-unchanged-lines',\n            isWholeLine: true,\n        };\n        const unchangedLinesDecorationShow = {\n            description: 'Fold Unchanged',\n            glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true })\n                .appendMarkdown(localize('foldUnchanged', 'Fold Unchanged Region')),\n            glyphMarginClassName: 'fold-unchanged ' + ThemeIcon.asClassName(Codicon.fold),\n            zIndex: 10001,\n        };\n        this._register(applyObservableDecorations(this._editors.original, derived(this, reader => {\n            /** @description decorations */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.originalUnchangedRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: Range.fromPositions(new Position(r.originalLineNumber, 1)),\n                        options: unchangedLinesDecorationShow,\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(applyObservableDecorations(this._editors.modified, derived(this, reader => {\n            /** @description decorations */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.modifiedUnchangedRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: LineRange.ofLength(r.modifiedLineNumber, 1).toInclusiveRange(),\n                        options: unchangedLinesDecorationShow,\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(autorun((reader) => {\n            /** @description update folded unchanged regions */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            this._isUpdatingHiddenAreas = true;\n            try {\n                this._editors.original.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenOriginalRange(reader).toInclusiveRange()).filter(isDefined));\n                this._editors.modified.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenModifiedRange(reader).toInclusiveRange()).filter(isDefined));\n            }\n            finally {\n                this._isUpdatingHiddenAreas = false;\n            }\n        }));\n        this._register(this._editors.modified.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.modifiedUnchangedRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.collapseAll(undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n        this._register(this._editors.original.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.originalUnchangedRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.collapseAll(undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n    }\n};\nHideUnchangedRegionsFeature = __decorate([\n    __param(3, ILanguageFeaturesService)\n], HideUnchangedRegionsFeature);\nexport { HideUnchangedRegionsFeature };\nclass CollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\n    constructor(_editor, _viewZone, _unchangedRegion, _unchangedRegionRange, _hide, _modifiedOutlineSource, _revealModifiedHiddenLine, _options) {\n        const root = h('div.diff-hidden-lines-widget');\n        super(_editor, _viewZone, root.root);\n        this._editor = _editor;\n        this._unchangedRegion = _unchangedRegion;\n        this._unchangedRegionRange = _unchangedRegionRange;\n        this._hide = _hide;\n        this._modifiedOutlineSource = _modifiedOutlineSource;\n        this._revealModifiedHiddenLine = _revealModifiedHiddenLine;\n        this._options = _options;\n        this._nodes = h('div.diff-hidden-lines', [\n            h('div.top@top', { title: localize('diff.hiddenLines.top', 'Click or drag to show more above') }),\n            h('div.center@content', { style: { display: 'flex' } }, [\n                h('div@first', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center', flexShrink: '0' } }, [$('a', { title: localize('showUnchangedRegion', 'Show Unchanged Region'), role: 'button', onclick: () => { this._unchangedRegion.showAll(undefined); } }, ...renderLabelWithIcons('$(unfold)'))]),\n                h('div@others', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center' } }),\n            ]),\n            h('div.bottom@bottom', { title: localize('diff.bottom', 'Click or drag to show more below'), role: 'button' }),\n        ]);\n        root.root.appendChild(this._nodes.root);\n        const layoutInfo = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n        if (!this._hide) {\n            this._register(applyStyle(this._nodes.first, { width: layoutInfo.map((l) => l.contentLeft) }));\n        }\n        else {\n            reset(this._nodes.first);\n        }\n        this._register(autorun(reader => {\n            const isFullyRevealed = this._unchangedRegion.visibleLineCountTop.read(reader) + this._unchangedRegion.visibleLineCountBottom.read(reader) === this._unchangedRegion.lineCount;\n            this._nodes.bottom.classList.toggle('canMoveTop', !isFullyRevealed);\n            this._nodes.bottom.classList.toggle('canMoveBottom', this._unchangedRegion.visibleLineCountBottom.read(reader) > 0);\n            this._nodes.top.classList.toggle('canMoveTop', this._unchangedRegion.visibleLineCountTop.read(reader) > 0);\n            this._nodes.top.classList.toggle('canMoveBottom', !isFullyRevealed);\n            const isDragged = this._unchangedRegion.isDragged.read(reader);\n            const domNode = this._editor.getDomNode();\n            if (domNode) {\n                domNode.classList.toggle('draggingUnchangedRegion', !!isDragged);\n                if (isDragged === 'top') {\n                    domNode.classList.toggle('canMoveTop', this._unchangedRegion.visibleLineCountTop.read(reader) > 0);\n                    domNode.classList.toggle('canMoveBottom', !isFullyRevealed);\n                }\n                else if (isDragged === 'bottom') {\n                    domNode.classList.toggle('canMoveTop', !isFullyRevealed);\n                    domNode.classList.toggle('canMoveBottom', this._unchangedRegion.visibleLineCountBottom.read(reader) > 0);\n                }\n                else {\n                    domNode.classList.toggle('canMoveTop', false);\n                    domNode.classList.toggle('canMoveBottom', false);\n                }\n            }\n        }));\n        const editor = this._editor;\n        this._register(addDisposableListener(this._nodes.top, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.top.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountTop.get();\n            this._unchangedRegion.isDragged.set('top', undefined);\n            const window = getWindow(this._nodes.top);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(66 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur + lineDelta, this._unchangedRegion.getMaxVisibleLineCountTop()));\n                this._unchangedRegion.visibleLineCountTop.set(newVal, undefined);\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                if (!didMove) {\n                    this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n                }\n                this._nodes.top.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                this._unchangedRegion.isDragged.set(undefined, undefined);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(addDisposableListener(this._nodes.bottom, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.bottom.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountBottom.get();\n            this._unchangedRegion.isDragged.set('bottom', undefined);\n            const window = getWindow(this._nodes.bottom);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(66 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur - lineDelta, this._unchangedRegion.getMaxVisibleLineCountBottom()));\n                const top = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                this._unchangedRegion.visibleLineCountBottom.set(newVal, undefined);\n                const top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                this._unchangedRegion.isDragged.set(undefined, undefined);\n                if (!didMove) {\n                    const top = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                    this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n                    const top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                    editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n                }\n                this._nodes.bottom.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(autorun(reader => {\n            /** @description update labels */\n            const children = [];\n            if (!this._hide) {\n                const lineCount = _unchangedRegion.getHiddenModifiedRange(reader).length;\n                const linesHiddenText = localize('hiddenLines', '{0} hidden lines', lineCount);\n                const span = $('span', { title: localize('diff.hiddenLines.expandAll', 'Double click to unfold') }, linesHiddenText);\n                span.addEventListener('dblclick', e => {\n                    if (e.button !== 0) {\n                        return;\n                    }\n                    e.preventDefault();\n                    this._unchangedRegion.showAll(undefined);\n                });\n                children.push(span);\n                const range = this._unchangedRegion.getHiddenModifiedRange(reader);\n                const items = this._modifiedOutlineSource.getBreadcrumbItems(range, reader);\n                if (items.length > 0) {\n                    children.push($('span', undefined, '\\u00a0\\u00a0|\\u00a0\\u00a0'));\n                    for (let i = 0; i < items.length; i++) {\n                        const item = items[i];\n                        const icon = SymbolKinds.toIcon(item.kind);\n                        const divItem = h('div.breadcrumb-item', {\n                            style: { display: 'flex', alignItems: 'center' },\n                        }, [\n                            renderIcon(icon),\n                            '\\u00a0',\n                            item.name,\n                            ...(i === items.length - 1\n                                ? []\n                                : [renderIcon(Codicon.chevronRight)])\n                        ]).root;\n                        children.push(divItem);\n                        divItem.onclick = () => {\n                            this._revealModifiedHiddenLine(item.startLineNumber);\n                        };\n                    }\n                }\n            }\n            reset(this._nodes.others, ...children);\n        }));\n    }\n}\nlet OutlineSource = class OutlineSource extends Disposable {\n    constructor(_languageFeaturesService, _textModel) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this._textModel = _textModel;\n        this._currentModel = observableValue(this, undefined);\n        const documentSymbolProviderChanged = observableSignalFromEvent('documentSymbolProvider.onDidChange', this._languageFeaturesService.documentSymbolProvider.onDidChange);\n        const textModelChanged = observableSignalFromEvent('_textModel.onDidChangeContent', Event.debounce(e => this._textModel.onDidChangeContent(e), () => undefined, 100));\n        this._register(autorunWithStore(async (reader, store) => {\n            documentSymbolProviderChanged.read(reader);\n            textModelChanged.read(reader);\n            const src = store.add(new DisposableCancellationTokenSource());\n            const model = await OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, this._textModel, src.token);\n            if (store.isDisposed) {\n                return;\n            }\n            this._currentModel.set(model, undefined);\n        }));\n    }\n    getBreadcrumbItems(startRange, reader) {\n        const m = this._currentModel.read(reader);\n        if (!m) {\n            return [];\n        }\n        const symbols = m.asListOfDocumentSymbols()\n            .filter(s => startRange.contains(s.range.startLineNumber) && !startRange.contains(s.range.endLineNumber));\n        symbols.sort(reverseOrder(compareBy(s => s.range.endLineNumber - s.range.startLineNumber, numberComparator)));\n        return symbols.map(s => ({ name: s.name, kind: s.kind, startLineNumber: s.range.startLineNumber }));\n    }\n};\nOutlineSource = __decorate([\n    __param(0, ILanguageFeaturesService)\n], OutlineSource);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar WorkerBasedDocumentDiffProvider_1;\nimport { Emitter } from '../../../../base/common/event.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { DetailedLineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nlet WorkerBasedDocumentDiffProvider = WorkerBasedDocumentDiffProvider_1 = class WorkerBasedDocumentDiffProvider {\n    constructor(options, editorWorkerService, telemetryService) {\n        this.editorWorkerService = editorWorkerService;\n        this.telemetryService = telemetryService;\n        this.onDidChangeEventEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEventEmitter.event;\n        this.diffAlgorithm = 'advanced';\n        this.diffAlgorithmOnDidChangeSubscription = undefined;\n        this.setOptions(options);\n    }\n    dispose() {\n        var _a;\n        (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    async computeDiff(original, modified, options, cancellationToken) {\n        var _a, _b;\n        if (typeof this.diffAlgorithm !== 'string') {\n            return this.diffAlgorithm.computeDiff(original, modified, options, cancellationToken);\n        }\n        // This significantly speeds up the case when the original file is empty\n        if (original.getLineCount() === 1 && original.getLineMaxColumn(1) === 1) {\n            if (modified.getLineCount() === 1 && modified.getLineMaxColumn(1) === 1) {\n                return {\n                    changes: [],\n                    identical: true,\n                    quitEarly: false,\n                    moves: [],\n                };\n            }\n            return {\n                changes: [\n                    new DetailedLineRangeMapping(new LineRange(1, 2), new LineRange(1, modified.getLineCount() + 1), [\n                        new RangeMapping(original.getFullModelRange(), modified.getFullModelRange())\n                    ])\n                ],\n                identical: false,\n                quitEarly: false,\n                moves: [],\n            };\n        }\n        const uriKey = JSON.stringify([original.uri.toString(), modified.uri.toString()]);\n        const context = JSON.stringify([original.id, modified.id, original.getAlternativeVersionId(), modified.getAlternativeVersionId(), JSON.stringify(options)]);\n        const c = WorkerBasedDocumentDiffProvider_1.diffCache.get(uriKey);\n        if (c && c.context === context) {\n            return c.result;\n        }\n        const sw = StopWatch.create();\n        const result = await this.editorWorkerService.computeDiff(original.uri, modified.uri, options, this.diffAlgorithm);\n        const timeMs = sw.elapsed();\n        this.telemetryService.publicLog2('diffEditor.computeDiff', {\n            timeMs,\n            timedOut: (_a = result === null || result === void 0 ? void 0 : result.quitEarly) !== null && _a !== void 0 ? _a : true,\n            detectedMoves: options.computeMoves ? ((_b = result === null || result === void 0 ? void 0 : result.moves.length) !== null && _b !== void 0 ? _b : 0) : -1,\n        });\n        if (cancellationToken.isCancellationRequested) {\n            // Text models might be disposed!\n            return {\n                changes: [],\n                identical: false,\n                quitEarly: true,\n                moves: [],\n            };\n        }\n        if (!result) {\n            throw new Error('no diff result available');\n        }\n        // max 10 items in cache\n        if (WorkerBasedDocumentDiffProvider_1.diffCache.size > 10) {\n            WorkerBasedDocumentDiffProvider_1.diffCache.delete(WorkerBasedDocumentDiffProvider_1.diffCache.keys().next().value);\n        }\n        WorkerBasedDocumentDiffProvider_1.diffCache.set(uriKey, { result, context });\n        return result;\n    }\n    setOptions(newOptions) {\n        var _a;\n        let didChange = false;\n        if (newOptions.diffAlgorithm) {\n            if (this.diffAlgorithm !== newOptions.diffAlgorithm) {\n                (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n                this.diffAlgorithmOnDidChangeSubscription = undefined;\n                this.diffAlgorithm = newOptions.diffAlgorithm;\n                if (typeof newOptions.diffAlgorithm !== 'string') {\n                    this.diffAlgorithmOnDidChangeSubscription = newOptions.diffAlgorithm.onDidChange(() => this.onDidChangeEventEmitter.fire());\n                }\n                didChange = true;\n            }\n        }\n        if (didChange) {\n            this.onDidChangeEventEmitter.fire();\n        }\n    }\n};\nWorkerBasedDocumentDiffProvider.diffCache = new Map();\nWorkerBasedDocumentDiffProvider = WorkerBasedDocumentDiffProvider_1 = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, ITelemetryService)\n], WorkerBasedDocumentDiffProvider);\nexport { WorkerBasedDocumentDiffProvider };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { WorkerBasedDocumentDiffProvider } from './workerBasedDocumentDiffProvider.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService, createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nexport const IDiffProviderFactoryService = createDecorator('diffProviderFactoryService');\nlet DiffProviderFactoryService = class DiffProviderFactoryService {\n    constructor(instantiationService) {\n        this.instantiationService = instantiationService;\n    }\n    createDiffProvider(options) {\n        return this.instantiationService.createInstance(WorkerBasedDocumentDiffProvider, options);\n    }\n};\nDiffProviderFactoryService = __decorate([\n    __param(0, IInstantiationService)\n], DiffProviderFactoryService);\nexport { DiffProviderFactoryService };\nregisterSingleton(IDiffProviderFactoryService, DiffProviderFactoryService, 1 /* InstantiationType.Delayed */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorunWithStore, derived, observableSignal, observableSignalFromEvent, observableValue, transaction, waitForState } from '../../../../base/common/observable.js';\nimport { IDiffProviderFactoryService } from './diffProviderFactoryService.js';\nimport { readHotReloadableExport } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { DefaultLinesDiffComputer } from '../../../common/diff/defaultLinesDiffComputer/defaultLinesDiffComputer.js';\nimport { DetailedLineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { TextEditInfo } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js';\nimport { combineTextEditInfos } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/combineTextEditInfos.js';\nimport { optimizeSequenceDiffs } from '../../../common/diff/defaultLinesDiffComputer/heuristicSequenceOptimizations.js';\nlet DiffEditorViewModel = class DiffEditorViewModel extends Disposable {\n    setActiveMovedText(movedText) {\n        this._activeMovedText.set(movedText, undefined);\n    }\n    constructor(model, _options, _diffProviderFactoryService) {\n        super();\n        this.model = model;\n        this._options = _options;\n        this._diffProviderFactoryService = _diffProviderFactoryService;\n        this._isDiffUpToDate = observableValue(this, false);\n        this.isDiffUpToDate = this._isDiffUpToDate;\n        this._diff = observableValue(this, undefined);\n        this.diff = this._diff;\n        this._unchangedRegions = observableValue(this, { regions: [], originalDecorationIds: [], modifiedDecorationIds: [] });\n        this.unchangedRegions = derived(this, r => {\n            if (this._options.hideUnchangedRegions.read(r)) {\n                return this._unchangedRegions.read(r).regions;\n            }\n            else {\n                // Reset state\n                transaction(tx => {\n                    for (const r of this._unchangedRegions.get().regions) {\n                        r.collapseAll(tx);\n                    }\n                });\n                return [];\n            }\n        });\n        this.movedTextToCompare = observableValue(this, undefined);\n        this._activeMovedText = observableValue(this, undefined);\n        this._hoveredMovedText = observableValue(this, undefined);\n        this.activeMovedText = derived(this, r => { var _a, _b; return (_b = (_a = this.movedTextToCompare.read(r)) !== null && _a !== void 0 ? _a : this._hoveredMovedText.read(r)) !== null && _b !== void 0 ? _b : this._activeMovedText.read(r); });\n        this._cancellationTokenSource = new CancellationTokenSource();\n        this._diffProvider = derived(this, reader => {\n            const diffProvider = this._diffProviderFactoryService.createDiffProvider({\n                diffAlgorithm: this._options.diffAlgorithm.read(reader)\n            });\n            const onChangeSignal = observableSignalFromEvent('onDidChange', diffProvider.onDidChange);\n            return {\n                diffProvider,\n                onChangeSignal,\n            };\n        });\n        this._register(toDisposable(() => this._cancellationTokenSource.cancel()));\n        const contentChangedSignal = observableSignal('contentChangedSignal');\n        const debouncer = this._register(new RunOnceScheduler(() => contentChangedSignal.trigger(undefined), 200));\n        const updateUnchangedRegions = (result, tx, reader) => {\n            const newUnchangedRegions = UnchangedRegion.fromDiffs(result.changes, model.original.getLineCount(), model.modified.getLineCount(), this._options.hideUnchangedRegionsMinimumLineCount.read(reader), this._options.hideUnchangedRegionsContextLineCount.read(reader));\n            // Transfer state from cur state\n            const lastUnchangedRegions = this._unchangedRegions.get();\n            const lastUnchangedRegionsOrigRanges = lastUnchangedRegions.originalDecorationIds\n                .map(id => model.original.getDecorationRange(id))\n                .map(r => r ? LineRange.fromRange(r) : undefined);\n            const lastUnchangedRegionsModRanges = lastUnchangedRegions.modifiedDecorationIds\n                .map(id => model.modified.getDecorationRange(id))\n                .map(r => r ? LineRange.fromRange(r) : undefined);\n            const originalDecorationIds = model.original.deltaDecorations(lastUnchangedRegions.originalDecorationIds, newUnchangedRegions.map(r => ({ range: r.originalUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n            const modifiedDecorationIds = model.modified.deltaDecorations(lastUnchangedRegions.modifiedDecorationIds, newUnchangedRegions.map(r => ({ range: r.modifiedUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n            for (const r of newUnchangedRegions) {\n                for (let i = 0; i < lastUnchangedRegions.regions.length; i++) {\n                    if (lastUnchangedRegionsOrigRanges[i] && r.originalUnchangedRange.intersectsStrict(lastUnchangedRegionsOrigRanges[i])\n                        && lastUnchangedRegionsModRanges[i] && r.modifiedUnchangedRange.intersectsStrict(lastUnchangedRegionsModRanges[i])) {\n                        r.setHiddenModifiedRange(lastUnchangedRegions.regions[i].getHiddenModifiedRange(undefined), tx);\n                        break;\n                    }\n                }\n            }\n            this._unchangedRegions.set({\n                regions: newUnchangedRegions,\n                originalDecorationIds,\n                modifiedDecorationIds\n            }, tx);\n        };\n        this._register(model.modified.onDidChangeContent((e) => {\n            const diff = this._diff.get();\n            if (diff) {\n                const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n                const result = applyModifiedEdits(this._lastDiff, textEdits, model.original, model.modified);\n                if (result) {\n                    this._lastDiff = result;\n                    transaction(tx => {\n                        this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\n                        updateUnchangedRegions(result, tx);\n                        const currentSyncedMovedText = this.movedTextToCompare.get();\n                        this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n                    });\n                }\n            }\n            this._isDiffUpToDate.set(false, undefined);\n            debouncer.schedule();\n        }));\n        this._register(model.original.onDidChangeContent((e) => {\n            const diff = this._diff.get();\n            if (diff) {\n                const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n                const result = applyOriginalEdits(this._lastDiff, textEdits, model.original, model.modified);\n                if (result) {\n                    this._lastDiff = result;\n                    transaction(tx => {\n                        this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\n                        updateUnchangedRegions(result, tx);\n                        const currentSyncedMovedText = this.movedTextToCompare.get();\n                        this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n                    });\n                }\n            }\n            this._isDiffUpToDate.set(false, undefined);\n            debouncer.schedule();\n        }));\n        this._register(autorunWithStore(async (reader, store) => {\n            /** @description compute diff */\n            var _a, _b;\n            // So that they get recomputed when these settings change\n            this._options.hideUnchangedRegionsMinimumLineCount.read(reader);\n            this._options.hideUnchangedRegionsContextLineCount.read(reader);\n            debouncer.cancel();\n            contentChangedSignal.read(reader);\n            const documentDiffProvider = this._diffProvider.read(reader);\n            documentDiffProvider.onChangeSignal.read(reader);\n            readHotReloadableExport(DefaultLinesDiffComputer, reader);\n            readHotReloadableExport(optimizeSequenceDiffs, reader);\n            this._isDiffUpToDate.set(false, undefined);\n            let originalTextEditInfos = [];\n            store.add(model.original.onDidChangeContent((e) => {\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\n                originalTextEditInfos = combineTextEditInfos(originalTextEditInfos, edits);\n            }));\n            let modifiedTextEditInfos = [];\n            store.add(model.modified.onDidChangeContent((e) => {\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\n                modifiedTextEditInfos = combineTextEditInfos(modifiedTextEditInfos, edits);\n            }));\n            let result = await documentDiffProvider.diffProvider.computeDiff(model.original, model.modified, {\n                ignoreTrimWhitespace: this._options.ignoreTrimWhitespace.read(reader),\n                maxComputationTimeMs: this._options.maxComputationTimeMs.read(reader),\n                computeMoves: this._options.showMoves.read(reader),\n            }, this._cancellationTokenSource.token);\n            if (this._cancellationTokenSource.token.isCancellationRequested) {\n                return;\n            }\n            result = normalizeDocumentDiff(result, model.original, model.modified);\n            result = (_a = applyOriginalEdits(result, originalTextEditInfos, model.original, model.modified)) !== null && _a !== void 0 ? _a : result;\n            result = (_b = applyModifiedEdits(result, modifiedTextEditInfos, model.original, model.modified)) !== null && _b !== void 0 ? _b : result;\n            transaction(tx => {\n                /** @description write diff result */\n                updateUnchangedRegions(result, tx);\n                this._lastDiff = result;\n                const state = DiffState.fromDiffResult(result);\n                this._diff.set(state, tx);\n                this._isDiffUpToDate.set(true, tx);\n                const currentSyncedMovedText = this.movedTextToCompare.get();\n                this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n            });\n        }));\n    }\n    ensureModifiedLineIsVisible(lineNumber, tx) {\n        var _a;\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\n            return;\n        }\n        const unchangedRegions = this._unchangedRegions.get().regions;\n        for (const r of unchangedRegions) {\n            if (r.getHiddenModifiedRange(undefined).contains(lineNumber)) {\n                r.showModifiedLine(lineNumber, tx);\n                return;\n            }\n        }\n    }\n    ensureOriginalLineIsVisible(lineNumber, tx) {\n        var _a;\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\n            return;\n        }\n        const unchangedRegions = this._unchangedRegions.get().regions;\n        for (const r of unchangedRegions) {\n            if (r.getHiddenOriginalRange(undefined).contains(lineNumber)) {\n                r.showOriginalLine(lineNumber, tx);\n                return;\n            }\n        }\n    }\n    async waitForDiff() {\n        await waitForState(this.isDiffUpToDate, s => s);\n    }\n    serializeState() {\n        const regions = this._unchangedRegions.get();\n        return {\n            collapsedRegions: regions.regions.map(r => ({ range: r.getHiddenModifiedRange(undefined).serialize() }))\n        };\n    }\n    restoreSerializedState(state) {\n        const ranges = state.collapsedRegions.map(r => LineRange.deserialize(r.range));\n        const regions = this._unchangedRegions.get();\n        transaction(tx => {\n            for (const r of regions.regions) {\n                for (const range of ranges) {\n                    if (r.modifiedUnchangedRange.intersect(range)) {\n                        r.setHiddenModifiedRange(range, tx);\n                        break;\n                    }\n                }\n            }\n        });\n    }\n};\nDiffEditorViewModel = __decorate([\n    __param(2, IDiffProviderFactoryService)\n], DiffEditorViewModel);\nexport { DiffEditorViewModel };\nfunction normalizeDocumentDiff(diff, original, modified) {\n    return {\n        changes: diff.changes.map(c => new DetailedLineRangeMapping(c.original, c.modified, c.innerChanges ? c.innerChanges.map(i => normalizeRangeMapping(i, original, modified)) : undefined)),\n        moves: diff.moves,\n        identical: diff.identical,\n        quitEarly: diff.quitEarly,\n    };\n}\nfunction normalizeRangeMapping(rangeMapping, original, modified) {\n    let originalRange = rangeMapping.originalRange;\n    let modifiedRange = rangeMapping.modifiedRange;\n    if ((originalRange.endColumn !== 1 || modifiedRange.endColumn !== 1) &&\n        originalRange.endColumn === original.getLineMaxColumn(originalRange.endLineNumber)\n        && modifiedRange.endColumn === modified.getLineMaxColumn(modifiedRange.endLineNumber)\n        && originalRange.endLineNumber < original.getLineCount()\n        && modifiedRange.endLineNumber < modified.getLineCount()) {\n        originalRange = originalRange.setEndPosition(originalRange.endLineNumber + 1, 1);\n        modifiedRange = modifiedRange.setEndPosition(modifiedRange.endLineNumber + 1, 1);\n    }\n    return new RangeMapping(originalRange, modifiedRange);\n}\nexport class DiffState {\n    static fromDiffResult(result) {\n        return new DiffState(result.changes.map(c => new DiffMapping(c)), result.moves || [], result.identical, result.quitEarly);\n    }\n    constructor(mappings, movedTexts, identical, quitEarly) {\n        this.mappings = mappings;\n        this.movedTexts = movedTexts;\n        this.identical = identical;\n        this.quitEarly = quitEarly;\n    }\n}\nexport class DiffMapping {\n    constructor(lineRangeMapping) {\n        this.lineRangeMapping = lineRangeMapping;\n        /*\n        readonly movedTo: MovedText | undefined,\n        readonly movedFrom: MovedText | undefined,\n\n        if (movedTo) {\n            assertFn(() =>\n                movedTo.lineRangeMapping.modifiedRange.equals(lineRangeMapping.modifiedRange)\n                && lineRangeMapping.originalRange.isEmpty\n                && !movedFrom\n            );\n        } else if (movedFrom) {\n            assertFn(() =>\n                movedFrom.lineRangeMapping.originalRange.equals(lineRangeMapping.originalRange)\n                && lineRangeMapping.modifiedRange.isEmpty\n                && !movedTo\n            );\n        }\n        */\n    }\n}\nexport class UnchangedRegion {\n    static fromDiffs(changes, originalLineCount, modifiedLineCount, minHiddenLineCount, minContext) {\n        const inversedMappings = DetailedLineRangeMapping.inverse(changes, originalLineCount, modifiedLineCount);\n        const result = [];\n        for (const mapping of inversedMappings) {\n            let origStart = mapping.original.startLineNumber;\n            let modStart = mapping.modified.startLineNumber;\n            let length = mapping.original.length;\n            const atStart = origStart === 1 && modStart === 1;\n            const atEnd = origStart + length === originalLineCount + 1 && modStart + length === modifiedLineCount + 1;\n            if ((atStart || atEnd) && length >= minContext + minHiddenLineCount) {\n                if (atStart && !atEnd) {\n                    length -= minContext;\n                }\n                if (atEnd && !atStart) {\n                    origStart += minContext;\n                    modStart += minContext;\n                    length -= minContext;\n                }\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n            }\n            else if (length >= minContext * 2 + minHiddenLineCount) {\n                origStart += minContext;\n                modStart += minContext;\n                length -= minContext * 2;\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n            }\n        }\n        return result;\n    }\n    get originalUnchangedRange() {\n        return LineRange.ofLength(this.originalLineNumber, this.lineCount);\n    }\n    get modifiedUnchangedRange() {\n        return LineRange.ofLength(this.modifiedLineNumber, this.lineCount);\n    }\n    constructor(originalLineNumber, modifiedLineNumber, lineCount, visibleLineCountTop, visibleLineCountBottom) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.lineCount = lineCount;\n        this._visibleLineCountTop = observableValue(this, 0);\n        this.visibleLineCountTop = this._visibleLineCountTop;\n        this._visibleLineCountBottom = observableValue(this, 0);\n        this.visibleLineCountBottom = this._visibleLineCountBottom;\n        this._shouldHideControls = derived(this, reader => /** @description isVisible */ this.visibleLineCountTop.read(reader) + this.visibleLineCountBottom.read(reader) === this.lineCount && !this.isDragged.read(reader));\n        this.isDragged = observableValue(this, undefined);\n        this._visibleLineCountTop.set(visibleLineCountTop, undefined);\n        this._visibleLineCountBottom.set(visibleLineCountBottom, undefined);\n    }\n    shouldHideControls(reader) {\n        return this._shouldHideControls.read(reader);\n    }\n    getHiddenOriginalRange(reader) {\n        return LineRange.ofLength(this.originalLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\n    }\n    getHiddenModifiedRange(reader) {\n        return LineRange.ofLength(this.modifiedLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\n    }\n    setHiddenModifiedRange(range, tx) {\n        const visibleLineCountTop = range.startLineNumber - this.modifiedLineNumber;\n        const visibleLineCountBottom = (this.modifiedLineNumber + this.lineCount) - range.endLineNumberExclusive;\n        this.setState(visibleLineCountTop, visibleLineCountBottom, tx);\n    }\n    getMaxVisibleLineCountTop() {\n        return this.lineCount - this._visibleLineCountBottom.get();\n    }\n    getMaxVisibleLineCountBottom() {\n        return this.lineCount - this._visibleLineCountTop.get();\n    }\n    showMoreAbove(count = 10, tx) {\n        const maxVisibleLineCountTop = this.getMaxVisibleLineCountTop();\n        this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + count, maxVisibleLineCountTop), tx);\n    }\n    showMoreBelow(count = 10, tx) {\n        const maxVisibleLineCountBottom = this.lineCount - this._visibleLineCountTop.get();\n        this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + count, maxVisibleLineCountBottom), tx);\n    }\n    showAll(tx) {\n        this._visibleLineCountBottom.set(this.lineCount - this._visibleLineCountTop.get(), tx);\n    }\n    showModifiedLine(lineNumber, tx) {\n        const top = lineNumber + 1 - (this.modifiedLineNumber + this._visibleLineCountTop.get());\n        const bottom = (this.modifiedLineNumber - this._visibleLineCountBottom.get() + this.lineCount) - lineNumber;\n        if (top < bottom) {\n            this._visibleLineCountTop.set(this._visibleLineCountTop.get() + top, tx);\n        }\n        else {\n            this._visibleLineCountBottom.set(this._visibleLineCountBottom.get() + bottom, tx);\n        }\n    }\n    showOriginalLine(lineNumber, tx) {\n        const top = lineNumber - this.originalLineNumber;\n        const bottom = (this.originalLineNumber + this.lineCount) - lineNumber;\n        if (top < bottom) {\n            this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + bottom - top, this.getMaxVisibleLineCountTop()), tx);\n        }\n        else {\n            this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + top - bottom, this.getMaxVisibleLineCountBottom()), tx);\n        }\n    }\n    collapseAll(tx) {\n        this._visibleLineCountTop.set(0, tx);\n        this._visibleLineCountBottom.set(0, tx);\n    }\n    setState(visibleLineCountTop, visibleLineCountBottom, tx) {\n        visibleLineCountTop = Math.max(Math.min(visibleLineCountTop, this.lineCount), 0);\n        visibleLineCountBottom = Math.max(Math.min(visibleLineCountBottom, this.lineCount - visibleLineCountTop), 0);\n        this._visibleLineCountTop.set(visibleLineCountTop, tx);\n        this._visibleLineCountBottom.set(visibleLineCountBottom, tx);\n    }\n}\nfunction applyOriginalEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\n    return undefined;\n    /*\n    TODO@hediet\n    if (textEdits.length === 0) {\n        return diff;\n    }\n\n    const diff2 = flip(diff);\n    const diff3 = applyModifiedEdits(diff2, textEdits, modifiedTextModel, originalTextModel);\n    if (!diff3) {\n        return undefined;\n    }\n    return flip(diff3);*/\n}\n/*\nfunction flip(diff: IDocumentDiff): IDocumentDiff {\n    return {\n        changes: diff.changes.map(c => c.flip()),\n        moves: diff.moves.map(m => m.flip()),\n        identical: diff.identical,\n        quitEarly: diff.quitEarly,\n    };\n}\n*/\nfunction applyModifiedEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\n    return undefined;\n    /*\n    TODO@hediet\n    if (textEdits.length === 0) {\n        return diff;\n    }\n    if (diff.changes.some(c => !c.innerChanges) || diff.moves.length > 0) {\n        // TODO support these cases\n        return undefined;\n    }\n\n    const changes = applyModifiedEditsToLineRangeMappings(diff.changes, textEdits, originalTextModel, modifiedTextModel);\n\n    const moves = diff.moves.map(m => {\n        const newModifiedRange = applyEditToLineRange(m.lineRangeMapping.modified, textEdits);\n        return newModifiedRange ? new MovedText(\n            new SimpleLineRangeMapping(m.lineRangeMapping.original, newModifiedRange),\n            applyModifiedEditsToLineRangeMappings(m.changes, textEdits, originalTextModel, modifiedTextModel),\n        ) : undefined;\n    }).filter(isDefined);\n\n    return {\n        identical: false,\n        quitEarly: false,\n        changes,\n        moves,\n    };*/\n}\n/*\nfunction applyEditToLineRange(range: LineRange, textEdits: TextEditInfo[]): LineRange | undefined {\n    let rangeStartLineNumber = range.startLineNumber;\n    let rangeEndLineNumberEx = range.endLineNumberExclusive;\n\n    for (let i = textEdits.length - 1; i >= 0; i--) {\n        const textEdit = textEdits[i];\n        const textEditStartLineNumber = lengthGetLineCount(textEdit.startOffset) + 1;\n        const textEditEndLineNumber = lengthGetLineCount(textEdit.endOffset) + 1;\n        const newLengthLineCount = lengthGetLineCount(textEdit.newLength);\n        const delta = newLengthLineCount - (textEditEndLineNumber - textEditStartLineNumber);\n\n        if (textEditEndLineNumber < rangeStartLineNumber) {\n            // the text edit is before us\n            rangeStartLineNumber += delta;\n            rangeEndLineNumberEx += delta;\n        } else if (textEditStartLineNumber > rangeEndLineNumberEx) {\n            // the text edit is after us\n            // NOOP\n        } else if (textEditStartLineNumber < rangeStartLineNumber && rangeEndLineNumberEx < textEditEndLineNumber) {\n            // the range is fully contained in the text edit\n            return undefined;\n        } else if (textEditStartLineNumber < rangeStartLineNumber && textEditEndLineNumber <= rangeEndLineNumberEx) {\n            // the text edit ends inside our range\n            rangeStartLineNumber = textEditEndLineNumber + 1;\n            rangeStartLineNumber += delta;\n            rangeEndLineNumberEx += delta;\n        } else if (rangeStartLineNumber <= textEditStartLineNumber && textEditEndLineNumber < rangeStartLineNumber) {\n            // the text edit starts inside our range\n            rangeEndLineNumberEx = textEditStartLineNumber;\n        } else {\n            rangeEndLineNumberEx += delta;\n        }\n    }\n\n    return new LineRange(rangeStartLineNumber, rangeEndLineNumberEx);\n}\n\nfunction applyModifiedEditsToLineRangeMappings(changes: readonly LineRangeMapping[], textEdits: TextEditInfo[], originalTextModel: ITextModel, modifiedTextModel: ITextModel): LineRangeMapping[] {\n    const diffTextEdits = changes.flatMap(c => c.innerChanges!.map(c => new TextEditInfo(\n        positionToLength(c.originalRange.getStartPosition()),\n        positionToLength(c.originalRange.getEndPosition()),\n        lengthOfRange(c.modifiedRange).toLength(),\n    )));\n\n    const combined = combineTextEditInfos(diffTextEdits, textEdits);\n\n    let lastOriginalEndOffset = lengthZero;\n    let lastModifiedEndOffset = lengthZero;\n    const rangeMappings = combined.map(c => {\n        const modifiedStartOffset = lengthAdd(lastModifiedEndOffset, lengthDiffNonNegative(lastOriginalEndOffset, c.startOffset));\n        lastOriginalEndOffset = c.endOffset;\n        lastModifiedEndOffset = lengthAdd(modifiedStartOffset, c.newLength);\n\n        return new RangeMapping(\n            Range.fromPositions(lengthToPosition(c.startOffset), lengthToPosition(c.endOffset)),\n            Range.fromPositions(lengthToPosition(modifiedStartOffset), lengthToPosition(lastModifiedEndOffset)),\n        );\n    });\n\n    const newChanges = lineRangeMappingFromRangeMappings(\n        rangeMappings,\n        originalTextModel.getLinesContent(),\n        modifiedTextModel.getLinesContent(),\n    );\n    return newChanges;\n}\n*/\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { addStandardDisposableListener, getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { localize } from '../../../../nls.js';\nexport class InlineDiffDeletedCodeMargin extends Disposable {\n    get visibility() {\n        return this._visibility;\n    }\n    set visibility(_visibility) {\n        if (this._visibility !== _visibility) {\n            this._visibility = _visibility;\n            this._diffActions.style.visibility = _visibility ? 'visible' : 'hidden';\n        }\n    }\n    constructor(_getViewZoneId, _marginDomNode, _modifiedEditor, _diff, _editor, _viewLineCounts, _originalTextModel, _contextMenuService, _clipboardService) {\n        super();\n        this._getViewZoneId = _getViewZoneId;\n        this._marginDomNode = _marginDomNode;\n        this._modifiedEditor = _modifiedEditor;\n        this._diff = _diff;\n        this._editor = _editor;\n        this._viewLineCounts = _viewLineCounts;\n        this._originalTextModel = _originalTextModel;\n        this._contextMenuService = _contextMenuService;\n        this._clipboardService = _clipboardService;\n        this._visibility = false;\n        // make sure the diff margin shows above overlay.\n        this._marginDomNode.style.zIndex = '10';\n        this._diffActions = document.createElement('div');\n        this._diffActions.className = ThemeIcon.asClassName(Codicon.lightBulb) + ' lightbulb-glyph';\n        this._diffActions.style.position = 'absolute';\n        const lineHeight = this._modifiedEditor.getOption(66 /* EditorOption.lineHeight */);\n        this._diffActions.style.right = '0px';\n        this._diffActions.style.visibility = 'hidden';\n        this._diffActions.style.height = `${lineHeight}px`;\n        this._diffActions.style.lineHeight = `${lineHeight}px`;\n        this._marginDomNode.appendChild(this._diffActions);\n        let currentLineNumberOffset = 0;\n        const useShadowDOM = _modifiedEditor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        const showContextMenu = (x, y) => {\n            var _a;\n            this._contextMenuService.showContextMenu({\n                domForShadowRoot: useShadowDOM ? (_a = _modifiedEditor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n                getAnchor: () => ({ x, y }),\n                getActions: () => {\n                    const actions = [];\n                    const isDeletion = _diff.modified.isEmpty;\n                    // default action\n                    actions.push(new Action('diff.clipboard.copyDeletedContent', isDeletion\n                        ? (_diff.original.length > 1\n                            ? localize('diff.clipboard.copyDeletedLinesContent.label', \"Copy deleted lines\")\n                            : localize('diff.clipboard.copyDeletedLinesContent.single.label', \"Copy deleted line\"))\n                        : (_diff.original.length > 1\n                            ? localize('diff.clipboard.copyChangedLinesContent.label', \"Copy changed lines\")\n                            : localize('diff.clipboard.copyChangedLinesContent.single.label', \"Copy changed line\")), undefined, true, async () => {\n                        const originalText = this._originalTextModel.getValueInRange(_diff.original.toExclusiveRange());\n                        await this._clipboardService.writeText(originalText);\n                    }));\n                    if (_diff.original.length > 1) {\n                        actions.push(new Action('diff.clipboard.copyDeletedLineContent', isDeletion\n                            ? localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", _diff.original.startLineNumber + currentLineNumberOffset)\n                            : localize('diff.clipboard.copyChangedLineContent.label', \"Copy changed line ({0})\", _diff.original.startLineNumber + currentLineNumberOffset), undefined, true, async () => {\n                            let lineContent = this._originalTextModel.getLineContent(_diff.original.startLineNumber + currentLineNumberOffset);\n                            if (lineContent === '') {\n                                // empty line -> new line\n                                const eof = this._originalTextModel.getEndOfLineSequence();\n                                lineContent = eof === 0 /* EndOfLineSequence.LF */ ? '\\n' : '\\r\\n';\n                            }\n                            await this._clipboardService.writeText(lineContent);\n                        }));\n                    }\n                    const readOnly = _modifiedEditor.getOption(90 /* EditorOption.readOnly */);\n                    if (!readOnly) {\n                        actions.push(new Action('diff.inline.revertChange', localize('diff.inline.revertChange.label', \"Revert this change\"), undefined, true, async () => {\n                            this._editor.revert(this._diff);\n                        }));\n                    }\n                    return actions;\n                },\n                autoSelectFirstItem: true\n            });\n        };\n        this._register(addStandardDisposableListener(this._diffActions, 'mousedown', e => {\n            if (!e.leftButton) {\n                return;\n            }\n            const { top, height } = getDomNodePagePosition(this._diffActions);\n            const pad = Math.floor(lineHeight / 3);\n            e.preventDefault();\n            showContextMenu(e.posx, top + height + pad);\n        }));\n        this._register(_modifiedEditor.onMouseMove((e) => {\n            if ((e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) && e.target.detail.viewZoneId === this._getViewZoneId()) {\n                currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                this.visibility = true;\n            }\n            else {\n                this.visibility = false;\n            }\n        }));\n        this._register(_modifiedEditor.onMouseDown((e) => {\n            if (!e.event.leftButton) {\n                return;\n            }\n            if (e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n                const viewZoneId = e.target.detail.viewZoneId;\n                if (viewZoneId === this._getViewZoneId()) {\n                    e.event.preventDefault();\n                    currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                    showContextMenu(e.event.posx, e.event.posy + lineHeight);\n                }\n            }\n        }));\n    }\n    _updateLightBulbPosition(marginDomNode, y, lineHeight) {\n        const { top } = getDomNodePagePosition(marginDomNode);\n        const offset = y - top;\n        const lineNumberOffset = Math.floor(offset / lineHeight);\n        const newTop = lineNumberOffset * lineHeight;\n        this._diffActions.style.top = `${newTop}px`;\n        if (this._viewLineCounts) {\n            let acc = 0;\n            for (let i = 0; i < this._viewLineCounts.length; i++) {\n                acc += this._viewLineCounts[i];\n                if (lineNumberOffset < acc) {\n                    return i;\n                }\n            }\n        }\n        return lineNumberOffset;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\nconst ttPolicy = createTrustedTypesPolicy('diffEditorWidget', { createHTML: value => value });\nexport function renderLines(source, options, decorations, domNode) {\n    applyFontInfo(domNode, options.fontInfo);\n    const hasCharChanges = (decorations.length > 0);\n    const sb = new StringBuilder(10000);\n    let maxCharsPerLine = 0;\n    let renderedLineCount = 0;\n    const viewLineCounts = [];\n    for (let lineIndex = 0; lineIndex < source.lineTokens.length; lineIndex++) {\n        const lineNumber = lineIndex + 1;\n        const lineTokens = source.lineTokens[lineIndex];\n        const lineBreakData = source.lineBreakData[lineIndex];\n        const actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, Number.MAX_SAFE_INTEGER);\n        if (lineBreakData) {\n            let lastBreakOffset = 0;\n            for (const breakOffset of lineBreakData.breakOffsets) {\n                const viewLineTokens = lineTokens.sliceAndInflate(lastBreakOffset, breakOffset, 0);\n                maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, viewLineTokens, LineDecoration.extractWrapped(actualDecorations, lastBreakOffset, breakOffset), hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\n                renderedLineCount++;\n                lastBreakOffset = breakOffset;\n            }\n            viewLineCounts.push(lineBreakData.breakOffsets.length);\n        }\n        else {\n            viewLineCounts.push(1);\n            maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, lineTokens, actualDecorations, hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\n            renderedLineCount++;\n        }\n    }\n    maxCharsPerLine += options.scrollBeyondLastColumn;\n    const html = sb.build();\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n    domNode.innerHTML = trustedhtml;\n    const minWidthInPx = (maxCharsPerLine * options.typicalHalfwidthCharacterWidth);\n    return {\n        heightInLines: renderedLineCount,\n        minWidthInPx,\n        viewLineCounts,\n    };\n}\nexport class LineSource {\n    constructor(lineTokens, lineBreakData, mightContainNonBasicASCII, mightContainRTL) {\n        this.lineTokens = lineTokens;\n        this.lineBreakData = lineBreakData;\n        this.mightContainNonBasicASCII = mightContainNonBasicASCII;\n        this.mightContainRTL = mightContainRTL;\n    }\n}\nexport class RenderOptions {\n    static fromEditor(editor) {\n        var _a;\n        const modifiedEditorOptions = editor.getOptions();\n        const fontInfo = modifiedEditorOptions.get(50 /* EditorOption.fontInfo */);\n        const layoutInfo = modifiedEditorOptions.get(143 /* EditorOption.layoutInfo */);\n        return new RenderOptions(((_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getOptions().tabSize) || 0, fontInfo, modifiedEditorOptions.get(33 /* EditorOption.disableMonospaceOptimizations */), fontInfo.typicalHalfwidthCharacterWidth, modifiedEditorOptions.get(103 /* EditorOption.scrollBeyondLastColumn */), modifiedEditorOptions.get(66 /* EditorOption.lineHeight */), layoutInfo.decorationsWidth, modifiedEditorOptions.get(116 /* EditorOption.stopRenderingLineAfter */), modifiedEditorOptions.get(98 /* EditorOption.renderWhitespace */), modifiedEditorOptions.get(93 /* EditorOption.renderControlCharacters */), modifiedEditorOptions.get(51 /* EditorOption.fontLigatures */));\n    }\n    constructor(tabSize, fontInfo, disableMonospaceOptimizations, typicalHalfwidthCharacterWidth, scrollBeyondLastColumn, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures) {\n        this.tabSize = tabSize;\n        this.fontInfo = fontInfo;\n        this.disableMonospaceOptimizations = disableMonospaceOptimizations;\n        this.typicalHalfwidthCharacterWidth = typicalHalfwidthCharacterWidth;\n        this.scrollBeyondLastColumn = scrollBeyondLastColumn;\n        this.lineHeight = lineHeight;\n        this.lineDecorationsWidth = lineDecorationsWidth;\n        this.stopRenderingLineAfter = stopRenderingLineAfter;\n        this.renderWhitespace = renderWhitespace;\n        this.renderControlCharacters = renderControlCharacters;\n        this.fontLigatures = fontLigatures;\n    }\n}\nfunction renderOriginalLine(viewLineIdx, lineTokens, decorations, hasCharChanges, mightContainNonBasicASCII, mightContainRTL, options, sb) {\n    sb.appendString('<div class=\"view-line');\n    if (!hasCharChanges) {\n        // No char changes\n        sb.appendString(' char-delete');\n    }\n    sb.appendString('\" style=\"top:');\n    sb.appendString(String(viewLineIdx * options.lineHeight));\n    sb.appendString('px;width:1000000px;\">');\n    const lineContent = lineTokens.getLineContent();\n    const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, mightContainNonBasicASCII);\n    const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, mightContainRTL);\n    const output = renderViewLine(new RenderLineInput((options.fontInfo.isMonospace && !options.disableMonospaceOptimizations), options.fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, decorations, options.tabSize, 0, options.fontInfo.spaceWidth, options.fontInfo.middotWidth, options.fontInfo.wsmiddotWidth, options.stopRenderingLineAfter, options.renderWhitespace, options.renderControlCharacters, options.fontLigatures !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\n    ), sb);\n    sb.appendString('</div>');\n    return output.characterMapping.getHorizontalOffset(output.characterMapping.length);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { $, addDisposableListener } from '../../../../base/browser/dom.js';\nimport { ArrayQueue } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, derivedWithStore, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { diffDeleteDecoration, diffRemoveIcon } from './decorations.js';\nimport { DiffMapping } from './diffEditorViewModel.js';\nimport { InlineDiffDeletedCodeMargin } from './inlineDiffDeletedCodeMargin.js';\nimport { LineSource, RenderOptions, renderLines } from './renderLines.js';\nimport { animatedObservable, joinCombine } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineDecoration } from '../../../common/viewModel.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\n/**\n * Ensures both editors have the same height by aligning unchanged lines.\n * In inline view mode, inserts viewzones to show deleted code from the original text model in the modified code editor.\n * Synchronizes scrolling.\n *\n * Make sure to add the view zones!\n */\nlet ViewZoneManager = class ViewZoneManager extends Disposable {\n    constructor(_targetWindow, _editors, _diffModel, _options, _diffEditorWidget, _canIgnoreViewZoneUpdateEvent, _origViewZonesToIgnore, _modViewZonesToIgnore, _clipboardService, _contextMenuService) {\n        super();\n        this._targetWindow = _targetWindow;\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._diffEditorWidget = _diffEditorWidget;\n        this._canIgnoreViewZoneUpdateEvent = _canIgnoreViewZoneUpdateEvent;\n        this._origViewZonesToIgnore = _origViewZonesToIgnore;\n        this._modViewZonesToIgnore = _modViewZonesToIgnore;\n        this._clipboardService = _clipboardService;\n        this._contextMenuService = _contextMenuService;\n        this._originalTopPadding = observableValue(this, 0);\n        this._originalScrollOffset = observableValue(this, 0);\n        this._originalScrollOffsetAnimated = animatedObservable(this._targetWindow, this._originalScrollOffset, this._store);\n        this._modifiedTopPadding = observableValue(this, 0);\n        this._modifiedScrollOffset = observableValue(this, 0);\n        this._modifiedScrollOffsetAnimated = animatedObservable(this._targetWindow, this._modifiedScrollOffset, this._store);\n        const state = observableValue('invalidateAlignmentsState', 0);\n        const updateImmediately = this._register(new RunOnceScheduler(() => {\n            state.set(state.get() + 1, undefined);\n        }, 0));\n        this._register(this._editors.original.onDidChangeViewZones((_args) => { if (!this._canIgnoreViewZoneUpdateEvent()) {\n            updateImmediately.schedule();\n        } }));\n        this._register(this._editors.modified.onDidChangeViewZones((_args) => { if (!this._canIgnoreViewZoneUpdateEvent()) {\n            updateImmediately.schedule();\n        } }));\n        this._register(this._editors.original.onDidChangeConfiguration((args) => {\n            if (args.hasChanged(144 /* EditorOption.wrappingInfo */) || args.hasChanged(66 /* EditorOption.lineHeight */)) {\n                updateImmediately.schedule();\n            }\n        }));\n        this._register(this._editors.modified.onDidChangeConfiguration((args) => {\n            if (args.hasChanged(144 /* EditorOption.wrappingInfo */) || args.hasChanged(66 /* EditorOption.lineHeight */)) {\n                updateImmediately.schedule();\n            }\n        }));\n        const originalModelTokenizationCompleted = this._diffModel.map(m => m ? observableFromEvent(m.model.original.onDidChangeTokens, () => m.model.original.tokenization.backgroundTokenizationState === 2 /* BackgroundTokenizationState.Completed */) : undefined).map((m, reader) => m === null || m === void 0 ? void 0 : m.read(reader));\n        const alignments = derived((reader) => {\n            /** @description alignments */\n            const diffModel = this._diffModel.read(reader);\n            const diff = diffModel === null || diffModel === void 0 ? void 0 : diffModel.diff.read(reader);\n            if (!diffModel || !diff) {\n                return null;\n            }\n            state.read(reader);\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\n            const innerHunkAlignment = renderSideBySide;\n            return computeRangeAlignment(this._editors.original, this._editors.modified, diff.mappings, this._origViewZonesToIgnore, this._modViewZonesToIgnore, innerHunkAlignment);\n        });\n        const alignmentsSyncedMovedText = derived((reader) => {\n            var _a;\n            /** @description alignmentsSyncedMovedText */\n            const syncedMovedText = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader);\n            if (!syncedMovedText) {\n                return null;\n            }\n            state.read(reader);\n            const mappings = syncedMovedText.changes.map(c => new DiffMapping(c));\n            // TODO dont include alignments outside syncedMovedText\n            return computeRangeAlignment(this._editors.original, this._editors.modified, mappings, this._origViewZonesToIgnore, this._modViewZonesToIgnore, true);\n        });\n        function createFakeLinesDiv() {\n            const r = document.createElement('div');\n            r.className = 'diagonal-fill';\n            return r;\n        }\n        const alignmentViewZonesDisposables = this._register(new DisposableStore());\n        this.viewZones = derivedWithStore(this, (reader, store) => {\n            var _a, _b, _c, _d, _e, _f, _g, _h;\n            alignmentViewZonesDisposables.clear();\n            const alignmentsVal = alignments.read(reader) || [];\n            const origViewZones = [];\n            const modViewZones = [];\n            const modifiedTopPaddingVal = this._modifiedTopPadding.read(reader);\n            if (modifiedTopPaddingVal > 0) {\n                modViewZones.push({\n                    afterLineNumber: 0,\n                    domNode: document.createElement('div'),\n                    heightInPx: modifiedTopPaddingVal,\n                    showInHiddenAreas: true,\n                    suppressMouseDown: true,\n                });\n            }\n            const originalTopPaddingVal = this._originalTopPadding.read(reader);\n            if (originalTopPaddingVal > 0) {\n                origViewZones.push({\n                    afterLineNumber: 0,\n                    domNode: document.createElement('div'),\n                    heightInPx: originalTopPaddingVal,\n                    showInHiddenAreas: true,\n                    suppressMouseDown: true,\n                });\n            }\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\n            const deletedCodeLineBreaksComputer = !renderSideBySide ? (_a = this._editors.modified._getViewModel()) === null || _a === void 0 ? void 0 : _a.createLineBreaksComputer() : undefined;\n            if (deletedCodeLineBreaksComputer) {\n                for (const a of alignmentsVal) {\n                    if (a.diff) {\n                        for (let i = a.originalRange.startLineNumber; i < a.originalRange.endLineNumberExclusive; i++) {\n                            deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.addRequest(this._editors.original.getModel().getLineContent(i), null, null);\n                        }\n                    }\n                }\n            }\n            const lineBreakData = (_b = deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.finalize()) !== null && _b !== void 0 ? _b : [];\n            let lineBreakDataIdx = 0;\n            const modLineHeight = this._editors.modified.getOption(66 /* EditorOption.lineHeight */);\n            const syncedMovedText = (_c = this._diffModel.read(reader)) === null || _c === void 0 ? void 0 : _c.movedTextToCompare.read(reader);\n            const mightContainNonBasicASCII = (_e = (_d = this._editors.original.getModel()) === null || _d === void 0 ? void 0 : _d.mightContainNonBasicASCII()) !== null && _e !== void 0 ? _e : false;\n            const mightContainRTL = (_g = (_f = this._editors.original.getModel()) === null || _f === void 0 ? void 0 : _f.mightContainRTL()) !== null && _g !== void 0 ? _g : false;\n            const renderOptions = RenderOptions.fromEditor(this._editors.modified);\n            for (const a of alignmentsVal) {\n                if (a.diff && !renderSideBySide) {\n                    if (!a.originalRange.isEmpty) {\n                        originalModelTokenizationCompleted.read(reader); // Update view-zones once tokenization completes\n                        const deletedCodeDomNode = document.createElement('div');\n                        deletedCodeDomNode.classList.add('view-lines', 'line-delete', 'monaco-mouse-cursor-text');\n                        const source = new LineSource(a.originalRange.mapToLineArray(l => this._editors.original.getModel().tokenization.getLineTokens(l)), a.originalRange.mapToLineArray(_ => lineBreakData[lineBreakDataIdx++]), mightContainNonBasicASCII, mightContainRTL);\n                        const decorations = [];\n                        for (const i of a.diff.innerChanges || []) {\n                            decorations.push(new InlineDecoration(i.originalRange.delta(-(a.diff.original.startLineNumber - 1)), diffDeleteDecoration.className, 0 /* InlineDecorationType.Regular */));\n                        }\n                        const result = renderLines(source, renderOptions, decorations, deletedCodeDomNode);\n                        const marginDomNode = document.createElement('div');\n                        marginDomNode.className = 'inline-deleted-margin-view-zone';\n                        applyFontInfo(marginDomNode, renderOptions.fontInfo);\n                        if (this._options.renderIndicators.read(reader)) {\n                            for (let i = 0; i < result.heightInLines; i++) {\n                                const marginElement = document.createElement('div');\n                                marginElement.className = `delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`;\n                                marginElement.setAttribute('style', `position:absolute;top:${i * modLineHeight}px;width:${renderOptions.lineDecorationsWidth}px;height:${modLineHeight}px;right:0;`);\n                                marginDomNode.appendChild(marginElement);\n                            }\n                        }\n                        let zoneId = undefined;\n                        alignmentViewZonesDisposables.add(new InlineDiffDeletedCodeMargin(() => assertIsDefined(zoneId), marginDomNode, this._editors.modified, a.diff, this._diffEditorWidget, result.viewLineCounts, this._editors.original.getModel(), this._contextMenuService, this._clipboardService));\n                        for (let i = 0; i < result.viewLineCounts.length; i++) {\n                            const count = result.viewLineCounts[i];\n                            // Account for wrapped lines in the (collapsed) original editor (which doesn't wrap lines).\n                            if (count > 1) {\n                                origViewZones.push({\n                                    afterLineNumber: a.originalRange.startLineNumber + i,\n                                    domNode: createFakeLinesDiv(),\n                                    heightInPx: (count - 1) * modLineHeight,\n                                    showInHiddenAreas: true,\n                                    suppressMouseDown: true,\n                                });\n                            }\n                        }\n                        modViewZones.push({\n                            afterLineNumber: a.modifiedRange.startLineNumber - 1,\n                            domNode: deletedCodeDomNode,\n                            heightInPx: result.heightInLines * modLineHeight,\n                            minWidthInPx: result.minWidthInPx,\n                            marginDomNode,\n                            setZoneId(id) { zoneId = id; },\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                    const marginDomNode = document.createElement('div');\n                    marginDomNode.className = 'gutter-delete';\n                    origViewZones.push({\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: a.modifiedHeightInPx,\n                        marginDomNode,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n                else {\n                    const delta = a.modifiedHeightInPx - a.originalHeightInPx;\n                    if (delta > 0) {\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.delta(-1).deltaLength(2).contains(a.originalRange.endLineNumberExclusive - 1)) {\n                            continue;\n                        }\n                        origViewZones.push({\n                            afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                            domNode: createFakeLinesDiv(),\n                            heightInPx: delta,\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                    else {\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(a.modifiedRange.endLineNumberExclusive - 1)) {\n                            continue;\n                        }\n                        function createViewZoneMarginArrow() {\n                            const arrow = document.createElement('div');\n                            arrow.className = 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight);\n                            store.add(addDisposableListener(arrow, 'mousedown', e => e.stopPropagation()));\n                            store.add(addDisposableListener(arrow, 'click', e => {\n                                e.stopPropagation();\n                                _diffEditorWidget.revert(a.diff);\n                            }));\n                            return $('div', {}, arrow);\n                        }\n                        let marginDomNode = undefined;\n                        if (a.diff && a.diff.modified.isEmpty && this._options.shouldRenderRevertArrows.read(reader)) {\n                            marginDomNode = createViewZoneMarginArrow();\n                        }\n                        modViewZones.push({\n                            afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n                            domNode: createFakeLinesDiv(),\n                            heightInPx: -delta,\n                            marginDomNode,\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                }\n            }\n            for (const a of (_h = alignmentsSyncedMovedText.read(reader)) !== null && _h !== void 0 ? _h : []) {\n                if (!(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.intersect(a.originalRange))\n                    || !(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.intersect(a.modifiedRange))) {\n                    // ignore unrelated alignments outside the synced moved text\n                    continue;\n                }\n                const delta = a.modifiedHeightInPx - a.originalHeightInPx;\n                if (delta > 0) {\n                    origViewZones.push({\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: delta,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n                else {\n                    modViewZones.push({\n                        afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: -delta,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n            }\n            return { orig: origViewZones, mod: modViewZones };\n        });\n        let ignoreChange = false;\n        this._register(this._editors.original.onDidScrollChange(e => {\n            if (e.scrollLeftChanged && !ignoreChange) {\n                ignoreChange = true;\n                this._editors.modified.setScrollLeft(e.scrollLeft);\n                ignoreChange = false;\n            }\n        }));\n        this._register(this._editors.modified.onDidScrollChange(e => {\n            if (e.scrollLeftChanged && !ignoreChange) {\n                ignoreChange = true;\n                this._editors.original.setScrollLeft(e.scrollLeft);\n                ignoreChange = false;\n            }\n        }));\n        this._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => /** @description original.getScrollTop */ this._editors.original.getScrollTop());\n        this._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => /** @description modified.getScrollTop */ this._editors.modified.getScrollTop());\n        // origExtraHeight + origOffset - origScrollTop = modExtraHeight + modOffset - modScrollTop\n        // origScrollTop = origExtraHeight + origOffset - modExtraHeight - modOffset + modScrollTop\n        // modScrollTop = modExtraHeight + modOffset - origExtraHeight - origOffset + origScrollTop\n        // origOffset - modOffset = heightOfLines(1..Y) - heightOfLines(1..X)\n        // origScrollTop >= 0, modScrollTop >= 0\n        this._register(autorun(reader => {\n            /** @description update scroll modified */\n            const newScrollTopModified = this._originalScrollTop.read(reader)\n                - (this._originalScrollOffsetAnimated.get() - this._modifiedScrollOffsetAnimated.read(reader))\n                - (this._originalTopPadding.get() - this._modifiedTopPadding.read(reader));\n            if (newScrollTopModified !== this._editors.modified.getScrollTop()) {\n                this._editors.modified.setScrollTop(newScrollTopModified, 1 /* ScrollType.Immediate */);\n            }\n        }));\n        this._register(autorun(reader => {\n            /** @description update scroll original */\n            const newScrollTopOriginal = this._modifiedScrollTop.read(reader)\n                - (this._modifiedScrollOffsetAnimated.get() - this._originalScrollOffsetAnimated.read(reader))\n                - (this._modifiedTopPadding.get() - this._originalTopPadding.read(reader));\n            if (newScrollTopOriginal !== this._editors.original.getScrollTop()) {\n                this._editors.original.setScrollTop(newScrollTopOriginal, 1 /* ScrollType.Immediate */);\n            }\n        }));\n        this._register(autorun(reader => {\n            var _a;\n            /** @description update editor top offsets */\n            const m = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader);\n            let deltaOrigToMod = 0;\n            if (m) {\n                const trueTopOriginal = this._editors.original.getTopForLineNumber(m.lineRangeMapping.original.startLineNumber, true) - this._originalTopPadding.get();\n                const trueTopModified = this._editors.modified.getTopForLineNumber(m.lineRangeMapping.modified.startLineNumber, true) - this._modifiedTopPadding.get();\n                deltaOrigToMod = trueTopModified - trueTopOriginal;\n            }\n            if (deltaOrigToMod > 0) {\n                this._modifiedTopPadding.set(0, undefined);\n                this._originalTopPadding.set(deltaOrigToMod, undefined);\n            }\n            else if (deltaOrigToMod < 0) {\n                this._modifiedTopPadding.set(-deltaOrigToMod, undefined);\n                this._originalTopPadding.set(0, undefined);\n            }\n            else {\n                setTimeout(() => {\n                    this._modifiedTopPadding.set(0, undefined);\n                    this._originalTopPadding.set(0, undefined);\n                }, 400);\n            }\n            if (this._editors.modified.hasTextFocus()) {\n                this._originalScrollOffset.set(this._modifiedScrollOffset.get() - deltaOrigToMod, undefined, true);\n            }\n            else {\n                this._modifiedScrollOffset.set(this._originalScrollOffset.get() + deltaOrigToMod, undefined, true);\n            }\n        }));\n    }\n};\nViewZoneManager = __decorate([\n    __param(8, IClipboardService),\n    __param(9, IContextMenuService)\n], ViewZoneManager);\nexport { ViewZoneManager };\nfunction computeRangeAlignment(originalEditor, modifiedEditor, diffs, originalEditorAlignmentViewZones, modifiedEditorAlignmentViewZones, innerHunkAlignment) {\n    const originalLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(originalEditor, originalEditorAlignmentViewZones));\n    const modifiedLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(modifiedEditor, modifiedEditorAlignmentViewZones));\n    const origLineHeight = originalEditor.getOption(66 /* EditorOption.lineHeight */);\n    const modLineHeight = modifiedEditor.getOption(66 /* EditorOption.lineHeight */);\n    const result = [];\n    let lastOriginalLineNumber = 0;\n    let lastModifiedLineNumber = 0;\n    function handleAlignmentsOutsideOfDiffs(untilOriginalLineNumberExclusive, untilModifiedLineNumberExclusive) {\n        while (true) {\n            let origNext = originalLineHeightOverrides.peek();\n            let modNext = modifiedLineHeightOverrides.peek();\n            if (origNext && origNext.lineNumber >= untilOriginalLineNumberExclusive) {\n                origNext = undefined;\n            }\n            if (modNext && modNext.lineNumber >= untilModifiedLineNumberExclusive) {\n                modNext = undefined;\n            }\n            if (!origNext && !modNext) {\n                break;\n            }\n            const distOrig = origNext ? origNext.lineNumber - lastOriginalLineNumber : Number.MAX_VALUE;\n            const distNext = modNext ? modNext.lineNumber - lastModifiedLineNumber : Number.MAX_VALUE;\n            if (distOrig < distNext) {\n                originalLineHeightOverrides.dequeue();\n                modNext = {\n                    lineNumber: origNext.lineNumber - lastOriginalLineNumber + lastModifiedLineNumber,\n                    heightInPx: 0,\n                };\n            }\n            else if (distOrig > distNext) {\n                modifiedLineHeightOverrides.dequeue();\n                origNext = {\n                    lineNumber: modNext.lineNumber - lastModifiedLineNumber + lastOriginalLineNumber,\n                    heightInPx: 0,\n                };\n            }\n            else {\n                originalLineHeightOverrides.dequeue();\n                modifiedLineHeightOverrides.dequeue();\n            }\n            result.push({\n                originalRange: LineRange.ofLength(origNext.lineNumber, 1),\n                modifiedRange: LineRange.ofLength(modNext.lineNumber, 1),\n                originalHeightInPx: origLineHeight + origNext.heightInPx,\n                modifiedHeightInPx: modLineHeight + modNext.heightInPx,\n                diff: undefined,\n            });\n        }\n    }\n    for (const m of diffs) {\n        const c = m.lineRangeMapping;\n        handleAlignmentsOutsideOfDiffs(c.original.startLineNumber, c.modified.startLineNumber);\n        let first = true;\n        let lastModLineNumber = c.modified.startLineNumber;\n        let lastOrigLineNumber = c.original.startLineNumber;\n        function emitAlignment(origLineNumberExclusive, modLineNumberExclusive) {\n            var _a, _b, _c, _d;\n            if (origLineNumberExclusive < lastOrigLineNumber || modLineNumberExclusive < lastModLineNumber) {\n                return;\n            }\n            if (first) {\n                first = false;\n            }\n            else if (origLineNumberExclusive === lastOrigLineNumber || modLineNumberExclusive === lastModLineNumber) {\n                return;\n            }\n            const originalRange = new LineRange(lastOrigLineNumber, origLineNumberExclusive);\n            const modifiedRange = new LineRange(lastModLineNumber, modLineNumberExclusive);\n            if (originalRange.isEmpty && modifiedRange.isEmpty) {\n                return;\n            }\n            const originalAdditionalHeight = (_b = (_a = originalLineHeightOverrides\n                .takeWhile(v => v.lineNumber < origLineNumberExclusive)) === null || _a === void 0 ? void 0 : _a.reduce((p, c) => p + c.heightInPx, 0)) !== null && _b !== void 0 ? _b : 0;\n            const modifiedAdditionalHeight = (_d = (_c = modifiedLineHeightOverrides\n                .takeWhile(v => v.lineNumber < modLineNumberExclusive)) === null || _c === void 0 ? void 0 : _c.reduce((p, c) => p + c.heightInPx, 0)) !== null && _d !== void 0 ? _d : 0;\n            result.push({\n                originalRange,\n                modifiedRange,\n                originalHeightInPx: originalRange.length * origLineHeight + originalAdditionalHeight,\n                modifiedHeightInPx: modifiedRange.length * modLineHeight + modifiedAdditionalHeight,\n                diff: m.lineRangeMapping,\n            });\n            lastOrigLineNumber = origLineNumberExclusive;\n            lastModLineNumber = modLineNumberExclusive;\n        }\n        if (innerHunkAlignment) {\n            for (const i of c.innerChanges || []) {\n                if (i.originalRange.startColumn > 1 && i.modifiedRange.startColumn > 1) {\n                    // There is some unmodified text on this line before the diff\n                    emitAlignment(i.originalRange.startLineNumber, i.modifiedRange.startLineNumber);\n                }\n                if (i.originalRange.endColumn < originalEditor.getModel().getLineMaxColumn(i.originalRange.endLineNumber)) {\n                    // // There is some unmodified text on this line after the diff\n                    emitAlignment(i.originalRange.endLineNumber, i.modifiedRange.endLineNumber);\n                }\n            }\n        }\n        emitAlignment(c.original.endLineNumberExclusive, c.modified.endLineNumberExclusive);\n        lastOriginalLineNumber = c.original.endLineNumberExclusive;\n        lastModifiedLineNumber = c.modified.endLineNumberExclusive;\n    }\n    handleAlignmentsOutsideOfDiffs(Number.MAX_VALUE, Number.MAX_VALUE);\n    return result;\n}\nfunction getAdditionalLineHeights(editor, viewZonesToIgnore) {\n    const viewZoneHeights = [];\n    const wrappingZoneHeights = [];\n    const hasWrapping = editor.getOption(144 /* EditorOption.wrappingInfo */).wrappingColumn !== -1;\n    const coordinatesConverter = editor._getViewModel().coordinatesConverter;\n    const editorLineHeight = editor.getOption(66 /* EditorOption.lineHeight */);\n    if (hasWrapping) {\n        for (let i = 1; i <= editor.getModel().getLineCount(); i++) {\n            const lineCount = coordinatesConverter.getModelLineViewLineCount(i);\n            if (lineCount > 1) {\n                wrappingZoneHeights.push({ lineNumber: i, heightInPx: editorLineHeight * (lineCount - 1) });\n            }\n        }\n    }\n    for (const w of editor.getWhitespaces()) {\n        if (viewZonesToIgnore.has(w.id)) {\n            continue;\n        }\n        const modelLineNumber = w.afterLineNumber === 0 ? 0 : coordinatesConverter.convertViewPositionToModelPosition(new Position(w.afterLineNumber, 1)).lineNumber;\n        viewZoneHeights.push({ lineNumber: modelLineNumber, heightInPx: w.height });\n    }\n    const result = joinCombine(viewZoneHeights, wrappingZoneHeights, v => v.lineNumber, (v1, v2) => ({ lineNumber: v1.lineNumber, heightInPx: v1.heightInPx + v2.heightInPx }));\n    return result;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar OverviewRulerPart_1;\nimport { EventType, addDisposableListener, addStandardDisposableListener, h } from '../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { ScrollbarState } from '../../../../base/browser/ui/scrollbar/scrollbarState.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableSignalFromEvent } from '../../../../base/common/observable.js';\nimport { appendRemoveOnDispose } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { OverviewRulerZone } from '../../../common/viewModel/overviewZoneManager.js';\nimport { defaultInsertColor, defaultRemoveColor, diffInserted, diffOverviewRulerInserted, diffOverviewRulerRemoved, diffRemoved } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nlet OverviewRulerPart = OverviewRulerPart_1 = class OverviewRulerPart extends Disposable {\n    constructor(_editors, _rootElement, _diffModel, _rootWidth, _rootHeight, _modifiedEditorLayoutInfo, _themeService) {\n        super();\n        this._editors = _editors;\n        this._rootElement = _rootElement;\n        this._diffModel = _diffModel;\n        this._rootWidth = _rootWidth;\n        this._rootHeight = _rootHeight;\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\n        this._themeService = _themeService;\n        this.width = OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH;\n        const currentColorTheme = observableFromEvent(this._themeService.onDidColorThemeChange, () => this._themeService.getColorTheme());\n        const currentColors = derived(reader => {\n            /** @description colors */\n            const theme = currentColorTheme.read(reader);\n            const insertColor = theme.getColor(diffOverviewRulerInserted) || (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\n            const removeColor = theme.getColor(diffOverviewRulerRemoved) || (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\n            return { insertColor, removeColor };\n        });\n        const viewportDomElement = createFastDomNode(document.createElement('div'));\n        viewportDomElement.setClassName('diffViewport');\n        viewportDomElement.setPosition('absolute');\n        const diffOverviewRoot = h('div.diffOverview', {\n            style: { position: 'absolute', top: '0px', width: OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px' }\n        }).root;\n        this._register(appendRemoveOnDispose(diffOverviewRoot, viewportDomElement.domNode));\n        this._register(addStandardDisposableListener(diffOverviewRoot, EventType.POINTER_DOWN, (e) => {\n            this._editors.modified.delegateVerticalScrollbarPointerDown(e);\n        }));\n        this._register(addDisposableListener(diffOverviewRoot, EventType.MOUSE_WHEEL, (e) => {\n            this._editors.modified.delegateScrollFromMouseWheelEvent(e);\n        }, { passive: false }));\n        this._register(appendRemoveOnDispose(this._rootElement, diffOverviewRoot));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description recreate overview rules when model changes */\n            const m = this._diffModel.read(reader);\n            const originalOverviewRuler = this._editors.original.createOverviewRuler('original diffOverviewRuler');\n            if (originalOverviewRuler) {\n                store.add(originalOverviewRuler);\n                store.add(appendRemoveOnDispose(diffOverviewRoot, originalOverviewRuler.getDomNode()));\n            }\n            const modifiedOverviewRuler = this._editors.modified.createOverviewRuler('modified diffOverviewRuler');\n            if (modifiedOverviewRuler) {\n                store.add(modifiedOverviewRuler);\n                store.add(appendRemoveOnDispose(diffOverviewRoot, modifiedOverviewRuler.getDomNode()));\n            }\n            if (!originalOverviewRuler || !modifiedOverviewRuler) {\n                // probably no model\n                return;\n            }\n            const origViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.original.onDidChangeViewZones);\n            const modViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.modified.onDidChangeViewZones);\n            const origHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.original.onDidChangeHiddenAreas);\n            const modHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.modified.onDidChangeHiddenAreas);\n            store.add(autorun(reader => {\n                var _a;\n                /** @description set overview ruler zones */\n                origViewZonesChanged.read(reader);\n                modViewZonesChanged.read(reader);\n                origHiddenRangesChanged.read(reader);\n                modHiddenRangesChanged.read(reader);\n                const colors = currentColors.read(reader);\n                const diff = (_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings;\n                function createZones(ranges, color, editor) {\n                    const vm = editor._getViewModel();\n                    if (!vm) {\n                        return [];\n                    }\n                    return ranges\n                        .filter(d => d.length > 0)\n                        .map(r => {\n                        const start = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.startLineNumber, 1));\n                        const end = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.endLineNumberExclusive, 1));\n                        // By computing the lineCount, we won't ask the view model later for the bottom vertical position.\n                        // (The view model will take into account the alignment viewzones, which will give\n                        // modifications and deletetions always the same height.)\n                        const lineCount = end.lineNumber - start.lineNumber;\n                        return new OverviewRulerZone(start.lineNumber, end.lineNumber, lineCount, color.toString());\n                    });\n                }\n                const originalZones = createZones((diff || []).map(d => d.lineRangeMapping.original), colors.removeColor, this._editors.original);\n                const modifiedZones = createZones((diff || []).map(d => d.lineRangeMapping.modified), colors.insertColor, this._editors.modified);\n                originalOverviewRuler === null || originalOverviewRuler === void 0 ? void 0 : originalOverviewRuler.setZones(originalZones);\n                modifiedOverviewRuler === null || modifiedOverviewRuler === void 0 ? void 0 : modifiedOverviewRuler.setZones(modifiedZones);\n            }));\n            store.add(autorun(reader => {\n                /** @description layout overview ruler */\n                const height = this._rootHeight.read(reader);\n                const width = this._rootWidth.read(reader);\n                const layoutInfo = this._modifiedEditorLayoutInfo.read(reader);\n                if (layoutInfo) {\n                    const freeSpace = OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * OverviewRulerPart_1.ONE_OVERVIEW_WIDTH;\n                    originalOverviewRuler.setLayout({\n                        top: 0,\n                        height: height,\n                        right: freeSpace + OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\n                        width: OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\n                    });\n                    modifiedOverviewRuler.setLayout({\n                        top: 0,\n                        height: height,\n                        right: 0,\n                        width: OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\n                    });\n                    const scrollTop = this._editors.modifiedScrollTop.read(reader);\n                    const scrollHeight = this._editors.modifiedScrollHeight.read(reader);\n                    const scrollBarOptions = this._editors.modified.getOption(102 /* EditorOption.scrollbar */);\n                    const state = new ScrollbarState(scrollBarOptions.verticalHasArrows ? scrollBarOptions.arrowSize : 0, scrollBarOptions.verticalScrollbarSize, 0, layoutInfo.height, scrollHeight, scrollTop);\n                    viewportDomElement.setTop(state.getSliderPosition());\n                    viewportDomElement.setHeight(state.getSliderSize());\n                }\n                else {\n                    viewportDomElement.setTop(0);\n                    viewportDomElement.setHeight(0);\n                }\n                diffOverviewRoot.style.height = height + 'px';\n                diffOverviewRoot.style.left = (width - OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\n                viewportDomElement.setWidth(OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH);\n            }));\n        }));\n    }\n};\nOverviewRulerPart.ONE_OVERVIEW_WIDTH = 15;\nOverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH = OverviewRulerPart_1.ONE_OVERVIEW_WIDTH * 2;\nOverviewRulerPart = OverviewRulerPart_1 = __decorate([\n    __param(6, IThemeService)\n], OverviewRulerPart);\nexport { OverviewRulerPart };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { localize } from '../../../../nls.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const diffMoveBorder = registerColor('diffEditor.move.border', { dark: '#8b8b8b9c', light: '#8b8b8b9c', hcDark: '#8b8b8b9c', hcLight: '#8b8b8b9c', }, localize('diffEditor.move.border', 'The border color for text that got moved in the diff editor.'));\nexport const diffMoveBorderActive = registerColor('diffEditor.moveActive.border', { dark: '#FFA500', light: '#FFA500', hcDark: '#FFA500', hcLight: '#FFA500', }, localize('diffEditor.moveActive.border', 'The active border color for text that got moved in the diff editor.'));\nexport const diffEditorUnchangedRegionShadow = registerColor('diffEditor.unchangedRegionShadow', { dark: '#000000', light: '#737373BF', hcDark: '#000000', hcLight: '#737373BF', }, localize('diffEditor.unchangedRegionShadow', 'The color of the shadow around unchanged region widgets.'));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nexport class DelegatingEditor extends Disposable {\n    constructor() {\n        super(...arguments);\n        this._id = ++DelegatingEditor.idCounter;\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        // #endregion\n    }\n    getId() { return this.getEditorType() + ':v2:' + this._id; }\n    // #region editorBrowser.IDiffEditor: Delegating to modified Editor\n    getVisibleColumnFromPosition(position) {\n        return this._targetEditor.getVisibleColumnFromPosition(position);\n    }\n    getPosition() {\n        return this._targetEditor.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        this._targetEditor.setPosition(position, source);\n    }\n    revealLine(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLine(lineNumber, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineInCenter(lineNumber, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineNearTop(lineNumber, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPosition(position, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionInCenter(position, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionNearTop(position, scrollType);\n    }\n    getSelection() {\n        return this._targetEditor.getSelection();\n    }\n    getSelections() {\n        return this._targetEditor.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        this._targetEditor.setSelection(something, source);\n    }\n    setSelections(ranges, source = 'api') {\n        this._targetEditor.setSelections(ranges, source);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLines(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesNearTop(startLineNumber, endLineNumber, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._targetEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeInCenter(range, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeNearTop(range, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeNearTopIfOutsideViewport(range, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeAtTop(range, scrollType);\n    }\n    getSupportedActions() {\n        return this._targetEditor.getSupportedActions();\n    }\n    focus() {\n        this._targetEditor.focus();\n    }\n    trigger(source, handlerId, payload) {\n        this._targetEditor.trigger(source, handlerId, payload);\n    }\n    createDecorationsCollection(decorations) {\n        return this._targetEditor.createDecorationsCollection(decorations);\n    }\n    changeDecorations(callback) {\n        return this._targetEditor.changeDecorations(callback);\n    }\n}\nDelegatingEditor.idCounter = 0;\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorunHandleChanges, observableFromEvent } from '../../../../base/common/observable.js';\nimport { OverviewRulerPart } from './overviewRulerPart.js';\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\nimport { localize } from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { Position } from '../../../common/core/position.js';\nlet DiffEditorEditors = class DiffEditorEditors extends Disposable {\n    get onDidContentSizeChange() { return this._onDidContentSizeChange.event; }\n    constructor(originalEditorElement, modifiedEditorElement, _options, codeEditorWidgetOptions, _createInnerEditor, _instantiationService, _keybindingService) {\n        super();\n        this.originalEditorElement = originalEditorElement;\n        this.modifiedEditorElement = modifiedEditorElement;\n        this._options = _options;\n        this._createInnerEditor = _createInnerEditor;\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this._onDidContentSizeChange = this._register(new Emitter());\n        this.original = this._register(this._createLeftHandSideEditor(_options.editorOptions.get(), codeEditorWidgetOptions.originalEditor || {}));\n        this.modified = this._register(this._createRightHandSideEditor(_options.editorOptions.get(), codeEditorWidgetOptions.modifiedEditor || {}));\n        this.modifiedModel = observableFromEvent(this.modified.onDidChangeModel, () => /** @description modified.model */ this.modified.getModel());\n        this.modifiedScrollTop = observableFromEvent(this.modified.onDidScrollChange, () => /** @description modified.getScrollTop */ this.modified.getScrollTop());\n        this.modifiedScrollHeight = observableFromEvent(this.modified.onDidScrollChange, () => /** @description modified.getScrollHeight */ this.modified.getScrollHeight());\n        this.modifiedSelections = observableFromEvent(this.modified.onDidChangeCursorSelection, () => { var _a; return (_a = this.modified.getSelections()) !== null && _a !== void 0 ? _a : []; });\n        this.modifiedCursor = observableFromEvent(this.modified.onDidChangeCursorPosition, () => { var _a; return (_a = this.modified.getPosition()) !== null && _a !== void 0 ? _a : new Position(1, 1); });\n        this._register(autorunHandleChanges({\n            createEmptyChangeSummary: () => ({}),\n            handleChange: (ctx, changeSummary) => {\n                if (ctx.didChange(_options.editorOptions)) {\n                    Object.assign(changeSummary, ctx.change.changedOptions);\n                }\n                return true;\n            }\n        }, (reader, changeSummary) => {\n            /** @description update editor options */\n            _options.editorOptions.read(reader);\n            this._options.renderSideBySide.read(reader);\n            this.modified.updateOptions(this._adjustOptionsForRightHandSide(reader, changeSummary));\n            this.original.updateOptions(this._adjustOptionsForLeftHandSide(reader, changeSummary));\n        }));\n    }\n    _createLeftHandSideEditor(options, codeEditorWidgetOptions) {\n        const leftHandSideOptions = this._adjustOptionsForLeftHandSide(undefined, options);\n        const editor = this._constructInnerEditor(this._instantiationService, this.originalEditorElement, leftHandSideOptions, codeEditorWidgetOptions);\n        editor.setContextValue('isInDiffLeftEditor', true);\n        return editor;\n    }\n    _createRightHandSideEditor(options, codeEditorWidgetOptions) {\n        const rightHandSideOptions = this._adjustOptionsForRightHandSide(undefined, options);\n        const editor = this._constructInnerEditor(this._instantiationService, this.modifiedEditorElement, rightHandSideOptions, codeEditorWidgetOptions);\n        editor.setContextValue('isInDiffRightEditor', true);\n        return editor;\n    }\n    _constructInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        const editor = this._createInnerEditor(instantiationService, container, options, editorWidgetOptions);\n        this._register(editor.onDidContentSizeChange(e => {\n            const width = this.original.getContentWidth() + this.modified.getContentWidth() + OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH;\n            const height = Math.max(this.modified.getContentHeight(), this.original.getContentHeight());\n            this._onDidContentSizeChange.fire({\n                contentHeight: height,\n                contentWidth: width,\n                contentHeightChanged: e.contentHeightChanged,\n                contentWidthChanged: e.contentWidthChanged\n            });\n        }));\n        return editor;\n    }\n    _adjustOptionsForLeftHandSide(_reader, changedOptions) {\n        const result = this._adjustOptionsForSubEditor(changedOptions);\n        if (!this._options.renderSideBySide.get()) {\n            // never wrap hidden editor\n            result.wordWrapOverride1 = 'off';\n            result.wordWrapOverride2 = 'off';\n            result.stickyScroll = { enabled: false };\n            // Disable unicode highlighting for the original side in inline mode, as they are not shown anyway.\n            result.unicodeHighlight = { nonBasicASCII: false, ambiguousCharacters: false, invisibleCharacters: false };\n        }\n        else {\n            result.unicodeHighlight = this._options.editorOptions.get().unicodeHighlight || {};\n            result.wordWrapOverride1 = this._options.diffWordWrap.get();\n        }\n        result.glyphMargin = this._options.renderSideBySide.get();\n        if (changedOptions.originalAriaLabel) {\n            result.ariaLabel = changedOptions.originalAriaLabel;\n        }\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n        result.readOnly = !this._options.originalEditable.get();\n        result.dropIntoEditor = { enabled: !result.readOnly };\n        result.extraEditorClassName = 'original-in-monaco-diff-editor';\n        return result;\n    }\n    _adjustOptionsForRightHandSide(reader, changedOptions) {\n        const result = this._adjustOptionsForSubEditor(changedOptions);\n        if (changedOptions.modifiedAriaLabel) {\n            result.ariaLabel = changedOptions.modifiedAriaLabel;\n        }\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n        result.wordWrapOverride1 = this._options.diffWordWrap.get();\n        result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH;\n        result.scrollbar.verticalHasArrows = false;\n        result.extraEditorClassName = 'modified-in-monaco-diff-editor';\n        return result;\n    }\n    _adjustOptionsForSubEditor(options) {\n        const clonedOptions = {\n            ...options,\n            dimension: {\n                height: 0,\n                width: 0\n            },\n        };\n        clonedOptions.inDiffEditor = true;\n        clonedOptions.automaticLayout = false;\n        // Clone scrollbar options before changing them\n        clonedOptions.scrollbar = { ...(clonedOptions.scrollbar || {}) };\n        clonedOptions.folding = false;\n        clonedOptions.codeLens = this._options.diffCodeLens.get();\n        clonedOptions.fixedOverflowWidgets = true;\n        // Clone minimap options before changing them\n        clonedOptions.minimap = { ...(clonedOptions.minimap || {}) };\n        clonedOptions.minimap.enabled = false;\n        if (this._options.hideUnchangedRegions.get()) {\n            clonedOptions.stickyScroll = { enabled: false };\n        }\n        else {\n            clonedOptions.stickyScroll = this._options.editorOptions.get().stickyScroll;\n        }\n        return clonedOptions;\n    }\n    _updateAriaLabel(ariaLabel) {\n        var _a;\n        if (!ariaLabel) {\n            ariaLabel = '';\n        }\n        const ariaNavigationTip = localize('diff-aria-navigation-tip', ' use {0} to open the accessibility help.', (_a = this._keybindingService.lookupKeybinding('editor.action.accessibilityHelp')) === null || _a === void 0 ? void 0 : _a.getAriaLabel());\n        if (this._options.accessibilityVerbose.get()) {\n            return ariaLabel + ariaNavigationTip;\n        }\n        else if (ariaLabel) {\n            return ariaLabel.replaceAll(ariaNavigationTip, '');\n        }\n        return '';\n    }\n};\nDiffEditorEditors = __decorate([\n    __param(5, IInstantiationService),\n    __param(6, IKeybindingService)\n], DiffEditorEditors);\nexport { DiffEditorEditors };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { derived, observableValue } from '../../../../base/common/observable.js';\nimport { diffEditorDefaultOptions } from '../../../common/config/diffEditor.js';\nimport { clampedFloat, clampedInt, boolean as validateBooleanOption, stringSet as validateStringSetOption } from '../../../common/config/editorOptions.js';\nexport class DiffEditorOptions {\n    get editorOptions() { return this._options; }\n    constructor(options) {\n        this._diffEditorWidth = observableValue(this, 0);\n        this.couldShowInlineViewBecauseOfSize = derived(this, reader => this._options.read(reader).renderSideBySide && this._diffEditorWidth.read(reader) <= this._options.read(reader).renderSideBySideInlineBreakpoint);\n        this.renderOverviewRuler = derived(this, reader => this._options.read(reader).renderOverviewRuler);\n        this.renderSideBySide = derived(this, reader => this._options.read(reader).renderSideBySide\n            && !(this._options.read(reader).useInlineViewWhenSpaceIsLimited && this.couldShowInlineViewBecauseOfSize.read(reader)));\n        this.readOnly = derived(this, reader => this._options.read(reader).readOnly);\n        this.shouldRenderRevertArrows = derived(this, reader => {\n            if (!this._options.read(reader).renderMarginRevertIcon) {\n                return false;\n            }\n            if (!this.renderSideBySide.read(reader)) {\n                return false;\n            }\n            if (this.readOnly.read(reader)) {\n                return false;\n            }\n            return true;\n        });\n        this.renderIndicators = derived(this, reader => this._options.read(reader).renderIndicators);\n        this.enableSplitViewResizing = derived(this, reader => this._options.read(reader).enableSplitViewResizing);\n        this.splitViewDefaultRatio = derived(this, reader => this._options.read(reader).splitViewDefaultRatio);\n        this.ignoreTrimWhitespace = derived(this, reader => this._options.read(reader).ignoreTrimWhitespace);\n        this.maxComputationTimeMs = derived(this, reader => this._options.read(reader).maxComputationTime);\n        this.showMoves = derived(this, reader => this._options.read(reader).experimental.showMoves && this.renderSideBySide.read(reader));\n        this.isInEmbeddedEditor = derived(this, reader => this._options.read(reader).isInEmbeddedEditor);\n        this.diffWordWrap = derived(this, reader => this._options.read(reader).diffWordWrap);\n        this.originalEditable = derived(this, reader => this._options.read(reader).originalEditable);\n        this.diffCodeLens = derived(this, reader => this._options.read(reader).diffCodeLens);\n        this.accessibilityVerbose = derived(this, reader => this._options.read(reader).accessibilityVerbose);\n        this.diffAlgorithm = derived(this, reader => this._options.read(reader).diffAlgorithm);\n        this.showEmptyDecorations = derived(this, reader => this._options.read(reader).experimental.showEmptyDecorations);\n        this.onlyShowAccessibleDiffViewer = derived(this, reader => this._options.read(reader).onlyShowAccessibleDiffViewer);\n        this.hideUnchangedRegions = derived(this, reader => this._options.read(reader).hideUnchangedRegions.enabled);\n        this.hideUnchangedRegionsRevealLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.revealLineCount);\n        this.hideUnchangedRegionsContextLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.contextLineCount);\n        this.hideUnchangedRegionsMinimumLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.minimumLineCount);\n        const optionsCopy = { ...options, ...validateDiffEditorOptions(options, diffEditorDefaultOptions) };\n        this._options = observableValue(this, optionsCopy);\n    }\n    updateOptions(changedOptions) {\n        const newDiffEditorOptions = validateDiffEditorOptions(changedOptions, this._options.get());\n        const newOptions = { ...this._options.get(), ...changedOptions, ...newDiffEditorOptions };\n        this._options.set(newOptions, undefined, { changedOptions: changedOptions });\n    }\n    setWidth(width) {\n        this._diffEditorWidth.set(width, undefined);\n    }\n}\nfunction validateDiffEditorOptions(options, defaults) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    return {\n        enableSplitViewResizing: validateBooleanOption(options.enableSplitViewResizing, defaults.enableSplitViewResizing),\n        splitViewDefaultRatio: clampedFloat(options.splitViewDefaultRatio, 0.5, 0.1, 0.9),\n        renderSideBySide: validateBooleanOption(options.renderSideBySide, defaults.renderSideBySide),\n        renderMarginRevertIcon: validateBooleanOption(options.renderMarginRevertIcon, defaults.renderMarginRevertIcon),\n        maxComputationTime: clampedInt(options.maxComputationTime, defaults.maxComputationTime, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        maxFileSize: clampedInt(options.maxFileSize, defaults.maxFileSize, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        ignoreTrimWhitespace: validateBooleanOption(options.ignoreTrimWhitespace, defaults.ignoreTrimWhitespace),\n        renderIndicators: validateBooleanOption(options.renderIndicators, defaults.renderIndicators),\n        originalEditable: validateBooleanOption(options.originalEditable, defaults.originalEditable),\n        diffCodeLens: validateBooleanOption(options.diffCodeLens, defaults.diffCodeLens),\n        renderOverviewRuler: validateBooleanOption(options.renderOverviewRuler, defaults.renderOverviewRuler),\n        diffWordWrap: validateStringSetOption(options.diffWordWrap, defaults.diffWordWrap, ['off', 'on', 'inherit']),\n        diffAlgorithm: validateStringSetOption(options.diffAlgorithm, defaults.diffAlgorithm, ['legacy', 'advanced'], { 'smart': 'legacy', 'experimental': 'advanced' }),\n        accessibilityVerbose: validateBooleanOption(options.accessibilityVerbose, defaults.accessibilityVerbose),\n        experimental: {\n            showMoves: validateBooleanOption((_a = options.experimental) === null || _a === void 0 ? void 0 : _a.showMoves, defaults.experimental.showMoves),\n            showEmptyDecorations: validateBooleanOption((_b = options.experimental) === null || _b === void 0 ? void 0 : _b.showEmptyDecorations, defaults.experimental.showEmptyDecorations),\n        },\n        hideUnchangedRegions: {\n            enabled: validateBooleanOption((_d = (_c = options.hideUnchangedRegions) === null || _c === void 0 ? void 0 : _c.enabled) !== null && _d !== void 0 ? _d : (_e = options.experimental) === null || _e === void 0 ? void 0 : _e.collapseUnchangedRegions, defaults.hideUnchangedRegions.enabled),\n            contextLineCount: clampedInt((_f = options.hideUnchangedRegions) === null || _f === void 0 ? void 0 : _f.contextLineCount, defaults.hideUnchangedRegions.contextLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n            minimumLineCount: clampedInt((_g = options.hideUnchangedRegions) === null || _g === void 0 ? void 0 : _g.minimumLineCount, defaults.hideUnchangedRegions.minimumLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n            revealLineCount: clampedInt((_h = options.hideUnchangedRegions) === null || _h === void 0 ? void 0 : _h.revealLineCount, defaults.hideUnchangedRegions.revealLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        },\n        isInEmbeddedEditor: validateBooleanOption(options.isInEmbeddedEditor, defaults.isInEmbeddedEditor),\n        onlyShowAccessibleDiffViewer: validateBooleanOption(options.onlyShowAccessibleDiffViewer, defaults.onlyShowAccessibleDiffViewer),\n        renderSideBySideInlineBreakpoint: clampedInt(options.renderSideBySideInlineBreakpoint, defaults.renderSideBySideInlineBreakpoint, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        useInlineViewWhenSpaceIsLimited: validateBooleanOption(options.useInlineViewWhenSpaceIsLimited, defaults.useInlineViewWhenSpaceIsLimited),\n    };\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\nimport { Disposable, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { CodeEditorWidget } from '../../browser/widget/codeEditorWidget.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport { StandaloneKeybindingService, updateConfigurationService } from './standaloneServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { MenuId, MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { StandaloneCodeEditorNLS } from '../../common/standaloneStrings.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { StandaloneCodeEditorService } from './standaloneCodeEditorService.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../common/languages/modesRegistry.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { DiffEditorWidget } from '../../browser/widget/diffEditor/diffEditorWidget.js';\nimport { IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nlet LAST_GENERATED_COMMAND_ID = 0;\nlet ariaDomNodeCreated = false;\n/**\n * Create ARIA dom node inside parent,\n * or only for the first editor instantiation inside document.body.\n * @param parent container element for ARIA dom node\n */\nfunction createAriaDomNode(parent) {\n    if (!parent) {\n        if (ariaDomNodeCreated) {\n            return;\n        }\n        ariaDomNodeCreated = true;\n    }\n    aria.setARIAContainer(parent || mainWindow.document.body);\n}\n/**\n * A code editor to be used both by the standalone editor and the standalone diff editor.\n */\nlet StandaloneCodeEditor = class StandaloneCodeEditor extends CodeEditorWidget {\n    constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        const options = { ..._options };\n        options.ariaLabel = options.ariaLabel || StandaloneCodeEditorNLS.editorViewAccessibleLabel;\n        options.ariaLabel = options.ariaLabel + ';' + (StandaloneCodeEditorNLS.accessibilityHelpMessage);\n        super(domElement, options, {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        if (keybindingService instanceof StandaloneKeybindingService) {\n            this._standaloneKeybindingService = keybindingService;\n        }\n        else {\n            this._standaloneKeybindingService = null;\n        }\n        createAriaDomNode(options.ariaContainerElement);\n    }\n    addCommand(keybinding, handler, context) {\n        if (!this._standaloneKeybindingService) {\n            console.warn('Cannot add command because the editor is configured with an unrecognized KeybindingService');\n            return null;\n        }\n        const commandId = 'DYNAMIC_' + (++LAST_GENERATED_COMMAND_ID);\n        const whenExpression = ContextKeyExpr.deserialize(context);\n        this._standaloneKeybindingService.addDynamicKeybinding(commandId, keybinding, handler, whenExpression);\n        return commandId;\n    }\n    createContextKey(key, defaultValue) {\n        return this._contextKeyService.createKey(key, defaultValue);\n    }\n    addAction(_descriptor) {\n        if ((typeof _descriptor.id !== 'string') || (typeof _descriptor.label !== 'string') || (typeof _descriptor.run !== 'function')) {\n            throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\n        }\n        if (!this._standaloneKeybindingService) {\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n            return Disposable.None;\n        }\n        // Read descriptor options\n        const id = _descriptor.id;\n        const label = _descriptor.label;\n        const precondition = ContextKeyExpr.and(ContextKeyExpr.equals('editorId', this.getId()), ContextKeyExpr.deserialize(_descriptor.precondition));\n        const keybindings = _descriptor.keybindings;\n        const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(_descriptor.keybindingContext));\n        const contextMenuGroupId = _descriptor.contextMenuGroupId || null;\n        const contextMenuOrder = _descriptor.contextMenuOrder || 0;\n        const run = (_accessor, ...args) => {\n            return Promise.resolve(_descriptor.run(this, ...args));\n        };\n        const toDispose = new DisposableStore();\n        // Generate a unique id to allow the same descriptor.id across multiple editor instances\n        const uniqueId = this.getId() + ':' + id;\n        // Register the command\n        toDispose.add(CommandsRegistry.registerCommand(uniqueId, run));\n        // Register the context menu item\n        if (contextMenuGroupId) {\n            const menuItem = {\n                command: {\n                    id: uniqueId,\n                    title: label\n                },\n                when: precondition,\n                group: contextMenuGroupId,\n                order: contextMenuOrder\n            };\n            toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\n        }\n        // Register the keybindings\n        if (Array.isArray(keybindings)) {\n            for (const kb of keybindings) {\n                toDispose.add(this._standaloneKeybindingService.addDynamicKeybinding(uniqueId, kb, run, keybindingsWhen));\n            }\n        }\n        // Finally, register an internal editor action\n        const internalAction = new InternalEditorAction(uniqueId, label, label, undefined, precondition, (...args) => Promise.resolve(_descriptor.run(this, ...args)), this._contextKeyService);\n        // Store it under the original id, such that trigger with the original id will work\n        this._actions.set(id, internalAction);\n        toDispose.add(toDisposable(() => {\n            this._actions.delete(id);\n        }));\n        return toDispose;\n    }\n    _triggerCommand(handlerId, payload) {\n        if (this._codeEditorService instanceof StandaloneCodeEditorService) {\n            // Help commands find this editor as the active editor\n            try {\n                this._codeEditorService.setActiveCodeEditor(this);\n                super._triggerCommand(handlerId, payload);\n            }\n            finally {\n                this._codeEditorService.setActiveCodeEditor(null);\n            }\n        }\n        else {\n            super._triggerCommand(handlerId, payload);\n        }\n    }\n};\nStandaloneCodeEditor = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ICodeEditorService),\n    __param(4, ICommandService),\n    __param(5, IContextKeyService),\n    __param(6, IKeybindingService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], StandaloneCodeEditor);\nexport { StandaloneCodeEditor };\nlet StandaloneEditor = class StandaloneEditor extends StandaloneCodeEditor {\n    constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, configurationService, accessibilityService, modelService, languageService, languageConfigurationService, languageFeaturesService) {\n        const options = { ..._options };\n        updateConfigurationService(configurationService, options, false);\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\n        if (typeof options.theme === 'string') {\n            themeService.setTheme(options.theme);\n        }\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n        }\n        const _model = options.model;\n        delete options.model;\n        super(domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._configurationService = configurationService;\n        this._standaloneThemeService = themeService;\n        this._register(themeDomRegistration);\n        let model;\n        if (typeof _model === 'undefined') {\n            const languageId = languageService.getLanguageIdByMimeType(options.language) || options.language || PLAINTEXT_LANGUAGE_ID;\n            model = createTextModel(modelService, languageService, options.value || '', languageId, undefined);\n            this._ownsModel = true;\n        }\n        else {\n            model = _model;\n            this._ownsModel = false;\n        }\n        this._attachModel(model);\n        if (model) {\n            const e = {\n                oldModelUrl: null,\n                newModelUrl: model.uri\n            };\n            this._onDidChangeModel.fire(e);\n        }\n    }\n    dispose() {\n        super.dispose();\n    }\n    updateOptions(newOptions) {\n        updateConfigurationService(this._configurationService, newOptions, false);\n        if (typeof newOptions.theme === 'string') {\n            this._standaloneThemeService.setTheme(newOptions.theme);\n        }\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n        }\n        super.updateOptions(newOptions);\n    }\n    _postDetachModelCleanup(detachedModel) {\n        super._postDetachModelCleanup(detachedModel);\n        if (detachedModel && this._ownsModel) {\n            detachedModel.dispose();\n            this._ownsModel = false;\n        }\n    }\n};\nStandaloneEditor = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ICodeEditorService),\n    __param(4, ICommandService),\n    __param(5, IContextKeyService),\n    __param(6, IKeybindingService),\n    __param(7, IStandaloneThemeService),\n    __param(8, INotificationService),\n    __param(9, IConfigurationService),\n    __param(10, IAccessibilityService),\n    __param(11, IModelService),\n    __param(12, ILanguageService),\n    __param(13, ILanguageConfigurationService),\n    __param(14, ILanguageFeaturesService)\n], StandaloneEditor);\nexport { StandaloneEditor };\nlet StandaloneDiffEditor2 = class StandaloneDiffEditor2 extends DiffEditorWidget {\n    constructor(domElement, _options, instantiationService, contextKeyService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService, audioCueService) {\n        const options = { ..._options };\n        updateConfigurationService(configurationService, options, true);\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\n        if (typeof options.theme === 'string') {\n            themeService.setTheme(options.theme);\n        }\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n        }\n        super(domElement, options, {}, contextKeyService, instantiationService, codeEditorService, audioCueService, editorProgressService);\n        this._configurationService = configurationService;\n        this._standaloneThemeService = themeService;\n        this._register(themeDomRegistration);\n    }\n    dispose() {\n        super.dispose();\n    }\n    updateOptions(newOptions) {\n        updateConfigurationService(this._configurationService, newOptions, true);\n        if (typeof newOptions.theme === 'string') {\n            this._standaloneThemeService.setTheme(newOptions.theme);\n        }\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n        }\n        super.updateOptions(newOptions);\n    }\n    _createInnerEditor(instantiationService, container, options) {\n        return instantiationService.createInstance(StandaloneCodeEditor, container, options);\n    }\n    getOriginalEditor() {\n        return super.getOriginalEditor();\n    }\n    getModifiedEditor() {\n        return super.getModifiedEditor();\n    }\n    addCommand(keybinding, handler, context) {\n        return this.getModifiedEditor().addCommand(keybinding, handler, context);\n    }\n    createContextKey(key, defaultValue) {\n        return this.getModifiedEditor().createContextKey(key, defaultValue);\n    }\n    addAction(descriptor) {\n        return this.getModifiedEditor().addAction(descriptor);\n    }\n};\nStandaloneDiffEditor2 = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, IContextKeyService),\n    __param(4, ICodeEditorService),\n    __param(5, IStandaloneThemeService),\n    __param(6, INotificationService),\n    __param(7, IConfigurationService),\n    __param(8, IContextMenuService),\n    __param(9, IEditorProgressService),\n    __param(10, IClipboardService),\n    __param(11, IAudioCueService)\n], StandaloneDiffEditor2);\nexport { StandaloneDiffEditor2 };\n/**\n * @internal\n */\nexport function createTextModel(modelService, languageService, value, languageId, uri) {\n    value = value || '';\n    if (!languageId) {\n        const firstLF = value.indexOf('\\n');\n        let firstLine = value;\n        if (firstLF !== -1) {\n            firstLine = value.substring(0, firstLF);\n        }\n        return doCreateModel(modelService, value, languageService.createByFilepathOrFirstLine(uri || null, firstLine), uri);\n    }\n    return doCreateModel(modelService, value, languageService.createById(languageId), uri);\n}\n/**\n * @internal\n */\nfunction doCreateModel(modelService, value, languageSelection, uri) {\n    return modelService.createModel(value, languageSelection, uri);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { getWindow, h, scheduleAtNextAnimationFrame } from '../../../../base/browser/dom.js';\nimport { SmoothScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { findFirstMaxBy } from '../../../../base/common/arraysFind.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, derivedObservableWithCache, derivedWithStore, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { disposableObservableValue, globalTransaction, transaction } from '../../../../base/common/observableInternal/base.js';\nimport { Scrollable } from '../../../../base/common/scrollable.js';\nimport './style.css';\nimport { ObservableElementSizeObserver } from '../diffEditor/utils.js';\nimport { OffsetRange } from '../../../common/core/offsetRange.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { DiffEditorItemTemplate, TemplateData } from './diffEditorItemTemplate.js';\nimport { ObjectPool } from './objectPool.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nlet MultiDiffEditorWidgetImpl = class MultiDiffEditorWidgetImpl extends Disposable {\n    constructor(_element, _dimension, _viewModel, _workbenchUIElementFactory, _parentContextKeyService, _parentInstantiationService) {\n        super();\n        this._element = _element;\n        this._dimension = _dimension;\n        this._viewModel = _viewModel;\n        this._workbenchUIElementFactory = _workbenchUIElementFactory;\n        this._parentContextKeyService = _parentContextKeyService;\n        this._parentInstantiationService = _parentInstantiationService;\n        this._elements = h('div', {\n            style: {\n                overflowY: 'hidden',\n            }\n        }, [\n            h('div@content', {\n                style: {\n                    overflow: 'hidden',\n                }\n            }),\n            h('div.monaco-editor@overflowWidgetsDomNode', {}),\n        ]);\n        this._sizeObserver = this._register(new ObservableElementSizeObserver(this._element, undefined));\n        this._objectPool = this._register(new ObjectPool((data) => {\n            const template = this._instantiationService.createInstance(DiffEditorItemTemplate, this._elements.content, this._elements.overflowWidgetsDomNode, this._workbenchUIElementFactory);\n            template.setData(data);\n            return template;\n        }));\n        this._scrollable = this._register(new Scrollable({\n            forceIntegerValues: false,\n            scheduleAtNextAnimationFrame: (cb) => scheduleAtNextAnimationFrame(getWindow(this._element), cb),\n            smoothScrollDuration: 100,\n        }));\n        this._scrollableElement = this._register(new SmoothScrollableElement(this._elements.root, {\n            vertical: 1 /* ScrollbarVisibility.Auto */,\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            className: 'monaco-component',\n            useShadows: false,\n        }, this._scrollable));\n        this.scrollTop = observableFromEvent(this._scrollableElement.onScroll, () => /** @description scrollTop */ this._scrollableElement.getScrollPosition().scrollTop);\n        this.scrollLeft = observableFromEvent(this._scrollableElement.onScroll, () => /** @description scrollLeft */ this._scrollableElement.getScrollPosition().scrollLeft);\n        this._viewItems = derivedWithStore(this, (reader, store) => {\n            const vm = this._viewModel.read(reader);\n            if (!vm) {\n                return [];\n            }\n            const items = vm.items.read(reader);\n            return items.map(d => store.add(new VirtualizedViewItem(d, this._objectPool, this.scrollLeft)));\n        });\n        this._totalHeight = this._viewItems.map(this, (items, reader) => items.reduce((r, i) => r + i.contentHeight.read(reader), 0));\n        this.activeDiffItem = derived(this, reader => this._viewItems.read(reader).find(i => { var _a; return (_a = i.template.read(reader)) === null || _a === void 0 ? void 0 : _a.isFocused.read(reader); }));\n        this.lastActiveDiffItem = derivedObservableWithCache((reader, lastValue) => { var _a; return (_a = this.activeDiffItem.read(reader)) !== null && _a !== void 0 ? _a : lastValue; });\n        this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._element));\n        this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._contextKeyService.createKey(EditorContextKeys.inMultiDiffEditor.key, true);\n        const ctxAllCollapsed = this._parentContextKeyService.createKey(EditorContextKeys.multiDiffEditorAllCollapsed.key, false);\n        this._register(autorun((reader) => {\n            const viewModel = this._viewModel.read(reader);\n            if (viewModel) {\n                const allCollapsed = viewModel.items.read(reader).every(item => item.collapsed.read(reader));\n                ctxAllCollapsed.set(allCollapsed);\n            }\n        }));\n        this._register(autorun((reader) => {\n            const lastActiveDiffItem = this.lastActiveDiffItem.read(reader);\n            transaction(tx => {\n                var _a;\n                (_a = this._viewModel.read(reader)) === null || _a === void 0 ? void 0 : _a.activeDiffItem.set(lastActiveDiffItem === null || lastActiveDiffItem === void 0 ? void 0 : lastActiveDiffItem.viewModel, tx);\n            });\n        }));\n        this._register(autorun((reader) => {\n            /** @description Update widget dimension */\n            const dimension = this._dimension.read(reader);\n            this._sizeObserver.observe(dimension);\n        }));\n        this._elements.content.style.position = 'relative';\n        this._register(autorun((reader) => {\n            /** @description Update scroll dimensions */\n            const height = this._sizeObserver.height.read(reader);\n            this._elements.root.style.height = `${height}px`;\n            const totalHeight = this._totalHeight.read(reader);\n            this._elements.content.style.height = `${totalHeight}px`;\n            const width = this._sizeObserver.width.read(reader);\n            let scrollWidth = width;\n            const viewItems = this._viewItems.read(reader);\n            const max = findFirstMaxBy(viewItems, i => i.maxScroll.read(reader).maxScroll);\n            if (max) {\n                const maxScroll = max.maxScroll.read(reader);\n                scrollWidth = width + maxScroll.maxScroll;\n            }\n            this._scrollableElement.setScrollDimensions({\n                width: width,\n                height: height,\n                scrollHeight: totalHeight,\n                scrollWidth,\n            });\n        }));\n        _element.replaceChildren(this._scrollableElement.getDomNode());\n        this._register(toDisposable(() => {\n            _element.replaceChildren();\n        }));\n        this._register(this._register(autorun(reader => {\n            /** @description Render all */\n            globalTransaction(tx => {\n                this.render(reader);\n            });\n        })));\n    }\n    render(reader) {\n        const scrollTop = this.scrollTop.read(reader);\n        let contentScrollOffsetToScrollOffset = 0;\n        let itemHeightSumBefore = 0;\n        let itemContentHeightSumBefore = 0;\n        const viewPortHeight = this._sizeObserver.height.read(reader);\n        const contentViewPort = OffsetRange.ofStartAndLength(scrollTop, viewPortHeight);\n        const width = this._sizeObserver.width.read(reader);\n        for (const v of this._viewItems.read(reader)) {\n            const itemContentHeight = v.contentHeight.read(reader);\n            const itemHeight = Math.min(itemContentHeight, viewPortHeight);\n            const itemRange = OffsetRange.ofStartAndLength(itemHeightSumBefore, itemHeight);\n            const itemContentRange = OffsetRange.ofStartAndLength(itemContentHeightSumBefore, itemContentHeight);\n            if (itemContentRange.isBefore(contentViewPort)) {\n                contentScrollOffsetToScrollOffset -= itemContentHeight - itemHeight;\n                v.hide();\n            }\n            else if (itemContentRange.isAfter(contentViewPort)) {\n                v.hide();\n            }\n            else {\n                const scroll = Math.max(0, Math.min(contentViewPort.start - itemContentRange.start, itemContentHeight - itemHeight));\n                contentScrollOffsetToScrollOffset -= scroll;\n                const viewPort = OffsetRange.ofStartAndLength(scrollTop + contentScrollOffsetToScrollOffset, viewPortHeight);\n                v.render(itemRange, scroll, width, viewPort);\n            }\n            itemHeightSumBefore += itemHeight;\n            itemContentHeightSumBefore += itemContentHeight;\n        }\n        this._elements.content.style.transform = `translateY(${-(scrollTop + contentScrollOffsetToScrollOffset)}px)`;\n    }\n};\nMultiDiffEditorWidgetImpl = __decorate([\n    __param(4, IContextKeyService),\n    __param(5, IInstantiationService)\n], MultiDiffEditorWidgetImpl);\nexport { MultiDiffEditorWidgetImpl };\nclass VirtualizedViewItem extends Disposable {\n    constructor(viewModel, _objectPool, _scrollLeft) {\n        super();\n        this.viewModel = viewModel;\n        this._objectPool = _objectPool;\n        this._scrollLeft = _scrollLeft;\n        // TODO this should be in the view model\n        this._lastTemplateData = observableValue(this, { contentHeight: 500, maxScroll: { maxScroll: 0, width: 0 }, });\n        this._templateRef = this._register(disposableObservableValue(this, undefined));\n        this.contentHeight = derived(this, reader => { var _a, _b, _c; return (_c = (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.height) === null || _b === void 0 ? void 0 : _b.read(reader)) !== null && _c !== void 0 ? _c : this._lastTemplateData.read(reader).contentHeight; });\n        this.maxScroll = derived(this, reader => { var _a, _b; return (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.maxScroll.read(reader)) !== null && _b !== void 0 ? _b : this._lastTemplateData.read(reader).maxScroll; });\n        this.template = derived(this, reader => { var _a; return (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object; });\n        this._isHidden = observableValue(this, false);\n        this._register(autorun((reader) => {\n            var _a;\n            const scrollLeft = this._scrollLeft.read(reader);\n            (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.setScrollLeft(scrollLeft);\n        }));\n        this._register(autorun(reader => {\n            const ref = this._templateRef.read(reader);\n            if (!ref) {\n                return;\n            }\n            const isHidden = this._isHidden.read(reader);\n            if (!isHidden) {\n                return;\n            }\n            const isFocused = ref.object.isFocused.read(reader);\n            if (isFocused) {\n                return;\n            }\n            transaction(tx => {\n                this._lastTemplateData.set({\n                    contentHeight: ref.object.height.get(),\n                    maxScroll: { maxScroll: 0, width: 0, } // Reset max scroll\n                }, tx);\n                ref.object.hide();\n                this._templateRef.set(undefined, tx);\n            });\n        }));\n    }\n    dispose() {\n        this.hide();\n        super.dispose();\n    }\n    toString() {\n        return `VirtualViewItem(${this.viewModel.entry.value.title})`;\n    }\n    hide() {\n        this._isHidden.set(true, undefined);\n    }\n    render(verticalSpace, offset, width, viewPort) {\n        this._isHidden.set(false, undefined);\n        let ref = this._templateRef.get();\n        if (!ref) {\n            ref = this._objectPool.getUnusedObj(new TemplateData(this.viewModel));\n            this._templateRef.set(ref, undefined);\n        }\n        ref.object.render(verticalSpace, width, offset, viewPort);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ActionRunner } from '../../../../base/common/actions.js';\nexport class ActionRunnerWithContext extends ActionRunner {\n    constructor(_getContext) {\n        super();\n        this._getContext = _getContext;\n    }\n    runAction(action, _context) {\n        return super.runAction(action, this._getContext());\n    }\n}\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../base/browser/dom.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableFromEvent } from '../../../../base/common/observable.js';\nimport { globalTransaction, observableValue } from '../../../../base/common/observableInternal/base.js';\nimport { DiffEditorWidget } from '../diffEditor/diffEditorWidget.js';\nimport { MenuWorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ActionRunnerWithContext } from './utils.js';\nexport class TemplateData {\n    constructor(viewModel) {\n        this.viewModel = viewModel;\n    }\n    getId() {\n        return this.viewModel;\n    }\n}\nlet DiffEditorItemTemplate = class DiffEditorItemTemplate extends Disposable {\n    constructor(_container, _overflowWidgetsDomNode, _workbenchUIElementFactory, _instantiationService) {\n        super();\n        this._container = _container;\n        this._overflowWidgetsDomNode = _overflowWidgetsDomNode;\n        this._workbenchUIElementFactory = _workbenchUIElementFactory;\n        this._instantiationService = _instantiationService;\n        this._viewModel = observableValue(this, undefined);\n        this._collapsed = derived(this, reader => { var _a; return (_a = this._viewModel.read(reader)) === null || _a === void 0 ? void 0 : _a.collapsed.read(reader); });\n        this._contentHeight = observableValue(this, 500);\n        this.height = derived(this, reader => {\n            const h = this._collapsed.read(reader) ? 0 : this._contentHeight.read(reader);\n            return h + this._outerEditorHeight;\n        });\n        this._modifiedContentWidth = observableValue(this, 0);\n        this._modifiedWidth = observableValue(this, 0);\n        this._originalContentWidth = observableValue(this, 0);\n        this._originalWidth = observableValue(this, 0);\n        this.maxScroll = derived(this, reader => {\n            const scroll1 = this._modifiedContentWidth.read(reader) - this._modifiedWidth.read(reader);\n            const scroll2 = this._originalContentWidth.read(reader) - this._originalWidth.read(reader);\n            if (scroll1 > scroll2) {\n                return { maxScroll: scroll1, width: this._modifiedWidth.read(reader) };\n            }\n            else {\n                return { maxScroll: scroll2, width: this._originalWidth.read(reader) };\n            }\n        });\n        this._elements = h('div.multiDiffEntry', [\n            h('div.content', {\n                style: {\n                    display: 'flex',\n                    flexDirection: 'column',\n                    flex: '1',\n                    overflow: 'hidden',\n                }\n            }, [\n                h('div.header@header', [\n                    h('div.collapse-button@collapseButton'),\n                    h('div.title.show-file-icons@title', []),\n                    h('div.actions@actions'),\n                ]),\n                h('div.editorParent', {\n                    style: {\n                        flex: '1',\n                        display: 'flex',\n                        flexDirection: 'column',\n                    }\n                }, [\n                    h('div.editorContainer@editor', { style: { flex: '1' } }),\n                ])\n            ])\n        ]);\n        this.editor = this._register(this._instantiationService.createInstance(DiffEditorWidget, this._elements.editor, {\n            overflowWidgetsDomNode: this._overflowWidgetsDomNode,\n        }, {}));\n        this.isModifedFocused = isFocused(this.editor.getModifiedEditor());\n        this.isOriginalFocused = isFocused(this.editor.getOriginalEditor());\n        this.isFocused = derived(this, reader => this.isModifedFocused.read(reader) || this.isOriginalFocused.read(reader));\n        this._resourceLabel = this._workbenchUIElementFactory.createResourceLabel\n            ? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.title))\n            : undefined;\n        this._dataStore = new DisposableStore();\n        this._headerHeight = this._elements.header.clientHeight;\n        const btn = new Button(this._elements.collapseButton, {});\n        this._register(autorun(reader => {\n            btn.element.className = '';\n            btn.icon = this._collapsed.read(reader) ? Codicon.chevronRight : Codicon.chevronDown;\n        }));\n        this._register(btn.onDidClick(() => {\n            var _a;\n            (_a = this._viewModel.get()) === null || _a === void 0 ? void 0 : _a.collapsed.set(!this._collapsed.get(), undefined);\n        }));\n        this._register(autorun(reader => {\n            this._elements.editor.style.display = this._collapsed.read(reader) ? 'none' : 'block';\n        }));\n        this.editor.getModifiedEditor().onDidLayoutChange(e => {\n            const width = this.editor.getModifiedEditor().getLayoutInfo().contentWidth;\n            this._modifiedWidth.set(width, undefined);\n        });\n        this.editor.getOriginalEditor().onDidLayoutChange(e => {\n            const width = this.editor.getOriginalEditor().getLayoutInfo().contentWidth;\n            this._originalWidth.set(width, undefined);\n        });\n        this._register(this.editor.onDidContentSizeChange(e => {\n            globalTransaction(tx => {\n                this._contentHeight.set(e.contentHeight, tx);\n                this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(), tx);\n                this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(), tx);\n            });\n        }));\n        this._register(autorun(reader => {\n            const isFocused = this.isFocused.read(reader);\n            this._elements.root.classList.toggle('focused', isFocused);\n        }));\n        this._container.appendChild(this._elements.root);\n        this._outerEditorHeight = 38;\n        this._register(this._instantiationService.createInstance(MenuWorkbenchToolBar, this._elements.actions, MenuId.MultiDiffEditorFileToolbar, {\n            actionRunner: this._register(new ActionRunnerWithContext(() => { var _a, _b; return ((_b = (_a = this._viewModel.get()) === null || _a === void 0 ? void 0 : _a.diffEditorViewModel) === null || _b === void 0 ? void 0 : _b.model.modified.uri); })),\n            menuOptions: {\n                shouldForwardArgs: true,\n            }\n        }));\n    }\n    setScrollLeft(left) {\n        if (this._modifiedContentWidth.get() - this._modifiedWidth.get() > this._originalContentWidth.get() - this._originalWidth.get()) {\n            this.editor.getModifiedEditor().setScrollLeft(left);\n        }\n        else {\n            this.editor.getOriginalEditor().setScrollLeft(left);\n        }\n    }\n    setData(data) {\n        function updateOptions(options) {\n            return {\n                ...options,\n                scrollBeyondLastLine: false,\n                hideUnchangedRegions: {\n                    enabled: true,\n                },\n                scrollbar: {\n                    vertical: 'hidden',\n                    horizontal: 'hidden',\n                    handleMouseWheel: false,\n                    useShadows: false,\n                },\n                renderOverviewRuler: false,\n                fixedOverflowWidgets: true,\n            };\n        }\n        const value = data.viewModel.entry.value; // TODO\n        if (value.onOptionsDidChange) {\n            this._dataStore.add(value.onOptionsDidChange(() => {\n                var _a;\n                this.editor.updateOptions(updateOptions((_a = value.options) !== null && _a !== void 0 ? _a : {}));\n            }));\n        }\n        globalTransaction(tx => {\n            var _a, _b;\n            (_a = this._resourceLabel) === null || _a === void 0 ? void 0 : _a.setUri(data.viewModel.diffEditorViewModel.model.modified.uri);\n            this._dataStore.clear();\n            this._viewModel.set(data.viewModel, tx);\n            this.editor.setModel(data.viewModel.diffEditorViewModel, tx);\n            this.editor.updateOptions(updateOptions((_b = value.options) !== null && _b !== void 0 ? _b : {}));\n        });\n    }\n    render(verticalRange, width, editorScroll, viewPort) {\n        this._elements.root.style.visibility = 'visible';\n        this._elements.root.style.top = `${verticalRange.start}px`;\n        this._elements.root.style.height = `${verticalRange.length}px`;\n        this._elements.root.style.width = `${width}px`;\n        this._elements.root.style.position = 'absolute';\n        // For sticky scroll\n        const delta = Math.max(0, Math.min(verticalRange.length - this._headerHeight, viewPort.start - verticalRange.start));\n        this._elements.header.style.transform = `translateY(${delta}px)`;\n        globalTransaction(tx => {\n            this.editor.layout({\n                width: width,\n                height: verticalRange.length - this._outerEditorHeight,\n            });\n        });\n        this.editor.getOriginalEditor().setScrollTop(editorScroll);\n        this._elements.header.classList.toggle('shadow', delta > 0 || editorScroll > 0);\n    }\n    hide() {\n        this._elements.root.style.top = `-100000px`;\n        this._elements.root.style.visibility = 'hidden'; // Some editor parts are still visible\n    }\n};\nDiffEditorItemTemplate = __decorate([\n    __param(3, IInstantiationService)\n], DiffEditorItemTemplate);\nexport { DiffEditorItemTemplate };\nfunction isFocused(editor) {\n    return observableFromEvent(h => {\n        const store = new DisposableStore();\n        store.add(editor.onDidFocusEditorWidget(() => h(true)));\n        store.add(editor.onDidBlurEditorWidget(() => h(false)));\n        return store;\n    }, () => editor.hasWidgetFocus());\n}\n", "export class ObjectPool {\n    constructor(_create) {\n        this._create = _create;\n        this._unused = new Set();\n        this._used = new Set();\n        this._itemData = new Map();\n    }\n    getUnusedObj(data) {\n        var _a;\n        let obj;\n        if (this._unused.size === 0) {\n            obj = this._create(data);\n            this._itemData.set(obj, data);\n        }\n        else {\n            const values = [...this._unused.values()];\n            obj = (_a = values.find(obj => this._itemData.get(obj).getId() === data.getId())) !== null && _a !== void 0 ? _a : values[0];\n            this._unused.delete(obj);\n            this._itemData.set(obj, data);\n            obj.setData(data);\n        }\n        this._used.add(obj);\n        return {\n            object: obj,\n            dispose: () => {\n                this._used.delete(obj);\n                if (this._unused.size > 5) {\n                    obj.dispose();\n                }\n                else {\n                    this._unused.add(obj);\n                }\n            }\n        };\n    }\n    dispose() {\n        for (const obj of this._used) {\n            obj.dispose();\n        }\n        for (const obj of this._unused) {\n            obj.dispose();\n        }\n        this._used.clear();\n        this._unused.clear();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { localize } from '../../../../nls.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const multiDiffEditorHeaderBackground = registerColor('multiDiffEditor.headerBackground', { dark: '#808080', light: '#b4b4b4', hcDark: '#808080', hcLight: '#b4b4b4', }, localize('multiDiffEditor.headerBackground', 'The background color of the diff editor\\'s header'));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { derivedWithStore, observableValue, recomputeInitiallyAndOnChange } from '../../../../base/common/observable.js';\nimport { readHotReloadableExport } from '../diffEditor/utils.js';\nimport { MultiDiffEditorWidgetImpl } from './multiDiffEditorWidgetImpl.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport './colors.js';\nimport { DiffEditorItemTemplate } from './diffEditorItemTemplate.js';\nlet MultiDiffEditorWidget = class MultiDiffEditorWidget extends Disposable {\n    constructor(_element, _workbenchUIElementFactory, _instantiationService) {\n        super();\n        this._element = _element;\n        this._workbenchUIElementFactory = _workbenchUIElementFactory;\n        this._instantiationService = _instantiationService;\n        this._dimension = observableValue(this, undefined);\n        this._viewModel = observableValue(this, undefined);\n        this._widgetImpl = derivedWithStore(this, (reader, store) => {\n            readHotReloadableExport(DiffEditorItemTemplate, reader);\n            return store.add(this._instantiationService.createInstance((readHotReloadableExport(MultiDiffEditorWidgetImpl, reader)), this._element, this._dimension, this._viewModel, this._workbenchUIElementFactory));\n        });\n        this._register(recomputeInitiallyAndOnChange(this._widgetImpl));\n    }\n};\nMultiDiffEditorWidget = __decorate([\n    __param(2, IInstantiationService)\n], MultiDiffEditorWidget);\nexport { MultiDiffEditorWidget };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/*\n * This module only exports 'compile' which compiles a JSON language definition\n * into a typed and checked ILexer definition.\n */\nimport * as monarchCommon from './monarchCommon.js';\n/*\n * Type helpers\n *\n * Note: this is just for sanity checks on the JSON description which is\n * helpful for the programmer. No checks are done anymore once the lexer is\n * already 'compiled and checked'.\n *\n */\nfunction isArrayOf(elemType, obj) {\n    if (!obj) {\n        return false;\n    }\n    if (!(Array.isArray(obj))) {\n        return false;\n    }\n    for (const el of obj) {\n        if (!(elemType(el))) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction bool(prop, defValue) {\n    if (typeof prop === 'boolean') {\n        return prop;\n    }\n    return defValue;\n}\nfunction string(prop, defValue) {\n    if (typeof (prop) === 'string') {\n        return prop;\n    }\n    return defValue;\n}\nfunction arrayToHash(array) {\n    const result = {};\n    for (const e of array) {\n        result[e] = true;\n    }\n    return result;\n}\nfunction createKeywordMatcher(arr, caseInsensitive = false) {\n    if (caseInsensitive) {\n        arr = arr.map(function (x) { return x.toLowerCase(); });\n    }\n    const hash = arrayToHash(arr);\n    if (caseInsensitive) {\n        return function (word) {\n            return hash[word.toLowerCase()] !== undefined && hash.hasOwnProperty(word.toLowerCase());\n        };\n    }\n    else {\n        return function (word) {\n            return hash[word] !== undefined && hash.hasOwnProperty(word);\n        };\n    }\n}\n// Lexer helpers\n/**\n * Compiles a regular expression string, adding the 'i' flag if 'ignoreCase' is set, and the 'u' flag if 'unicode' is set.\n * Also replaces @\\w+ or sequences with the content of the specified attribute\n * @\\w+ replacement can be avoided by escaping `@` signs with another `@` sign.\n * @example /@attr/ will be replaced with the value of lexer[attr]\n * @example /@@text/ will not be replaced and will become /@text/.\n */\nfunction compileRegExp(lexer, str) {\n    // @@ must be interpreted as a literal @, so we replace all occurences of @@ with a placeholder character\n    str = str.replace(/@@/g, `\\x01`);\n    let n = 0;\n    let hadExpansion;\n    do {\n        hadExpansion = false;\n        str = str.replace(/@(\\w+)/g, function (s, attr) {\n            hadExpansion = true;\n            let sub = '';\n            if (typeof (lexer[attr]) === 'string') {\n                sub = lexer[attr];\n            }\n            else if (lexer[attr] && lexer[attr] instanceof RegExp) {\n                sub = lexer[attr].source;\n            }\n            else {\n                if (lexer[attr] === undefined) {\n                    throw monarchCommon.createError(lexer, 'language definition does not contain attribute \\'' + attr + '\\', used at: ' + str);\n                }\n                else {\n                    throw monarchCommon.createError(lexer, 'attribute reference \\'' + attr + '\\' must be a string, used at: ' + str);\n                }\n            }\n            return (monarchCommon.empty(sub) ? '' : '(?:' + sub + ')');\n        });\n        n++;\n    } while (hadExpansion && n < 5);\n    // handle escaped @@\n    str = str.replace(/\\x01/g, '@');\n    const flags = (lexer.ignoreCase ? 'i' : '') + (lexer.unicode ? 'u' : '');\n    return new RegExp(str, flags);\n}\n/**\n * Compiles guard functions for case matches.\n * This compiles 'cases' attributes into efficient match functions.\n *\n */\nfunction selectScrutinee(id, matches, state, num) {\n    if (num < 0) {\n        return id;\n    }\n    if (num < matches.length) {\n        return matches[num];\n    }\n    if (num >= 100) {\n        num = num - 100;\n        const parts = state.split('.');\n        parts.unshift(state);\n        if (num < parts.length) {\n            return parts[num];\n        }\n    }\n    return null;\n}\nfunction createGuard(lexer, ruleName, tkey, val) {\n    // get the scrutinee and pattern\n    let scrut = -1; // -1: $!, 0-99: $n, 100+n: $Sn\n    let oppat = tkey;\n    let matches = tkey.match(/^\\$(([sS]?)(\\d\\d?)|#)(.*)$/);\n    if (matches) {\n        if (matches[3]) { // if digits\n            scrut = parseInt(matches[3]);\n            if (matches[2]) {\n                scrut = scrut + 100; // if [sS] present\n            }\n        }\n        oppat = matches[4];\n    }\n    // get operator\n    let op = '~';\n    let pat = oppat;\n    if (!oppat || oppat.length === 0) {\n        op = '!=';\n        pat = '';\n    }\n    else if (/^\\w*$/.test(pat)) { // just a word\n        op = '==';\n    }\n    else {\n        matches = oppat.match(/^(@|!@|~|!~|==|!=)(.*)$/);\n        if (matches) {\n            op = matches[1];\n            pat = matches[2];\n        }\n    }\n    // set the tester function\n    let tester;\n    // special case a regexp that matches just words\n    if ((op === '~' || op === '!~') && /^(\\w|\\|)*$/.test(pat)) {\n        const inWords = createKeywordMatcher(pat.split('|'), lexer.ignoreCase);\n        tester = function (s) { return (op === '~' ? inWords(s) : !inWords(s)); };\n    }\n    else if (op === '@' || op === '!@') {\n        const words = lexer[pat];\n        if (!words) {\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' is not defined, in rule: ' + ruleName);\n        }\n        if (!(isArrayOf(function (elem) { return (typeof (elem) === 'string'); }, words))) {\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' must be an array of strings, in rule: ' + ruleName);\n        }\n        const inWords = createKeywordMatcher(words, lexer.ignoreCase);\n        tester = function (s) { return (op === '@' ? inWords(s) : !inWords(s)); };\n    }\n    else if (op === '~' || op === '!~') {\n        if (pat.indexOf('$') < 0) {\n            // precompile regular expression\n            const re = compileRegExp(lexer, '^' + pat + '$');\n            tester = function (s) { return (op === '~' ? re.test(s) : !re.test(s)); };\n        }\n        else {\n            tester = function (s, id, matches, state) {\n                const re = compileRegExp(lexer, '^' + monarchCommon.substituteMatches(lexer, pat, id, matches, state) + '$');\n                return re.test(s);\n            };\n        }\n    }\n    else { // if (op==='==' || op==='!=') {\n        if (pat.indexOf('$') < 0) {\n            const patx = monarchCommon.fixCase(lexer, pat);\n            tester = function (s) { return (op === '==' ? s === patx : s !== patx); };\n        }\n        else {\n            const patx = monarchCommon.fixCase(lexer, pat);\n            tester = function (s, id, matches, state, eos) {\n                const patexp = monarchCommon.substituteMatches(lexer, patx, id, matches, state);\n                return (op === '==' ? s === patexp : s !== patexp);\n            };\n        }\n    }\n    // return the branch object\n    if (scrut === -1) {\n        return {\n            name: tkey, value: val, test: function (id, matches, state, eos) {\n                return tester(id, id, matches, state, eos);\n            }\n        };\n    }\n    else {\n        return {\n            name: tkey, value: val, test: function (id, matches, state, eos) {\n                const scrutinee = selectScrutinee(id, matches, state, scrut);\n                return tester(!scrutinee ? '' : scrutinee, id, matches, state, eos);\n            }\n        };\n    }\n}\n/**\n * Compiles an action: i.e. optimize regular expressions and case matches\n * and do many sanity checks.\n *\n * This is called only during compilation but if the lexer definition\n * contains user functions as actions (which is usually not allowed), then this\n * may be called during lexing. It is important therefore to compile common cases efficiently\n */\nfunction compileAction(lexer, ruleName, action) {\n    if (!action) {\n        return { token: '' };\n    }\n    else if (typeof (action) === 'string') {\n        return action; // { token: action };\n    }\n    else if (action.token || action.token === '') {\n        if (typeof (action.token) !== 'string') {\n            throw monarchCommon.createError(lexer, 'a \\'token\\' attribute must be of type string, in rule: ' + ruleName);\n        }\n        else {\n            // only copy specific typed fields (only happens once during compile Lexer)\n            const newAction = { token: action.token };\n            if (action.token.indexOf('$') >= 0) {\n                newAction.tokenSubst = true;\n            }\n            if (typeof (action.bracket) === 'string') {\n                if (action.bracket === '@open') {\n                    newAction.bracket = 1 /* monarchCommon.MonarchBracket.Open */;\n                }\n                else if (action.bracket === '@close') {\n                    newAction.bracket = -1 /* monarchCommon.MonarchBracket.Close */;\n                }\n                else {\n                    throw monarchCommon.createError(lexer, 'a \\'bracket\\' attribute must be either \\'@open\\' or \\'@close\\', in rule: ' + ruleName);\n                }\n            }\n            if (action.next) {\n                if (typeof (action.next) !== 'string') {\n                    throw monarchCommon.createError(lexer, 'the next state must be a string value in rule: ' + ruleName);\n                }\n                else {\n                    let next = action.next;\n                    if (!/^(@pop|@push|@popall)$/.test(next)) {\n                        if (next[0] === '@') {\n                            next = next.substr(1); // peel off starting @ sign\n                        }\n                        if (next.indexOf('$') < 0) { // no dollar substitution, we can check if the state exists\n                            if (!monarchCommon.stateExists(lexer, monarchCommon.substituteMatches(lexer, next, '', [], ''))) {\n                                throw monarchCommon.createError(lexer, 'the next state \\'' + action.next + '\\' is not defined in rule: ' + ruleName);\n                            }\n                        }\n                    }\n                    newAction.next = next;\n                }\n            }\n            if (typeof (action.goBack) === 'number') {\n                newAction.goBack = action.goBack;\n            }\n            if (typeof (action.switchTo) === 'string') {\n                newAction.switchTo = action.switchTo;\n            }\n            if (typeof (action.log) === 'string') {\n                newAction.log = action.log;\n            }\n            if (typeof (action.nextEmbedded) === 'string') {\n                newAction.nextEmbedded = action.nextEmbedded;\n                lexer.usesEmbedded = true;\n            }\n            return newAction;\n        }\n    }\n    else if (Array.isArray(action)) {\n        const results = [];\n        for (let i = 0, len = action.length; i < len; i++) {\n            results[i] = compileAction(lexer, ruleName, action[i]);\n        }\n        return { group: results };\n    }\n    else if (action.cases) {\n        // build an array of test cases\n        const cases = [];\n        // for each case, push a test function and result value\n        for (const tkey in action.cases) {\n            if (action.cases.hasOwnProperty(tkey)) {\n                const val = compileAction(lexer, ruleName, action.cases[tkey]);\n                // what kind of case\n                if (tkey === '@default' || tkey === '@' || tkey === '') {\n                    cases.push({ test: undefined, value: val, name: tkey });\n                }\n                else if (tkey === '@eos') {\n                    cases.push({ test: function (id, matches, state, eos) { return eos; }, value: val, name: tkey });\n                }\n                else {\n                    cases.push(createGuard(lexer, ruleName, tkey, val)); // call separate function to avoid local variable capture\n                }\n            }\n        }\n        // create a matching function\n        const def = lexer.defaultToken;\n        return {\n            test: function (id, matches, state, eos) {\n                for (const _case of cases) {\n                    const didmatch = (!_case.test || _case.test(id, matches, state, eos));\n                    if (didmatch) {\n                        return _case.value;\n                    }\n                }\n                return def;\n            }\n        };\n    }\n    else {\n        throw monarchCommon.createError(lexer, 'an action must be a string, an object with a \\'token\\' or \\'cases\\' attribute, or an array of actions; in rule: ' + ruleName);\n    }\n}\n/**\n * Helper class for creating matching rules\n */\nclass Rule {\n    constructor(name) {\n        this.regex = new RegExp('');\n        this.action = { token: '' };\n        this.matchOnlyAtLineStart = false;\n        this.name = '';\n        this.name = name;\n    }\n    setRegex(lexer, re) {\n        let sregex;\n        if (typeof (re) === 'string') {\n            sregex = re;\n        }\n        else if (re instanceof RegExp) {\n            sregex = re.source;\n        }\n        else {\n            throw monarchCommon.createError(lexer, 'rules must start with a match string or regular expression: ' + this.name);\n        }\n        this.matchOnlyAtLineStart = (sregex.length > 0 && sregex[0] === '^');\n        this.name = this.name + ': ' + sregex;\n        this.regex = compileRegExp(lexer, '^(?:' + (this.matchOnlyAtLineStart ? sregex.substr(1) : sregex) + ')');\n    }\n    setAction(lexer, act) {\n        this.action = compileAction(lexer, this.name, act);\n    }\n}\n/**\n * Compiles a json description function into json where all regular expressions,\n * case matches etc, are compiled and all include rules are expanded.\n * We also compile the bracket definitions, supply defaults, and do many sanity checks.\n * If the 'jsonStrict' parameter is 'false', we allow at certain locations\n * regular expression objects and functions that get called during lexing.\n * (Currently we have no samples that need this so perhaps we should always have\n * jsonStrict to true).\n */\nexport function compile(languageId, json) {\n    if (!json || typeof (json) !== 'object') {\n        throw new Error('Monarch: expecting a language definition object');\n    }\n    // Create our lexer\n    const lexer = {};\n    lexer.languageId = languageId;\n    lexer.includeLF = bool(json.includeLF, false);\n    lexer.noThrow = false; // raise exceptions during compilation\n    lexer.maxStack = 100;\n    // Set standard fields: be defensive about types\n    lexer.start = (typeof json.start === 'string' ? json.start : null);\n    lexer.ignoreCase = bool(json.ignoreCase, false);\n    lexer.unicode = bool(json.unicode, false);\n    lexer.tokenPostfix = string(json.tokenPostfix, '.' + lexer.languageId);\n    lexer.defaultToken = string(json.defaultToken, 'source');\n    lexer.usesEmbedded = false; // becomes true if we find a nextEmbedded action\n    // For calling compileAction later on\n    const lexerMin = json;\n    lexerMin.languageId = languageId;\n    lexerMin.includeLF = lexer.includeLF;\n    lexerMin.ignoreCase = lexer.ignoreCase;\n    lexerMin.unicode = lexer.unicode;\n    lexerMin.noThrow = lexer.noThrow;\n    lexerMin.usesEmbedded = lexer.usesEmbedded;\n    lexerMin.stateNames = json.tokenizer;\n    lexerMin.defaultToken = lexer.defaultToken;\n    // Compile an array of rules into newrules where RegExp objects are created.\n    function addRules(state, newrules, rules) {\n        for (const rule of rules) {\n            let include = rule.include;\n            if (include) {\n                if (typeof (include) !== 'string') {\n                    throw monarchCommon.createError(lexer, 'an \\'include\\' attribute must be a string at: ' + state);\n                }\n                if (include[0] === '@') {\n                    include = include.substr(1); // peel off starting @\n                }\n                if (!json.tokenizer[include]) {\n                    throw monarchCommon.createError(lexer, 'include target \\'' + include + '\\' is not defined at: ' + state);\n                }\n                addRules(state + '.' + include, newrules, json.tokenizer[include]);\n            }\n            else {\n                const newrule = new Rule(state);\n                // Set up new rule attributes\n                if (Array.isArray(rule) && rule.length >= 1 && rule.length <= 3) {\n                    newrule.setRegex(lexerMin, rule[0]);\n                    if (rule.length >= 3) {\n                        if (typeof (rule[1]) === 'string') {\n                            newrule.setAction(lexerMin, { token: rule[1], next: rule[2] });\n                        }\n                        else if (typeof (rule[1]) === 'object') {\n                            const rule1 = rule[1];\n                            rule1.next = rule[2];\n                            newrule.setAction(lexerMin, rule1);\n                        }\n                        else {\n                            throw monarchCommon.createError(lexer, 'a next state as the last element of a rule can only be given if the action is either an object or a string, at: ' + state);\n                        }\n                    }\n                    else {\n                        newrule.setAction(lexerMin, rule[1]);\n                    }\n                }\n                else {\n                    if (!rule.regex) {\n                        throw monarchCommon.createError(lexer, 'a rule must either be an array, or an object with a \\'regex\\' or \\'include\\' field at: ' + state);\n                    }\n                    if (rule.name) {\n                        if (typeof rule.name === 'string') {\n                            newrule.name = rule.name;\n                        }\n                    }\n                    if (rule.matchOnlyAtStart) {\n                        newrule.matchOnlyAtLineStart = bool(rule.matchOnlyAtLineStart, false);\n                    }\n                    newrule.setRegex(lexerMin, rule.regex);\n                    newrule.setAction(lexerMin, rule.action);\n                }\n                newrules.push(newrule);\n            }\n        }\n    }\n    // compile the tokenizer rules\n    if (!json.tokenizer || typeof (json.tokenizer) !== 'object') {\n        throw monarchCommon.createError(lexer, 'a language definition must define the \\'tokenizer\\' attribute as an object');\n    }\n    lexer.tokenizer = [];\n    for (const key in json.tokenizer) {\n        if (json.tokenizer.hasOwnProperty(key)) {\n            if (!lexer.start) {\n                lexer.start = key;\n            }\n            const rules = json.tokenizer[key];\n            lexer.tokenizer[key] = new Array();\n            addRules('tokenizer.' + key, lexer.tokenizer[key], rules);\n        }\n    }\n    lexer.usesEmbedded = lexerMin.usesEmbedded; // can be set during compileAction\n    // Set simple brackets\n    if (json.brackets) {\n        if (!(Array.isArray(json.brackets))) {\n            throw monarchCommon.createError(lexer, 'the \\'brackets\\' attribute must be defined as an array');\n        }\n    }\n    else {\n        json.brackets = [\n            { open: '{', close: '}', token: 'delimiter.curly' },\n            { open: '[', close: ']', token: 'delimiter.square' },\n            { open: '(', close: ')', token: 'delimiter.parenthesis' },\n            { open: '<', close: '>', token: 'delimiter.angle' }\n        ];\n    }\n    const brackets = [];\n    for (const el of json.brackets) {\n        let desc = el;\n        if (desc && Array.isArray(desc) && desc.length === 3) {\n            desc = { token: desc[2], open: desc[0], close: desc[1] };\n        }\n        if (desc.open === desc.close) {\n            throw monarchCommon.createError(lexer, 'open and close brackets in a \\'brackets\\' attribute must be different: ' + desc.open +\n                '\\n hint: use the \\'bracket\\' attribute if matching on equal brackets is required.');\n        }\n        if (typeof desc.open === 'string' && typeof desc.token === 'string' && typeof desc.close === 'string') {\n            brackets.push({\n                token: desc.token + lexer.tokenPostfix,\n                open: monarchCommon.fixCase(lexer, desc.open),\n                close: monarchCommon.fixCase(lexer, desc.close)\n            });\n        }\n        else {\n            throw monarchCommon.createError(lexer, 'every element in the \\'brackets\\' array must be a \\'{open,close,token}\\' object or array');\n        }\n    }\n    lexer.brackets = brackets;\n    // Disable throw so the syntax highlighter goes, no matter what\n    lexer.noThrow = true;\n    return lexer;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Color } from '../../../base/common/color.js';\nimport { Range } from '../../common/core/range.js';\nimport * as languages from '../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ModesRegistry } from '../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\nimport { StandaloneServices } from './standaloneServices.js';\nimport { compile } from '../common/monarch/monarchCompile.js';\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\n/**\n * Register information about a new language.\n */\nexport function register(language) {\n    // Intentionally using the `ModesRegistry` here to avoid\n    // instantiating services too quickly in the standalone editor.\n    ModesRegistry.registerLanguage(language);\n}\n/**\n * Get the information of all the registered languages.\n */\nexport function getLanguages() {\n    let result = [];\n    result = result.concat(ModesRegistry.getLanguages());\n    return result;\n}\nexport function getEncodedLanguageId(languageId) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    return languageService.languageIdCodec.encodeLanguageId(languageId);\n}\n/**\n * An event emitted when a language is associated for the first time with a text model.\n * @event\n */\nexport function onLanguage(languageId, callback) {\n    return StandaloneServices.withServices(() => {\n        const languageService = StandaloneServices.get(ILanguageService);\n        const disposable = languageService.onDidRequestRichLanguageFeatures((encounteredLanguageId) => {\n            if (encounteredLanguageId === languageId) {\n                // stop listening\n                disposable.dispose();\n                // invoke actual listener\n                callback();\n            }\n        });\n        return disposable;\n    });\n}\n/**\n * An event emitted when a language is associated for the first time with a text model or\n * when a language is encountered during the tokenization of another language.\n * @event\n */\nexport function onLanguageEncountered(languageId, callback) {\n    return StandaloneServices.withServices(() => {\n        const languageService = StandaloneServices.get(ILanguageService);\n        const disposable = languageService.onDidRequestBasicLanguageFeatures((encounteredLanguageId) => {\n            if (encounteredLanguageId === languageId) {\n                // stop listening\n                disposable.dispose();\n                // invoke actual listener\n                callback();\n            }\n        });\n        return disposable;\n    });\n}\n/**\n * Set the editing configuration for a language.\n */\nexport function setLanguageConfiguration(languageId, configuration) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    if (!languageService.isRegisteredLanguageId(languageId)) {\n        throw new Error(`Cannot set configuration for unknown language ${languageId}`);\n    }\n    const languageConfigurationService = StandaloneServices.get(ILanguageConfigurationService);\n    return languageConfigurationService.register(languageId, configuration, 100);\n}\n/**\n * @internal\n */\nexport class EncodedTokenizationSupportAdapter {\n    constructor(languageId, actual) {\n        this._languageId = languageId;\n        this._actual = actual;\n    }\n    dispose() {\n        // NOOP\n    }\n    getInitialState() {\n        return this._actual.getInitialState();\n    }\n    tokenize(line, hasEOL, state) {\n        if (typeof this._actual.tokenize === 'function') {\n            return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\n        }\n        throw new Error('Not supported!');\n    }\n    tokenizeEncoded(line, hasEOL, state) {\n        const result = this._actual.tokenizeEncoded(line, state);\n        return new languages.EncodedTokenizationResult(result.tokens, result.endState);\n    }\n}\n/**\n * @internal\n */\nexport class TokenizationSupportAdapter {\n    constructor(_languageId, _actual, _languageService, _standaloneThemeService) {\n        this._languageId = _languageId;\n        this._actual = _actual;\n        this._languageService = _languageService;\n        this._standaloneThemeService = _standaloneThemeService;\n    }\n    dispose() {\n        // NOOP\n    }\n    getInitialState() {\n        return this._actual.getInitialState();\n    }\n    static _toClassicTokens(tokens, language) {\n        const result = [];\n        let previousStartIndex = 0;\n        for (let i = 0, len = tokens.length; i < len; i++) {\n            const t = tokens[i];\n            let startIndex = t.startIndex;\n            // Prevent issues stemming from a buggy external tokenizer.\n            if (i === 0) {\n                // Force first token to start at first index!\n                startIndex = 0;\n            }\n            else if (startIndex < previousStartIndex) {\n                // Force tokens to be after one another!\n                startIndex = previousStartIndex;\n            }\n            result[i] = new languages.Token(startIndex, t.scopes, language);\n            previousStartIndex = startIndex;\n        }\n        return result;\n    }\n    static adaptTokenize(language, actual, line, state) {\n        const actualResult = actual.tokenize(line, state);\n        const tokens = TokenizationSupportAdapter._toClassicTokens(actualResult.tokens, language);\n        let endState;\n        // try to save an object if possible\n        if (actualResult.endState.equals(state)) {\n            endState = state;\n        }\n        else {\n            endState = actualResult.endState;\n        }\n        return new languages.TokenizationResult(tokens, endState);\n    }\n    tokenize(line, hasEOL, state) {\n        return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\n    }\n    _toBinaryTokens(languageIdCodec, tokens) {\n        const languageId = languageIdCodec.encodeLanguageId(this._languageId);\n        const tokenTheme = this._standaloneThemeService.getColorTheme().tokenTheme;\n        const result = [];\n        let resultLen = 0;\n        let previousStartIndex = 0;\n        for (let i = 0, len = tokens.length; i < len; i++) {\n            const t = tokens[i];\n            const metadata = tokenTheme.match(languageId, t.scopes) | 1024 /* MetadataConsts.BALANCED_BRACKETS_MASK */;\n            if (resultLen > 0 && result[resultLen - 1] === metadata) {\n                // same metadata\n                continue;\n            }\n            let startIndex = t.startIndex;\n            // Prevent issues stemming from a buggy external tokenizer.\n            if (i === 0) {\n                // Force first token to start at first index!\n                startIndex = 0;\n            }\n            else if (startIndex < previousStartIndex) {\n                // Force tokens to be after one another!\n                startIndex = previousStartIndex;\n            }\n            result[resultLen++] = startIndex;\n            result[resultLen++] = metadata;\n            previousStartIndex = startIndex;\n        }\n        const actualResult = new Uint32Array(resultLen);\n        for (let i = 0; i < resultLen; i++) {\n            actualResult[i] = result[i];\n        }\n        return actualResult;\n    }\n    tokenizeEncoded(line, hasEOL, state) {\n        const actualResult = this._actual.tokenize(line, state);\n        const tokens = this._toBinaryTokens(this._languageService.languageIdCodec, actualResult.tokens);\n        let endState;\n        // try to save an object if possible\n        if (actualResult.endState.equals(state)) {\n            endState = state;\n        }\n        else {\n            endState = actualResult.endState;\n        }\n        return new languages.EncodedTokenizationResult(tokens, endState);\n    }\n}\nfunction isATokensProvider(provider) {\n    return (typeof provider.getInitialState === 'function');\n}\nfunction isEncodedTokensProvider(provider) {\n    return 'tokenizeEncoded' in provider;\n}\nfunction isThenable(obj) {\n    return obj && typeof obj.then === 'function';\n}\n/**\n * Change the color map that is used for token colors.\n * Supported formats (hex): #RRGGBB, $RRGGBBAA, #RGB, #RGBA\n */\nexport function setColorMap(colorMap) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    if (colorMap) {\n        const result = [null];\n        for (let i = 1, len = colorMap.length; i < len; i++) {\n            result[i] = Color.fromHex(colorMap[i]);\n        }\n        standaloneThemeService.setColorMapOverride(result);\n    }\n    else {\n        standaloneThemeService.setColorMapOverride(null);\n    }\n}\n/**\n * @internal\n */\nfunction createTokenizationSupportAdapter(languageId, provider) {\n    if (isEncodedTokensProvider(provider)) {\n        return new EncodedTokenizationSupportAdapter(languageId, provider);\n    }\n    else {\n        return new TokenizationSupportAdapter(languageId, provider, StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService));\n    }\n}\n/**\n * Register a tokens provider factory for a language. This tokenizer will be exclusive with a tokenizer\n * set using `setTokensProvider` or one created using `setMonarchTokensProvider`, but will work together\n * with a tokens provider set using `registerDocumentSemanticTokensProvider` or `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function registerTokensProviderFactory(languageId, factory) {\n    const adaptedFactory = new languages.LazyTokenizationSupport(async () => {\n        const result = await Promise.resolve(factory.create());\n        if (!result) {\n            return null;\n        }\n        if (isATokensProvider(result)) {\n            return createTokenizationSupportAdapter(languageId, result);\n        }\n        return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, result), StandaloneServices.get(IConfigurationService));\n    });\n    return languages.TokenizationRegistry.registerFactory(languageId, adaptedFactory);\n}\n/**\n * Set the tokens provider for a language (manual implementation). This tokenizer will be exclusive\n * with a tokenizer created using `setMonarchTokensProvider`, or with `registerTokensProviderFactory`,\n * but will work together with a tokens provider set using `registerDocumentSemanticTokensProvider`\n * or `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function setTokensProvider(languageId, provider) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    if (!languageService.isRegisteredLanguageId(languageId)) {\n        throw new Error(`Cannot set tokens provider for unknown language ${languageId}`);\n    }\n    if (isThenable(provider)) {\n        return registerTokensProviderFactory(languageId, { create: () => provider });\n    }\n    return languages.TokenizationRegistry.register(languageId, createTokenizationSupportAdapter(languageId, provider));\n}\n/**\n * Set the tokens provider for a language (monarch implementation). This tokenizer will be exclusive\n * with a tokenizer set using `setTokensProvider`, or with `registerTokensProviderFactory`, but will\n * work together with a tokens provider set using `registerDocumentSemanticTokensProvider` or\n * `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function setMonarchTokensProvider(languageId, languageDef) {\n    const create = (languageDef) => {\n        return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, languageDef), StandaloneServices.get(IConfigurationService));\n    };\n    if (isThenable(languageDef)) {\n        return registerTokensProviderFactory(languageId, { create: () => languageDef });\n    }\n    return languages.TokenizationRegistry.register(languageId, create(languageDef));\n}\n/**\n * Register a reference provider (used by e.g. reference search).\n */\nexport function registerReferenceProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.referenceProvider.register(languageSelector, provider);\n}\n/**\n * Register a rename provider (used by e.g. rename symbol).\n */\nexport function registerRenameProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.renameProvider.register(languageSelector, provider);\n}\n/**\n * Register a signature help provider (used by e.g. parameter hints).\n */\nexport function registerSignatureHelpProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.signatureHelpProvider.register(languageSelector, provider);\n}\n/**\n * Register a hover provider (used by e.g. editor hover).\n */\nexport function registerHoverProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.hoverProvider.register(languageSelector, {\n        provideHover: (model, position, token) => {\n            const word = model.getWordAtPosition(position);\n            return Promise.resolve(provider.provideHover(model, position, token)).then((value) => {\n                if (!value) {\n                    return undefined;\n                }\n                if (!value.range && word) {\n                    value.range = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n                }\n                if (!value.range) {\n                    value.range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n                }\n                return value;\n            });\n        }\n    });\n}\n/**\n * Register a document symbol provider (used by e.g. outline).\n */\nexport function registerDocumentSymbolProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentSymbolProvider.register(languageSelector, provider);\n}\n/**\n * Register a document highlight provider (used by e.g. highlight occurrences).\n */\nexport function registerDocumentHighlightProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentHighlightProvider.register(languageSelector, provider);\n}\n/**\n * Register an linked editing range provider.\n */\nexport function registerLinkedEditingRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.linkedEditingRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a definition provider (used by e.g. go to definition).\n */\nexport function registerDefinitionProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.definitionProvider.register(languageSelector, provider);\n}\n/**\n * Register a implementation provider (used by e.g. go to implementation).\n */\nexport function registerImplementationProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.implementationProvider.register(languageSelector, provider);\n}\n/**\n * Register a type definition provider (used by e.g. go to type definition).\n */\nexport function registerTypeDefinitionProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.typeDefinitionProvider.register(languageSelector, provider);\n}\n/**\n * Register a code lens provider (used by e.g. inline code lenses).\n */\nexport function registerCodeLensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.codeLensProvider.register(languageSelector, provider);\n}\n/**\n * Register a code action provider (used by e.g. quick fix).\n */\nexport function registerCodeActionProvider(languageSelector, provider, metadata) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.codeActionProvider.register(languageSelector, {\n        providedCodeActionKinds: metadata === null || metadata === void 0 ? void 0 : metadata.providedCodeActionKinds,\n        documentation: metadata === null || metadata === void 0 ? void 0 : metadata.documentation,\n        provideCodeActions: (model, range, context, token) => {\n            const markerService = StandaloneServices.get(IMarkerService);\n            const markers = markerService.read({ resource: model.uri }).filter(m => {\n                return Range.areIntersectingOrTouching(m, range);\n            });\n            return provider.provideCodeActions(model, range, { markers, only: context.only, trigger: context.trigger }, token);\n        },\n        resolveCodeAction: provider.resolveCodeAction\n    });\n}\n/**\n * Register a formatter that can handle only entire models.\n */\nexport function registerDocumentFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a formatter that can handle a range inside a model.\n */\nexport function registerDocumentRangeFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentRangeFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a formatter than can do formatting as the user types.\n */\nexport function registerOnTypeFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.onTypeFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a link provider that can find links in text.\n */\nexport function registerLinkProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.linkProvider.register(languageSelector, provider);\n}\n/**\n * Register a completion item provider (use by e.g. suggestions).\n */\nexport function registerCompletionItemProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.completionProvider.register(languageSelector, provider);\n}\n/**\n * Register a document color provider (used by Color Picker, Color Decorator).\n */\nexport function registerColorProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.colorProvider.register(languageSelector, provider);\n}\n/**\n * Register a folding range provider\n */\nexport function registerFoldingRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.foldingRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a declaration provider\n */\nexport function registerDeclarationProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.declarationProvider.register(languageSelector, provider);\n}\n/**\n * Register a selection range provider\n */\nexport function registerSelectionRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.selectionRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a document semantic tokens provider. A semantic tokens provider will complement and enhance a\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\n * or `setTokensProvider`.\n *\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\n */\nexport function registerDocumentSemanticTokensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentSemanticTokensProvider.register(languageSelector, provider);\n}\n/**\n * Register a document range semantic tokens provider. A semantic tokens provider will complement and enhance a\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\n * or `setTokensProvider`.\n *\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\n */\nexport function registerDocumentRangeSemanticTokensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentRangeSemanticTokensProvider.register(languageSelector, provider);\n}\n/**\n * Register an inline completions provider.\n */\nexport function registerInlineCompletionsProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.inlineCompletionsProvider.register(languageSelector, provider);\n}\n/**\n * Register an inlay hints provider.\n */\nexport function registerInlayHintsProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.inlayHintsProvider.register(languageSelector, provider);\n}\n/**\n * @internal\n */\nexport function createMonacoLanguagesAPI() {\n    return {\n        register: register,\n        getLanguages: getLanguages,\n        onLanguage: onLanguage,\n        onLanguageEncountered: onLanguageEncountered,\n        getEncodedLanguageId: getEncodedLanguageId,\n        // provider methods\n        setLanguageConfiguration: setLanguageConfiguration,\n        setColorMap: setColorMap,\n        registerTokensProviderFactory: registerTokensProviderFactory,\n        setTokensProvider: setTokensProvider,\n        setMonarchTokensProvider: setMonarchTokensProvider,\n        registerReferenceProvider: registerReferenceProvider,\n        registerRenameProvider: registerRenameProvider,\n        registerCompletionItemProvider: registerCompletionItemProvider,\n        registerSignatureHelpProvider: registerSignatureHelpProvider,\n        registerHoverProvider: registerHoverProvider,\n        registerDocumentSymbolProvider: registerDocumentSymbolProvider,\n        registerDocumentHighlightProvider: registerDocumentHighlightProvider,\n        registerLinkedEditingRangeProvider: registerLinkedEditingRangeProvider,\n        registerDefinitionProvider: registerDefinitionProvider,\n        registerImplementationProvider: registerImplementationProvider,\n        registerTypeDefinitionProvider: registerTypeDefinitionProvider,\n        registerCodeLensProvider: registerCodeLensProvider,\n        registerCodeActionProvider: registerCodeActionProvider,\n        registerDocumentFormattingEditProvider: registerDocumentFormattingEditProvider,\n        registerDocumentRangeFormattingEditProvider: registerDocumentRangeFormattingEditProvider,\n        registerOnTypeFormattingEditProvider: registerOnTypeFormattingEditProvider,\n        registerLinkProvider: registerLinkProvider,\n        registerColorProvider: registerColorProvider,\n        registerFoldingRangeProvider: registerFoldingRangeProvider,\n        registerDeclarationProvider: registerDeclarationProvider,\n        registerSelectionRangeProvider: registerSelectionRangeProvider,\n        registerDocumentSemanticTokensProvider: registerDocumentSemanticTokensProvider,\n        registerDocumentRangeSemanticTokensProvider: registerDocumentRangeSemanticTokensProvider,\n        registerInlineCompletionsProvider: registerInlineCompletionsProvider,\n        registerInlayHintsProvider: registerInlayHintsProvider,\n        // enums\n        DocumentHighlightKind: standaloneEnums.DocumentHighlightKind,\n        CompletionItemKind: standaloneEnums.CompletionItemKind,\n        CompletionItemTag: standaloneEnums.CompletionItemTag,\n        CompletionItemInsertTextRule: standaloneEnums.CompletionItemInsertTextRule,\n        SymbolKind: standaloneEnums.SymbolKind,\n        SymbolTag: standaloneEnums.SymbolTag,\n        IndentAction: standaloneEnums.IndentAction,\n        CompletionTriggerKind: standaloneEnums.CompletionTriggerKind,\n        SignatureHelpTriggerKind: standaloneEnums.SignatureHelpTriggerKind,\n        InlayHintKind: standaloneEnums.InlayHintKind,\n        InlineCompletionTriggerKind: standaloneEnums.InlineCompletionTriggerKind,\n        CodeActionTriggerType: standaloneEnums.CodeActionTriggerType,\n        // classes\n        FoldingRangeKind: languages.FoldingRangeKind,\n        SelectedSuggestionInfo: languages.SelectedSuggestionInfo,\n    };\n}\n", "/**\n * **!Do not construct directly!**\n *\n * **!Only static methods because it gets serialized!**\n *\n * This represents the \"canonical\" version for an extension identifier. Extension ids\n * have to be case-insensitive (due to the marketplace), but we must ensure case\n * preservation because the extension API is already public at this time.\n *\n * For example, given an extension with the publisher `\"Hello\"` and the name `\"World\"`,\n * its canonical extension identifier is `\"Hello.World\"`. This extension could be\n * referenced in some other extension's dependencies using the string `\"hello.world\"`.\n *\n * To make matters more complicated, an extension can optionally have an UUID. When two\n * extensions have the same UUID, they are considered equal even if their identifier is different.\n */\nexport class ExtensionIdentifier {\n    constructor(value) {\n        this.value = value;\n        this._lower = value.toLowerCase();\n    }\n    /**\n     * Gives the value by which to index (for equality).\n     */\n    static toKey(id) {\n        if (typeof id === 'string') {\n            return id.toLowerCase();\n        }\n        return id._lower;\n    }\n}\nexport class ExtensionIdentifierSet {\n    constructor(iterable) {\n        this._set = new Set();\n        if (iterable) {\n            for (const value of iterable) {\n                this.add(value);\n            }\n        }\n    }\n    add(id) {\n        this._set.add(ExtensionIdentifier.toKey(id));\n    }\n    has(id) {\n        return this._set.has(ExtensionIdentifier.toKey(id));\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { asArray, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource, TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ExtensionIdentifierSet } from '../../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IAccessibleNotificationService } from '../../../../platform/accessibility/common/accessibility.js';\nexport function getRealAndSyntheticDocumentFormattersOrdered(documentFormattingEditProvider, documentRangeFormattingEditProvider, model) {\n    const result = [];\n    const seen = new ExtensionIdentifierSet();\n    // (1) add all document formatter\n    const docFormatter = documentFormattingEditProvider.ordered(model);\n    for (const formatter of docFormatter) {\n        result.push(formatter);\n        if (formatter.extensionId) {\n            seen.add(formatter.extensionId);\n        }\n    }\n    // (2) add all range formatter as document formatter (unless the same extension already did that)\n    const rangeFormatter = documentRangeFormattingEditProvider.ordered(model);\n    for (const formatter of rangeFormatter) {\n        if (formatter.extensionId) {\n            if (seen.has(formatter.extensionId)) {\n                continue;\n            }\n            seen.add(formatter.extensionId);\n        }\n        result.push({\n            displayName: formatter.displayName,\n            extensionId: formatter.extensionId,\n            provideDocumentFormattingEdits(model, options, token) {\n                return formatter.provideDocumentRangeFormattingEdits(model, model.getFullModelRange(), options, token);\n            }\n        });\n    }\n    return result;\n}\nexport class FormattingConflicts {\n    static setFormatterSelector(selector) {\n        const remove = FormattingConflicts._selectors.unshift(selector);\n        return { dispose: remove };\n    }\n    static async select(formatter, document, mode) {\n        if (formatter.length === 0) {\n            return undefined;\n        }\n        const selector = Iterable.first(FormattingConflicts._selectors);\n        if (selector) {\n            return await selector(formatter, document, mode);\n        }\n        return undefined;\n    }\n}\nFormattingConflicts._selectors = new LinkedList();\nexport async function formatDocumentRangesWithSelectedProvider(accessor, editorOrModel, rangeOrRanges, mode, progress, token, userGesture) {\n    const instaService = accessor.get(IInstantiationService);\n    const { documentRangeFormattingEditProvider: documentRangeFormattingEditProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n    const provider = documentRangeFormattingEditProviderRegistry.ordered(model);\n    const selected = await FormattingConflicts.select(provider, model, mode);\n    if (selected) {\n        progress.report(selected);\n        await instaService.invokeFunction(formatDocumentRangesWithProvider, selected, editorOrModel, rangeOrRanges, token, userGesture);\n    }\n}\nexport async function formatDocumentRangesWithProvider(accessor, provider, editorOrModel, rangeOrRanges, token, userGesture) {\n    var _a, _b;\n    const workerService = accessor.get(IEditorWorkerService);\n    const logService = accessor.get(ILogService);\n    const accessibleNotificationService = accessor.get(IAccessibleNotificationService);\n    let model;\n    let cts;\n    if (isCodeEditor(editorOrModel)) {\n        model = editorOrModel.getModel();\n        cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\n    }\n    else {\n        model = editorOrModel;\n        cts = new TextModelCancellationTokenSource(editorOrModel, token);\n    }\n    // make sure that ranges don't overlap nor touch each other\n    const ranges = [];\n    let len = 0;\n    for (const range of asArray(rangeOrRanges).sort(Range.compareRangesUsingStarts)) {\n        if (len > 0 && Range.areIntersectingOrTouching(ranges[len - 1], range)) {\n            ranges[len - 1] = Range.fromPositions(ranges[len - 1].getStartPosition(), range.getEndPosition());\n        }\n        else {\n            len = ranges.push(range);\n        }\n    }\n    const computeEdits = async (range) => {\n        var _a, _b;\n        logService.trace(`[format][provideDocumentRangeFormattingEdits] (request)`, (_a = provider.extensionId) === null || _a === void 0 ? void 0 : _a.value, range);\n        const result = (await provider.provideDocumentRangeFormattingEdits(model, range, model.getFormattingOptions(), cts.token)) || [];\n        logService.trace(`[format][provideDocumentRangeFormattingEdits] (response)`, (_b = provider.extensionId) === null || _b === void 0 ? void 0 : _b.value, result);\n        return result;\n    };\n    const hasIntersectingEdit = (a, b) => {\n        if (!a.length || !b.length) {\n            return false;\n        }\n        // quick exit if the list of ranges are completely unrelated [O(n)]\n        const mergedA = a.reduce((acc, val) => { return Range.plusRange(acc, val.range); }, a[0].range);\n        if (!b.some(x => { return Range.intersectRanges(mergedA, x.range); })) {\n            return false;\n        }\n        // fallback to a complete check [O(n^2)]\n        for (const edit of a) {\n            for (const otherEdit of b) {\n                if (Range.intersectRanges(edit.range, otherEdit.range)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    const allEdits = [];\n    const rawEditsList = [];\n    try {\n        if (typeof provider.provideDocumentRangesFormattingEdits === 'function') {\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (request)`, (_a = provider.extensionId) === null || _a === void 0 ? void 0 : _a.value, ranges);\n            const result = (await provider.provideDocumentRangesFormattingEdits(model, ranges, model.getFormattingOptions(), cts.token)) || [];\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (response)`, (_b = provider.extensionId) === null || _b === void 0 ? void 0 : _b.value, result);\n            rawEditsList.push(result);\n        }\n        else {\n            for (const range of ranges) {\n                if (cts.token.isCancellationRequested) {\n                    return true;\n                }\n                rawEditsList.push(await computeEdits(range));\n            }\n            for (let i = 0; i < ranges.length; ++i) {\n                for (let j = i + 1; j < ranges.length; ++j) {\n                    if (cts.token.isCancellationRequested) {\n                        return true;\n                    }\n                    if (hasIntersectingEdit(rawEditsList[i], rawEditsList[j])) {\n                        // Merge ranges i and j into a single range, recompute the associated edits\n                        const mergedRange = Range.plusRange(ranges[i], ranges[j]);\n                        const edits = await computeEdits(mergedRange);\n                        ranges.splice(j, 1);\n                        ranges.splice(i, 1);\n                        ranges.push(mergedRange);\n                        rawEditsList.splice(j, 1);\n                        rawEditsList.splice(i, 1);\n                        rawEditsList.push(edits);\n                        // Restart scanning\n                        i = 0;\n                        j = 0;\n                    }\n                }\n            }\n        }\n        for (const rawEdits of rawEditsList) {\n            if (cts.token.isCancellationRequested) {\n                return true;\n            }\n            const minimalEdits = await workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            if (minimalEdits) {\n                allEdits.push(...minimalEdits);\n            }\n        }\n    }\n    finally {\n        cts.dispose();\n    }\n    if (allEdits.length === 0) {\n        return false;\n    }\n    if (isCodeEditor(editorOrModel)) {\n        // use editor to apply edits\n        FormattingEdit.execute(editorOrModel, allEdits, true);\n        editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\n    }\n    else {\n        // use model to apply edits\n        const [{ range }] = allEdits;\n        const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n        model.pushEditOperations([initialSelection], allEdits.map(edit => {\n            return {\n                text: edit.text,\n                range: Range.lift(edit.range),\n                forceMoveMarkers: true\n            };\n        }), undoEdits => {\n            for (const { range } of undoEdits) {\n                if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                    return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                }\n            }\n            return null;\n        });\n    }\n    accessibleNotificationService.notify(\"format\" /* AccessibleNotificationEvent.Format */, userGesture);\n    return true;\n}\nexport async function formatDocumentWithSelectedProvider(accessor, editorOrModel, mode, progress, token, userGesture) {\n    const instaService = accessor.get(IInstantiationService);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n    const provider = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\n    const selected = await FormattingConflicts.select(provider, model, mode);\n    if (selected) {\n        progress.report(selected);\n        await instaService.invokeFunction(formatDocumentWithProvider, selected, editorOrModel, mode, token, userGesture);\n    }\n}\nexport async function formatDocumentWithProvider(accessor, provider, editorOrModel, mode, token, userGesture) {\n    const workerService = accessor.get(IEditorWorkerService);\n    const accessibleNotificationService = accessor.get(IAccessibleNotificationService);\n    let model;\n    let cts;\n    if (isCodeEditor(editorOrModel)) {\n        model = editorOrModel.getModel();\n        cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\n    }\n    else {\n        model = editorOrModel;\n        cts = new TextModelCancellationTokenSource(editorOrModel, token);\n    }\n    let edits;\n    try {\n        const rawEdits = await provider.provideDocumentFormattingEdits(model, model.getFormattingOptions(), cts.token);\n        edits = await workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n        if (cts.token.isCancellationRequested) {\n            return true;\n        }\n    }\n    finally {\n        cts.dispose();\n    }\n    if (!edits || edits.length === 0) {\n        return false;\n    }\n    if (isCodeEditor(editorOrModel)) {\n        // use editor to apply edits\n        FormattingEdit.execute(editorOrModel, edits, mode !== 2 /* FormattingMode.Silent */);\n        if (mode !== 2 /* FormattingMode.Silent */) {\n            editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\n        }\n    }\n    else {\n        // use model to apply edits\n        const [{ range }] = edits;\n        const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n        model.pushEditOperations([initialSelection], edits.map(edit => {\n            return {\n                text: edit.text,\n                range: Range.lift(edit.range),\n                forceMoveMarkers: true\n            };\n        }), undoEdits => {\n            for (const { range } of undoEdits) {\n                if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                    return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                }\n            }\n            return null;\n        });\n    }\n    accessibleNotificationService.notify(\"format\" /* AccessibleNotificationEvent.Format */, userGesture);\n    return true;\n}\nexport async function getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, model, range, options, token) {\n    const providers = languageFeaturesService.documentRangeFormattingEditProvider.ordered(model);\n    for (const provider of providers) {\n        const rawEdits = await Promise.resolve(provider.provideDocumentRangeFormattingEdits(model, range, options, token)).catch(onUnexpectedExternalError);\n        if (isNonEmptyArray(rawEdits)) {\n            return await workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n        }\n    }\n    return undefined;\n}\nexport async function getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, model, options, token) {\n    const providers = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\n    for (const provider of providers) {\n        const rawEdits = await Promise.resolve(provider.provideDocumentFormattingEdits(model, options, token)).catch(onUnexpectedExternalError);\n        if (isNonEmptyArray(rawEdits)) {\n            return await workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n        }\n    }\n    return undefined;\n}\nexport function getOnTypeFormattingEdits(workerService, languageFeaturesService, model, position, ch, options, token) {\n    const providers = languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n    if (providers.length === 0) {\n        return Promise.resolve(undefined);\n    }\n    if (providers[0].autoFormatTriggerCharacters.indexOf(ch) < 0) {\n        return Promise.resolve(undefined);\n    }\n    return Promise.resolve(providers[0].provideOnTypeFormattingEdits(model, position, ch, options, token)).catch(onUnexpectedExternalError).then(edits => {\n        return workerService.computeMoreMinimalEdits(model.uri, edits);\n    });\n}\nCommandsRegistry.registerCommand('_executeFormatRangeProvider', async function (accessor, ...args) {\n    const [resource, range, options] = args;\n    assertType(URI.isUri(resource));\n    assertType(Range.isIRange(range));\n    const resolverService = accessor.get(ITextModelService);\n    const workerService = accessor.get(IEditorWorkerService);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const reference = await resolverService.createModelReference(resource);\n    try {\n        return getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, Range.lift(range), options, CancellationToken.None);\n    }\n    finally {\n        reference.dispose();\n    }\n});\nCommandsRegistry.registerCommand('_executeFormatDocumentProvider', async function (accessor, ...args) {\n    const [resource, options] = args;\n    assertType(URI.isUri(resource));\n    const resolverService = accessor.get(ITextModelService);\n    const workerService = accessor.get(IEditorWorkerService);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const reference = await resolverService.createModelReference(resource);\n    try {\n        return getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, options, CancellationToken.None);\n    }\n    finally {\n        reference.dispose();\n    }\n});\nCommandsRegistry.registerCommand('_executeFormatOnTypeProvider', async function (accessor, ...args) {\n    const [resource, position, ch, options] = args;\n    assertType(URI.isUri(resource));\n    assertType(Position.isIPosition(position));\n    assertType(typeof ch === 'string');\n    const resolverService = accessor.get(ITextModelService);\n    const workerService = accessor.get(IEditorWorkerService);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const reference = await resolverService.createModelReference(resource);\n    try {\n        return getOnTypeFormattingEdits(workerService, languageFeaturesService, reference.object.textEditorModel, Position.lift(position), ch, options, CancellationToken.None);\n    }\n    finally {\n        reference.dispose();\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorOptions } from './common/config/editorOptions.js';\nimport { createMonacoBaseAPI } from './common/services/editorBaseApi.js';\nimport { createMonacoEditorAPI } from './standalone/browser/standaloneEditor.js';\nimport { createMonacoLanguagesAPI } from './standalone/browser/standaloneLanguages.js';\nimport { FormattingConflicts } from './contrib/format/browser/format.js';\n// Set defaults for standalone editor\nEditorOptions.wrappingIndent.defaultValue = 0 /* WrappingIndent.None */;\nEditorOptions.glyphMargin.defaultValue = false;\nEditorOptions.autoIndent.defaultValue = 3 /* EditorAutoIndentStrategy.Advanced */;\nEditorOptions.overviewRulerLanes.defaultValue = 2;\n// We need to register a formatter selector which simply picks the first available formatter.\n// See https://github.com/microsoft/monaco-editor/issues/2327\nFormattingConflicts.setFormatterSelector((formatter, document, mode) => Promise.resolve(formatter[0]));\nconst api = createMonacoBaseAPI();\napi.editor = createMonacoEditorAPI();\napi.languages = createMonacoLanguagesAPI();\nexport const CancellationTokenSource = api.CancellationTokenSource;\nexport const Emitter = api.Emitter;\nexport const KeyCode = api.KeyCode;\nexport const KeyMod = api.KeyMod;\nexport const Position = api.Position;\nexport const Range = api.Range;\nexport const Selection = api.Selection;\nexport const SelectionDirection = api.SelectionDirection;\nexport const MarkerSeverity = api.MarkerSeverity;\nexport const MarkerTag = api.MarkerTag;\nexport const Uri = api.Uri;\nexport const Token = api.Token;\nexport const editor = api.editor;\nexport const languages = api.languages;\nconst monacoEnvironment = globalThis.MonacoEnvironment;\nif ((monacoEnvironment === null || monacoEnvironment === void 0 ? void 0 : monacoEnvironment.globalAPI) || (typeof define === 'function' && define.amd)) {\n    globalThis.monaco = api;\n}\nif (typeof globalThis.require !== 'undefined' && typeof globalThis.require.config === 'function') {\n    globalThis.require.config({\n        ignoreDuplicateModules: [\n            'vscode-languageserver-types',\n            'vscode-languageserver-types/main',\n            'vscode-languageserver-textdocument',\n            'vscode-languageserver-textdocument/main',\n            'vscode-nls',\n            'vscode-nls/vscode-nls',\n            'jsonc-parser',\n            'jsonc-parser/main',\n            'vscode-uri',\n            'vscode-uri/index',\n            'vs/basic-languages/typescript/typescript'\n        ]\n    });\n}\n"],
  "mappings": "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;AAClC,EAAAA,SAAQA,SAAQ,QAAQ,IAAI,EAAE,IAAI;AAClC,EAAAA,SAAQA,SAAQ,QAAQ,IAAI,EAAE,IAAI;AAClC,EAAAA,SAAQA,SAAQ,QAAQ,IAAI,EAAE,IAAI;AAClC,EAAAA,SAAQA,SAAQ,QAAQ,IAAI,EAAE,IAAI;AAClC,EAAAA,SAAQA,SAAQ,QAAQ,IAAI,EAAE,IAAI;AAClC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,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;AAAA,EAOzB,WAAW,QAAQ,aAAa,CAAC;AAAA,EACjC,WAAW,QAAQ,WAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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",
  "names": ["AccessibilitySupport", "CodeActionTriggerType", "CompletionItemInsertTextRule", "CompletionItemKind", "CompletionItemTag", "CompletionTriggerKind", "ContentWidgetPositionPreference", "CursorChangeReason", "DefaultEndOfLine", "DocumentHighlightKind", "EditorAutoIndentStrategy", "EditorOption", "EndOfLinePreference", "EndOfLineSequence", "GlyphMarginLane", "IndentAction", "InjectedTextCursorStops", "InlayHintKind", "InlineCompletionTriggerKind", "KeyCode", "MarkerSeverity", "MarkerTag", "MinimapPosition", "MouseTargetType", "OverlayWidgetPositionPreference", "OverviewRulerLane", "PositionAffinity", "RenderLineNumbersType", "RenderMinimap", "ScrollType", "ScrollbarVisibility", "SelectionDirection", "ShowAiIconMode", "SignatureHelpTriggerKind", "SymbolKind", "SymbolTag", "TextEditorCursorBlinkingStyle", "TextEditorCursorStyle", "TrackedRangeStickiness", "WrappingIndent", "MarkerSeverity", "createProxyObject", "monacoEnvironment", "range", "range", "codePoint", "isBasicASCII", "r", "c", "timeout", "range", "key", "timeout", "s1", "s2", "timeout", "i", "range", "score", "timeout", "range", "score", "LineSequence", "range", "timeout", "LineSequence", "range", "match", "range", "match", "range", "m", "EditorWorkerService", "range", "c", "word", "range", "proxyMethodRequest", "sanitize", "__decorate", "__param", "MonarchTokenizer", "rule", "enteringEmbeddedLanguage", "embeddedLanguageData", "sanitize", "ttPolicy", "isBasicASCII", "__decorate", "__param", "AbstractCodeEditorService", "editor", "__decorate", "__param", "StandaloneCodeEditorService", "editor", "__decorate", "__param", "StandaloneLayoutService", "EditorScopedLayoutService", "__decorate", "__param", "UndoRedoService", "strResource", "UndoChoice", "__decorate", "__param", "SemanticTokensProviderStyling", "__decorate", "__param", "SemanticTokensStylingService", "match", "basename", "pattern", "parse", "resultExpression", "withBasenames", "allPaths", "basenames", "patterns", "score", "score", "entry", "equals", "log", "i", "InspectTokensNLS", "GoToLineNLS", "QuickHelpNLS", "QuickCommandNLS", "QuickOutlineNLS", "StandaloneCodeEditorNLS", "ToggleHighContrastNLS", "StandaloneServicesNLS", "LayoutAnchorMode", "Range", "__decorate", "__param", "ContextViewService", "parse", "Direction", "actions", "EventType", "__decorate", "__param", "ContextMenuService", "ContextMenuMenuDelegate", "EditorOpenSource", "__decorate", "__param", "CommandOpener", "EditorOpener", "OpenerService", "__decorate", "__param", "MarkerDecorationsService", "__decorate", "__param", "ModelService", "editor", "equals", "model", "DefaultQuickAccessFilterValue", "Extensions", "QuickInputHideReason", "ItemActivation", "__decorate", "__param", "QuickAccessController", "Extensions", "value", "EventType", "$", "range", "__decorate", "match", "$", "EventType", "__decorate", "$", "_a", "index", "QuickInputListFocus", "e", "match", "$", "activeItem", "quickInputTitleBackground", "quickInputBackground", "quickInputForeground", "widgetBorder", "widgetShadow", "__decorate", "__param", "QuickInputService", "options", "__decorate", "__param", "EditorScopedQuickInputService", "editor", "StandaloneQuickInputService", "editor", "match", "Extensions", "editorForeground", "editorBackground", "__decorate", "__param", "AccessibilityService", "__decorate", "__param", "MenuService", "PersistedMenuHideState", "__decorate", "__param", "MenuInfo", "MenuImpl", "hide", "__decorate", "__param", "BrowserClipboardService", "__decorate", "__param", "ContextKeyService", "data", "__decorate", "__param", "StandaloneTextModelService", "StandaloneCommandService", "StandaloneKeybindingService", "__decorate", "__param", "StandaloneResourceConfigurationService", "__decorate", "__param", "StandaloneResourcePropertiesService", "StandaloneBulkEditService", "edits", "basename", "StandaloneContextViewService", "StandaloneContextMenuService", "StandaloneServices", "editorFeatures", "h", "editor", "d", "store", "reader", "__decorate", "__param", "AccessibleDiffViewer", "ViewModel", "tx", "__decorate", "__param", "modifiedRange", "LineType", "range", "View", "isBasicASCII", "range", "editor", "layout", "reader", "m", "provider", "result", "group", "child", "__decorate", "__param", "HideUnchangedRegionsFeature", "reader", "editor", "e", "range", "OutlineSource", "__decorate", "__param", "__decorate", "__param", "WorkerBasedDocumentDiffProvider", "__decorate", "__param", "DiffProviderFactoryService", "__decorate", "__param", "DiffEditorViewModel", "r", "range", "range", "ttPolicy", "editor", "isBasicASCII", "__decorate", "__param", "ViewZoneManager", "marginDomNode", "c", "editor", "__decorate", "__param", "OverviewRulerPart", "reader", "editor", "range", "__decorate", "__param", "DiffEditorEditors", "editor", "__decorate", "__param", "DiffEditorWidget", "_a", "reader", "m", "editor", "tx", "m", "__decorate", "__param", "StandaloneCodeEditor", "StandaloneEditor", "__decorate", "__param", "StandaloneDiffEditor2", "__decorate", "__param", "__decorate", "__param", "DiffEditorItemTemplate", "h", "isFocused", "editor", "h", "obj", "__decorate", "__param", "MultiDiffEditorWidgetImpl", "isFocused", "__decorate", "__param", "MultiDiffEditorWidget", "editor", "accessor", "args", "createWebWorker", "MinimapPosition", "OverviewRulerLane", "GlyphMarginLane", "matches", "isThenable", "create", "languageDef", "range", "model", "document", "range", "document", "CancellationTokenSource", "Emitter", "KeyCode", "KeyMod", "Position", "Range", "Selection", "SelectionDirection", "MarkerSeverity", "MarkerTag", "Token"]
}
