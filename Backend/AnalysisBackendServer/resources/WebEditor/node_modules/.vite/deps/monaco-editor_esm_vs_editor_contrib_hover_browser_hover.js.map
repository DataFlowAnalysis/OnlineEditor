{
  "version": 3,
  "sources": ["../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js", "../../monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js", "../../monaco-editor/esm/vs/editor/contrib/zoneWidget/browser/zoneWidget.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesController.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/symbolNavigation.js", "../../monaco-editor/esm/vs/editor/contrib/message/browser/messageController.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToCommands.js", "../../monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/hoverOperation.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/resizableContentWidget.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/contentHover.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/marginHover.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/getHover.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/markdownHoverParticipant.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/common/types.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionKeybindingResolver.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js", "../../monaco-editor/esm/vs/platform/actionWidget/browser/actionWidget.js", "../../monaco-editor/esm/vs/platform/actionWidget/browser/actionList.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionController.js", "../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js", "../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js", "../../monaco-editor/esm/vs/platform/severityIcon/browser/severityIcon.js", "../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/markerHoverParticipant.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/hover.js"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar GotoDefinitionAtPositionEditorContribution_1;\r\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\r\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\r\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\r\nimport './goToDefinitionAtPosition.css';\r\nimport { EditorState } from '../../../editorState/browser/editorState.js';\r\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../../common/core/range.js';\r\nimport { ILanguageService } from '../../../../common/languages/language.js';\r\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\r\nimport { ClickLinkGesture } from './clickLinkGesture.js';\r\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\r\nimport * as nls from '../../../../../nls.js';\r\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\r\nimport { DefinitionAction } from '../goToCommands.js';\r\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\r\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\r\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\r\nlet GotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = class GotoDefinitionAtPositionEditorContribution {\r\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\r\n        this.textModelResolverService = textModelResolverService;\r\n        this.languageService = languageService;\r\n        this.languageFeaturesService = languageFeaturesService;\r\n        this.toUnhook = new DisposableStore();\r\n        this.toUnhookForKeyboard = new DisposableStore();\r\n        this.currentWordAtPosition = null;\r\n        this.previousPromise = null;\r\n        this.editor = editor;\r\n        this.linkDecorations = this.editor.createDecorationsCollection();\r\n        const linkGesture = new ClickLinkGesture(editor);\r\n        this.toUnhook.add(linkGesture);\r\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\r\n            this.startFindDefinitionFromMouse(mouseEvent, keyboardEvent !== null && keyboardEvent !== void 0 ? keyboardEvent : undefined);\r\n        }));\r\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\r\n            if (this.isEnabled(mouseEvent)) {\r\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier)\r\n                    .catch((error) => {\r\n                    onUnexpectedError(error);\r\n                })\r\n                    .finally(() => {\r\n                    this.removeLinkDecorations();\r\n                });\r\n            }\r\n        }));\r\n        this.toUnhook.add(linkGesture.onCancel(() => {\r\n            this.removeLinkDecorations();\r\n            this.currentWordAtPosition = null;\r\n        }));\r\n    }\r\n    static get(editor) {\r\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution_1.ID);\r\n    }\r\n    async startFindDefinitionFromCursor(position) {\r\n        // For issue: https://github.com/microsoft/vscode/issues/46257\r\n        // equivalent to mouse move with meta/ctrl key\r\n        // First find the definition and add decorations\r\n        // to the editor to be shown with the content hover widget\r\n        await this.startFindDefinition(position);\r\n        // Add listeners for editor cursor move and key down events\r\n        // Dismiss the \"extended\" editor decorations when the user hides\r\n        // the hover widget. There is no event for the widget itself so these\r\n        // serve as a best effort. After removing the link decorations, the hover\r\n        // widget is clean and will only show declarations per next request.\r\n        this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\r\n            this.currentWordAtPosition = null;\r\n            this.removeLinkDecorations();\r\n            this.toUnhookForKeyboard.clear();\r\n        }));\r\n        this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\r\n            if (e) {\r\n                this.currentWordAtPosition = null;\r\n                this.removeLinkDecorations();\r\n                this.toUnhookForKeyboard.clear();\r\n            }\r\n        }));\r\n    }\r\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\r\n        // check if we are active and on a content widget\r\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\r\n            return;\r\n        }\r\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\r\n            this.currentWordAtPosition = null;\r\n            this.removeLinkDecorations();\r\n            return;\r\n        }\r\n        const position = mouseEvent.target.position;\r\n        this.startFindDefinition(position);\r\n    }\r\n    async startFindDefinition(position) {\r\n        var _a;\r\n        // Dispose listeners for updating decorations when using keyboard to show definition hover\r\n        this.toUnhookForKeyboard.clear();\r\n        // Find word at mouse position\r\n        const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\r\n        if (!word) {\r\n            this.currentWordAtPosition = null;\r\n            this.removeLinkDecorations();\r\n            return;\r\n        }\r\n        // Return early if word at position is still the same\r\n        if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\r\n            return;\r\n        }\r\n        this.currentWordAtPosition = word;\r\n        // Find definition and decorate word if found\r\n        const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\r\n        if (this.previousPromise) {\r\n            this.previousPromise.cancel();\r\n            this.previousPromise = null;\r\n        }\r\n        this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\r\n        let results;\r\n        try {\r\n            results = await this.previousPromise;\r\n        }\r\n        catch (error) {\r\n            onUnexpectedError(error);\r\n            return;\r\n        }\r\n        if (!results || !results.length || !state.validate(this.editor)) {\r\n            this.removeLinkDecorations();\r\n            return;\r\n        }\r\n        const linkRange = results[0].originSelectionRange\r\n            ? Range.lift(results[0].originSelectionRange)\r\n            : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\r\n        // Multiple results\r\n        if (results.length > 1) {\r\n            let combinedRange = linkRange;\r\n            for (const { originSelectionRange } of results) {\r\n                if (originSelectionRange) {\r\n                    combinedRange = Range.plusRange(combinedRange, originSelectionRange);\r\n                }\r\n            }\r\n            this.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\r\n        }\r\n        else {\r\n            // Single result\r\n            const result = results[0];\r\n            if (!result.uri) {\r\n                return;\r\n            }\r\n            this.textModelResolverService.createModelReference(result.uri).then(ref => {\r\n                if (!ref.object || !ref.object.textEditorModel) {\r\n                    ref.dispose();\r\n                    return;\r\n                }\r\n                const { object: { textEditorModel } } = ref;\r\n                const { startLineNumber } = result.range;\r\n                if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\r\n                    // invalid range\r\n                    ref.dispose();\r\n                    return;\r\n                }\r\n                const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\r\n                const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\r\n                this.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\r\n                ref.dispose();\r\n            });\r\n        }\r\n    }\r\n    getPreviewValue(textEditorModel, startLineNumber, result) {\r\n        let rangeToUse = result.range;\r\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\r\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES) {\r\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\r\n        }\r\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\r\n        return previewValue;\r\n    }\r\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\r\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\r\n        let minIndent = startIndent;\r\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\r\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\r\n            minIndent = Math.min(minIndent, endIndent);\r\n        }\r\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\r\n        return previewValue;\r\n    }\r\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\r\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\r\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES);\r\n        let endLineNumber = startLineNumber + 1;\r\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\r\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\r\n            if (startIndent === endIndent) {\r\n                break;\r\n            }\r\n        }\r\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\r\n    }\r\n    addDecoration(range, hoverMessage) {\r\n        const newDecorations = {\r\n            range: range,\r\n            options: {\r\n                description: 'goto-definition-link',\r\n                inlineClassName: 'goto-definition-link',\r\n                hoverMessage\r\n            }\r\n        };\r\n        this.linkDecorations.set([newDecorations]);\r\n    }\r\n    removeLinkDecorations() {\r\n        this.linkDecorations.clear();\r\n    }\r\n    isEnabled(mouseEvent, withKey) {\r\n        var _a;\r\n        return this.editor.hasModel()\r\n            && mouseEvent.isLeftClick\r\n            && mouseEvent.isNoneOrSingleMouseDown\r\n            && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */\r\n            && !(((_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options) instanceof ModelDecorationInjectedTextOptions)\r\n            && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false))\r\n            && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\r\n    }\r\n    findDefinition(position, token) {\r\n        const model = this.editor.getModel();\r\n        if (!model) {\r\n            return Promise.resolve(null);\r\n        }\r\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\r\n    }\r\n    gotoDefinition(position, openToSide) {\r\n        this.editor.setPosition(position);\r\n        return this.editor.invokeWithinContext((accessor) => {\r\n            const canPeek = !openToSide && this.editor.getOption(87 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\r\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\r\n            return action.run(accessor);\r\n        });\r\n    }\r\n    isInPeekEditor(accessor) {\r\n        const contextKeyService = accessor.get(IContextKeyService);\r\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\r\n    }\r\n    dispose() {\r\n        this.toUnhook.dispose();\r\n        this.toUnhookForKeyboard.dispose();\r\n    }\r\n};\r\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\r\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\r\nGotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = __decorate([\r\n    __param(1, ITextModelService),\r\n    __param(2, ILanguageService),\r\n    __param(3, ILanguageFeaturesService)\r\n], GotoDefinitionAtPositionEditorContribution);\r\nexport { GotoDefinitionAtPositionEditorContribution };\r\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../../../base/common/platform.js';\r\nfunction hasModifier(e, modifier) {\r\n    return !!e[modifier];\r\n}\r\n/**\r\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\r\n */\r\nexport class ClickLinkMouseEvent {\r\n    constructor(source, opts) {\r\n        this.target = source.target;\r\n        this.isLeftClick = source.event.leftButton;\r\n        this.isMiddleClick = source.event.middleButton;\r\n        this.isRightClick = source.event.rightButton;\r\n        this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\r\n        this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\r\n        this.isNoneOrSingleMouseDown = (source.event.detail <= 1);\r\n    }\r\n}\r\n/**\r\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\r\n */\r\nexport class ClickLinkKeyboardEvent {\r\n    constructor(source, opts) {\r\n        this.keyCodeIsTriggerKey = (source.keyCode === opts.triggerKey);\r\n        this.keyCodeIsSideBySideKey = (source.keyCode === opts.triggerSideBySideKey);\r\n        this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\r\n    }\r\n}\r\nexport class ClickLinkOptions {\r\n    constructor(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\r\n        this.triggerKey = triggerKey;\r\n        this.triggerModifier = triggerModifier;\r\n        this.triggerSideBySideKey = triggerSideBySideKey;\r\n        this.triggerSideBySideModifier = triggerSideBySideModifier;\r\n    }\r\n    equals(other) {\r\n        return (this.triggerKey === other.triggerKey\r\n            && this.triggerModifier === other.triggerModifier\r\n            && this.triggerSideBySideKey === other.triggerSideBySideKey\r\n            && this.triggerSideBySideModifier === other.triggerSideBySideModifier);\r\n    }\r\n}\r\nfunction createOptions(multiCursorModifier) {\r\n    if (multiCursorModifier === 'altKey') {\r\n        if (platform.isMacintosh) {\r\n            return new ClickLinkOptions(57 /* KeyCode.Meta */, 'metaKey', 6 /* KeyCode.Alt */, 'altKey');\r\n        }\r\n        return new ClickLinkOptions(5 /* KeyCode.Ctrl */, 'ctrlKey', 6 /* KeyCode.Alt */, 'altKey');\r\n    }\r\n    if (platform.isMacintosh) {\r\n        return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 57 /* KeyCode.Meta */, 'metaKey');\r\n    }\r\n    return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 5 /* KeyCode.Ctrl */, 'ctrlKey');\r\n}\r\nexport class ClickLinkGesture extends Disposable {\r\n    constructor(editor, opts) {\r\n        var _a;\r\n        super();\r\n        this._onMouseMoveOrRelevantKeyDown = this._register(new Emitter());\r\n        this.onMouseMoveOrRelevantKeyDown = this._onMouseMoveOrRelevantKeyDown.event;\r\n        this._onExecute = this._register(new Emitter());\r\n        this.onExecute = this._onExecute.event;\r\n        this._onCancel = this._register(new Emitter());\r\n        this.onCancel = this._onCancel.event;\r\n        this._editor = editor;\r\n        this._extractLineNumberFromMouseEvent = (_a = opts === null || opts === void 0 ? void 0 : opts.extractLineNumberFromMouseEvent) !== null && _a !== void 0 ? _a : ((e) => e.target.position ? e.target.position.lineNumber : 0);\r\n        this._opts = createOptions(this._editor.getOption(77 /* EditorOption.multiCursorModifier */));\r\n        this._lastMouseMoveEvent = null;\r\n        this._hasTriggerKeyOnMouseDown = false;\r\n        this._lineNumberOnMouseDown = 0;\r\n        this._register(this._editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(77 /* EditorOption.multiCursorModifier */)) {\r\n                const newOpts = createOptions(this._editor.getOption(77 /* EditorOption.multiCursorModifier */));\r\n                if (this._opts.equals(newOpts)) {\r\n                    return;\r\n                }\r\n                this._opts = newOpts;\r\n                this._lastMouseMoveEvent = null;\r\n                this._hasTriggerKeyOnMouseDown = false;\r\n                this._lineNumberOnMouseDown = 0;\r\n                this._onCancel.fire();\r\n            }\r\n        }));\r\n        this._register(this._editor.onMouseMove((e) => this._onEditorMouseMove(new ClickLinkMouseEvent(e, this._opts))));\r\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(new ClickLinkMouseEvent(e, this._opts))));\r\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(new ClickLinkMouseEvent(e, this._opts))));\r\n        this._register(this._editor.onKeyDown((e) => this._onEditorKeyDown(new ClickLinkKeyboardEvent(e, this._opts))));\r\n        this._register(this._editor.onKeyUp((e) => this._onEditorKeyUp(new ClickLinkKeyboardEvent(e, this._opts))));\r\n        this._register(this._editor.onMouseDrag(() => this._resetHandler()));\r\n        this._register(this._editor.onDidChangeCursorSelection((e) => this._onDidChangeCursorSelection(e)));\r\n        this._register(this._editor.onDidChangeModel((e) => this._resetHandler()));\r\n        this._register(this._editor.onDidChangeModelContent(() => this._resetHandler()));\r\n        this._register(this._editor.onDidScrollChange((e) => {\r\n            if (e.scrollTopChanged || e.scrollLeftChanged) {\r\n                this._resetHandler();\r\n            }\r\n        }));\r\n    }\r\n    _onDidChangeCursorSelection(e) {\r\n        if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\r\n            this._resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/microsoft/vscode/issues/7827)\r\n        }\r\n    }\r\n    _onEditorMouseMove(mouseEvent) {\r\n        this._lastMouseMoveEvent = mouseEvent;\r\n        this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\r\n    }\r\n    _onEditorMouseDown(mouseEvent) {\r\n        // We need to record if we had the trigger key on mouse down because someone might select something in the editor\r\n        // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\r\n        // release the mouse button without wanting to do the navigation.\r\n        // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\r\n        this._hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\r\n        this._lineNumberOnMouseDown = this._extractLineNumberFromMouseEvent(mouseEvent);\r\n    }\r\n    _onEditorMouseUp(mouseEvent) {\r\n        const currentLineNumber = this._extractLineNumberFromMouseEvent(mouseEvent);\r\n        if (this._hasTriggerKeyOnMouseDown && this._lineNumberOnMouseDown && this._lineNumberOnMouseDown === currentLineNumber) {\r\n            this._onExecute.fire(mouseEvent);\r\n        }\r\n    }\r\n    _onEditorKeyDown(e) {\r\n        if (this._lastMouseMoveEvent\r\n            && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\r\n                || (e.keyCodeIsSideBySideKey && e.hasTriggerModifier) // User pressed Ctrl/Cmd+Alt (goto definition to the side)\r\n            )) {\r\n            this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent, e]);\r\n        }\r\n        else if (e.hasTriggerModifier) {\r\n            this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\r\n        }\r\n    }\r\n    _onEditorKeyUp(e) {\r\n        if (e.keyCodeIsTriggerKey) {\r\n            this._onCancel.fire();\r\n        }\r\n    }\r\n    _resetHandler() {\r\n        this._lastMouseMoveEvent = null;\r\n        this._hasTriggerKeyOnMouseDown = false;\r\n        this._onCancel.fire();\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { Action } from '../../../../base/common/actions.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { Color } from '../../../../base/common/color.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport * as objects from '../../../../base/common/objects.js';\r\nimport './media/peekViewWidget.css';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport { ZoneWidget } from '../../zoneWidget/browser/zoneWidget.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { activeContrastBorder, contrastBorder, editorForeground, editorInfoForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\r\nexport const IPeekViewService = createDecorator('IPeekViewService');\r\nregisterSingleton(IPeekViewService, class {\r\n    constructor() {\r\n        this._widgets = new Map();\r\n    }\r\n    addExclusiveWidget(editor, widget) {\r\n        const existing = this._widgets.get(editor);\r\n        if (existing) {\r\n            existing.listener.dispose();\r\n            existing.widget.dispose();\r\n        }\r\n        const remove = () => {\r\n            const data = this._widgets.get(editor);\r\n            if (data && data.widget === widget) {\r\n                data.listener.dispose();\r\n                this._widgets.delete(editor);\r\n            }\r\n        };\r\n        this._widgets.set(editor, { widget, listener: widget.onDidClose(remove) });\r\n    }\r\n}, 1 /* InstantiationType.Delayed */);\r\nexport var PeekContext;\r\n(function (PeekContext) {\r\n    PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true, nls.localize('inReferenceSearchEditor', \"Whether the current code editor is embedded inside peek\"));\r\n    PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\r\n})(PeekContext || (PeekContext = {}));\r\nlet PeekContextController = class PeekContextController {\r\n    constructor(editor, contextKeyService) {\r\n        if (editor instanceof EmbeddedCodeEditorWidget) {\r\n            PeekContext.inPeekEditor.bindTo(contextKeyService);\r\n        }\r\n    }\r\n    dispose() { }\r\n};\r\nPeekContextController.ID = 'editor.contrib.referenceController';\r\nPeekContextController = __decorate([\r\n    __param(1, IContextKeyService)\r\n], PeekContextController);\r\nregisterEditorContribution(PeekContextController.ID, PeekContextController, 0 /* EditorContributionInstantiation.Eager */); // eager because it needs to define a context key\r\nexport function getOuterEditor(accessor) {\r\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\r\n    if (editor instanceof EmbeddedCodeEditorWidget) {\r\n        return editor.getParentEditor();\r\n    }\r\n    return editor;\r\n}\r\nconst defaultOptions = {\r\n    headerBackgroundColor: Color.white,\r\n    primaryHeadingColor: Color.fromHex('#333333'),\r\n    secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\r\n};\r\nlet PeekViewWidget = class PeekViewWidget extends ZoneWidget {\r\n    constructor(editor, options, instantiationService) {\r\n        super(editor, options);\r\n        this.instantiationService = instantiationService;\r\n        this._onDidClose = new Emitter();\r\n        this.onDidClose = this._onDidClose.event;\r\n        objects.mixin(this.options, defaultOptions, false);\r\n    }\r\n    dispose() {\r\n        if (!this.disposed) {\r\n            this.disposed = true; // prevent consumers who dispose on onDidClose from looping\r\n            super.dispose();\r\n            this._onDidClose.fire(this);\r\n        }\r\n    }\r\n    style(styles) {\r\n        const options = this.options;\r\n        if (styles.headerBackgroundColor) {\r\n            options.headerBackgroundColor = styles.headerBackgroundColor;\r\n        }\r\n        if (styles.primaryHeadingColor) {\r\n            options.primaryHeadingColor = styles.primaryHeadingColor;\r\n        }\r\n        if (styles.secondaryHeadingColor) {\r\n            options.secondaryHeadingColor = styles.secondaryHeadingColor;\r\n        }\r\n        super.style(styles);\r\n    }\r\n    _applyStyles() {\r\n        super._applyStyles();\r\n        const options = this.options;\r\n        if (this._headElement && options.headerBackgroundColor) {\r\n            this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\r\n        }\r\n        if (this._primaryHeading && options.primaryHeadingColor) {\r\n            this._primaryHeading.style.color = options.primaryHeadingColor.toString();\r\n        }\r\n        if (this._secondaryHeading && options.secondaryHeadingColor) {\r\n            this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\r\n        }\r\n        if (this._bodyElement && options.frameColor) {\r\n            this._bodyElement.style.borderColor = options.frameColor.toString();\r\n        }\r\n    }\r\n    _fillContainer(container) {\r\n        this.setCssClass('peekview-widget');\r\n        this._headElement = dom.$('.head');\r\n        this._bodyElement = dom.$('.body');\r\n        this._fillHead(this._headElement);\r\n        this._fillBody(this._bodyElement);\r\n        container.appendChild(this._headElement);\r\n        container.appendChild(this._bodyElement);\r\n    }\r\n    _fillHead(container, noCloseAction) {\r\n        this._titleElement = dom.$('.peekview-title');\r\n        if (this.options.supportOnTitleClick) {\r\n            this._titleElement.classList.add('clickable');\r\n            dom.addStandardDisposableListener(this._titleElement, 'click', event => this._onTitleClick(event));\r\n        }\r\n        dom.append(this._headElement, this._titleElement);\r\n        this._fillTitleIcon(this._titleElement);\r\n        this._primaryHeading = dom.$('span.filename');\r\n        this._secondaryHeading = dom.$('span.dirname');\r\n        this._metaHeading = dom.$('span.meta');\r\n        dom.append(this._titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\r\n        const actionsContainer = dom.$('.peekview-actions');\r\n        dom.append(this._headElement, actionsContainer);\r\n        const actionBarOptions = this._getActionBarOptions();\r\n        this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\r\n        this._disposables.add(this._actionbarWidget);\r\n        if (!noCloseAction) {\r\n            this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), ThemeIcon.asClassName(Codicon.close), true, () => {\r\n                this.dispose();\r\n                return Promise.resolve();\r\n            }), { label: false, icon: true });\r\n        }\r\n    }\r\n    _fillTitleIcon(container) {\r\n    }\r\n    _getActionBarOptions() {\r\n        return {\r\n            actionViewItemProvider: createActionViewItem.bind(undefined, this.instantiationService),\r\n            orientation: 0 /* ActionsOrientation.HORIZONTAL */\r\n        };\r\n    }\r\n    _onTitleClick(event) {\r\n        // implement me if supportOnTitleClick option is set\r\n    }\r\n    setTitle(primaryHeading, secondaryHeading) {\r\n        if (this._primaryHeading && this._secondaryHeading) {\r\n            this._primaryHeading.innerText = primaryHeading;\r\n            this._primaryHeading.setAttribute('title', primaryHeading);\r\n            if (secondaryHeading) {\r\n                this._secondaryHeading.innerText = secondaryHeading;\r\n            }\r\n            else {\r\n                dom.clearNode(this._secondaryHeading);\r\n            }\r\n        }\r\n    }\r\n    setMetaTitle(value) {\r\n        if (this._metaHeading) {\r\n            if (value) {\r\n                this._metaHeading.innerText = value;\r\n                dom.show(this._metaHeading);\r\n            }\r\n            else {\r\n                dom.hide(this._metaHeading);\r\n            }\r\n        }\r\n    }\r\n    _doLayout(heightInPixel, widthInPixel) {\r\n        if (!this._isShowing && heightInPixel < 0) {\r\n            // Looks like the view zone got folded away!\r\n            this.dispose();\r\n            return;\r\n        }\r\n        const headHeight = Math.ceil(this.editor.getOption(66 /* EditorOption.lineHeight */) * 1.2);\r\n        const bodyHeight = Math.round(heightInPixel - (headHeight + 2 /* the border-top/bottom width*/));\r\n        this._doLayoutHead(headHeight, widthInPixel);\r\n        this._doLayoutBody(bodyHeight, widthInPixel);\r\n    }\r\n    _doLayoutHead(heightInPixel, widthInPixel) {\r\n        if (this._headElement) {\r\n            this._headElement.style.height = `${heightInPixel}px`;\r\n            this._headElement.style.lineHeight = this._headElement.style.height;\r\n        }\r\n    }\r\n    _doLayoutBody(heightInPixel, widthInPixel) {\r\n        if (this._bodyElement) {\r\n            this._bodyElement.style.height = `${heightInPixel}px`;\r\n        }\r\n    }\r\n};\r\nPeekViewWidget = __decorate([\r\n    __param(2, IInstantiationService)\r\n], PeekViewWidget);\r\nexport { PeekViewWidget };\r\nexport const peekViewTitleBackground = registerColor('peekViewTitle.background', { dark: '#252526', light: '#F3F3F3', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\r\nexport const peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', { dark: Color.white, light: Color.black, hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\r\nexport const peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', { dark: '#ccccccb3', light: '#616161', hcDark: '#FFFFFF99', hcLight: '#292929' }, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\r\nexport const peekViewBorder = registerColor('peekView.border', { dark: editorInfoForeground, light: editorInfoForeground, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\r\nexport const peekViewResultsBackground = registerColor('peekViewResult.background', { dark: '#252526', light: '#F3F3F3', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\r\nexport const peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', { dark: '#bbbbbb', light: '#646465', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\r\nexport const peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', { dark: Color.white, light: '#1E1E1E', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\r\nexport const peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', { dark: '#3399ff33', light: '#3399ff33', hcDark: null, hcLight: null }, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\r\nexport const peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', { dark: Color.white, light: '#6C6C6C', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\r\nexport const peekViewEditorBackground = registerColor('peekViewEditor.background', { dark: '#001F33', light: '#F2F8FC', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\r\nexport const peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hcDark: peekViewEditorBackground, hcLight: peekViewEditorBackground }, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\r\nexport const peekViewEditorStickyScrollBackground = registerColor('peekViewEditorStickyScroll.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hcDark: peekViewEditorBackground, hcLight: peekViewEditorBackground }, nls.localize('peekViewEditorStickScrollBackground', 'Background color of sticky scroll in the peek view editor.'));\r\nexport const peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', { dark: '#ea5c004d', light: '#ea5c004d', hcDark: null, hcLight: null }, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\r\nexport const peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', { dark: '#ff8f0099', light: '#f5d802de', hcDark: null, hcLight: null }, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\r\nexport const peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', { dark: null, light: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\r\nimport { Color, RGBA } from '../../../../base/common/color.js';\r\nimport { IdGenerator } from '../../../../base/common/idGenerator.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport * as objects from '../../../../base/common/objects.js';\r\nimport './zoneWidget.css';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nconst defaultColor = new Color(new RGBA(0, 122, 204));\r\nconst defaultOptions = {\r\n    showArrow: true,\r\n    showFrame: true,\r\n    className: '',\r\n    frameColor: defaultColor,\r\n    arrowColor: defaultColor,\r\n    keepEditorSelection: false\r\n};\r\nconst WIDGET_ID = 'vs.editor.contrib.zoneWidget';\r\nclass ViewZoneDelegate {\r\n    constructor(domNode, afterLineNumber, afterColumn, heightInLines, onDomNodeTop, onComputedHeight, showInHiddenAreas, ordinal) {\r\n        this.id = ''; // A valid zone id should be greater than 0\r\n        this.domNode = domNode;\r\n        this.afterLineNumber = afterLineNumber;\r\n        this.afterColumn = afterColumn;\r\n        this.heightInLines = heightInLines;\r\n        this.showInHiddenAreas = showInHiddenAreas;\r\n        this.ordinal = ordinal;\r\n        this._onDomNodeTop = onDomNodeTop;\r\n        this._onComputedHeight = onComputedHeight;\r\n    }\r\n    onDomNodeTop(top) {\r\n        this._onDomNodeTop(top);\r\n    }\r\n    onComputedHeight(height) {\r\n        this._onComputedHeight(height);\r\n    }\r\n}\r\nexport class OverlayWidgetDelegate {\r\n    constructor(id, domNode) {\r\n        this._id = id;\r\n        this._domNode = domNode;\r\n    }\r\n    getId() {\r\n        return this._id;\r\n    }\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    getPosition() {\r\n        return null;\r\n    }\r\n}\r\nclass Arrow {\r\n    constructor(_editor) {\r\n        this._editor = _editor;\r\n        this._ruleName = Arrow._IdGenerator.nextId();\r\n        this._decorations = this._editor.createDecorationsCollection();\r\n        this._color = null;\r\n        this._height = -1;\r\n    }\r\n    dispose() {\r\n        this.hide();\r\n        dom.removeCSSRulesContainingSelector(this._ruleName);\r\n    }\r\n    set color(value) {\r\n        if (this._color !== value) {\r\n            this._color = value;\r\n            this._updateStyle();\r\n        }\r\n    }\r\n    set height(value) {\r\n        if (this._height !== value) {\r\n            this._height = value;\r\n            this._updateStyle();\r\n        }\r\n    }\r\n    _updateStyle() {\r\n        dom.removeCSSRulesContainingSelector(this._ruleName);\r\n        dom.createCSSRule(`.monaco-editor ${this._ruleName}`, `border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `);\r\n    }\r\n    show(where) {\r\n        if (where.column === 1) {\r\n            // the arrow isn't pretty at column 1 and we need to push it out a little\r\n            where = { lineNumber: where.lineNumber, column: 2 };\r\n        }\r\n        this._decorations.set([{\r\n                range: Range.fromPositions(where),\r\n                options: {\r\n                    description: 'zone-widget-arrow',\r\n                    className: this._ruleName,\r\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\r\n                }\r\n            }]);\r\n    }\r\n    hide() {\r\n        this._decorations.clear();\r\n    }\r\n}\r\nArrow._IdGenerator = new IdGenerator('.arrow-decoration-');\r\nexport class ZoneWidget {\r\n    constructor(editor, options = {}) {\r\n        this._arrow = null;\r\n        this._overlayWidget = null;\r\n        this._resizeSash = null;\r\n        this._viewZone = null;\r\n        this._disposables = new DisposableStore();\r\n        this.container = null;\r\n        this._isShowing = false;\r\n        this.editor = editor;\r\n        this._positionMarkerId = this.editor.createDecorationsCollection();\r\n        this.options = objects.deepClone(options);\r\n        objects.mixin(this.options, defaultOptions, false);\r\n        this.domNode = document.createElement('div');\r\n        if (!this.options.isAccessible) {\r\n            this.domNode.setAttribute('aria-hidden', 'true');\r\n            this.domNode.setAttribute('role', 'presentation');\r\n        }\r\n        this._disposables.add(this.editor.onDidLayoutChange((info) => {\r\n            const width = this._getWidth(info);\r\n            this.domNode.style.width = width + 'px';\r\n            this.domNode.style.left = this._getLeft(info) + 'px';\r\n            this._onWidth(width);\r\n        }));\r\n    }\r\n    dispose() {\r\n        if (this._overlayWidget) {\r\n            this.editor.removeOverlayWidget(this._overlayWidget);\r\n            this._overlayWidget = null;\r\n        }\r\n        if (this._viewZone) {\r\n            this.editor.changeViewZones(accessor => {\r\n                if (this._viewZone) {\r\n                    accessor.removeZone(this._viewZone.id);\r\n                }\r\n                this._viewZone = null;\r\n            });\r\n        }\r\n        this._positionMarkerId.clear();\r\n        this._disposables.dispose();\r\n    }\r\n    create() {\r\n        this.domNode.classList.add('zone-widget');\r\n        if (this.options.className) {\r\n            this.domNode.classList.add(this.options.className);\r\n        }\r\n        this.container = document.createElement('div');\r\n        this.container.classList.add('zone-widget-container');\r\n        this.domNode.appendChild(this.container);\r\n        if (this.options.showArrow) {\r\n            this._arrow = new Arrow(this.editor);\r\n            this._disposables.add(this._arrow);\r\n        }\r\n        this._fillContainer(this.container);\r\n        this._initSash();\r\n        this._applyStyles();\r\n    }\r\n    style(styles) {\r\n        if (styles.frameColor) {\r\n            this.options.frameColor = styles.frameColor;\r\n        }\r\n        if (styles.arrowColor) {\r\n            this.options.arrowColor = styles.arrowColor;\r\n        }\r\n        this._applyStyles();\r\n    }\r\n    _applyStyles() {\r\n        if (this.container && this.options.frameColor) {\r\n            const frameColor = this.options.frameColor.toString();\r\n            this.container.style.borderTopColor = frameColor;\r\n            this.container.style.borderBottomColor = frameColor;\r\n        }\r\n        if (this._arrow && this.options.arrowColor) {\r\n            const arrowColor = this.options.arrowColor.toString();\r\n            this._arrow.color = arrowColor;\r\n        }\r\n    }\r\n    _getWidth(info) {\r\n        return info.width - info.minimap.minimapWidth - info.verticalScrollbarWidth;\r\n    }\r\n    _getLeft(info) {\r\n        // If minimap is to the left, we move beyond it\r\n        if (info.minimap.minimapWidth > 0 && info.minimap.minimapLeft === 0) {\r\n            return info.minimap.minimapWidth;\r\n        }\r\n        return 0;\r\n    }\r\n    _onViewZoneTop(top) {\r\n        this.domNode.style.top = top + 'px';\r\n    }\r\n    _onViewZoneHeight(height) {\r\n        var _a;\r\n        this.domNode.style.height = `${height}px`;\r\n        if (this.container) {\r\n            const containerHeight = height - this._decoratingElementsHeight();\r\n            this.container.style.height = `${containerHeight}px`;\r\n            const layoutInfo = this.editor.getLayoutInfo();\r\n            this._doLayout(containerHeight, this._getWidth(layoutInfo));\r\n        }\r\n        (_a = this._resizeSash) === null || _a === void 0 ? void 0 : _a.layout();\r\n    }\r\n    get position() {\r\n        const range = this._positionMarkerId.getRange(0);\r\n        if (!range) {\r\n            return undefined;\r\n        }\r\n        return range.getStartPosition();\r\n    }\r\n    show(rangeOrPos, heightInLines) {\r\n        const range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\r\n        this._isShowing = true;\r\n        this._showImpl(range, heightInLines);\r\n        this._isShowing = false;\r\n        this._positionMarkerId.set([{ range, options: ModelDecorationOptions.EMPTY }]);\r\n    }\r\n    hide() {\r\n        var _a;\r\n        if (this._viewZone) {\r\n            this.editor.changeViewZones(accessor => {\r\n                if (this._viewZone) {\r\n                    accessor.removeZone(this._viewZone.id);\r\n                }\r\n            });\r\n            this._viewZone = null;\r\n        }\r\n        if (this._overlayWidget) {\r\n            this.editor.removeOverlayWidget(this._overlayWidget);\r\n            this._overlayWidget = null;\r\n        }\r\n        (_a = this._arrow) === null || _a === void 0 ? void 0 : _a.hide();\r\n        this._positionMarkerId.clear();\r\n    }\r\n    _decoratingElementsHeight() {\r\n        const lineHeight = this.editor.getOption(66 /* EditorOption.lineHeight */);\r\n        let result = 0;\r\n        if (this.options.showArrow) {\r\n            const arrowHeight = Math.round(lineHeight / 3);\r\n            result += 2 * arrowHeight;\r\n        }\r\n        if (this.options.showFrame) {\r\n            const frameThickness = Math.round(lineHeight / 9);\r\n            result += 2 * frameThickness;\r\n        }\r\n        return result;\r\n    }\r\n    _showImpl(where, heightInLines) {\r\n        const position = where.getStartPosition();\r\n        const layoutInfo = this.editor.getLayoutInfo();\r\n        const width = this._getWidth(layoutInfo);\r\n        this.domNode.style.width = `${width}px`;\r\n        this.domNode.style.left = this._getLeft(layoutInfo) + 'px';\r\n        // Render the widget as zone (rendering) and widget (lifecycle)\r\n        const viewZoneDomNode = document.createElement('div');\r\n        viewZoneDomNode.style.overflow = 'hidden';\r\n        const lineHeight = this.editor.getOption(66 /* EditorOption.lineHeight */);\r\n        // adjust heightInLines to viewport\r\n        if (!this.options.allowUnlimitedHeight) {\r\n            const maxHeightInLines = Math.max(12, (this.editor.getLayoutInfo().height / lineHeight) * 0.8);\r\n            heightInLines = Math.min(heightInLines, maxHeightInLines);\r\n        }\r\n        let arrowHeight = 0;\r\n        let frameThickness = 0;\r\n        // Render the arrow one 1/3 of an editor line height\r\n        if (this._arrow && this.options.showArrow) {\r\n            arrowHeight = Math.round(lineHeight / 3);\r\n            this._arrow.height = arrowHeight;\r\n            this._arrow.show(position);\r\n        }\r\n        // Render the frame as 1/9 of an editor line height\r\n        if (this.options.showFrame) {\r\n            frameThickness = Math.round(lineHeight / 9);\r\n        }\r\n        // insert zone widget\r\n        this.editor.changeViewZones((accessor) => {\r\n            if (this._viewZone) {\r\n                accessor.removeZone(this._viewZone.id);\r\n            }\r\n            if (this._overlayWidget) {\r\n                this.editor.removeOverlayWidget(this._overlayWidget);\r\n                this._overlayWidget = null;\r\n            }\r\n            this.domNode.style.top = '-1000px';\r\n            this._viewZone = new ViewZoneDelegate(viewZoneDomNode, position.lineNumber, position.column, heightInLines, (top) => this._onViewZoneTop(top), (height) => this._onViewZoneHeight(height), this.options.showInHiddenAreas, this.options.ordinal);\r\n            this._viewZone.id = accessor.addZone(this._viewZone);\r\n            this._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + this._viewZone.id, this.domNode);\r\n            this.editor.addOverlayWidget(this._overlayWidget);\r\n        });\r\n        if (this.container && this.options.showFrame) {\r\n            const width = this.options.frameWidth ? this.options.frameWidth : frameThickness;\r\n            this.container.style.borderTopWidth = width + 'px';\r\n            this.container.style.borderBottomWidth = width + 'px';\r\n        }\r\n        const containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\r\n        if (this.container) {\r\n            this.container.style.top = arrowHeight + 'px';\r\n            this.container.style.height = containerHeight + 'px';\r\n            this.container.style.overflow = 'hidden';\r\n        }\r\n        this._doLayout(containerHeight, width);\r\n        if (!this.options.keepEditorSelection) {\r\n            this.editor.setSelection(where);\r\n        }\r\n        const model = this.editor.getModel();\r\n        if (model) {\r\n            const range = model.validateRange(new Range(where.startLineNumber, 1, where.endLineNumber + 1, 1));\r\n            this.revealRange(range, range.startLineNumber === model.getLineCount());\r\n        }\r\n    }\r\n    revealRange(range, isLastLine) {\r\n        if (isLastLine) {\r\n            this.editor.revealLineNearTop(range.endLineNumber, 0 /* ScrollType.Smooth */);\r\n        }\r\n        else {\r\n            this.editor.revealRange(range, 0 /* ScrollType.Smooth */);\r\n        }\r\n    }\r\n    setCssClass(className, classToReplace) {\r\n        if (!this.container) {\r\n            return;\r\n        }\r\n        if (classToReplace) {\r\n            this.container.classList.remove(classToReplace);\r\n        }\r\n        this.container.classList.add(className);\r\n    }\r\n    _onWidth(widthInPixel) {\r\n        // implement in subclass\r\n    }\r\n    _doLayout(heightInPixel, widthInPixel) {\r\n        // implement in subclass\r\n    }\r\n    _relayout(newHeightInLines) {\r\n        if (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\r\n            this.editor.changeViewZones(accessor => {\r\n                if (this._viewZone) {\r\n                    this._viewZone.heightInLines = newHeightInLines;\r\n                    accessor.layoutZone(this._viewZone.id);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    // --- sash\r\n    _initSash() {\r\n        if (this._resizeSash) {\r\n            return;\r\n        }\r\n        this._resizeSash = this._disposables.add(new Sash(this.domNode, this, { orientation: 1 /* Orientation.HORIZONTAL */ }));\r\n        if (!this.options.isResizeable) {\r\n            this._resizeSash.state = 0 /* SashState.Disabled */;\r\n        }\r\n        let data;\r\n        this._disposables.add(this._resizeSash.onDidStart((e) => {\r\n            if (this._viewZone) {\r\n                data = {\r\n                    startY: e.startY,\r\n                    heightInLines: this._viewZone.heightInLines,\r\n                };\r\n            }\r\n        }));\r\n        this._disposables.add(this._resizeSash.onDidEnd(() => {\r\n            data = undefined;\r\n        }));\r\n        this._disposables.add(this._resizeSash.onDidChange((evt) => {\r\n            if (data) {\r\n                const lineDelta = (evt.currentY - data.startY) / this.editor.getOption(66 /* EditorOption.lineHeight */);\r\n                const roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\r\n                const newHeightInLines = data.heightInLines + roundedLineDelta;\r\n                if (newHeightInLines > 5 && newHeightInLines < 35) {\r\n                    this._relayout(newHeightInLines);\r\n                }\r\n            }\r\n        }));\r\n    }\r\n    getHorizontalSashLeft() {\r\n        return 0;\r\n    }\r\n    getHorizontalSashTop() {\r\n        return (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - (this._decoratingElementsHeight() / 2);\r\n    }\r\n    getHorizontalSashWidth() {\r\n        const layoutInfo = this.editor.getLayoutInfo();\r\n        return layoutInfo.width - layoutInfo.minimap.minimapWidth;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\r\nimport { dispose } from '../../../../base/common/lifecycle.js';\r\nimport { ResourceMap } from '../../../../base/common/map.js';\r\nimport { basename, extUri } from '../../../../base/common/resources.js';\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { localize } from '../../../../nls.js';\r\nexport class OneReference {\r\n    constructor(isProviderFirst, parent, link, _rangeCallback) {\r\n        this.isProviderFirst = isProviderFirst;\r\n        this.parent = parent;\r\n        this.link = link;\r\n        this._rangeCallback = _rangeCallback;\r\n        this.id = defaultGenerator.nextId();\r\n    }\r\n    get uri() {\r\n        return this.link.uri;\r\n    }\r\n    get range() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\r\n    }\r\n    set range(value) {\r\n        this._range = value;\r\n        this._rangeCallback(this);\r\n    }\r\n    get ariaMessage() {\r\n        var _a;\r\n        const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\r\n        if (!preview) {\r\n            return localize('aria.oneReference', \"in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\r\n        }\r\n        else {\r\n            return localize({ key: 'aria.oneReference.preview', comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code'] }, \"{0} in {1} on line {2} at column {3}\", preview.value, basename(this.uri), this.range.startLineNumber, this.range.startColumn);\r\n        }\r\n    }\r\n}\r\nexport class FilePreview {\r\n    constructor(_modelReference) {\r\n        this._modelReference = _modelReference;\r\n    }\r\n    dispose() {\r\n        this._modelReference.dispose();\r\n    }\r\n    preview(range, n = 8) {\r\n        const model = this._modelReference.object.textEditorModel;\r\n        if (!model) {\r\n            return undefined;\r\n        }\r\n        const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\r\n        const word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\r\n        const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\r\n        const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\r\n        const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\r\n        const inside = model.getValueInRange(range);\r\n        const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\r\n        return {\r\n            value: before + inside + after,\r\n            highlight: { start: before.length, end: before.length + inside.length }\r\n        };\r\n    }\r\n}\r\nexport class FileReferences {\r\n    constructor(parent, uri) {\r\n        this.parent = parent;\r\n        this.uri = uri;\r\n        this.children = [];\r\n        this._previews = new ResourceMap();\r\n    }\r\n    dispose() {\r\n        dispose(this._previews.values());\r\n        this._previews.clear();\r\n    }\r\n    getPreview(child) {\r\n        return this._previews.get(child.uri);\r\n    }\r\n    get ariaMessage() {\r\n        const len = this.children.length;\r\n        if (len === 1) {\r\n            return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\r\n        }\r\n        else {\r\n            return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\r\n        }\r\n    }\r\n    async resolve(textModelResolverService) {\r\n        if (this._previews.size !== 0) {\r\n            return this;\r\n        }\r\n        for (const child of this.children) {\r\n            if (this._previews.has(child.uri)) {\r\n                continue;\r\n            }\r\n            try {\r\n                const ref = await textModelResolverService.createModelReference(child.uri);\r\n                this._previews.set(child.uri, new FilePreview(ref));\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n}\r\nexport class ReferencesModel {\r\n    constructor(links, title) {\r\n        this.groups = [];\r\n        this.references = [];\r\n        this._onDidChangeReferenceRange = new Emitter();\r\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\r\n        this._links = links;\r\n        this._title = title;\r\n        // grouping and sorting\r\n        const [providersFirst] = links;\r\n        links.sort(ReferencesModel._compareReferences);\r\n        let current;\r\n        for (const link of links) {\r\n            if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\r\n                // new group\r\n                current = new FileReferences(this, link.uri);\r\n                this.groups.push(current);\r\n            }\r\n            // append, check for equality first!\r\n            if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\r\n                const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\r\n                this.references.push(oneRef);\r\n                current.children.push(oneRef);\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        dispose(this.groups);\r\n        this._onDidChangeReferenceRange.dispose();\r\n        this.groups.length = 0;\r\n    }\r\n    clone() {\r\n        return new ReferencesModel(this._links, this._title);\r\n    }\r\n    get title() {\r\n        return this._title;\r\n    }\r\n    get isEmpty() {\r\n        return this.groups.length === 0;\r\n    }\r\n    get ariaMessage() {\r\n        if (this.isEmpty) {\r\n            return localize('aria.result.0', \"No results found\");\r\n        }\r\n        else if (this.references.length === 1) {\r\n            return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\r\n        }\r\n        else if (this.groups.length === 1) {\r\n            return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\r\n        }\r\n        else {\r\n            return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\r\n        }\r\n    }\r\n    nextOrPreviousReference(reference, next) {\r\n        const { parent } = reference;\r\n        let idx = parent.children.indexOf(reference);\r\n        const childCount = parent.children.length;\r\n        const groupCount = parent.parent.groups.length;\r\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\r\n            // cycling within one file\r\n            if (next) {\r\n                idx = (idx + 1) % childCount;\r\n            }\r\n            else {\r\n                idx = (idx + childCount - 1) % childCount;\r\n            }\r\n            return parent.children[idx];\r\n        }\r\n        idx = parent.parent.groups.indexOf(parent);\r\n        if (next) {\r\n            idx = (idx + 1) % groupCount;\r\n            return parent.parent.groups[idx].children[0];\r\n        }\r\n        else {\r\n            idx = (idx + groupCount - 1) % groupCount;\r\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\r\n        }\r\n    }\r\n    nearestReference(resource, position) {\r\n        const nearest = this.references.map((ref, idx) => {\r\n            return {\r\n                idx,\r\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\r\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\r\n            };\r\n        }).sort((a, b) => {\r\n            if (a.prefixLen > b.prefixLen) {\r\n                return -1;\r\n            }\r\n            else if (a.prefixLen < b.prefixLen) {\r\n                return 1;\r\n            }\r\n            else if (a.offsetDist < b.offsetDist) {\r\n                return -1;\r\n            }\r\n            else if (a.offsetDist > b.offsetDist) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        })[0];\r\n        if (nearest) {\r\n            return this.references[nearest.idx];\r\n        }\r\n        return undefined;\r\n    }\r\n    referenceAt(resource, position) {\r\n        for (const ref of this.references) {\r\n            if (ref.uri.toString() === resource.toString()) {\r\n                if (Range.containsPosition(ref.range, position)) {\r\n                    return ref;\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    firstReference() {\r\n        for (const ref of this.references) {\r\n            if (ref.isProviderFirst) {\r\n                return ref;\r\n            }\r\n        }\r\n        return this.references[0];\r\n    }\r\n    static _compareReferences(a, b) {\r\n        return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../../../base/browser/dom.js';\r\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\r\nimport { Color } from '../../../../../base/common/color.js';\r\nimport { Emitter, Event } from '../../../../../base/common/event.js';\r\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\r\nimport { Schemas } from '../../../../../base/common/network.js';\r\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\r\nimport './referencesWidget.css';\r\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport { Range } from '../../../../common/core/range.js';\r\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\r\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\r\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\r\nimport { ILanguageService } from '../../../../common/languages/language.js';\r\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\r\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\r\nimport * as peekView from '../../../peekView/browser/peekView.js';\r\nimport * as nls from '../../../../../nls.js';\r\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\r\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\r\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\r\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\r\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\r\nimport { FileReferences, OneReference } from '../referencesModel.js';\r\nclass DecorationsManager {\r\n    constructor(_editor, _model) {\r\n        this._editor = _editor;\r\n        this._model = _model;\r\n        this._decorations = new Map();\r\n        this._decorationIgnoreSet = new Set();\r\n        this._callOnDispose = new DisposableStore();\r\n        this._callOnModelChange = new DisposableStore();\r\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\r\n        this._onModelChanged();\r\n    }\r\n    dispose() {\r\n        this._callOnModelChange.dispose();\r\n        this._callOnDispose.dispose();\r\n        this.removeDecorations();\r\n    }\r\n    _onModelChanged() {\r\n        this._callOnModelChange.clear();\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        for (const ref of this._model.references) {\r\n            if (ref.uri.toString() === model.uri.toString()) {\r\n                this._addDecorations(ref.parent);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    _addDecorations(reference) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\r\n        const newDecorations = [];\r\n        const newDecorationsActualIndex = [];\r\n        for (let i = 0, len = reference.children.length; i < len; i++) {\r\n            const oneReference = reference.children[i];\r\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\r\n                continue;\r\n            }\r\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\r\n                continue;\r\n            }\r\n            newDecorations.push({\r\n                range: oneReference.range,\r\n                options: DecorationsManager.DecorationOptions\r\n            });\r\n            newDecorationsActualIndex.push(i);\r\n        }\r\n        this._editor.changeDecorations((changeAccessor) => {\r\n            const decorations = changeAccessor.deltaDecorations([], newDecorations);\r\n            for (let i = 0; i < decorations.length; i++) {\r\n                this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\r\n            }\r\n        });\r\n    }\r\n    _onDecorationChanged() {\r\n        const toRemove = [];\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        for (const [decorationId, reference] of this._decorations) {\r\n            const newRange = model.getDecorationRange(decorationId);\r\n            if (!newRange) {\r\n                continue;\r\n            }\r\n            let ignore = false;\r\n            if (Range.equalsRange(newRange, reference.range)) {\r\n                continue;\r\n            }\r\n            if (Range.spansMultipleLines(newRange)) {\r\n                ignore = true;\r\n            }\r\n            else {\r\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\r\n                const newLineLength = newRange.endColumn - newRange.startColumn;\r\n                if (lineLength !== newLineLength) {\r\n                    ignore = true;\r\n                }\r\n            }\r\n            if (ignore) {\r\n                this._decorationIgnoreSet.add(reference.id);\r\n                toRemove.push(decorationId);\r\n            }\r\n            else {\r\n                reference.range = newRange;\r\n            }\r\n        }\r\n        for (let i = 0, len = toRemove.length; i < len; i++) {\r\n            this._decorations.delete(toRemove[i]);\r\n        }\r\n        this._editor.removeDecorations(toRemove);\r\n    }\r\n    removeDecorations() {\r\n        this._editor.removeDecorations([...this._decorations.keys()]);\r\n        this._decorations.clear();\r\n    }\r\n}\r\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\r\n    description: 'reference-decoration',\r\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n    className: 'reference-decoration'\r\n});\r\nexport class LayoutData {\r\n    constructor() {\r\n        this.ratio = 0.7;\r\n        this.heightInLines = 18;\r\n    }\r\n    static fromJSON(raw) {\r\n        let ratio;\r\n        let heightInLines;\r\n        try {\r\n            const data = JSON.parse(raw);\r\n            ratio = data.ratio;\r\n            heightInLines = data.heightInLines;\r\n        }\r\n        catch (_a) {\r\n            //\r\n        }\r\n        return {\r\n            ratio: ratio || 0.7,\r\n            heightInLines: heightInLines || 18\r\n        };\r\n    }\r\n}\r\nclass ReferencesTree extends WorkbenchAsyncDataTree {\r\n}\r\n/**\r\n * ZoneWidget that is shown inside the editor\r\n */\r\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\r\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService, _languageService, _languageConfigurationService) {\r\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\r\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\r\n        this.layoutData = layoutData;\r\n        this._textModelResolverService = _textModelResolverService;\r\n        this._instantiationService = _instantiationService;\r\n        this._peekViewService = _peekViewService;\r\n        this._uriLabel = _uriLabel;\r\n        this._undoRedoService = _undoRedoService;\r\n        this._keybindingService = _keybindingService;\r\n        this._languageService = _languageService;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this._disposeOnNewModel = new DisposableStore();\r\n        this._callOnDispose = new DisposableStore();\r\n        this._onDidSelectReference = new Emitter();\r\n        this.onDidSelectReference = this._onDidSelectReference.event;\r\n        this._dim = new dom.Dimension(0, 0);\r\n        this._applyTheme(themeService.getColorTheme());\r\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\r\n        this._peekViewService.addExclusiveWidget(editor, this);\r\n        this.create();\r\n    }\r\n    dispose() {\r\n        this.setModel(undefined);\r\n        this._callOnDispose.dispose();\r\n        this._disposeOnNewModel.dispose();\r\n        dispose(this._preview);\r\n        dispose(this._previewNotAvailableMessage);\r\n        dispose(this._tree);\r\n        dispose(this._previewModelReference);\r\n        this._splitView.dispose();\r\n        super.dispose();\r\n    }\r\n    _applyTheme(theme) {\r\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\r\n        this.style({\r\n            arrowColor: borderColor,\r\n            frameColor: borderColor,\r\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\r\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\r\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\r\n        });\r\n    }\r\n    show(where) {\r\n        super.show(where, this.layoutData.heightInLines || 18);\r\n    }\r\n    focusOnReferenceTree() {\r\n        this._tree.domFocus();\r\n    }\r\n    focusOnPreviewEditor() {\r\n        this._preview.focus();\r\n    }\r\n    isPreviewEditorFocused() {\r\n        return this._preview.hasTextFocus();\r\n    }\r\n    _onTitleClick(e) {\r\n        if (this._preview && this._preview.getModel()) {\r\n            this._onDidSelectReference.fire({\r\n                element: this._getFocusedReference(),\r\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\r\n                source: 'title'\r\n            });\r\n        }\r\n    }\r\n    _fillBody(containerElement) {\r\n        this.setCssClass('reference-zone-widget');\r\n        // message pane\r\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\r\n        dom.hide(this._messageContainer);\r\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* Orientation.HORIZONTAL */ });\r\n        // editor\r\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\r\n        const options = {\r\n            scrollBeyondLastLine: false,\r\n            scrollbar: {\r\n                verticalScrollbarSize: 14,\r\n                horizontal: 'auto',\r\n                useShadows: true,\r\n                verticalHasArrows: false,\r\n                horizontalHasArrows: false,\r\n                alwaysConsumeMouseWheel: true\r\n            },\r\n            overviewRulerLanes: 2,\r\n            fixedOverflowWidgets: true,\r\n            minimap: {\r\n                enabled: false\r\n            }\r\n        };\r\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, {}, this.editor);\r\n        dom.hide(this._previewContainer);\r\n        this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\r\n        // tree\r\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\r\n        const treeOptions = {\r\n            keyboardSupport: this._defaultTreeKeyboardSupport,\r\n            accessibilityProvider: new AccessibilityProvider(),\r\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\r\n            identityProvider: new IdentityProvider(),\r\n            openOnSingleClick: true,\r\n            selectionNavigation: true,\r\n            overrideStyles: {\r\n                listBackground: peekView.peekViewResultsBackground\r\n            }\r\n        };\r\n        if (this._defaultTreeKeyboardSupport) {\r\n            // the tree will consume `Escape` and prevent the widget from closing\r\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\r\n                if (e.equals(9 /* KeyCode.Escape */)) {\r\n                    this._keybindingService.dispatchEvent(e, e.target);\r\n                    e.stopPropagation();\r\n                }\r\n            }, true));\r\n        }\r\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\r\n            this._instantiationService.createInstance(FileReferencesRenderer),\r\n            this._instantiationService.createInstance(OneReferenceRenderer),\r\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\r\n        // split stuff\r\n        this._splitView.addView({\r\n            onDidChange: Event.None,\r\n            element: this._previewContainer,\r\n            minimumSize: 200,\r\n            maximumSize: Number.MAX_VALUE,\r\n            layout: (width) => {\r\n                this._preview.layout({ height: this._dim.height, width });\r\n            }\r\n        }, Sizing.Distribute);\r\n        this._splitView.addView({\r\n            onDidChange: Event.None,\r\n            element: this._treeContainer,\r\n            minimumSize: 100,\r\n            maximumSize: Number.MAX_VALUE,\r\n            layout: (width) => {\r\n                this._treeContainer.style.height = `${this._dim.height}px`;\r\n                this._treeContainer.style.width = `${width}px`;\r\n                this._tree.layout(this._dim.height, width);\r\n            }\r\n        }, Sizing.Distribute);\r\n        this._disposables.add(this._splitView.onDidSashChange(() => {\r\n            if (this._dim.width) {\r\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\r\n            }\r\n        }, undefined));\r\n        // listen on selection and focus\r\n        const onEvent = (element, kind) => {\r\n            if (element instanceof OneReference) {\r\n                if (kind === 'show') {\r\n                    this._revealReference(element, false);\r\n                }\r\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\r\n            }\r\n        };\r\n        this._tree.onDidOpen(e => {\r\n            if (e.sideBySide) {\r\n                onEvent(e.element, 'side');\r\n            }\r\n            else if (e.editorOptions.pinned) {\r\n                onEvent(e.element, 'goto');\r\n            }\r\n            else {\r\n                onEvent(e.element, 'show');\r\n            }\r\n        });\r\n        dom.hide(this._treeContainer);\r\n    }\r\n    _onWidth(width) {\r\n        if (this._dim) {\r\n            this._doLayoutBody(this._dim.height, width);\r\n        }\r\n    }\r\n    _doLayoutBody(heightInPixel, widthInPixel) {\r\n        super._doLayoutBody(heightInPixel, widthInPixel);\r\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\r\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\r\n        this._splitView.layout(widthInPixel);\r\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\r\n    }\r\n    setSelection(selection) {\r\n        return this._revealReference(selection, true).then(() => {\r\n            if (!this._model) {\r\n                // disposed\r\n                return;\r\n            }\r\n            // show in tree\r\n            this._tree.setSelection([selection]);\r\n            this._tree.setFocus([selection]);\r\n        });\r\n    }\r\n    setModel(newModel) {\r\n        // clean up\r\n        this._disposeOnNewModel.clear();\r\n        this._model = newModel;\r\n        if (this._model) {\r\n            return this._onNewModel();\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    _onNewModel() {\r\n        if (!this._model) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        if (this._model.isEmpty) {\r\n            this.setTitle('');\r\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\r\n            dom.show(this._messageContainer);\r\n            return Promise.resolve(undefined);\r\n        }\r\n        dom.hide(this._messageContainer);\r\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\r\n        this._disposeOnNewModel.add(this._decorationsManager);\r\n        // listen on model changes\r\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\r\n        // listen on editor\r\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\r\n            const { event, target } = e;\r\n            if (event.detail !== 2) {\r\n                return;\r\n            }\r\n            const element = this._getFocusedReference();\r\n            if (!element) {\r\n                return;\r\n            }\r\n            this._onDidSelectReference.fire({\r\n                element: { uri: element.uri, range: target.range },\r\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\r\n                source: 'editor'\r\n            });\r\n        }));\r\n        // make sure things are rendered\r\n        this.container.classList.add('results-loaded');\r\n        dom.show(this._treeContainer);\r\n        dom.show(this._previewContainer);\r\n        this._splitView.layout(this._dim.width);\r\n        this.focusOnReferenceTree();\r\n        // pick input and a reference to begin with\r\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\r\n    }\r\n    _getFocusedReference() {\r\n        const [element] = this._tree.getFocus();\r\n        if (element instanceof OneReference) {\r\n            return element;\r\n        }\r\n        else if (element instanceof FileReferences) {\r\n            if (element.children.length > 0) {\r\n                return element.children[0];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    async revealReference(reference) {\r\n        await this._revealReference(reference, false);\r\n        this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\r\n    }\r\n    async _revealReference(reference, revealParent) {\r\n        // check if there is anything to do...\r\n        if (this._revealedReference === reference) {\r\n            return;\r\n        }\r\n        this._revealedReference = reference;\r\n        // Update widget header\r\n        if (reference.uri.scheme !== Schemas.inMemory) {\r\n            this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\r\n        }\r\n        else {\r\n            this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\r\n        }\r\n        const promise = this._textModelResolverService.createModelReference(reference.uri);\r\n        if (this._tree.getInput() === reference.parent) {\r\n            this._tree.reveal(reference);\r\n        }\r\n        else {\r\n            if (revealParent) {\r\n                this._tree.reveal(reference.parent);\r\n            }\r\n            await this._tree.expand(reference.parent);\r\n            this._tree.reveal(reference);\r\n        }\r\n        const ref = await promise;\r\n        if (!this._model) {\r\n            // disposed\r\n            ref.dispose();\r\n            return;\r\n        }\r\n        dispose(this._previewModelReference);\r\n        // show in editor\r\n        const model = ref.object;\r\n        if (model) {\r\n            const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\r\n            const sel = Range.lift(reference.range).collapseToStart();\r\n            this._previewModelReference = ref;\r\n            this._preview.setModel(model.textEditorModel);\r\n            this._preview.setSelection(sel);\r\n            this._preview.revealRangeInCenter(sel, scrollType);\r\n        }\r\n        else {\r\n            this._preview.setModel(this._previewNotAvailableMessage);\r\n            ref.dispose();\r\n        }\r\n    }\r\n};\r\nReferenceWidget = __decorate([\r\n    __param(3, IThemeService),\r\n    __param(4, ITextModelService),\r\n    __param(5, IInstantiationService),\r\n    __param(6, peekView.IPeekViewService),\r\n    __param(7, ILabelService),\r\n    __param(8, IUndoRedoService),\r\n    __param(9, IKeybindingService),\r\n    __param(10, ILanguageService),\r\n    __param(11, ILanguageConfigurationService)\r\n], ReferenceWidget);\r\nexport { ReferenceWidget };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar FileReferencesRenderer_1;\r\nimport * as dom from '../../../../../base/browser/dom.js';\r\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\r\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\r\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\r\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\r\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\r\nimport { basename, dirname } from '../../../../../base/common/resources.js';\r\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\r\nimport { localize } from '../../../../../nls.js';\r\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\r\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\r\nimport { defaultCountBadgeStyles } from '../../../../../platform/theme/browser/defaultStyles.js';\r\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\r\nlet DataSource = class DataSource {\r\n    constructor(_resolverService) {\r\n        this._resolverService = _resolverService;\r\n    }\r\n    hasChildren(element) {\r\n        if (element instanceof ReferencesModel) {\r\n            return true;\r\n        }\r\n        if (element instanceof FileReferences) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    getChildren(element) {\r\n        if (element instanceof ReferencesModel) {\r\n            return element.groups;\r\n        }\r\n        if (element instanceof FileReferences) {\r\n            return element.resolve(this._resolverService).then(val => {\r\n                // if (element.failure) {\r\n                // \t// refresh the element on failure so that\r\n                // \t// we can update its rendering\r\n                // \treturn tree.refresh(element).then(() => val.children);\r\n                // }\r\n                return val.children;\r\n            });\r\n        }\r\n        throw new Error('bad tree');\r\n    }\r\n};\r\nDataSource = __decorate([\r\n    __param(0, ITextModelService)\r\n], DataSource);\r\nexport { DataSource };\r\n//#endregion\r\nexport class Delegate {\r\n    getHeight() {\r\n        return 23;\r\n    }\r\n    getTemplateId(element) {\r\n        if (element instanceof FileReferences) {\r\n            return FileReferencesRenderer.id;\r\n        }\r\n        else {\r\n            return OneReferenceRenderer.id;\r\n        }\r\n    }\r\n}\r\nlet StringRepresentationProvider = class StringRepresentationProvider {\r\n    constructor(_keybindingService) {\r\n        this._keybindingService = _keybindingService;\r\n    }\r\n    getKeyboardNavigationLabel(element) {\r\n        var _a;\r\n        if (element instanceof OneReference) {\r\n            const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\r\n            if (parts) {\r\n                return parts.value;\r\n            }\r\n        }\r\n        // FileReferences or unresolved OneReference\r\n        return basename(element.uri);\r\n    }\r\n};\r\nStringRepresentationProvider = __decorate([\r\n    __param(0, IKeybindingService)\r\n], StringRepresentationProvider);\r\nexport { StringRepresentationProvider };\r\nexport class IdentityProvider {\r\n    getId(element) {\r\n        return element instanceof OneReference ? element.id : element.uri;\r\n    }\r\n}\r\n//#region render: File\r\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\r\n    constructor(container, _labelService) {\r\n        super();\r\n        this._labelService = _labelService;\r\n        const parent = document.createElement('div');\r\n        parent.classList.add('reference-file');\r\n        this.file = this._register(new IconLabel(parent, { supportHighlights: true }));\r\n        this.badge = new CountBadge(dom.append(parent, dom.$('.count')), {}, defaultCountBadgeStyles);\r\n        container.appendChild(parent);\r\n    }\r\n    set(element, matches) {\r\n        const parent = dirname(element.uri);\r\n        this.file.setLabel(this._labelService.getUriBasenameLabel(element.uri), this._labelService.getUriLabel(parent, { relative: true }), { title: this._labelService.getUriLabel(element.uri), matches });\r\n        const len = element.children.length;\r\n        this.badge.setCount(len);\r\n        if (len > 1) {\r\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\r\n        }\r\n        else {\r\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\r\n        }\r\n    }\r\n};\r\nFileReferencesTemplate = __decorate([\r\n    __param(1, ILabelService)\r\n], FileReferencesTemplate);\r\nlet FileReferencesRenderer = FileReferencesRenderer_1 = class FileReferencesRenderer {\r\n    constructor(_instantiationService) {\r\n        this._instantiationService = _instantiationService;\r\n        this.templateId = FileReferencesRenderer_1.id;\r\n    }\r\n    renderTemplate(container) {\r\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\r\n    }\r\n    renderElement(node, index, template) {\r\n        template.set(node.element, createMatches(node.filterData));\r\n    }\r\n    disposeTemplate(templateData) {\r\n        templateData.dispose();\r\n    }\r\n};\r\nFileReferencesRenderer.id = 'FileReferencesRenderer';\r\nFileReferencesRenderer = FileReferencesRenderer_1 = __decorate([\r\n    __param(0, IInstantiationService)\r\n], FileReferencesRenderer);\r\nexport { FileReferencesRenderer };\r\n//#endregion\r\n//#region render: Reference\r\nclass OneReferenceTemplate {\r\n    constructor(container) {\r\n        this.label = new HighlightedLabel(container);\r\n    }\r\n    set(element, score) {\r\n        var _a;\r\n        const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\r\n        if (!preview || !preview.value) {\r\n            // this means we FAILED to resolve the document or the value is the empty string\r\n            this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\r\n        }\r\n        else {\r\n            // render search match as highlight unless\r\n            // we have score, then render the score\r\n            const { value, highlight } = preview;\r\n            if (score && !FuzzyScore.isDefault(score)) {\r\n                this.label.element.classList.toggle('referenceMatch', false);\r\n                this.label.set(value, createMatches(score));\r\n            }\r\n            else {\r\n                this.label.element.classList.toggle('referenceMatch', true);\r\n                this.label.set(value, [highlight]);\r\n            }\r\n        }\r\n    }\r\n}\r\nexport class OneReferenceRenderer {\r\n    constructor() {\r\n        this.templateId = OneReferenceRenderer.id;\r\n    }\r\n    renderTemplate(container) {\r\n        return new OneReferenceTemplate(container);\r\n    }\r\n    renderElement(node, index, templateData) {\r\n        templateData.set(node.element, node.filterData);\r\n    }\r\n    disposeTemplate() {\r\n    }\r\n}\r\nOneReferenceRenderer.id = 'OneReferenceRenderer';\r\n//#endregion\r\nexport class AccessibilityProvider {\r\n    getWidgetAriaLabel() {\r\n        return localize('treeAriaLabel', \"References\");\r\n    }\r\n    getAriaLabel(element) {\r\n        return element.ariaMessage;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar ReferencesController_1;\r\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\r\nimport { KeyChord } from '../../../../../base/common/keyCodes.js';\r\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\r\nimport { ICodeEditorService } from '../../../../browser/services/codeEditorService.js';\r\nimport { Position } from '../../../../common/core/position.js';\r\nimport { Range } from '../../../../common/core/range.js';\r\nimport { getOuterEditor, PeekContext } from '../../../peekView/browser/peekView.js';\r\nimport * as nls from '../../../../../nls.js';\r\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\r\nimport { KeybindingsRegistry } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\r\nimport { IListService, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementCanExpand } from '../../../../../platform/list/browser/listService.js';\r\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\r\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\r\nimport { OneReference } from '../referencesModel.js';\r\nimport { LayoutData, ReferenceWidget } from './referencesWidget.js';\r\nexport const ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false, nls.localize('referenceSearchVisible', \"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'\"));\r\nlet ReferencesController = ReferencesController_1 = class ReferencesController {\r\n    static get(editor) {\r\n        return editor.getContribution(ReferencesController_1.ID);\r\n    }\r\n    constructor(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\r\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\r\n        this._editor = _editor;\r\n        this._editorService = _editorService;\r\n        this._notificationService = _notificationService;\r\n        this._instantiationService = _instantiationService;\r\n        this._storageService = _storageService;\r\n        this._configurationService = _configurationService;\r\n        this._disposables = new DisposableStore();\r\n        this._requestIdPool = 0;\r\n        this._ignoreModelChangeEvent = false;\r\n        this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\r\n    }\r\n    dispose() {\r\n        var _a, _b;\r\n        this._referenceSearchVisible.reset();\r\n        this._disposables.dispose();\r\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\r\n        this._widget = undefined;\r\n        this._model = undefined;\r\n    }\r\n    toggleWidget(range, modelPromise, peekMode) {\r\n        // close current widget and return early is position didn't change\r\n        let widgetPosition;\r\n        if (this._widget) {\r\n            widgetPosition = this._widget.position;\r\n        }\r\n        this.closeWidget();\r\n        if (!!widgetPosition && range.containsPosition(widgetPosition)) {\r\n            return;\r\n        }\r\n        this._peekMode = peekMode;\r\n        this._referenceSearchVisible.set(true);\r\n        // close the widget on model/mode changes\r\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => { this.closeWidget(); }));\r\n        this._disposables.add(this._editor.onDidChangeModel(() => {\r\n            if (!this._ignoreModelChangeEvent) {\r\n                this.closeWidget();\r\n            }\r\n        }));\r\n        const storageKey = 'peekViewLayout';\r\n        const data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* StorageScope.PROFILE */, '{}'));\r\n        this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\r\n        this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\r\n        this._widget.show(range);\r\n        this._disposables.add(this._widget.onDidClose(() => {\r\n            modelPromise.cancel();\r\n            if (this._widget) {\r\n                this._storageService.store(storageKey, JSON.stringify(this._widget.layoutData), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\r\n                this._widget = undefined;\r\n            }\r\n            this.closeWidget();\r\n        }));\r\n        this._disposables.add(this._widget.onDidSelectReference(event => {\r\n            const { element, kind } = event;\r\n            if (!element) {\r\n                return;\r\n            }\r\n            switch (kind) {\r\n                case 'open':\r\n                    if (event.source !== 'editor' || !this._configurationService.getValue('editor.stablePeek')) {\r\n                        // when stable peek is configured we don't close\r\n                        // the peek window on selecting the editor\r\n                        this.openReference(element, false, false);\r\n                    }\r\n                    break;\r\n                case 'side':\r\n                    this.openReference(element, true, false);\r\n                    break;\r\n                case 'goto':\r\n                    if (peekMode) {\r\n                        this._gotoReference(element, true);\r\n                    }\r\n                    else {\r\n                        this.openReference(element, false, true);\r\n                    }\r\n                    break;\r\n            }\r\n        }));\r\n        const requestId = ++this._requestIdPool;\r\n        modelPromise.then(model => {\r\n            var _a;\r\n            // still current request? widget still open?\r\n            if (requestId !== this._requestIdPool || !this._widget) {\r\n                model.dispose();\r\n                return undefined;\r\n            }\r\n            (_a = this._model) === null || _a === void 0 ? void 0 : _a.dispose();\r\n            this._model = model;\r\n            // show widget\r\n            return this._widget.setModel(this._model).then(() => {\r\n                if (this._widget && this._model && this._editor.hasModel()) { // might have been closed\r\n                    // set title\r\n                    if (!this._model.isEmpty) {\r\n                        this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", this._model.title, this._model.references.length));\r\n                    }\r\n                    else {\r\n                        this._widget.setMetaTitle('');\r\n                    }\r\n                    // set 'best' selection\r\n                    const uri = this._editor.getModel().uri;\r\n                    const pos = new Position(range.startLineNumber, range.startColumn);\r\n                    const selection = this._model.nearestReference(uri, pos);\r\n                    if (selection) {\r\n                        return this._widget.setSelection(selection).then(() => {\r\n                            if (this._widget && this._editor.getOption(86 /* EditorOption.peekWidgetDefaultFocus */) === 'editor') {\r\n                                this._widget.focusOnPreviewEditor();\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                return undefined;\r\n            });\r\n        }, error => {\r\n            this._notificationService.error(error);\r\n        });\r\n    }\r\n    changeFocusBetweenPreviewAndReferences() {\r\n        if (!this._widget) {\r\n            // can be called while still resolving...\r\n            return;\r\n        }\r\n        if (this._widget.isPreviewEditorFocused()) {\r\n            this._widget.focusOnReferenceTree();\r\n        }\r\n        else {\r\n            this._widget.focusOnPreviewEditor();\r\n        }\r\n    }\r\n    async goToNextOrPreviousReference(fwd) {\r\n        if (!this._editor.hasModel() || !this._model || !this._widget) {\r\n            // can be called while still resolving...\r\n            return;\r\n        }\r\n        const currentPosition = this._widget.position;\r\n        if (!currentPosition) {\r\n            return;\r\n        }\r\n        const source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\r\n        if (!source) {\r\n            return;\r\n        }\r\n        const target = this._model.nextOrPreviousReference(source, fwd);\r\n        const editorFocus = this._editor.hasTextFocus();\r\n        const previewEditorFocus = this._widget.isPreviewEditorFocused();\r\n        await this._widget.setSelection(target);\r\n        await this._gotoReference(target, false);\r\n        if (editorFocus) {\r\n            this._editor.focus();\r\n        }\r\n        else if (this._widget && previewEditorFocus) {\r\n            this._widget.focusOnPreviewEditor();\r\n        }\r\n    }\r\n    async revealReference(reference) {\r\n        if (!this._editor.hasModel() || !this._model || !this._widget) {\r\n            // can be called while still resolving...\r\n            return;\r\n        }\r\n        await this._widget.revealReference(reference);\r\n    }\r\n    closeWidget(focusEditor = true) {\r\n        var _a, _b;\r\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\r\n        this._referenceSearchVisible.reset();\r\n        this._disposables.clear();\r\n        this._widget = undefined;\r\n        this._model = undefined;\r\n        if (focusEditor) {\r\n            this._editor.focus();\r\n        }\r\n        this._requestIdPool += 1; // Cancel pending requests\r\n    }\r\n    _gotoReference(ref, pinned) {\r\n        var _a;\r\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.hide();\r\n        this._ignoreModelChangeEvent = true;\r\n        const range = Range.lift(ref.range).collapseToStart();\r\n        return this._editorService.openCodeEditor({\r\n            resource: ref.uri,\r\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\r\n        }, this._editor).then(openedEditor => {\r\n            var _a;\r\n            this._ignoreModelChangeEvent = false;\r\n            if (!openedEditor || !this._widget) {\r\n                // something went wrong...\r\n                this.closeWidget();\r\n                return;\r\n            }\r\n            if (this._editor === openedEditor) {\r\n                //\r\n                this._widget.show(range);\r\n                this._widget.focusOnReferenceTree();\r\n            }\r\n            else {\r\n                // we opened a different editor instance which means a different controller instance.\r\n                // therefore we stop with this controller and continue with the other\r\n                const other = ReferencesController_1.get(openedEditor);\r\n                const model = this._model.clone();\r\n                this.closeWidget();\r\n                openedEditor.focus();\r\n                other === null || other === void 0 ? void 0 : other.toggleWidget(range, createCancelablePromise(_ => Promise.resolve(model)), (_a = this._peekMode) !== null && _a !== void 0 ? _a : false);\r\n            }\r\n        }, (err) => {\r\n            this._ignoreModelChangeEvent = false;\r\n            onUnexpectedError(err);\r\n        });\r\n    }\r\n    openReference(ref, sideBySide, pinned) {\r\n        // clear stage\r\n        if (!sideBySide) {\r\n            this.closeWidget();\r\n        }\r\n        const { uri, range } = ref;\r\n        this._editorService.openCodeEditor({\r\n            resource: uri,\r\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\r\n        }, this._editor, sideBySide);\r\n    }\r\n};\r\nReferencesController.ID = 'editor.contrib.referencesController';\r\nReferencesController = ReferencesController_1 = __decorate([\r\n    __param(2, IContextKeyService),\r\n    __param(3, ICodeEditorService),\r\n    __param(4, INotificationService),\r\n    __param(5, IInstantiationService),\r\n    __param(6, IStorageService),\r\n    __param(7, IConfigurationService)\r\n], ReferencesController);\r\nexport { ReferencesController };\r\nfunction withController(accessor, fn) {\r\n    const outerEditor = getOuterEditor(accessor);\r\n    if (!outerEditor) {\r\n        return;\r\n    }\r\n    const controller = ReferencesController.get(outerEditor);\r\n    if (controller) {\r\n        fn(controller);\r\n    }\r\n}\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'togglePeekWidgetFocus',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */,\r\n    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 60 /* KeyCode.F2 */),\r\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\r\n    handler(accessor) {\r\n        withController(accessor, controller => {\r\n            controller.changeFocusBetweenPreviewAndReferences();\r\n        });\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'goToNextReference',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\r\n    primary: 62 /* KeyCode.F4 */,\r\n    secondary: [70 /* KeyCode.F12 */],\r\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\r\n    handler(accessor) {\r\n        withController(accessor, controller => {\r\n            controller.goToNextOrPreviousReference(true);\r\n        });\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'goToPreviousReference',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\r\n    primary: 1024 /* KeyMod.Shift */ | 62 /* KeyCode.F4 */,\r\n    secondary: [1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */],\r\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\r\n    handler(accessor) {\r\n        withController(accessor, controller => {\r\n            controller.goToNextOrPreviousReference(false);\r\n        });\r\n    }\r\n});\r\n// commands that aren't needed anymore because there is now ContextKeyExpr.OR\r\nCommandsRegistry.registerCommandAlias('goToNextReferenceFromEmbeddedEditor', 'goToNextReference');\r\nCommandsRegistry.registerCommandAlias('goToPreviousReferenceFromEmbeddedEditor', 'goToPreviousReference');\r\n// close\r\nCommandsRegistry.registerCommandAlias('closeReferenceSearchEditor', 'closeReferenceSearch');\r\nCommandsRegistry.registerCommand('closeReferenceSearch', accessor => withController(accessor, controller => controller.closeWidget()));\r\nKeybindingsRegistry.registerKeybindingRule({\r\n    id: 'closeReferenceSearch',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 101,\r\n    primary: 9 /* KeyCode.Escape */,\r\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\r\n    when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek'))\r\n});\r\nKeybindingsRegistry.registerKeybindingRule({\r\n    id: 'closeReferenceSearch',\r\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */ + 50,\r\n    primary: 9 /* KeyCode.Escape */,\r\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\r\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek'))\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'revealReference',\r\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\r\n    primary: 3 /* KeyCode.Enter */,\r\n    mac: {\r\n        primary: 3 /* KeyCode.Enter */,\r\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */]\r\n    },\r\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\r\n    handler(accessor) {\r\n        var _a;\r\n        const listService = accessor.get(IListService);\r\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\r\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\r\n            withController(accessor, controller => controller.revealReference(focus[0]));\r\n        }\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'openReferenceToSide',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */,\r\n    primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\r\n    mac: {\r\n        primary: 256 /* KeyMod.WinCtrl */ | 3 /* KeyCode.Enter */\r\n    },\r\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\r\n    handler(accessor) {\r\n        var _a;\r\n        const listService = accessor.get(IListService);\r\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\r\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\r\n            withController(accessor, controller => controller.openReference(focus[0], true, true));\r\n        }\r\n    }\r\n});\r\nCommandsRegistry.registerCommand('openReference', (accessor) => {\r\n    var _a;\r\n    const listService = accessor.get(IListService);\r\n    const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\r\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\r\n        withController(accessor, controller => controller.openReference(focus[0], false, true));\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { combinedDisposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\r\nimport { isEqual } from '../../../../base/common/resources.js';\r\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nexport const ctxHasSymbols = new RawContextKey('hasSymbols', false, localize('hasSymbols', \"Whether there are symbol locations that can be navigated via keyboard-only.\"));\r\nexport const ISymbolNavigationService = createDecorator('ISymbolNavigationService');\r\nlet SymbolNavigationService = class SymbolNavigationService {\r\n    constructor(contextKeyService, _editorService, _notificationService, _keybindingService) {\r\n        this._editorService = _editorService;\r\n        this._notificationService = _notificationService;\r\n        this._keybindingService = _keybindingService;\r\n        this._currentModel = undefined;\r\n        this._currentIdx = -1;\r\n        this._ignoreEditorChange = false;\r\n        this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\r\n    }\r\n    reset() {\r\n        var _a, _b;\r\n        this._ctxHasSymbols.reset();\r\n        (_a = this._currentState) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        (_b = this._currentMessage) === null || _b === void 0 ? void 0 : _b.dispose();\r\n        this._currentModel = undefined;\r\n        this._currentIdx = -1;\r\n    }\r\n    put(anchor) {\r\n        const refModel = anchor.parent.parent;\r\n        if (refModel.references.length <= 1) {\r\n            this.reset();\r\n            return;\r\n        }\r\n        this._currentModel = refModel;\r\n        this._currentIdx = refModel.references.indexOf(anchor);\r\n        this._ctxHasSymbols.set(true);\r\n        this._showMessage();\r\n        const editorState = new EditorState(this._editorService);\r\n        const listener = editorState.onDidChange(_ => {\r\n            if (this._ignoreEditorChange) {\r\n                return;\r\n            }\r\n            const editor = this._editorService.getActiveCodeEditor();\r\n            if (!editor) {\r\n                return;\r\n            }\r\n            const model = editor.getModel();\r\n            const position = editor.getPosition();\r\n            if (!model || !position) {\r\n                return;\r\n            }\r\n            let seenUri = false;\r\n            let seenPosition = false;\r\n            for (const reference of refModel.references) {\r\n                if (isEqual(reference.uri, model.uri)) {\r\n                    seenUri = true;\r\n                    seenPosition = seenPosition || Range.containsPosition(reference.range, position);\r\n                }\r\n                else if (seenUri) {\r\n                    break;\r\n                }\r\n            }\r\n            if (!seenUri || !seenPosition) {\r\n                this.reset();\r\n            }\r\n        });\r\n        this._currentState = combinedDisposable(editorState, listener);\r\n    }\r\n    revealNext(source) {\r\n        if (!this._currentModel) {\r\n            return Promise.resolve();\r\n        }\r\n        // get next result and advance\r\n        this._currentIdx += 1;\r\n        this._currentIdx %= this._currentModel.references.length;\r\n        const reference = this._currentModel.references[this._currentIdx];\r\n        // status\r\n        this._showMessage();\r\n        // open editor, ignore events while that happens\r\n        this._ignoreEditorChange = true;\r\n        return this._editorService.openCodeEditor({\r\n            resource: reference.uri,\r\n            options: {\r\n                selection: Range.collapseToStart(reference.range),\r\n                selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */\r\n            }\r\n        }, source).finally(() => {\r\n            this._ignoreEditorChange = false;\r\n        });\r\n    }\r\n    _showMessage() {\r\n        var _a;\r\n        (_a = this._currentMessage) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        const kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\r\n        const message = kb\r\n            ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel())\r\n            : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\r\n        this._currentMessage = this._notificationService.status(message);\r\n    }\r\n};\r\nSymbolNavigationService = __decorate([\r\n    __param(0, IContextKeyService),\r\n    __param(1, ICodeEditorService),\r\n    __param(2, INotificationService),\r\n    __param(3, IKeybindingService)\r\n], SymbolNavigationService);\r\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, 1 /* InstantiationType.Delayed */);\r\nregisterEditorCommand(new class extends EditorCommand {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.gotoNextSymbolFromResult',\r\n            precondition: ctxHasSymbols,\r\n            kbOpts: {\r\n                weight: 100 /* KeybindingWeight.EditorContrib */,\r\n                primary: 70 /* KeyCode.F12 */\r\n            }\r\n        });\r\n    }\r\n    runEditorCommand(accessor, editor) {\r\n        return accessor.get(ISymbolNavigationService).revealNext(editor);\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'editor.gotoNextSymbolFromResult.cancel',\r\n    weight: 100 /* KeybindingWeight.EditorContrib */,\r\n    when: ctxHasSymbols,\r\n    primary: 9 /* KeyCode.Escape */,\r\n    handler(accessor) {\r\n        accessor.get(ISymbolNavigationService).reset();\r\n    }\r\n});\r\n//\r\nlet EditorState = class EditorState {\r\n    constructor(editorService) {\r\n        this._listener = new Map();\r\n        this._disposables = new DisposableStore();\r\n        this._onDidChange = new Emitter();\r\n        this.onDidChange = this._onDidChange.event;\r\n        this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\r\n        this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\r\n        editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n        this._onDidChange.dispose();\r\n        dispose(this._listener.values());\r\n    }\r\n    _onDidAddEditor(editor) {\r\n        this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(_ => this._onDidChange.fire({ editor })), editor.onDidChangeModelContent(_ => this._onDidChange.fire({ editor }))));\r\n    }\r\n    _onDidRemoveEditor(editor) {\r\n        var _a;\r\n        (_a = this._listener.get(editor)) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this._listener.delete(editor);\r\n    }\r\n};\r\nEditorState = __decorate([\r\n    __param(0, ICodeEditorService)\r\n], EditorState);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar MessageController_1;\r\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\r\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\r\nimport './messageController.css';\r\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { openLinkFromMarkdown } from '../../markdownRenderer/browser/markdownRenderer.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nlet MessageController = MessageController_1 = class MessageController {\r\n    static get(editor) {\r\n        return editor.getContribution(MessageController_1.ID);\r\n    }\r\n    constructor(editor, contextKeyService, _openerService) {\r\n        this._openerService = _openerService;\r\n        this._messageWidget = new MutableDisposable();\r\n        this._messageListeners = new DisposableStore();\r\n        this._mouseOverMessage = false;\r\n        this._editor = editor;\r\n        this._visible = MessageController_1.MESSAGE_VISIBLE.bindTo(contextKeyService);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        (_a = this._message) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        this._messageListeners.dispose();\r\n        this._messageWidget.dispose();\r\n        this._visible.reset();\r\n    }\r\n    showMessage(message, position) {\r\n        alert(isMarkdownString(message) ? message.value : message);\r\n        this._visible.set(true);\r\n        this._messageWidget.clear();\r\n        this._messageListeners.clear();\r\n        this._message = isMarkdownString(message) ? renderMarkdown(message, {\r\n            actionHandler: {\r\n                callback: (url) => openLinkFromMarkdown(this._openerService, url, isMarkdownString(message) ? message.isTrusted : undefined),\r\n                disposables: this._messageListeners\r\n            },\r\n        }) : undefined;\r\n        this._messageWidget.value = new MessageWidget(this._editor, position, typeof message === 'string' ? message : this._message.element);\r\n        // close on blur (debounced to allow to tab into the message), cursor, model change, dispose\r\n        this._messageListeners.add(Event.debounce(this._editor.onDidBlurEditorText, (last, event) => event, 0)(() => {\r\n            if (this._mouseOverMessage) {\r\n                return; // override when mouse over message\r\n            }\r\n            if (this._messageWidget.value && dom.isAncestor(dom.getActiveElement(), this._messageWidget.value.getDomNode())) {\r\n                return; // override when focus is inside the message\r\n            }\r\n            this.closeMessage();\r\n        }));\r\n        this._messageListeners.add(this._editor.onDidChangeCursorPosition(() => this.closeMessage()));\r\n        this._messageListeners.add(this._editor.onDidDispose(() => this.closeMessage()));\r\n        this._messageListeners.add(this._editor.onDidChangeModel(() => this.closeMessage()));\r\n        this._messageListeners.add(dom.addDisposableListener(this._messageWidget.value.getDomNode(), dom.EventType.MOUSE_ENTER, () => this._mouseOverMessage = true, true));\r\n        this._messageListeners.add(dom.addDisposableListener(this._messageWidget.value.getDomNode(), dom.EventType.MOUSE_LEAVE, () => this._mouseOverMessage = false, true));\r\n        // close on mouse move\r\n        let bounds;\r\n        this._messageListeners.add(this._editor.onMouseMove(e => {\r\n            // outside the text area\r\n            if (!e.target.position) {\r\n                return;\r\n            }\r\n            if (!bounds) {\r\n                // define bounding box around position and first mouse occurance\r\n                bounds = new Range(position.lineNumber - 3, 1, e.target.position.lineNumber + 3, 1);\r\n            }\r\n            else if (!bounds.containsPosition(e.target.position)) {\r\n                // check if position is still in bounds\r\n                this.closeMessage();\r\n            }\r\n        }));\r\n    }\r\n    closeMessage() {\r\n        this._visible.reset();\r\n        this._messageListeners.clear();\r\n        if (this._messageWidget.value) {\r\n            this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value));\r\n        }\r\n    }\r\n};\r\nMessageController.ID = 'editor.contrib.messageController';\r\nMessageController.MESSAGE_VISIBLE = new RawContextKey('messageVisible', false, nls.localize('messageVisible', 'Whether the editor is currently showing an inline message'));\r\nMessageController = MessageController_1 = __decorate([\r\n    __param(1, IContextKeyService),\r\n    __param(2, IOpenerService)\r\n], MessageController);\r\nexport { MessageController };\r\nconst MessageCommand = EditorCommand.bindToContribution(MessageController.get);\r\nregisterEditorCommand(new MessageCommand({\r\n    id: 'leaveEditorMessage',\r\n    precondition: MessageController.MESSAGE_VISIBLE,\r\n    handler: c => c.closeMessage(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\r\n        primary: 9 /* KeyCode.Escape */\r\n    }\r\n}));\r\nclass MessageWidget {\r\n    static fadeOut(messageWidget) {\r\n        const dispose = () => {\r\n            messageWidget.dispose();\r\n            clearTimeout(handle);\r\n            messageWidget.getDomNode().removeEventListener('animationend', dispose);\r\n        };\r\n        const handle = setTimeout(dispose, 110);\r\n        messageWidget.getDomNode().addEventListener('animationend', dispose);\r\n        messageWidget.getDomNode().classList.add('fadeOut');\r\n        return { dispose };\r\n    }\r\n    constructor(editor, { lineNumber, column }, text) {\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        this.allowEditorOverflow = true;\r\n        this.suppressMouseDown = false;\r\n        this._editor = editor;\r\n        this._editor.revealLinesInCenterIfOutsideViewport(lineNumber, lineNumber, 0 /* ScrollType.Smooth */);\r\n        this._position = { lineNumber, column };\r\n        this._domNode = document.createElement('div');\r\n        this._domNode.classList.add('monaco-editor-overlaymessage');\r\n        this._domNode.style.marginLeft = '-6px';\r\n        const anchorTop = document.createElement('div');\r\n        anchorTop.classList.add('anchor', 'top');\r\n        this._domNode.appendChild(anchorTop);\r\n        const message = document.createElement('div');\r\n        if (typeof text === 'string') {\r\n            message.classList.add('message');\r\n            message.textContent = text;\r\n        }\r\n        else {\r\n            text.classList.add('message');\r\n            message.appendChild(text);\r\n        }\r\n        this._domNode.appendChild(message);\r\n        const anchorBottom = document.createElement('div');\r\n        anchorBottom.classList.add('anchor', 'below');\r\n        this._domNode.appendChild(anchorBottom);\r\n        this._editor.addContentWidget(this);\r\n        this._domNode.classList.add('fadeIn');\r\n    }\r\n    dispose() {\r\n        this._editor.removeContentWidget(this);\r\n    }\r\n    getId() {\r\n        return 'messageoverlay';\r\n    }\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    getPosition() {\r\n        return {\r\n            position: this._position,\r\n            preference: [\r\n                1 /* ContentWidgetPositionPreference.ABOVE */,\r\n                2 /* ContentWidgetPositionPreference.BELOW */,\r\n            ],\r\n            positionAffinity: 1 /* PositionAffinity.Right */,\r\n        };\r\n    }\r\n    afterRender(position) {\r\n        this._domNode.classList.toggle('below', position === 2 /* ContentWidgetPositionPreference.BELOW */);\r\n    }\r\n}\r\nregisterEditorContribution(MessageController.ID, MessageController, 4 /* EditorContributionInstantiation.Lazy */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { coalesce } from '../../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ReferencesModel } from './referencesModel.js';\r\nasync function getLocationLinks(model, position, registry, provide) {\r\n    const provider = registry.ordered(model);\r\n    // get results\r\n    const promises = provider.map((provider) => {\r\n        return Promise.resolve(provide(provider, model, position)).then(undefined, err => {\r\n            onUnexpectedExternalError(err);\r\n            return undefined;\r\n        });\r\n    });\r\n    const values = await Promise.all(promises);\r\n    return coalesce(values.flat());\r\n}\r\nexport function getDefinitionsAtPosition(registry, model, position, token) {\r\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\r\n        return provider.provideDefinition(model, position, token);\r\n    });\r\n}\r\nexport function getDeclarationsAtPosition(registry, model, position, token) {\r\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\r\n        return provider.provideDeclaration(model, position, token);\r\n    });\r\n}\r\nexport function getImplementationsAtPosition(registry, model, position, token) {\r\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\r\n        return provider.provideImplementation(model, position, token);\r\n    });\r\n}\r\nexport function getTypeDefinitionsAtPosition(registry, model, position, token) {\r\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\r\n        return provider.provideTypeDefinition(model, position, token);\r\n    });\r\n}\r\nexport function getReferencesAtPosition(registry, model, position, compact, token) {\r\n    return getLocationLinks(model, position, registry, async (provider, model, position) => {\r\n        const result = await provider.provideReferences(model, position, { includeDeclaration: true }, token);\r\n        if (!compact || !result || result.length !== 2) {\r\n            return result;\r\n        }\r\n        const resultWithoutDeclaration = await provider.provideReferences(model, position, { includeDeclaration: false }, token);\r\n        if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\r\n            return resultWithoutDeclaration;\r\n        }\r\n        return result;\r\n    });\r\n}\r\n// -- API commands ----\r\nasync function _sortedAndDeduped(callback) {\r\n    const rawLinks = await callback();\r\n    const model = new ReferencesModel(rawLinks, '');\r\n    const modelLinks = model.references.map(ref => ref.link);\r\n    model.dispose();\r\n    return modelLinks;\r\n}\r\nregisterModelAndPositionCommand('_executeDefinitionProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, CancellationToken.None);\r\n    return _sortedAndDeduped(() => promise);\r\n});\r\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, CancellationToken.None);\r\n    return _sortedAndDeduped(() => promise);\r\n});\r\nregisterModelAndPositionCommand('_executeDeclarationProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, CancellationToken.None);\r\n    return _sortedAndDeduped(() => promise);\r\n});\r\nregisterModelAndPositionCommand('_executeReferenceProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, CancellationToken.None);\r\n    return _sortedAndDeduped(() => promise);\r\n});\r\nregisterModelAndPositionCommand('_executeImplementationProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, CancellationToken.None);\r\n    return _sortedAndDeduped(() => promise);\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar _a, _b, _c, _d, _e, _f, _g, _h;\r\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\r\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\r\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\r\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport * as corePosition from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { isLocationLink } from '../../../common/languages.js';\r\nimport { ReferencesController } from './peek/referencesController.js';\r\nimport { ReferencesModel } from './referencesModel.js';\r\nimport { ISymbolNavigationService } from './symbolNavigation.js';\r\nimport { MessageController } from '../../message/browser/messageController.js';\r\nimport { PeekContext } from '../../peekView/browser/peekView.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\r\nimport { getDeclarationsAtPosition, getDefinitionsAtPosition, getImplementationsAtPosition, getReferencesAtPosition, getTypeDefinitionsAtPosition } from './goToSymbol.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { Iterable } from '../../../../base/common/iterator.js';\r\nimport { IsWebContext } from '../../../../platform/contextkey/common/contextkeys.js';\r\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\r\n    submenu: MenuId.EditorContextPeek,\r\n    title: nls.localize('peek.submenu', \"Peek\"),\r\n    group: 'navigation',\r\n    order: 100\r\n});\r\nexport class SymbolNavigationAnchor {\r\n    static is(thing) {\r\n        if (!thing || typeof thing !== 'object') {\r\n            return false;\r\n        }\r\n        if (thing instanceof SymbolNavigationAnchor) {\r\n            return true;\r\n        }\r\n        if (corePosition.Position.isIPosition(thing.position) && thing.model) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    constructor(model, position) {\r\n        this.model = model;\r\n        this.position = position;\r\n    }\r\n}\r\nexport class SymbolNavigationAction extends EditorAction2 {\r\n    static all() {\r\n        return SymbolNavigationAction._allSymbolNavigationCommands.values();\r\n    }\r\n    static _patchConfig(opts) {\r\n        const result = { ...opts, f1: true };\r\n        // patch context menu when clause\r\n        if (result.menu) {\r\n            for (const item of Iterable.wrap(result.menu)) {\r\n                if (item.id === MenuId.EditorContext || item.id === MenuId.EditorContextPeek) {\r\n                    item.when = ContextKeyExpr.and(opts.precondition, item.when);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    constructor(configuration, opts) {\r\n        super(SymbolNavigationAction._patchConfig(opts));\r\n        this.configuration = configuration;\r\n        SymbolNavigationAction._allSymbolNavigationCommands.set(opts.id, this);\r\n    }\r\n    runEditorCommand(accessor, editor, arg, range) {\r\n        if (!editor.hasModel()) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        const notificationService = accessor.get(INotificationService);\r\n        const editorService = accessor.get(ICodeEditorService);\r\n        const progressService = accessor.get(IEditorProgressService);\r\n        const symbolNavService = accessor.get(ISymbolNavigationService);\r\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n        const instaService = accessor.get(IInstantiationService);\r\n        const model = editor.getModel();\r\n        const position = editor.getPosition();\r\n        const anchor = SymbolNavigationAnchor.is(arg) ? arg : new SymbolNavigationAnchor(model, position);\r\n        const cts = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\r\n        const promise = raceCancellation(this._getLocationModel(languageFeaturesService, anchor.model, anchor.position, cts.token), cts.token).then(async (references) => {\r\n            var _j;\r\n            if (!references || cts.token.isCancellationRequested) {\r\n                return;\r\n            }\r\n            alert(references.ariaMessage);\r\n            let altAction;\r\n            if (references.referenceAt(model.uri, position)) {\r\n                const altActionId = this._getAlternativeCommand(editor);\r\n                if (!SymbolNavigationAction._activeAlternativeCommands.has(altActionId) && SymbolNavigationAction._allSymbolNavigationCommands.has(altActionId)) {\r\n                    altAction = SymbolNavigationAction._allSymbolNavigationCommands.get(altActionId);\r\n                }\r\n            }\r\n            const referenceCount = references.references.length;\r\n            if (referenceCount === 0) {\r\n                // no result -> show message\r\n                if (!this.configuration.muteMessage) {\r\n                    const info = model.getWordAtPosition(position);\r\n                    (_j = MessageController.get(editor)) === null || _j === void 0 ? void 0 : _j.showMessage(this._getNoResultFoundMessage(info), position);\r\n                }\r\n            }\r\n            else if (referenceCount === 1 && altAction) {\r\n                // already at the only result, run alternative\r\n                SymbolNavigationAction._activeAlternativeCommands.add(this.desc.id);\r\n                instaService.invokeFunction((accessor) => altAction.runEditorCommand(accessor, editor, arg, range).finally(() => {\r\n                    SymbolNavigationAction._activeAlternativeCommands.delete(this.desc.id);\r\n                }));\r\n            }\r\n            else {\r\n                // normal results handling\r\n                return this._onResult(editorService, symbolNavService, editor, references, range);\r\n            }\r\n        }, (err) => {\r\n            // report an error\r\n            notificationService.error(err);\r\n        }).finally(() => {\r\n            cts.dispose();\r\n        });\r\n        progressService.showWhile(promise, 250);\r\n        return promise;\r\n    }\r\n    async _onResult(editorService, symbolNavService, editor, model, range) {\r\n        const gotoLocation = this._getGoToPreference(editor);\r\n        if (!(editor instanceof EmbeddedCodeEditorWidget) && (this.configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1))) {\r\n            this._openInPeek(editor, model, range);\r\n        }\r\n        else {\r\n            const next = model.firstReference();\r\n            const peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\r\n            const targetEditor = await this._openReference(editor, editorService, next, this.configuration.openToSide, !peek);\r\n            if (peek && targetEditor) {\r\n                this._openInPeek(targetEditor, model, range);\r\n            }\r\n            else {\r\n                model.dispose();\r\n            }\r\n            // keep remaining locations around when using\r\n            // 'goto'-mode\r\n            if (gotoLocation === 'goto') {\r\n                symbolNavService.put(next);\r\n            }\r\n        }\r\n    }\r\n    async _openReference(editor, editorService, reference, sideBySide, highlight) {\r\n        // range is the target-selection-range when we have one\r\n        // and the fallback is the 'full' range\r\n        let range = undefined;\r\n        if (isLocationLink(reference)) {\r\n            range = reference.targetSelectionRange;\r\n        }\r\n        if (!range) {\r\n            range = reference.range;\r\n        }\r\n        if (!range) {\r\n            return undefined;\r\n        }\r\n        const targetEditor = await editorService.openCodeEditor({\r\n            resource: reference.uri,\r\n            options: {\r\n                selection: Range.collapseToStart(range),\r\n                selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */,\r\n                selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */\r\n            }\r\n        }, editor, sideBySide);\r\n        if (!targetEditor) {\r\n            return undefined;\r\n        }\r\n        if (highlight) {\r\n            const modelNow = targetEditor.getModel();\r\n            const decorations = targetEditor.createDecorationsCollection([{ range, options: { description: 'symbol-navigate-action-highlight', className: 'symbolHighlight' } }]);\r\n            setTimeout(() => {\r\n                if (targetEditor.getModel() === modelNow) {\r\n                    decorations.clear();\r\n                }\r\n            }, 350);\r\n        }\r\n        return targetEditor;\r\n    }\r\n    _openInPeek(target, model, range) {\r\n        const controller = ReferencesController.get(target);\r\n        if (controller && target.hasModel()) {\r\n            controller.toggleWidget(range !== null && range !== void 0 ? range : target.getSelection(), createCancelablePromise(_ => Promise.resolve(model)), this.configuration.openInPeek);\r\n        }\r\n        else {\r\n            model.dispose();\r\n        }\r\n    }\r\n}\r\nSymbolNavigationAction._allSymbolNavigationCommands = new Map();\r\nSymbolNavigationAction._activeAlternativeCommands = new Set();\r\n//#region --- DEFINITION\r\nexport class DefinitionAction extends SymbolNavigationAction {\r\n    async _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return new ReferencesModel(await getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, token), nls.localize('def.title', 'Definitions'));\r\n    }\r\n    _getNoResultFoundMessage(info) {\r\n        return info && info.word\r\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\r\n            : nls.localize('generic.noResults', \"No definition found\");\r\n    }\r\n    _getAlternativeCommand(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeDefinitionCommand;\r\n    }\r\n    _getGoToPreference(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleDefinitions;\r\n    }\r\n}\r\nregisterAction2((_a = class GoToDefinitionAction extends DefinitionAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: _a.id,\r\n                title: {\r\n                    value: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\r\n                    original: 'Go to Definition',\r\n                    mnemonicTitle: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: [{\r\n                        when: EditorContextKeys.editorTextFocus,\r\n                        primary: 70 /* KeyCode.F12 */,\r\n                        weight: 100 /* KeybindingWeight.EditorContrib */\r\n                    }, {\r\n                        when: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, IsWebContext),\r\n                        primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\r\n                        weight: 100 /* KeybindingWeight.EditorContrib */\r\n                    }],\r\n                menu: [{\r\n                        id: MenuId.EditorContext,\r\n                        group: 'navigation',\r\n                        order: 1.1\r\n                    }, {\r\n                        id: MenuId.MenubarGoMenu,\r\n                        precondition: null,\r\n                        group: '4_symbol_nav',\r\n                        order: 2,\r\n                    }]\r\n            });\r\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', _a.id);\r\n        }\r\n    },\r\n    _a.id = 'editor.action.revealDefinition',\r\n    _a));\r\nregisterAction2((_b = class OpenDefinitionToSideAction extends DefinitionAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: true,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: _b.id,\r\n                title: {\r\n                    value: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\r\n                    original: 'Open Definition to the Side'\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: [{\r\n                        when: EditorContextKeys.editorTextFocus,\r\n                        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 70 /* KeyCode.F12 */),\r\n                        weight: 100 /* KeybindingWeight.EditorContrib */\r\n                    }, {\r\n                        when: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, IsWebContext),\r\n                        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */),\r\n                        weight: 100 /* KeybindingWeight.EditorContrib */\r\n                    }]\r\n            });\r\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', _b.id);\r\n        }\r\n    },\r\n    _b.id = 'editor.action.revealDefinitionAside',\r\n    _b));\r\nregisterAction2((_c = class PeekDefinitionAction extends DefinitionAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: _c.id,\r\n                title: {\r\n                    value: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\r\n                    original: 'Peek Definition'\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: {\r\n                    when: EditorContextKeys.editorTextFocus,\r\n                    primary: 512 /* KeyMod.Alt */ | 70 /* KeyCode.F12 */,\r\n                    linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */ },\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                },\r\n                menu: {\r\n                    id: MenuId.EditorContextPeek,\r\n                    group: 'peek',\r\n                    order: 2\r\n                }\r\n            });\r\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', _c.id);\r\n        }\r\n    },\r\n    _c.id = 'editor.action.peekDefinition',\r\n    _c));\r\n//#endregion\r\n//#region --- DECLARATION\r\nclass DeclarationAction extends SymbolNavigationAction {\r\n    async _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return new ReferencesModel(await getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, token), nls.localize('decl.title', 'Declarations'));\r\n    }\r\n    _getNoResultFoundMessage(info) {\r\n        return info && info.word\r\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\r\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\r\n    }\r\n    _getAlternativeCommand(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeDeclarationCommand;\r\n    }\r\n    _getGoToPreference(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleDeclarations;\r\n    }\r\n}\r\nregisterAction2((_d = class GoToDeclarationAction extends DeclarationAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: _d.id,\r\n                title: {\r\n                    value: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\r\n                    original: 'Go to Declaration',\r\n                    mnemonicTitle: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                menu: [{\r\n                        id: MenuId.EditorContext,\r\n                        group: 'navigation',\r\n                        order: 1.3\r\n                    }, {\r\n                        id: MenuId.MenubarGoMenu,\r\n                        precondition: null,\r\n                        group: '4_symbol_nav',\r\n                        order: 3,\r\n                    }],\r\n            });\r\n        }\r\n        _getNoResultFoundMessage(info) {\r\n            return info && info.word\r\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\r\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\r\n        }\r\n    },\r\n    _d.id = 'editor.action.revealDeclaration',\r\n    _d));\r\nregisterAction2(class PeekDeclarationAction extends DeclarationAction {\r\n    constructor() {\r\n        super({\r\n            openToSide: false,\r\n            openInPeek: true,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.peekDeclaration',\r\n            title: {\r\n                value: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\r\n                original: 'Peek Declaration'\r\n            },\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n            menu: {\r\n                id: MenuId.EditorContextPeek,\r\n                group: 'peek',\r\n                order: 3\r\n            }\r\n        });\r\n    }\r\n});\r\n//#endregion\r\n//#region --- TYPE DEFINITION\r\nclass TypeDefinitionAction extends SymbolNavigationAction {\r\n    async _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return new ReferencesModel(await getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, token), nls.localize('typedef.title', 'Type Definitions'));\r\n    }\r\n    _getNoResultFoundMessage(info) {\r\n        return info && info.word\r\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\r\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\r\n    }\r\n    _getAlternativeCommand(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeTypeDefinitionCommand;\r\n    }\r\n    _getGoToPreference(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleTypeDefinitions;\r\n    }\r\n}\r\nregisterAction2((_e = class GoToTypeDefinitionAction extends TypeDefinitionAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: _e.ID,\r\n                title: {\r\n                    value: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\r\n                    original: 'Go to Type Definition',\r\n                    mnemonicTitle: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: {\r\n                    when: EditorContextKeys.editorTextFocus,\r\n                    primary: 0,\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                },\r\n                menu: [{\r\n                        id: MenuId.EditorContext,\r\n                        group: 'navigation',\r\n                        order: 1.4\r\n                    }, {\r\n                        id: MenuId.MenubarGoMenu,\r\n                        precondition: null,\r\n                        group: '4_symbol_nav',\r\n                        order: 3,\r\n                    }]\r\n            });\r\n        }\r\n    },\r\n    _e.ID = 'editor.action.goToTypeDefinition',\r\n    _e));\r\nregisterAction2((_f = class PeekTypeDefinitionAction extends TypeDefinitionAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: _f.ID,\r\n                title: {\r\n                    value: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\r\n                    original: 'Peek Type Definition'\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                menu: {\r\n                    id: MenuId.EditorContextPeek,\r\n                    group: 'peek',\r\n                    order: 4\r\n                }\r\n            });\r\n        }\r\n    },\r\n    _f.ID = 'editor.action.peekTypeDefinition',\r\n    _f));\r\n//#endregion\r\n//#region --- IMPLEMENTATION\r\nclass ImplementationAction extends SymbolNavigationAction {\r\n    async _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return new ReferencesModel(await getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, token), nls.localize('impl.title', 'Implementations'));\r\n    }\r\n    _getNoResultFoundMessage(info) {\r\n        return info && info.word\r\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\r\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\r\n    }\r\n    _getAlternativeCommand(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeImplementationCommand;\r\n    }\r\n    _getGoToPreference(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleImplementations;\r\n    }\r\n}\r\nregisterAction2((_g = class GoToImplementationAction extends ImplementationAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: _g.ID,\r\n                title: {\r\n                    value: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\r\n                    original: 'Go to Implementations',\r\n                    mnemonicTitle: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: {\r\n                    when: EditorContextKeys.editorTextFocus,\r\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                },\r\n                menu: [{\r\n                        id: MenuId.EditorContext,\r\n                        group: 'navigation',\r\n                        order: 1.45\r\n                    }, {\r\n                        id: MenuId.MenubarGoMenu,\r\n                        precondition: null,\r\n                        group: '4_symbol_nav',\r\n                        order: 4,\r\n                    }]\r\n            });\r\n        }\r\n    },\r\n    _g.ID = 'editor.action.goToImplementation',\r\n    _g));\r\nregisterAction2((_h = class PeekImplementationAction extends ImplementationAction {\r\n        constructor() {\r\n            super({\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: _h.ID,\r\n                title: {\r\n                    value: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\r\n                    original: 'Peek Implementations'\r\n                },\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n                keybinding: {\r\n                    when: EditorContextKeys.editorTextFocus,\r\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\r\n                    weight: 100 /* KeybindingWeight.EditorContrib */\r\n                },\r\n                menu: {\r\n                    id: MenuId.EditorContextPeek,\r\n                    group: 'peek',\r\n                    order: 5\r\n                }\r\n            });\r\n        }\r\n    },\r\n    _h.ID = 'editor.action.peekImplementation',\r\n    _h));\r\n//#endregion\r\n//#region --- REFERENCES\r\nclass ReferencesAction extends SymbolNavigationAction {\r\n    _getNoResultFoundMessage(info) {\r\n        return info\r\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\r\n            : nls.localize('references.noGeneric', \"No references found\");\r\n    }\r\n    _getAlternativeCommand(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeReferenceCommand;\r\n    }\r\n    _getGoToPreference(editor) {\r\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleReferences;\r\n    }\r\n}\r\nregisterAction2(class GoToReferencesAction extends ReferencesAction {\r\n    constructor() {\r\n        super({\r\n            openToSide: false,\r\n            openInPeek: false,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.goToReferences',\r\n            title: {\r\n                value: nls.localize('goToReferences.label', \"Go to References\"),\r\n                original: 'Go to References',\r\n                mnemonicTitle: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\r\n            },\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n            keybinding: {\r\n                when: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menu: [{\r\n                    id: MenuId.EditorContext,\r\n                    group: 'navigation',\r\n                    order: 1.45\r\n                }, {\r\n                    id: MenuId.MenubarGoMenu,\r\n                    precondition: null,\r\n                    group: '4_symbol_nav',\r\n                    order: 5,\r\n                }]\r\n        });\r\n    }\r\n    async _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return new ReferencesModel(await getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, true, token), nls.localize('ref.title', 'References'));\r\n    }\r\n});\r\nregisterAction2(class PeekReferencesAction extends ReferencesAction {\r\n    constructor() {\r\n        super({\r\n            openToSide: false,\r\n            openInPeek: true,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.referenceSearch.trigger',\r\n            title: {\r\n                value: nls.localize('references.action.label', \"Peek References\"),\r\n                original: 'Peek References'\r\n            },\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n            menu: {\r\n                id: MenuId.EditorContextPeek,\r\n                group: 'peek',\r\n                order: 6\r\n            }\r\n        });\r\n    }\r\n    async _getLocationModel(languageFeaturesService, model, position, token) {\r\n        return new ReferencesModel(await getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, token), nls.localize('ref.title', 'References'));\r\n    }\r\n});\r\n//#endregion\r\n//#region --- GENERIC goto symbols command\r\nclass GenericGoToLocationAction extends SymbolNavigationAction {\r\n    constructor(config, _references, _gotoMultipleBehaviour) {\r\n        super(config, {\r\n            id: 'editor.action.goToLocation',\r\n            title: {\r\n                value: nls.localize('label.generic', \"Go to Any Symbol\"),\r\n                original: 'Go to Any Symbol'\r\n            },\r\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\r\n        });\r\n        this._references = _references;\r\n        this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\r\n    }\r\n    async _getLocationModel(languageFeaturesService, _model, _position, _token) {\r\n        return new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'));\r\n    }\r\n    _getNoResultFoundMessage(info) {\r\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\r\n    }\r\n    _getGoToPreference(editor) {\r\n        var _j;\r\n        return (_j = this._gotoMultipleBehaviour) !== null && _j !== void 0 ? _j : editor.getOption(58 /* EditorOption.gotoLocation */).multipleReferences;\r\n    }\r\n    _getAlternativeCommand() { return ''; }\r\n}\r\nCommandsRegistry.registerCommand({\r\n    id: 'editor.action.goToLocations',\r\n    metadata: {\r\n        description: 'Go to locations from a position in a file',\r\n        args: [\r\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\r\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\r\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\r\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\r\n            { name: 'noResultsMessage', description: 'Human readable message that shows when locations is empty.' },\r\n        ]\r\n    },\r\n    handler: async (accessor, resource, position, references, multiple, noResultsMessage, openInPeek) => {\r\n        assertType(URI.isUri(resource));\r\n        assertType(corePosition.Position.isIPosition(position));\r\n        assertType(Array.isArray(references));\r\n        assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\r\n        assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\r\n        const editorService = accessor.get(ICodeEditorService);\r\n        const editor = await editorService.openCodeEditor({ resource }, editorService.getFocusedCodeEditor());\r\n        if (isCodeEditor(editor)) {\r\n            editor.setPosition(position);\r\n            editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\r\n            return editor.invokeWithinContext(accessor => {\r\n                const command = new class extends GenericGoToLocationAction {\r\n                    _getNoResultFoundMessage(info) {\r\n                        return noResultsMessage || super._getNoResultFoundMessage(info);\r\n                    }\r\n                }({\r\n                    muteMessage: !Boolean(noResultsMessage),\r\n                    openInPeek: Boolean(openInPeek),\r\n                    openToSide: false\r\n                }, references, multiple);\r\n                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\r\n            });\r\n        }\r\n    }\r\n});\r\nCommandsRegistry.registerCommand({\r\n    id: 'editor.action.peekLocations',\r\n    metadata: {\r\n        description: 'Peek locations from a position in a file',\r\n        args: [\r\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\r\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\r\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\r\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\r\n        ]\r\n    },\r\n    handler: async (accessor, resource, position, references, multiple) => {\r\n        accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, undefined, true);\r\n    }\r\n});\r\n//#endregion\r\n//#region --- REFERENCE search special commands\r\nCommandsRegistry.registerCommand({\r\n    id: 'editor.action.findReferences',\r\n    handler: (accessor, resource, position) => {\r\n        assertType(URI.isUri(resource));\r\n        assertType(corePosition.Position.isIPosition(position));\r\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n        const codeEditorService = accessor.get(ICodeEditorService);\r\n        return codeEditorService.openCodeEditor({ resource }, codeEditorService.getFocusedCodeEditor()).then(control => {\r\n            if (!isCodeEditor(control) || !control.hasModel()) {\r\n                return undefined;\r\n            }\r\n            const controller = ReferencesController.get(control);\r\n            if (!controller) {\r\n                return undefined;\r\n            }\r\n            const references = createCancelablePromise(token => getReferencesAtPosition(languageFeaturesService.referenceProvider, control.getModel(), corePosition.Position.lift(position), false, token).then(references => new ReferencesModel(references, nls.localize('ref.title', 'References'))));\r\n            const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n            return Promise.resolve(controller.toggleWidget(range, references, false));\r\n        });\r\n    }\r\n});\r\n// use NEW command\r\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\r\n//#endregion\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../dom.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\r\nimport { Disposable } from '../../../common/lifecycle.js';\r\nimport './hover.css';\r\nimport { localize } from '../../../../nls.js';\r\nconst $ = dom.$;\r\nexport class HoverWidget extends Disposable {\r\n    constructor() {\r\n        super();\r\n        this.containerDomNode = document.createElement('div');\r\n        this.containerDomNode.className = 'monaco-hover';\r\n        this.containerDomNode.tabIndex = 0;\r\n        this.containerDomNode.setAttribute('role', 'tooltip');\r\n        this.contentsDomNode = document.createElement('div');\r\n        this.contentsDomNode.className = 'monaco-hover-content';\r\n        this.scrollbar = this._register(new DomScrollableElement(this.contentsDomNode, {\r\n            consumeMouseWheelIfScrollbarIsNeeded: true\r\n        }));\r\n        this.containerDomNode.appendChild(this.scrollbar.getDomNode());\r\n    }\r\n    onContentsChanged() {\r\n        this.scrollbar.scanDomNode();\r\n    }\r\n}\r\nexport class HoverAction extends Disposable {\r\n    static render(parent, actionOptions, keybindingLabel) {\r\n        return new HoverAction(parent, actionOptions, keybindingLabel);\r\n    }\r\n    constructor(parent, actionOptions, keybindingLabel) {\r\n        super();\r\n        this.actionContainer = dom.append(parent, $('div.action-container'));\r\n        this.actionContainer.setAttribute('tabindex', '0');\r\n        this.action = dom.append(this.actionContainer, $('a.action'));\r\n        this.action.setAttribute('role', 'button');\r\n        if (actionOptions.iconClass) {\r\n            dom.append(this.action, $(`span.icon.${actionOptions.iconClass}`));\r\n        }\r\n        const label = dom.append(this.action, $('span'));\r\n        label.textContent = keybindingLabel ? `${actionOptions.label} (${keybindingLabel})` : actionOptions.label;\r\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.CLICK, e => {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            actionOptions.run(this.actionContainer);\r\n        }));\r\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.KEY_DOWN, e => {\r\n            const event = new StandardKeyboardEvent(e);\r\n            if (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */)) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                actionOptions.run(this.actionContainer);\r\n            }\r\n        }));\r\n        this.setEnabled(true);\r\n    }\r\n    setEnabled(enabled) {\r\n        if (enabled) {\r\n            this.actionContainer.classList.remove('disabled');\r\n            this.actionContainer.removeAttribute('aria-disabled');\r\n        }\r\n        else {\r\n            this.actionContainer.classList.add('disabled');\r\n            this.actionContainer.setAttribute('aria-disabled', 'true');\r\n        }\r\n    }\r\n}\r\nexport function getHoverAccessibleViewHint(shouldHaveHint, keybinding) {\r\n    return shouldHaveHint && keybinding ? localize('acessibleViewHint', \"Inspect this in the accessible view with {0}.\", keybinding) : shouldHaveHint ? localize('acessibleViewHintNoKbOpen', \"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding.\") : '';\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createCancelableAsyncIterable, RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nexport class HoverResult {\r\n    constructor(value, isComplete, hasLoadingMessage) {\r\n        this.value = value;\r\n        this.isComplete = isComplete;\r\n        this.hasLoadingMessage = hasLoadingMessage;\r\n    }\r\n}\r\n/**\r\n * Computing the hover is very fine tuned.\r\n *\r\n * Suppose the hover delay is 300ms (the default). Then, when resting the mouse at an anchor:\r\n * - at 150ms, the async computation is triggered (i.e. semantic hover)\r\n *   - if async results already come in, they are not rendered yet.\r\n * - at 300ms, the sync computation is triggered (i.e. decorations, markers)\r\n *   - if there are sync or async results, they are rendered.\r\n * - at 900ms, if the async computation hasn't finished, a \"Loading...\" result is added.\r\n */\r\nexport class HoverOperation extends Disposable {\r\n    constructor(_editor, _computer) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._computer = _computer;\r\n        this._onResult = this._register(new Emitter());\r\n        this.onResult = this._onResult.event;\r\n        this._firstWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerAsyncComputation(), 0));\r\n        this._secondWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerSyncComputation(), 0));\r\n        this._loadingMessageScheduler = this._register(new RunOnceScheduler(() => this._triggerLoadingMessage(), 0));\r\n        this._state = 0 /* HoverOperationState.Idle */;\r\n        this._asyncIterable = null;\r\n        this._asyncIterableDone = false;\r\n        this._result = [];\r\n    }\r\n    dispose() {\r\n        if (this._asyncIterable) {\r\n            this._asyncIterable.cancel();\r\n            this._asyncIterable = null;\r\n        }\r\n        super.dispose();\r\n    }\r\n    get _hoverTime() {\r\n        return this._editor.getOption(60 /* EditorOption.hover */).delay;\r\n    }\r\n    get _firstWaitTime() {\r\n        return this._hoverTime / 2;\r\n    }\r\n    get _secondWaitTime() {\r\n        return this._hoverTime - this._firstWaitTime;\r\n    }\r\n    get _loadingMessageTime() {\r\n        return 3 * this._hoverTime;\r\n    }\r\n    _setState(state, fireResult = true) {\r\n        this._state = state;\r\n        if (fireResult) {\r\n            this._fireResult();\r\n        }\r\n    }\r\n    _triggerAsyncComputation() {\r\n        this._setState(2 /* HoverOperationState.SecondWait */);\r\n        this._secondWaitScheduler.schedule(this._secondWaitTime);\r\n        if (this._computer.computeAsync) {\r\n            this._asyncIterableDone = false;\r\n            this._asyncIterable = createCancelableAsyncIterable(token => this._computer.computeAsync(token));\r\n            (async () => {\r\n                try {\r\n                    for await (const item of this._asyncIterable) {\r\n                        if (item) {\r\n                            this._result.push(item);\r\n                            this._fireResult();\r\n                        }\r\n                    }\r\n                    this._asyncIterableDone = true;\r\n                    if (this._state === 3 /* HoverOperationState.WaitingForAsync */ || this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */) {\r\n                        this._setState(0 /* HoverOperationState.Idle */);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    onUnexpectedError(e);\r\n                }\r\n            })();\r\n        }\r\n        else {\r\n            this._asyncIterableDone = true;\r\n        }\r\n    }\r\n    _triggerSyncComputation() {\r\n        if (this._computer.computeSync) {\r\n            this._result = this._result.concat(this._computer.computeSync());\r\n        }\r\n        this._setState(this._asyncIterableDone ? 0 /* HoverOperationState.Idle */ : 3 /* HoverOperationState.WaitingForAsync */);\r\n    }\r\n    _triggerLoadingMessage() {\r\n        if (this._state === 3 /* HoverOperationState.WaitingForAsync */) {\r\n            this._setState(4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\r\n        }\r\n    }\r\n    _fireResult() {\r\n        if (this._state === 1 /* HoverOperationState.FirstWait */ || this._state === 2 /* HoverOperationState.SecondWait */) {\r\n            // Do not send out results before the hover time\r\n            return;\r\n        }\r\n        const isComplete = (this._state === 0 /* HoverOperationState.Idle */);\r\n        const hasLoadingMessage = (this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\r\n        this._onResult.fire(new HoverResult(this._result.slice(0), isComplete, hasLoadingMessage));\r\n    }\r\n    start(mode) {\r\n        if (mode === 0 /* HoverStartMode.Delayed */) {\r\n            if (this._state === 0 /* HoverOperationState.Idle */) {\r\n                this._setState(1 /* HoverOperationState.FirstWait */);\r\n                this._firstWaitScheduler.schedule(this._firstWaitTime);\r\n                this._loadingMessageScheduler.schedule(this._loadingMessageTime);\r\n            }\r\n        }\r\n        else {\r\n            switch (this._state) {\r\n                case 0 /* HoverOperationState.Idle */:\r\n                    this._triggerAsyncComputation();\r\n                    this._secondWaitScheduler.cancel();\r\n                    this._triggerSyncComputation();\r\n                    break;\r\n                case 2 /* HoverOperationState.SecondWait */:\r\n                    this._secondWaitScheduler.cancel();\r\n                    this._triggerSyncComputation();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    cancel() {\r\n        this._firstWaitScheduler.cancel();\r\n        this._secondWaitScheduler.cancel();\r\n        this._loadingMessageScheduler.cancel();\r\n        if (this._asyncIterable) {\r\n            this._asyncIterable.cancel();\r\n            this._asyncIterable = null;\r\n        }\r\n        this._result = [];\r\n        this._setState(0 /* HoverOperationState.Idle */, false);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nconst TOP_HEIGHT = 30;\r\nconst BOTTOM_HEIGHT = 24;\r\nexport class ResizableContentWidget extends Disposable {\r\n    constructor(_editor, minimumSize = new dom.Dimension(10, 10)) {\r\n        super();\r\n        this._editor = _editor;\r\n        this.allowEditorOverflow = true;\r\n        this.suppressMouseDown = false;\r\n        this._resizableNode = this._register(new ResizableHTMLElement());\r\n        this._contentPosition = null;\r\n        this._isResizing = false;\r\n        this._resizableNode.domNode.style.position = 'absolute';\r\n        this._resizableNode.minSize = dom.Dimension.lift(minimumSize);\r\n        this._resizableNode.layout(minimumSize.height, minimumSize.width);\r\n        this._resizableNode.enableSashes(true, true, true, true);\r\n        this._register(this._resizableNode.onDidResize(e => {\r\n            this._resize(new dom.Dimension(e.dimension.width, e.dimension.height));\r\n            if (e.done) {\r\n                this._isResizing = false;\r\n            }\r\n        }));\r\n        this._register(this._resizableNode.onDidWillResize(() => {\r\n            this._isResizing = true;\r\n        }));\r\n    }\r\n    get isResizing() {\r\n        return this._isResizing;\r\n    }\r\n    getDomNode() {\r\n        return this._resizableNode.domNode;\r\n    }\r\n    getPosition() {\r\n        return this._contentPosition;\r\n    }\r\n    get position() {\r\n        var _a;\r\n        return ((_a = this._contentPosition) === null || _a === void 0 ? void 0 : _a.position) ? Position.lift(this._contentPosition.position) : undefined;\r\n    }\r\n    _availableVerticalSpaceAbove(position) {\r\n        const editorDomNode = this._editor.getDomNode();\r\n        const mouseBox = this._editor.getScrolledVisiblePosition(position);\r\n        if (!editorDomNode || !mouseBox) {\r\n            return;\r\n        }\r\n        const editorBox = dom.getDomNodePagePosition(editorDomNode);\r\n        return editorBox.top + mouseBox.top - TOP_HEIGHT;\r\n    }\r\n    _availableVerticalSpaceBelow(position) {\r\n        const editorDomNode = this._editor.getDomNode();\r\n        const mouseBox = this._editor.getScrolledVisiblePosition(position);\r\n        if (!editorDomNode || !mouseBox) {\r\n            return;\r\n        }\r\n        const editorBox = dom.getDomNodePagePosition(editorDomNode);\r\n        const bodyBox = dom.getClientArea(editorDomNode.ownerDocument.body);\r\n        const mouseBottom = editorBox.top + mouseBox.top + mouseBox.height;\r\n        return bodyBox.height - mouseBottom - BOTTOM_HEIGHT;\r\n    }\r\n    _findPositionPreference(widgetHeight, showAtPosition) {\r\n        var _a, _b;\r\n        const maxHeightBelow = Math.min((_a = this._availableVerticalSpaceBelow(showAtPosition)) !== null && _a !== void 0 ? _a : Infinity, widgetHeight);\r\n        const maxHeightAbove = Math.min((_b = this._availableVerticalSpaceAbove(showAtPosition)) !== null && _b !== void 0 ? _b : Infinity, widgetHeight);\r\n        const maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow), widgetHeight);\r\n        const height = Math.min(widgetHeight, maxHeight);\r\n        let renderingAbove;\r\n        if (this._editor.getOption(60 /* EditorOption.hover */).above) {\r\n            renderingAbove = height <= maxHeightAbove ? 1 /* ContentWidgetPositionPreference.ABOVE */ : 2 /* ContentWidgetPositionPreference.BELOW */;\r\n        }\r\n        else {\r\n            renderingAbove = height <= maxHeightBelow ? 2 /* ContentWidgetPositionPreference.BELOW */ : 1 /* ContentWidgetPositionPreference.ABOVE */;\r\n        }\r\n        if (renderingAbove === 1 /* ContentWidgetPositionPreference.ABOVE */) {\r\n            this._resizableNode.enableSashes(true, true, false, false);\r\n        }\r\n        else {\r\n            this._resizableNode.enableSashes(false, true, true, false);\r\n        }\r\n        return renderingAbove;\r\n    }\r\n    _resize(dimension) {\r\n        this._resizableNode.layout(dimension.height, dimension.width);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar ContentHoverController_1, ContentHoverWidget_1;\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { HoverAction, HoverWidget, getHoverAccessibleViewHint } from '../../../../base/browser/ui/hover/hoverWidget.js';\r\nimport { coalesce } from '../../../../base/common/arrays.js';\r\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { TokenizationRegistry } from '../../../common/languages.js';\r\nimport { HoverOperation } from './hoverOperation.js';\r\nimport { HoverParticipantRegistry, HoverRangeAnchor } from './hoverTypes.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { ResizableContentWidget } from './resizableContentWidget.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\r\nconst $ = dom.$;\r\nlet ContentHoverController = ContentHoverController_1 = class ContentHoverController extends Disposable {\r\n    constructor(_editor, _instantiationService, _keybindingService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._instantiationService = _instantiationService;\r\n        this._keybindingService = _keybindingService;\r\n        this._currentResult = null;\r\n        this._widget = this._register(this._instantiationService.createInstance(ContentHoverWidget, this._editor));\r\n        // Instantiate participants and sort them by `hoverOrdinal` which is relevant for rendering order.\r\n        this._participants = [];\r\n        for (const participant of HoverParticipantRegistry.getAll()) {\r\n            this._participants.push(this._instantiationService.createInstance(participant, this._editor));\r\n        }\r\n        this._participants.sort((p1, p2) => p1.hoverOrdinal - p2.hoverOrdinal);\r\n        this._computer = new ContentHoverComputer(this._editor, this._participants);\r\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\r\n        this._register(this._hoverOperation.onResult((result) => {\r\n            if (!this._computer.anchor) {\r\n                // invalid state, ignore result\r\n                return;\r\n            }\r\n            const messages = (result.hasLoadingMessage ? this._addLoadingMessage(result.value) : result.value);\r\n            this._withResult(new HoverResult(this._computer.anchor, messages, result.isComplete));\r\n        }));\r\n        this._register(dom.addStandardDisposableListener(this._widget.getDomNode(), 'keydown', (e) => {\r\n            if (e.equals(9 /* KeyCode.Escape */)) {\r\n                this.hide();\r\n            }\r\n        }));\r\n        this._register(TokenizationRegistry.onDidChange(() => {\r\n            if (this._widget.position && this._currentResult) {\r\n                this._setCurrentResult(this._currentResult); // render again\r\n            }\r\n        }));\r\n    }\r\n    get widget() {\r\n        return this._widget;\r\n    }\r\n    /**\r\n     * Returns true if the hover shows now or will show.\r\n     */\r\n    maybeShowAt(mouseEvent) {\r\n        if (this._widget.isResizing) {\r\n            return true;\r\n        }\r\n        const anchorCandidates = [];\r\n        for (const participant of this._participants) {\r\n            if (participant.suggestHoverAnchor) {\r\n                const anchor = participant.suggestHoverAnchor(mouseEvent);\r\n                if (anchor) {\r\n                    anchorCandidates.push(anchor);\r\n                }\r\n            }\r\n        }\r\n        const target = mouseEvent.target;\r\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\r\n            anchorCandidates.push(new HoverRangeAnchor(0, target.range, mouseEvent.event.posx, mouseEvent.event.posy));\r\n        }\r\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\r\n            const epsilon = this._editor.getOption(50 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth / 2;\r\n            if (!target.detail.isAfterLines && typeof target.detail.horizontalDistanceToText === 'number' && target.detail.horizontalDistanceToText < epsilon) {\r\n                // Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\r\n                anchorCandidates.push(new HoverRangeAnchor(0, target.range, mouseEvent.event.posx, mouseEvent.event.posy));\r\n            }\r\n        }\r\n        if (anchorCandidates.length === 0) {\r\n            return this._startShowingOrUpdateHover(null, 0 /* HoverStartMode.Delayed */, 0 /* HoverStartSource.Mouse */, false, mouseEvent);\r\n        }\r\n        anchorCandidates.sort((a, b) => b.priority - a.priority);\r\n        return this._startShowingOrUpdateHover(anchorCandidates[0], 0 /* HoverStartMode.Delayed */, 0 /* HoverStartSource.Mouse */, false, mouseEvent);\r\n    }\r\n    startShowingAtRange(range, mode, source, focus) {\r\n        this._startShowingOrUpdateHover(new HoverRangeAnchor(0, range, undefined, undefined), mode, source, focus, null);\r\n    }\r\n    /**\r\n     * Returns true if the hover shows now or will show.\r\n     */\r\n    _startShowingOrUpdateHover(anchor, mode, source, focus, mouseEvent) {\r\n        if (!this._widget.position || !this._currentResult) {\r\n            // The hover is not visible\r\n            if (anchor) {\r\n                this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        // The hover is currently visible\r\n        const hoverIsSticky = this._editor.getOption(60 /* EditorOption.hover */).sticky;\r\n        const isGettingCloser = (hoverIsSticky && mouseEvent && this._widget.isMouseGettingCloser(mouseEvent.event.posx, mouseEvent.event.posy));\r\n        if (isGettingCloser) {\r\n            // The mouse is getting closer to the hover, so we will keep the hover untouched\r\n            // But we will kick off a hover update at the new anchor, insisting on keeping the hover visible.\r\n            if (anchor) {\r\n                this._startHoverOperationIfNecessary(anchor, mode, source, focus, true);\r\n            }\r\n            return true;\r\n        }\r\n        if (!anchor) {\r\n            this._setCurrentResult(null);\r\n            return false;\r\n        }\r\n        if (anchor && this._currentResult.anchor.equals(anchor)) {\r\n            // The widget is currently showing results for the exact same anchor, so no update is needed\r\n            return true;\r\n        }\r\n        if (!anchor.canAdoptVisibleHover(this._currentResult.anchor, this._widget.position)) {\r\n            // The new anchor is not compatible with the previous anchor\r\n            this._setCurrentResult(null);\r\n            this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\r\n            return true;\r\n        }\r\n        // We aren't getting any closer to the hover, so we will filter existing results\r\n        // and keep those which also apply to the new anchor.\r\n        this._setCurrentResult(this._currentResult.filter(anchor));\r\n        this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\r\n        return true;\r\n    }\r\n    _startHoverOperationIfNecessary(anchor, mode, source, focus, insistOnKeepingHoverVisible) {\r\n        if (this._computer.anchor && this._computer.anchor.equals(anchor)) {\r\n            // We have to start a hover operation at the exact same anchor as before, so no work is needed\r\n            return;\r\n        }\r\n        this._hoverOperation.cancel();\r\n        this._computer.anchor = anchor;\r\n        this._computer.shouldFocus = focus;\r\n        this._computer.source = source;\r\n        this._computer.insistOnKeepingHoverVisible = insistOnKeepingHoverVisible;\r\n        this._hoverOperation.start(mode);\r\n    }\r\n    _setCurrentResult(hoverResult) {\r\n        if (this._currentResult === hoverResult) {\r\n            // avoid updating the DOM to avoid resetting the user selection\r\n            return;\r\n        }\r\n        if (hoverResult && hoverResult.messages.length === 0) {\r\n            hoverResult = null;\r\n        }\r\n        this._currentResult = hoverResult;\r\n        if (this._currentResult) {\r\n            this._renderMessages(this._currentResult.anchor, this._currentResult.messages);\r\n        }\r\n        else {\r\n            this._widget.hide();\r\n        }\r\n    }\r\n    hide() {\r\n        this._computer.anchor = null;\r\n        this._hoverOperation.cancel();\r\n        this._setCurrentResult(null);\r\n    }\r\n    get isColorPickerVisible() {\r\n        return this._widget.isColorPickerVisible;\r\n    }\r\n    get isVisibleFromKeyboard() {\r\n        return this._widget.isVisibleFromKeyboard;\r\n    }\r\n    get isVisible() {\r\n        return this._widget.isVisible;\r\n    }\r\n    get isFocused() {\r\n        return this._widget.isFocused;\r\n    }\r\n    get isResizing() {\r\n        return this._widget.isResizing;\r\n    }\r\n    containsNode(node) {\r\n        return (node ? this._widget.getDomNode().contains(node) : false);\r\n    }\r\n    _addLoadingMessage(result) {\r\n        if (this._computer.anchor) {\r\n            for (const participant of this._participants) {\r\n                if (participant.createLoadingMessage) {\r\n                    const loadingMessage = participant.createLoadingMessage(this._computer.anchor);\r\n                    if (loadingMessage) {\r\n                        return result.slice(0).concat([loadingMessage]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    _withResult(hoverResult) {\r\n        if (this._widget.position && this._currentResult && this._currentResult.isComplete) {\r\n            // The hover is visible with a previous complete result.\r\n            if (!hoverResult.isComplete) {\r\n                // Instead of rendering the new partial result, we wait for the result to be complete.\r\n                return;\r\n            }\r\n            if (this._computer.insistOnKeepingHoverVisible && hoverResult.messages.length === 0) {\r\n                // The hover would now hide normally, so we'll keep the previous messages\r\n                return;\r\n            }\r\n        }\r\n        this._setCurrentResult(hoverResult);\r\n    }\r\n    _renderMessages(anchor, messages) {\r\n        const { showAtPosition, showAtSecondaryPosition, highlightRange } = ContentHoverController_1.computeHoverRanges(this._editor, anchor.range, messages);\r\n        const disposables = new DisposableStore();\r\n        const statusBar = disposables.add(new EditorHoverStatusBar(this._keybindingService));\r\n        const fragment = document.createDocumentFragment();\r\n        let colorPicker = null;\r\n        const context = {\r\n            fragment,\r\n            statusBar,\r\n            setColorPicker: (widget) => colorPicker = widget,\r\n            onContentsChanged: () => this._widget.onContentsChanged(),\r\n            setMinimumDimensions: (dimensions) => this._widget.setMinimumDimensions(dimensions),\r\n            hide: () => this.hide()\r\n        };\r\n        for (const participant of this._participants) {\r\n            const hoverParts = messages.filter(msg => msg.owner === participant);\r\n            if (hoverParts.length > 0) {\r\n                disposables.add(participant.renderHoverParts(context, hoverParts));\r\n            }\r\n        }\r\n        const isBeforeContent = messages.some(m => m.isBeforeContent);\r\n        if (statusBar.hasContent) {\r\n            fragment.appendChild(statusBar.hoverElement);\r\n        }\r\n        if (fragment.hasChildNodes()) {\r\n            if (highlightRange) {\r\n                const highlightDecoration = this._editor.createDecorationsCollection();\r\n                highlightDecoration.set([{\r\n                        range: highlightRange,\r\n                        options: ContentHoverController_1._DECORATION_OPTIONS\r\n                    }]);\r\n                disposables.add(toDisposable(() => {\r\n                    highlightDecoration.clear();\r\n                }));\r\n            }\r\n            this._widget.showAt(fragment, new ContentHoverVisibleData(colorPicker, showAtPosition, showAtSecondaryPosition, this._editor.getOption(60 /* EditorOption.hover */).above, this._computer.shouldFocus, this._computer.source, isBeforeContent, anchor.initialMousePosX, anchor.initialMousePosY, disposables));\r\n        }\r\n        else {\r\n            disposables.dispose();\r\n        }\r\n    }\r\n    static computeHoverRanges(editor, anchorRange, messages) {\r\n        let startColumnBoundary = 1;\r\n        if (editor.hasModel()) {\r\n            // Ensure the range is on the current view line\r\n            const viewModel = editor._getViewModel();\r\n            const coordinatesConverter = viewModel.coordinatesConverter;\r\n            const anchorViewRange = coordinatesConverter.convertModelRangeToViewRange(anchorRange);\r\n            const anchorViewRangeStart = new Position(anchorViewRange.startLineNumber, viewModel.getLineMinColumn(anchorViewRange.startLineNumber));\r\n            startColumnBoundary = coordinatesConverter.convertViewPositionToModelPosition(anchorViewRangeStart).column;\r\n        }\r\n        // The anchor range is always on a single line\r\n        const anchorLineNumber = anchorRange.startLineNumber;\r\n        let renderStartColumn = anchorRange.startColumn;\r\n        let highlightRange = messages[0].range;\r\n        let forceShowAtRange = null;\r\n        for (const msg of messages) {\r\n            highlightRange = Range.plusRange(highlightRange, msg.range);\r\n            if (msg.range.startLineNumber === anchorLineNumber && msg.range.endLineNumber === anchorLineNumber) {\r\n                // this message has a range that is completely sitting on the line of the anchor\r\n                renderStartColumn = Math.max(Math.min(renderStartColumn, msg.range.startColumn), startColumnBoundary);\r\n            }\r\n            if (msg.forceShowAtRange) {\r\n                forceShowAtRange = msg.range;\r\n            }\r\n        }\r\n        return {\r\n            showAtPosition: forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchorLineNumber, anchorRange.startColumn),\r\n            showAtSecondaryPosition: forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchorLineNumber, renderStartColumn),\r\n            highlightRange\r\n        };\r\n    }\r\n    focus() {\r\n        this._widget.focus();\r\n    }\r\n    scrollUp() {\r\n        this._widget.scrollUp();\r\n    }\r\n    scrollDown() {\r\n        this._widget.scrollDown();\r\n    }\r\n    scrollLeft() {\r\n        this._widget.scrollLeft();\r\n    }\r\n    scrollRight() {\r\n        this._widget.scrollRight();\r\n    }\r\n    pageUp() {\r\n        this._widget.pageUp();\r\n    }\r\n    pageDown() {\r\n        this._widget.pageDown();\r\n    }\r\n    goToTop() {\r\n        this._widget.goToTop();\r\n    }\r\n    goToBottom() {\r\n        this._widget.goToBottom();\r\n    }\r\n};\r\nContentHoverController._DECORATION_OPTIONS = ModelDecorationOptions.register({\r\n    description: 'content-hover-highlight',\r\n    className: 'hoverHighlight'\r\n});\r\nContentHoverController = ContentHoverController_1 = __decorate([\r\n    __param(1, IInstantiationService),\r\n    __param(2, IKeybindingService)\r\n], ContentHoverController);\r\nexport { ContentHoverController };\r\nclass HoverResult {\r\n    constructor(anchor, messages, isComplete) {\r\n        this.anchor = anchor;\r\n        this.messages = messages;\r\n        this.isComplete = isComplete;\r\n    }\r\n    filter(anchor) {\r\n        const filteredMessages = this.messages.filter((m) => m.isValidForHoverAnchor(anchor));\r\n        if (filteredMessages.length === this.messages.length) {\r\n            return this;\r\n        }\r\n        return new FilteredHoverResult(this, this.anchor, filteredMessages, this.isComplete);\r\n    }\r\n}\r\nclass FilteredHoverResult extends HoverResult {\r\n    constructor(original, anchor, messages, isComplete) {\r\n        super(anchor, messages, isComplete);\r\n        this.original = original;\r\n    }\r\n    filter(anchor) {\r\n        return this.original.filter(anchor);\r\n    }\r\n}\r\nclass ContentHoverVisibleData {\r\n    constructor(colorPicker, showAtPosition, showAtSecondaryPosition, preferAbove, stoleFocus, source, isBeforeContent, initialMousePosX, initialMousePosY, disposables) {\r\n        this.colorPicker = colorPicker;\r\n        this.showAtPosition = showAtPosition;\r\n        this.showAtSecondaryPosition = showAtSecondaryPosition;\r\n        this.preferAbove = preferAbove;\r\n        this.stoleFocus = stoleFocus;\r\n        this.source = source;\r\n        this.isBeforeContent = isBeforeContent;\r\n        this.initialMousePosX = initialMousePosX;\r\n        this.initialMousePosY = initialMousePosY;\r\n        this.disposables = disposables;\r\n        this.closestMouseDistance = undefined;\r\n    }\r\n}\r\nconst HORIZONTAL_SCROLLING_BY = 30;\r\nconst SCROLLBAR_WIDTH = 10;\r\nconst CONTAINER_HEIGHT_PADDING = 6;\r\nlet ContentHoverWidget = ContentHoverWidget_1 = class ContentHoverWidget extends ResizableContentWidget {\r\n    get isColorPickerVisible() {\r\n        var _a;\r\n        return Boolean((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.colorPicker);\r\n    }\r\n    get isVisibleFromKeyboard() {\r\n        var _a;\r\n        return (((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.source) === 1 /* HoverStartSource.Keyboard */);\r\n    }\r\n    get isVisible() {\r\n        var _a;\r\n        return (_a = this._hoverVisibleKey.get()) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    get isFocused() {\r\n        var _a;\r\n        return (_a = this._hoverFocusedKey.get()) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    constructor(editor, contextKeyService, _configurationService, _accessibilityService, _keybindingService) {\r\n        const minimumHeight = editor.getOption(66 /* EditorOption.lineHeight */) + 8;\r\n        const minimumWidth = 150;\r\n        const minimumSize = new dom.Dimension(minimumWidth, minimumHeight);\r\n        super(editor, minimumSize);\r\n        this._configurationService = _configurationService;\r\n        this._accessibilityService = _accessibilityService;\r\n        this._keybindingService = _keybindingService;\r\n        this._hover = this._register(new HoverWidget());\r\n        this._minimumSize = minimumSize;\r\n        this._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(contextKeyService);\r\n        this._hoverFocusedKey = EditorContextKeys.hoverFocused.bindTo(contextKeyService);\r\n        dom.append(this._resizableNode.domNode, this._hover.containerDomNode);\r\n        this._resizableNode.domNode.style.zIndex = '50';\r\n        this._register(this._editor.onDidLayoutChange(() => {\r\n            if (this.isVisible) {\r\n                this._updateMaxDimensions();\r\n            }\r\n        }));\r\n        this._register(this._editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\r\n                this._updateFont();\r\n            }\r\n        }));\r\n        const focusTracker = this._register(dom.trackFocus(this._resizableNode.domNode));\r\n        this._register(focusTracker.onDidFocus(() => {\r\n            this._hoverFocusedKey.set(true);\r\n        }));\r\n        this._register(focusTracker.onDidBlur(() => {\r\n            this._hoverFocusedKey.set(false);\r\n        }));\r\n        this._setHoverData(undefined);\r\n        this._editor.addContentWidget(this);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        super.dispose();\r\n        (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.disposables.dispose();\r\n        this._editor.removeContentWidget(this);\r\n    }\r\n    getId() {\r\n        return ContentHoverWidget_1.ID;\r\n    }\r\n    static _applyDimensions(container, width, height) {\r\n        const transformedWidth = typeof width === 'number' ? `${width}px` : width;\r\n        const transformedHeight = typeof height === 'number' ? `${height}px` : height;\r\n        container.style.width = transformedWidth;\r\n        container.style.height = transformedHeight;\r\n    }\r\n    _setContentsDomNodeDimensions(width, height) {\r\n        const contentsDomNode = this._hover.contentsDomNode;\r\n        return ContentHoverWidget_1._applyDimensions(contentsDomNode, width, height);\r\n    }\r\n    _setContainerDomNodeDimensions(width, height) {\r\n        const containerDomNode = this._hover.containerDomNode;\r\n        return ContentHoverWidget_1._applyDimensions(containerDomNode, width, height);\r\n    }\r\n    _setHoverWidgetDimensions(width, height) {\r\n        this._setContentsDomNodeDimensions(width, height);\r\n        this._setContainerDomNodeDimensions(width, height);\r\n        this._layoutContentWidget();\r\n    }\r\n    static _applyMaxDimensions(container, width, height) {\r\n        const transformedWidth = typeof width === 'number' ? `${width}px` : width;\r\n        const transformedHeight = typeof height === 'number' ? `${height}px` : height;\r\n        container.style.maxWidth = transformedWidth;\r\n        container.style.maxHeight = transformedHeight;\r\n    }\r\n    _setHoverWidgetMaxDimensions(width, height) {\r\n        ContentHoverWidget_1._applyMaxDimensions(this._hover.contentsDomNode, width, height);\r\n        ContentHoverWidget_1._applyMaxDimensions(this._hover.containerDomNode, width, height);\r\n        this._hover.containerDomNode.style.setProperty('--vscode-hover-maxWidth', typeof width === 'number' ? `${width}px` : width);\r\n        this._layoutContentWidget();\r\n    }\r\n    _hasHorizontalScrollbar() {\r\n        const scrollDimensions = this._hover.scrollbar.getScrollDimensions();\r\n        const hasHorizontalScrollbar = scrollDimensions.scrollWidth > scrollDimensions.width;\r\n        return hasHorizontalScrollbar;\r\n    }\r\n    _adjustContentsBottomPadding() {\r\n        const contentsDomNode = this._hover.contentsDomNode;\r\n        const extraBottomPadding = `${this._hover.scrollbar.options.horizontalScrollbarSize}px`;\r\n        if (contentsDomNode.style.paddingBottom !== extraBottomPadding) {\r\n            contentsDomNode.style.paddingBottom = extraBottomPadding;\r\n        }\r\n    }\r\n    _setAdjustedHoverWidgetDimensions(size) {\r\n        this._setHoverWidgetMaxDimensions('none', 'none');\r\n        const width = size.width;\r\n        const height = size.height;\r\n        this._setHoverWidgetDimensions(width, height);\r\n        // measure if widget has horizontal scrollbar after setting the dimensions\r\n        if (this._hasHorizontalScrollbar()) {\r\n            this._adjustContentsBottomPadding();\r\n            this._setContentsDomNodeDimensions(width, height - SCROLLBAR_WIDTH);\r\n        }\r\n    }\r\n    _updateResizableNodeMaxDimensions() {\r\n        var _a, _b;\r\n        const maxRenderingWidth = (_a = this._findMaximumRenderingWidth()) !== null && _a !== void 0 ? _a : Infinity;\r\n        const maxRenderingHeight = (_b = this._findMaximumRenderingHeight()) !== null && _b !== void 0 ? _b : Infinity;\r\n        this._resizableNode.maxSize = new dom.Dimension(maxRenderingWidth, maxRenderingHeight);\r\n        this._setHoverWidgetMaxDimensions(maxRenderingWidth, maxRenderingHeight);\r\n    }\r\n    _resize(size) {\r\n        var _a, _b;\r\n        ContentHoverWidget_1._lastDimensions = new dom.Dimension(size.width, size.height);\r\n        this._setAdjustedHoverWidgetDimensions(size);\r\n        this._resizableNode.layout(size.height, size.width);\r\n        this._updateResizableNodeMaxDimensions();\r\n        this._hover.scrollbar.scanDomNode();\r\n        this._editor.layoutContentWidget(this);\r\n        (_b = (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.colorPicker) === null || _b === void 0 ? void 0 : _b.layout();\r\n    }\r\n    _findAvailableSpaceVertically() {\r\n        var _a;\r\n        const position = (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.showAtPosition;\r\n        if (!position) {\r\n            return;\r\n        }\r\n        return this._positionPreference === 1 /* ContentWidgetPositionPreference.ABOVE */ ? this._availableVerticalSpaceAbove(position) : this._availableVerticalSpaceBelow(position);\r\n    }\r\n    _findMaximumRenderingHeight() {\r\n        const availableSpace = this._findAvailableSpaceVertically();\r\n        if (!availableSpace) {\r\n            return;\r\n        }\r\n        // Padding needed in order to stop the resizing down to a smaller height\r\n        let maximumHeight = CONTAINER_HEIGHT_PADDING;\r\n        Array.from(this._hover.contentsDomNode.children).forEach((hoverPart) => {\r\n            maximumHeight += hoverPart.clientHeight;\r\n        });\r\n        if (this._hasHorizontalScrollbar()) {\r\n            maximumHeight += SCROLLBAR_WIDTH;\r\n        }\r\n        return Math.min(availableSpace, maximumHeight);\r\n    }\r\n    _isHoverTextOverflowing() {\r\n        // To find out if the text is overflowing, we will disable wrapping, check the widths, and then re-enable wrapping\r\n        this._hover.containerDomNode.style.setProperty('--vscode-hover-whiteSpace', 'nowrap');\r\n        this._hover.containerDomNode.style.setProperty('--vscode-hover-sourceWhiteSpace', 'nowrap');\r\n        const overflowing = Array.from(this._hover.contentsDomNode.children).some((hoverElement) => {\r\n            return hoverElement.scrollWidth > hoverElement.clientWidth;\r\n        });\r\n        this._hover.containerDomNode.style.removeProperty('--vscode-hover-whiteSpace');\r\n        this._hover.containerDomNode.style.removeProperty('--vscode-hover-sourceWhiteSpace');\r\n        return overflowing;\r\n    }\r\n    _findMaximumRenderingWidth() {\r\n        if (!this._editor || !this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const overflowing = this._isHoverTextOverflowing();\r\n        const initialWidth = (typeof this._contentWidth === 'undefined'\r\n            ? 0\r\n            : this._contentWidth - 2 // - 2 for the borders\r\n        );\r\n        if (overflowing || this._hover.containerDomNode.clientWidth < initialWidth) {\r\n            const bodyBoxWidth = dom.getClientArea(this._hover.containerDomNode.ownerDocument.body).width;\r\n            const horizontalPadding = 14;\r\n            return bodyBoxWidth - horizontalPadding;\r\n        }\r\n        else {\r\n            return this._hover.containerDomNode.clientWidth + 2;\r\n        }\r\n    }\r\n    isMouseGettingCloser(posx, posy) {\r\n        if (!this._visibleData) {\r\n            return false;\r\n        }\r\n        if (typeof this._visibleData.initialMousePosX === 'undefined' || typeof this._visibleData.initialMousePosY === 'undefined') {\r\n            this._visibleData.initialMousePosX = posx;\r\n            this._visibleData.initialMousePosY = posy;\r\n            return false;\r\n        }\r\n        const widgetRect = dom.getDomNodePagePosition(this.getDomNode());\r\n        if (typeof this._visibleData.closestMouseDistance === 'undefined') {\r\n            this._visibleData.closestMouseDistance = computeDistanceFromPointToRectangle(this._visibleData.initialMousePosX, this._visibleData.initialMousePosY, widgetRect.left, widgetRect.top, widgetRect.width, widgetRect.height);\r\n        }\r\n        const distance = computeDistanceFromPointToRectangle(posx, posy, widgetRect.left, widgetRect.top, widgetRect.width, widgetRect.height);\r\n        if (distance > this._visibleData.closestMouseDistance + 4 /* tolerance of 4 pixels */) {\r\n            // The mouse is getting farther away\r\n            return false;\r\n        }\r\n        this._visibleData.closestMouseDistance = Math.min(this._visibleData.closestMouseDistance, distance);\r\n        return true;\r\n    }\r\n    _setHoverData(hoverData) {\r\n        var _a;\r\n        (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.disposables.dispose();\r\n        this._visibleData = hoverData;\r\n        this._hoverVisibleKey.set(!!hoverData);\r\n        this._hover.containerDomNode.classList.toggle('hidden', !hoverData);\r\n    }\r\n    _updateFont() {\r\n        const { fontSize, lineHeight } = this._editor.getOption(50 /* EditorOption.fontInfo */);\r\n        const contentsDomNode = this._hover.contentsDomNode;\r\n        contentsDomNode.style.fontSize = `${fontSize}px`;\r\n        contentsDomNode.style.lineHeight = `${lineHeight / fontSize}`;\r\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\r\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\r\n    }\r\n    _updateContent(node) {\r\n        const contentsDomNode = this._hover.contentsDomNode;\r\n        contentsDomNode.style.paddingBottom = '';\r\n        contentsDomNode.textContent = '';\r\n        contentsDomNode.appendChild(node);\r\n    }\r\n    _layoutContentWidget() {\r\n        this._editor.layoutContentWidget(this);\r\n        this._hover.onContentsChanged();\r\n    }\r\n    _updateMaxDimensions() {\r\n        const height = Math.max(this._editor.getLayoutInfo().height / 4, 250, ContentHoverWidget_1._lastDimensions.height);\r\n        const width = Math.max(this._editor.getLayoutInfo().width * 0.66, 500, ContentHoverWidget_1._lastDimensions.width);\r\n        this._setHoverWidgetMaxDimensions(width, height);\r\n    }\r\n    _render(node, hoverData) {\r\n        this._setHoverData(hoverData);\r\n        this._updateFont();\r\n        this._updateContent(node);\r\n        this._updateMaxDimensions();\r\n        this.onContentsChanged();\r\n        // Simply force a synchronous render on the editor\r\n        // such that the widget does not really render with left = '0px'\r\n        this._editor.render();\r\n    }\r\n    getPosition() {\r\n        var _a;\r\n        if (!this._visibleData) {\r\n            return null;\r\n        }\r\n        return {\r\n            position: this._visibleData.showAtPosition,\r\n            secondaryPosition: this._visibleData.showAtSecondaryPosition,\r\n            positionAffinity: this._visibleData.isBeforeContent ? 3 /* PositionAffinity.LeftOfInjectedText */ : undefined,\r\n            preference: [(_a = this._positionPreference) !== null && _a !== void 0 ? _a : 1 /* ContentWidgetPositionPreference.ABOVE */]\r\n        };\r\n    }\r\n    showAt(node, hoverData) {\r\n        var _a, _b, _c, _d;\r\n        if (!this._editor || !this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        this._render(node, hoverData);\r\n        const widgetHeight = dom.getTotalHeight(this._hover.containerDomNode);\r\n        const widgetPosition = hoverData.showAtPosition;\r\n        this._positionPreference = (_a = this._findPositionPreference(widgetHeight, widgetPosition)) !== null && _a !== void 0 ? _a : 1 /* ContentWidgetPositionPreference.ABOVE */;\r\n        // See https://github.com/microsoft/vscode/issues/140339\r\n        // TODO: Doing a second layout of the hover after force rendering the editor\r\n        this.onContentsChanged();\r\n        if (hoverData.stoleFocus) {\r\n            this._hover.containerDomNode.focus();\r\n        }\r\n        (_b = hoverData.colorPicker) === null || _b === void 0 ? void 0 : _b.layout();\r\n        // The aria label overrides the label, so if we add to it, add the contents of the hover\r\n        const hoverFocused = this._hover.containerDomNode.ownerDocument.activeElement === this._hover.containerDomNode;\r\n        const accessibleViewHint = hoverFocused && getHoverAccessibleViewHint(this._configurationService.getValue('accessibility.verbosity.hover') === true && this._accessibilityService.isScreenReaderOptimized(), (_d = (_c = this._keybindingService.lookupKeybinding('editor.action.accessibleView')) === null || _c === void 0 ? void 0 : _c.getAriaLabel()) !== null && _d !== void 0 ? _d : '');\r\n        if (accessibleViewHint) {\r\n            this._hover.contentsDomNode.ariaLabel = this._hover.contentsDomNode.textContent + ', ' + accessibleViewHint;\r\n        }\r\n    }\r\n    hide() {\r\n        if (!this._visibleData) {\r\n            return;\r\n        }\r\n        const stoleFocus = this._visibleData.stoleFocus || this._hoverFocusedKey.get();\r\n        this._setHoverData(undefined);\r\n        this._resizableNode.maxSize = new dom.Dimension(Infinity, Infinity);\r\n        this._resizableNode.clearSashHoverState();\r\n        this._hoverFocusedKey.set(false);\r\n        this._editor.layoutContentWidget(this);\r\n        if (stoleFocus) {\r\n            this._editor.focus();\r\n        }\r\n    }\r\n    _removeConstraintsRenderNormally() {\r\n        // Added because otherwise the initial size of the hover content is smaller than should be\r\n        const layoutInfo = this._editor.getLayoutInfo();\r\n        this._resizableNode.layout(layoutInfo.height, layoutInfo.width);\r\n        this._setHoverWidgetDimensions('auto', 'auto');\r\n    }\r\n    _adjustHoverHeightForScrollbar(height) {\r\n        var _a;\r\n        const containerDomNode = this._hover.containerDomNode;\r\n        const contentsDomNode = this._hover.contentsDomNode;\r\n        const maxRenderingHeight = (_a = this._findMaximumRenderingHeight()) !== null && _a !== void 0 ? _a : Infinity;\r\n        this._setContainerDomNodeDimensions(dom.getTotalWidth(containerDomNode), Math.min(maxRenderingHeight, height));\r\n        this._setContentsDomNodeDimensions(dom.getTotalWidth(contentsDomNode), Math.min(maxRenderingHeight, height - SCROLLBAR_WIDTH));\r\n    }\r\n    setMinimumDimensions(dimensions) {\r\n        // We combine the new minimum dimensions with the previous ones\r\n        this._minimumSize = new dom.Dimension(Math.max(this._minimumSize.width, dimensions.width), Math.max(this._minimumSize.height, dimensions.height));\r\n        this._updateMinimumWidth();\r\n    }\r\n    _updateMinimumWidth() {\r\n        const width = (typeof this._contentWidth === 'undefined'\r\n            ? this._minimumSize.width\r\n            : Math.min(this._contentWidth, this._minimumSize.width));\r\n        // We want to avoid that the hover is artificially large, so we use the content width as minimum width\r\n        this._resizableNode.minSize = new dom.Dimension(width, this._minimumSize.height);\r\n    }\r\n    onContentsChanged() {\r\n        var _a;\r\n        this._removeConstraintsRenderNormally();\r\n        const containerDomNode = this._hover.containerDomNode;\r\n        let height = dom.getTotalHeight(containerDomNode);\r\n        let width = dom.getTotalWidth(containerDomNode);\r\n        this._resizableNode.layout(height, width);\r\n        this._setHoverWidgetDimensions(width, height);\r\n        height = dom.getTotalHeight(containerDomNode);\r\n        width = dom.getTotalWidth(containerDomNode);\r\n        this._contentWidth = width;\r\n        this._updateMinimumWidth();\r\n        this._resizableNode.layout(height, width);\r\n        if (this._hasHorizontalScrollbar()) {\r\n            this._adjustContentsBottomPadding();\r\n            this._adjustHoverHeightForScrollbar(height);\r\n        }\r\n        if ((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.showAtPosition) {\r\n            const widgetHeight = dom.getTotalHeight(this._hover.containerDomNode);\r\n            this._positionPreference = this._findPositionPreference(widgetHeight, this._visibleData.showAtPosition);\r\n        }\r\n        this._layoutContentWidget();\r\n    }\r\n    focus() {\r\n        this._hover.containerDomNode.focus();\r\n    }\r\n    scrollUp() {\r\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\r\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop - fontInfo.lineHeight });\r\n    }\r\n    scrollDown() {\r\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\r\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop + fontInfo.lineHeight });\r\n    }\r\n    scrollLeft() {\r\n        const scrollLeft = this._hover.scrollbar.getScrollPosition().scrollLeft;\r\n        this._hover.scrollbar.setScrollPosition({ scrollLeft: scrollLeft - HORIZONTAL_SCROLLING_BY });\r\n    }\r\n    scrollRight() {\r\n        const scrollLeft = this._hover.scrollbar.getScrollPosition().scrollLeft;\r\n        this._hover.scrollbar.setScrollPosition({ scrollLeft: scrollLeft + HORIZONTAL_SCROLLING_BY });\r\n    }\r\n    pageUp() {\r\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\r\n        const scrollHeight = this._hover.scrollbar.getScrollDimensions().height;\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop - scrollHeight });\r\n    }\r\n    pageDown() {\r\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\r\n        const scrollHeight = this._hover.scrollbar.getScrollDimensions().height;\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop + scrollHeight });\r\n    }\r\n    goToTop() {\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: 0 });\r\n    }\r\n    goToBottom() {\r\n        this._hover.scrollbar.setScrollPosition({ scrollTop: this._hover.scrollbar.getScrollDimensions().scrollHeight });\r\n    }\r\n};\r\nContentHoverWidget.ID = 'editor.contrib.resizableContentHoverWidget';\r\nContentHoverWidget._lastDimensions = new dom.Dimension(0, 0);\r\nContentHoverWidget = ContentHoverWidget_1 = __decorate([\r\n    __param(1, IContextKeyService),\r\n    __param(2, IConfigurationService),\r\n    __param(3, IAccessibilityService),\r\n    __param(4, IKeybindingService)\r\n], ContentHoverWidget);\r\nexport { ContentHoverWidget };\r\nlet EditorHoverStatusBar = class EditorHoverStatusBar extends Disposable {\r\n    get hasContent() {\r\n        return this._hasContent;\r\n    }\r\n    constructor(_keybindingService) {\r\n        super();\r\n        this._keybindingService = _keybindingService;\r\n        this._hasContent = false;\r\n        this.hoverElement = $('div.hover-row.status-bar');\r\n        this.actionsElement = dom.append(this.hoverElement, $('div.actions'));\r\n    }\r\n    addAction(actionOptions) {\r\n        const keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\r\n        const keybindingLabel = keybinding ? keybinding.getLabel() : null;\r\n        this._hasContent = true;\r\n        return this._register(HoverAction.render(this.actionsElement, actionOptions, keybindingLabel));\r\n    }\r\n    append(element) {\r\n        const result = dom.append(this.actionsElement, element);\r\n        this._hasContent = true;\r\n        return result;\r\n    }\r\n};\r\nEditorHoverStatusBar = __decorate([\r\n    __param(0, IKeybindingService)\r\n], EditorHoverStatusBar);\r\nexport { EditorHoverStatusBar };\r\nclass ContentHoverComputer {\r\n    get anchor() { return this._anchor; }\r\n    set anchor(value) { this._anchor = value; }\r\n    get shouldFocus() { return this._shouldFocus; }\r\n    set shouldFocus(value) { this._shouldFocus = value; }\r\n    get source() { return this._source; }\r\n    set source(value) { this._source = value; }\r\n    get insistOnKeepingHoverVisible() { return this._insistOnKeepingHoverVisible; }\r\n    set insistOnKeepingHoverVisible(value) { this._insistOnKeepingHoverVisible = value; }\r\n    constructor(_editor, _participants) {\r\n        this._editor = _editor;\r\n        this._participants = _participants;\r\n        this._anchor = null;\r\n        this._shouldFocus = false;\r\n        this._source = 0 /* HoverStartSource.Mouse */;\r\n        this._insistOnKeepingHoverVisible = false;\r\n    }\r\n    static _getLineDecorations(editor, anchor) {\r\n        if (anchor.type !== 1 /* HoverAnchorType.Range */ && !anchor.supportsMarkerHover) {\r\n            return [];\r\n        }\r\n        const model = editor.getModel();\r\n        const lineNumber = anchor.range.startLineNumber;\r\n        if (lineNumber > model.getLineCount()) {\r\n            // invalid line\r\n            return [];\r\n        }\r\n        const maxColumn = model.getLineMaxColumn(lineNumber);\r\n        return editor.getLineDecorations(lineNumber).filter((d) => {\r\n            if (d.options.isWholeLine) {\r\n                return true;\r\n            }\r\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\r\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\r\n            if (d.options.showIfCollapsed) {\r\n                // Relax check around `showIfCollapsed` decorations to also include +/- 1 character\r\n                if (startColumn > anchor.range.startColumn + 1 || anchor.range.endColumn - 1 > endColumn) {\r\n                    return false;\r\n                }\r\n            }\r\n            else {\r\n                if (startColumn > anchor.range.startColumn || anchor.range.endColumn > endColumn) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n    computeAsync(token) {\r\n        const anchor = this._anchor;\r\n        if (!this._editor.hasModel() || !anchor) {\r\n            return AsyncIterableObject.EMPTY;\r\n        }\r\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, anchor);\r\n        return AsyncIterableObject.merge(this._participants.map((participant) => {\r\n            if (!participant.computeAsync) {\r\n                return AsyncIterableObject.EMPTY;\r\n            }\r\n            return participant.computeAsync(anchor, lineDecorations, token);\r\n        }));\r\n    }\r\n    computeSync() {\r\n        if (!this._editor.hasModel() || !this._anchor) {\r\n            return [];\r\n        }\r\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, this._anchor);\r\n        let result = [];\r\n        for (const participant of this._participants) {\r\n            result = result.concat(participant.computeSync(this._anchor, lineDecorations));\r\n        }\r\n        return coalesce(result);\r\n    }\r\n}\r\nfunction computeDistanceFromPointToRectangle(pointX, pointY, left, top, width, height) {\r\n    const x = (left + width / 2); // x center of rectangle\r\n    const y = (top + height / 2); // y center of rectangle\r\n    const dx = Math.max(Math.abs(pointX - x) - width / 2, 0);\r\n    const dy = Math.max(Math.abs(pointY - y) - height / 2, 0);\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { asArray } from '../../../../base/common/arrays.js';\r\nimport { isEmptyMarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\r\nimport { HoverOperation } from './hoverOperation.js';\r\nimport { HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\r\nconst $ = dom.$;\r\nexport class MarginHoverWidget extends Disposable {\r\n    constructor(editor, languageService, openerService) {\r\n        super();\r\n        this._renderDisposeables = this._register(new DisposableStore());\r\n        this._editor = editor;\r\n        this._isVisible = false;\r\n        this._messages = [];\r\n        this._hover = this._register(new HoverWidget());\r\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\r\n        this._markdownRenderer = this._register(new MarkdownRenderer({ editor: this._editor }, languageService, openerService));\r\n        this._computer = new MarginHoverComputer(this._editor);\r\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\r\n        this._register(this._hoverOperation.onResult((result) => {\r\n            this._withResult(result.value);\r\n        }));\r\n        this._register(this._editor.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\r\n        this._register(this._editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\r\n                this._updateFont();\r\n            }\r\n        }));\r\n        this._editor.addOverlayWidget(this);\r\n    }\r\n    dispose() {\r\n        this._editor.removeOverlayWidget(this);\r\n        super.dispose();\r\n    }\r\n    getId() {\r\n        return MarginHoverWidget.ID;\r\n    }\r\n    getDomNode() {\r\n        return this._hover.containerDomNode;\r\n    }\r\n    getPosition() {\r\n        return null;\r\n    }\r\n    _updateFont() {\r\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\r\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\r\n    }\r\n    _onModelDecorationsChanged() {\r\n        if (this._isVisible) {\r\n            // The decorations have changed and the hover is visible,\r\n            // we need to recompute the displayed text\r\n            this._hoverOperation.cancel();\r\n            this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\r\n        }\r\n    }\r\n    startShowingAt(lineNumber) {\r\n        if (this._computer.lineNumber === lineNumber) {\r\n            // We have to show the widget at the exact same line number as before, so no work is needed\r\n            return;\r\n        }\r\n        this._hoverOperation.cancel();\r\n        this.hide();\r\n        this._computer.lineNumber = lineNumber;\r\n        this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\r\n    }\r\n    hide() {\r\n        this._computer.lineNumber = -1;\r\n        this._hoverOperation.cancel();\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = false;\r\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\r\n    }\r\n    _withResult(result) {\r\n        this._messages = result;\r\n        if (this._messages.length > 0) {\r\n            this._renderMessages(this._computer.lineNumber, this._messages);\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n    }\r\n    _renderMessages(lineNumber, messages) {\r\n        this._renderDisposeables.clear();\r\n        const fragment = document.createDocumentFragment();\r\n        for (const msg of messages) {\r\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\r\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\r\n            const renderedContents = this._renderDisposeables.add(this._markdownRenderer.render(msg.value));\r\n            hoverContentsElement.appendChild(renderedContents.element);\r\n            fragment.appendChild(markdownHoverElement);\r\n        }\r\n        this._updateContents(fragment);\r\n        this._showAt(lineNumber);\r\n    }\r\n    _updateContents(node) {\r\n        this._hover.contentsDomNode.textContent = '';\r\n        this._hover.contentsDomNode.appendChild(node);\r\n        this._updateFont();\r\n    }\r\n    _showAt(lineNumber) {\r\n        if (!this._isVisible) {\r\n            this._isVisible = true;\r\n            this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\r\n        }\r\n        const editorLayout = this._editor.getLayoutInfo();\r\n        const topForLineNumber = this._editor.getTopForLineNumber(lineNumber);\r\n        const editorScrollTop = this._editor.getScrollTop();\r\n        const lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\r\n        const nodeHeight = this._hover.containerDomNode.clientHeight;\r\n        const top = topForLineNumber - editorScrollTop - ((nodeHeight - lineHeight) / 2);\r\n        this._hover.containerDomNode.style.left = `${editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth}px`;\r\n        this._hover.containerDomNode.style.top = `${Math.max(Math.round(top), 0)}px`;\r\n    }\r\n}\r\nMarginHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\r\nclass MarginHoverComputer {\r\n    get lineNumber() {\r\n        return this._lineNumber;\r\n    }\r\n    set lineNumber(value) {\r\n        this._lineNumber = value;\r\n    }\r\n    constructor(_editor) {\r\n        this._editor = _editor;\r\n        this._lineNumber = -1;\r\n    }\r\n    computeSync() {\r\n        const toHoverMessage = (contents) => {\r\n            return {\r\n                value: contents\r\n            };\r\n        };\r\n        const lineDecorations = this._editor.getLineDecorations(this._lineNumber);\r\n        const result = [];\r\n        if (!lineDecorations) {\r\n            return result;\r\n        }\r\n        for (const d of lineDecorations) {\r\n            if (!d.options.glyphMarginClassName) {\r\n                continue;\r\n            }\r\n            const hoverMessage = d.options.glyphMarginHoverMessage;\r\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\r\n                continue;\r\n            }\r\n            result.push(...asArray(hoverMessage).map(toHoverMessage));\r\n        }\r\n        return result;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nexport class HoverProviderResult {\r\n    constructor(provider, hover, ordinal) {\r\n        this.provider = provider;\r\n        this.hover = hover;\r\n        this.ordinal = ordinal;\r\n    }\r\n}\r\nasync function executeProvider(provider, ordinal, model, position, token) {\r\n    try {\r\n        const result = await Promise.resolve(provider.provideHover(model, position, token));\r\n        if (result && isValid(result)) {\r\n            return new HoverProviderResult(provider, result, ordinal);\r\n        }\r\n    }\r\n    catch (err) {\r\n        onUnexpectedExternalError(err);\r\n    }\r\n    return undefined;\r\n}\r\nexport function getHover(registry, model, position, token) {\r\n    const providers = registry.ordered(model);\r\n    const promises = providers.map((provider, index) => executeProvider(provider, index, model, position, token));\r\n    return AsyncIterableObject.fromPromises(promises).coalesce();\r\n}\r\nexport function getHoverPromise(registry, model, position, token) {\r\n    return getHover(registry, model, position, token).map(item => item.hover).toPromise();\r\n}\r\nregisterModelAndPositionCommand('_executeHoverProvider', (accessor, model, position) => {\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    return getHoverPromise(languageFeaturesService.hoverProvider, model, position, CancellationToken.None);\r\n});\r\nfunction isValid(result) {\r\n    const hasRange = (typeof result.range !== 'undefined');\r\n    const hasHtmlContent = typeof result.contents !== 'undefined' && result.contents && result.contents.length > 0;\r\n    return hasRange && hasHtmlContent;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { asArray } from '../../../../base/common/arrays.js';\r\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\r\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { getHover } from './getHover.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nconst $ = dom.$;\r\nexport class MarkdownHover {\r\n    constructor(owner, range, contents, isBeforeContent, ordinal) {\r\n        this.owner = owner;\r\n        this.range = range;\r\n        this.contents = contents;\r\n        this.isBeforeContent = isBeforeContent;\r\n        this.ordinal = ordinal;\r\n    }\r\n    isValidForHoverAnchor(anchor) {\r\n        return (anchor.type === 1 /* HoverAnchorType.Range */\r\n            && this.range.startColumn <= anchor.range.startColumn\r\n            && this.range.endColumn >= anchor.range.endColumn);\r\n    }\r\n}\r\nlet MarkdownHoverParticipant = class MarkdownHoverParticipant {\r\n    constructor(_editor, _languageService, _openerService, _configurationService, _languageFeaturesService) {\r\n        this._editor = _editor;\r\n        this._languageService = _languageService;\r\n        this._openerService = _openerService;\r\n        this._configurationService = _configurationService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this.hoverOrdinal = 3;\r\n    }\r\n    createLoadingMessage(anchor) {\r\n        return new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))], false, 2000);\r\n    }\r\n    computeSync(anchor, lineDecorations) {\r\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\r\n            return [];\r\n        }\r\n        const model = this._editor.getModel();\r\n        const lineNumber = anchor.range.startLineNumber;\r\n        const maxColumn = model.getLineMaxColumn(lineNumber);\r\n        const result = [];\r\n        let index = 1000;\r\n        const lineLength = model.getLineLength(lineNumber);\r\n        const languageId = model.getLanguageIdAtPosition(anchor.range.startLineNumber, anchor.range.startColumn);\r\n        const stopRenderingLineAfter = this._editor.getOption(116 /* EditorOption.stopRenderingLineAfter */);\r\n        const maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\r\n            overrideIdentifier: languageId\r\n        });\r\n        let stopRenderingMessage = false;\r\n        if (stopRenderingLineAfter >= 0 && lineLength > stopRenderingLineAfter && anchor.range.startColumn >= stopRenderingLineAfter) {\r\n            stopRenderingMessage = true;\r\n            result.push(new MarkdownHover(this, anchor.range, [{\r\n                    value: nls.localize('stopped rendering', \"Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.\")\r\n                }], false, index++));\r\n        }\r\n        if (!stopRenderingMessage && typeof maxTokenizationLineLength === 'number' && lineLength >= maxTokenizationLineLength) {\r\n            result.push(new MarkdownHover(this, anchor.range, [{\r\n                    value: nls.localize('too many characters', \"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.\")\r\n                }], false, index++));\r\n        }\r\n        let isBeforeContent = false;\r\n        for (const d of lineDecorations) {\r\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\r\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\r\n            const hoverMessage = d.options.hoverMessage;\r\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\r\n                continue;\r\n            }\r\n            if (d.options.beforeContentClassName) {\r\n                isBeforeContent = true;\r\n            }\r\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\r\n            result.push(new MarkdownHover(this, range, asArray(hoverMessage), isBeforeContent, index++));\r\n        }\r\n        return result;\r\n    }\r\n    computeAsync(anchor, lineDecorations, token) {\r\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\r\n            return AsyncIterableObject.EMPTY;\r\n        }\r\n        const model = this._editor.getModel();\r\n        if (!this._languageFeaturesService.hoverProvider.has(model)) {\r\n            return AsyncIterableObject.EMPTY;\r\n        }\r\n        const position = new Position(anchor.range.startLineNumber, anchor.range.startColumn);\r\n        return getHover(this._languageFeaturesService.hoverProvider, model, position, token)\r\n            .filter(item => !isEmptyMarkdownString(item.hover.contents))\r\n            .map(item => {\r\n            const rng = item.hover.range ? Range.lift(item.hover.range) : anchor.range;\r\n            return new MarkdownHover(this, rng, item.hover.contents, false, item.ordinal);\r\n        });\r\n    }\r\n    renderHoverParts(context, hoverParts) {\r\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\r\n    }\r\n};\r\nMarkdownHoverParticipant = __decorate([\r\n    __param(1, ILanguageService),\r\n    __param(2, IOpenerService),\r\n    __param(3, IConfigurationService),\r\n    __param(4, ILanguageFeaturesService)\r\n], MarkdownHoverParticipant);\r\nexport { MarkdownHoverParticipant };\r\nexport function renderMarkdownHovers(context, hoverParts, editor, languageService, openerService) {\r\n    // Sort hover parts to keep them stable since they might come in async, out-of-order\r\n    hoverParts.sort((a, b) => a.ordinal - b.ordinal);\r\n    const disposables = new DisposableStore();\r\n    for (const hoverPart of hoverParts) {\r\n        for (const contents of hoverPart.contents) {\r\n            if (isEmptyMarkdownString(contents)) {\r\n                continue;\r\n            }\r\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\r\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\r\n            const renderer = disposables.add(new MarkdownRenderer({ editor }, languageService, openerService));\r\n            disposables.add(renderer.onDidRenderAsync(() => {\r\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\r\n                context.onContentsChanged();\r\n            }));\r\n            const renderedContents = disposables.add(renderer.render(contents));\r\n            hoverContentsElement.appendChild(renderedContents.element);\r\n            context.fragment.appendChild(markdownHoverElement);\r\n        }\r\n    }\r\n    return disposables;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nexport class CodeActionKind {\r\n    constructor(value) {\r\n        this.value = value;\r\n    }\r\n    equals(other) {\r\n        return this.value === other.value;\r\n    }\r\n    contains(other) {\r\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\r\n    }\r\n    intersects(other) {\r\n        return this.contains(other) || other.contains(this);\r\n    }\r\n    append(part) {\r\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\r\n    }\r\n}\r\nCodeActionKind.sep = '.';\r\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\r\nCodeActionKind.Empty = new CodeActionKind('');\r\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\r\nCodeActionKind.Refactor = new CodeActionKind('refactor');\r\nCodeActionKind.RefactorExtract = CodeActionKind.Refactor.append('extract');\r\nCodeActionKind.RefactorInline = CodeActionKind.Refactor.append('inline');\r\nCodeActionKind.RefactorMove = CodeActionKind.Refactor.append('move');\r\nCodeActionKind.RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\r\nCodeActionKind.Notebook = new CodeActionKind('notebook');\r\nCodeActionKind.Source = new CodeActionKind('source');\r\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\r\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\r\nCodeActionKind.SurroundWith = CodeActionKind.Refactor.append('surround');\r\nexport var CodeActionTriggerSource;\r\n(function (CodeActionTriggerSource) {\r\n    CodeActionTriggerSource[\"Refactor\"] = \"refactor\";\r\n    CodeActionTriggerSource[\"RefactorPreview\"] = \"refactor preview\";\r\n    CodeActionTriggerSource[\"Lightbulb\"] = \"lightbulb\";\r\n    CodeActionTriggerSource[\"Default\"] = \"other (default)\";\r\n    CodeActionTriggerSource[\"SourceAction\"] = \"source action\";\r\n    CodeActionTriggerSource[\"QuickFix\"] = \"quick fix action\";\r\n    CodeActionTriggerSource[\"FixAll\"] = \"fix all\";\r\n    CodeActionTriggerSource[\"OrganizeImports\"] = \"organize imports\";\r\n    CodeActionTriggerSource[\"AutoFix\"] = \"auto fix\";\r\n    CodeActionTriggerSource[\"QuickFixHover\"] = \"quick fix hover window\";\r\n    CodeActionTriggerSource[\"OnSave\"] = \"save participants\";\r\n    CodeActionTriggerSource[\"ProblemsView\"] = \"problems view\";\r\n})(CodeActionTriggerSource || (CodeActionTriggerSource = {}));\r\nexport function mayIncludeActionsOfKind(filter, providedKind) {\r\n    // A provided kind may be a subset or superset of our filtered kind.\r\n    if (filter.include && !filter.include.intersects(providedKind)) {\r\n        return false;\r\n    }\r\n    if (filter.excludes) {\r\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\r\n            return false;\r\n        }\r\n    }\r\n    // Don't return source actions unless they are explicitly requested\r\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nexport function filtersAction(filter, action) {\r\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\r\n    // Filter out actions by kind\r\n    if (filter.include) {\r\n        if (!actionKind || !filter.include.contains(actionKind)) {\r\n            return false;\r\n        }\r\n    }\r\n    if (filter.excludes) {\r\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\r\n            return false;\r\n        }\r\n    }\r\n    // Don't return source actions unless they are explicitly requested\r\n    if (!filter.includeSourceActions) {\r\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\r\n            return false;\r\n        }\r\n    }\r\n    if (filter.onlyIncludePreferredActions) {\r\n        if (!action.isPreferred) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction excludesAction(providedKind, exclude, include) {\r\n    if (!exclude.contains(providedKind)) {\r\n        return false;\r\n    }\r\n    if (include && exclude.contains(include)) {\r\n        // The include is more specific, don't filter out\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nexport class CodeActionCommandArgs {\r\n    static fromUser(arg, defaults) {\r\n        if (!arg || typeof arg !== 'object') {\r\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\r\n        }\r\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\r\n    }\r\n    static getApplyFromUser(arg, defaultAutoApply) {\r\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\r\n            case 'first': return \"first\" /* CodeActionAutoApply.First */;\r\n            case 'never': return \"never\" /* CodeActionAutoApply.Never */;\r\n            case 'ifsingle': return \"ifSingle\" /* CodeActionAutoApply.IfSingle */;\r\n            default: return defaultAutoApply;\r\n        }\r\n    }\r\n    static getKindFromUser(arg, defaultKind) {\r\n        return typeof arg.kind === 'string'\r\n            ? new CodeActionKind(arg.kind)\r\n            : defaultKind;\r\n    }\r\n    static getPreferredUser(arg) {\r\n        return typeof arg.preferred === 'boolean'\r\n            ? arg.preferred\r\n            : false;\r\n    }\r\n    constructor(kind, apply, preferred) {\r\n        this.kind = kind;\r\n        this.apply = apply;\r\n        this.preferred = preferred;\r\n    }\r\n}\r\nexport class CodeActionItem {\r\n    constructor(action, provider, highlightRange) {\r\n        this.action = action;\r\n        this.provider = provider;\r\n        this.highlightRange = highlightRange;\r\n    }\r\n    async resolve(token) {\r\n        var _a;\r\n        if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\r\n            let action;\r\n            try {\r\n                action = await this.provider.resolveCodeAction(this.action, token);\r\n            }\r\n            catch (err) {\r\n                onUnexpectedExternalError(err);\r\n            }\r\n            if (action) {\r\n                this.action.edit = action.edit;\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { IModelService } from '../../../common/services/model.js';\r\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nimport { Progress } from '../../../../platform/progress/common/progress.js';\r\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\r\nimport { CodeActionItem, CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from '../common/types.js';\r\nexport const codeActionCommandId = 'editor.action.codeAction';\r\nexport const quickFixCommandId = 'editor.action.quickFix';\r\nexport const autoFixCommandId = 'editor.action.autoFix';\r\nexport const refactorCommandId = 'editor.action.refactor';\r\nexport const sourceActionCommandId = 'editor.action.sourceAction';\r\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\r\nexport const fixAllCommandId = 'editor.action.fixAll';\r\nclass ManagedCodeActionSet extends Disposable {\r\n    static codeActionsPreferredComparator(a, b) {\r\n        if (a.isPreferred && !b.isPreferred) {\r\n            return -1;\r\n        }\r\n        else if (!a.isPreferred && b.isPreferred) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    static codeActionsComparator({ action: a }, { action: b }) {\r\n        if (a.isAI && !b.isAI) {\r\n            return 1;\r\n        }\r\n        else if (!a.isAI && b.isAI) {\r\n            return -1;\r\n        }\r\n        if (isNonEmptyArray(a.diagnostics)) {\r\n            return isNonEmptyArray(b.diagnostics) ? ManagedCodeActionSet.codeActionsPreferredComparator(a, b) : -1;\r\n        }\r\n        else if (isNonEmptyArray(b.diagnostics)) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return ManagedCodeActionSet.codeActionsPreferredComparator(a, b); // both have no diagnostics\r\n        }\r\n    }\r\n    constructor(actions, documentation, disposables) {\r\n        super();\r\n        this.documentation = documentation;\r\n        this._register(disposables);\r\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\r\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\r\n    }\r\n    get hasAutoFix() {\r\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\r\n    }\r\n    get hasAIFix() {\r\n        return this.validActions.some(({ action: fix }) => !!fix.isAI);\r\n    }\r\n    get allAIFixes() {\r\n        return this.validActions.every(({ action: fix }) => !!fix.isAI);\r\n    }\r\n}\r\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\r\nexport async function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\r\n    var _a;\r\n    const filter = trigger.filter || {};\r\n    const notebookFilter = {\r\n        ...filter,\r\n        excludes: [...(filter.excludes || []), CodeActionKind.Notebook],\r\n    };\r\n    const codeActionContext = {\r\n        only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\r\n        trigger: trigger.type,\r\n    };\r\n    const cts = new TextModelCancellationTokenSource(model, token);\r\n    // if the trigger is auto (autosave, lightbulb, etc), we should exclude notebook codeActions\r\n    const excludeNotebookCodeActions = (trigger.type === 2 /* languages.CodeActionTriggerType.Auto */);\r\n    const providers = getCodeActionProviders(registry, model, (excludeNotebookCodeActions) ? notebookFilter : filter);\r\n    const disposables = new DisposableStore();\r\n    const promises = providers.map(async (provider) => {\r\n        try {\r\n            progress.report(provider);\r\n            const providedCodeActions = await provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\r\n            if (providedCodeActions) {\r\n                disposables.add(providedCodeActions);\r\n            }\r\n            if (cts.token.isCancellationRequested) {\r\n                return emptyCodeActionsResponse;\r\n            }\r\n            const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\r\n            const documentation = getDocumentationFromProvider(provider, filteredActions, filter.include);\r\n            return {\r\n                actions: filteredActions.map(action => new CodeActionItem(action, provider)),\r\n                documentation\r\n            };\r\n        }\r\n        catch (err) {\r\n            if (isCancellationError(err)) {\r\n                throw err;\r\n            }\r\n            onUnexpectedExternalError(err);\r\n            return emptyCodeActionsResponse;\r\n        }\r\n    });\r\n    const listener = registry.onDidChange(() => {\r\n        const newProviders = registry.all(model);\r\n        if (!equals(newProviders, providers)) {\r\n            cts.cancel();\r\n        }\r\n    });\r\n    try {\r\n        const actions = await Promise.all(promises);\r\n        const allActions = actions.map(x => x.actions).flat();\r\n        const allDocumentation = [\r\n            ...coalesce(actions.map(x => x.documentation)),\r\n            ...getAdditionalDocumentationForShowingActions(registry, model, trigger, allActions)\r\n        ];\r\n        return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\r\n    }\r\n    finally {\r\n        listener.dispose();\r\n        cts.dispose();\r\n    }\r\n}\r\nfunction getCodeActionProviders(registry, model, filter) {\r\n    return registry.all(model)\r\n        // Don't include providers that we know will not return code actions of interest\r\n        .filter(provider => {\r\n        if (!provider.providedCodeActionKinds) {\r\n            // We don't know what type of actions this provider will return.\r\n            return true;\r\n        }\r\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\r\n    });\r\n}\r\nfunction* getAdditionalDocumentationForShowingActions(registry, model, trigger, actionsToShow) {\r\n    var _a, _b, _c;\r\n    if (model && actionsToShow.length) {\r\n        for (const provider of registry.all(model)) {\r\n            if (provider._getAdditionalMenuItems) {\r\n                yield* (_a = provider._getAdditionalMenuItems) === null || _a === void 0 ? void 0 : _a.call(provider, { trigger: trigger.type, only: (_c = (_b = trigger.filter) === null || _b === void 0 ? void 0 : _b.include) === null || _c === void 0 ? void 0 : _c.value }, actionsToShow.map(item => item.action));\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction getDocumentationFromProvider(provider, providedCodeActions, only) {\r\n    if (!provider.documentation) {\r\n        return undefined;\r\n    }\r\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\r\n    if (only) {\r\n        let currentBest;\r\n        for (const entry of documentation) {\r\n            if (entry.kind.contains(only)) {\r\n                if (!currentBest) {\r\n                    currentBest = entry;\r\n                }\r\n                else {\r\n                    // Take best match\r\n                    if (currentBest.kind.contains(entry.kind)) {\r\n                        currentBest = entry;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (currentBest) {\r\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\r\n        }\r\n    }\r\n    // Otherwise, check to see if any of the provided actions match.\r\n    for (const action of providedCodeActions) {\r\n        if (!action.kind) {\r\n            continue;\r\n        }\r\n        for (const entry of documentation) {\r\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\r\n                return entry.command;\r\n            }\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexport var ApplyCodeActionReason;\r\n(function (ApplyCodeActionReason) {\r\n    ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\r\n    ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\r\n    ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\r\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\r\nexport async function applyCodeAction(accessor, item, codeActionReason, options, token = CancellationToken.None) {\r\n    var _a;\r\n    const bulkEditService = accessor.get(IBulkEditService);\r\n    const commandService = accessor.get(ICommandService);\r\n    const telemetryService = accessor.get(ITelemetryService);\r\n    const notificationService = accessor.get(INotificationService);\r\n    telemetryService.publicLog2('codeAction.applyCodeAction', {\r\n        codeActionTitle: item.action.title,\r\n        codeActionKind: item.action.kind,\r\n        codeActionIsPreferred: !!item.action.isPreferred,\r\n        reason: codeActionReason,\r\n    });\r\n    await item.resolve(token);\r\n    if (token.isCancellationRequested) {\r\n        return;\r\n    }\r\n    if ((_a = item.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length) {\r\n        const result = await bulkEditService.apply(item.action.edit, {\r\n            editor: options === null || options === void 0 ? void 0 : options.editor,\r\n            label: item.action.title,\r\n            quotableLabel: item.action.title,\r\n            code: 'undoredo.codeAction',\r\n            respectAutoSaveConfig: codeActionReason !== ApplyCodeActionReason.OnSave,\r\n            showPreview: options === null || options === void 0 ? void 0 : options.preview,\r\n        });\r\n        if (!result.isApplied) {\r\n            return;\r\n        }\r\n    }\r\n    if (item.action.command) {\r\n        try {\r\n            await commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\r\n        }\r\n        catch (err) {\r\n            const message = asMessage(err);\r\n            notificationService.error(typeof message === 'string'\r\n                ? message\r\n                : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\r\n        }\r\n    }\r\n}\r\nfunction asMessage(err) {\r\n    if (typeof err === 'string') {\r\n        return err;\r\n    }\r\n    else if (err instanceof Error && typeof err.message === 'string') {\r\n        return err.message;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nCommandsRegistry.registerCommand('_executeCodeActionProvider', async function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\r\n    if (!(resource instanceof URI)) {\r\n        throw illegalArgument();\r\n    }\r\n    const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\r\n    const model = accessor.get(IModelService).getModel(resource);\r\n    if (!model) {\r\n        throw illegalArgument();\r\n    }\r\n    const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\r\n        ? Selection.liftSelection(rangeOrSelection)\r\n        : Range.isIRange(rangeOrSelection)\r\n            ? model.validateRange(rangeOrSelection)\r\n            : undefined;\r\n    if (!validatedRangeOrSelection) {\r\n        throw illegalArgument();\r\n    }\r\n    const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\r\n    const codeActionSet = await getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* languages.CodeActionTriggerType.Invoke */, triggerAction: CodeActionTriggerSource.Default, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\r\n    const resolving = [];\r\n    const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\r\n    for (let i = 0; i < resolveCount; i++) {\r\n        resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\r\n    }\r\n    try {\r\n        await Promise.all(resolving);\r\n        return codeActionSet.validActions.map(item => item.action);\r\n    }\r\n    finally {\r\n        setTimeout(() => codeActionSet.dispose(), 100);\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar CodeActionKeybindingResolver_1;\r\nimport { Lazy } from '../../../../base/common/lazy.js';\r\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\r\nimport { CodeActionCommandArgs, CodeActionKind } from '../common/types.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nlet CodeActionKeybindingResolver = CodeActionKeybindingResolver_1 = class CodeActionKeybindingResolver {\r\n    constructor(keybindingService) {\r\n        this.keybindingService = keybindingService;\r\n    }\r\n    getResolver() {\r\n        // Lazy since we may not actually ever read the value\r\n        const allCodeActionBindings = new Lazy(() => this.keybindingService.getKeybindings()\r\n            .filter(item => CodeActionKeybindingResolver_1.codeActionCommands.indexOf(item.command) >= 0)\r\n            .filter(item => item.resolvedKeybinding)\r\n            .map((item) => {\r\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\r\n            let commandArgs = item.commandArgs;\r\n            if (item.command === organizeImportsCommandId) {\r\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\r\n            }\r\n            else if (item.command === fixAllCommandId) {\r\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\r\n            }\r\n            return {\r\n                resolvedKeybinding: item.resolvedKeybinding,\r\n                ...CodeActionCommandArgs.fromUser(commandArgs, {\r\n                    kind: CodeActionKind.None,\r\n                    apply: \"never\" /* CodeActionAutoApply.Never */\r\n                })\r\n            };\r\n        }));\r\n        return (action) => {\r\n            if (action.kind) {\r\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.value);\r\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\r\n            }\r\n            return undefined;\r\n        };\r\n    }\r\n    bestKeybindingForCodeAction(action, candidates) {\r\n        if (!action.kind) {\r\n            return undefined;\r\n        }\r\n        const kind = new CodeActionKind(action.kind);\r\n        return candidates\r\n            .filter(candidate => candidate.kind.contains(kind))\r\n            .filter(candidate => {\r\n            if (candidate.preferred) {\r\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\r\n                return action.isPreferred;\r\n            }\r\n            return true;\r\n        })\r\n            .reduceRight((currentBest, candidate) => {\r\n            if (!currentBest) {\r\n                return candidate;\r\n            }\r\n            // Select the more specific binding\r\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\r\n        }, undefined);\r\n    }\r\n};\r\nCodeActionKeybindingResolver.codeActionCommands = [\r\n    refactorCommandId,\r\n    codeActionCommandId,\r\n    sourceActionCommandId,\r\n    organizeImportsCommandId,\r\n    fixAllCommandId\r\n];\r\nCodeActionKeybindingResolver = CodeActionKeybindingResolver_1 = __decorate([\r\n    __param(0, IKeybindingService)\r\n], CodeActionKeybindingResolver);\r\nexport { CodeActionKeybindingResolver };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { CodeActionKind } from '../common/types.js';\r\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\r\nimport { localize } from '../../../../nls.js';\r\nconst uncategorizedCodeActionGroup = Object.freeze({ kind: CodeActionKind.Empty, title: localize('codeAction.widget.id.more', 'More Actions...') });\r\nconst codeActionGroups = Object.freeze([\r\n    { kind: CodeActionKind.QuickFix, title: localize('codeAction.widget.id.quickfix', 'Quick Fix') },\r\n    { kind: CodeActionKind.RefactorExtract, title: localize('codeAction.widget.id.extract', 'Extract'), icon: Codicon.wrench },\r\n    { kind: CodeActionKind.RefactorInline, title: localize('codeAction.widget.id.inline', 'Inline'), icon: Codicon.wrench },\r\n    { kind: CodeActionKind.RefactorRewrite, title: localize('codeAction.widget.id.convert', 'Rewrite'), icon: Codicon.wrench },\r\n    { kind: CodeActionKind.RefactorMove, title: localize('codeAction.widget.id.move', 'Move'), icon: Codicon.wrench },\r\n    { kind: CodeActionKind.SurroundWith, title: localize('codeAction.widget.id.surround', 'Surround With'), icon: Codicon.symbolSnippet },\r\n    { kind: CodeActionKind.Source, title: localize('codeAction.widget.id.source', 'Source Action'), icon: Codicon.symbolFile },\r\n    uncategorizedCodeActionGroup,\r\n]);\r\nexport function toMenuItems(inputCodeActions, showHeaders, keybindingResolver) {\r\n    if (!showHeaders) {\r\n        return inputCodeActions.map((action) => {\r\n            var _a;\r\n            return {\r\n                kind: \"action\" /* ActionListItemKind.Action */,\r\n                item: action,\r\n                group: uncategorizedCodeActionGroup,\r\n                disabled: !!action.action.disabled,\r\n                label: action.action.disabled || action.action.title,\r\n                canPreview: !!((_a = action.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length),\r\n            };\r\n        });\r\n    }\r\n    // Group code actions\r\n    const menuEntries = codeActionGroups.map(group => ({ group, actions: [] }));\r\n    for (const action of inputCodeActions) {\r\n        const kind = action.action.kind ? new CodeActionKind(action.action.kind) : CodeActionKind.None;\r\n        for (const menuEntry of menuEntries) {\r\n            if (menuEntry.group.kind.contains(kind)) {\r\n                menuEntry.actions.push(action);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    const allMenuItems = [];\r\n    for (const menuEntry of menuEntries) {\r\n        if (menuEntry.actions.length) {\r\n            allMenuItems.push({ kind: \"header\" /* ActionListItemKind.Header */, group: menuEntry.group });\r\n            for (const action of menuEntry.actions) {\r\n                const group = menuEntry.group;\r\n                allMenuItems.push({\r\n                    kind: \"action\" /* ActionListItemKind.Action */,\r\n                    item: action,\r\n                    group: action.action.isAI ? { title: group.title, kind: group.kind, icon: Codicon.sparkle } : group,\r\n                    label: action.action.title,\r\n                    disabled: !!action.action.disabled,\r\n                    keybinding: keybindingResolver(action.action),\r\n                });\r\n            }\r\n        }\r\n    }\r\n    return allMenuItems;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar LightBulbWidget_1;\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { Gesture } from '../../../../base/browser/touch.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Emitter, Event } from '../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport './lightBulbWidget.css';\r\nimport { ShowAiIconMode } from '../../../common/config/editorOptions.js';\r\nimport { computeIndentLevel } from '../../../common/model/utils.js';\r\nimport { autoFixCommandId, quickFixCommandId } from './codeAction.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nvar LightBulbState;\r\n(function (LightBulbState) {\r\n    LightBulbState.Hidden = { type: 0 /* Type.Hidden */ };\r\n    class Showing {\r\n        constructor(actions, trigger, editorPosition, widgetPosition) {\r\n            this.actions = actions;\r\n            this.trigger = trigger;\r\n            this.editorPosition = editorPosition;\r\n            this.widgetPosition = widgetPosition;\r\n            this.type = 1 /* Type.Showing */;\r\n        }\r\n    }\r\n    LightBulbState.Showing = Showing;\r\n})(LightBulbState || (LightBulbState = {}));\r\nlet LightBulbWidget = LightBulbWidget_1 = class LightBulbWidget extends Disposable {\r\n    constructor(_editor, _keybindingService, commandService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._keybindingService = _keybindingService;\r\n        this._onClick = this._register(new Emitter());\r\n        this.onClick = this._onClick.event;\r\n        this._state = LightBulbState.Hidden;\r\n        this._iconClasses = [];\r\n        this._domNode = dom.$('div.lightBulbWidget');\r\n        this._register(Gesture.ignoreTarget(this._domNode));\r\n        this._editor.addContentWidget(this);\r\n        this._register(this._editor.onDidChangeModelContent(_ => {\r\n            // cancel when the line in question has been removed\r\n            const editorModel = this._editor.getModel();\r\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\r\n                this.hide();\r\n            }\r\n        }));\r\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\r\n            var _a;\r\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\r\n                return;\r\n            }\r\n            const option = this._editor.getOption(64 /* EditorOption.lightbulb */).experimental.showAiIcon;\r\n            if ((option === ShowAiIconMode.On || option === ShowAiIconMode.OnCode)\r\n                && this.state.actions.allAIFixes\r\n                && this.state.actions.validActions.length === 1) {\r\n                const action = this.state.actions.validActions[0].action;\r\n                if ((_a = action.command) === null || _a === void 0 ? void 0 : _a.id) {\r\n                    commandService.executeCommand(action.command.id, ...(action.command.arguments || []));\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n            // Make sure that focus / cursor location is not lost when clicking widget icon\r\n            this._editor.focus();\r\n            e.preventDefault();\r\n            // a bit of extra work to make sure the menu\r\n            // doesn't cover the line-text\r\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\r\n            const lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\r\n            let pad = Math.floor(lineHeight / 3);\r\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\r\n                pad += lineHeight;\r\n            }\r\n            this._onClick.fire({\r\n                x: e.posx,\r\n                y: top + height + pad,\r\n                actions: this.state.actions,\r\n                trigger: this.state.trigger,\r\n            });\r\n        }));\r\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\r\n            if ((e.buttons & 1) !== 1) {\r\n                return;\r\n            }\r\n            // mouse enters lightbulb while the primary/left button\r\n            // is being pressed -> hide the lightbulb\r\n            this.hide();\r\n        }));\r\n        this._register(this._editor.onDidChangeConfiguration(e => {\r\n            // hide when told to do so\r\n            if (e.hasChanged(64 /* EditorOption.lightbulb */)) {\r\n                if (!this._editor.getOption(64 /* EditorOption.lightbulb */).enabled) {\r\n                    this.hide();\r\n                }\r\n                this._updateLightBulbTitleAndIcon();\r\n            }\r\n        }));\r\n        this._register(Event.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings, () => {\r\n            var _a, _b, _c, _d;\r\n            this._preferredKbLabel = (_b = (_a = this._keybindingService.lookupKeybinding(autoFixCommandId)) === null || _a === void 0 ? void 0 : _a.getLabel()) !== null && _b !== void 0 ? _b : undefined;\r\n            this._quickFixKbLabel = (_d = (_c = this._keybindingService.lookupKeybinding(quickFixCommandId)) === null || _c === void 0 ? void 0 : _c.getLabel()) !== null && _d !== void 0 ? _d : undefined;\r\n            this._updateLightBulbTitleAndIcon();\r\n        }));\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._editor.removeContentWidget(this);\r\n    }\r\n    getId() {\r\n        return 'LightBulbWidget';\r\n    }\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    getPosition() {\r\n        return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\r\n    }\r\n    update(actions, trigger, atPosition) {\r\n        if (actions.validActions.length <= 0) {\r\n            return this.hide();\r\n        }\r\n        const options = this._editor.getOptions();\r\n        if (!options.get(64 /* EditorOption.lightbulb */).enabled) {\r\n            return this.hide();\r\n        }\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return this.hide();\r\n        }\r\n        const { lineNumber, column } = model.validatePosition(atPosition);\r\n        const tabSize = model.getOptions().tabSize;\r\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\r\n        const lineContent = model.getLineContent(lineNumber);\r\n        const indent = computeIndentLevel(lineContent, tabSize);\r\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\r\n        const isFolded = (lineNumber) => {\r\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\r\n        };\r\n        let effectiveLineNumber = lineNumber;\r\n        if (!lineHasSpace) {\r\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\r\n                effectiveLineNumber -= 1;\r\n            }\r\n            else if (!isFolded(lineNumber + 1)) {\r\n                effectiveLineNumber += 1;\r\n            }\r\n            else if (column * fontInfo.spaceWidth < 22) {\r\n                // cannot show lightbulb above/below and showing\r\n                // it inline would overlay the cursor...\r\n                return this.hide();\r\n            }\r\n        }\r\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\r\n            position: { lineNumber: effectiveLineNumber, column: !!model.getLineContent(effectiveLineNumber).match(/^\\S\\s*$/) ? 2 : 1 },\r\n            preference: LightBulbWidget_1._posPref\r\n        });\r\n        this._editor.layoutContentWidget(this);\r\n    }\r\n    hide() {\r\n        if (this.state === LightBulbState.Hidden) {\r\n            return;\r\n        }\r\n        this.state = LightBulbState.Hidden;\r\n        this._editor.layoutContentWidget(this);\r\n    }\r\n    get state() { return this._state; }\r\n    set state(value) {\r\n        this._state = value;\r\n        this._updateLightBulbTitleAndIcon();\r\n    }\r\n    _updateLightBulbTitleAndIcon() {\r\n        var _a, _b, _c;\r\n        this._domNode.classList.remove(...this._iconClasses);\r\n        this._iconClasses = [];\r\n        if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\r\n            return;\r\n        }\r\n        const updateAutoFixLightbulbTitle = () => {\r\n            if (this._preferredKbLabel) {\r\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", this._preferredKbLabel);\r\n            }\r\n        };\r\n        const updateLightbulbTitle = () => {\r\n            if (this._quickFixKbLabel) {\r\n                this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", this._quickFixKbLabel);\r\n            }\r\n            else {\r\n                this.title = nls.localize('codeAction', \"Show Code Actions\");\r\n            }\r\n        };\r\n        let icon;\r\n        const option = this._editor.getOption(64 /* EditorOption.lightbulb */).experimental.showAiIcon;\r\n        if (option === ShowAiIconMode.On || option === ShowAiIconMode.OnCode) {\r\n            if (option === ShowAiIconMode.On && this.state.actions.allAIFixes) {\r\n                icon = Codicon.sparkleFilled;\r\n                if (this.state.actions.allAIFixes && this.state.actions.validActions.length === 1) {\r\n                    if (((_a = this.state.actions.validActions[0].action.command) === null || _a === void 0 ? void 0 : _a.id) === `inlineChat.start`) {\r\n                        const keybinding = (_c = (_b = this._keybindingService.lookupKeybinding('inlineChat.start')) === null || _b === void 0 ? void 0 : _b.getLabel()) !== null && _c !== void 0 ? _c : undefined;\r\n                        this.title = keybinding ? nls.localize('codeActionStartInlineChatWithKb', 'Start Inline Chat ({0})', keybinding) : nls.localize('codeActionStartInlineChat', 'Start Inline Chat');\r\n                    }\r\n                    else {\r\n                        this.title = nls.localize('codeActionTriggerAiAction', \"Trigger AI Action\");\r\n                    }\r\n                }\r\n                else {\r\n                    updateLightbulbTitle();\r\n                }\r\n            }\r\n            else if (this.state.actions.hasAutoFix) {\r\n                if (this.state.actions.hasAIFix) {\r\n                    icon = Codicon.lightbulbSparkleAutofix;\r\n                }\r\n                else {\r\n                    icon = Codicon.lightbulbAutofix;\r\n                }\r\n                updateAutoFixLightbulbTitle();\r\n            }\r\n            else if (this.state.actions.hasAIFix) {\r\n                icon = Codicon.lightbulbSparkle;\r\n                updateLightbulbTitle();\r\n            }\r\n            else {\r\n                icon = Codicon.lightBulb;\r\n                updateLightbulbTitle();\r\n            }\r\n        }\r\n        else {\r\n            if (this.state.actions.hasAutoFix) {\r\n                icon = Codicon.lightbulbAutofix;\r\n                updateAutoFixLightbulbTitle();\r\n            }\r\n            else {\r\n                icon = Codicon.lightBulb;\r\n                updateLightbulbTitle();\r\n            }\r\n        }\r\n        this._iconClasses = ThemeIcon.asClassNameArray(icon);\r\n        this._domNode.classList.add(...this._iconClasses);\r\n    }\r\n    set title(value) {\r\n        this._domNode.title = value;\r\n    }\r\n};\r\nLightBulbWidget.ID = 'editor.contrib.lightbulbWidget';\r\nLightBulbWidget._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\r\nLightBulbWidget = LightBulbWidget_1 = __decorate([\r\n    __param(1, IKeybindingService),\r\n    __param(2, ICommandService)\r\n], LightBulbWidget);\r\nexport { LightBulbWidget };\r\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport './actionWidget.css';\r\nimport { localize } from '../../../nls.js';\r\nimport { acceptSelectedActionCommand, ActionList, previewSelectedActionCommand } from './actionList.js';\r\nimport { Action2, registerAction2 } from '../../actions/common/actions.js';\r\nimport { IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\r\nimport { IContextViewService } from '../../contextview/browser/contextView.js';\r\nimport { registerSingleton } from '../../instantiation/common/extensions.js';\r\nimport { createDecorator, IInstantiationService } from '../../instantiation/common/instantiation.js';\r\nimport { inputActiveOptionBackground, registerColor } from '../../theme/common/colorRegistry.js';\r\nregisterColor('actionBar.toggledBackground', { dark: inputActiveOptionBackground, light: inputActiveOptionBackground, hcDark: inputActiveOptionBackground, hcLight: inputActiveOptionBackground, }, localize('actionBar.toggledBackground', 'Background color for toggled action items in action bar.'));\r\nconst ActionWidgetContextKeys = {\r\n    Visible: new RawContextKey('codeActionMenuVisible', false, localize('codeActionMenuVisible', \"Whether the action widget list is visible\"))\r\n};\r\nexport const IActionWidgetService = createDecorator('actionWidgetService');\r\nlet ActionWidgetService = class ActionWidgetService extends Disposable {\r\n    get isVisible() {\r\n        return ActionWidgetContextKeys.Visible.getValue(this._contextKeyService) || false;\r\n    }\r\n    constructor(_contextViewService, _contextKeyService, _instantiationService) {\r\n        super();\r\n        this._contextViewService = _contextViewService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._instantiationService = _instantiationService;\r\n        this._list = this._register(new MutableDisposable());\r\n    }\r\n    show(user, supportsPreview, items, delegate, anchor, container, actionBarActions) {\r\n        const visibleContext = ActionWidgetContextKeys.Visible.bindTo(this._contextKeyService);\r\n        const list = this._instantiationService.createInstance(ActionList, user, supportsPreview, items, delegate);\r\n        this._contextViewService.showContextView({\r\n            getAnchor: () => anchor,\r\n            render: (container) => {\r\n                visibleContext.set(true);\r\n                return this._renderWidget(container, list, actionBarActions !== null && actionBarActions !== void 0 ? actionBarActions : []);\r\n            },\r\n            onHide: (didCancel) => {\r\n                visibleContext.reset();\r\n                this._onWidgetClosed(didCancel);\r\n            },\r\n        }, container, false);\r\n    }\r\n    acceptSelected(preview) {\r\n        var _a;\r\n        (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.acceptSelected(preview);\r\n    }\r\n    focusPrevious() {\r\n        var _a, _b;\r\n        (_b = (_a = this._list) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.focusPrevious();\r\n    }\r\n    focusNext() {\r\n        var _a, _b;\r\n        (_b = (_a = this._list) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.focusNext();\r\n    }\r\n    hide() {\r\n        var _a;\r\n        (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.hide();\r\n        this._list.clear();\r\n    }\r\n    _renderWidget(element, list, actionBarActions) {\r\n        var _a;\r\n        const widget = document.createElement('div');\r\n        widget.classList.add('action-widget');\r\n        element.appendChild(widget);\r\n        this._list.value = list;\r\n        if (this._list.value) {\r\n            widget.appendChild(this._list.value.domNode);\r\n        }\r\n        else {\r\n            throw new Error('List has no value');\r\n        }\r\n        const renderDisposables = new DisposableStore();\r\n        // Invisible div to block mouse interaction in the rest of the UI\r\n        const menuBlock = document.createElement('div');\r\n        const block = element.appendChild(menuBlock);\r\n        block.classList.add('context-view-block');\r\n        renderDisposables.add(dom.addDisposableListener(block, dom.EventType.MOUSE_DOWN, e => e.stopPropagation()));\r\n        // Invisible div to block mouse interaction with the menu\r\n        const pointerBlockDiv = document.createElement('div');\r\n        const pointerBlock = element.appendChild(pointerBlockDiv);\r\n        pointerBlock.classList.add('context-view-pointerBlock');\r\n        // Removes block on click INSIDE widget or ANY mouse movement\r\n        renderDisposables.add(dom.addDisposableListener(pointerBlock, dom.EventType.POINTER_MOVE, () => pointerBlock.remove()));\r\n        renderDisposables.add(dom.addDisposableListener(pointerBlock, dom.EventType.MOUSE_DOWN, () => pointerBlock.remove()));\r\n        // Action bar\r\n        let actionBarWidth = 0;\r\n        if (actionBarActions.length) {\r\n            const actionBar = this._createActionBar('.action-widget-action-bar', actionBarActions);\r\n            if (actionBar) {\r\n                widget.appendChild(actionBar.getContainer().parentElement);\r\n                renderDisposables.add(actionBar);\r\n                actionBarWidth = actionBar.getContainer().offsetWidth;\r\n            }\r\n        }\r\n        const width = (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.layout(actionBarWidth);\r\n        widget.style.width = `${width}px`;\r\n        const focusTracker = renderDisposables.add(dom.trackFocus(element));\r\n        renderDisposables.add(focusTracker.onDidBlur(() => this.hide()));\r\n        return renderDisposables;\r\n    }\r\n    _createActionBar(className, actions) {\r\n        if (!actions.length) {\r\n            return undefined;\r\n        }\r\n        const container = dom.$(className);\r\n        const actionBar = new ActionBar(container);\r\n        actionBar.push(actions, { icon: false, label: true });\r\n        return actionBar;\r\n    }\r\n    _onWidgetClosed(didCancel) {\r\n        var _a;\r\n        (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.hide(didCancel);\r\n    }\r\n};\r\nActionWidgetService = __decorate([\r\n    __param(0, IContextViewService),\r\n    __param(1, IContextKeyService),\r\n    __param(2, IInstantiationService)\r\n], ActionWidgetService);\r\nregisterSingleton(IActionWidgetService, ActionWidgetService, 1 /* InstantiationType.Delayed */);\r\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 1000;\r\nregisterAction2(class extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: 'hideCodeActionWidget',\r\n            title: {\r\n                value: localize('hideCodeActionWidget.title', \"Hide action widget\"),\r\n                original: 'Hide action widget'\r\n            },\r\n            precondition: ActionWidgetContextKeys.Visible,\r\n            keybinding: {\r\n                weight,\r\n                primary: 9 /* KeyCode.Escape */,\r\n                secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\r\n            },\r\n        });\r\n    }\r\n    run(accessor) {\r\n        accessor.get(IActionWidgetService).hide();\r\n    }\r\n});\r\nregisterAction2(class extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: 'selectPrevCodeAction',\r\n            title: {\r\n                value: localize('selectPrevCodeAction.title', \"Select previous action\"),\r\n                original: 'Select previous action'\r\n            },\r\n            precondition: ActionWidgetContextKeys.Visible,\r\n            keybinding: {\r\n                weight,\r\n                primary: 16 /* KeyCode.UpArrow */,\r\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\r\n                mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] },\r\n            }\r\n        });\r\n    }\r\n    run(accessor) {\r\n        const widgetService = accessor.get(IActionWidgetService);\r\n        if (widgetService instanceof ActionWidgetService) {\r\n            widgetService.focusPrevious();\r\n        }\r\n    }\r\n});\r\nregisterAction2(class extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: 'selectNextCodeAction',\r\n            title: {\r\n                value: localize('selectNextCodeAction.title', \"Select next action\"),\r\n                original: 'Select next action'\r\n            },\r\n            precondition: ActionWidgetContextKeys.Visible,\r\n            keybinding: {\r\n                weight,\r\n                primary: 18 /* KeyCode.DownArrow */,\r\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\r\n                mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\r\n            }\r\n        });\r\n    }\r\n    run(accessor) {\r\n        const widgetService = accessor.get(IActionWidgetService);\r\n        if (widgetService instanceof ActionWidgetService) {\r\n            widgetService.focusNext();\r\n        }\r\n    }\r\n});\r\nregisterAction2(class extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: acceptSelectedActionCommand,\r\n            title: {\r\n                value: localize('acceptSelected.title', \"Accept selected action\"),\r\n                original: 'Accept selected action'\r\n            },\r\n            precondition: ActionWidgetContextKeys.Visible,\r\n            keybinding: {\r\n                weight,\r\n                primary: 3 /* KeyCode.Enter */,\r\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */],\r\n            }\r\n        });\r\n    }\r\n    run(accessor) {\r\n        const widgetService = accessor.get(IActionWidgetService);\r\n        if (widgetService instanceof ActionWidgetService) {\r\n            widgetService.acceptSelected();\r\n        }\r\n    }\r\n});\r\nregisterAction2(class extends Action2 {\r\n    constructor() {\r\n        super({\r\n            id: previewSelectedActionCommand,\r\n            title: {\r\n                value: localize('previewSelected.title', \"Preview selected action\"),\r\n                original: 'Preview selected action'\r\n            },\r\n            precondition: ActionWidgetContextKeys.Visible,\r\n            keybinding: {\r\n                weight,\r\n                primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\r\n            }\r\n        });\r\n    }\r\n    run(accessor) {\r\n        const widgetService = accessor.get(IActionWidgetService);\r\n        if (widgetService instanceof ActionWidgetService) {\r\n            widgetService.acceptSelected(true);\r\n        }\r\n    }\r\n});\r\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { KeybindingLabel } from '../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\r\nimport { List } from '../../../base/browser/ui/list/listWidget.js';\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { Codicon } from '../../../base/common/codicons.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { OS } from '../../../base/common/platform.js';\r\nimport { ThemeIcon } from '../../../base/common/themables.js';\r\nimport './actionWidget.css';\r\nimport { localize } from '../../../nls.js';\r\nimport { IContextViewService } from '../../contextview/browser/contextView.js';\r\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\r\nimport { defaultListStyles } from '../../theme/browser/defaultStyles.js';\r\nimport { asCssVariable } from '../../theme/common/colorRegistry.js';\r\nexport const acceptSelectedActionCommand = 'acceptSelectedCodeAction';\r\nexport const previewSelectedActionCommand = 'previewSelectedCodeAction';\r\nclass HeaderRenderer {\r\n    get templateId() { return \"header\" /* ActionListItemKind.Header */; }\r\n    renderTemplate(container) {\r\n        container.classList.add('group-header');\r\n        const text = document.createElement('span');\r\n        container.append(text);\r\n        return { container, text };\r\n    }\r\n    renderElement(element, _index, templateData) {\r\n        var _a, _b;\r\n        templateData.text.textContent = (_b = (_a = element.group) === null || _a === void 0 ? void 0 : _a.title) !== null && _b !== void 0 ? _b : '';\r\n    }\r\n    disposeTemplate(_templateData) {\r\n        // noop\r\n    }\r\n}\r\nlet ActionItemRenderer = class ActionItemRenderer {\r\n    get templateId() { return \"action\" /* ActionListItemKind.Action */; }\r\n    constructor(_supportsPreview, _keybindingService) {\r\n        this._supportsPreview = _supportsPreview;\r\n        this._keybindingService = _keybindingService;\r\n    }\r\n    renderTemplate(container) {\r\n        container.classList.add(this.templateId);\r\n        const icon = document.createElement('div');\r\n        icon.className = 'icon';\r\n        container.append(icon);\r\n        const text = document.createElement('span');\r\n        text.className = 'title';\r\n        container.append(text);\r\n        const keybinding = new KeybindingLabel(container, OS);\r\n        return { container, icon, text, keybinding };\r\n    }\r\n    renderElement(element, _index, data) {\r\n        var _a, _b, _c;\r\n        if ((_a = element.group) === null || _a === void 0 ? void 0 : _a.icon) {\r\n            data.icon.className = ThemeIcon.asClassName(element.group.icon);\r\n            if (element.group.icon.color) {\r\n                data.icon.style.color = asCssVariable(element.group.icon.color.id);\r\n            }\r\n        }\r\n        else {\r\n            data.icon.className = ThemeIcon.asClassName(Codicon.lightBulb);\r\n            data.icon.style.color = 'var(--vscode-editorLightBulb-foreground)';\r\n        }\r\n        if (!element.item || !element.label) {\r\n            return;\r\n        }\r\n        data.text.textContent = stripNewlines(element.label);\r\n        data.keybinding.set(element.keybinding);\r\n        dom.setVisibility(!!element.keybinding, data.keybinding.element);\r\n        const actionTitle = (_b = this._keybindingService.lookupKeybinding(acceptSelectedActionCommand)) === null || _b === void 0 ? void 0 : _b.getLabel();\r\n        const previewTitle = (_c = this._keybindingService.lookupKeybinding(previewSelectedActionCommand)) === null || _c === void 0 ? void 0 : _c.getLabel();\r\n        data.container.classList.toggle('option-disabled', element.disabled);\r\n        if (element.disabled) {\r\n            data.container.title = element.label;\r\n        }\r\n        else if (actionTitle && previewTitle) {\r\n            if (this._supportsPreview && element.canPreview) {\r\n                data.container.title = localize({ key: 'label-preview', comment: ['placeholders are keybindings, e.g \"F2 to apply, Shift+F2 to preview\"'] }, \"{0} to apply, {1} to preview\", actionTitle, previewTitle);\r\n            }\r\n            else {\r\n                data.container.title = localize({ key: 'label', comment: ['placeholder is a keybinding, e.g \"F2 to apply\"'] }, \"{0} to apply\", actionTitle);\r\n            }\r\n        }\r\n        else {\r\n            data.container.title = '';\r\n        }\r\n    }\r\n    disposeTemplate(_templateData) {\r\n        // noop\r\n    }\r\n};\r\nActionItemRenderer = __decorate([\r\n    __param(1, IKeybindingService)\r\n], ActionItemRenderer);\r\nclass AcceptSelectedEvent extends UIEvent {\r\n    constructor() { super('acceptSelectedAction'); }\r\n}\r\nclass PreviewSelectedEvent extends UIEvent {\r\n    constructor() { super('previewSelectedAction'); }\r\n}\r\nfunction getKeyboardNavigationLabel(item) {\r\n    // Filter out header vs. action\r\n    if (item.kind === 'action') {\r\n        return item.label;\r\n    }\r\n    return undefined;\r\n}\r\nlet ActionList = class ActionList extends Disposable {\r\n    constructor(user, preview, items, _delegate, _contextViewService, _keybindingService) {\r\n        super();\r\n        this._delegate = _delegate;\r\n        this._contextViewService = _contextViewService;\r\n        this._keybindingService = _keybindingService;\r\n        this._actionLineHeight = 24;\r\n        this._headerLineHeight = 26;\r\n        this.cts = this._register(new CancellationTokenSource());\r\n        this.domNode = document.createElement('div');\r\n        this.domNode.classList.add('actionList');\r\n        const virtualDelegate = {\r\n            getHeight: element => element.kind === \"header\" /* ActionListItemKind.Header */ ? this._headerLineHeight : this._actionLineHeight,\r\n            getTemplateId: element => element.kind\r\n        };\r\n        this._list = this._register(new List(user, this.domNode, virtualDelegate, [\r\n            new ActionItemRenderer(preview, this._keybindingService),\r\n            new HeaderRenderer(),\r\n        ], {\r\n            keyboardSupport: false,\r\n            typeNavigationEnabled: true,\r\n            keyboardNavigationLabelProvider: { getKeyboardNavigationLabel },\r\n            accessibilityProvider: {\r\n                getAriaLabel: element => {\r\n                    if (element.kind === \"action\" /* ActionListItemKind.Action */) {\r\n                        let label = element.label ? stripNewlines(element === null || element === void 0 ? void 0 : element.label) : '';\r\n                        if (element.disabled) {\r\n                            label = localize({ key: 'customQuickFixWidget.labels', comment: [`Action widget labels for accessibility.`] }, \"{0}, Disabled Reason: {1}\", label, element.disabled);\r\n                        }\r\n                        return label;\r\n                    }\r\n                    return null;\r\n                },\r\n                getWidgetAriaLabel: () => localize({ key: 'customQuickFixWidget', comment: [`An action widget option`] }, \"Action Widget\"),\r\n                getRole: (e) => e.kind === \"action\" /* ActionListItemKind.Action */ ? 'option' : 'separator',\r\n                getWidgetRole: () => 'listbox',\r\n            },\r\n        }));\r\n        this._list.style(defaultListStyles);\r\n        this._register(this._list.onMouseClick(e => this.onListClick(e)));\r\n        this._register(this._list.onMouseOver(e => this.onListHover(e)));\r\n        this._register(this._list.onDidChangeFocus(() => this.onFocus()));\r\n        this._register(this._list.onDidChangeSelection(e => this.onListSelection(e)));\r\n        this._allMenuItems = items;\r\n        this._list.splice(0, this._list.length, this._allMenuItems);\r\n        if (this._list.length) {\r\n            this.focusNext();\r\n        }\r\n    }\r\n    focusCondition(element) {\r\n        return !element.disabled && element.kind === \"action\" /* ActionListItemKind.Action */;\r\n    }\r\n    hide(didCancel) {\r\n        this._delegate.onHide(didCancel);\r\n        this.cts.cancel();\r\n        this._contextViewService.hideContextView();\r\n    }\r\n    layout(minWidth) {\r\n        // Updating list height, depending on how many separators and headers there are.\r\n        const numHeaders = this._allMenuItems.filter(item => item.kind === 'header').length;\r\n        const itemsHeight = this._allMenuItems.length * this._actionLineHeight;\r\n        const heightWithHeaders = itemsHeight + numHeaders * this._headerLineHeight - numHeaders * this._actionLineHeight;\r\n        this._list.layout(heightWithHeaders);\r\n        let maxWidth = minWidth;\r\n        if (this._allMenuItems.length >= 50) {\r\n            maxWidth = 380;\r\n        }\r\n        else {\r\n            // For finding width dynamically (not using resize observer)\r\n            const itemWidths = this._allMenuItems.map((_, index) => {\r\n                const element = this.domNode.ownerDocument.getElementById(this._list.getElementID(index));\r\n                if (element) {\r\n                    element.style.width = 'auto';\r\n                    const width = element.getBoundingClientRect().width;\r\n                    element.style.width = '';\r\n                    return width;\r\n                }\r\n                return 0;\r\n            });\r\n            // resize observer - can be used in the future since list widget supports dynamic height but not width\r\n            maxWidth = Math.max(...itemWidths, minWidth);\r\n        }\r\n        const maxVhPrecentage = 0.7;\r\n        const height = Math.min(heightWithHeaders, this.domNode.ownerDocument.body.clientHeight * maxVhPrecentage);\r\n        this._list.layout(height, maxWidth);\r\n        this.domNode.style.height = `${height}px`;\r\n        this._list.domFocus();\r\n        return maxWidth;\r\n    }\r\n    focusPrevious() {\r\n        this._list.focusPrevious(1, true, undefined, this.focusCondition);\r\n    }\r\n    focusNext() {\r\n        this._list.focusNext(1, true, undefined, this.focusCondition);\r\n    }\r\n    acceptSelected(preview) {\r\n        const focused = this._list.getFocus();\r\n        if (focused.length === 0) {\r\n            return;\r\n        }\r\n        const focusIndex = focused[0];\r\n        const element = this._list.element(focusIndex);\r\n        if (!this.focusCondition(element)) {\r\n            return;\r\n        }\r\n        const event = preview ? new PreviewSelectedEvent() : new AcceptSelectedEvent();\r\n        this._list.setSelection([focusIndex], event);\r\n    }\r\n    onListSelection(e) {\r\n        if (!e.elements.length) {\r\n            return;\r\n        }\r\n        const element = e.elements[0];\r\n        if (element.item && this.focusCondition(element)) {\r\n            this._delegate.onSelect(element.item, e.browserEvent instanceof PreviewSelectedEvent);\r\n        }\r\n        else {\r\n            this._list.setSelection([]);\r\n        }\r\n    }\r\n    onFocus() {\r\n        var _a, _b;\r\n        this._list.domFocus();\r\n        const focused = this._list.getFocus();\r\n        if (focused.length === 0) {\r\n            return;\r\n        }\r\n        const focusIndex = focused[0];\r\n        const element = this._list.element(focusIndex);\r\n        (_b = (_a = this._delegate).onFocus) === null || _b === void 0 ? void 0 : _b.call(_a, element.item);\r\n    }\r\n    async onListHover(e) {\r\n        const element = e.element;\r\n        if (element && element.item && this.focusCondition(element)) {\r\n            if (this._delegate.onHover && !element.disabled && element.kind === \"action\" /* ActionListItemKind.Action */) {\r\n                const result = await this._delegate.onHover(element.item, this.cts.token);\r\n                element.canPreview = result ? result.canPreview : undefined;\r\n            }\r\n            if (e.index) {\r\n                this._list.splice(e.index, 1, [element]);\r\n            }\r\n        }\r\n        this._list.setFocus(typeof e.index === 'number' ? [e.index] : []);\r\n    }\r\n    onListClick(e) {\r\n        if (e.element && this.focusCondition(e.element)) {\r\n            this._list.setFocus([]);\r\n        }\r\n    }\r\n};\r\nActionList = __decorate([\r\n    __param(4, IContextViewService),\r\n    __param(5, IKeybindingService)\r\n], ActionList);\r\nexport { ActionList };\r\nfunction stripNewlines(str) {\r\n    return str.replace(/\\r\\n|\\r|\\n/g, ' ');\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\r\nimport { isCancellationError } from '../../../../base/common/errors.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { isEqual } from '../../../../base/common/resources.js';\r\nimport { ShowAiIconMode } from '../../../common/config/editorOptions.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { Progress } from '../../../../platform/progress/common/progress.js';\r\nimport { CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\r\nimport { getCodeActions } from './codeAction.js';\r\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\r\nclass CodeActionOracle extends Disposable {\r\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._markerService = _markerService;\r\n        this._signalChange = _signalChange;\r\n        this._delay = _delay;\r\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\r\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\r\n        this._register(this._editor.onDidChangeCursorPosition(() => this._tryAutoTrigger()));\r\n    }\r\n    trigger(trigger) {\r\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\r\n        this._signalChange(selection ? { trigger, selection } : undefined);\r\n    }\r\n    _onMarkerChanges(resources) {\r\n        const model = this._editor.getModel();\r\n        if (model && resources.some(resource => isEqual(resource, model.uri))) {\r\n            this._tryAutoTrigger();\r\n        }\r\n    }\r\n    _tryAutoTrigger() {\r\n        this._autoTriggerTimer.cancelAndSet(() => {\r\n            this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\r\n        }, this._delay);\r\n    }\r\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\r\n        var _a;\r\n        if (!this._editor.hasModel()) {\r\n            return undefined;\r\n        }\r\n        const model = this._editor.getModel();\r\n        const selection = this._editor.getSelection();\r\n        if (selection.isEmpty() && trigger.type === 2 /* CodeActionTriggerType.Auto */) {\r\n            const { lineNumber, column } = selection.getPosition();\r\n            const line = model.getLineContent(lineNumber);\r\n            if (line.length === 0) {\r\n                // empty line\r\n                const showAiIconOnEmptyLines = ((_a = this._editor.getOption(64 /* EditorOption.lightbulb */).experimental) === null || _a === void 0 ? void 0 : _a.showAiIcon) === ShowAiIconMode.On;\r\n                if (!showAiIconOnEmptyLines) {\r\n                    return undefined;\r\n                }\r\n            }\r\n            else if (column === 1) {\r\n                // look only right\r\n                if (/\\s/.test(line[0])) {\r\n                    return undefined;\r\n                }\r\n            }\r\n            else if (column === model.getLineMaxColumn(lineNumber)) {\r\n                // look only left\r\n                if (/\\s/.test(line[line.length - 1])) {\r\n                    return undefined;\r\n                }\r\n            }\r\n            else {\r\n                // look left and right\r\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\r\n                    return undefined;\r\n                }\r\n            }\r\n        }\r\n        return selection;\r\n    }\r\n}\r\nexport var CodeActionsState;\r\n(function (CodeActionsState) {\r\n    CodeActionsState.Empty = { type: 0 /* Type.Empty */ };\r\n    class Triggered {\r\n        constructor(trigger, position, _cancellablePromise) {\r\n            this.trigger = trigger;\r\n            this.position = position;\r\n            this._cancellablePromise = _cancellablePromise;\r\n            this.type = 1 /* Type.Triggered */;\r\n            this.actions = _cancellablePromise.catch((e) => {\r\n                if (isCancellationError(e)) {\r\n                    return emptyCodeActionSet;\r\n                }\r\n                throw e;\r\n            });\r\n        }\r\n        cancel() {\r\n            this._cancellablePromise.cancel();\r\n        }\r\n    }\r\n    CodeActionsState.Triggered = Triggered;\r\n})(CodeActionsState || (CodeActionsState = {}));\r\nconst emptyCodeActionSet = Object.freeze({\r\n    allActions: [],\r\n    validActions: [],\r\n    dispose: () => { },\r\n    documentation: [],\r\n    hasAutoFix: false,\r\n    hasAIFix: false,\r\n    allAIFixes: false,\r\n});\r\nexport class CodeActionModel extends Disposable {\r\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService, _configurationService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._registry = _registry;\r\n        this._markerService = _markerService;\r\n        this._progressService = _progressService;\r\n        this._configurationService = _configurationService;\r\n        this._codeActionOracle = this._register(new MutableDisposable());\r\n        this._state = CodeActionsState.Empty;\r\n        this._onDidChangeState = this._register(new Emitter());\r\n        this.onDidChangeState = this._onDidChangeState.event;\r\n        this._disposed = false;\r\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\r\n        this._register(this._editor.onDidChangeModel(() => this._update()));\r\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\r\n        this._register(this._registry.onDidChange(() => this._update()));\r\n        this._update();\r\n    }\r\n    dispose() {\r\n        if (this._disposed) {\r\n            return;\r\n        }\r\n        this._disposed = true;\r\n        super.dispose();\r\n        this.setState(CodeActionsState.Empty, true);\r\n    }\r\n    _settingEnabledNearbyQuickfixes() {\r\n        var _a;\r\n        const model = (_a = this._editor) === null || _a === void 0 ? void 0 : _a.getModel();\r\n        return this._configurationService ? this._configurationService.getValue('editor.codeActionWidget.includeNearbyQuickFixes', { resource: model === null || model === void 0 ? void 0 : model.uri }) : false;\r\n    }\r\n    _update() {\r\n        if (this._disposed) {\r\n            return;\r\n        }\r\n        this._codeActionOracle.value = undefined;\r\n        this.setState(CodeActionsState.Empty);\r\n        const model = this._editor.getModel();\r\n        if (model\r\n            && this._registry.has(model)\r\n            && !this._editor.getOption(90 /* EditorOption.readOnly */)) {\r\n            const supportedActions = this._registry.all(model).flatMap(provider => { var _a; return (_a = provider.providedCodeActionKinds) !== null && _a !== void 0 ? _a : []; });\r\n            this._supportedCodeActions.set(supportedActions.join(' '));\r\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\r\n                var _a;\r\n                if (!trigger) {\r\n                    this.setState(CodeActionsState.Empty);\r\n                    return;\r\n                }\r\n                const startPosition = trigger.selection.getStartPosition();\r\n                const actions = createCancelablePromise(async (token) => {\r\n                    var _a, _b, _c, _d, _e, _f;\r\n                    if (this._settingEnabledNearbyQuickfixes() && trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */ && (trigger.trigger.triggerAction === CodeActionTriggerSource.QuickFix || ((_b = (_a = trigger.trigger.filter) === null || _a === void 0 ? void 0 : _a.include) === null || _b === void 0 ? void 0 : _b.contains(CodeActionKind.QuickFix)))) {\r\n                        const codeActionSet = await getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token);\r\n                        const allCodeActions = [...codeActionSet.allActions];\r\n                        if (token.isCancellationRequested) {\r\n                            return emptyCodeActionSet;\r\n                        }\r\n                        // Search for quickfixes in the curret code action set.\r\n                        const foundQuickfix = (_c = codeActionSet.validActions) === null || _c === void 0 ? void 0 : _c.some(action => action.action.kind ? CodeActionKind.QuickFix.contains(new CodeActionKind(action.action.kind)) : false);\r\n                        if (!foundQuickfix) {\r\n                            const allMarkers = this._markerService.read({ resource: model.uri });\r\n                            // If markers exists, and there are no quickfixes found or length is zero, check for quickfixes on that line.\r\n                            if (allMarkers.length > 0) {\r\n                                const currPosition = trigger.selection.getPosition();\r\n                                let trackedPosition = currPosition;\r\n                                let distance = Number.MAX_VALUE;\r\n                                const currentActions = [...codeActionSet.validActions];\r\n                                for (const marker of allMarkers) {\r\n                                    const col = marker.endColumn;\r\n                                    const row = marker.endLineNumber;\r\n                                    const startRow = marker.startLineNumber;\r\n                                    // Found quickfix on the same line and check relative distance to other markers\r\n                                    if ((row === currPosition.lineNumber || startRow === currPosition.lineNumber)) {\r\n                                        trackedPosition = new Position(row, col);\r\n                                        const newCodeActionTrigger = {\r\n                                            type: trigger.trigger.type,\r\n                                            triggerAction: trigger.trigger.triggerAction,\r\n                                            filter: { include: ((_d = trigger.trigger.filter) === null || _d === void 0 ? void 0 : _d.include) ? (_e = trigger.trigger.filter) === null || _e === void 0 ? void 0 : _e.include : CodeActionKind.QuickFix },\r\n                                            autoApply: trigger.trigger.autoApply,\r\n                                            context: { notAvailableMessage: ((_f = trigger.trigger.context) === null || _f === void 0 ? void 0 : _f.notAvailableMessage) || '', position: trackedPosition }\r\n                                        };\r\n                                        const selectionAsPosition = new Selection(trackedPosition.lineNumber, trackedPosition.column, trackedPosition.lineNumber, trackedPosition.column);\r\n                                        const actionsAtMarker = await getCodeActions(this._registry, model, selectionAsPosition, newCodeActionTrigger, Progress.None, token);\r\n                                        if (actionsAtMarker.validActions.length !== 0) {\r\n                                            for (const action of actionsAtMarker.validActions) {\r\n                                                action.highlightRange = action.action.isPreferred;\r\n                                            }\r\n                                            if (codeActionSet.allActions.length === 0) {\r\n                                                allCodeActions.push(...actionsAtMarker.allActions);\r\n                                            }\r\n                                            // Already filtered through to only get quickfixes, so no need to filter again.\r\n                                            if (Math.abs(currPosition.column - col) < distance) {\r\n                                                currentActions.unshift(...actionsAtMarker.validActions);\r\n                                            }\r\n                                            else {\r\n                                                currentActions.push(...actionsAtMarker.validActions);\r\n                                            }\r\n                                        }\r\n                                        distance = Math.abs(currPosition.column - col);\r\n                                    }\r\n                                }\r\n                                const filteredActions = currentActions.filter((action, index, self) => self.findIndex((a) => a.action.title === action.action.title) === index);\r\n                                filteredActions.sort((a, b) => {\r\n                                    if (a.action.isPreferred && !b.action.isPreferred) {\r\n                                        return -1;\r\n                                    }\r\n                                    else if (!a.action.isPreferred && b.action.isPreferred) {\r\n                                        return 1;\r\n                                    }\r\n                                    else if (a.action.isAI && !b.action.isAI) {\r\n                                        return 1;\r\n                                    }\r\n                                    else if (!a.action.isAI && b.action.isAI) {\r\n                                        return -1;\r\n                                    }\r\n                                    else {\r\n                                        return 0;\r\n                                    }\r\n                                });\r\n                                // Only retriggers if actually found quickfix on the same line as cursor\r\n                                return { validActions: filteredActions, allActions: allCodeActions, documentation: codeActionSet.documentation, hasAutoFix: codeActionSet.hasAutoFix, hasAIFix: codeActionSet.hasAIFix, allAIFixes: codeActionSet.allAIFixes, dispose: () => { codeActionSet.dispose(); } };\r\n                            }\r\n                        }\r\n                    }\r\n                    // temporarilly hiding here as this is enabled/disabled behind a setting.\r\n                    return getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token);\r\n                });\r\n                if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\r\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\r\n                }\r\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, startPosition, actions));\r\n            }, undefined);\r\n            this._codeActionOracle.value.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\r\n        }\r\n        else {\r\n            this._supportedCodeActions.reset();\r\n        }\r\n    }\r\n    trigger(trigger) {\r\n        var _a;\r\n        (_a = this._codeActionOracle.value) === null || _a === void 0 ? void 0 : _a.trigger(trigger);\r\n    }\r\n    setState(newState, skipNotify) {\r\n        if (newState === this._state) {\r\n            return;\r\n        }\r\n        // Cancel old request\r\n        if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\r\n            this._state.cancel();\r\n        }\r\n        this._state = newState;\r\n        if (!skipNotify && !this._disposed) {\r\n            this._onDidChangeState.fire(newState);\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar CodeActionController_1;\r\nimport { getDomNodePagePosition } from '../../../../base/browser/dom.js';\r\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Lazy } from '../../../../base/common/lazy.js';\r\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ApplyCodeActionReason, applyCodeAction } from './codeAction.js';\r\nimport { CodeActionKeybindingResolver } from './codeActionKeybindingResolver.js';\r\nimport { toMenuItems } from './codeActionMenu.js';\r\nimport { LightBulbWidget } from './lightBulbWidget.js';\r\nimport { MessageController } from '../../message/browser/messageController.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { IActionWidgetService } from '../../../../platform/actionWidget/browser/actionWidget.js';\r\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\r\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\r\nimport { editorFindMatchHighlight, editorFindMatchHighlightBorder } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\r\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\r\nimport { CodeActionTriggerSource } from '../common/types.js';\r\nimport { CodeActionModel } from './codeActionModel.js';\r\nconst DECORATION_CLASS_NAME = 'quickfix-edit-highlight';\r\nlet CodeActionController = CodeActionController_1 = class CodeActionController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(CodeActionController_1.ID);\r\n    }\r\n    constructor(editor, markerService, contextKeyService, instantiationService, languageFeaturesService, progressService, _commandService, _configurationService, _actionWidgetService, _instantiationService) {\r\n        super();\r\n        this._commandService = _commandService;\r\n        this._configurationService = _configurationService;\r\n        this._actionWidgetService = _actionWidgetService;\r\n        this._instantiationService = _instantiationService;\r\n        this._activeCodeActions = this._register(new MutableDisposable());\r\n        this._showDisabled = false;\r\n        this._disposed = false;\r\n        this._editor = editor;\r\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService, _configurationService));\r\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\r\n        this._lightBulbWidget = new Lazy(() => {\r\n            const widget = this._editor.getContribution(LightBulbWidget.ID);\r\n            if (widget) {\r\n                this._register(widget.onClick(e => this.showCodeActionList(e.actions, e, { includeDisabledActions: false, fromLightbulb: true })));\r\n            }\r\n            return widget;\r\n        });\r\n        this._resolver = instantiationService.createInstance(CodeActionKeybindingResolver);\r\n        this._register(this._editor.onDidLayoutChange(() => this._actionWidgetService.hide()));\r\n    }\r\n    dispose() {\r\n        this._disposed = true;\r\n        super.dispose();\r\n    }\r\n    showCodeActions(_trigger, actions, at) {\r\n        return this.showCodeActionList(actions, at, { includeDisabledActions: false, fromLightbulb: false });\r\n    }\r\n    manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply) {\r\n        var _a;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\r\n        const triggerPosition = this._editor.getPosition();\r\n        this._trigger({ type: 1 /* CodeActionTriggerType.Invoke */, triggerAction, filter, autoApply, context: { notAvailableMessage, position: triggerPosition } });\r\n    }\r\n    _trigger(trigger) {\r\n        return this._model.trigger(trigger);\r\n    }\r\n    async _applyCodeAction(action, retrigger, preview) {\r\n        try {\r\n            await this._instantiationService.invokeFunction(applyCodeAction, action, ApplyCodeActionReason.FromCodeActions, { preview, editor: this._editor });\r\n        }\r\n        finally {\r\n            if (retrigger) {\r\n                this._trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.QuickFix, filter: {} });\r\n            }\r\n        }\r\n    }\r\n    async update(newState) {\r\n        var _a, _b, _c, _d, _e, _f, _g;\r\n        if (newState.type !== 1 /* CodeActionsState.Type.Triggered */) {\r\n            (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\r\n            return;\r\n        }\r\n        let actions;\r\n        try {\r\n            actions = await newState.actions;\r\n        }\r\n        catch (e) {\r\n            onUnexpectedError(e);\r\n            return;\r\n        }\r\n        if (this._disposed) {\r\n            return;\r\n        }\r\n        (_b = this._lightBulbWidget.value) === null || _b === void 0 ? void 0 : _b.update(actions, newState.trigger, newState.position);\r\n        if (newState.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\r\n            if ((_c = newState.trigger.filter) === null || _c === void 0 ? void 0 : _c.include) { // Triggered for specific scope\r\n                // Check to see if we want to auto apply.\r\n                const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\r\n                if (validActionToApply) {\r\n                    try {\r\n                        (_d = this._lightBulbWidget.value) === null || _d === void 0 ? void 0 : _d.hide();\r\n                        await this._applyCodeAction(validActionToApply, false, false);\r\n                    }\r\n                    finally {\r\n                        actions.dispose();\r\n                    }\r\n                    return;\r\n                }\r\n                // Check to see if there is an action that we would have applied were it not invalid\r\n                if (newState.trigger.context) {\r\n                    const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\r\n                    if (invalidAction && invalidAction.action.disabled) {\r\n                        (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\r\n                        actions.dispose();\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            const includeDisabledActions = !!((_f = newState.trigger.filter) === null || _f === void 0 ? void 0 : _f.include);\r\n            if (newState.trigger.context) {\r\n                if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\r\n                    (_g = MessageController.get(this._editor)) === null || _g === void 0 ? void 0 : _g.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\r\n                    this._activeCodeActions.value = actions;\r\n                    actions.dispose();\r\n                    return;\r\n                }\r\n            }\r\n            this._activeCodeActions.value = actions;\r\n            this.showCodeActionList(actions, this.toCoords(newState.position), { includeDisabledActions, fromLightbulb: false });\r\n        }\r\n        else {\r\n            // auto magically triggered\r\n            if (this._actionWidgetService.isVisible) {\r\n                // TODO: Figure out if we should update the showing menu?\r\n                actions.dispose();\r\n            }\r\n            else {\r\n                this._activeCodeActions.value = actions;\r\n            }\r\n        }\r\n    }\r\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\r\n        if (!actions.allActions.length) {\r\n            return undefined;\r\n        }\r\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length === 0)\r\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.allActions.length === 1)) {\r\n            return actions.allActions.find(({ action }) => action.disabled);\r\n        }\r\n        return undefined;\r\n    }\r\n    tryGetValidActionToApply(trigger, actions) {\r\n        if (!actions.validActions.length) {\r\n            return undefined;\r\n        }\r\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length > 0)\r\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.validActions.length === 1)) {\r\n            return actions.validActions[0];\r\n        }\r\n        return undefined;\r\n    }\r\n    async showCodeActionList(actions, at, options) {\r\n        const currentDecorations = this._editor.createDecorationsCollection();\r\n        const editorDom = this._editor.getDomNode();\r\n        if (!editorDom) {\r\n            return;\r\n        }\r\n        const actionsToShow = options.includeDisabledActions && (this._showDisabled || actions.validActions.length === 0) ? actions.allActions : actions.validActions;\r\n        if (!actionsToShow.length) {\r\n            return;\r\n        }\r\n        const anchor = Position.isIPosition(at) ? this.toCoords(at) : at;\r\n        const delegate = {\r\n            onSelect: async (action, preview) => {\r\n                this._applyCodeAction(action, /* retrigger */ true, !!preview);\r\n                this._actionWidgetService.hide();\r\n                currentDecorations.clear();\r\n            },\r\n            onHide: () => {\r\n                var _a;\r\n                (_a = this._editor) === null || _a === void 0 ? void 0 : _a.focus();\r\n                currentDecorations.clear();\r\n            },\r\n            onHover: async (action, token) => {\r\n                var _a;\r\n                await action.resolve(token);\r\n                if (token.isCancellationRequested) {\r\n                    return;\r\n                }\r\n                return { canPreview: !!((_a = action.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length) };\r\n            },\r\n            onFocus: (action) => {\r\n                var _a, _b;\r\n                if (action && action.highlightRange && action.action.diagnostics) {\r\n                    const decorations = [{ range: action.action.diagnostics[0], options: CodeActionController_1.DECORATION }];\r\n                    currentDecorations.set(decorations);\r\n                    const diagnostic = action.action.diagnostics[0];\r\n                    const selectionText = (_b = (_a = this._editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition({ lineNumber: diagnostic.startLineNumber, column: diagnostic.startColumn })) === null || _b === void 0 ? void 0 : _b.word;\r\n                    aria.status(localize('editingNewSelection', \"Context: {0} at line {1} and column {2}.\", selectionText, diagnostic.startLineNumber, diagnostic.startColumn));\r\n                }\r\n                else {\r\n                    currentDecorations.clear();\r\n                }\r\n            }\r\n        };\r\n        this._actionWidgetService.show('codeActionWidget', true, toMenuItems(actionsToShow, this._shouldShowHeaders(), this._resolver.getResolver()), delegate, anchor, editorDom, this._getActionBarActions(actions, at, options));\r\n    }\r\n    toCoords(position) {\r\n        if (!this._editor.hasModel()) {\r\n            return { x: 0, y: 0 };\r\n        }\r\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\r\n        this._editor.render();\r\n        // Translate to absolute editor position\r\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\r\n        const editorCoords = getDomNodePagePosition(this._editor.getDomNode());\r\n        const x = editorCoords.left + cursorCoords.left;\r\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\r\n        return { x, y };\r\n    }\r\n    _shouldShowHeaders() {\r\n        var _a;\r\n        const model = (_a = this._editor) === null || _a === void 0 ? void 0 : _a.getModel();\r\n        return this._configurationService.getValue('editor.codeActionWidget.showHeaders', { resource: model === null || model === void 0 ? void 0 : model.uri });\r\n    }\r\n    _getActionBarActions(actions, at, options) {\r\n        if (options.fromLightbulb) {\r\n            return [];\r\n        }\r\n        const resultActions = actions.documentation.map((command) => {\r\n            var _a;\r\n            return ({\r\n                id: command.id,\r\n                label: command.title,\r\n                tooltip: (_a = command.tooltip) !== null && _a !== void 0 ? _a : '',\r\n                class: undefined,\r\n                enabled: true,\r\n                run: () => { var _a; return this._commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : [])); },\r\n            });\r\n        });\r\n        if (options.includeDisabledActions && actions.validActions.length > 0 && actions.allActions.length !== actions.validActions.length) {\r\n            resultActions.push(this._showDisabled ? {\r\n                id: 'hideMoreActions',\r\n                label: localize('hideMoreActions', 'Hide Disabled'),\r\n                enabled: true,\r\n                tooltip: '',\r\n                class: undefined,\r\n                run: () => {\r\n                    this._showDisabled = false;\r\n                    return this.showCodeActionList(actions, at, options);\r\n                }\r\n            } : {\r\n                id: 'showMoreActions',\r\n                label: localize('showMoreActions', 'Show Disabled'),\r\n                enabled: true,\r\n                tooltip: '',\r\n                class: undefined,\r\n                run: () => {\r\n                    this._showDisabled = true;\r\n                    return this.showCodeActionList(actions, at, options);\r\n                }\r\n            });\r\n        }\r\n        return resultActions;\r\n    }\r\n};\r\nCodeActionController.ID = 'editor.contrib.codeActionController';\r\nCodeActionController.DECORATION = ModelDecorationOptions.register({\r\n    description: 'quickfix-highlight',\r\n    className: DECORATION_CLASS_NAME\r\n});\r\nCodeActionController = CodeActionController_1 = __decorate([\r\n    __param(1, IMarkerService),\r\n    __param(2, IContextKeyService),\r\n    __param(3, IInstantiationService),\r\n    __param(4, ILanguageFeaturesService),\r\n    __param(5, IEditorProgressService),\r\n    __param(6, ICommandService),\r\n    __param(7, IConfigurationService),\r\n    __param(8, IActionWidgetService),\r\n    __param(9, IInstantiationService)\r\n], CodeActionController);\r\nexport { CodeActionController };\r\nregisterThemingParticipant((theme, collector) => {\r\n    const addBackgroundColorRule = (selector, color) => {\r\n        if (color) {\r\n            collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\r\n        }\r\n    };\r\n    addBackgroundColorRule('.quickfix-edit-highlight', theme.getColor(editorFindMatchHighlight));\r\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\r\n    if (findMatchHighlightBorder) {\r\n        collector.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { binarySearch } from '../../../../base/common/arrays.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { LinkedList } from '../../../../base/common/linkedList.js';\r\nimport { compare } from '../../../../base/common/strings.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nexport class MarkerCoordinate {\r\n    constructor(marker, index, total) {\r\n        this.marker = marker;\r\n        this.index = index;\r\n        this.total = total;\r\n    }\r\n}\r\nlet MarkerList = class MarkerList {\r\n    constructor(resourceFilter, _markerService, _configService) {\r\n        this._markerService = _markerService;\r\n        this._configService = _configService;\r\n        this._onDidChange = new Emitter();\r\n        this.onDidChange = this._onDidChange.event;\r\n        this._dispoables = new DisposableStore();\r\n        this._markers = [];\r\n        this._nextIdx = -1;\r\n        if (URI.isUri(resourceFilter)) {\r\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\r\n        }\r\n        else if (resourceFilter) {\r\n            this._resourceFilter = resourceFilter;\r\n        }\r\n        const compareOrder = this._configService.getValue('problems.sortOrder');\r\n        const compareMarker = (a, b) => {\r\n            let res = compare(a.resource.toString(), b.resource.toString());\r\n            if (res === 0) {\r\n                if (compareOrder === 'position') {\r\n                    res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\r\n                }\r\n                else {\r\n                    res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n        const updateMarker = () => {\r\n            this._markers = this._markerService.read({\r\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\r\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\r\n            });\r\n            if (typeof resourceFilter === 'function') {\r\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\r\n            }\r\n            this._markers.sort(compareMarker);\r\n        };\r\n        updateMarker();\r\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\r\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\r\n                updateMarker();\r\n                this._nextIdx = -1;\r\n                this._onDidChange.fire();\r\n            }\r\n        }));\r\n    }\r\n    dispose() {\r\n        this._dispoables.dispose();\r\n        this._onDidChange.dispose();\r\n    }\r\n    matches(uri) {\r\n        if (!this._resourceFilter && !uri) {\r\n            return true;\r\n        }\r\n        if (!this._resourceFilter || !uri) {\r\n            return false;\r\n        }\r\n        return this._resourceFilter(uri);\r\n    }\r\n    get selected() {\r\n        const marker = this._markers[this._nextIdx];\r\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\r\n    }\r\n    _initIdx(model, position, fwd) {\r\n        let found = false;\r\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\r\n        if (idx < 0) {\r\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\r\n            if (idx < 0) {\r\n                idx = ~idx;\r\n            }\r\n        }\r\n        for (let i = idx; i < this._markers.length; i++) {\r\n            let range = Range.lift(this._markers[i]);\r\n            if (range.isEmpty()) {\r\n                const word = model.getWordAtPosition(range.getStartPosition());\r\n                if (word) {\r\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\r\n                }\r\n            }\r\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\r\n                this._nextIdx = i;\r\n                found = true;\r\n                break;\r\n            }\r\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\r\n                break;\r\n            }\r\n        }\r\n        if (!found) {\r\n            // after the last change\r\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\r\n        }\r\n        if (this._nextIdx < 0) {\r\n            this._nextIdx = this._markers.length - 1;\r\n        }\r\n    }\r\n    resetIndex() {\r\n        this._nextIdx = -1;\r\n    }\r\n    move(fwd, model, position) {\r\n        if (this._markers.length === 0) {\r\n            return false;\r\n        }\r\n        const oldIdx = this._nextIdx;\r\n        if (this._nextIdx === -1) {\r\n            this._initIdx(model, position, fwd);\r\n        }\r\n        else if (fwd) {\r\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\r\n        }\r\n        else if (!fwd) {\r\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\r\n        }\r\n        if (oldIdx !== this._nextIdx) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    find(uri, position) {\r\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\r\n        if (idx < 0) {\r\n            return undefined;\r\n        }\r\n        for (; idx < this._markers.length; idx++) {\r\n            if (Range.containsPosition(this._markers[idx], position)) {\r\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n};\r\nMarkerList = __decorate([\r\n    __param(1, IMarkerService),\r\n    __param(2, IConfigurationService)\r\n], MarkerList);\r\nexport { MarkerList };\r\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\r\nlet MarkerNavigationService = class MarkerNavigationService {\r\n    constructor(_markerService, _configService) {\r\n        this._markerService = _markerService;\r\n        this._configService = _configService;\r\n        this._provider = new LinkedList();\r\n    }\r\n    getMarkerList(resource) {\r\n        for (const provider of this._provider) {\r\n            const result = provider.getMarkerList(resource);\r\n            if (result) {\r\n                return result;\r\n            }\r\n        }\r\n        // default\r\n        return new MarkerList(resource, this._markerService, this._configService);\r\n    }\r\n};\r\nMarkerNavigationService = __decorate([\r\n    __param(0, IMarkerService),\r\n    __param(1, IConfigurationService)\r\n], MarkerNavigationService);\r\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, 1 /* InstantiationType.Delayed */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar MarkerNavigationWidget_1;\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nimport { Color } from '../../../../base/common/color.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\r\nimport { basename } from '../../../../base/common/resources.js';\r\nimport { splitLines } from '../../../../base/common/strings.js';\r\nimport './media/gotoErrorWidget.css';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\r\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { ILabelService } from '../../../../platform/label/common/label.js';\r\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { SeverityIcon } from '../../../../platform/severityIcon/browser/severityIcon.js';\r\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nclass MessageWidget {\r\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\r\n        this._openerService = _openerService;\r\n        this._labelService = _labelService;\r\n        this._lines = 0;\r\n        this._longestLineLength = 0;\r\n        this._relatedDiagnostics = new WeakMap();\r\n        this._disposables = new DisposableStore();\r\n        this._editor = editor;\r\n        const domNode = document.createElement('div');\r\n        domNode.className = 'descriptioncontainer';\r\n        this._messageBlock = document.createElement('div');\r\n        this._messageBlock.classList.add('message');\r\n        this._messageBlock.setAttribute('aria-live', 'assertive');\r\n        this._messageBlock.setAttribute('role', 'alert');\r\n        domNode.appendChild(this._messageBlock);\r\n        this._relatedBlock = document.createElement('div');\r\n        domNode.appendChild(this._relatedBlock);\r\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\r\n            event.preventDefault();\r\n            const related = this._relatedDiagnostics.get(event.target);\r\n            if (related) {\r\n                onRelatedInformation(related);\r\n            }\r\n        }));\r\n        this._scrollable = new ScrollableElement(domNode, {\r\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\r\n            vertical: 1 /* ScrollbarVisibility.Auto */,\r\n            useShadows: false,\r\n            horizontalScrollbarSize: 6,\r\n            verticalScrollbarSize: 6\r\n        });\r\n        parent.appendChild(this._scrollable.getDomNode());\r\n        this._disposables.add(this._scrollable.onScroll(e => {\r\n            domNode.style.left = `-${e.scrollLeft}px`;\r\n            domNode.style.top = `-${e.scrollTop}px`;\r\n        }));\r\n        this._disposables.add(this._scrollable);\r\n    }\r\n    dispose() {\r\n        dispose(this._disposables);\r\n    }\r\n    update(marker) {\r\n        const { source, message, relatedInformation, code } = marker;\r\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\r\n        if (code) {\r\n            if (typeof code === 'string') {\r\n                sourceAndCodeLength += code.length;\r\n            }\r\n            else {\r\n                sourceAndCodeLength += code.value.length;\r\n            }\r\n        }\r\n        const lines = splitLines(message);\r\n        this._lines = lines.length;\r\n        this._longestLineLength = 0;\r\n        for (const line of lines) {\r\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\r\n        }\r\n        dom.clearNode(this._messageBlock);\r\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\r\n        this._editor.applyFontInfo(this._messageBlock);\r\n        let lastLineElement = this._messageBlock;\r\n        for (const line of lines) {\r\n            lastLineElement = document.createElement('div');\r\n            lastLineElement.innerText = line;\r\n            if (line === '') {\r\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\r\n            }\r\n            this._messageBlock.appendChild(lastLineElement);\r\n        }\r\n        if (source || code) {\r\n            const detailsElement = document.createElement('span');\r\n            detailsElement.classList.add('details');\r\n            lastLineElement.appendChild(detailsElement);\r\n            if (source) {\r\n                const sourceElement = document.createElement('span');\r\n                sourceElement.innerText = source;\r\n                sourceElement.classList.add('source');\r\n                detailsElement.appendChild(sourceElement);\r\n            }\r\n            if (code) {\r\n                if (typeof code === 'string') {\r\n                    const codeElement = document.createElement('span');\r\n                    codeElement.innerText = `(${code})`;\r\n                    codeElement.classList.add('code');\r\n                    detailsElement.appendChild(codeElement);\r\n                }\r\n                else {\r\n                    this._codeLink = dom.$('a.code-link');\r\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\r\n                    this._codeLink.onclick = (e) => {\r\n                        this._openerService.open(code.target, { allowCommands: true });\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                    };\r\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\r\n                    codeElement.innerText = code.value;\r\n                    detailsElement.appendChild(this._codeLink);\r\n                }\r\n            }\r\n        }\r\n        dom.clearNode(this._relatedBlock);\r\n        this._editor.applyFontInfo(this._relatedBlock);\r\n        if (isNonEmptyArray(relatedInformation)) {\r\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\r\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(66 /* EditorOption.lineHeight */) * 0.66)}px`;\r\n            this._lines += 1;\r\n            for (const related of relatedInformation) {\r\n                const container = document.createElement('div');\r\n                const relatedResource = document.createElement('a');\r\n                relatedResource.classList.add('filename');\r\n                relatedResource.innerText = `${this._labelService.getUriBasenameLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\r\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\r\n                this._relatedDiagnostics.set(relatedResource, related);\r\n                const relatedMessage = document.createElement('span');\r\n                relatedMessage.innerText = related.message;\r\n                container.appendChild(relatedResource);\r\n                container.appendChild(relatedMessage);\r\n                this._lines += 1;\r\n                relatedInformationNode.appendChild(container);\r\n            }\r\n        }\r\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\r\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\r\n        const scrollHeight = fontInfo.lineHeight * this._lines;\r\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\r\n    }\r\n    layout(height, width) {\r\n        this._scrollable.getDomNode().style.height = `${height}px`;\r\n        this._scrollable.getDomNode().style.width = `${width}px`;\r\n        this._scrollable.setScrollDimensions({ width, height });\r\n    }\r\n    getHeightInLines() {\r\n        return Math.min(17, this._lines);\r\n    }\r\n    getAriaLabel(marker) {\r\n        let severityLabel = '';\r\n        switch (marker.severity) {\r\n            case MarkerSeverity.Error:\r\n                severityLabel = nls.localize('Error', \"Error\");\r\n                break;\r\n            case MarkerSeverity.Warning:\r\n                severityLabel = nls.localize('Warning', \"Warning\");\r\n                break;\r\n            case MarkerSeverity.Info:\r\n                severityLabel = nls.localize('Info', \"Info\");\r\n                break;\r\n            case MarkerSeverity.Hint:\r\n                severityLabel = nls.localize('Hint', \"Hint\");\r\n                break;\r\n        }\r\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\r\n        const model = this._editor.getModel();\r\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\r\n            const lineContent = model.getLineContent(marker.startLineNumber);\r\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\r\n        }\r\n        return ariaLabel;\r\n    }\r\n}\r\nlet MarkerNavigationWidget = MarkerNavigationWidget_1 = class MarkerNavigationWidget extends PeekViewWidget {\r\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\r\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\r\n        this._themeService = _themeService;\r\n        this._openerService = _openerService;\r\n        this._menuService = _menuService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._labelService = _labelService;\r\n        this._callOnDispose = new DisposableStore();\r\n        this._onDidSelectRelatedInformation = new Emitter();\r\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\r\n        this._severity = MarkerSeverity.Warning;\r\n        this._backgroundColor = Color.white;\r\n        this._applyTheme(_themeService.getColorTheme());\r\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\r\n        this.create();\r\n    }\r\n    _applyTheme(theme) {\r\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\r\n        let colorId = editorMarkerNavigationError;\r\n        let headerBackground = editorMarkerNavigationErrorHeader;\r\n        if (this._severity === MarkerSeverity.Warning) {\r\n            colorId = editorMarkerNavigationWarning;\r\n            headerBackground = editorMarkerNavigationWarningHeader;\r\n        }\r\n        else if (this._severity === MarkerSeverity.Info) {\r\n            colorId = editorMarkerNavigationInfo;\r\n            headerBackground = editorMarkerNavigationInfoHeader;\r\n        }\r\n        const frameColor = theme.getColor(colorId);\r\n        const headerBg = theme.getColor(headerBackground);\r\n        this.style({\r\n            arrowColor: frameColor,\r\n            frameColor: frameColor,\r\n            headerBackgroundColor: headerBg,\r\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\r\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\r\n        }); // style() will trigger _applyStyles\r\n    }\r\n    _applyStyles() {\r\n        if (this._parentContainer) {\r\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\r\n        }\r\n        super._applyStyles();\r\n    }\r\n    dispose() {\r\n        this._callOnDispose.dispose();\r\n        super.dispose();\r\n    }\r\n    _fillHead(container) {\r\n        super._fillHead(container);\r\n        this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(e => this.editor.focus()));\r\n        const actions = [];\r\n        const menu = this._menuService.createMenu(MarkerNavigationWidget_1.TitleMenu, this._contextKeyService);\r\n        createAndFillInActionBarActions(menu, undefined, actions);\r\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\r\n        menu.dispose();\r\n    }\r\n    _fillTitleIcon(container) {\r\n        this._icon = dom.append(container, dom.$(''));\r\n    }\r\n    _fillBody(container) {\r\n        this._parentContainer = container;\r\n        container.classList.add('marker-widget');\r\n        this._parentContainer.tabIndex = 0;\r\n        this._parentContainer.setAttribute('role', 'tooltip');\r\n        this._container = document.createElement('div');\r\n        container.appendChild(this._container);\r\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\r\n        this._disposables.add(this._message);\r\n    }\r\n    show() {\r\n        throw new Error('call showAtMarker');\r\n    }\r\n    showAtMarker(marker, markerIdx, markerCount) {\r\n        // update:\r\n        // * title\r\n        // * message\r\n        this._container.classList.remove('stale');\r\n        this._message.update(marker);\r\n        // update frame color (only applied on 'show')\r\n        this._severity = marker.severity;\r\n        this._applyTheme(this._themeService.getColorTheme());\r\n        // show\r\n        const range = Range.lift(marker);\r\n        const editorPosition = this.editor.getPosition();\r\n        const position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\r\n        super.show(position, this.computeRequiredHeight());\r\n        const model = this.editor.getModel();\r\n        if (model) {\r\n            const detail = markerCount > 1\r\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\r\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\r\n            this.setTitle(basename(model.uri), detail);\r\n        }\r\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\r\n        this.editor.revealPositionNearTop(position, 0 /* ScrollType.Smooth */);\r\n        this.editor.focus();\r\n    }\r\n    updateMarker(marker) {\r\n        this._container.classList.remove('stale');\r\n        this._message.update(marker);\r\n    }\r\n    showStale() {\r\n        this._container.classList.add('stale');\r\n        this._relayout();\r\n    }\r\n    _doLayoutBody(heightInPixel, widthInPixel) {\r\n        super._doLayoutBody(heightInPixel, widthInPixel);\r\n        this._heightInPixel = heightInPixel;\r\n        this._message.layout(heightInPixel, widthInPixel);\r\n        this._container.style.height = `${heightInPixel}px`;\r\n    }\r\n    _onWidth(widthInPixel) {\r\n        this._message.layout(this._heightInPixel, widthInPixel);\r\n    }\r\n    _relayout() {\r\n        super._relayout(this.computeRequiredHeight());\r\n    }\r\n    computeRequiredHeight() {\r\n        return 3 + this._message.getHeightInLines();\r\n    }\r\n};\r\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\r\nMarkerNavigationWidget = MarkerNavigationWidget_1 = __decorate([\r\n    __param(1, IThemeService),\r\n    __param(2, IOpenerService),\r\n    __param(3, IMenuService),\r\n    __param(4, IInstantiationService),\r\n    __param(5, IContextKeyService),\r\n    __param(6, ILabelService)\r\n], MarkerNavigationWidget);\r\nexport { MarkerNavigationWidget };\r\n// theming\r\nconst errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\r\nconst warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\r\nconst infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\r\nconst editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\r\nconst editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\r\nconst editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\r\nconst editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hcDark: '#0C141F', hcLight: transparent(editorMarkerNavigationWarning, .2) }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\r\nconst editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\r\nconst editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\r\nconst editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hcDark: editorBackground, hcLight: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './media/severityIcon.css';\r\nimport { Codicon } from '../../../base/common/codicons.js';\r\nimport { ThemeIcon } from '../../../base/common/themables.js';\r\nimport Severity from '../../../base/common/severity.js';\r\nexport var SeverityIcon;\r\n(function (SeverityIcon) {\r\n    function className(severity) {\r\n        switch (severity) {\r\n            case Severity.Ignore:\r\n                return 'severity-ignore ' + ThemeIcon.asClassName(Codicon.info);\r\n            case Severity.Info:\r\n                return ThemeIcon.asClassName(Codicon.info);\r\n            case Severity.Warning:\r\n                return ThemeIcon.asClassName(Codicon.warning);\r\n            case Severity.Error:\r\n                return ThemeIcon.asClassName(Codicon.error);\r\n            default:\r\n                return '';\r\n        }\r\n    }\r\n    SeverityIcon.className = className;\r\n})(SeverityIcon || (SeverityIcon = {}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar MarkerController_1;\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { IMarkerNavigationService } from './markerNavigationService.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\r\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\r\nlet MarkerController = MarkerController_1 = class MarkerController {\r\n    static get(editor) {\r\n        return editor.getContribution(MarkerController_1.ID);\r\n    }\r\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\r\n        this._markerNavigationService = _markerNavigationService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._editorService = _editorService;\r\n        this._instantiationService = _instantiationService;\r\n        this._sessionDispoables = new DisposableStore();\r\n        this._editor = editor;\r\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\r\n    }\r\n    dispose() {\r\n        this._cleanUp();\r\n        this._sessionDispoables.dispose();\r\n    }\r\n    _cleanUp() {\r\n        this._widgetVisible.reset();\r\n        this._sessionDispoables.clear();\r\n        this._widget = undefined;\r\n        this._model = undefined;\r\n    }\r\n    _getOrCreateModel(uri) {\r\n        if (this._model && this._model.matches(uri)) {\r\n            return this._model;\r\n        }\r\n        let reusePosition = false;\r\n        if (this._model) {\r\n            reusePosition = true;\r\n            this._cleanUp();\r\n        }\r\n        this._model = this._markerNavigationService.getMarkerList(uri);\r\n        if (reusePosition) {\r\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\r\n        }\r\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\r\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\r\n        this._widgetVisible.set(true);\r\n        this._sessionDispoables.add(this._model);\r\n        this._sessionDispoables.add(this._widget);\r\n        // follow cursor\r\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\r\n            var _a, _b, _c;\r\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\r\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\r\n            }\r\n        }));\r\n        // update markers\r\n        this._sessionDispoables.add(this._model.onDidChange(() => {\r\n            if (!this._widget || !this._widget.position || !this._model) {\r\n                return;\r\n            }\r\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\r\n            if (info) {\r\n                this._widget.updateMarker(info.marker);\r\n            }\r\n            else {\r\n                this._widget.showStale();\r\n            }\r\n        }));\r\n        // open related\r\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\r\n            this._editorService.openCodeEditor({\r\n                resource: related.resource,\r\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\r\n            }, this._editor);\r\n            this.close(false);\r\n        }));\r\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\r\n        return this._model;\r\n    }\r\n    close(focusEditor = true) {\r\n        this._cleanUp();\r\n        if (focusEditor) {\r\n            this._editor.focus();\r\n        }\r\n    }\r\n    showAtMarker(marker) {\r\n        if (this._editor.hasModel()) {\r\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\r\n            model.resetIndex();\r\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\r\n            if (model.selected) {\r\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\r\n            }\r\n        }\r\n    }\r\n    async nagivate(next, multiFile) {\r\n        var _a, _b;\r\n        if (this._editor.hasModel()) {\r\n            const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\r\n            model.move(next, this._editor.getModel(), this._editor.getPosition());\r\n            if (!model.selected) {\r\n                return;\r\n            }\r\n            if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\r\n                // show in different editor\r\n                this._cleanUp();\r\n                const otherEditor = await this._editorService.openCodeEditor({\r\n                    resource: model.selected.marker.resource,\r\n                    options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* TextEditorSelectionRevealType.NearTop */, selection: model.selected.marker }\r\n                }, this._editor);\r\n                if (otherEditor) {\r\n                    (_a = MarkerController_1.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\r\n                    (_b = MarkerController_1.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\r\n                }\r\n            }\r\n            else {\r\n                // show in this editor\r\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\r\n            }\r\n        }\r\n    }\r\n};\r\nMarkerController.ID = 'editor.contrib.markerController';\r\nMarkerController = MarkerController_1 = __decorate([\r\n    __param(1, IMarkerNavigationService),\r\n    __param(2, IContextKeyService),\r\n    __param(3, ICodeEditorService),\r\n    __param(4, IInstantiationService)\r\n], MarkerController);\r\nexport { MarkerController };\r\nclass MarkerNavigationAction extends EditorAction {\r\n    constructor(_next, _multiFile, opts) {\r\n        super(opts);\r\n        this._next = _next;\r\n        this._multiFile = _multiFile;\r\n    }\r\n    async run(_accessor, editor) {\r\n        var _a;\r\n        if (editor.hasModel()) {\r\n            (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\r\n        }\r\n    }\r\n}\r\nexport class NextMarkerAction extends MarkerNavigationAction {\r\n    constructor() {\r\n        super(true, false, {\r\n            id: NextMarkerAction.ID,\r\n            label: NextMarkerAction.LABEL,\r\n            alias: 'Go to Next Problem (Error, Warning, Info)',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MarkerNavigationWidget.TitleMenu,\r\n                title: NextMarkerAction.LABEL,\r\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\r\n                group: 'navigation',\r\n                order: 1\r\n            }\r\n        });\r\n    }\r\n}\r\nNextMarkerAction.ID = 'editor.action.marker.next';\r\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\r\nclass PrevMarkerAction extends MarkerNavigationAction {\r\n    constructor() {\r\n        super(false, false, {\r\n            id: PrevMarkerAction.ID,\r\n            label: PrevMarkerAction.LABEL,\r\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MarkerNavigationWidget.TitleMenu,\r\n                title: PrevMarkerAction.LABEL,\r\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\r\n                group: 'navigation',\r\n                order: 2\r\n            }\r\n        });\r\n    }\r\n}\r\nPrevMarkerAction.ID = 'editor.action.marker.prev';\r\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\r\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\r\n    constructor() {\r\n        super(true, true, {\r\n            id: 'editor.action.marker.nextInFiles',\r\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\r\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 66 /* KeyCode.F8 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarGoMenu,\r\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\r\n                group: '6_problem_nav',\r\n                order: 1\r\n            }\r\n        });\r\n    }\r\n}\r\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\r\n    constructor() {\r\n        super(false, true, {\r\n            id: 'editor.action.marker.prevInFiles',\r\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\r\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 1024 /* KeyMod.Shift */ | 66 /* KeyCode.F8 */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: MenuId.MenubarGoMenu,\r\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\r\n                group: '6_problem_nav',\r\n                order: 2\r\n            }\r\n        });\r\n    }\r\n}\r\nregisterEditorContribution(MarkerController.ID, MarkerController, 4 /* EditorContributionInstantiation.Lazy */);\r\nregisterEditorAction(NextMarkerAction);\r\nregisterEditorAction(PrevMarkerAction);\r\nregisterEditorAction(NextMarkerInFilesAction);\r\nregisterEditorAction(PrevMarkerInFilesAction);\r\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\r\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\r\nregisterEditorCommand(new MarkerCommand({\r\n    id: 'closeMarkersNavigation',\r\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\r\n    handler: x => x.close(),\r\n    kbOpts: {\r\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 50,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 9 /* KeyCode.Escape */,\r\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\r\n    }\r\n}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nimport { createCancelablePromise, disposableTimeout } from '../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { basename } from '../../../../base/common/resources.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { IMarkerDecorationsService } from '../../../common/services/markerDecorations.js';\r\nimport { getCodeActions, quickFixCommandId } from '../../codeAction/browser/codeAction.js';\r\nimport { CodeActionController } from '../../codeAction/browser/codeActionController.js';\r\nimport { CodeActionKind, CodeActionTriggerSource } from '../../codeAction/common/types.js';\r\nimport { MarkerController, NextMarkerAction } from '../../gotoError/browser/gotoError.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IMarkerData, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { Progress } from '../../../../platform/progress/common/progress.js';\r\nconst $ = dom.$;\r\nexport class MarkerHover {\r\n    constructor(owner, range, marker) {\r\n        this.owner = owner;\r\n        this.range = range;\r\n        this.marker = marker;\r\n    }\r\n    isValidForHoverAnchor(anchor) {\r\n        return (anchor.type === 1 /* HoverAnchorType.Range */\r\n            && this.range.startColumn <= anchor.range.startColumn\r\n            && this.range.endColumn >= anchor.range.endColumn);\r\n    }\r\n}\r\nconst markerCodeActionTrigger = {\r\n    type: 1 /* CodeActionTriggerType.Invoke */,\r\n    filter: { include: CodeActionKind.QuickFix },\r\n    triggerAction: CodeActionTriggerSource.QuickFixHover\r\n};\r\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\r\n    constructor(_editor, _markerDecorationsService, _openerService, _languageFeaturesService) {\r\n        this._editor = _editor;\r\n        this._markerDecorationsService = _markerDecorationsService;\r\n        this._openerService = _openerService;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this.hoverOrdinal = 1;\r\n        this.recentMarkerCodeActionsInfo = undefined;\r\n    }\r\n    computeSync(anchor, lineDecorations) {\r\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */ && !anchor.supportsMarkerHover) {\r\n            return [];\r\n        }\r\n        const model = this._editor.getModel();\r\n        const lineNumber = anchor.range.startLineNumber;\r\n        const maxColumn = model.getLineMaxColumn(lineNumber);\r\n        const result = [];\r\n        for (const d of lineDecorations) {\r\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\r\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\r\n            const marker = this._markerDecorationsService.getMarker(model.uri, d);\r\n            if (!marker) {\r\n                continue;\r\n            }\r\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\r\n            result.push(new MarkerHover(this, range, marker));\r\n        }\r\n        return result;\r\n    }\r\n    renderHoverParts(context, hoverParts) {\r\n        if (!hoverParts.length) {\r\n            return Disposable.None;\r\n        }\r\n        const disposables = new DisposableStore();\r\n        hoverParts.forEach(msg => context.fragment.appendChild(this.renderMarkerHover(msg, disposables)));\r\n        const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\r\n        this.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\r\n        return disposables;\r\n    }\r\n    renderMarkerHover(markerHover, disposables) {\r\n        const hoverElement = $('div.hover-row');\r\n        const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\r\n        const { source, message, code, relatedInformation } = markerHover.marker;\r\n        this._editor.applyFontInfo(markerElement);\r\n        const messageElement = dom.append(markerElement, $('span'));\r\n        messageElement.style.whiteSpace = 'pre-wrap';\r\n        messageElement.innerText = message;\r\n        if (source || code) {\r\n            // Code has link\r\n            if (code && typeof code !== 'string') {\r\n                const sourceAndCodeElement = $('span');\r\n                if (source) {\r\n                    const sourceElement = dom.append(sourceAndCodeElement, $('span'));\r\n                    sourceElement.innerText = source;\r\n                }\r\n                const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\r\n                codeLink.setAttribute('href', code.target.toString());\r\n                disposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\r\n                    this._openerService.open(code.target, { allowCommands: true });\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                }));\r\n                const codeElement = dom.append(codeLink, $('span'));\r\n                codeElement.innerText = code.value;\r\n                const detailsElement = dom.append(markerElement, sourceAndCodeElement);\r\n                detailsElement.style.opacity = '0.6';\r\n                detailsElement.style.paddingLeft = '6px';\r\n            }\r\n            else {\r\n                const detailsElement = dom.append(markerElement, $('span'));\r\n                detailsElement.style.opacity = '0.6';\r\n                detailsElement.style.paddingLeft = '6px';\r\n                detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\r\n            }\r\n        }\r\n        if (isNonEmptyArray(relatedInformation)) {\r\n            for (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\r\n                const relatedInfoContainer = dom.append(markerElement, $('div'));\r\n                relatedInfoContainer.style.marginTop = '8px';\r\n                const a = dom.append(relatedInfoContainer, $('a'));\r\n                a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\r\n                a.style.cursor = 'pointer';\r\n                disposables.add(dom.addDisposableListener(a, 'click', (e) => {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    if (this._openerService) {\r\n                        this._openerService.open(resource, {\r\n                            fromUserGesture: true,\r\n                            editorOptions: { selection: { startLineNumber, startColumn } }\r\n                        }).catch(onUnexpectedError);\r\n                    }\r\n                }));\r\n                const messageElement = dom.append(relatedInfoContainer, $('span'));\r\n                messageElement.innerText = message;\r\n                this._editor.applyFontInfo(messageElement);\r\n            }\r\n        }\r\n        return hoverElement;\r\n    }\r\n    renderMarkerStatusbar(context, markerHover, disposables) {\r\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\r\n            context.statusBar.addAction({\r\n                label: nls.localize('view problem', \"View Problem\"),\r\n                commandId: NextMarkerAction.ID,\r\n                run: () => {\r\n                    var _a;\r\n                    context.hide();\r\n                    (_a = MarkerController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.showAtMarker(markerHover.marker);\r\n                    this._editor.focus();\r\n                }\r\n            });\r\n        }\r\n        if (!this._editor.getOption(90 /* EditorOption.readOnly */)) {\r\n            const quickfixPlaceholderElement = context.statusBar.append($('div'));\r\n            if (this.recentMarkerCodeActionsInfo) {\r\n                if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\r\n                    if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\r\n                        quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\r\n                    }\r\n                }\r\n                else {\r\n                    this.recentMarkerCodeActionsInfo = undefined;\r\n                }\r\n            }\r\n            const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\r\n            if (!quickfixPlaceholderElement.textContent) {\r\n                // Have some content in here to avoid flickering\r\n                quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\r\n            }\r\n            const codeActionsPromise = this.getCodeActions(markerHover.marker);\r\n            disposables.add(toDisposable(() => codeActionsPromise.cancel()));\r\n            codeActionsPromise.then(actions => {\r\n                updatePlaceholderDisposable.dispose();\r\n                this.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\r\n                if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\r\n                    actions.dispose();\r\n                    quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\r\n                    return;\r\n                }\r\n                quickfixPlaceholderElement.style.display = 'none';\r\n                let showing = false;\r\n                disposables.add(toDisposable(() => {\r\n                    if (!showing) {\r\n                        actions.dispose();\r\n                    }\r\n                }));\r\n                context.statusBar.addAction({\r\n                    label: nls.localize('quick fixes', \"Quick Fix...\"),\r\n                    commandId: quickFixCommandId,\r\n                    run: (target) => {\r\n                        showing = true;\r\n                        const controller = CodeActionController.get(this._editor);\r\n                        const elementPosition = dom.getDomNodePagePosition(target);\r\n                        // Hide the hover pre-emptively, otherwise the editor can close the code actions\r\n                        // context menu as well when using keyboard navigation\r\n                        context.hide();\r\n                        controller === null || controller === void 0 ? void 0 : controller.showCodeActions(markerCodeActionTrigger, actions, {\r\n                            x: elementPosition.left,\r\n                            y: elementPosition.top,\r\n                            width: elementPosition.width,\r\n                            height: elementPosition.height\r\n                        });\r\n                    }\r\n                });\r\n            }, onUnexpectedError);\r\n        }\r\n    }\r\n    getCodeActions(marker) {\r\n        return createCancelablePromise(cancellationToken => {\r\n            return getCodeActions(this._languageFeaturesService.codeActionProvider, this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\r\n        });\r\n    }\r\n};\r\nMarkerHoverParticipant = __decorate([\r\n    __param(1, IMarkerDecorationsService),\r\n    __param(2, IOpenerService),\r\n    __param(3, ILanguageFeaturesService)\r\n], MarkerHoverParticipant);\r\nexport { MarkerHoverParticipant };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar ModesHoverController_1;\r\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { GotoDefinitionAtPositionEditorContribution } from '../../gotoSymbol/browser/link/goToDefinitionAtPosition.js';\r\nimport { ContentHoverWidget, ContentHoverController } from './contentHover.js';\r\nimport { MarginHoverWidget } from './marginHover.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { editorHoverBorder } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\r\nimport { HoverParticipantRegistry } from './hoverTypes.js';\r\nimport { MarkdownHoverParticipant } from './markdownHoverParticipant.js';\r\nimport { MarkerHoverParticipant } from './markerHoverParticipant.js';\r\nimport { InlineSuggestionHintsContentWidget } from '../../inlineCompletions/browser/inlineCompletionsHintsWidget.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport './hover.css';\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\n// sticky hover widget which doesn't disappear on focus out and such\r\nconst _sticky = false;\r\nlet ModesHoverController = ModesHoverController_1 = class ModesHoverController extends Disposable {\r\n    static get(editor) {\r\n        return editor.getContribution(ModesHoverController_1.ID);\r\n    }\r\n    constructor(_editor, _instantiationService, _openerService, _languageService, _keybindingService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._instantiationService = _instantiationService;\r\n        this._openerService = _openerService;\r\n        this._languageService = _languageService;\r\n        this._keybindingService = _keybindingService;\r\n        this._toUnhook = new DisposableStore();\r\n        this._hoverActivatedByColorDecoratorClick = false;\r\n        this._isMouseDown = false;\r\n        this._hoverClicked = false;\r\n        this._contentWidget = null;\r\n        this._glyphWidget = null;\r\n        this._reactToEditorMouseMoveRunner = this._register(new RunOnceScheduler(() => this._reactToEditorMouseMove(this._mouseMoveEvent), 0));\r\n        this._hookEvents();\r\n        this._register(this._editor.onDidChangeConfiguration((e) => {\r\n            if (e.hasChanged(60 /* EditorOption.hover */)) {\r\n                this._unhookEvents();\r\n                this._hookEvents();\r\n            }\r\n        }));\r\n    }\r\n    _hookEvents() {\r\n        const hoverOpts = this._editor.getOption(60 /* EditorOption.hover */);\r\n        this._isHoverEnabled = hoverOpts.enabled;\r\n        this._isHoverSticky = hoverOpts.sticky;\r\n        this._hidingDelay = hoverOpts.hidingDelay;\r\n        if (this._isHoverEnabled) {\r\n            this._toUnhook.add(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\r\n            this._toUnhook.add(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\r\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\r\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\r\n        }\r\n        else {\r\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\r\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\r\n        }\r\n        this._toUnhook.add(this._editor.onMouseLeave((e) => this._onEditorMouseLeave(e)));\r\n        this._toUnhook.add(this._editor.onDidChangeModel(() => {\r\n            this._cancelScheduler();\r\n            this._hideWidgets();\r\n        }));\r\n        this._toUnhook.add(this._editor.onDidChangeModelContent(() => this._cancelScheduler()));\r\n        this._toUnhook.add(this._editor.onDidScrollChange((e) => this._onEditorScrollChanged(e)));\r\n    }\r\n    _cancelScheduler() {\r\n        this._mouseMoveEvent = undefined;\r\n        this._reactToEditorMouseMoveRunner.cancel();\r\n    }\r\n    _unhookEvents() {\r\n        this._toUnhook.clear();\r\n    }\r\n    _onEditorScrollChanged(e) {\r\n        if (e.scrollTopChanged || e.scrollLeftChanged) {\r\n            this._hideWidgets();\r\n        }\r\n    }\r\n    _onEditorMouseDown(mouseEvent) {\r\n        var _a;\r\n        this._isMouseDown = true;\r\n        const target = mouseEvent.target;\r\n        if (target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\r\n            this._hoverClicked = true;\r\n            // mouse down on top of content hover widget\r\n            return;\r\n        }\r\n        if (target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\r\n            // mouse down on top of overlay hover widget\r\n            return;\r\n        }\r\n        if (target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */) {\r\n            this._hoverClicked = false;\r\n        }\r\n        if (!((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.widget.isResizing)) {\r\n            this._hideWidgets();\r\n        }\r\n    }\r\n    _onEditorMouseUp(mouseEvent) {\r\n        this._isMouseDown = false;\r\n    }\r\n    _onEditorMouseLeave(mouseEvent) {\r\n        var _a, _b;\r\n        this._cancelScheduler();\r\n        const targetEm = (mouseEvent.event.browserEvent.relatedTarget);\r\n        if (((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.widget.isResizing) || ((_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.containsNode(targetEm))) {\r\n            // When the content widget is resizing\r\n            // when the mouse is inside hover widget\r\n            return;\r\n        }\r\n        if (!_sticky) {\r\n            this._hideWidgets();\r\n        }\r\n    }\r\n    _isMouseOverWidget(mouseEvent) {\r\n        var _a, _b, _c, _d, _e;\r\n        const target = mouseEvent.target;\r\n        if (this._isHoverSticky\r\n            && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */\r\n            && target.detail === ContentHoverWidget.ID) {\r\n            // mouse moved on top of content hover widget\r\n            return true;\r\n        }\r\n        if (this._isHoverSticky\r\n            && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.containsNode((_b = mouseEvent.event.browserEvent.view) === null || _b === void 0 ? void 0 : _b.document.activeElement))\r\n            && !((_d = (_c = mouseEvent.event.browserEvent.view) === null || _c === void 0 ? void 0 : _c.getSelection()) === null || _d === void 0 ? void 0 : _d.isCollapsed)) {\r\n            // selected text within content hover widget\r\n            return true;\r\n        }\r\n        if (!this._isHoverSticky\r\n            && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */\r\n            && target.detail === ContentHoverWidget.ID\r\n            && ((_e = this._contentWidget) === null || _e === void 0 ? void 0 : _e.isColorPickerVisible)) {\r\n            // though the hover is not sticky, the color picker needs to.\r\n            return true;\r\n        }\r\n        if (this._isHoverSticky\r\n            && target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */\r\n            && target.detail === MarginHoverWidget.ID) {\r\n            // mouse moved on top of overlay hover widget\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    _onEditorMouseMove(mouseEvent) {\r\n        var _a, _b, _c, _d;\r\n        this._mouseMoveEvent = mouseEvent;\r\n        if (((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isFocused) || ((_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.isResizing)) {\r\n            return;\r\n        }\r\n        if (this._isMouseDown && this._hoverClicked) {\r\n            return;\r\n        }\r\n        if (this._isHoverSticky && ((_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.isVisibleFromKeyboard)) {\r\n            // Sticky mode is on and the hover has been shown via keyboard\r\n            // so moving the mouse has no effect\r\n            return;\r\n        }\r\n        const mouseIsOverWidget = this._isMouseOverWidget(mouseEvent);\r\n        // If the mouse is over the widget and the hiding timeout is defined, then cancel it\r\n        if (mouseIsOverWidget) {\r\n            this._reactToEditorMouseMoveRunner.cancel();\r\n            return;\r\n        }\r\n        // If the mouse is not over the widget, and if sticky is on,\r\n        // then give it a grace period before reacting to the mouse event\r\n        if (((_d = this._contentWidget) === null || _d === void 0 ? void 0 : _d.isVisible) && this._isHoverSticky && this._hidingDelay > 0) {\r\n            if (!this._reactToEditorMouseMoveRunner.isScheduled()) {\r\n                this._reactToEditorMouseMoveRunner.schedule(this._hidingDelay);\r\n            }\r\n            return;\r\n        }\r\n        this._reactToEditorMouseMove(mouseEvent);\r\n    }\r\n    _reactToEditorMouseMove(mouseEvent) {\r\n        var _a, _b, _c;\r\n        if (!mouseEvent) {\r\n            return;\r\n        }\r\n        const target = mouseEvent.target;\r\n        const mouseOnDecorator = (_a = target.element) === null || _a === void 0 ? void 0 : _a.classList.contains('colorpicker-color-decoration');\r\n        const decoratorActivatedOn = this._editor.getOption(146 /* EditorOption.colorDecoratorsActivatedOn */);\r\n        if ((mouseOnDecorator && ((decoratorActivatedOn === 'click' && !this._hoverActivatedByColorDecoratorClick) ||\r\n            (decoratorActivatedOn === 'hover' && !this._isHoverEnabled && !_sticky) ||\r\n            (decoratorActivatedOn === 'clickAndHover' && !this._isHoverEnabled && !this._hoverActivatedByColorDecoratorClick)))\r\n            || !mouseOnDecorator && !this._isHoverEnabled && !this._hoverActivatedByColorDecoratorClick) {\r\n            this._hideWidgets();\r\n            return;\r\n        }\r\n        const contentWidget = this._getOrCreateContentWidget();\r\n        if (contentWidget.maybeShowAt(mouseEvent)) {\r\n            (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\r\n            return;\r\n        }\r\n        if (target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ && target.position) {\r\n            (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\r\n            if (!this._glyphWidget) {\r\n                this._glyphWidget = new MarginHoverWidget(this._editor, this._languageService, this._openerService);\r\n            }\r\n            this._glyphWidget.startShowingAt(target.position.lineNumber);\r\n            return;\r\n        }\r\n        if (_sticky) {\r\n            return;\r\n        }\r\n        this._hideWidgets();\r\n    }\r\n    _onKeyDown(e) {\r\n        var _a;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        const resolvedKeyboardEvent = this._keybindingService.softDispatch(e, this._editor.getDomNode());\r\n        // If the beginning of a multi-chord keybinding is pressed, or the command aims to focus the hover, set the variable to true, otherwise false\r\n        const mightTriggerFocus = (resolvedKeyboardEvent.kind === 1 /* ResultKind.MoreChordsNeeded */ || (resolvedKeyboardEvent.kind === 2 /* ResultKind.KbFound */ && resolvedKeyboardEvent.commandId === 'editor.action.showHover' && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isVisible)));\r\n        if (e.keyCode !== 5 /* KeyCode.Ctrl */ && e.keyCode !== 6 /* KeyCode.Alt */ && e.keyCode !== 57 /* KeyCode.Meta */ && e.keyCode !== 4 /* KeyCode.Shift */\r\n            && !mightTriggerFocus) {\r\n            // Do not hide hover when a modifier key is pressed\r\n            this._hideWidgets();\r\n        }\r\n    }\r\n    _hideWidgets() {\r\n        var _a, _b, _c;\r\n        if (_sticky) {\r\n            return;\r\n        }\r\n        if ((this._isMouseDown && this._hoverClicked && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible)) || InlineSuggestionHintsContentWidget.dropDownVisible) {\r\n            return;\r\n        }\r\n        this._hoverActivatedByColorDecoratorClick = false;\r\n        this._hoverClicked = false;\r\n        (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\r\n        (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\r\n    }\r\n    _getOrCreateContentWidget() {\r\n        if (!this._contentWidget) {\r\n            this._contentWidget = this._instantiationService.createInstance(ContentHoverController, this._editor);\r\n        }\r\n        return this._contentWidget;\r\n    }\r\n    showContentHover(range, mode, source, focus, activatedByColorDecoratorClick = false) {\r\n        this._hoverActivatedByColorDecoratorClick = activatedByColorDecoratorClick;\r\n        this._getOrCreateContentWidget().startShowingAtRange(range, mode, source, focus);\r\n    }\r\n    focus() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.focus();\r\n    }\r\n    scrollUp() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollUp();\r\n    }\r\n    scrollDown() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollDown();\r\n    }\r\n    scrollLeft() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollLeft();\r\n    }\r\n    scrollRight() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollRight();\r\n    }\r\n    pageUp() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.pageUp();\r\n    }\r\n    pageDown() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.pageDown();\r\n    }\r\n    goToTop() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.goToTop();\r\n    }\r\n    goToBottom() {\r\n        var _a;\r\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.goToBottom();\r\n    }\r\n    get isColorPickerVisible() {\r\n        var _a;\r\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible;\r\n    }\r\n    get isHoverVisible() {\r\n        var _a;\r\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isVisible;\r\n    }\r\n    dispose() {\r\n        var _a, _b;\r\n        super.dispose();\r\n        this._unhookEvents();\r\n        this._toUnhook.dispose();\r\n        (_a = this._glyphWidget) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        (_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.dispose();\r\n    }\r\n};\r\nModesHoverController.ID = 'editor.contrib.hover';\r\nModesHoverController = ModesHoverController_1 = __decorate([\r\n    __param(1, IInstantiationService),\r\n    __param(2, IOpenerService),\r\n    __param(3, ILanguageService),\r\n    __param(4, IKeybindingService)\r\n], ModesHoverController);\r\nexport { ModesHoverController };\r\nvar HoverFocusBehavior;\r\n(function (HoverFocusBehavior) {\r\n    HoverFocusBehavior[\"NoAutoFocus\"] = \"noAutoFocus\";\r\n    HoverFocusBehavior[\"FocusIfVisible\"] = \"focusIfVisible\";\r\n    HoverFocusBehavior[\"AutoFocusImmediately\"] = \"autoFocusImmediately\";\r\n})(HoverFocusBehavior || (HoverFocusBehavior = {}));\r\nclass ShowOrFocusHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.showHover',\r\n            label: nls.localize({\r\n                key: 'showOrFocusHover',\r\n                comment: [\r\n                    'Label for action that will trigger the showing/focusing of a hover in the editor.',\r\n                    'If the hover is not visible, it will show the hover.',\r\n                    'This allows for users to show the hover without using the mouse.'\r\n                ]\r\n            }, \"Show or Focus Hover\"),\r\n            metadata: {\r\n                description: `Show or Focus Hover`,\r\n                args: [{\r\n                        name: 'args',\r\n                        schema: {\r\n                            type: 'object',\r\n                            properties: {\r\n                                'focus': {\r\n                                    description: 'Controls if and when the hover should take focus upon being triggered by this action.',\r\n                                    enum: [HoverFocusBehavior.NoAutoFocus, HoverFocusBehavior.FocusIfVisible, HoverFocusBehavior.AutoFocusImmediately],\r\n                                    enumDescriptions: [\r\n                                        nls.localize('showOrFocusHover.focus.noAutoFocus', 'The hover will not automatically take focus.'),\r\n                                        nls.localize('showOrFocusHover.focus.focusIfVisible', 'The hover will take focus only if it is already visible.'),\r\n                                        nls.localize('showOrFocusHover.focus.autoFocusImmediately', 'The hover will automatically take focus when it appears.'),\r\n                                    ],\r\n                                    default: HoverFocusBehavior.FocusIfVisible,\r\n                                }\r\n                            },\r\n                        }\r\n                    }]\r\n            },\r\n            alias: 'Show or Focus Hover',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */),\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor, args) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        const focusArgument = args === null || args === void 0 ? void 0 : args.focus;\r\n        let focusOption = HoverFocusBehavior.FocusIfVisible;\r\n        if (focusArgument in HoverFocusBehavior) {\r\n            focusOption = focusArgument;\r\n        }\r\n        else if (typeof focusArgument === 'boolean' && focusArgument) {\r\n            focusOption = HoverFocusBehavior.AutoFocusImmediately;\r\n        }\r\n        const showContentHover = (focus) => {\r\n            const position = editor.getPosition();\r\n            const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n            controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, 1 /* HoverStartSource.Keyboard */, focus);\r\n        };\r\n        const accessibilitySupportEnabled = editor.getOption(2 /* EditorOption.accessibilitySupport */) === 2 /* AccessibilitySupport.Enabled */;\r\n        if (controller.isHoverVisible) {\r\n            if (focusOption !== HoverFocusBehavior.NoAutoFocus) {\r\n                controller.focus();\r\n            }\r\n            else {\r\n                showContentHover(accessibilitySupportEnabled);\r\n            }\r\n        }\r\n        else {\r\n            showContentHover(accessibilitySupportEnabled || focusOption === HoverFocusBehavior.AutoFocusImmediately);\r\n        }\r\n    }\r\n}\r\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.showDefinitionPreviewHover',\r\n            label: nls.localize({\r\n                key: 'showDefinitionPreviewHover',\r\n                comment: [\r\n                    'Label for action that will trigger the showing of definition preview hover in the editor.',\r\n                    'This allows for users to show the definition preview hover without using the mouse.'\r\n                ]\r\n            }, \"Show Definition Preview Hover\"),\r\n            alias: 'Show Definition Preview Hover',\r\n            precondition: undefined\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        const position = editor.getPosition();\r\n        if (!position) {\r\n            return;\r\n        }\r\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n        const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\r\n        if (!goto) {\r\n            return;\r\n        }\r\n        const promise = goto.startFindDefinitionFromCursor(position);\r\n        promise.then(() => {\r\n            controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, 1 /* HoverStartSource.Keyboard */, true);\r\n        });\r\n    }\r\n}\r\nclass ScrollUpHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.scrollUpHover',\r\n            label: nls.localize({\r\n                key: 'scrollUpHover',\r\n                comment: [\r\n                    'Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused.'\r\n                ]\r\n            }, \"Scroll Up Hover\"),\r\n            alias: 'Scroll Up Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 16 /* KeyCode.UpArrow */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.scrollUp();\r\n    }\r\n}\r\nclass ScrollDownHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.scrollDownHover',\r\n            label: nls.localize({\r\n                key: 'scrollDownHover',\r\n                comment: [\r\n                    'Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused.'\r\n                ]\r\n            }, \"Scroll Down Hover\"),\r\n            alias: 'Scroll Down Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 18 /* KeyCode.DownArrow */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.scrollDown();\r\n    }\r\n}\r\nclass ScrollLeftHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.scrollLeftHover',\r\n            label: nls.localize({\r\n                key: 'scrollLeftHover',\r\n                comment: [\r\n                    'Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused.'\r\n                ]\r\n            }, \"Scroll Left Hover\"),\r\n            alias: 'Scroll Left Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 15 /* KeyCode.LeftArrow */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.scrollLeft();\r\n    }\r\n}\r\nclass ScrollRightHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.scrollRightHover',\r\n            label: nls.localize({\r\n                key: 'scrollRightHover',\r\n                comment: [\r\n                    'Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused.'\r\n                ]\r\n            }, \"Scroll Right Hover\"),\r\n            alias: 'Scroll Right Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 17 /* KeyCode.RightArrow */,\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.scrollRight();\r\n    }\r\n}\r\nclass PageUpHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.pageUpHover',\r\n            label: nls.localize({\r\n                key: 'pageUpHover',\r\n                comment: [\r\n                    'Action that allows to page up in the hover widget with the page up command when the hover widget is focused.'\r\n                ]\r\n            }, \"Page Up Hover\"),\r\n            alias: 'Page Up Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 11 /* KeyCode.PageUp */,\r\n                secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.pageUp();\r\n    }\r\n}\r\nclass PageDownHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.pageDownHover',\r\n            label: nls.localize({\r\n                key: 'pageDownHover',\r\n                comment: [\r\n                    'Action that allows to page down in the hover widget with the page down command when the hover widget is focused.'\r\n                ]\r\n            }, \"Page Down Hover\"),\r\n            alias: 'Page Down Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 12 /* KeyCode.PageDown */,\r\n                secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.pageDown();\r\n    }\r\n}\r\nclass GoToTopHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.goToTopHover',\r\n            label: nls.localize({\r\n                key: 'goToTopHover',\r\n                comment: [\r\n                    'Action that allows to go to the top of the hover widget with the home command when the hover widget is focused.'\r\n                ]\r\n            }, \"Go To Top Hover\"),\r\n            alias: 'Go To Bottom Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 14 /* KeyCode.Home */,\r\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.goToTop();\r\n    }\r\n}\r\nclass GoToBottomHoverAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.goToBottomHover',\r\n            label: nls.localize({\r\n                key: 'goToBottomHover',\r\n                comment: [\r\n                    'Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused.'\r\n                ]\r\n            }, \"Go To Bottom Hover\"),\r\n            alias: 'Go To Bottom Hover',\r\n            precondition: EditorContextKeys.hoverFocused,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.hoverFocused,\r\n                primary: 13 /* KeyCode.End */,\r\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\r\n                weight: 100 /* KeybindingWeight.EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    run(accessor, editor) {\r\n        const controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.goToBottom();\r\n    }\r\n}\r\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\r\nregisterEditorAction(ShowOrFocusHoverAction);\r\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\r\nregisterEditorAction(ScrollUpHoverAction);\r\nregisterEditorAction(ScrollDownHoverAction);\r\nregisterEditorAction(ScrollLeftHoverAction);\r\nregisterEditorAction(ScrollRightHoverAction);\r\nregisterEditorAction(PageUpHoverAction);\r\nregisterEditorAction(PageDownHoverAction);\r\nregisterEditorAction(GoToTopHoverAction);\r\nregisterEditorAction(GoToBottomHoverAction);\r\nHoverParticipantRegistry.register(MarkdownHoverParticipant);\r\nHoverParticipantRegistry.register(MarkerHoverParticipant);\r\n// theming\r\nregisterThemingParticipant((theme, collector) => {\r\n    const hoverBorder = theme.getColor(editorHoverBorder);\r\n    if (hoverBorder) {\r\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\r\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\r\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\r\n    }\r\n});\r\n"],
  "mappings": "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",
  "names": ["_a", "_a", "width", "PeekContext", "PeekContextController", "defaultOptions", "PeekViewWidget", "_a", "_b", "__decorate", "__param", "DataSource", "StringRepresentationProvider", "_a", "__decorate", "__param", "FileReferencesTemplate", "__decorate", "__param", "FileReferencesRenderer", "_a", "__decorate", "__param", "_a", "ReferenceWidget", "__decorate", "__param", "ReferencesController", "_a", "_b", "_a", "__decorate", "__param", "SymbolNavigationService", "_a", "_b", "EditorState", "__decorate", "__param", "MessageController", "_a", "dispose", "provider", "model", "position", "accessor", "references", "__decorate", "__param", "GotoDefinitionAtPositionEditorContribution", "_a", "$", "_a", "_b", "__decorate", "__param", "$", "ContentHoverController", "HoverResult", "HoverResult", "ContentHoverWidget", "_a", "_b", "_c", "_d", "__decorate", "__param", "EditorHoverStatusBar", "$", "__decorate", "__param", "$", "__decorate", "__param", "$", "MarkdownHoverParticipant", "$", "CodeActionTriggerSource", "_a", "_a", "_b", "_c", "ApplyCodeActionReason", "__decorate", "__param", "CodeActionKeybindingResolver", "_a", "__decorate", "__param", "LightBulbState", "LightBulbWidget", "_a", "_b", "_c", "_d", "lineNumber", "__decorate", "__param", "_a", "_b", "ActionItemRenderer", "_c", "ActionList", "__decorate", "__param", "ActionWidgetService", "container", "_a", "_b", "_a", "CodeActionsState", "_b", "_c", "_d", "_e", "_f", "__decorate", "__param", "CodeActionController", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "__decorate", "__param", "MarkerList", "MarkerNavigationService", "__decorate", "__param", "SeverityIcon", "__decorate", "__param", "MessageWidget", "MarkerNavigationWidget", "__decorate", "__param", "MarkerController", "_a", "_b", "_c", "_a", "__decorate", "__param", "$", "MarkerHoverParticipant", "message", "messageElement", "_a", "__decorate", "__param", "ModesHoverController", "_a", "_b", "_c", "_d", "_e", "HoverFocusBehavior"]
}
