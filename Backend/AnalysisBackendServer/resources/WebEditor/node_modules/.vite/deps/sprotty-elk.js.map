{
  "version": 3,
  "sources": ["../../sprotty-elk/src/elk-layout.ts", "../../sprotty-elk/src/inversify.ts", "../../sprotty-elk/src/index.ts"],
  "sourcesContent": ["/********************************************************************************\r\n * Copyright (c) 2018-2022 TypeFox and others.\r\n *\r\n * This program and the accompanying materials are made available under the\r\n * terms of the Eclipse Public License v. 2.0 which is available at\r\n * http://www.eclipse.org/legal/epl-2.0.\r\n *\r\n * This Source Code may also be made available under the following Secondary\r\n * Licenses when the conditions for such availability set forth in the Eclipse\r\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\r\n * with the GNU Classpath Exception which is available at\r\n * https://www.gnu.org/software/classpath/license.html.\r\n *\r\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\r\n ********************************************************************************/\r\n\r\nimport {\r\n    ELK, ElkNode, ElkLabel, ElkPort, ElkShape, ElkExtendedEdge, LayoutOptions, ElkPrimitiveEdge\r\n} from 'elkjs/lib/elk-api';\r\nimport { IModelLayoutEngine } from 'sprotty-protocol/lib/diagram-services';\r\nimport { SCompartment, SEdge, SGraph, SLabel, SModelElement, SNode, SPort, SShapeElement } from 'sprotty-protocol/lib/model';\r\nimport { Point } from 'sprotty-protocol/lib/utils/geometry';\r\nimport { getBasicType, SModelIndex } from 'sprotty-protocol/lib/utils/model-utils';\r\n\r\n/**\r\n * Layout engine that delegates to ELK by transforming the Sprotty graph into an ELK graph.\r\n *\r\n * This layout engine requires that the _basic type_ of every model element conforms to the\r\n * convention: `graph` for the top-level element, `node` for nodes, `edge` for edges, `label`\r\n * for labels, and `port` for ports. The basic type is either the value of the `type` property\r\n * or the substring preceding the separator `:` if present. Example: `'node:state'` is\r\n * interpreted as a node, while `'edge:transition'` is interpreted as an edge.\r\n */\r\nexport class ElkLayoutEngine implements IModelLayoutEngine {\r\n\r\n    protected readonly elk: ELK;\r\n\r\n    constructor(elkFactory: ElkFactory,\r\n                protected readonly filter: IElementFilter = new DefaultElementFilter(),\r\n                protected readonly configurator: ILayoutConfigurator = new DefaultLayoutConfigurator(),\r\n                protected readonly preprocessor?: ILayoutPreprocessor,\r\n                protected readonly postprocessor?: ILayoutPostprocessor) {\r\n        this.elk = elkFactory();\r\n    }\r\n\r\n    /**\r\n     * Transform the Sprotty graph into an ELK graph, invoke the ELK layout engine,\r\n     * apply the results to the original graph, and return it.\r\n     *\r\n     * _Note:_ The basic type of the root element must be `graph`.\r\n     */\r\n    layout(sgraph: SGraph, index?: SModelIndex): SGraph | Promise<SGraph> {\r\n        if (this.getBasicType(sgraph) !== 'graph') {\r\n            return sgraph;\r\n        }\r\n        if (!index) {\r\n            index = new SModelIndex();\r\n            index.add(sgraph);\r\n        }\r\n\r\n        // STEP 1: Transform the Sprotty graph into an ELK graph with optional pre-processing\r\n        const elkGraph = this.transformGraph(sgraph, index);\r\n        if (this.preprocessor) {\r\n            this.preprocessor.preprocess(elkGraph, sgraph, index);\r\n        }\r\n\r\n        // STEP 2: Invoke the ELK layout engine\r\n        return this.elk.layout(elkGraph).then(result => {\r\n\r\n            // STEP 3: Apply the results with optional post-processing to the original graph\r\n            if (this.postprocessor) {\r\n                this.postprocessor.postprocess(result, sgraph, index!);\r\n            }\r\n            this.applyLayout(result, index!);\r\n            return sgraph;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Determine the _basic type_ of the given model element. The layout engine supports\r\n     * the following values: `graph`, `node`, `edge`, `label`, `port` and `compartment`\r\n     */\r\n    protected getBasicType(smodel: SModelElement): string {\r\n        return getBasicType(smodel);\r\n    }\r\n\r\n    /**\r\n     * Transform a Sprotty graph element to an ELK graph element.\r\n     */\r\n    protected transformGraph(sgraph: SGraph, index: SModelIndex): ElkNode {\r\n        const elkGraph: ElkNode = {\r\n            id: sgraph.id,\r\n            layoutOptions: this.configurator.apply(sgraph, index)\r\n        };\r\n        if (sgraph.children) {\r\n            elkGraph.children = sgraph.children\r\n                .filter(c => this.getBasicType(c) === 'node' && this.filter.apply(c, index))\r\n                .map(c => this.transformNode(c as SNode, index));\r\n            elkGraph.edges = sgraph.children\r\n                .filter(c => this.getBasicType(c) === 'edge' && this.filter.apply(c, index))\r\n                .map(c => this.transformEdge(c as SEdge, index));\r\n        }\r\n        return elkGraph;\r\n    }\r\n\r\n    /**\r\n     * Transform a Sprotty node element to an ELK node element.\r\n     */\r\n    protected transformNode(snode: SNode, index: SModelIndex): ElkNode {\r\n        const elkNode: ElkNode = {\r\n            id: snode.id,\r\n            layoutOptions: this.configurator.apply(snode, index)\r\n        };\r\n        if (snode.children) {\r\n            const padding: LayoutPadding = { top: 0, right: 0, bottom: 0, left: 0 };\r\n            elkNode.children = this.transformCompartment(snode, index, padding);\r\n            if (padding.top !== 0 || padding.right !== 0 || padding.bottom !== 0 || padding.left !== 0) {\r\n                elkNode.layoutOptions ??= {};\r\n                elkNode.layoutOptions['org.eclipse.elk.padding'] ??= `[top=${padding.top},left=${padding.left},bottom=${padding.bottom},right=${padding.right}]`;\r\n            }\r\n            elkNode.edges = snode.children\r\n                .filter(c => this.getBasicType(c) === 'edge' && this.filter.apply(c, index))\r\n                .map(c => this.transformEdge(c as SEdge, index));\r\n            elkNode.labels = snode.children\r\n                .filter(c => this.getBasicType(c) === 'label' && this.filter.apply(c, index))\r\n                .map(c => this.transformLabel(c as SLabel, index));\r\n            elkNode.ports = snode.children\r\n                .filter(c => this.getBasicType(c) === 'port' && this.filter.apply(c, index))\r\n                .map(c => this.transformPort(c as SPort, index));\r\n        }\r\n        this.transformShape(elkNode, snode);\r\n        return elkNode;\r\n    }\r\n\r\n    protected transformCompartment(scomp: SNode | SCompartment, index: SModelIndex, padding: LayoutPadding): ElkNode[] | undefined {\r\n        if (!scomp.children) {\r\n            return undefined;\r\n        }\r\n        const nodes = scomp.children.filter(c => this.getBasicType(c) === 'node' && this.filter.apply(c, index));\r\n        if (nodes.length > 0) {\r\n            return nodes.map(c => this.transformNode(c as SNode, index));\r\n        }\r\n        for (const c of scomp.children) {\r\n            if (this.getBasicType(c) === 'compartment' && this.filter.apply(c, index)) {\r\n                const ccomp = c as SCompartment;\r\n                if (scomp.layout) {\r\n                    if (ccomp.position) {\r\n                        padding.left += ccomp.position.x;\r\n                        padding.top += ccomp.position.y;\r\n                    }\r\n                    if (ccomp.size && scomp.size) {\r\n                        padding.right += scomp.size.width - ccomp.size.width - (ccomp.position ? ccomp.position.x : 0);\r\n                        padding.bottom += scomp.size.height - ccomp.size.height - (ccomp.position ? ccomp.position.y : 0);\r\n                    }\r\n                }\r\n                const childNodes = this.transformCompartment(ccomp, index, padding);\r\n                if (childNodes) {\r\n                    return childNodes;\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    /**\r\n     * Transform a Sprotty edge element to an ELK edge element.\r\n     */\r\n    protected transformEdge(sedge: SEdge, index: SModelIndex): ElkExtendedEdge {\r\n        const elkEdge: ElkExtendedEdge = {\r\n            id: sedge.id,\r\n            sources: [sedge.sourceId],\r\n            targets: [sedge.targetId],\r\n            layoutOptions: this.configurator.apply(sedge, index)\r\n        };\r\n        if (sedge.children) {\r\n            elkEdge.labels = sedge.children\r\n                .filter(c => this.getBasicType(c) === 'label' && this.filter.apply(c, index))\r\n                .map(c => this.transformLabel(c as SLabel, index));\r\n        }\r\n        const points = sedge.routingPoints;\r\n        if (points && points.length >= 2) {\r\n            elkEdge.sections = [{\r\n                id: sedge.id + ':section',\r\n                startPoint: points[0],\r\n                bendPoints: points.slice(1, points.length - 1),\r\n                endPoint: points[points.length - 1]\r\n            }];\r\n        }\r\n        return elkEdge;\r\n    }\r\n\r\n    /**\r\n     * Transform a Sprotty label element to an ELK label element.\r\n     */\r\n    protected transformLabel(slabel: SLabel, index: SModelIndex): ElkLabel {\r\n        const elkLabel: ElkLabel = {\r\n            id: slabel.id,\r\n            text: slabel.text,\r\n            layoutOptions: this.configurator.apply(slabel, index)\r\n        };\r\n        this.transformShape(elkLabel, slabel);\r\n        return elkLabel;\r\n    }\r\n\r\n    /**\r\n     * Transform a Sprotty port element to an ELK port element.\r\n     */\r\n    protected transformPort(sport: SPort, index: SModelIndex): ElkPort {\r\n        const elkPort: ElkPort = {\r\n            id: sport.id,\r\n            layoutOptions: this.configurator.apply(sport, index)\r\n        };\r\n        if (sport.children) {\r\n            elkPort.labels = sport.children\r\n                .filter(c => this.getBasicType(c) === 'label' && this.filter.apply(c, index))\r\n                .map(c => this.transformLabel(c as SLabel, index));\r\n        }\r\n        this.transformShape(elkPort, sport);\r\n        return elkPort;\r\n    }\r\n\r\n    /**\r\n     * Copy the position and size of a Sprotty shape to an ELK shape.\r\n     */\r\n    protected transformShape(elkShape: ElkShape, sshape: SShapeElement): void {\r\n        if (sshape.position) {\r\n            elkShape.x = sshape.position.x;\r\n            elkShape.y = sshape.position.y;\r\n        }\r\n        if (sshape.size) {\r\n            elkShape.width = sshape.size.width;\r\n            elkShape.height = sshape.size.height;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Apply the results of the ELK layout engine to the original Sprotty model.\r\n     */\r\n    protected applyLayout(elkNode: ElkNode, index: SModelIndex): void {\r\n        const snode = index.getById(elkNode.id);\r\n        if (snode && this.getBasicType(snode) === 'node') {\r\n            this.applyShape(snode as SNode, elkNode, index);\r\n        }\r\n        if (elkNode.children) {\r\n            for (const child of elkNode.children) {\r\n                this.applyLayout(child, index);\r\n            }\r\n        }\r\n        if (elkNode.edges) {\r\n            for (const elkEdge of elkNode.edges) {\r\n                const sedge = index.getById(elkEdge.id);\r\n                if (sedge && this.getBasicType(sedge) === 'edge') {\r\n                    this.applyEdge(sedge as SEdge, elkEdge, index);\r\n                }\r\n            }\r\n        }\r\n        if (elkNode.ports) {\r\n            for (const elkPort of elkNode.ports) {\r\n                const sport = index.getById(elkPort.id);\r\n                if (sport && this.getBasicType(sport) === 'port') {\r\n                    this.applyShape(sport as SPort, elkPort, index);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Apply shape layout results, i.e. position and size.\r\n     */\r\n    protected applyShape(sshape: SShapeElement, elkShape: ElkShape, index: SModelIndex): void {\r\n        if (elkShape.x !== undefined && elkShape.y !== undefined) {\r\n            sshape.position = { x: elkShape.x, y: elkShape.y };\r\n        }\r\n        if (elkShape.width !== undefined && elkShape.height !== undefined) {\r\n            sshape.size = { width: elkShape.width, height: elkShape.height };\r\n        }\r\n\r\n        if (elkShape.labels) {\r\n            for (const elkLabel of elkShape.labels) {\r\n                const slabel = elkLabel.id && index.getById(elkLabel.id);\r\n                if (slabel) {\r\n                    this.applyShape(slabel as SLabel, elkLabel, index);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Apply edge layout results, i.e. start point, end point and bend points.\r\n     */\r\n    protected applyEdge(sedge: SEdge, elkEdge: ElkExtendedEdge, index: SModelIndex): void {\r\n        const points: Point[] = [];\r\n        if (elkEdge.sections && elkEdge.sections.length > 0) {\r\n            const section = elkEdge.sections[0];\r\n            if (section.startPoint) {\r\n                points.push(section.startPoint);\r\n            }\r\n            if (section.bendPoints) {\r\n                points.push(...section.bendPoints);\r\n            }\r\n            if (section.endPoint) {\r\n                points.push(section.endPoint);\r\n            }\r\n        } else if (isPrimitiveEdge(elkEdge)) {\r\n            if (elkEdge.sourcePoint) {\r\n                points.push(elkEdge.sourcePoint);\r\n            }\r\n            if (elkEdge.bendPoints) {\r\n                points.push(...elkEdge.bendPoints);\r\n            }\r\n            if (elkEdge.targetPoint) {\r\n                points.push(elkEdge.targetPoint);\r\n            }\r\n        }\r\n        sedge.routingPoints = points;\r\n\r\n        if (elkEdge.labels) {\r\n            elkEdge.labels.forEach((elkLabel) => {\r\n                const sLabel = elkLabel.id && index.getById(elkLabel.id);\r\n                if (sLabel) {\r\n                    this.applyShape(sLabel, elkLabel, index);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction isPrimitiveEdge(edge: unknown): edge is ElkPrimitiveEdge {\r\n    return typeof (edge as ElkPrimitiveEdge).source === 'string'\r\n        && typeof (edge as ElkPrimitiveEdge).target === 'string';\r\n}\r\n\r\n/**\r\n * Factory for ELK instances. Follow the elkjs package documentation on how to configure ELK\r\n * instances. For example, the bundled version can be used by importing the ELK constructor\r\n * from `\"elkjs/lib/elk.bundled\"`. For the webworker version, import the constructor from\r\n * `\"elkjs/lib/elk-api\"` and add the option `workerUrl: \"elk/elk-worker.min.js\"`.\r\n */\r\nexport type ElkFactory = () => ELK;\r\n\r\n/**\r\n * Filter used to determine which model elements should be included in the automatic layout.\r\n */\r\nexport interface IElementFilter {\r\n    apply(element: SModelElement, index: SModelIndex): boolean\r\n}\r\n\r\nexport class DefaultElementFilter implements IElementFilter {\r\n\r\n    apply(element: SModelElement, index: SModelIndex): boolean {\r\n        switch (this.getBasicType(element)) {\r\n            case 'node':\r\n                return this.filterNode(element as SNode, index);\r\n            case 'edge':\r\n                return this.filterEdge(element as SEdge, index);\r\n            case 'label':\r\n                return this.filterLabel(element as SLabel, index);\r\n            case 'port':\r\n                return this.filterPort(element as SPort, index);\r\n            case 'compartment':\r\n                return this.filterCompartment(element as SCompartment, index);\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n\r\n    protected getBasicType(smodel: SModelElement): string{\r\n        return getBasicType(smodel);\r\n    }\r\n\r\n    protected filterNode(node: SNode, index: SModelIndex): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected filterEdge(edge: SEdge, index: SModelIndex): boolean {\r\n        const source = index.getById(edge.sourceId);\r\n        if (!source)\r\n            return false;\r\n        const sourceType = this.getBasicType(source);\r\n        if (sourceType === 'node' && !this.filterNode(source, index)\r\n            || sourceType === 'port' && !this.filterPort(source, index))\r\n            return false;\r\n        const target = index.getById(edge.targetId);\r\n        if (!target)\r\n            return false;\r\n        const targetType = this.getBasicType(target);\r\n        if (targetType === 'node' && !this.filterNode(target, index)\r\n            || targetType === 'port' && !this.filterPort(target, index))\r\n            return false;\r\n        return true;\r\n    }\r\n\r\n    protected filterLabel(label: SLabel, index: SModelIndex): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected filterPort(port: SPort, index: SModelIndex): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected filterCompartment(compartment: SCompartment, index: SModelIndex): boolean {\r\n        return true;\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Configurator of layout algorithms; provides mappings of layout options for each model element.\r\n */\r\nexport interface ILayoutConfigurator {\r\n    apply(element: SModelElement, index: SModelIndex): LayoutOptions | undefined\r\n}\r\n\r\nexport class DefaultLayoutConfigurator implements ILayoutConfigurator {\r\n\r\n    apply(element: SModelElement, index: SModelIndex): LayoutOptions | undefined {\r\n        switch (this.getBasicType(element)) {\r\n            case 'graph':\r\n                return this.graphOptions(element as SGraph, index);\r\n            case 'node':\r\n                return this.nodeOptions(element as SNode, index);\r\n            case 'edge':\r\n                return this.edgeOptions(element as SEdge, index);\r\n            case 'label':\r\n                return this.labelOptions(element as SLabel, index);\r\n            case 'port':\r\n                return this.portOptions(element as SPort, index);\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n\r\n    protected getBasicType(smodel: SModelElement): string{\r\n        return getBasicType(smodel);\r\n    }\r\n\r\n    protected graphOptions(sgraph: SGraph, index: SModelIndex): LayoutOptions | undefined {\r\n        return undefined;\r\n    }\r\n\r\n    protected nodeOptions(snode: SNode, index: SModelIndex): LayoutOptions | undefined {\r\n        return undefined;\r\n    }\r\n\r\n    protected edgeOptions(sedge: SEdge, index: SModelIndex): LayoutOptions | undefined {\r\n        return undefined;\r\n    }\r\n\r\n    protected labelOptions(slabel: SLabel, index: SModelIndex): LayoutOptions | undefined {\r\n        return undefined;\r\n    }\r\n\r\n    protected portOptions(sport: SPort, index: SModelIndex): LayoutOptions | undefined {\r\n        return undefined;\r\n    }\r\n\r\n}\r\n\r\nexport interface ILayoutPreprocessor {\r\n    preprocess(elkGraph: ElkNode, sgraph: SGraph, index: SModelIndex): void\r\n}\r\n\r\nexport interface ILayoutPostprocessor {\r\n    postprocess(elkGraph: ElkNode, sgraph: SGraph, index: SModelIndex): void\r\n}\r\n\r\nexport type LayoutPadding = {\r\n    top: number,\r\n    right: number,\r\n    bottom: number,\r\n    left: number\r\n};\r\n", "/********************************************************************************\r\n * Copyright (c) 2018-2021 TypeFox and others.\r\n *\r\n * This program and the accompanying materials are made available under the\r\n * terms of the Eclipse Public License v. 2.0 which is available at\r\n * http://www.eclipse.org/legal/epl-2.0.\r\n *\r\n * This Source Code may also be made available under the following Secondary\r\n * Licenses when the conditions for such availability set forth in the Eclipse\r\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\r\n * with the GNU Classpath Exception which is available at\r\n * https://www.gnu.org/software/classpath/license.html.\r\n *\r\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\r\n ********************************************************************************/\r\n\r\nimport { ContainerModule, injectable } from 'inversify';\r\nimport {\r\n    ElkLayoutEngine as ElkLayoutEnginePlain, DefaultElementFilter as DefaultElementFilterPlain,\r\n    DefaultLayoutConfigurator as DefaultLayoutConfiguratorPlain, ElkFactory as ElkFactoryPlain,\r\n    IElementFilter as IElementFilterPlain, ILayoutConfigurator as ILayoutConfiguratorPlain,\r\n    ILayoutPreprocessor as ILayoutPreprocessorPlain, ILayoutPostprocessor as ILayoutPostprocessorPlain\r\n} from './elk-layout';\r\n\r\nexport const ElkLayoutEngine: typeof ElkLayoutEnginePlain = injectable()(ElkLayoutEnginePlain);\r\n\r\nexport type ElkFactory = ElkFactoryPlain;\r\nexport const ElkFactory = Symbol('ElkFactory');\r\n\r\nexport type IElementFilter = IElementFilterPlain;\r\nexport const IElementFilter = Symbol('IElementFilter');\r\nexport const DefaultElementFilter: typeof DefaultElementFilterPlain = injectable()(DefaultElementFilterPlain);\r\n\r\nexport type ILayoutConfigurator = ILayoutConfiguratorPlain;\r\nexport const ILayoutConfigurator = Symbol('ILayoutConfigurator');\r\nexport const DefaultLayoutConfigurator: typeof DefaultLayoutConfiguratorPlain = injectable()(DefaultLayoutConfiguratorPlain);\r\n\r\nexport type ILayoutPreprocessor = ILayoutPreprocessorPlain;\r\nexport const ILayoutPreprocessor = Symbol('ILayoutPreprocessor');\r\n\r\nexport type ILayoutPostprocessor = ILayoutPostprocessorPlain;\r\nexport const ILayoutPostprocessor = Symbol('ILayoutPostprocessor');\r\n\r\n/**\r\n * This dependency injection module adds the default bindings for the frontend integration of ELK.\r\n * **Note:** Since this package has no direct dependency to the `sprotty` frontend package,\r\n * this module does not include a binding for `TYPES.IModelLayoutEngine`. Add it like this:\r\n * ```\r\n * bind(TYPES.IModelLayoutEngine).toService(ElkLayoutEngine);\r\n * ```\r\n * Furthermore, you need to add a binding for `ElkFactory` and choose between the bundled or the\r\n * webworker variant of `elkjs`:\r\n * ```\r\n * const elkFactory: ElkFactory = () => new ElkConstructor({ ... }); // See elkjs documentation\r\n * bind(ElkFactory).toConstantValue(elkFactory);\r\n * ```\r\n * You can import `ElkConstructor` from `'elkjs/lib/elk.bundled'` for the bundled variant or\r\n * `'elkjs/lib/elk-api'` for the webworker variant.\r\n */\r\nexport const elkLayoutModule = new ContainerModule(bind => {\r\n    bind(ElkLayoutEngine).toDynamicValue(context => {\r\n        const elkFactory = context.container.get<ElkFactory>(ElkFactory);\r\n        const elementFilter = context.container.get<IElementFilter>(IElementFilter);\r\n        const layoutConfigurator = context.container.get<ILayoutConfigurator>(ILayoutConfigurator);\r\n        const layoutPreprocessor = context.container.isBound(ILayoutPreprocessor)\r\n            ? context.container.get<ILayoutPreprocessor>(ILayoutPreprocessor) : undefined;\r\n        const layoutPostprocessor = context.container.isBound(ILayoutPostprocessor)\r\n            ? context.container.get<ILayoutPostprocessor>(ILayoutPostprocessor) : undefined;\r\n        return new ElkLayoutEngine(elkFactory, elementFilter, layoutConfigurator, layoutPreprocessor, layoutPostprocessor);\r\n    }).inSingletonScope();\r\n    bind(IElementFilter).to(DefaultElementFilter);\r\n    bind(ILayoutConfigurator).to(DefaultLayoutConfigurator);\r\n});\r\n", "/********************************************************************************\r\n * Copyright (c) 2018 TypeFox and others.\r\n *\r\n * This program and the accompanying materials are made available under the\r\n * terms of the Eclipse Public License v. 2.0 which is available at\r\n * http://www.eclipse.org/legal/epl-2.0.\r\n *\r\n * This Source Code may also be made available under the following Secondary\r\n * Licenses when the conditions for such availability set forth in the Eclipse\r\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\r\n * with the GNU Classpath Exception which is available at\r\n * https://www.gnu.org/software/classpath/license.html.\r\n *\r\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\r\n ********************************************************************************/\r\n\r\n// By default we export the Inversify-ready version. If you want to use the plain\r\n// version, import from `sprotty-elk/lib/elk-layout`.\r\nexport * from './inversify';\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAsBA,QAAA,gBAAA;AAWA,QAAa,kBAAb,MAA4B;MAIxB,YAAY,YACmB,SAAyB,IAAI,qBAAoB,GACjD,eAAoC,IAAI,0BAAyB,GACjE,cACA,eAAoC;AAHpC,aAAA,SAAA;AACA,aAAA,eAAA;AACA,aAAA,eAAA;AACA,aAAA,gBAAA;AAC3B,aAAK,MAAM,WAAU;MACzB;;;;;;;MAQA,OAAO,QAAgB,OAAmB;AACtC,YAAI,KAAK,aAAa,MAAM,MAAM,SAAS;AACvC,iBAAO;;AAEX,YAAI,CAAC,OAAO;AACR,kBAAQ,IAAI,cAAA,YAAW;AACvB,gBAAM,IAAI,MAAM;;AAIpB,cAAM,WAAW,KAAK,eAAe,QAAQ,KAAK;AAClD,YAAI,KAAK,cAAc;AACnB,eAAK,aAAa,WAAW,UAAU,QAAQ,KAAK;;AAIxD,eAAO,KAAK,IAAI,OAAO,QAAQ,EAAE,KAAK,YAAS;AAG3C,cAAI,KAAK,eAAe;AACpB,iBAAK,cAAc,YAAY,QAAQ,QAAQ,KAAM;;AAEzD,eAAK,YAAY,QAAQ,KAAM;AAC/B,iBAAO;QACX,CAAC;MACL;;;;;MAMU,aAAa,QAAqB;AACxC,gBAAO,GAAA,cAAA,cAAa,MAAM;MAC9B;;;;MAKU,eAAe,QAAgB,OAAkB;AACvD,cAAM,WAAoB;UACtB,IAAI,OAAO;UACX,eAAe,KAAK,aAAa,MAAM,QAAQ,KAAK;;AAExD,YAAI,OAAO,UAAU;AACjB,mBAAS,WAAW,OAAO,SACtB,OAAO,OAAK,KAAK,aAAa,CAAC,MAAM,UAAU,KAAK,OAAO,MAAM,GAAG,KAAK,CAAC,EAC1E,IAAI,OAAK,KAAK,cAAc,GAAY,KAAK,CAAC;AACnD,mBAAS,QAAQ,OAAO,SACnB,OAAO,OAAK,KAAK,aAAa,CAAC,MAAM,UAAU,KAAK,OAAO,MAAM,GAAG,KAAK,CAAC,EAC1E,IAAI,OAAK,KAAK,cAAc,GAAY,KAAK,CAAC;;AAEvD,eAAO;MACX;;;;MAKU,cAAc,OAAc,OAAkB;;;AACpD,cAAM,UAAmB;UACrB,IAAI,MAAM;UACV,eAAe,KAAK,aAAa,MAAM,OAAO,KAAK;;AAEvD,YAAI,MAAM,UAAU;AAChB,gBAAM,UAAyB,EAAE,KAAK,GAAG,OAAO,GAAG,QAAQ,GAAG,MAAM,EAAC;AACrE,kBAAQ,WAAW,KAAK,qBAAqB,OAAO,OAAO,OAAO;AAClE,cAAI,QAAQ,QAAQ,KAAK,QAAQ,UAAU,KAAK,QAAQ,WAAW,KAAK,QAAQ,SAAS,GAAG;AACxF,aAAA,KAAA,QAAQ,mBAAa,QAAA,OAAA,SAAA,KAArB,QAAQ,gBAAkB,CAAA;AAC1B,aAAA,MAAA,KAAA,QAAQ,eAAc,yBAAyB,OAAA,QAAA,OAAA,SAAA,KAAA,GAAzB,yBAAyB,IAAM,QAAQ,QAAQ,GAAG,SAAS,QAAQ,IAAI,WAAW,QAAQ,MAAM,UAAU,QAAQ,KAAK;;AAEjJ,kBAAQ,QAAQ,MAAM,SACjB,OAAO,OAAK,KAAK,aAAa,CAAC,MAAM,UAAU,KAAK,OAAO,MAAM,GAAG,KAAK,CAAC,EAC1E,IAAI,OAAK,KAAK,cAAc,GAAY,KAAK,CAAC;AACnD,kBAAQ,SAAS,MAAM,SAClB,OAAO,OAAK,KAAK,aAAa,CAAC,MAAM,WAAW,KAAK,OAAO,MAAM,GAAG,KAAK,CAAC,EAC3E,IAAI,OAAK,KAAK,eAAe,GAAa,KAAK,CAAC;AACrD,kBAAQ,QAAQ,MAAM,SACjB,OAAO,OAAK,KAAK,aAAa,CAAC,MAAM,UAAU,KAAK,OAAO,MAAM,GAAG,KAAK,CAAC,EAC1E,IAAI,OAAK,KAAK,cAAc,GAAY,KAAK,CAAC;;AAEvD,aAAK,eAAe,SAAS,KAAK;AAClC,eAAO;MACX;MAEU,qBAAqB,OAA6B,OAAoB,SAAsB;AAClG,YAAI,CAAC,MAAM,UAAU;AACjB,iBAAO;;AAEX,cAAM,QAAQ,MAAM,SAAS,OAAO,OAAK,KAAK,aAAa,CAAC,MAAM,UAAU,KAAK,OAAO,MAAM,GAAG,KAAK,CAAC;AACvG,YAAI,MAAM,SAAS,GAAG;AAClB,iBAAO,MAAM,IAAI,OAAK,KAAK,cAAc,GAAY,KAAK,CAAC;;AAE/D,mBAAW,KAAK,MAAM,UAAU;AAC5B,cAAI,KAAK,aAAa,CAAC,MAAM,iBAAiB,KAAK,OAAO,MAAM,GAAG,KAAK,GAAG;AACvE,kBAAM,QAAQ;AACd,gBAAI,MAAM,QAAQ;AACd,kBAAI,MAAM,UAAU;AAChB,wBAAQ,QAAQ,MAAM,SAAS;AAC/B,wBAAQ,OAAO,MAAM,SAAS;;AAElC,kBAAI,MAAM,QAAQ,MAAM,MAAM;AAC1B,wBAAQ,SAAS,MAAM,KAAK,QAAQ,MAAM,KAAK,SAAS,MAAM,WAAW,MAAM,SAAS,IAAI;AAC5F,wBAAQ,UAAU,MAAM,KAAK,SAAS,MAAM,KAAK,UAAU,MAAM,WAAW,MAAM,SAAS,IAAI;;;AAGvG,kBAAM,aAAa,KAAK,qBAAqB,OAAO,OAAO,OAAO;AAClE,gBAAI,YAAY;AACZ,qBAAO;;;;AAInB,eAAO;MACX;;;;MAKU,cAAc,OAAc,OAAkB;AACpD,cAAM,UAA2B;UAC7B,IAAI,MAAM;UACV,SAAS,CAAC,MAAM,QAAQ;UACxB,SAAS,CAAC,MAAM,QAAQ;UACxB,eAAe,KAAK,aAAa,MAAM,OAAO,KAAK;;AAEvD,YAAI,MAAM,UAAU;AAChB,kBAAQ,SAAS,MAAM,SAClB,OAAO,OAAK,KAAK,aAAa,CAAC,MAAM,WAAW,KAAK,OAAO,MAAM,GAAG,KAAK,CAAC,EAC3E,IAAI,OAAK,KAAK,eAAe,GAAa,KAAK,CAAC;;AAEzD,cAAM,SAAS,MAAM;AACrB,YAAI,UAAU,OAAO,UAAU,GAAG;AAC9B,kBAAQ,WAAW,CAAC;YAChB,IAAI,MAAM,KAAK;YACf,YAAY,OAAO,CAAC;YACpB,YAAY,OAAO,MAAM,GAAG,OAAO,SAAS,CAAC;YAC7C,UAAU,OAAO,OAAO,SAAS,CAAC;WACrC;;AAEL,eAAO;MACX;;;;MAKU,eAAe,QAAgB,OAAkB;AACvD,cAAM,WAAqB;UACvB,IAAI,OAAO;UACX,MAAM,OAAO;UACb,eAAe,KAAK,aAAa,MAAM,QAAQ,KAAK;;AAExD,aAAK,eAAe,UAAU,MAAM;AACpC,eAAO;MACX;;;;MAKU,cAAc,OAAc,OAAkB;AACpD,cAAM,UAAmB;UACrB,IAAI,MAAM;UACV,eAAe,KAAK,aAAa,MAAM,OAAO,KAAK;;AAEvD,YAAI,MAAM,UAAU;AAChB,kBAAQ,SAAS,MAAM,SAClB,OAAO,OAAK,KAAK,aAAa,CAAC,MAAM,WAAW,KAAK,OAAO,MAAM,GAAG,KAAK,CAAC,EAC3E,IAAI,OAAK,KAAK,eAAe,GAAa,KAAK,CAAC;;AAEzD,aAAK,eAAe,SAAS,KAAK;AAClC,eAAO;MACX;;;;MAKU,eAAe,UAAoB,QAAqB;AAC9D,YAAI,OAAO,UAAU;AACjB,mBAAS,IAAI,OAAO,SAAS;AAC7B,mBAAS,IAAI,OAAO,SAAS;;AAEjC,YAAI,OAAO,MAAM;AACb,mBAAS,QAAQ,OAAO,KAAK;AAC7B,mBAAS,SAAS,OAAO,KAAK;;MAEtC;;;;MAKU,YAAY,SAAkB,OAAkB;AACtD,cAAM,QAAQ,MAAM,QAAQ,QAAQ,EAAE;AACtC,YAAI,SAAS,KAAK,aAAa,KAAK,MAAM,QAAQ;AAC9C,eAAK,WAAW,OAAgB,SAAS,KAAK;;AAElD,YAAI,QAAQ,UAAU;AAClB,qBAAW,SAAS,QAAQ,UAAU;AAClC,iBAAK,YAAY,OAAO,KAAK;;;AAGrC,YAAI,QAAQ,OAAO;AACf,qBAAW,WAAW,QAAQ,OAAO;AACjC,kBAAM,QAAQ,MAAM,QAAQ,QAAQ,EAAE;AACtC,gBAAI,SAAS,KAAK,aAAa,KAAK,MAAM,QAAQ;AAC9C,mBAAK,UAAU,OAAgB,SAAS,KAAK;;;;AAIzD,YAAI,QAAQ,OAAO;AACf,qBAAW,WAAW,QAAQ,OAAO;AACjC,kBAAM,QAAQ,MAAM,QAAQ,QAAQ,EAAE;AACtC,gBAAI,SAAS,KAAK,aAAa,KAAK,MAAM,QAAQ;AAC9C,mBAAK,WAAW,OAAgB,SAAS,KAAK;;;;MAI9D;;;;MAKU,WAAW,QAAuB,UAAoB,OAAkB;AAC9E,YAAI,SAAS,MAAM,UAAa,SAAS,MAAM,QAAW;AACtD,iBAAO,WAAW,EAAE,GAAG,SAAS,GAAG,GAAG,SAAS,EAAC;;AAEpD,YAAI,SAAS,UAAU,UAAa,SAAS,WAAW,QAAW;AAC/D,iBAAO,OAAO,EAAE,OAAO,SAAS,OAAO,QAAQ,SAAS,OAAM;;AAGlE,YAAI,SAAS,QAAQ;AACjB,qBAAW,YAAY,SAAS,QAAQ;AACpC,kBAAM,SAAS,SAAS,MAAM,MAAM,QAAQ,SAAS,EAAE;AACvD,gBAAI,QAAQ;AACR,mBAAK,WAAW,QAAkB,UAAU,KAAK;;;;MAIjE;;;;MAKU,UAAU,OAAc,SAA0B,OAAkB;AAC1E,cAAM,SAAkB,CAAA;AACxB,YAAI,QAAQ,YAAY,QAAQ,SAAS,SAAS,GAAG;AACjD,gBAAM,UAAU,QAAQ,SAAS,CAAC;AAClC,cAAI,QAAQ,YAAY;AACpB,mBAAO,KAAK,QAAQ,UAAU;;AAElC,cAAI,QAAQ,YAAY;AACpB,mBAAO,KAAK,GAAG,QAAQ,UAAU;;AAErC,cAAI,QAAQ,UAAU;AAClB,mBAAO,KAAK,QAAQ,QAAQ;;mBAEzB,gBAAgB,OAAO,GAAG;AACjC,cAAI,QAAQ,aAAa;AACrB,mBAAO,KAAK,QAAQ,WAAW;;AAEnC,cAAI,QAAQ,YAAY;AACpB,mBAAO,KAAK,GAAG,QAAQ,UAAU;;AAErC,cAAI,QAAQ,aAAa;AACrB,mBAAO,KAAK,QAAQ,WAAW;;;AAGvC,cAAM,gBAAgB;AAEtB,YAAI,QAAQ,QAAQ;AAChB,kBAAQ,OAAO,QAAQ,CAAC,aAAY;AAChC,kBAAM,SAAS,SAAS,MAAM,MAAM,QAAQ,SAAS,EAAE;AACvD,gBAAI,QAAQ;AACR,mBAAK,WAAW,QAAQ,UAAU,KAAK;;UAE/C,CAAC;;MAET;;AAnSJ,YAAA,kBAAA;AAuSA,aAAS,gBAAgB,MAAa;AAClC,aAAO,OAAQ,KAA0B,WAAW,YAC7C,OAAQ,KAA0B,WAAW;IACxD;AAiBA,QAAa,uBAAb,MAAiC;MAE7B,MAAM,SAAwB,OAAkB;AAC5C,gBAAQ,KAAK,aAAa,OAAO,GAAG;UAChC,KAAK;AACD,mBAAO,KAAK,WAAW,SAAkB,KAAK;UAClD,KAAK;AACD,mBAAO,KAAK,WAAW,SAAkB,KAAK;UAClD,KAAK;AACD,mBAAO,KAAK,YAAY,SAAmB,KAAK;UACpD,KAAK;AACD,mBAAO,KAAK,WAAW,SAAkB,KAAK;UAClD,KAAK;AACD,mBAAO,KAAK,kBAAkB,SAAyB,KAAK;UAChE;AACI,mBAAO;;MAEnB;MAEU,aAAa,QAAqB;AACxC,gBAAO,GAAA,cAAA,cAAa,MAAM;MAC9B;MAEU,WAAW,MAAa,OAAkB;AAChD,eAAO;MACX;MAEU,WAAW,MAAa,OAAkB;AAChD,cAAM,SAAS,MAAM,QAAQ,KAAK,QAAQ;AAC1C,YAAI,CAAC;AACD,iBAAO;AACX,cAAM,aAAa,KAAK,aAAa,MAAM;AAC3C,YAAI,eAAe,UAAU,CAAC,KAAK,WAAW,QAAQ,KAAK,KACpD,eAAe,UAAU,CAAC,KAAK,WAAW,QAAQ,KAAK;AAC1D,iBAAO;AACX,cAAM,SAAS,MAAM,QAAQ,KAAK,QAAQ;AAC1C,YAAI,CAAC;AACD,iBAAO;AACX,cAAM,aAAa,KAAK,aAAa,MAAM;AAC3C,YAAI,eAAe,UAAU,CAAC,KAAK,WAAW,QAAQ,KAAK,KACpD,eAAe,UAAU,CAAC,KAAK,WAAW,QAAQ,KAAK;AAC1D,iBAAO;AACX,eAAO;MACX;MAEU,YAAY,OAAe,OAAkB;AACnD,eAAO;MACX;MAEU,WAAW,MAAa,OAAkB;AAChD,eAAO;MACX;MAEU,kBAAkB,aAA2B,OAAkB;AACrE,eAAO;MACX;;AAvDJ,YAAA,uBAAA;AAkEA,QAAa,4BAAb,MAAsC;MAElC,MAAM,SAAwB,OAAkB;AAC5C,gBAAQ,KAAK,aAAa,OAAO,GAAG;UAChC,KAAK;AACD,mBAAO,KAAK,aAAa,SAAmB,KAAK;UACrD,KAAK;AACD,mBAAO,KAAK,YAAY,SAAkB,KAAK;UACnD,KAAK;AACD,mBAAO,KAAK,YAAY,SAAkB,KAAK;UACnD,KAAK;AACD,mBAAO,KAAK,aAAa,SAAmB,KAAK;UACrD,KAAK;AACD,mBAAO,KAAK,YAAY,SAAkB,KAAK;UACnD;AACI,mBAAO;;MAEnB;MAEU,aAAa,QAAqB;AACxC,gBAAO,GAAA,cAAA,cAAa,MAAM;MAC9B;MAEU,aAAa,QAAgB,OAAkB;AACrD,eAAO;MACX;MAEU,YAAY,OAAc,OAAkB;AAClD,eAAO;MACX;MAEU,YAAY,OAAc,OAAkB;AAClD,eAAO;MACX;MAEU,aAAa,QAAgB,OAAkB;AACrD,eAAO;MACX;MAEU,YAAY,OAAc,OAAkB;AAClD,eAAO;MACX;;AAzCJ,YAAA,4BAAA;;;;;;;;;;AC9YA,QAAA,cAAA;AACA,QAAA,eAAA;AAOa,YAAA,mBAA+C,GAAA,YAAA,YAAU,EAAG,aAAA,eAAoB;AAGhF,YAAA,aAAa,OAAO,YAAY;AAGhC,YAAA,iBAAiB,OAAO,gBAAgB;AACxC,YAAA,wBAAyD,GAAA,YAAA,YAAU,EAAG,aAAA,oBAAyB;AAG/F,YAAA,sBAAsB,OAAO,qBAAqB;AAClD,YAAA,6BAAmE,GAAA,YAAA,YAAU,EAAG,aAAA,yBAA8B;AAG9G,YAAA,sBAAsB,OAAO,qBAAqB;AAGlD,YAAA,uBAAuB,OAAO,sBAAsB;AAkBpD,YAAA,kBAAkB,IAAI,YAAA,gBAAgB,UAAO;AACtD,WAAK,QAAA,eAAe,EAAE,eAAe,aAAU;AAC3C,cAAM,aAAa,QAAQ,UAAU,IAAgB,QAAA,UAAU;AAC/D,cAAM,gBAAgB,QAAQ,UAAU,IAAoB,QAAA,cAAc;AAC1E,cAAM,qBAAqB,QAAQ,UAAU,IAAyB,QAAA,mBAAmB;AACzF,cAAM,qBAAqB,QAAQ,UAAU,QAAQ,QAAA,mBAAmB,IAClE,QAAQ,UAAU,IAAyB,QAAA,mBAAmB,IAAI;AACxE,cAAM,sBAAsB,QAAQ,UAAU,QAAQ,QAAA,oBAAoB,IACpE,QAAQ,UAAU,IAA0B,QAAA,oBAAoB,IAAI;AAC1E,eAAO,IAAI,QAAA,gBAAgB,YAAY,eAAe,oBAAoB,oBAAoB,mBAAmB;MACrH,CAAC,EAAE,iBAAgB;AACnB,WAAK,QAAA,cAAc,EAAE,GAAG,QAAA,oBAAoB;AAC5C,WAAK,QAAA,mBAAmB,EAAE,GAAG,QAAA,yBAAyB;IAC1D,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtDD,iBAAA,qBAAA,OAAA;;;",
  "names": []
}
