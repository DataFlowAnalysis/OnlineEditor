{
  "version": 3,
  "sources": ["../../monaco-editor/esm/vs/editor/common/standalone/standaloneEnums.js", "../../monaco-editor/esm/vs/editor/common/services/editorBaseApi.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneEditor.js", "../../monaco-editor/esm/vs/base/common/worker/simpleWorker.js", "../../monaco-editor/esm/vs/base/browser/defaultWorkerFactory.js", "../../monaco-editor/esm/vs/editor/common/model/mirrorTextModel.js", "../../monaco-editor/esm/vs/editor/common/languages/linkComputer.js", "../../monaco-editor/esm/vs/editor/common/languages/supports/inplaceReplaceSupport.js", "../../monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js", "../../monaco-editor/esm/vs/editor/common/diff/linesDiffComputer.js", "../../monaco-editor/esm/vs/editor/common/diff/rangeMapping.js", "../../monaco-editor/esm/vs/editor/common/diff/legacyLinesDiffComputer.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/algorithms/diffAlgorithm.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/utils.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/algorithms/dynamicProgrammingDiffing.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/algorithms/myersDiffAlgorithm.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/linesSliceCharSequence.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/computeMovedLines.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/heuristicSequenceOptimizations.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/lineSequence.js", "../../monaco-editor/esm/vs/editor/common/diff/defaultLinesDiffComputer/defaultLinesDiffComputer.js", "../../monaco-editor/esm/vs/editor/common/diff/linesDiffComputers.js", "../../monaco-editor/esm/vs/editor/common/languages/defaultDocumentColorsComputer.js", "../../monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js", "../../monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js", "../../monaco-editor/esm/vs/editor/browser/services/editorWorkerService.js", "../../monaco-editor/esm/vs/editor/browser/services/webWorker.js", "../../monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCommon.js", "../../monaco-editor/esm/vs/editor/standalone/common/monarch/monarchLexer.js", "../../monaco-editor/esm/vs/editor/standalone/browser/colorizer.js", "../../monaco-editor/esm/vs/editor/browser/services/abstractCodeEditorService.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditorService.js", "../../monaco-editor/esm/vs/platform/layout/browser/layoutService.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneLayoutService.js", "../../monaco-editor/esm/vs/platform/dialogs/common/dialogs.js", "../../monaco-editor/esm/vs/platform/undoRedo/common/undoRedoService.js", "../../monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling.js", "../../monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js", "../../monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js", "../../monaco-editor/esm/vs/base/common/glob.js", "../../monaco-editor/esm/vs/editor/common/languageSelector.js", "../../monaco-editor/esm/vs/editor/common/languageFeatureRegistry.js", "../../monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js", "../../monaco-editor/esm/vs/editor/common/config/diffEditor.js", "../../monaco-editor/esm/vs/editor/common/config/editorConfigurationSchema.js", "../../monaco-editor/esm/vs/platform/configuration/common/configurationModels.js", "../../monaco-editor/esm/vs/platform/keybinding/common/keybindingResolver.js", "../../monaco-editor/esm/vs/platform/keybinding/common/abstractKeybindingService.js", "../../monaco-editor/esm/vs/platform/keybinding/common/resolvedKeybindingItem.js", "../../monaco-editor/esm/vs/platform/keybinding/common/baseResolvedKeybinding.js", "../../monaco-editor/esm/vs/platform/keybinding/common/usLayoutResolvedKeybinding.js", "../../monaco-editor/esm/vs/editor/common/standaloneStrings.js", "../../monaco-editor/esm/vs/platform/workspace/common/workspaceTrust.js", "../../monaco-editor/esm/vs/base/browser/ui/contextview/contextview.js", "../../monaco-editor/esm/vs/platform/contextview/browser/contextViewService.js", "../../monaco-editor/esm/vs/editor/common/services/languagesAssociations.js", "../../monaco-editor/esm/vs/editor/common/services/languagesRegistry.js", "../../monaco-editor/esm/vs/editor/common/services/languageService.js", "../../monaco-editor/esm/vs/base/browser/ui/menu/menu.js", "../../monaco-editor/esm/vs/platform/contextview/browser/contextMenuHandler.js", "../../monaco-editor/esm/vs/platform/contextview/browser/contextMenuService.js", "../../monaco-editor/esm/vs/platform/editor/common/editor.js", "../../monaco-editor/esm/vs/editor/browser/services/openerService.js", "../../monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js", "../../monaco-editor/esm/vs/editor/common/services/modelService.js", "../../monaco-editor/esm/vs/editor/standalone/browser/quickInput/standaloneQuickInputService.js", "../../monaco-editor/esm/vs/platform/quickinput/common/quickAccess.js", "../../monaco-editor/esm/vs/platform/quickinput/common/quickInput.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickAccess.js", "../../monaco-editor/esm/vs/base/browser/ui/button/button.js", "../../monaco-editor/esm/vs/base/browser/ui/progressbar/progressbar.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInputBox.js", "../../monaco-editor/esm/vs/base/common/comparers.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInputList.js", "../../monaco-editor/esm/vs/base/common/linkedText.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInputUtils.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInput.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInputController.js", "../../monaco-editor/esm/vs/platform/quickinput/browser/quickInputService.js", "../../monaco-editor/esm/vs/editor/common/languages/supports/tokenization.js", "../../monaco-editor/esm/vs/editor/standalone/common/themes.js", "../../monaco-editor/esm/vs/platform/theme/browser/iconsStyleSheet.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneThemeService.js", "../../monaco-editor/esm/vs/editor/standalone/common/standaloneTheme.js", "../../monaco-editor/esm/vs/platform/accessibility/browser/accessibilityService.js", "../../monaco-editor/esm/vs/platform/actions/common/menuService.js", "../../monaco-editor/esm/vs/platform/clipboard/browser/clipboardService.js", "../../monaco-editor/esm/vs/platform/contextkey/browser/contextKeyService.js", "../../monaco-editor/esm/vs/platform/instantiation/common/graph.js", "../../monaco-editor/esm/vs/platform/instantiation/common/instantiationService.js", "../../monaco-editor/esm/vs/platform/markers/common/markerService.js", "../../monaco-editor/esm/vs/platform/configuration/common/configurations.js", "../../monaco-editor/esm/vs/platform/log/common/logService.js", "../../monaco-editor/esm/vs/editor/common/editorFeatures.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorWidget.js", "../../monaco-editor/esm/vs/base/common/hotReload.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/utils.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/accessibleDiffViewer.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/decorations.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/movedBlocksLines.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorDecorations.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorSash.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/outlineModel.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/hideUnchangedRegionsFeature.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/workerBasedDocumentDiffProvider.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffProviderFactoryService.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorViewModel.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/inlineDiffDeletedCodeMargin.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/renderLines.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/lineAlignment.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/overviewRulerPart.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/colors.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/delegatingEditorImpl.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorEditors.js", "../../monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorOptions.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditor.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/multiDiffEditorWidgetImpl.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/utils.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/diffEditorItemTemplate.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/objectPool.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/colors.js", "../../monaco-editor/esm/vs/editor/browser/widget/multiDiffEditorWidget/multiDiffEditorWidget.js", "../../monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCompile.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneLanguages.js", "../../monaco-editor/esm/vs/platform/extensions/common/extensions.js", "../../monaco-editor/esm/vs/editor/contrib/format/browser/format.js", "../../monaco-editor/esm/vs/editor/editor.api.js"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n// THIS IS A GENERATED FILE. DO NOT EDIT DIRECTLY.\r\nexport var AccessibilitySupport;\r\n(function (AccessibilitySupport) {\r\n    /**\r\n     * This should be the browser case where it is not known if a screen reader is attached or no.\r\n     */\r\n    AccessibilitySupport[AccessibilitySupport[\"Unknown\"] = 0] = \"Unknown\";\r\n    AccessibilitySupport[AccessibilitySupport[\"Disabled\"] = 1] = \"Disabled\";\r\n    AccessibilitySupport[AccessibilitySupport[\"Enabled\"] = 2] = \"Enabled\";\r\n})(AccessibilitySupport || (AccessibilitySupport = {}));\r\nexport var CodeActionTriggerType;\r\n(function (CodeActionTriggerType) {\r\n    CodeActionTriggerType[CodeActionTriggerType[\"Invoke\"] = 1] = \"Invoke\";\r\n    CodeActionTriggerType[CodeActionTriggerType[\"Auto\"] = 2] = \"Auto\";\r\n})(CodeActionTriggerType || (CodeActionTriggerType = {}));\r\nexport var CompletionItemInsertTextRule;\r\n(function (CompletionItemInsertTextRule) {\r\n    CompletionItemInsertTextRule[CompletionItemInsertTextRule[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Adjust whitespace/indentation of multiline insert texts to\r\n     * match the current line indentation.\r\n     */\r\n    CompletionItemInsertTextRule[CompletionItemInsertTextRule[\"KeepWhitespace\"] = 1] = \"KeepWhitespace\";\r\n    /**\r\n     * `insertText` is a snippet.\r\n     */\r\n    CompletionItemInsertTextRule[CompletionItemInsertTextRule[\"InsertAsSnippet\"] = 4] = \"InsertAsSnippet\";\r\n})(CompletionItemInsertTextRule || (CompletionItemInsertTextRule = {}));\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind[CompletionItemKind[\"Method\"] = 0] = \"Method\";\r\n    CompletionItemKind[CompletionItemKind[\"Function\"] = 1] = \"Function\";\r\n    CompletionItemKind[CompletionItemKind[\"Constructor\"] = 2] = \"Constructor\";\r\n    CompletionItemKind[CompletionItemKind[\"Field\"] = 3] = \"Field\";\r\n    CompletionItemKind[CompletionItemKind[\"Variable\"] = 4] = \"Variable\";\r\n    CompletionItemKind[CompletionItemKind[\"Class\"] = 5] = \"Class\";\r\n    CompletionItemKind[CompletionItemKind[\"Struct\"] = 6] = \"Struct\";\r\n    CompletionItemKind[CompletionItemKind[\"Interface\"] = 7] = \"Interface\";\r\n    CompletionItemKind[CompletionItemKind[\"Module\"] = 8] = \"Module\";\r\n    CompletionItemKind[CompletionItemKind[\"Property\"] = 9] = \"Property\";\r\n    CompletionItemKind[CompletionItemKind[\"Event\"] = 10] = \"Event\";\r\n    CompletionItemKind[CompletionItemKind[\"Operator\"] = 11] = \"Operator\";\r\n    CompletionItemKind[CompletionItemKind[\"Unit\"] = 12] = \"Unit\";\r\n    CompletionItemKind[CompletionItemKind[\"Value\"] = 13] = \"Value\";\r\n    CompletionItemKind[CompletionItemKind[\"Constant\"] = 14] = \"Constant\";\r\n    CompletionItemKind[CompletionItemKind[\"Enum\"] = 15] = \"Enum\";\r\n    CompletionItemKind[CompletionItemKind[\"EnumMember\"] = 16] = \"EnumMember\";\r\n    CompletionItemKind[CompletionItemKind[\"Keyword\"] = 17] = \"Keyword\";\r\n    CompletionItemKind[CompletionItemKind[\"Text\"] = 18] = \"Text\";\r\n    CompletionItemKind[CompletionItemKind[\"Color\"] = 19] = \"Color\";\r\n    CompletionItemKind[CompletionItemKind[\"File\"] = 20] = \"File\";\r\n    CompletionItemKind[CompletionItemKind[\"Reference\"] = 21] = \"Reference\";\r\n    CompletionItemKind[CompletionItemKind[\"Customcolor\"] = 22] = \"Customcolor\";\r\n    CompletionItemKind[CompletionItemKind[\"Folder\"] = 23] = \"Folder\";\r\n    CompletionItemKind[CompletionItemKind[\"TypeParameter\"] = 24] = \"TypeParameter\";\r\n    CompletionItemKind[CompletionItemKind[\"User\"] = 25] = \"User\";\r\n    CompletionItemKind[CompletionItemKind[\"Issue\"] = 26] = \"Issue\";\r\n    CompletionItemKind[CompletionItemKind[\"Snippet\"] = 27] = \"Snippet\";\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    CompletionItemTag[CompletionItemTag[\"Deprecated\"] = 1] = \"Deprecated\";\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * How a suggest provider was triggered.\r\n */\r\nexport var CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    CompletionTriggerKind[CompletionTriggerKind[\"Invoke\"] = 0] = \"Invoke\";\r\n    CompletionTriggerKind[CompletionTriggerKind[\"TriggerCharacter\"] = 1] = \"TriggerCharacter\";\r\n    CompletionTriggerKind[CompletionTriggerKind[\"TriggerForIncompleteCompletions\"] = 2] = \"TriggerForIncompleteCompletions\";\r\n})(CompletionTriggerKind || (CompletionTriggerKind = {}));\r\n/**\r\n * A positioning preference for rendering content widgets.\r\n */\r\nexport var ContentWidgetPositionPreference;\r\n(function (ContentWidgetPositionPreference) {\r\n    /**\r\n     * Place the content widget exactly at a position\r\n     */\r\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"EXACT\"] = 0] = \"EXACT\";\r\n    /**\r\n     * Place the content widget above a position\r\n     */\r\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"ABOVE\"] = 1] = \"ABOVE\";\r\n    /**\r\n     * Place the content widget below a position\r\n     */\r\n    ContentWidgetPositionPreference[ContentWidgetPositionPreference[\"BELOW\"] = 2] = \"BELOW\";\r\n})(ContentWidgetPositionPreference || (ContentWidgetPositionPreference = {}));\r\n/**\r\n * Describes the reason the cursor has changed its position.\r\n */\r\nexport var CursorChangeReason;\r\n(function (CursorChangeReason) {\r\n    /**\r\n     * Unknown or not set.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"NotSet\"] = 0] = \"NotSet\";\r\n    /**\r\n     * A `model.setValue()` was called.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"ContentFlush\"] = 1] = \"ContentFlush\";\r\n    /**\r\n     * The `model` has been changed outside of this cursor and the cursor recovers its position from associated markers.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"RecoverFromMarkers\"] = 2] = \"RecoverFromMarkers\";\r\n    /**\r\n     * There was an explicit user gesture.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Explicit\"] = 3] = \"Explicit\";\r\n    /**\r\n     * There was a Paste.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Paste\"] = 4] = \"Paste\";\r\n    /**\r\n     * There was an Undo.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Undo\"] = 5] = \"Undo\";\r\n    /**\r\n     * There was a Redo.\r\n     */\r\n    CursorChangeReason[CursorChangeReason[\"Redo\"] = 6] = \"Redo\";\r\n})(CursorChangeReason || (CursorChangeReason = {}));\r\n/**\r\n * The default end of line to use when instantiating models.\r\n */\r\nexport var DefaultEndOfLine;\r\n(function (DefaultEndOfLine) {\r\n    /**\r\n     * Use line feed (\\n) as the end of line character.\r\n     */\r\n    DefaultEndOfLine[DefaultEndOfLine[\"LF\"] = 1] = \"LF\";\r\n    /**\r\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\r\n     */\r\n    DefaultEndOfLine[DefaultEndOfLine[\"CRLF\"] = 2] = \"CRLF\";\r\n})(DefaultEndOfLine || (DefaultEndOfLine = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind[DocumentHighlightKind[\"Text\"] = 0] = \"Text\";\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind[DocumentHighlightKind[\"Read\"] = 1] = \"Read\";\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind[DocumentHighlightKind[\"Write\"] = 2] = \"Write\";\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * Configuration options for auto indentation in the editor\r\n */\r\nexport var EditorAutoIndentStrategy;\r\n(function (EditorAutoIndentStrategy) {\r\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"None\"] = 0] = \"None\";\r\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Keep\"] = 1] = \"Keep\";\r\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Brackets\"] = 2] = \"Brackets\";\r\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Advanced\"] = 3] = \"Advanced\";\r\n    EditorAutoIndentStrategy[EditorAutoIndentStrategy[\"Full\"] = 4] = \"Full\";\r\n})(EditorAutoIndentStrategy || (EditorAutoIndentStrategy = {}));\r\nexport var EditorOption;\r\n(function (EditorOption) {\r\n    EditorOption[EditorOption[\"acceptSuggestionOnCommitCharacter\"] = 0] = \"acceptSuggestionOnCommitCharacter\";\r\n    EditorOption[EditorOption[\"acceptSuggestionOnEnter\"] = 1] = \"acceptSuggestionOnEnter\";\r\n    EditorOption[EditorOption[\"accessibilitySupport\"] = 2] = \"accessibilitySupport\";\r\n    EditorOption[EditorOption[\"accessibilityPageSize\"] = 3] = \"accessibilityPageSize\";\r\n    EditorOption[EditorOption[\"ariaLabel\"] = 4] = \"ariaLabel\";\r\n    EditorOption[EditorOption[\"ariaRequired\"] = 5] = \"ariaRequired\";\r\n    EditorOption[EditorOption[\"autoClosingBrackets\"] = 6] = \"autoClosingBrackets\";\r\n    EditorOption[EditorOption[\"autoClosingComments\"] = 7] = \"autoClosingComments\";\r\n    EditorOption[EditorOption[\"screenReaderAnnounceInlineSuggestion\"] = 8] = \"screenReaderAnnounceInlineSuggestion\";\r\n    EditorOption[EditorOption[\"autoClosingDelete\"] = 9] = \"autoClosingDelete\";\r\n    EditorOption[EditorOption[\"autoClosingOvertype\"] = 10] = \"autoClosingOvertype\";\r\n    EditorOption[EditorOption[\"autoClosingQuotes\"] = 11] = \"autoClosingQuotes\";\r\n    EditorOption[EditorOption[\"autoIndent\"] = 12] = \"autoIndent\";\r\n    EditorOption[EditorOption[\"automaticLayout\"] = 13] = \"automaticLayout\";\r\n    EditorOption[EditorOption[\"autoSurround\"] = 14] = \"autoSurround\";\r\n    EditorOption[EditorOption[\"bracketPairColorization\"] = 15] = \"bracketPairColorization\";\r\n    EditorOption[EditorOption[\"guides\"] = 16] = \"guides\";\r\n    EditorOption[EditorOption[\"codeLens\"] = 17] = \"codeLens\";\r\n    EditorOption[EditorOption[\"codeLensFontFamily\"] = 18] = \"codeLensFontFamily\";\r\n    EditorOption[EditorOption[\"codeLensFontSize\"] = 19] = \"codeLensFontSize\";\r\n    EditorOption[EditorOption[\"colorDecorators\"] = 20] = \"colorDecorators\";\r\n    EditorOption[EditorOption[\"colorDecoratorsLimit\"] = 21] = \"colorDecoratorsLimit\";\r\n    EditorOption[EditorOption[\"columnSelection\"] = 22] = \"columnSelection\";\r\n    EditorOption[EditorOption[\"comments\"] = 23] = \"comments\";\r\n    EditorOption[EditorOption[\"contextmenu\"] = 24] = \"contextmenu\";\r\n    EditorOption[EditorOption[\"copyWithSyntaxHighlighting\"] = 25] = \"copyWithSyntaxHighlighting\";\r\n    EditorOption[EditorOption[\"cursorBlinking\"] = 26] = \"cursorBlinking\";\r\n    EditorOption[EditorOption[\"cursorSmoothCaretAnimation\"] = 27] = \"cursorSmoothCaretAnimation\";\r\n    EditorOption[EditorOption[\"cursorStyle\"] = 28] = \"cursorStyle\";\r\n    EditorOption[EditorOption[\"cursorSurroundingLines\"] = 29] = \"cursorSurroundingLines\";\r\n    EditorOption[EditorOption[\"cursorSurroundingLinesStyle\"] = 30] = \"cursorSurroundingLinesStyle\";\r\n    EditorOption[EditorOption[\"cursorWidth\"] = 31] = \"cursorWidth\";\r\n    EditorOption[EditorOption[\"disableLayerHinting\"] = 32] = \"disableLayerHinting\";\r\n    EditorOption[EditorOption[\"disableMonospaceOptimizations\"] = 33] = \"disableMonospaceOptimizations\";\r\n    EditorOption[EditorOption[\"domReadOnly\"] = 34] = \"domReadOnly\";\r\n    EditorOption[EditorOption[\"dragAndDrop\"] = 35] = \"dragAndDrop\";\r\n    EditorOption[EditorOption[\"dropIntoEditor\"] = 36] = \"dropIntoEditor\";\r\n    EditorOption[EditorOption[\"emptySelectionClipboard\"] = 37] = \"emptySelectionClipboard\";\r\n    EditorOption[EditorOption[\"experimentalWhitespaceRendering\"] = 38] = \"experimentalWhitespaceRendering\";\r\n    EditorOption[EditorOption[\"extraEditorClassName\"] = 39] = \"extraEditorClassName\";\r\n    EditorOption[EditorOption[\"fastScrollSensitivity\"] = 40] = \"fastScrollSensitivity\";\r\n    EditorOption[EditorOption[\"find\"] = 41] = \"find\";\r\n    EditorOption[EditorOption[\"fixedOverflowWidgets\"] = 42] = \"fixedOverflowWidgets\";\r\n    EditorOption[EditorOption[\"folding\"] = 43] = \"folding\";\r\n    EditorOption[EditorOption[\"foldingStrategy\"] = 44] = \"foldingStrategy\";\r\n    EditorOption[EditorOption[\"foldingHighlight\"] = 45] = \"foldingHighlight\";\r\n    EditorOption[EditorOption[\"foldingImportsByDefault\"] = 46] = \"foldingImportsByDefault\";\r\n    EditorOption[EditorOption[\"foldingMaximumRegions\"] = 47] = \"foldingMaximumRegions\";\r\n    EditorOption[EditorOption[\"unfoldOnClickAfterEndOfLine\"] = 48] = \"unfoldOnClickAfterEndOfLine\";\r\n    EditorOption[EditorOption[\"fontFamily\"] = 49] = \"fontFamily\";\r\n    EditorOption[EditorOption[\"fontInfo\"] = 50] = \"fontInfo\";\r\n    EditorOption[EditorOption[\"fontLigatures\"] = 51] = \"fontLigatures\";\r\n    EditorOption[EditorOption[\"fontSize\"] = 52] = \"fontSize\";\r\n    EditorOption[EditorOption[\"fontWeight\"] = 53] = \"fontWeight\";\r\n    EditorOption[EditorOption[\"fontVariations\"] = 54] = \"fontVariations\";\r\n    EditorOption[EditorOption[\"formatOnPaste\"] = 55] = \"formatOnPaste\";\r\n    EditorOption[EditorOption[\"formatOnType\"] = 56] = \"formatOnType\";\r\n    EditorOption[EditorOption[\"glyphMargin\"] = 57] = \"glyphMargin\";\r\n    EditorOption[EditorOption[\"gotoLocation\"] = 58] = \"gotoLocation\";\r\n    EditorOption[EditorOption[\"hideCursorInOverviewRuler\"] = 59] = \"hideCursorInOverviewRuler\";\r\n    EditorOption[EditorOption[\"hover\"] = 60] = \"hover\";\r\n    EditorOption[EditorOption[\"inDiffEditor\"] = 61] = \"inDiffEditor\";\r\n    EditorOption[EditorOption[\"inlineSuggest\"] = 62] = \"inlineSuggest\";\r\n    EditorOption[EditorOption[\"letterSpacing\"] = 63] = \"letterSpacing\";\r\n    EditorOption[EditorOption[\"lightbulb\"] = 64] = \"lightbulb\";\r\n    EditorOption[EditorOption[\"lineDecorationsWidth\"] = 65] = \"lineDecorationsWidth\";\r\n    EditorOption[EditorOption[\"lineHeight\"] = 66] = \"lineHeight\";\r\n    EditorOption[EditorOption[\"lineNumbers\"] = 67] = \"lineNumbers\";\r\n    EditorOption[EditorOption[\"lineNumbersMinChars\"] = 68] = \"lineNumbersMinChars\";\r\n    EditorOption[EditorOption[\"linkedEditing\"] = 69] = \"linkedEditing\";\r\n    EditorOption[EditorOption[\"links\"] = 70] = \"links\";\r\n    EditorOption[EditorOption[\"matchBrackets\"] = 71] = \"matchBrackets\";\r\n    EditorOption[EditorOption[\"minimap\"] = 72] = \"minimap\";\r\n    EditorOption[EditorOption[\"mouseStyle\"] = 73] = \"mouseStyle\";\r\n    EditorOption[EditorOption[\"mouseWheelScrollSensitivity\"] = 74] = \"mouseWheelScrollSensitivity\";\r\n    EditorOption[EditorOption[\"mouseWheelZoom\"] = 75] = \"mouseWheelZoom\";\r\n    EditorOption[EditorOption[\"multiCursorMergeOverlapping\"] = 76] = \"multiCursorMergeOverlapping\";\r\n    EditorOption[EditorOption[\"multiCursorModifier\"] = 77] = \"multiCursorModifier\";\r\n    EditorOption[EditorOption[\"multiCursorPaste\"] = 78] = \"multiCursorPaste\";\r\n    EditorOption[EditorOption[\"multiCursorLimit\"] = 79] = \"multiCursorLimit\";\r\n    EditorOption[EditorOption[\"occurrencesHighlight\"] = 80] = \"occurrencesHighlight\";\r\n    EditorOption[EditorOption[\"overviewRulerBorder\"] = 81] = \"overviewRulerBorder\";\r\n    EditorOption[EditorOption[\"overviewRulerLanes\"] = 82] = \"overviewRulerLanes\";\r\n    EditorOption[EditorOption[\"padding\"] = 83] = \"padding\";\r\n    EditorOption[EditorOption[\"pasteAs\"] = 84] = \"pasteAs\";\r\n    EditorOption[EditorOption[\"parameterHints\"] = 85] = \"parameterHints\";\r\n    EditorOption[EditorOption[\"peekWidgetDefaultFocus\"] = 86] = \"peekWidgetDefaultFocus\";\r\n    EditorOption[EditorOption[\"definitionLinkOpensInPeek\"] = 87] = \"definitionLinkOpensInPeek\";\r\n    EditorOption[EditorOption[\"quickSuggestions\"] = 88] = \"quickSuggestions\";\r\n    EditorOption[EditorOption[\"quickSuggestionsDelay\"] = 89] = \"quickSuggestionsDelay\";\r\n    EditorOption[EditorOption[\"readOnly\"] = 90] = \"readOnly\";\r\n    EditorOption[EditorOption[\"readOnlyMessage\"] = 91] = \"readOnlyMessage\";\r\n    EditorOption[EditorOption[\"renameOnType\"] = 92] = \"renameOnType\";\r\n    EditorOption[EditorOption[\"renderControlCharacters\"] = 93] = \"renderControlCharacters\";\r\n    EditorOption[EditorOption[\"renderFinalNewline\"] = 94] = \"renderFinalNewline\";\r\n    EditorOption[EditorOption[\"renderLineHighlight\"] = 95] = \"renderLineHighlight\";\r\n    EditorOption[EditorOption[\"renderLineHighlightOnlyWhenFocus\"] = 96] = \"renderLineHighlightOnlyWhenFocus\";\r\n    EditorOption[EditorOption[\"renderValidationDecorations\"] = 97] = \"renderValidationDecorations\";\r\n    EditorOption[EditorOption[\"renderWhitespace\"] = 98] = \"renderWhitespace\";\r\n    EditorOption[EditorOption[\"revealHorizontalRightPadding\"] = 99] = \"revealHorizontalRightPadding\";\r\n    EditorOption[EditorOption[\"roundedSelection\"] = 100] = \"roundedSelection\";\r\n    EditorOption[EditorOption[\"rulers\"] = 101] = \"rulers\";\r\n    EditorOption[EditorOption[\"scrollbar\"] = 102] = \"scrollbar\";\r\n    EditorOption[EditorOption[\"scrollBeyondLastColumn\"] = 103] = \"scrollBeyondLastColumn\";\r\n    EditorOption[EditorOption[\"scrollBeyondLastLine\"] = 104] = \"scrollBeyondLastLine\";\r\n    EditorOption[EditorOption[\"scrollPredominantAxis\"] = 105] = \"scrollPredominantAxis\";\r\n    EditorOption[EditorOption[\"selectionClipboard\"] = 106] = \"selectionClipboard\";\r\n    EditorOption[EditorOption[\"selectionHighlight\"] = 107] = \"selectionHighlight\";\r\n    EditorOption[EditorOption[\"selectOnLineNumbers\"] = 108] = \"selectOnLineNumbers\";\r\n    EditorOption[EditorOption[\"showFoldingControls\"] = 109] = \"showFoldingControls\";\r\n    EditorOption[EditorOption[\"showUnused\"] = 110] = \"showUnused\";\r\n    EditorOption[EditorOption[\"snippetSuggestions\"] = 111] = \"snippetSuggestions\";\r\n    EditorOption[EditorOption[\"smartSelect\"] = 112] = \"smartSelect\";\r\n    EditorOption[EditorOption[\"smoothScrolling\"] = 113] = \"smoothScrolling\";\r\n    EditorOption[EditorOption[\"stickyScroll\"] = 114] = \"stickyScroll\";\r\n    EditorOption[EditorOption[\"stickyTabStops\"] = 115] = \"stickyTabStops\";\r\n    EditorOption[EditorOption[\"stopRenderingLineAfter\"] = 116] = \"stopRenderingLineAfter\";\r\n    EditorOption[EditorOption[\"suggest\"] = 117] = \"suggest\";\r\n    EditorOption[EditorOption[\"suggestFontSize\"] = 118] = \"suggestFontSize\";\r\n    EditorOption[EditorOption[\"suggestLineHeight\"] = 119] = \"suggestLineHeight\";\r\n    EditorOption[EditorOption[\"suggestOnTriggerCharacters\"] = 120] = \"suggestOnTriggerCharacters\";\r\n    EditorOption[EditorOption[\"suggestSelection\"] = 121] = \"suggestSelection\";\r\n    EditorOption[EditorOption[\"tabCompletion\"] = 122] = \"tabCompletion\";\r\n    EditorOption[EditorOption[\"tabIndex\"] = 123] = \"tabIndex\";\r\n    EditorOption[EditorOption[\"unicodeHighlighting\"] = 124] = \"unicodeHighlighting\";\r\n    EditorOption[EditorOption[\"unusualLineTerminators\"] = 125] = \"unusualLineTerminators\";\r\n    EditorOption[EditorOption[\"useShadowDOM\"] = 126] = \"useShadowDOM\";\r\n    EditorOption[EditorOption[\"useTabStops\"] = 127] = \"useTabStops\";\r\n    EditorOption[EditorOption[\"wordBreak\"] = 128] = \"wordBreak\";\r\n    EditorOption[EditorOption[\"wordSeparators\"] = 129] = \"wordSeparators\";\r\n    EditorOption[EditorOption[\"wordWrap\"] = 130] = \"wordWrap\";\r\n    EditorOption[EditorOption[\"wordWrapBreakAfterCharacters\"] = 131] = \"wordWrapBreakAfterCharacters\";\r\n    EditorOption[EditorOption[\"wordWrapBreakBeforeCharacters\"] = 132] = \"wordWrapBreakBeforeCharacters\";\r\n    EditorOption[EditorOption[\"wordWrapColumn\"] = 133] = \"wordWrapColumn\";\r\n    EditorOption[EditorOption[\"wordWrapOverride1\"] = 134] = \"wordWrapOverride1\";\r\n    EditorOption[EditorOption[\"wordWrapOverride2\"] = 135] = \"wordWrapOverride2\";\r\n    EditorOption[EditorOption[\"wrappingIndent\"] = 136] = \"wrappingIndent\";\r\n    EditorOption[EditorOption[\"wrappingStrategy\"] = 137] = \"wrappingStrategy\";\r\n    EditorOption[EditorOption[\"showDeprecated\"] = 138] = \"showDeprecated\";\r\n    EditorOption[EditorOption[\"inlayHints\"] = 139] = \"inlayHints\";\r\n    EditorOption[EditorOption[\"editorClassName\"] = 140] = \"editorClassName\";\r\n    EditorOption[EditorOption[\"pixelRatio\"] = 141] = \"pixelRatio\";\r\n    EditorOption[EditorOption[\"tabFocusMode\"] = 142] = \"tabFocusMode\";\r\n    EditorOption[EditorOption[\"layoutInfo\"] = 143] = \"layoutInfo\";\r\n    EditorOption[EditorOption[\"wrappingInfo\"] = 144] = \"wrappingInfo\";\r\n    EditorOption[EditorOption[\"defaultColorDecorators\"] = 145] = \"defaultColorDecorators\";\r\n    EditorOption[EditorOption[\"colorDecoratorsActivatedOn\"] = 146] = \"colorDecoratorsActivatedOn\";\r\n    EditorOption[EditorOption[\"inlineCompletionsAccessibilityVerbose\"] = 147] = \"inlineCompletionsAccessibilityVerbose\";\r\n})(EditorOption || (EditorOption = {}));\r\n/**\r\n * End of line character preference.\r\n */\r\nexport var EndOfLinePreference;\r\n(function (EndOfLinePreference) {\r\n    /**\r\n     * Use the end of line character identified in the text buffer.\r\n     */\r\n    EndOfLinePreference[EndOfLinePreference[\"TextDefined\"] = 0] = \"TextDefined\";\r\n    /**\r\n     * Use line feed (\\n) as the end of line character.\r\n     */\r\n    EndOfLinePreference[EndOfLinePreference[\"LF\"] = 1] = \"LF\";\r\n    /**\r\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\r\n     */\r\n    EndOfLinePreference[EndOfLinePreference[\"CRLF\"] = 2] = \"CRLF\";\r\n})(EndOfLinePreference || (EndOfLinePreference = {}));\r\n/**\r\n * End of line character preference.\r\n */\r\nexport var EndOfLineSequence;\r\n(function (EndOfLineSequence) {\r\n    /**\r\n     * Use line feed (\\n) as the end of line character.\r\n     */\r\n    EndOfLineSequence[EndOfLineSequence[\"LF\"] = 0] = \"LF\";\r\n    /**\r\n     * Use carriage return and line feed (\\r\\n) as the end of line character.\r\n     */\r\n    EndOfLineSequence[EndOfLineSequence[\"CRLF\"] = 1] = \"CRLF\";\r\n})(EndOfLineSequence || (EndOfLineSequence = {}));\r\n/**\r\n * Vertical Lane in the glyph margin of the editor.\r\n */\r\nexport var GlyphMarginLane;\r\n(function (GlyphMarginLane) {\r\n    GlyphMarginLane[GlyphMarginLane[\"Left\"] = 1] = \"Left\";\r\n    GlyphMarginLane[GlyphMarginLane[\"Right\"] = 2] = \"Right\";\r\n})(GlyphMarginLane || (GlyphMarginLane = {}));\r\n/**\r\n * Describes what to do with the indentation when pressing Enter.\r\n */\r\nexport var IndentAction;\r\n(function (IndentAction) {\r\n    /**\r\n     * Insert new line and copy the previous line's indentation.\r\n     */\r\n    IndentAction[IndentAction[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Insert new line and indent once (relative to the previous line's indentation).\r\n     */\r\n    IndentAction[IndentAction[\"Indent\"] = 1] = \"Indent\";\r\n    /**\r\n     * Insert two new lines:\r\n     *  - the first one indented which will hold the cursor\r\n     *  - the second one at the same indentation level\r\n     */\r\n    IndentAction[IndentAction[\"IndentOutdent\"] = 2] = \"IndentOutdent\";\r\n    /**\r\n     * Insert new line and outdent once (relative to the previous line's indentation).\r\n     */\r\n    IndentAction[IndentAction[\"Outdent\"] = 3] = \"Outdent\";\r\n})(IndentAction || (IndentAction = {}));\r\nexport var InjectedTextCursorStops;\r\n(function (InjectedTextCursorStops) {\r\n    InjectedTextCursorStops[InjectedTextCursorStops[\"Both\"] = 0] = \"Both\";\r\n    InjectedTextCursorStops[InjectedTextCursorStops[\"Right\"] = 1] = \"Right\";\r\n    InjectedTextCursorStops[InjectedTextCursorStops[\"Left\"] = 2] = \"Left\";\r\n    InjectedTextCursorStops[InjectedTextCursorStops[\"None\"] = 3] = \"None\";\r\n})(InjectedTextCursorStops || (InjectedTextCursorStops = {}));\r\nexport var InlayHintKind;\r\n(function (InlayHintKind) {\r\n    InlayHintKind[InlayHintKind[\"Type\"] = 1] = \"Type\";\r\n    InlayHintKind[InlayHintKind[\"Parameter\"] = 2] = \"Parameter\";\r\n})(InlayHintKind || (InlayHintKind = {}));\r\n/**\r\n * How an {@link InlineCompletionsProvider inline completion provider} was triggered.\r\n */\r\nexport var InlineCompletionTriggerKind;\r\n(function (InlineCompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered automatically while editing.\r\n     * It is sufficient to return a single completion item in this case.\r\n     */\r\n    InlineCompletionTriggerKind[InlineCompletionTriggerKind[\"Automatic\"] = 0] = \"Automatic\";\r\n    /**\r\n     * Completion was triggered explicitly by a user gesture.\r\n     * Return multiple completion items to enable cycling through them.\r\n     */\r\n    InlineCompletionTriggerKind[InlineCompletionTriggerKind[\"Explicit\"] = 1] = \"Explicit\";\r\n})(InlineCompletionTriggerKind || (InlineCompletionTriggerKind = {}));\r\n/**\r\n * Virtual Key Codes, the value does not hold any inherent meaning.\r\n * Inspired somewhat from https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx\r\n * But these are \"more general\", as they should work across browsers & OS`s.\r\n */\r\nexport var KeyCode;\r\n(function (KeyCode) {\r\n    KeyCode[KeyCode[\"DependsOnKbLayout\"] = -1] = \"DependsOnKbLayout\";\r\n    /**\r\n     * Placed first to cover the 0 value of the enum.\r\n     */\r\n    KeyCode[KeyCode[\"Unknown\"] = 0] = \"Unknown\";\r\n    KeyCode[KeyCode[\"Backspace\"] = 1] = \"Backspace\";\r\n    KeyCode[KeyCode[\"Tab\"] = 2] = \"Tab\";\r\n    KeyCode[KeyCode[\"Enter\"] = 3] = \"Enter\";\r\n    KeyCode[KeyCode[\"Shift\"] = 4] = \"Shift\";\r\n    KeyCode[KeyCode[\"Ctrl\"] = 5] = \"Ctrl\";\r\n    KeyCode[KeyCode[\"Alt\"] = 6] = \"Alt\";\r\n    KeyCode[KeyCode[\"PauseBreak\"] = 7] = \"PauseBreak\";\r\n    KeyCode[KeyCode[\"CapsLock\"] = 8] = \"CapsLock\";\r\n    KeyCode[KeyCode[\"Escape\"] = 9] = \"Escape\";\r\n    KeyCode[KeyCode[\"Space\"] = 10] = \"Space\";\r\n    KeyCode[KeyCode[\"PageUp\"] = 11] = \"PageUp\";\r\n    KeyCode[KeyCode[\"PageDown\"] = 12] = \"PageDown\";\r\n    KeyCode[KeyCode[\"End\"] = 13] = \"End\";\r\n    KeyCode[KeyCode[\"Home\"] = 14] = \"Home\";\r\n    KeyCode[KeyCode[\"LeftArrow\"] = 15] = \"LeftArrow\";\r\n    KeyCode[KeyCode[\"UpArrow\"] = 16] = \"UpArrow\";\r\n    KeyCode[KeyCode[\"RightArrow\"] = 17] = \"RightArrow\";\r\n    KeyCode[KeyCode[\"DownArrow\"] = 18] = \"DownArrow\";\r\n    KeyCode[KeyCode[\"Insert\"] = 19] = \"Insert\";\r\n    KeyCode[KeyCode[\"Delete\"] = 20] = \"Delete\";\r\n    KeyCode[KeyCode[\"Digit0\"] = 21] = \"Digit0\";\r\n    KeyCode[KeyCode[\"Digit1\"] = 22] = \"Digit1\";\r\n    KeyCode[KeyCode[\"Digit2\"] = 23] = \"Digit2\";\r\n    KeyCode[KeyCode[\"Digit3\"] = 24] = \"Digit3\";\r\n    KeyCode[KeyCode[\"Digit4\"] = 25] = \"Digit4\";\r\n    KeyCode[KeyCode[\"Digit5\"] = 26] = \"Digit5\";\r\n    KeyCode[KeyCode[\"Digit6\"] = 27] = \"Digit6\";\r\n    KeyCode[KeyCode[\"Digit7\"] = 28] = \"Digit7\";\r\n    KeyCode[KeyCode[\"Digit8\"] = 29] = \"Digit8\";\r\n    KeyCode[KeyCode[\"Digit9\"] = 30] = \"Digit9\";\r\n    KeyCode[KeyCode[\"KeyA\"] = 31] = \"KeyA\";\r\n    KeyCode[KeyCode[\"KeyB\"] = 32] = \"KeyB\";\r\n    KeyCode[KeyCode[\"KeyC\"] = 33] = \"KeyC\";\r\n    KeyCode[KeyCode[\"KeyD\"] = 34] = \"KeyD\";\r\n    KeyCode[KeyCode[\"KeyE\"] = 35] = \"KeyE\";\r\n    KeyCode[KeyCode[\"KeyF\"] = 36] = \"KeyF\";\r\n    KeyCode[KeyCode[\"KeyG\"] = 37] = \"KeyG\";\r\n    KeyCode[KeyCode[\"KeyH\"] = 38] = \"KeyH\";\r\n    KeyCode[KeyCode[\"KeyI\"] = 39] = \"KeyI\";\r\n    KeyCode[KeyCode[\"KeyJ\"] = 40] = \"KeyJ\";\r\n    KeyCode[KeyCode[\"KeyK\"] = 41] = \"KeyK\";\r\n    KeyCode[KeyCode[\"KeyL\"] = 42] = \"KeyL\";\r\n    KeyCode[KeyCode[\"KeyM\"] = 43] = \"KeyM\";\r\n    KeyCode[KeyCode[\"KeyN\"] = 44] = \"KeyN\";\r\n    KeyCode[KeyCode[\"KeyO\"] = 45] = \"KeyO\";\r\n    KeyCode[KeyCode[\"KeyP\"] = 46] = \"KeyP\";\r\n    KeyCode[KeyCode[\"KeyQ\"] = 47] = \"KeyQ\";\r\n    KeyCode[KeyCode[\"KeyR\"] = 48] = \"KeyR\";\r\n    KeyCode[KeyCode[\"KeyS\"] = 49] = \"KeyS\";\r\n    KeyCode[KeyCode[\"KeyT\"] = 50] = \"KeyT\";\r\n    KeyCode[KeyCode[\"KeyU\"] = 51] = \"KeyU\";\r\n    KeyCode[KeyCode[\"KeyV\"] = 52] = \"KeyV\";\r\n    KeyCode[KeyCode[\"KeyW\"] = 53] = \"KeyW\";\r\n    KeyCode[KeyCode[\"KeyX\"] = 54] = \"KeyX\";\r\n    KeyCode[KeyCode[\"KeyY\"] = 55] = \"KeyY\";\r\n    KeyCode[KeyCode[\"KeyZ\"] = 56] = \"KeyZ\";\r\n    KeyCode[KeyCode[\"Meta\"] = 57] = \"Meta\";\r\n    KeyCode[KeyCode[\"ContextMenu\"] = 58] = \"ContextMenu\";\r\n    KeyCode[KeyCode[\"F1\"] = 59] = \"F1\";\r\n    KeyCode[KeyCode[\"F2\"] = 60] = \"F2\";\r\n    KeyCode[KeyCode[\"F3\"] = 61] = \"F3\";\r\n    KeyCode[KeyCode[\"F4\"] = 62] = \"F4\";\r\n    KeyCode[KeyCode[\"F5\"] = 63] = \"F5\";\r\n    KeyCode[KeyCode[\"F6\"] = 64] = \"F6\";\r\n    KeyCode[KeyCode[\"F7\"] = 65] = \"F7\";\r\n    KeyCode[KeyCode[\"F8\"] = 66] = \"F8\";\r\n    KeyCode[KeyCode[\"F9\"] = 67] = \"F9\";\r\n    KeyCode[KeyCode[\"F10\"] = 68] = \"F10\";\r\n    KeyCode[KeyCode[\"F11\"] = 69] = \"F11\";\r\n    KeyCode[KeyCode[\"F12\"] = 70] = \"F12\";\r\n    KeyCode[KeyCode[\"F13\"] = 71] = \"F13\";\r\n    KeyCode[KeyCode[\"F14\"] = 72] = \"F14\";\r\n    KeyCode[KeyCode[\"F15\"] = 73] = \"F15\";\r\n    KeyCode[KeyCode[\"F16\"] = 74] = \"F16\";\r\n    KeyCode[KeyCode[\"F17\"] = 75] = \"F17\";\r\n    KeyCode[KeyCode[\"F18\"] = 76] = \"F18\";\r\n    KeyCode[KeyCode[\"F19\"] = 77] = \"F19\";\r\n    KeyCode[KeyCode[\"F20\"] = 78] = \"F20\";\r\n    KeyCode[KeyCode[\"F21\"] = 79] = \"F21\";\r\n    KeyCode[KeyCode[\"F22\"] = 80] = \"F22\";\r\n    KeyCode[KeyCode[\"F23\"] = 81] = \"F23\";\r\n    KeyCode[KeyCode[\"F24\"] = 82] = \"F24\";\r\n    KeyCode[KeyCode[\"NumLock\"] = 83] = \"NumLock\";\r\n    KeyCode[KeyCode[\"ScrollLock\"] = 84] = \"ScrollLock\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the ';:' key\r\n     */\r\n    KeyCode[KeyCode[\"Semicolon\"] = 85] = \"Semicolon\";\r\n    /**\r\n     * For any country/region, the '+' key\r\n     * For the US standard keyboard, the '=+' key\r\n     */\r\n    KeyCode[KeyCode[\"Equal\"] = 86] = \"Equal\";\r\n    /**\r\n     * For any country/region, the ',' key\r\n     * For the US standard keyboard, the ',<' key\r\n     */\r\n    KeyCode[KeyCode[\"Comma\"] = 87] = \"Comma\";\r\n    /**\r\n     * For any country/region, the '-' key\r\n     * For the US standard keyboard, the '-_' key\r\n     */\r\n    KeyCode[KeyCode[\"Minus\"] = 88] = \"Minus\";\r\n    /**\r\n     * For any country/region, the '.' key\r\n     * For the US standard keyboard, the '.>' key\r\n     */\r\n    KeyCode[KeyCode[\"Period\"] = 89] = \"Period\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '/?' key\r\n     */\r\n    KeyCode[KeyCode[\"Slash\"] = 90] = \"Slash\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '`~' key\r\n     */\r\n    KeyCode[KeyCode[\"Backquote\"] = 91] = \"Backquote\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '[{' key\r\n     */\r\n    KeyCode[KeyCode[\"BracketLeft\"] = 92] = \"BracketLeft\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the '\\|' key\r\n     */\r\n    KeyCode[KeyCode[\"Backslash\"] = 93] = \"Backslash\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the ']}' key\r\n     */\r\n    KeyCode[KeyCode[\"BracketRight\"] = 94] = \"BracketRight\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     * For the US standard keyboard, the ''\"' key\r\n     */\r\n    KeyCode[KeyCode[\"Quote\"] = 95] = \"Quote\";\r\n    /**\r\n     * Used for miscellaneous characters; it can vary by keyboard.\r\n     */\r\n    KeyCode[KeyCode[\"OEM_8\"] = 96] = \"OEM_8\";\r\n    /**\r\n     * Either the angle bracket key or the backslash key on the RT 102-key keyboard.\r\n     */\r\n    KeyCode[KeyCode[\"IntlBackslash\"] = 97] = \"IntlBackslash\";\r\n    KeyCode[KeyCode[\"Numpad0\"] = 98] = \"Numpad0\";\r\n    KeyCode[KeyCode[\"Numpad1\"] = 99] = \"Numpad1\";\r\n    KeyCode[KeyCode[\"Numpad2\"] = 100] = \"Numpad2\";\r\n    KeyCode[KeyCode[\"Numpad3\"] = 101] = \"Numpad3\";\r\n    KeyCode[KeyCode[\"Numpad4\"] = 102] = \"Numpad4\";\r\n    KeyCode[KeyCode[\"Numpad5\"] = 103] = \"Numpad5\";\r\n    KeyCode[KeyCode[\"Numpad6\"] = 104] = \"Numpad6\";\r\n    KeyCode[KeyCode[\"Numpad7\"] = 105] = \"Numpad7\";\r\n    KeyCode[KeyCode[\"Numpad8\"] = 106] = \"Numpad8\";\r\n    KeyCode[KeyCode[\"Numpad9\"] = 107] = \"Numpad9\";\r\n    KeyCode[KeyCode[\"NumpadMultiply\"] = 108] = \"NumpadMultiply\";\r\n    KeyCode[KeyCode[\"NumpadAdd\"] = 109] = \"NumpadAdd\";\r\n    KeyCode[KeyCode[\"NUMPAD_SEPARATOR\"] = 110] = \"NUMPAD_SEPARATOR\";\r\n    KeyCode[KeyCode[\"NumpadSubtract\"] = 111] = \"NumpadSubtract\";\r\n    KeyCode[KeyCode[\"NumpadDecimal\"] = 112] = \"NumpadDecimal\";\r\n    KeyCode[KeyCode[\"NumpadDivide\"] = 113] = \"NumpadDivide\";\r\n    /**\r\n     * Cover all key codes when IME is processing input.\r\n     */\r\n    KeyCode[KeyCode[\"KEY_IN_COMPOSITION\"] = 114] = \"KEY_IN_COMPOSITION\";\r\n    KeyCode[KeyCode[\"ABNT_C1\"] = 115] = \"ABNT_C1\";\r\n    KeyCode[KeyCode[\"ABNT_C2\"] = 116] = \"ABNT_C2\";\r\n    KeyCode[KeyCode[\"AudioVolumeMute\"] = 117] = \"AudioVolumeMute\";\r\n    KeyCode[KeyCode[\"AudioVolumeUp\"] = 118] = \"AudioVolumeUp\";\r\n    KeyCode[KeyCode[\"AudioVolumeDown\"] = 119] = \"AudioVolumeDown\";\r\n    KeyCode[KeyCode[\"BrowserSearch\"] = 120] = \"BrowserSearch\";\r\n    KeyCode[KeyCode[\"BrowserHome\"] = 121] = \"BrowserHome\";\r\n    KeyCode[KeyCode[\"BrowserBack\"] = 122] = \"BrowserBack\";\r\n    KeyCode[KeyCode[\"BrowserForward\"] = 123] = \"BrowserForward\";\r\n    KeyCode[KeyCode[\"MediaTrackNext\"] = 124] = \"MediaTrackNext\";\r\n    KeyCode[KeyCode[\"MediaTrackPrevious\"] = 125] = \"MediaTrackPrevious\";\r\n    KeyCode[KeyCode[\"MediaStop\"] = 126] = \"MediaStop\";\r\n    KeyCode[KeyCode[\"MediaPlayPause\"] = 127] = \"MediaPlayPause\";\r\n    KeyCode[KeyCode[\"LaunchMediaPlayer\"] = 128] = \"LaunchMediaPlayer\";\r\n    KeyCode[KeyCode[\"LaunchMail\"] = 129] = \"LaunchMail\";\r\n    KeyCode[KeyCode[\"LaunchApp2\"] = 130] = \"LaunchApp2\";\r\n    /**\r\n     * VK_CLEAR, 0x0C, CLEAR key\r\n     */\r\n    KeyCode[KeyCode[\"Clear\"] = 131] = \"Clear\";\r\n    /**\r\n     * Placed last to cover the length of the enum.\r\n     * Please do not depend on this value!\r\n     */\r\n    KeyCode[KeyCode[\"MAX_VALUE\"] = 132] = \"MAX_VALUE\";\r\n})(KeyCode || (KeyCode = {}));\r\nexport var MarkerSeverity;\r\n(function (MarkerSeverity) {\r\n    MarkerSeverity[MarkerSeverity[\"Hint\"] = 1] = \"Hint\";\r\n    MarkerSeverity[MarkerSeverity[\"Info\"] = 2] = \"Info\";\r\n    MarkerSeverity[MarkerSeverity[\"Warning\"] = 4] = \"Warning\";\r\n    MarkerSeverity[MarkerSeverity[\"Error\"] = 8] = \"Error\";\r\n})(MarkerSeverity || (MarkerSeverity = {}));\r\nexport var MarkerTag;\r\n(function (MarkerTag) {\r\n    MarkerTag[MarkerTag[\"Unnecessary\"] = 1] = \"Unnecessary\";\r\n    MarkerTag[MarkerTag[\"Deprecated\"] = 2] = \"Deprecated\";\r\n})(MarkerTag || (MarkerTag = {}));\r\n/**\r\n * Position in the minimap to render the decoration.\r\n */\r\nexport var MinimapPosition;\r\n(function (MinimapPosition) {\r\n    MinimapPosition[MinimapPosition[\"Inline\"] = 1] = \"Inline\";\r\n    MinimapPosition[MinimapPosition[\"Gutter\"] = 2] = \"Gutter\";\r\n})(MinimapPosition || (MinimapPosition = {}));\r\n/**\r\n * Type of hit element with the mouse in the editor.\r\n */\r\nexport var MouseTargetType;\r\n(function (MouseTargetType) {\r\n    /**\r\n     * Mouse is on top of an unknown element.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\r\n    /**\r\n     * Mouse is on top of the textarea used for input.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"TEXTAREA\"] = 1] = \"TEXTAREA\";\r\n    /**\r\n     * Mouse is on top of the glyph margin\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_GLYPH_MARGIN\"] = 2] = \"GUTTER_GLYPH_MARGIN\";\r\n    /**\r\n     * Mouse is on top of the line numbers\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_LINE_NUMBERS\"] = 3] = \"GUTTER_LINE_NUMBERS\";\r\n    /**\r\n     * Mouse is on top of the line decorations\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_LINE_DECORATIONS\"] = 4] = \"GUTTER_LINE_DECORATIONS\";\r\n    /**\r\n     * Mouse is on top of the whitespace left in the gutter by a view zone.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"GUTTER_VIEW_ZONE\"] = 5] = \"GUTTER_VIEW_ZONE\";\r\n    /**\r\n     * Mouse is on top of text in the content.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_TEXT\"] = 6] = \"CONTENT_TEXT\";\r\n    /**\r\n     * Mouse is on top of empty space in the content (e.g. after line text or below last line)\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_EMPTY\"] = 7] = \"CONTENT_EMPTY\";\r\n    /**\r\n     * Mouse is on top of a view zone in the content.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_VIEW_ZONE\"] = 8] = \"CONTENT_VIEW_ZONE\";\r\n    /**\r\n     * Mouse is on top of a content widget.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"CONTENT_WIDGET\"] = 9] = \"CONTENT_WIDGET\";\r\n    /**\r\n     * Mouse is on top of the decorations overview ruler.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"OVERVIEW_RULER\"] = 10] = \"OVERVIEW_RULER\";\r\n    /**\r\n     * Mouse is on top of a scrollbar.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"SCROLLBAR\"] = 11] = \"SCROLLBAR\";\r\n    /**\r\n     * Mouse is on top of an overlay widget.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"OVERLAY_WIDGET\"] = 12] = \"OVERLAY_WIDGET\";\r\n    /**\r\n     * Mouse is outside of the editor.\r\n     */\r\n    MouseTargetType[MouseTargetType[\"OUTSIDE_EDITOR\"] = 13] = \"OUTSIDE_EDITOR\";\r\n})(MouseTargetType || (MouseTargetType = {}));\r\n/**\r\n * A positioning preference for rendering overlay widgets.\r\n */\r\nexport var OverlayWidgetPositionPreference;\r\n(function (OverlayWidgetPositionPreference) {\r\n    /**\r\n     * Position the overlay widget in the top right corner\r\n     */\r\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"TOP_RIGHT_CORNER\"] = 0] = \"TOP_RIGHT_CORNER\";\r\n    /**\r\n     * Position the overlay widget in the bottom right corner\r\n     */\r\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"BOTTOM_RIGHT_CORNER\"] = 1] = \"BOTTOM_RIGHT_CORNER\";\r\n    /**\r\n     * Position the overlay widget in the top center\r\n     */\r\n    OverlayWidgetPositionPreference[OverlayWidgetPositionPreference[\"TOP_CENTER\"] = 2] = \"TOP_CENTER\";\r\n})(OverlayWidgetPositionPreference || (OverlayWidgetPositionPreference = {}));\r\n/**\r\n * Vertical Lane in the overview ruler of the editor.\r\n */\r\nexport var OverviewRulerLane;\r\n(function (OverviewRulerLane) {\r\n    OverviewRulerLane[OverviewRulerLane[\"Left\"] = 1] = \"Left\";\r\n    OverviewRulerLane[OverviewRulerLane[\"Center\"] = 2] = \"Center\";\r\n    OverviewRulerLane[OverviewRulerLane[\"Right\"] = 4] = \"Right\";\r\n    OverviewRulerLane[OverviewRulerLane[\"Full\"] = 7] = \"Full\";\r\n})(OverviewRulerLane || (OverviewRulerLane = {}));\r\nexport var PositionAffinity;\r\n(function (PositionAffinity) {\r\n    /**\r\n     * Prefers the left most position.\r\n    */\r\n    PositionAffinity[PositionAffinity[\"Left\"] = 0] = \"Left\";\r\n    /**\r\n     * Prefers the right most position.\r\n    */\r\n    PositionAffinity[PositionAffinity[\"Right\"] = 1] = \"Right\";\r\n    /**\r\n     * No preference.\r\n    */\r\n    PositionAffinity[PositionAffinity[\"None\"] = 2] = \"None\";\r\n    /**\r\n     * If the given position is on injected text, prefers the position left of it.\r\n    */\r\n    PositionAffinity[PositionAffinity[\"LeftOfInjectedText\"] = 3] = \"LeftOfInjectedText\";\r\n    /**\r\n     * If the given position is on injected text, prefers the position right of it.\r\n    */\r\n    PositionAffinity[PositionAffinity[\"RightOfInjectedText\"] = 4] = \"RightOfInjectedText\";\r\n})(PositionAffinity || (PositionAffinity = {}));\r\nexport var RenderLineNumbersType;\r\n(function (RenderLineNumbersType) {\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Off\"] = 0] = \"Off\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"On\"] = 1] = \"On\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Relative\"] = 2] = \"Relative\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Interval\"] = 3] = \"Interval\";\r\n    RenderLineNumbersType[RenderLineNumbersType[\"Custom\"] = 4] = \"Custom\";\r\n})(RenderLineNumbersType || (RenderLineNumbersType = {}));\r\nexport var RenderMinimap;\r\n(function (RenderMinimap) {\r\n    RenderMinimap[RenderMinimap[\"None\"] = 0] = \"None\";\r\n    RenderMinimap[RenderMinimap[\"Text\"] = 1] = \"Text\";\r\n    RenderMinimap[RenderMinimap[\"Blocks\"] = 2] = \"Blocks\";\r\n})(RenderMinimap || (RenderMinimap = {}));\r\nexport var ScrollType;\r\n(function (ScrollType) {\r\n    ScrollType[ScrollType[\"Smooth\"] = 0] = \"Smooth\";\r\n    ScrollType[ScrollType[\"Immediate\"] = 1] = \"Immediate\";\r\n})(ScrollType || (ScrollType = {}));\r\nexport var ScrollbarVisibility;\r\n(function (ScrollbarVisibility) {\r\n    ScrollbarVisibility[ScrollbarVisibility[\"Auto\"] = 1] = \"Auto\";\r\n    ScrollbarVisibility[ScrollbarVisibility[\"Hidden\"] = 2] = \"Hidden\";\r\n    ScrollbarVisibility[ScrollbarVisibility[\"Visible\"] = 3] = \"Visible\";\r\n})(ScrollbarVisibility || (ScrollbarVisibility = {}));\r\n/**\r\n * The direction of a selection.\r\n */\r\nexport var SelectionDirection;\r\n(function (SelectionDirection) {\r\n    /**\r\n     * The selection starts above where it ends.\r\n     */\r\n    SelectionDirection[SelectionDirection[\"LTR\"] = 0] = \"LTR\";\r\n    /**\r\n     * The selection starts below where it ends.\r\n     */\r\n    SelectionDirection[SelectionDirection[\"RTL\"] = 1] = \"RTL\";\r\n})(SelectionDirection || (SelectionDirection = {}));\r\nexport var ShowAiIconMode;\r\n(function (ShowAiIconMode) {\r\n    ShowAiIconMode[\"Off\"] = \"off\";\r\n    ShowAiIconMode[\"OnCode\"] = \"onCode\";\r\n    ShowAiIconMode[\"On\"] = \"on\";\r\n})(ShowAiIconMode || (ShowAiIconMode = {}));\r\nexport var SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"Invoke\"] = 1] = \"Invoke\";\r\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"TriggerCharacter\"] = 2] = \"TriggerCharacter\";\r\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"ContentChange\"] = 3] = \"ContentChange\";\r\n})(SignatureHelpTriggerKind || (SignatureHelpTriggerKind = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind[SymbolKind[\"File\"] = 0] = \"File\";\r\n    SymbolKind[SymbolKind[\"Module\"] = 1] = \"Module\";\r\n    SymbolKind[SymbolKind[\"Namespace\"] = 2] = \"Namespace\";\r\n    SymbolKind[SymbolKind[\"Package\"] = 3] = \"Package\";\r\n    SymbolKind[SymbolKind[\"Class\"] = 4] = \"Class\";\r\n    SymbolKind[SymbolKind[\"Method\"] = 5] = \"Method\";\r\n    SymbolKind[SymbolKind[\"Property\"] = 6] = \"Property\";\r\n    SymbolKind[SymbolKind[\"Field\"] = 7] = \"Field\";\r\n    SymbolKind[SymbolKind[\"Constructor\"] = 8] = \"Constructor\";\r\n    SymbolKind[SymbolKind[\"Enum\"] = 9] = \"Enum\";\r\n    SymbolKind[SymbolKind[\"Interface\"] = 10] = \"Interface\";\r\n    SymbolKind[SymbolKind[\"Function\"] = 11] = \"Function\";\r\n    SymbolKind[SymbolKind[\"Variable\"] = 12] = \"Variable\";\r\n    SymbolKind[SymbolKind[\"Constant\"] = 13] = \"Constant\";\r\n    SymbolKind[SymbolKind[\"String\"] = 14] = \"String\";\r\n    SymbolKind[SymbolKind[\"Number\"] = 15] = \"Number\";\r\n    SymbolKind[SymbolKind[\"Boolean\"] = 16] = \"Boolean\";\r\n    SymbolKind[SymbolKind[\"Array\"] = 17] = \"Array\";\r\n    SymbolKind[SymbolKind[\"Object\"] = 18] = \"Object\";\r\n    SymbolKind[SymbolKind[\"Key\"] = 19] = \"Key\";\r\n    SymbolKind[SymbolKind[\"Null\"] = 20] = \"Null\";\r\n    SymbolKind[SymbolKind[\"EnumMember\"] = 21] = \"EnumMember\";\r\n    SymbolKind[SymbolKind[\"Struct\"] = 22] = \"Struct\";\r\n    SymbolKind[SymbolKind[\"Event\"] = 23] = \"Event\";\r\n    SymbolKind[SymbolKind[\"Operator\"] = 24] = \"Operator\";\r\n    SymbolKind[SymbolKind[\"TypeParameter\"] = 25] = \"TypeParameter\";\r\n})(SymbolKind || (SymbolKind = {}));\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    SymbolTag[SymbolTag[\"Deprecated\"] = 1] = \"Deprecated\";\r\n})(SymbolTag || (SymbolTag = {}));\r\n/**\r\n * The kind of animation in which the editor's cursor should be rendered.\r\n */\r\nexport var TextEditorCursorBlinkingStyle;\r\n(function (TextEditorCursorBlinkingStyle) {\r\n    /**\r\n     * Hidden\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Hidden\"] = 0] = \"Hidden\";\r\n    /**\r\n     * Blinking\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Blink\"] = 1] = \"Blink\";\r\n    /**\r\n     * Blinking with smooth fading\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Smooth\"] = 2] = \"Smooth\";\r\n    /**\r\n     * Blinking with prolonged filled state and smooth fading\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Phase\"] = 3] = \"Phase\";\r\n    /**\r\n     * Expand collapse animation on the y axis\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Expand\"] = 4] = \"Expand\";\r\n    /**\r\n     * No-Blinking\r\n     */\r\n    TextEditorCursorBlinkingStyle[TextEditorCursorBlinkingStyle[\"Solid\"] = 5] = \"Solid\";\r\n})(TextEditorCursorBlinkingStyle || (TextEditorCursorBlinkingStyle = {}));\r\n/**\r\n * The style in which the editor's cursor should be rendered.\r\n */\r\nexport var TextEditorCursorStyle;\r\n(function (TextEditorCursorStyle) {\r\n    /**\r\n     * As a vertical line (sitting between two characters).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Line\"] = 1] = \"Line\";\r\n    /**\r\n     * As a block (sitting on top of a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Block\"] = 2] = \"Block\";\r\n    /**\r\n     * As a horizontal line (sitting under a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"Underline\"] = 3] = \"Underline\";\r\n    /**\r\n     * As a thin vertical line (sitting between two characters).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"LineThin\"] = 4] = \"LineThin\";\r\n    /**\r\n     * As an outlined block (sitting on top of a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"BlockOutline\"] = 5] = \"BlockOutline\";\r\n    /**\r\n     * As a thin horizontal line (sitting under a character).\r\n     */\r\n    TextEditorCursorStyle[TextEditorCursorStyle[\"UnderlineThin\"] = 6] = \"UnderlineThin\";\r\n})(TextEditorCursorStyle || (TextEditorCursorStyle = {}));\r\n/**\r\n * Describes the behavior of decorations when typing/editing near their edges.\r\n * Note: Please do not edit the values, as they very carefully match `DecorationRangeBehavior`\r\n */\r\nexport var TrackedRangeStickiness;\r\n(function (TrackedRangeStickiness) {\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"AlwaysGrowsWhenTypingAtEdges\"] = 0] = \"AlwaysGrowsWhenTypingAtEdges\";\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"NeverGrowsWhenTypingAtEdges\"] = 1] = \"NeverGrowsWhenTypingAtEdges\";\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"GrowsOnlyWhenTypingBefore\"] = 2] = \"GrowsOnlyWhenTypingBefore\";\r\n    TrackedRangeStickiness[TrackedRangeStickiness[\"GrowsOnlyWhenTypingAfter\"] = 3] = \"GrowsOnlyWhenTypingAfter\";\r\n})(TrackedRangeStickiness || (TrackedRangeStickiness = {}));\r\n/**\r\n * Describes how to indent wrapped lines.\r\n */\r\nexport var WrappingIndent;\r\n(function (WrappingIndent) {\r\n    /**\r\n     * No indentation => wrapped lines begin at column 1.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Same => wrapped lines get the same indentation as the parent.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"Same\"] = 1] = \"Same\";\r\n    /**\r\n     * Indent => wrapped lines get +1 indentation toward the parent.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"Indent\"] = 2] = \"Indent\";\r\n    /**\r\n     * DeepIndent => wrapped lines get +2 indentation toward the parent.\r\n     */\r\n    WrappingIndent[WrappingIndent[\"DeepIndent\"] = 3] = \"DeepIndent\";\r\n})(WrappingIndent || (WrappingIndent = {}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { KeyChord } from '../../../base/common/keyCodes.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { Position } from '../core/position.js';\r\nimport { Range } from '../core/range.js';\r\nimport { Selection } from '../core/selection.js';\r\nimport { Token } from '../languages.js';\r\nimport * as standaloneEnums from '../standalone/standaloneEnums.js';\r\nexport class KeyMod {\r\n    static chord(firstPart, secondPart) {\r\n        return KeyChord(firstPart, secondPart);\r\n    }\r\n}\r\nKeyMod.CtrlCmd = 2048 /* ConstKeyMod.CtrlCmd */;\r\nKeyMod.Shift = 1024 /* ConstKeyMod.Shift */;\r\nKeyMod.Alt = 512 /* ConstKeyMod.Alt */;\r\nKeyMod.WinCtrl = 256 /* ConstKeyMod.WinCtrl */;\r\nexport function createMonacoBaseAPI() {\r\n    return {\r\n        editor: undefined, // undefined override expected here\r\n        languages: undefined, // undefined override expected here\r\n        CancellationTokenSource: CancellationTokenSource,\r\n        Emitter: Emitter,\r\n        KeyCode: standaloneEnums.KeyCode,\r\n        KeyMod: KeyMod,\r\n        Position: Position,\r\n        Range: Range,\r\n        Selection: Selection,\r\n        SelectionDirection: standaloneEnums.SelectionDirection,\r\n        MarkerSeverity: standaloneEnums.MarkerSeverity,\r\n        MarkerTag: standaloneEnums.MarkerTag,\r\n        Uri: URI,\r\n        Token: Token\r\n    };\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { mainWindow } from '../../../base/browser/window.js';\r\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { splitLines } from '../../../base/common/strings.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport './standalone-tokens.css';\r\nimport { FontMeasurements } from '../../browser/config/fontMeasurements.js';\r\nimport { EditorCommand } from '../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { createWebWorker as actualCreateWebWorker } from '../../browser/services/webWorker.js';\r\nimport { ApplyUpdateResult, ConfigurationChangedEvent, EditorOptions } from '../../common/config/editorOptions.js';\r\nimport { EditorZoom } from '../../common/config/editorZoom.js';\r\nimport { BareFontInfo, FontInfo } from '../../common/config/fontInfo.js';\r\nimport { EditorType } from '../../common/editorCommon.js';\r\nimport * as languages from '../../common/languages.js';\r\nimport { ILanguageService } from '../../common/languages/language.js';\r\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\r\nimport { PLAINTEXT_LANGUAGE_ID } from '../../common/languages/modesRegistry.js';\r\nimport { NullState, nullTokenize } from '../../common/languages/nullTokenize.js';\r\nimport { FindMatch, TextModelResolvedOptions } from '../../common/model.js';\r\nimport { IModelService } from '../../common/services/model.js';\r\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\r\nimport { Colorizer } from './colorizer.js';\r\nimport { StandaloneDiffEditor2, StandaloneEditor, createTextModel } from './standaloneCodeEditor.js';\r\nimport { StandaloneKeybindingService, StandaloneServices } from './standaloneServices.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\r\nimport { MenuId, MenuRegistry } from '../../../platform/actions/common/actions.js';\r\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\r\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { MultiDiffEditorWidget } from '../../browser/widget/multiDiffEditorWidget/multiDiffEditorWidget.js';\r\n/**\r\n * Create a new editor under `domElement`.\r\n * `domElement` should be empty (not contain other dom nodes).\r\n * The editor will read the size of `domElement`.\r\n */\r\nexport function create(domElement, options, override) {\r\n    const instantiationService = StandaloneServices.initialize(override || {});\r\n    return instantiationService.createInstance(StandaloneEditor, domElement, options);\r\n}\r\n/**\r\n * Emitted when an editor is created.\r\n * Creating a diff editor might cause this listener to be invoked with the two editors.\r\n * @event\r\n */\r\nexport function onDidCreateEditor(listener) {\r\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\r\n    return codeEditorService.onCodeEditorAdd((editor) => {\r\n        listener(editor);\r\n    });\r\n}\r\n/**\r\n * Emitted when an diff editor is created.\r\n * @event\r\n */\r\nexport function onDidCreateDiffEditor(listener) {\r\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\r\n    return codeEditorService.onDiffEditorAdd((editor) => {\r\n        listener(editor);\r\n    });\r\n}\r\n/**\r\n * Get all the created editors.\r\n */\r\nexport function getEditors() {\r\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\r\n    return codeEditorService.listCodeEditors();\r\n}\r\n/**\r\n * Get all the created diff editors.\r\n */\r\nexport function getDiffEditors() {\r\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\r\n    return codeEditorService.listDiffEditors();\r\n}\r\n/**\r\n * Create a new diff editor under `domElement`.\r\n * `domElement` should be empty (not contain other dom nodes).\r\n * The editor will read the size of `domElement`.\r\n */\r\nexport function createDiffEditor(domElement, options, override) {\r\n    const instantiationService = StandaloneServices.initialize(override || {});\r\n    return instantiationService.createInstance(StandaloneDiffEditor2, domElement, options);\r\n}\r\nexport function createMultiFileDiffEditor(domElement, override) {\r\n    const instantiationService = StandaloneServices.initialize(override || {});\r\n    return new MultiDiffEditorWidget(domElement, {}, instantiationService);\r\n}\r\n/**\r\n * Add a command.\r\n */\r\nexport function addCommand(descriptor) {\r\n    if ((typeof descriptor.id !== 'string') || (typeof descriptor.run !== 'function')) {\r\n        throw new Error('Invalid command descriptor, `id` and `run` are required properties!');\r\n    }\r\n    return CommandsRegistry.registerCommand(descriptor.id, descriptor.run);\r\n}\r\n/**\r\n * Add an action to all editors.\r\n */\r\nexport function addEditorAction(descriptor) {\r\n    if ((typeof descriptor.id !== 'string') || (typeof descriptor.label !== 'string') || (typeof descriptor.run !== 'function')) {\r\n        throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\r\n    }\r\n    const precondition = ContextKeyExpr.deserialize(descriptor.precondition);\r\n    const run = (accessor, ...args) => {\r\n        return EditorCommand.runEditorCommand(accessor, args, precondition, (accessor, editor, args) => Promise.resolve(descriptor.run(editor, ...args)));\r\n    };\r\n    const toDispose = new DisposableStore();\r\n    // Register the command\r\n    toDispose.add(CommandsRegistry.registerCommand(descriptor.id, run));\r\n    // Register the context menu item\r\n    if (descriptor.contextMenuGroupId) {\r\n        const menuItem = {\r\n            command: {\r\n                id: descriptor.id,\r\n                title: descriptor.label\r\n            },\r\n            when: precondition,\r\n            group: descriptor.contextMenuGroupId,\r\n            order: descriptor.contextMenuOrder || 0\r\n        };\r\n        toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\r\n    }\r\n    // Register the keybindings\r\n    if (Array.isArray(descriptor.keybindings)) {\r\n        const keybindingService = StandaloneServices.get(IKeybindingService);\r\n        if (!(keybindingService instanceof StandaloneKeybindingService)) {\r\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\r\n        }\r\n        else {\r\n            const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(descriptor.keybindingContext));\r\n            toDispose.add(keybindingService.addDynamicKeybindings(descriptor.keybindings.map((keybinding) => {\r\n                return {\r\n                    keybinding,\r\n                    command: descriptor.id,\r\n                    when: keybindingsWhen\r\n                };\r\n            })));\r\n        }\r\n    }\r\n    return toDispose;\r\n}\r\n/**\r\n * Add a keybinding rule.\r\n */\r\nexport function addKeybindingRule(rule) {\r\n    return addKeybindingRules([rule]);\r\n}\r\n/**\r\n * Add keybinding rules.\r\n */\r\nexport function addKeybindingRules(rules) {\r\n    const keybindingService = StandaloneServices.get(IKeybindingService);\r\n    if (!(keybindingService instanceof StandaloneKeybindingService)) {\r\n        console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\r\n        return Disposable.None;\r\n    }\r\n    return keybindingService.addDynamicKeybindings(rules.map((rule) => {\r\n        return {\r\n            keybinding: rule.keybinding,\r\n            command: rule.command,\r\n            commandArgs: rule.commandArgs,\r\n            when: ContextKeyExpr.deserialize(rule.when),\r\n        };\r\n    }));\r\n}\r\n/**\r\n * Create a new editor model.\r\n * You can specify the language that should be set for this model or let the language be inferred from the `uri`.\r\n */\r\nexport function createModel(value, language, uri) {\r\n    const languageService = StandaloneServices.get(ILanguageService);\r\n    const languageId = languageService.getLanguageIdByMimeType(language) || language;\r\n    return createTextModel(StandaloneServices.get(IModelService), languageService, value, languageId, uri);\r\n}\r\n/**\r\n * Change the language for a model.\r\n */\r\nexport function setModelLanguage(model, mimeTypeOrLanguageId) {\r\n    const languageService = StandaloneServices.get(ILanguageService);\r\n    const languageId = languageService.getLanguageIdByMimeType(mimeTypeOrLanguageId) || mimeTypeOrLanguageId || PLAINTEXT_LANGUAGE_ID;\r\n    model.setLanguage(languageService.createById(languageId));\r\n}\r\n/**\r\n * Set the markers for a model.\r\n */\r\nexport function setModelMarkers(model, owner, markers) {\r\n    if (model) {\r\n        const markerService = StandaloneServices.get(IMarkerService);\r\n        markerService.changeOne(owner, model.uri, markers);\r\n    }\r\n}\r\n/**\r\n * Remove all markers of an owner.\r\n */\r\nexport function removeAllMarkers(owner) {\r\n    const markerService = StandaloneServices.get(IMarkerService);\r\n    markerService.changeAll(owner, []);\r\n}\r\n/**\r\n * Get markers for owner and/or resource\r\n *\r\n * @returns list of markers\r\n */\r\nexport function getModelMarkers(filter) {\r\n    const markerService = StandaloneServices.get(IMarkerService);\r\n    return markerService.read(filter);\r\n}\r\n/**\r\n * Emitted when markers change for a model.\r\n * @event\r\n */\r\nexport function onDidChangeMarkers(listener) {\r\n    const markerService = StandaloneServices.get(IMarkerService);\r\n    return markerService.onMarkerChanged(listener);\r\n}\r\n/**\r\n * Get the model that has `uri` if it exists.\r\n */\r\nexport function getModel(uri) {\r\n    const modelService = StandaloneServices.get(IModelService);\r\n    return modelService.getModel(uri);\r\n}\r\n/**\r\n * Get all the created models.\r\n */\r\nexport function getModels() {\r\n    const modelService = StandaloneServices.get(IModelService);\r\n    return modelService.getModels();\r\n}\r\n/**\r\n * Emitted when a model is created.\r\n * @event\r\n */\r\nexport function onDidCreateModel(listener) {\r\n    const modelService = StandaloneServices.get(IModelService);\r\n    return modelService.onModelAdded(listener);\r\n}\r\n/**\r\n * Emitted right before a model is disposed.\r\n * @event\r\n */\r\nexport function onWillDisposeModel(listener) {\r\n    const modelService = StandaloneServices.get(IModelService);\r\n    return modelService.onModelRemoved(listener);\r\n}\r\n/**\r\n * Emitted when a different language is set to a model.\r\n * @event\r\n */\r\nexport function onDidChangeModelLanguage(listener) {\r\n    const modelService = StandaloneServices.get(IModelService);\r\n    return modelService.onModelLanguageChanged((e) => {\r\n        listener({\r\n            model: e.model,\r\n            oldLanguage: e.oldLanguageId\r\n        });\r\n    });\r\n}\r\n/**\r\n * Create a new web worker that has model syncing capabilities built in.\r\n * Specify an AMD module to load that will `create` an object that will be proxied.\r\n */\r\nexport function createWebWorker(opts) {\r\n    return actualCreateWebWorker(StandaloneServices.get(IModelService), StandaloneServices.get(ILanguageConfigurationService), opts);\r\n}\r\n/**\r\n * Colorize the contents of `domNode` using attribute `data-lang`.\r\n */\r\nexport function colorizeElement(domNode, options) {\r\n    const languageService = StandaloneServices.get(ILanguageService);\r\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\r\n    return Colorizer.colorizeElement(themeService, languageService, domNode, options).then(() => {\r\n        themeService.registerEditorContainer(domNode);\r\n    });\r\n}\r\n/**\r\n * Colorize `text` using language `languageId`.\r\n */\r\nexport function colorize(text, languageId, options) {\r\n    const languageService = StandaloneServices.get(ILanguageService);\r\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\r\n    themeService.registerEditorContainer(mainWindow.document.body);\r\n    return Colorizer.colorize(languageService, text, languageId, options);\r\n}\r\n/**\r\n * Colorize a line in a model.\r\n */\r\nexport function colorizeModelLine(model, lineNumber, tabSize = 4) {\r\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\r\n    themeService.registerEditorContainer(mainWindow.document.body);\r\n    return Colorizer.colorizeModelLine(model, lineNumber, tabSize);\r\n}\r\n/**\r\n * @internal\r\n */\r\nfunction getSafeTokenizationSupport(language) {\r\n    const tokenizationSupport = languages.TokenizationRegistry.get(language);\r\n    if (tokenizationSupport) {\r\n        return tokenizationSupport;\r\n    }\r\n    return {\r\n        getInitialState: () => NullState,\r\n        tokenize: (line, hasEOL, state) => nullTokenize(language, state)\r\n    };\r\n}\r\n/**\r\n * Tokenize `text` using language `languageId`\r\n */\r\nexport function tokenize(text, languageId) {\r\n    // Needed in order to get the mode registered for subsequent look-ups\r\n    languages.TokenizationRegistry.getOrCreate(languageId);\r\n    const tokenizationSupport = getSafeTokenizationSupport(languageId);\r\n    const lines = splitLines(text);\r\n    const result = [];\r\n    let state = tokenizationSupport.getInitialState();\r\n    for (let i = 0, len = lines.length; i < len; i++) {\r\n        const line = lines[i];\r\n        const tokenizationResult = tokenizationSupport.tokenize(line, true, state);\r\n        result[i] = tokenizationResult.tokens;\r\n        state = tokenizationResult.endState;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Define a new theme or update an existing theme.\r\n */\r\nexport function defineTheme(themeName, themeData) {\r\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\r\n    standaloneThemeService.defineTheme(themeName, themeData);\r\n}\r\n/**\r\n * Switches to a theme.\r\n */\r\nexport function setTheme(themeName) {\r\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\r\n    standaloneThemeService.setTheme(themeName);\r\n}\r\n/**\r\n * Clears all cached font measurements and triggers re-measurement.\r\n */\r\nexport function remeasureFonts() {\r\n    FontMeasurements.clearAllFontInfos();\r\n}\r\n/**\r\n * Register a command.\r\n */\r\nexport function registerCommand(id, handler) {\r\n    return CommandsRegistry.registerCommand({ id, handler });\r\n}\r\n/**\r\n * Registers a handler that is called when a link is opened in any editor. The handler callback should return `true` if the link was handled and `false` otherwise.\r\n * The handler that was registered last will be called first when a link is opened.\r\n *\r\n * Returns a disposable that can unregister the opener again.\r\n */\r\nexport function registerLinkOpener(opener) {\r\n    const openerService = StandaloneServices.get(IOpenerService);\r\n    return openerService.registerOpener({\r\n        async open(resource) {\r\n            if (typeof resource === 'string') {\r\n                resource = URI.parse(resource);\r\n            }\r\n            return opener.open(resource);\r\n        }\r\n    });\r\n}\r\n/**\r\n * Registers a handler that is called when a resource other than the current model should be opened in the editor (e.g. \"go to definition\").\r\n * The handler callback should return `true` if the request was handled and `false` otherwise.\r\n *\r\n * Returns a disposable that can unregister the opener again.\r\n *\r\n * If no handler is registered the default behavior is to do nothing for models other than the currently attached one.\r\n */\r\nexport function registerEditorOpener(opener) {\r\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\r\n    return codeEditorService.registerCodeEditorOpenHandler(async (input, source, sideBySide) => {\r\n        var _a;\r\n        if (!source) {\r\n            return null;\r\n        }\r\n        const selection = (_a = input.options) === null || _a === void 0 ? void 0 : _a.selection;\r\n        let selectionOrPosition;\r\n        if (selection && typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\r\n            selectionOrPosition = selection;\r\n        }\r\n        else if (selection) {\r\n            selectionOrPosition = { lineNumber: selection.startLineNumber, column: selection.startColumn };\r\n        }\r\n        if (await opener.openCodeEditor(source, input.resource, selectionOrPosition)) {\r\n            return source; // return source editor to indicate that this handler has successfully handled the opening\r\n        }\r\n        return null; // fallback to other registered handlers\r\n    });\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function createMonacoEditorAPI() {\r\n    return {\r\n        // methods\r\n        create: create,\r\n        getEditors: getEditors,\r\n        getDiffEditors: getDiffEditors,\r\n        onDidCreateEditor: onDidCreateEditor,\r\n        onDidCreateDiffEditor: onDidCreateDiffEditor,\r\n        createDiffEditor: createDiffEditor,\r\n        addCommand: addCommand,\r\n        addEditorAction: addEditorAction,\r\n        addKeybindingRule: addKeybindingRule,\r\n        addKeybindingRules: addKeybindingRules,\r\n        createModel: createModel,\r\n        setModelLanguage: setModelLanguage,\r\n        setModelMarkers: setModelMarkers,\r\n        getModelMarkers: getModelMarkers,\r\n        removeAllMarkers: removeAllMarkers,\r\n        onDidChangeMarkers: onDidChangeMarkers,\r\n        getModels: getModels,\r\n        getModel: getModel,\r\n        onDidCreateModel: onDidCreateModel,\r\n        onWillDisposeModel: onWillDisposeModel,\r\n        onDidChangeModelLanguage: onDidChangeModelLanguage,\r\n        createWebWorker: createWebWorker,\r\n        colorizeElement: colorizeElement,\r\n        colorize: colorize,\r\n        colorizeModelLine: colorizeModelLine,\r\n        tokenize: tokenize,\r\n        defineTheme: defineTheme,\r\n        setTheme: setTheme,\r\n        remeasureFonts: remeasureFonts,\r\n        registerCommand: registerCommand,\r\n        registerLinkOpener: registerLinkOpener,\r\n        registerEditorOpener: registerEditorOpener,\r\n        // enums\r\n        AccessibilitySupport: standaloneEnums.AccessibilitySupport,\r\n        ContentWidgetPositionPreference: standaloneEnums.ContentWidgetPositionPreference,\r\n        CursorChangeReason: standaloneEnums.CursorChangeReason,\r\n        DefaultEndOfLine: standaloneEnums.DefaultEndOfLine,\r\n        EditorAutoIndentStrategy: standaloneEnums.EditorAutoIndentStrategy,\r\n        EditorOption: standaloneEnums.EditorOption,\r\n        EndOfLinePreference: standaloneEnums.EndOfLinePreference,\r\n        EndOfLineSequence: standaloneEnums.EndOfLineSequence,\r\n        MinimapPosition: standaloneEnums.MinimapPosition,\r\n        MouseTargetType: standaloneEnums.MouseTargetType,\r\n        OverlayWidgetPositionPreference: standaloneEnums.OverlayWidgetPositionPreference,\r\n        OverviewRulerLane: standaloneEnums.OverviewRulerLane,\r\n        GlyphMarginLane: standaloneEnums.GlyphMarginLane,\r\n        RenderLineNumbersType: standaloneEnums.RenderLineNumbersType,\r\n        RenderMinimap: standaloneEnums.RenderMinimap,\r\n        ScrollbarVisibility: standaloneEnums.ScrollbarVisibility,\r\n        ScrollType: standaloneEnums.ScrollType,\r\n        TextEditorCursorBlinkingStyle: standaloneEnums.TextEditorCursorBlinkingStyle,\r\n        TextEditorCursorStyle: standaloneEnums.TextEditorCursorStyle,\r\n        TrackedRangeStickiness: standaloneEnums.TrackedRangeStickiness,\r\n        WrappingIndent: standaloneEnums.WrappingIndent,\r\n        InjectedTextCursorStops: standaloneEnums.InjectedTextCursorStops,\r\n        PositionAffinity: standaloneEnums.PositionAffinity,\r\n        ShowAiIconMode: standaloneEnums.ShowAiIconMode,\r\n        // classes\r\n        ConfigurationChangedEvent: ConfigurationChangedEvent,\r\n        BareFontInfo: BareFontInfo,\r\n        FontInfo: FontInfo,\r\n        TextModelResolvedOptions: TextModelResolvedOptions,\r\n        FindMatch: FindMatch,\r\n        ApplyUpdateResult: ApplyUpdateResult,\r\n        EditorZoom: EditorZoom,\r\n        createMultiFileDiffEditor: createMultiFileDiffEditor,\r\n        // vars\r\n        EditorType: EditorType,\r\n        EditorOptions: EditorOptions\r\n    };\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { transformErrorForSerialization } from '../errors.js';\r\nimport { Emitter } from '../event.js';\r\nimport { Disposable } from '../lifecycle.js';\r\nimport { getAllMethodNames } from '../objects.js';\r\nimport { isWeb } from '../platform.js';\r\nimport * as strings from '../strings.js';\r\nconst INITIALIZE = '$initialize';\r\nlet webWorkerWarningLogged = false;\r\nexport function logOnceWebWorkerWarning(err) {\r\n    if (!isWeb) {\r\n        // running tests\r\n        return;\r\n    }\r\n    if (!webWorkerWarningLogged) {\r\n        webWorkerWarningLogged = true;\r\n        console.warn('Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq');\r\n    }\r\n    console.warn(err.message);\r\n}\r\nclass RequestMessage {\r\n    constructor(vsWorker, req, method, args) {\r\n        this.vsWorker = vsWorker;\r\n        this.req = req;\r\n        this.method = method;\r\n        this.args = args;\r\n        this.type = 0 /* MessageType.Request */;\r\n    }\r\n}\r\nclass ReplyMessage {\r\n    constructor(vsWorker, seq, res, err) {\r\n        this.vsWorker = vsWorker;\r\n        this.seq = seq;\r\n        this.res = res;\r\n        this.err = err;\r\n        this.type = 1 /* MessageType.Reply */;\r\n    }\r\n}\r\nclass SubscribeEventMessage {\r\n    constructor(vsWorker, req, eventName, arg) {\r\n        this.vsWorker = vsWorker;\r\n        this.req = req;\r\n        this.eventName = eventName;\r\n        this.arg = arg;\r\n        this.type = 2 /* MessageType.SubscribeEvent */;\r\n    }\r\n}\r\nclass EventMessage {\r\n    constructor(vsWorker, req, event) {\r\n        this.vsWorker = vsWorker;\r\n        this.req = req;\r\n        this.event = event;\r\n        this.type = 3 /* MessageType.Event */;\r\n    }\r\n}\r\nclass UnsubscribeEventMessage {\r\n    constructor(vsWorker, req) {\r\n        this.vsWorker = vsWorker;\r\n        this.req = req;\r\n        this.type = 4 /* MessageType.UnsubscribeEvent */;\r\n    }\r\n}\r\nclass SimpleWorkerProtocol {\r\n    constructor(handler) {\r\n        this._workerId = -1;\r\n        this._handler = handler;\r\n        this._lastSentReq = 0;\r\n        this._pendingReplies = Object.create(null);\r\n        this._pendingEmitters = new Map();\r\n        this._pendingEvents = new Map();\r\n    }\r\n    setWorkerId(workerId) {\r\n        this._workerId = workerId;\r\n    }\r\n    sendMessage(method, args) {\r\n        const req = String(++this._lastSentReq);\r\n        return new Promise((resolve, reject) => {\r\n            this._pendingReplies[req] = {\r\n                resolve: resolve,\r\n                reject: reject\r\n            };\r\n            this._send(new RequestMessage(this._workerId, req, method, args));\r\n        });\r\n    }\r\n    listen(eventName, arg) {\r\n        let req = null;\r\n        const emitter = new Emitter({\r\n            onWillAddFirstListener: () => {\r\n                req = String(++this._lastSentReq);\r\n                this._pendingEmitters.set(req, emitter);\r\n                this._send(new SubscribeEventMessage(this._workerId, req, eventName, arg));\r\n            },\r\n            onDidRemoveLastListener: () => {\r\n                this._pendingEmitters.delete(req);\r\n                this._send(new UnsubscribeEventMessage(this._workerId, req));\r\n                req = null;\r\n            }\r\n        });\r\n        return emitter.event;\r\n    }\r\n    handleMessage(message) {\r\n        if (!message || !message.vsWorker) {\r\n            return;\r\n        }\r\n        if (this._workerId !== -1 && message.vsWorker !== this._workerId) {\r\n            return;\r\n        }\r\n        this._handleMessage(message);\r\n    }\r\n    _handleMessage(msg) {\r\n        switch (msg.type) {\r\n            case 1 /* MessageType.Reply */:\r\n                return this._handleReplyMessage(msg);\r\n            case 0 /* MessageType.Request */:\r\n                return this._handleRequestMessage(msg);\r\n            case 2 /* MessageType.SubscribeEvent */:\r\n                return this._handleSubscribeEventMessage(msg);\r\n            case 3 /* MessageType.Event */:\r\n                return this._handleEventMessage(msg);\r\n            case 4 /* MessageType.UnsubscribeEvent */:\r\n                return this._handleUnsubscribeEventMessage(msg);\r\n        }\r\n    }\r\n    _handleReplyMessage(replyMessage) {\r\n        if (!this._pendingReplies[replyMessage.seq]) {\r\n            console.warn('Got reply to unknown seq');\r\n            return;\r\n        }\r\n        const reply = this._pendingReplies[replyMessage.seq];\r\n        delete this._pendingReplies[replyMessage.seq];\r\n        if (replyMessage.err) {\r\n            let err = replyMessage.err;\r\n            if (replyMessage.err.$isError) {\r\n                err = new Error();\r\n                err.name = replyMessage.err.name;\r\n                err.message = replyMessage.err.message;\r\n                err.stack = replyMessage.err.stack;\r\n            }\r\n            reply.reject(err);\r\n            return;\r\n        }\r\n        reply.resolve(replyMessage.res);\r\n    }\r\n    _handleRequestMessage(requestMessage) {\r\n        const req = requestMessage.req;\r\n        const result = this._handler.handleMessage(requestMessage.method, requestMessage.args);\r\n        result.then((r) => {\r\n            this._send(new ReplyMessage(this._workerId, req, r, undefined));\r\n        }, (e) => {\r\n            if (e.detail instanceof Error) {\r\n                // Loading errors have a detail property that points to the actual error\r\n                e.detail = transformErrorForSerialization(e.detail);\r\n            }\r\n            this._send(new ReplyMessage(this._workerId, req, undefined, transformErrorForSerialization(e)));\r\n        });\r\n    }\r\n    _handleSubscribeEventMessage(msg) {\r\n        const req = msg.req;\r\n        const disposable = this._handler.handleEvent(msg.eventName, msg.arg)((event) => {\r\n            this._send(new EventMessage(this._workerId, req, event));\r\n        });\r\n        this._pendingEvents.set(req, disposable);\r\n    }\r\n    _handleEventMessage(msg) {\r\n        if (!this._pendingEmitters.has(msg.req)) {\r\n            console.warn('Got event for unknown req');\r\n            return;\r\n        }\r\n        this._pendingEmitters.get(msg.req).fire(msg.event);\r\n    }\r\n    _handleUnsubscribeEventMessage(msg) {\r\n        if (!this._pendingEvents.has(msg.req)) {\r\n            console.warn('Got unsubscribe for unknown req');\r\n            return;\r\n        }\r\n        this._pendingEvents.get(msg.req).dispose();\r\n        this._pendingEvents.delete(msg.req);\r\n    }\r\n    _send(msg) {\r\n        const transfer = [];\r\n        if (msg.type === 0 /* MessageType.Request */) {\r\n            for (let i = 0; i < msg.args.length; i++) {\r\n                if (msg.args[i] instanceof ArrayBuffer) {\r\n                    transfer.push(msg.args[i]);\r\n                }\r\n            }\r\n        }\r\n        else if (msg.type === 1 /* MessageType.Reply */) {\r\n            if (msg.res instanceof ArrayBuffer) {\r\n                transfer.push(msg.res);\r\n            }\r\n        }\r\n        this._handler.sendMessage(msg, transfer);\r\n    }\r\n}\r\n/**\r\n * Main thread side\r\n */\r\nexport class SimpleWorkerClient extends Disposable {\r\n    constructor(workerFactory, moduleId, host) {\r\n        super();\r\n        let lazyProxyReject = null;\r\n        this._worker = this._register(workerFactory.create('vs/base/common/worker/simpleWorker', (msg) => {\r\n            this._protocol.handleMessage(msg);\r\n        }, (err) => {\r\n            // in Firefox, web workers fail lazily :(\r\n            // we will reject the proxy\r\n            lazyProxyReject === null || lazyProxyReject === void 0 ? void 0 : lazyProxyReject(err);\r\n        }));\r\n        this._protocol = new SimpleWorkerProtocol({\r\n            sendMessage: (msg, transfer) => {\r\n                this._worker.postMessage(msg, transfer);\r\n            },\r\n            handleMessage: (method, args) => {\r\n                if (typeof host[method] !== 'function') {\r\n                    return Promise.reject(new Error('Missing method ' + method + ' on main thread host.'));\r\n                }\r\n                try {\r\n                    return Promise.resolve(host[method].apply(host, args));\r\n                }\r\n                catch (e) {\r\n                    return Promise.reject(e);\r\n                }\r\n            },\r\n            handleEvent: (eventName, arg) => {\r\n                if (propertyIsDynamicEvent(eventName)) {\r\n                    const event = host[eventName].call(host, arg);\r\n                    if (typeof event !== 'function') {\r\n                        throw new Error(`Missing dynamic event ${eventName} on main thread host.`);\r\n                    }\r\n                    return event;\r\n                }\r\n                if (propertyIsEvent(eventName)) {\r\n                    const event = host[eventName];\r\n                    if (typeof event !== 'function') {\r\n                        throw new Error(`Missing event ${eventName} on main thread host.`);\r\n                    }\r\n                    return event;\r\n                }\r\n                throw new Error(`Malformed event name ${eventName}`);\r\n            }\r\n        });\r\n        this._protocol.setWorkerId(this._worker.getId());\r\n        // Gather loader configuration\r\n        let loaderConfiguration = null;\r\n        const globalRequire = globalThis.require;\r\n        if (typeof globalRequire !== 'undefined' && typeof globalRequire.getConfig === 'function') {\r\n            // Get the configuration from the Monaco AMD Loader\r\n            loaderConfiguration = globalRequire.getConfig();\r\n        }\r\n        else if (typeof globalThis.requirejs !== 'undefined') {\r\n            // Get the configuration from requirejs\r\n            loaderConfiguration = globalThis.requirejs.s.contexts._.config;\r\n        }\r\n        const hostMethods = getAllMethodNames(host);\r\n        // Send initialize message\r\n        this._onModuleLoaded = this._protocol.sendMessage(INITIALIZE, [\r\n            this._worker.getId(),\r\n            JSON.parse(JSON.stringify(loaderConfiguration)),\r\n            moduleId,\r\n            hostMethods,\r\n        ]);\r\n        // Create proxy to loaded code\r\n        const proxyMethodRequest = (method, args) => {\r\n            return this._request(method, args);\r\n        };\r\n        const proxyListen = (eventName, arg) => {\r\n            return this._protocol.listen(eventName, arg);\r\n        };\r\n        this._lazyProxy = new Promise((resolve, reject) => {\r\n            lazyProxyReject = reject;\r\n            this._onModuleLoaded.then((availableMethods) => {\r\n                resolve(createProxyObject(availableMethods, proxyMethodRequest, proxyListen));\r\n            }, (e) => {\r\n                reject(e);\r\n                this._onError('Worker failed to load ' + moduleId, e);\r\n            });\r\n        });\r\n    }\r\n    getProxyObject() {\r\n        return this._lazyProxy;\r\n    }\r\n    _request(method, args) {\r\n        return new Promise((resolve, reject) => {\r\n            this._onModuleLoaded.then(() => {\r\n                this._protocol.sendMessage(method, args).then(resolve, reject);\r\n            }, reject);\r\n        });\r\n    }\r\n    _onError(message, error) {\r\n        console.error(message);\r\n        console.info(error);\r\n    }\r\n}\r\nfunction propertyIsEvent(name) {\r\n    // Assume a property is an event if it has a form of \"onSomething\"\r\n    return name[0] === 'o' && name[1] === 'n' && strings.isUpperAsciiLetter(name.charCodeAt(2));\r\n}\r\nfunction propertyIsDynamicEvent(name) {\r\n    // Assume a property is a dynamic event (a method that returns an event) if it has a form of \"onDynamicSomething\"\r\n    return /^onDynamic/.test(name) && strings.isUpperAsciiLetter(name.charCodeAt(9));\r\n}\r\nfunction createProxyObject(methodNames, invoke, proxyListen) {\r\n    const createProxyMethod = (method) => {\r\n        return function () {\r\n            const args = Array.prototype.slice.call(arguments, 0);\r\n            return invoke(method, args);\r\n        };\r\n    };\r\n    const createProxyDynamicEvent = (eventName) => {\r\n        return function (arg) {\r\n            return proxyListen(eventName, arg);\r\n        };\r\n    };\r\n    const result = {};\r\n    for (const methodName of methodNames) {\r\n        if (propertyIsDynamicEvent(methodName)) {\r\n            result[methodName] = createProxyDynamicEvent(methodName);\r\n            continue;\r\n        }\r\n        if (propertyIsEvent(methodName)) {\r\n            result[methodName] = proxyListen(methodName, undefined);\r\n            continue;\r\n        }\r\n        result[methodName] = createProxyMethod(methodName);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Worker side\r\n */\r\nexport class SimpleWorkerServer {\r\n    constructor(postMessage, requestHandlerFactory) {\r\n        this._requestHandlerFactory = requestHandlerFactory;\r\n        this._requestHandler = null;\r\n        this._protocol = new SimpleWorkerProtocol({\r\n            sendMessage: (msg, transfer) => {\r\n                postMessage(msg, transfer);\r\n            },\r\n            handleMessage: (method, args) => this._handleMessage(method, args),\r\n            handleEvent: (eventName, arg) => this._handleEvent(eventName, arg)\r\n        });\r\n    }\r\n    onmessage(msg) {\r\n        this._protocol.handleMessage(msg);\r\n    }\r\n    _handleMessage(method, args) {\r\n        if (method === INITIALIZE) {\r\n            return this.initialize(args[0], args[1], args[2], args[3]);\r\n        }\r\n        if (!this._requestHandler || typeof this._requestHandler[method] !== 'function') {\r\n            return Promise.reject(new Error('Missing requestHandler or method: ' + method));\r\n        }\r\n        try {\r\n            return Promise.resolve(this._requestHandler[method].apply(this._requestHandler, args));\r\n        }\r\n        catch (e) {\r\n            return Promise.reject(e);\r\n        }\r\n    }\r\n    _handleEvent(eventName, arg) {\r\n        if (!this._requestHandler) {\r\n            throw new Error(`Missing requestHandler`);\r\n        }\r\n        if (propertyIsDynamicEvent(eventName)) {\r\n            const event = this._requestHandler[eventName].call(this._requestHandler, arg);\r\n            if (typeof event !== 'function') {\r\n                throw new Error(`Missing dynamic event ${eventName} on request handler.`);\r\n            }\r\n            return event;\r\n        }\r\n        if (propertyIsEvent(eventName)) {\r\n            const event = this._requestHandler[eventName];\r\n            if (typeof event !== 'function') {\r\n                throw new Error(`Missing event ${eventName} on request handler.`);\r\n            }\r\n            return event;\r\n        }\r\n        throw new Error(`Malformed event name ${eventName}`);\r\n    }\r\n    initialize(workerId, loaderConfig, moduleId, hostMethods) {\r\n        this._protocol.setWorkerId(workerId);\r\n        const proxyMethodRequest = (method, args) => {\r\n            return this._protocol.sendMessage(method, args);\r\n        };\r\n        const proxyListen = (eventName, arg) => {\r\n            return this._protocol.listen(eventName, arg);\r\n        };\r\n        const hostProxy = createProxyObject(hostMethods, proxyMethodRequest, proxyListen);\r\n        if (this._requestHandlerFactory) {\r\n            // static request handler\r\n            this._requestHandler = this._requestHandlerFactory(hostProxy);\r\n            return Promise.resolve(getAllMethodNames(this._requestHandler));\r\n        }\r\n        if (loaderConfig) {\r\n            // Remove 'baseUrl', handling it is beyond scope for now\r\n            if (typeof loaderConfig.baseUrl !== 'undefined') {\r\n                delete loaderConfig['baseUrl'];\r\n            }\r\n            if (typeof loaderConfig.paths !== 'undefined') {\r\n                if (typeof loaderConfig.paths.vs !== 'undefined') {\r\n                    delete loaderConfig.paths['vs'];\r\n                }\r\n            }\r\n            if (typeof loaderConfig.trustedTypesPolicy !== undefined) {\r\n                // don't use, it has been destroyed during serialize\r\n                delete loaderConfig['trustedTypesPolicy'];\r\n            }\r\n            // Since this is in a web worker, enable catching errors\r\n            loaderConfig.catchError = true;\r\n            globalThis.require.config(loaderConfig);\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            // Use the global require to be sure to get the global config\r\n            // ESM-comment-begin\r\n            // \t\t\tconst req = (globalThis.require || require);\r\n            // ESM-comment-end\r\n            // ESM-uncomment-begin\r\n            const req = globalThis.require;\r\n            // ESM-uncomment-end\r\n            req([moduleId], (module) => {\r\n                this._requestHandler = module.create(hostProxy);\r\n                if (!this._requestHandler) {\r\n                    reject(new Error(`No RequestHandler!`));\r\n                    return;\r\n                }\r\n                resolve(getAllMethodNames(this._requestHandler));\r\n            }, reject);\r\n        });\r\n    }\r\n}\r\n/**\r\n * Called on the worker side\r\n * @skipMangle\r\n */\r\nexport function create(postMessage) {\r\n    return new SimpleWorkerServer(postMessage, null);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createTrustedTypesPolicy } from './trustedTypes.js';\r\nimport { onUnexpectedError } from '../common/errors.js';\r\nimport { logOnceWebWorkerWarning } from '../common/worker/simpleWorker.js';\r\nconst ttPolicy = createTrustedTypesPolicy('defaultWorkerFactory', { createScriptURL: value => value });\r\nfunction getWorker(label) {\r\n    const monacoEnvironment = globalThis.MonacoEnvironment;\r\n    if (monacoEnvironment) {\r\n        if (typeof monacoEnvironment.getWorker === 'function') {\r\n            return monacoEnvironment.getWorker('workerMain.js', label);\r\n        }\r\n        if (typeof monacoEnvironment.getWorkerUrl === 'function') {\r\n            const workerUrl = monacoEnvironment.getWorkerUrl('workerMain.js', label);\r\n            return new Worker(ttPolicy ? ttPolicy.createScriptURL(workerUrl) : workerUrl, { name: label });\r\n        }\r\n    }\r\n    // ESM-comment-begin\r\n    // \tif (typeof require === 'function') {\r\n    // \t\t// check if the JS lives on a different origin\r\n    // \t\tconst workerMain = require.toUrl('vs/base/worker/workerMain.js'); // explicitly using require.toUrl(), see https://github.com/microsoft/vscode/issues/107440#issuecomment-698982321\r\n    // \t\tconst workerUrl = getWorkerBootstrapUrl(workerMain, label);\r\n    // \t\treturn new Worker(ttPolicy ? ttPolicy.createScriptURL(workerUrl) as unknown as string : workerUrl, { name: label });\r\n    // \t}\r\n    // ESM-comment-end\r\n    throw new Error(`You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker`);\r\n}\r\n// ESM-comment-begin\r\n// export function getWorkerBootstrapUrl(scriptPath: string, label: string): string {\r\n// \tif (/^((http:)|(https:)|(file:))/.test(scriptPath) && scriptPath.substring(0, globalThis.origin.length) !== globalThis.origin) {\r\n// \t\t// this is the cross-origin case\r\n// \t\t// i.e. the webpage is running at a different origin than where the scripts are loaded from\r\n// \t\tconst myPath = 'vs/base/worker/defaultWorkerFactory.js';\r\n// \t\tconst workerBaseUrl = require.toUrl(myPath).slice(0, -myPath.length); // explicitly using require.toUrl(), see https://github.com/microsoft/vscode/issues/107440#issuecomment-698982321\r\n// \t\tconst js = `/*${label}*/globalThis.MonacoEnvironment={baseUrl: '${workerBaseUrl}'};const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });importScripts(ttPolicy?.createScriptURL('${scriptPath}') ?? '${scriptPath}');/*${label}*/`;\r\n// \t\tconst blob = new Blob([js], { type: 'application/javascript' });\r\n// \t\treturn URL.createObjectURL(blob);\r\n// \t}\r\n// \r\n// \tconst start = scriptPath.lastIndexOf('?');\r\n// \tconst end = scriptPath.lastIndexOf('#', start);\r\n// \tconst params = start > 0\r\n// \t\t? new URLSearchParams(scriptPath.substring(start + 1, ~end ? end : undefined))\r\n// \t\t: new URLSearchParams();\r\n// \r\n// \tCOI.addSearchParam(params, true, true);\r\n// \tconst search = params.toString();\r\n// \r\n// \tif (!search) {\r\n// \t\treturn `${scriptPath}#${label}`;\r\n// \t} else {\r\n// \t\treturn `${scriptPath}?${params.toString()}#${label}`;\r\n// \t}\r\n// }\r\n// ESM-comment-end\r\nfunction isPromiseLike(obj) {\r\n    if (typeof obj.then === 'function') {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * A worker that uses HTML5 web workers so that is has\r\n * its own global scope and its own thread.\r\n */\r\nclass WebWorker {\r\n    constructor(moduleId, id, label, onMessageCallback, onErrorCallback) {\r\n        this.id = id;\r\n        this.label = label;\r\n        const workerOrPromise = getWorker(label);\r\n        if (isPromiseLike(workerOrPromise)) {\r\n            this.worker = workerOrPromise;\r\n        }\r\n        else {\r\n            this.worker = Promise.resolve(workerOrPromise);\r\n        }\r\n        this.postMessage(moduleId, []);\r\n        this.worker.then((w) => {\r\n            w.onmessage = function (ev) {\r\n                onMessageCallback(ev.data);\r\n            };\r\n            w.onmessageerror = onErrorCallback;\r\n            if (typeof w.addEventListener === 'function') {\r\n                w.addEventListener('error', onErrorCallback);\r\n            }\r\n        });\r\n    }\r\n    getId() {\r\n        return this.id;\r\n    }\r\n    postMessage(message, transfer) {\r\n        var _a;\r\n        (_a = this.worker) === null || _a === void 0 ? void 0 : _a.then(w => {\r\n            try {\r\n                w.postMessage(message, transfer);\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n                onUnexpectedError(new Error(`FAILED to post message to '${this.label}'-worker`, { cause: err }));\r\n            }\r\n        });\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        (_a = this.worker) === null || _a === void 0 ? void 0 : _a.then(w => w.terminate());\r\n        this.worker = null;\r\n    }\r\n}\r\nexport class DefaultWorkerFactory {\r\n    constructor(label) {\r\n        this._label = label;\r\n        this._webWorkerFailedBeforeError = false;\r\n    }\r\n    create(moduleId, onMessageCallback, onErrorCallback) {\r\n        const workerId = (++DefaultWorkerFactory.LAST_WORKER_ID);\r\n        if (this._webWorkerFailedBeforeError) {\r\n            throw this._webWorkerFailedBeforeError;\r\n        }\r\n        return new WebWorker(moduleId, workerId, this._label || 'anonymous' + workerId, onMessageCallback, (err) => {\r\n            logOnceWebWorkerWarning(err);\r\n            this._webWorkerFailedBeforeError = err;\r\n            onErrorCallback(err);\r\n        });\r\n    }\r\n}\r\nDefaultWorkerFactory.LAST_WORKER_ID = 0;\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { splitLines } from '../../../base/common/strings.js';\r\nimport { Position } from '../core/position.js';\r\nimport { PrefixSumComputer } from './prefixSumComputer.js';\r\nexport class MirrorTextModel {\r\n    constructor(uri, lines, eol, versionId) {\r\n        this._uri = uri;\r\n        this._lines = lines;\r\n        this._eol = eol;\r\n        this._versionId = versionId;\r\n        this._lineStarts = null;\r\n        this._cachedTextValue = null;\r\n    }\r\n    dispose() {\r\n        this._lines.length = 0;\r\n    }\r\n    get version() {\r\n        return this._versionId;\r\n    }\r\n    getText() {\r\n        if (this._cachedTextValue === null) {\r\n            this._cachedTextValue = this._lines.join(this._eol);\r\n        }\r\n        return this._cachedTextValue;\r\n    }\r\n    onEvents(e) {\r\n        if (e.eol && e.eol !== this._eol) {\r\n            this._eol = e.eol;\r\n            this._lineStarts = null;\r\n        }\r\n        // Update my lines\r\n        const changes = e.changes;\r\n        for (const change of changes) {\r\n            this._acceptDeleteRange(change.range);\r\n            this._acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\r\n        }\r\n        this._versionId = e.versionId;\r\n        this._cachedTextValue = null;\r\n    }\r\n    _ensureLineStarts() {\r\n        if (!this._lineStarts) {\r\n            const eolLength = this._eol.length;\r\n            const linesLength = this._lines.length;\r\n            const lineStartValues = new Uint32Array(linesLength);\r\n            for (let i = 0; i < linesLength; i++) {\r\n                lineStartValues[i] = this._lines[i].length + eolLength;\r\n            }\r\n            this._lineStarts = new PrefixSumComputer(lineStartValues);\r\n        }\r\n    }\r\n    /**\r\n     * All changes to a line's text go through this method\r\n     */\r\n    _setLineText(lineIndex, newValue) {\r\n        this._lines[lineIndex] = newValue;\r\n        if (this._lineStarts) {\r\n            // update prefix sum\r\n            this._lineStarts.setValue(lineIndex, this._lines[lineIndex].length + this._eol.length);\r\n        }\r\n    }\r\n    _acceptDeleteRange(range) {\r\n        if (range.startLineNumber === range.endLineNumber) {\r\n            if (range.startColumn === range.endColumn) {\r\n                // Nothing to delete\r\n                return;\r\n            }\r\n            // Delete text on the affected line\r\n            this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\r\n                + this._lines[range.startLineNumber - 1].substring(range.endColumn - 1));\r\n            return;\r\n        }\r\n        // Take remaining text on last line and append it to remaining text on first line\r\n        this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\r\n            + this._lines[range.endLineNumber - 1].substring(range.endColumn - 1));\r\n        // Delete middle lines\r\n        this._lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\r\n        if (this._lineStarts) {\r\n            // update prefix sum\r\n            this._lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\r\n        }\r\n    }\r\n    _acceptInsertText(position, insertText) {\r\n        if (insertText.length === 0) {\r\n            // Nothing to insert\r\n            return;\r\n        }\r\n        const insertLines = splitLines(insertText);\r\n        if (insertLines.length === 1) {\r\n            // Inserting text on one line\r\n            this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1)\r\n                + insertLines[0]\r\n                + this._lines[position.lineNumber - 1].substring(position.column - 1));\r\n            return;\r\n        }\r\n        // Append overflowing text from first line to the end of text to insert\r\n        insertLines[insertLines.length - 1] += this._lines[position.lineNumber - 1].substring(position.column - 1);\r\n        // Delete overflowing text from first line and insert text on first line\r\n        this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1)\r\n            + insertLines[0]);\r\n        // Insert new lines & store lengths\r\n        const newLengths = new Uint32Array(insertLines.length - 1);\r\n        for (let i = 1; i < insertLines.length; i++) {\r\n            this._lines.splice(position.lineNumber + i - 1, 0, insertLines[i]);\r\n            newLengths[i - 1] = insertLines[i].length + this._eol.length;\r\n        }\r\n        if (this._lineStarts) {\r\n            // update prefix sum\r\n            this._lineStarts.insertValues(position.lineNumber, newLengths);\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { CharacterClassifier } from '../core/characterClassifier.js';\r\nclass Uint8Matrix {\r\n    constructor(rows, cols, defaultValue) {\r\n        const data = new Uint8Array(rows * cols);\r\n        for (let i = 0, len = rows * cols; i < len; i++) {\r\n            data[i] = defaultValue;\r\n        }\r\n        this._data = data;\r\n        this.rows = rows;\r\n        this.cols = cols;\r\n    }\r\n    get(row, col) {\r\n        return this._data[row * this.cols + col];\r\n    }\r\n    set(row, col, value) {\r\n        this._data[row * this.cols + col] = value;\r\n    }\r\n}\r\nexport class StateMachine {\r\n    constructor(edges) {\r\n        let maxCharCode = 0;\r\n        let maxState = 0 /* State.Invalid */;\r\n        for (let i = 0, len = edges.length; i < len; i++) {\r\n            const [from, chCode, to] = edges[i];\r\n            if (chCode > maxCharCode) {\r\n                maxCharCode = chCode;\r\n            }\r\n            if (from > maxState) {\r\n                maxState = from;\r\n            }\r\n            if (to > maxState) {\r\n                maxState = to;\r\n            }\r\n        }\r\n        maxCharCode++;\r\n        maxState++;\r\n        const states = new Uint8Matrix(maxState, maxCharCode, 0 /* State.Invalid */);\r\n        for (let i = 0, len = edges.length; i < len; i++) {\r\n            const [from, chCode, to] = edges[i];\r\n            states.set(from, chCode, to);\r\n        }\r\n        this._states = states;\r\n        this._maxCharCode = maxCharCode;\r\n    }\r\n    nextState(currentState, chCode) {\r\n        if (chCode < 0 || chCode >= this._maxCharCode) {\r\n            return 0 /* State.Invalid */;\r\n        }\r\n        return this._states.get(currentState, chCode);\r\n    }\r\n}\r\n// State machine for http:// or https:// or file://\r\nlet _stateMachine = null;\r\nfunction getStateMachine() {\r\n    if (_stateMachine === null) {\r\n        _stateMachine = new StateMachine([\r\n            [1 /* State.Start */, 104 /* CharCode.h */, 2 /* State.H */],\r\n            [1 /* State.Start */, 72 /* CharCode.H */, 2 /* State.H */],\r\n            [1 /* State.Start */, 102 /* CharCode.f */, 6 /* State.F */],\r\n            [1 /* State.Start */, 70 /* CharCode.F */, 6 /* State.F */],\r\n            [2 /* State.H */, 116 /* CharCode.t */, 3 /* State.HT */],\r\n            [2 /* State.H */, 84 /* CharCode.T */, 3 /* State.HT */],\r\n            [3 /* State.HT */, 116 /* CharCode.t */, 4 /* State.HTT */],\r\n            [3 /* State.HT */, 84 /* CharCode.T */, 4 /* State.HTT */],\r\n            [4 /* State.HTT */, 112 /* CharCode.p */, 5 /* State.HTTP */],\r\n            [4 /* State.HTT */, 80 /* CharCode.P */, 5 /* State.HTTP */],\r\n            [5 /* State.HTTP */, 115 /* CharCode.s */, 9 /* State.BeforeColon */],\r\n            [5 /* State.HTTP */, 83 /* CharCode.S */, 9 /* State.BeforeColon */],\r\n            [5 /* State.HTTP */, 58 /* CharCode.Colon */, 10 /* State.AfterColon */],\r\n            [6 /* State.F */, 105 /* CharCode.i */, 7 /* State.FI */],\r\n            [6 /* State.F */, 73 /* CharCode.I */, 7 /* State.FI */],\r\n            [7 /* State.FI */, 108 /* CharCode.l */, 8 /* State.FIL */],\r\n            [7 /* State.FI */, 76 /* CharCode.L */, 8 /* State.FIL */],\r\n            [8 /* State.FIL */, 101 /* CharCode.e */, 9 /* State.BeforeColon */],\r\n            [8 /* State.FIL */, 69 /* CharCode.E */, 9 /* State.BeforeColon */],\r\n            [9 /* State.BeforeColon */, 58 /* CharCode.Colon */, 10 /* State.AfterColon */],\r\n            [10 /* State.AfterColon */, 47 /* CharCode.Slash */, 11 /* State.AlmostThere */],\r\n            [11 /* State.AlmostThere */, 47 /* CharCode.Slash */, 12 /* State.End */],\r\n        ]);\r\n    }\r\n    return _stateMachine;\r\n}\r\nlet _classifier = null;\r\nfunction getClassifier() {\r\n    if (_classifier === null) {\r\n        _classifier = new CharacterClassifier(0 /* CharacterClass.None */);\r\n        // allow-any-unicode-next-line\r\n        const FORCE_TERMINATION_CHARACTERS = ' \\t<>\\'\\\"';\r\n        for (let i = 0; i < FORCE_TERMINATION_CHARACTERS.length; i++) {\r\n            _classifier.set(FORCE_TERMINATION_CHARACTERS.charCodeAt(i), 1 /* CharacterClass.ForceTermination */);\r\n        }\r\n        const CANNOT_END_WITH_CHARACTERS = '.,;:';\r\n        for (let i = 0; i < CANNOT_END_WITH_CHARACTERS.length; i++) {\r\n            _classifier.set(CANNOT_END_WITH_CHARACTERS.charCodeAt(i), 2 /* CharacterClass.CannotEndIn */);\r\n        }\r\n    }\r\n    return _classifier;\r\n}\r\nexport class LinkComputer {\r\n    static _createLink(classifier, line, lineNumber, linkBeginIndex, linkEndIndex) {\r\n        // Do not allow to end link in certain characters...\r\n        let lastIncludedCharIndex = linkEndIndex - 1;\r\n        do {\r\n            const chCode = line.charCodeAt(lastIncludedCharIndex);\r\n            const chClass = classifier.get(chCode);\r\n            if (chClass !== 2 /* CharacterClass.CannotEndIn */) {\r\n                break;\r\n            }\r\n            lastIncludedCharIndex--;\r\n        } while (lastIncludedCharIndex > linkBeginIndex);\r\n        // Handle links enclosed in parens, square brackets and curlys.\r\n        if (linkBeginIndex > 0) {\r\n            const charCodeBeforeLink = line.charCodeAt(linkBeginIndex - 1);\r\n            const lastCharCodeInLink = line.charCodeAt(lastIncludedCharIndex);\r\n            if ((charCodeBeforeLink === 40 /* CharCode.OpenParen */ && lastCharCodeInLink === 41 /* CharCode.CloseParen */)\r\n                || (charCodeBeforeLink === 91 /* CharCode.OpenSquareBracket */ && lastCharCodeInLink === 93 /* CharCode.CloseSquareBracket */)\r\n                || (charCodeBeforeLink === 123 /* CharCode.OpenCurlyBrace */ && lastCharCodeInLink === 125 /* CharCode.CloseCurlyBrace */)) {\r\n                // Do not end in ) if ( is before the link start\r\n                // Do not end in ] if [ is before the link start\r\n                // Do not end in } if { is before the link start\r\n                lastIncludedCharIndex--;\r\n            }\r\n        }\r\n        return {\r\n            range: {\r\n                startLineNumber: lineNumber,\r\n                startColumn: linkBeginIndex + 1,\r\n                endLineNumber: lineNumber,\r\n                endColumn: lastIncludedCharIndex + 2\r\n            },\r\n            url: line.substring(linkBeginIndex, lastIncludedCharIndex + 1)\r\n        };\r\n    }\r\n    static computeLinks(model, stateMachine = getStateMachine()) {\r\n        const classifier = getClassifier();\r\n        const result = [];\r\n        for (let i = 1, lineCount = model.getLineCount(); i <= lineCount; i++) {\r\n            const line = model.getLineContent(i);\r\n            const len = line.length;\r\n            let j = 0;\r\n            let linkBeginIndex = 0;\r\n            let linkBeginChCode = 0;\r\n            let state = 1 /* State.Start */;\r\n            let hasOpenParens = false;\r\n            let hasOpenSquareBracket = false;\r\n            let inSquareBrackets = false;\r\n            let hasOpenCurlyBracket = false;\r\n            while (j < len) {\r\n                let resetStateMachine = false;\r\n                const chCode = line.charCodeAt(j);\r\n                if (state === 13 /* State.Accept */) {\r\n                    let chClass;\r\n                    switch (chCode) {\r\n                        case 40 /* CharCode.OpenParen */:\r\n                            hasOpenParens = true;\r\n                            chClass = 0 /* CharacterClass.None */;\r\n                            break;\r\n                        case 41 /* CharCode.CloseParen */:\r\n                            chClass = (hasOpenParens ? 0 /* CharacterClass.None */ : 1 /* CharacterClass.ForceTermination */);\r\n                            break;\r\n                        case 91 /* CharCode.OpenSquareBracket */:\r\n                            inSquareBrackets = true;\r\n                            hasOpenSquareBracket = true;\r\n                            chClass = 0 /* CharacterClass.None */;\r\n                            break;\r\n                        case 93 /* CharCode.CloseSquareBracket */:\r\n                            inSquareBrackets = false;\r\n                            chClass = (hasOpenSquareBracket ? 0 /* CharacterClass.None */ : 1 /* CharacterClass.ForceTermination */);\r\n                            break;\r\n                        case 123 /* CharCode.OpenCurlyBrace */:\r\n                            hasOpenCurlyBracket = true;\r\n                            chClass = 0 /* CharacterClass.None */;\r\n                            break;\r\n                        case 125 /* CharCode.CloseCurlyBrace */:\r\n                            chClass = (hasOpenCurlyBracket ? 0 /* CharacterClass.None */ : 1 /* CharacterClass.ForceTermination */);\r\n                            break;\r\n                        // The following three rules make it that ' or \" or ` are allowed inside links\r\n                        // only if the link is wrapped by some other quote character\r\n                        case 39 /* CharCode.SingleQuote */:\r\n                        case 34 /* CharCode.DoubleQuote */:\r\n                        case 96 /* CharCode.BackTick */:\r\n                            if (linkBeginChCode === chCode) {\r\n                                chClass = 1 /* CharacterClass.ForceTermination */;\r\n                            }\r\n                            else if (linkBeginChCode === 39 /* CharCode.SingleQuote */ || linkBeginChCode === 34 /* CharCode.DoubleQuote */ || linkBeginChCode === 96 /* CharCode.BackTick */) {\r\n                                chClass = 0 /* CharacterClass.None */;\r\n                            }\r\n                            else {\r\n                                chClass = 1 /* CharacterClass.ForceTermination */;\r\n                            }\r\n                            break;\r\n                        case 42 /* CharCode.Asterisk */:\r\n                            // `*` terminates a link if the link began with `*`\r\n                            chClass = (linkBeginChCode === 42 /* CharCode.Asterisk */) ? 1 /* CharacterClass.ForceTermination */ : 0 /* CharacterClass.None */;\r\n                            break;\r\n                        case 124 /* CharCode.Pipe */:\r\n                            // `|` terminates a link if the link began with `|`\r\n                            chClass = (linkBeginChCode === 124 /* CharCode.Pipe */) ? 1 /* CharacterClass.ForceTermination */ : 0 /* CharacterClass.None */;\r\n                            break;\r\n                        case 32 /* CharCode.Space */:\r\n                            // ` ` allow space in between [ and ]\r\n                            chClass = (inSquareBrackets ? 0 /* CharacterClass.None */ : 1 /* CharacterClass.ForceTermination */);\r\n                            break;\r\n                        default:\r\n                            chClass = classifier.get(chCode);\r\n                    }\r\n                    // Check if character terminates link\r\n                    if (chClass === 1 /* CharacterClass.ForceTermination */) {\r\n                        result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, j));\r\n                        resetStateMachine = true;\r\n                    }\r\n                }\r\n                else if (state === 12 /* State.End */) {\r\n                    let chClass;\r\n                    if (chCode === 91 /* CharCode.OpenSquareBracket */) {\r\n                        // Allow for the authority part to contain ipv6 addresses which contain [ and ]\r\n                        hasOpenSquareBracket = true;\r\n                        chClass = 0 /* CharacterClass.None */;\r\n                    }\r\n                    else {\r\n                        chClass = classifier.get(chCode);\r\n                    }\r\n                    // Check if character terminates link\r\n                    if (chClass === 1 /* CharacterClass.ForceTermination */) {\r\n                        resetStateMachine = true;\r\n                    }\r\n                    else {\r\n                        state = 13 /* State.Accept */;\r\n                    }\r\n                }\r\n                else {\r\n                    state = stateMachine.nextState(state, chCode);\r\n                    if (state === 0 /* State.Invalid */) {\r\n                        resetStateMachine = true;\r\n                    }\r\n                }\r\n                if (resetStateMachine) {\r\n                    state = 1 /* State.Start */;\r\n                    hasOpenParens = false;\r\n                    hasOpenSquareBracket = false;\r\n                    hasOpenCurlyBracket = false;\r\n                    // Record where the link started\r\n                    linkBeginIndex = j + 1;\r\n                    linkBeginChCode = chCode;\r\n                }\r\n                j++;\r\n            }\r\n            if (state === 13 /* State.Accept */) {\r\n                result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, len));\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\n/**\r\n * Returns an array of all links contains in the provided\r\n * document. *Note* that this operation is computational\r\n * expensive and should not run in the UI thread.\r\n */\r\nexport function computeLinks(model) {\r\n    if (!model || typeof model.getLineCount !== 'function' || typeof model.getLineContent !== 'function') {\r\n        // Unknown caller!\r\n        return [];\r\n    }\r\n    return LinkComputer.computeLinks(model);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport class BasicInplaceReplace {\r\n    constructor() {\r\n        this._defaultValueSet = [\r\n            ['true', 'false'],\r\n            ['True', 'False'],\r\n            ['Private', 'Public', 'Friend', 'ReadOnly', 'Partial', 'Protected', 'WriteOnly'],\r\n            ['public', 'protected', 'private'],\r\n        ];\r\n    }\r\n    navigateValueSet(range1, text1, range2, text2, up) {\r\n        if (range1 && text1) {\r\n            const result = this.doNavigateValueSet(text1, up);\r\n            if (result) {\r\n                return {\r\n                    range: range1,\r\n                    value: result\r\n                };\r\n            }\r\n        }\r\n        if (range2 && text2) {\r\n            const result = this.doNavigateValueSet(text2, up);\r\n            if (result) {\r\n                return {\r\n                    range: range2,\r\n                    value: result\r\n                };\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    doNavigateValueSet(text, up) {\r\n        const numberResult = this.numberReplace(text, up);\r\n        if (numberResult !== null) {\r\n            return numberResult;\r\n        }\r\n        return this.textReplace(text, up);\r\n    }\r\n    numberReplace(value, up) {\r\n        const precision = Math.pow(10, value.length - (value.lastIndexOf('.') + 1));\r\n        let n1 = Number(value);\r\n        const n2 = parseFloat(value);\r\n        if (!isNaN(n1) && !isNaN(n2) && n1 === n2) {\r\n            if (n1 === 0 && !up) {\r\n                return null; // don't do negative\r\n                //\t\t\t} else if(n1 === 9 && up) {\r\n                //\t\t\t\treturn null; // don't insert 10 into a number\r\n            }\r\n            else {\r\n                n1 = Math.floor(n1 * precision);\r\n                n1 += up ? precision : -precision;\r\n                return String(n1 / precision);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    textReplace(value, up) {\r\n        return this.valueSetsReplace(this._defaultValueSet, value, up);\r\n    }\r\n    valueSetsReplace(valueSets, value, up) {\r\n        let result = null;\r\n        for (let i = 0, len = valueSets.length; result === null && i < len; i++) {\r\n            result = this.valueSetReplace(valueSets[i], value, up);\r\n        }\r\n        return result;\r\n    }\r\n    valueSetReplace(valueSet, value, up) {\r\n        let idx = valueSet.indexOf(value);\r\n        if (idx >= 0) {\r\n            idx += up ? +1 : -1;\r\n            if (idx < 0) {\r\n                idx = valueSet.length - 1;\r\n            }\r\n            else {\r\n                idx %= valueSet.length;\r\n            }\r\n            return valueSet[idx];\r\n        }\r\n        return null;\r\n    }\r\n}\r\nBasicInplaceReplace.INSTANCE = new BasicInplaceReplace();\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../core/range.js';\r\nimport { Searcher } from '../model/textModelSearch.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { assertNever } from '../../../base/common/assert.js';\r\nimport { DEFAULT_WORD_REGEXP, getWordAtText } from '../core/wordHelper.js';\r\nexport class UnicodeTextModelHighlighter {\r\n    static computeUnicodeHighlights(model, options, range) {\r\n        const startLine = range ? range.startLineNumber : 1;\r\n        const endLine = range ? range.endLineNumber : model.getLineCount();\r\n        const codePointHighlighter = new CodePointHighlighter(options);\r\n        const candidates = codePointHighlighter.getCandidateCodePoints();\r\n        let regex;\r\n        if (candidates === 'allNonBasicAscii') {\r\n            regex = new RegExp('[^\\\\t\\\\n\\\\r\\\\x20-\\\\x7E]', 'g');\r\n        }\r\n        else {\r\n            regex = new RegExp(`${buildRegExpCharClassExpr(Array.from(candidates))}`, 'g');\r\n        }\r\n        const searcher = new Searcher(null, regex);\r\n        const ranges = [];\r\n        let hasMore = false;\r\n        let m;\r\n        let ambiguousCharacterCount = 0;\r\n        let invisibleCharacterCount = 0;\r\n        let nonBasicAsciiCharacterCount = 0;\r\n        forLoop: for (let lineNumber = startLine, lineCount = endLine; lineNumber <= lineCount; lineNumber++) {\r\n            const lineContent = model.getLineContent(lineNumber);\r\n            const lineLength = lineContent.length;\r\n            // Reset regex to search from the beginning\r\n            searcher.reset(0);\r\n            do {\r\n                m = searcher.next(lineContent);\r\n                if (m) {\r\n                    let startIndex = m.index;\r\n                    let endIndex = m.index + m[0].length;\r\n                    // Extend range to entire code point\r\n                    if (startIndex > 0) {\r\n                        const charCodeBefore = lineContent.charCodeAt(startIndex - 1);\r\n                        if (strings.isHighSurrogate(charCodeBefore)) {\r\n                            startIndex--;\r\n                        }\r\n                    }\r\n                    if (endIndex + 1 < lineLength) {\r\n                        const charCodeBefore = lineContent.charCodeAt(endIndex - 1);\r\n                        if (strings.isHighSurrogate(charCodeBefore)) {\r\n                            endIndex++;\r\n                        }\r\n                    }\r\n                    const str = lineContent.substring(startIndex, endIndex);\r\n                    let word = getWordAtText(startIndex + 1, DEFAULT_WORD_REGEXP, lineContent, 0);\r\n                    if (word && word.endColumn <= startIndex + 1) {\r\n                        // The word does not include the problematic character, ignore the word\r\n                        word = null;\r\n                    }\r\n                    const highlightReason = codePointHighlighter.shouldHighlightNonBasicASCII(str, word ? word.word : null);\r\n                    if (highlightReason !== 0 /* SimpleHighlightReason.None */) {\r\n                        if (highlightReason === 3 /* SimpleHighlightReason.Ambiguous */) {\r\n                            ambiguousCharacterCount++;\r\n                        }\r\n                        else if (highlightReason === 2 /* SimpleHighlightReason.Invisible */) {\r\n                            invisibleCharacterCount++;\r\n                        }\r\n                        else if (highlightReason === 1 /* SimpleHighlightReason.NonBasicASCII */) {\r\n                            nonBasicAsciiCharacterCount++;\r\n                        }\r\n                        else {\r\n                            assertNever(highlightReason);\r\n                        }\r\n                        const MAX_RESULT_LENGTH = 1000;\r\n                        if (ranges.length >= MAX_RESULT_LENGTH) {\r\n                            hasMore = true;\r\n                            break forLoop;\r\n                        }\r\n                        ranges.push(new Range(lineNumber, startIndex + 1, lineNumber, endIndex + 1));\r\n                    }\r\n                }\r\n            } while (m);\r\n        }\r\n        return {\r\n            ranges,\r\n            hasMore,\r\n            ambiguousCharacterCount,\r\n            invisibleCharacterCount,\r\n            nonBasicAsciiCharacterCount\r\n        };\r\n    }\r\n    static computeUnicodeHighlightReason(char, options) {\r\n        const codePointHighlighter = new CodePointHighlighter(options);\r\n        const reason = codePointHighlighter.shouldHighlightNonBasicASCII(char, null);\r\n        switch (reason) {\r\n            case 0 /* SimpleHighlightReason.None */:\r\n                return null;\r\n            case 2 /* SimpleHighlightReason.Invisible */:\r\n                return { kind: 1 /* UnicodeHighlighterReasonKind.Invisible */ };\r\n            case 3 /* SimpleHighlightReason.Ambiguous */: {\r\n                const codePoint = char.codePointAt(0);\r\n                const primaryConfusable = codePointHighlighter.ambiguousCharacters.getPrimaryConfusable(codePoint);\r\n                const notAmbiguousInLocales = strings.AmbiguousCharacters.getLocales().filter((l) => !strings.AmbiguousCharacters.getInstance(new Set([...options.allowedLocales, l])).isAmbiguous(codePoint));\r\n                return { kind: 0 /* UnicodeHighlighterReasonKind.Ambiguous */, confusableWith: String.fromCodePoint(primaryConfusable), notAmbiguousInLocales };\r\n            }\r\n            case 1 /* SimpleHighlightReason.NonBasicASCII */:\r\n                return { kind: 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */ };\r\n        }\r\n    }\r\n}\r\nfunction buildRegExpCharClassExpr(codePoints, flags) {\r\n    const src = `[${strings.escapeRegExpCharacters(codePoints.map((i) => String.fromCodePoint(i)).join(''))}]`;\r\n    return src;\r\n}\r\nclass CodePointHighlighter {\r\n    constructor(options) {\r\n        this.options = options;\r\n        this.allowedCodePoints = new Set(options.allowedCodePoints);\r\n        this.ambiguousCharacters = strings.AmbiguousCharacters.getInstance(new Set(options.allowedLocales));\r\n    }\r\n    getCandidateCodePoints() {\r\n        if (this.options.nonBasicASCII) {\r\n            return 'allNonBasicAscii';\r\n        }\r\n        const set = new Set();\r\n        if (this.options.invisibleCharacters) {\r\n            for (const cp of strings.InvisibleCharacters.codePoints) {\r\n                if (!isAllowedInvisibleCharacter(String.fromCodePoint(cp))) {\r\n                    set.add(cp);\r\n                }\r\n            }\r\n        }\r\n        if (this.options.ambiguousCharacters) {\r\n            for (const cp of this.ambiguousCharacters.getConfusableCodePoints()) {\r\n                set.add(cp);\r\n            }\r\n        }\r\n        for (const cp of this.allowedCodePoints) {\r\n            set.delete(cp);\r\n        }\r\n        return set;\r\n    }\r\n    shouldHighlightNonBasicASCII(character, wordContext) {\r\n        const codePoint = character.codePointAt(0);\r\n        if (this.allowedCodePoints.has(codePoint)) {\r\n            return 0 /* SimpleHighlightReason.None */;\r\n        }\r\n        if (this.options.nonBasicASCII) {\r\n            return 1 /* SimpleHighlightReason.NonBasicASCII */;\r\n        }\r\n        let hasBasicASCIICharacters = false;\r\n        let hasNonConfusableNonBasicAsciiCharacter = false;\r\n        if (wordContext) {\r\n            for (const char of wordContext) {\r\n                const codePoint = char.codePointAt(0);\r\n                const isBasicASCII = strings.isBasicASCII(char);\r\n                hasBasicASCIICharacters = hasBasicASCIICharacters || isBasicASCII;\r\n                if (!isBasicASCII &&\r\n                    !this.ambiguousCharacters.isAmbiguous(codePoint) &&\r\n                    !strings.InvisibleCharacters.isInvisibleCharacter(codePoint)) {\r\n                    hasNonConfusableNonBasicAsciiCharacter = true;\r\n                }\r\n            }\r\n        }\r\n        if (\r\n        /* Don't allow mixing weird looking characters with ASCII */ !hasBasicASCIICharacters &&\r\n            /* Is there an obviously weird looking character? */ hasNonConfusableNonBasicAsciiCharacter) {\r\n            return 0 /* SimpleHighlightReason.None */;\r\n        }\r\n        if (this.options.invisibleCharacters) {\r\n            // TODO check for emojis\r\n            if (!isAllowedInvisibleCharacter(character) && strings.InvisibleCharacters.isInvisibleCharacter(codePoint)) {\r\n                return 2 /* SimpleHighlightReason.Invisible */;\r\n            }\r\n        }\r\n        if (this.options.ambiguousCharacters) {\r\n            if (this.ambiguousCharacters.isAmbiguous(codePoint)) {\r\n                return 3 /* SimpleHighlightReason.Ambiguous */;\r\n            }\r\n        }\r\n        return 0 /* SimpleHighlightReason.None */;\r\n    }\r\n}\r\nfunction isAllowedInvisibleCharacter(character) {\r\n    return character === ' ' || character === '\\n' || character === '\\t';\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport class LinesDiff {\r\n    constructor(changes, \r\n    /**\r\n     * Sorted by original line ranges.\r\n     * The original line ranges and the modified line ranges must be disjoint (but can be touching).\r\n     */\r\n    moves, \r\n    /**\r\n     * Indicates if the time out was reached.\r\n     * In that case, the diffs might be an approximation and the user should be asked to rerun the diff with more time.\r\n     */\r\n    hitTimeout) {\r\n        this.changes = changes;\r\n        this.moves = moves;\r\n        this.hitTimeout = hitTimeout;\r\n    }\r\n}\r\nexport class MovedText {\r\n    constructor(lineRangeMapping, changes) {\r\n        this.lineRangeMapping = lineRangeMapping;\r\n        this.changes = changes;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { LineRange } from '../core/lineRange.js';\r\n/**\r\n * Maps a line range in the original text model to a line range in the modified text model.\r\n */\r\nexport class LineRangeMapping {\r\n    static inverse(mapping, originalLineCount, modifiedLineCount) {\r\n        const result = [];\r\n        let lastOriginalEndLineNumber = 1;\r\n        let lastModifiedEndLineNumber = 1;\r\n        for (const m of mapping) {\r\n            const r = new DetailedLineRangeMapping(new LineRange(lastOriginalEndLineNumber, m.original.startLineNumber), new LineRange(lastModifiedEndLineNumber, m.modified.startLineNumber), undefined);\r\n            if (!r.modified.isEmpty) {\r\n                result.push(r);\r\n            }\r\n            lastOriginalEndLineNumber = m.original.endLineNumberExclusive;\r\n            lastModifiedEndLineNumber = m.modified.endLineNumberExclusive;\r\n        }\r\n        const r = new DetailedLineRangeMapping(new LineRange(lastOriginalEndLineNumber, originalLineCount + 1), new LineRange(lastModifiedEndLineNumber, modifiedLineCount + 1), undefined);\r\n        if (!r.modified.isEmpty) {\r\n            result.push(r);\r\n        }\r\n        return result;\r\n    }\r\n    constructor(originalRange, modifiedRange) {\r\n        this.original = originalRange;\r\n        this.modified = modifiedRange;\r\n    }\r\n    toString() {\r\n        return `{${this.original.toString()}->${this.modified.toString()}}`;\r\n    }\r\n    flip() {\r\n        return new LineRangeMapping(this.modified, this.original);\r\n    }\r\n    join(other) {\r\n        return new LineRangeMapping(this.original.join(other.original), this.modified.join(other.modified));\r\n    }\r\n}\r\n/**\r\n * Maps a line range in the original text model to a line range in the modified text model.\r\n * Also contains inner range mappings.\r\n */\r\nexport class DetailedLineRangeMapping extends LineRangeMapping {\r\n    constructor(originalRange, modifiedRange, innerChanges) {\r\n        super(originalRange, modifiedRange);\r\n        this.innerChanges = innerChanges;\r\n    }\r\n    flip() {\r\n        var _a;\r\n        return new DetailedLineRangeMapping(this.modified, this.original, (_a = this.innerChanges) === null || _a === void 0 ? void 0 : _a.map(c => c.flip()));\r\n    }\r\n}\r\n/**\r\n * Maps a range in the original text model to a range in the modified text model.\r\n */\r\nexport class RangeMapping {\r\n    constructor(originalRange, modifiedRange) {\r\n        this.originalRange = originalRange;\r\n        this.modifiedRange = modifiedRange;\r\n    }\r\n    toString() {\r\n        return `{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`;\r\n    }\r\n    flip() {\r\n        return new RangeMapping(this.modifiedRange, this.originalRange);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { LcsDiff } from '../../../base/common/diff/diff.js';\r\nimport { LinesDiff } from './linesDiffComputer.js';\r\nimport { RangeMapping, DetailedLineRangeMapping } from './rangeMapping.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { Range } from '../core/range.js';\r\nimport { assertFn, checkAdjacentItems } from '../../../base/common/assert.js';\r\nimport { LineRange } from '../core/lineRange.js';\r\nconst MINIMUM_MATCHING_CHARACTER_LENGTH = 3;\r\nexport class LegacyLinesDiffComputer {\r\n    computeDiff(originalLines, modifiedLines, options) {\r\n        var _a;\r\n        const diffComputer = new DiffComputer(originalLines, modifiedLines, {\r\n            maxComputationTime: options.maxComputationTimeMs,\r\n            shouldIgnoreTrimWhitespace: options.ignoreTrimWhitespace,\r\n            shouldComputeCharChanges: true,\r\n            shouldMakePrettyDiff: true,\r\n            shouldPostProcessCharChanges: true,\r\n        });\r\n        const result = diffComputer.computeDiff();\r\n        const changes = [];\r\n        let lastChange = null;\r\n        for (const c of result.changes) {\r\n            let originalRange;\r\n            if (c.originalEndLineNumber === 0) {\r\n                // Insertion\r\n                originalRange = new LineRange(c.originalStartLineNumber + 1, c.originalStartLineNumber + 1);\r\n            }\r\n            else {\r\n                originalRange = new LineRange(c.originalStartLineNumber, c.originalEndLineNumber + 1);\r\n            }\r\n            let modifiedRange;\r\n            if (c.modifiedEndLineNumber === 0) {\r\n                // Deletion\r\n                modifiedRange = new LineRange(c.modifiedStartLineNumber + 1, c.modifiedStartLineNumber + 1);\r\n            }\r\n            else {\r\n                modifiedRange = new LineRange(c.modifiedStartLineNumber, c.modifiedEndLineNumber + 1);\r\n            }\r\n            let change = new DetailedLineRangeMapping(originalRange, modifiedRange, (_a = c.charChanges) === null || _a === void 0 ? void 0 : _a.map(c => new RangeMapping(new Range(c.originalStartLineNumber, c.originalStartColumn, c.originalEndLineNumber, c.originalEndColumn), new Range(c.modifiedStartLineNumber, c.modifiedStartColumn, c.modifiedEndLineNumber, c.modifiedEndColumn))));\r\n            if (lastChange) {\r\n                if (lastChange.modified.endLineNumberExclusive === change.modified.startLineNumber\r\n                    || lastChange.original.endLineNumberExclusive === change.original.startLineNumber) {\r\n                    // join touching diffs. Probably moving diffs up/down in the algorithm causes touching diffs.\r\n                    change = new DetailedLineRangeMapping(lastChange.original.join(change.original), lastChange.modified.join(change.modified), lastChange.innerChanges && change.innerChanges ?\r\n                        lastChange.innerChanges.concat(change.innerChanges) : undefined);\r\n                    changes.pop();\r\n                }\r\n            }\r\n            changes.push(change);\r\n            lastChange = change;\r\n        }\r\n        assertFn(() => {\r\n            return checkAdjacentItems(changes, (m1, m2) => m2.original.startLineNumber - m1.original.endLineNumberExclusive === m2.modified.startLineNumber - m1.modified.endLineNumberExclusive &&\r\n                // There has to be an unchanged line in between (otherwise both diffs should have been joined)\r\n                m1.original.endLineNumberExclusive < m2.original.startLineNumber &&\r\n                m1.modified.endLineNumberExclusive < m2.modified.startLineNumber);\r\n        });\r\n        return new LinesDiff(changes, [], result.quitEarly);\r\n    }\r\n}\r\nfunction computeDiff(originalSequence, modifiedSequence, continueProcessingPredicate, pretty) {\r\n    const diffAlgo = new LcsDiff(originalSequence, modifiedSequence, continueProcessingPredicate);\r\n    return diffAlgo.ComputeDiff(pretty);\r\n}\r\nclass LineSequence {\r\n    constructor(lines) {\r\n        const startColumns = [];\r\n        const endColumns = [];\r\n        for (let i = 0, length = lines.length; i < length; i++) {\r\n            startColumns[i] = getFirstNonBlankColumn(lines[i], 1);\r\n            endColumns[i] = getLastNonBlankColumn(lines[i], 1);\r\n        }\r\n        this.lines = lines;\r\n        this._startColumns = startColumns;\r\n        this._endColumns = endColumns;\r\n    }\r\n    getElements() {\r\n        const elements = [];\r\n        for (let i = 0, len = this.lines.length; i < len; i++) {\r\n            elements[i] = this.lines[i].substring(this._startColumns[i] - 1, this._endColumns[i] - 1);\r\n        }\r\n        return elements;\r\n    }\r\n    getStrictElement(index) {\r\n        return this.lines[index];\r\n    }\r\n    getStartLineNumber(i) {\r\n        return i + 1;\r\n    }\r\n    getEndLineNumber(i) {\r\n        return i + 1;\r\n    }\r\n    createCharSequence(shouldIgnoreTrimWhitespace, startIndex, endIndex) {\r\n        const charCodes = [];\r\n        const lineNumbers = [];\r\n        const columns = [];\r\n        let len = 0;\r\n        for (let index = startIndex; index <= endIndex; index++) {\r\n            const lineContent = this.lines[index];\r\n            const startColumn = (shouldIgnoreTrimWhitespace ? this._startColumns[index] : 1);\r\n            const endColumn = (shouldIgnoreTrimWhitespace ? this._endColumns[index] : lineContent.length + 1);\r\n            for (let col = startColumn; col < endColumn; col++) {\r\n                charCodes[len] = lineContent.charCodeAt(col - 1);\r\n                lineNumbers[len] = index + 1;\r\n                columns[len] = col;\r\n                len++;\r\n            }\r\n            if (!shouldIgnoreTrimWhitespace && index < endIndex) {\r\n                // Add \\n if trim whitespace is not ignored\r\n                charCodes[len] = 10 /* CharCode.LineFeed */;\r\n                lineNumbers[len] = index + 1;\r\n                columns[len] = lineContent.length + 1;\r\n                len++;\r\n            }\r\n        }\r\n        return new CharSequence(charCodes, lineNumbers, columns);\r\n    }\r\n}\r\nclass CharSequence {\r\n    constructor(charCodes, lineNumbers, columns) {\r\n        this._charCodes = charCodes;\r\n        this._lineNumbers = lineNumbers;\r\n        this._columns = columns;\r\n    }\r\n    toString() {\r\n        return ('[' + this._charCodes.map((s, idx) => (s === 10 /* CharCode.LineFeed */ ? '\\\\n' : String.fromCharCode(s)) + `-(${this._lineNumbers[idx]},${this._columns[idx]})`).join(', ') + ']');\r\n    }\r\n    _assertIndex(index, arr) {\r\n        if (index < 0 || index >= arr.length) {\r\n            throw new Error(`Illegal index`);\r\n        }\r\n    }\r\n    getElements() {\r\n        return this._charCodes;\r\n    }\r\n    getStartLineNumber(i) {\r\n        if (i > 0 && i === this._lineNumbers.length) {\r\n            // the start line number of the element after the last element\r\n            // is the end line number of the last element\r\n            return this.getEndLineNumber(i - 1);\r\n        }\r\n        this._assertIndex(i, this._lineNumbers);\r\n        return this._lineNumbers[i];\r\n    }\r\n    getEndLineNumber(i) {\r\n        if (i === -1) {\r\n            // the end line number of the element before the first element\r\n            // is the start line number of the first element\r\n            return this.getStartLineNumber(i + 1);\r\n        }\r\n        this._assertIndex(i, this._lineNumbers);\r\n        if (this._charCodes[i] === 10 /* CharCode.LineFeed */) {\r\n            return this._lineNumbers[i] + 1;\r\n        }\r\n        return this._lineNumbers[i];\r\n    }\r\n    getStartColumn(i) {\r\n        if (i > 0 && i === this._columns.length) {\r\n            // the start column of the element after the last element\r\n            // is the end column of the last element\r\n            return this.getEndColumn(i - 1);\r\n        }\r\n        this._assertIndex(i, this._columns);\r\n        return this._columns[i];\r\n    }\r\n    getEndColumn(i) {\r\n        if (i === -1) {\r\n            // the end column of the element before the first element\r\n            // is the start column of the first element\r\n            return this.getStartColumn(i + 1);\r\n        }\r\n        this._assertIndex(i, this._columns);\r\n        if (this._charCodes[i] === 10 /* CharCode.LineFeed */) {\r\n            return 1;\r\n        }\r\n        return this._columns[i] + 1;\r\n    }\r\n}\r\nclass CharChange {\r\n    constructor(originalStartLineNumber, originalStartColumn, originalEndLineNumber, originalEndColumn, modifiedStartLineNumber, modifiedStartColumn, modifiedEndLineNumber, modifiedEndColumn) {\r\n        this.originalStartLineNumber = originalStartLineNumber;\r\n        this.originalStartColumn = originalStartColumn;\r\n        this.originalEndLineNumber = originalEndLineNumber;\r\n        this.originalEndColumn = originalEndColumn;\r\n        this.modifiedStartLineNumber = modifiedStartLineNumber;\r\n        this.modifiedStartColumn = modifiedStartColumn;\r\n        this.modifiedEndLineNumber = modifiedEndLineNumber;\r\n        this.modifiedEndColumn = modifiedEndColumn;\r\n    }\r\n    static createFromDiffChange(diffChange, originalCharSequence, modifiedCharSequence) {\r\n        const originalStartLineNumber = originalCharSequence.getStartLineNumber(diffChange.originalStart);\r\n        const originalStartColumn = originalCharSequence.getStartColumn(diffChange.originalStart);\r\n        const originalEndLineNumber = originalCharSequence.getEndLineNumber(diffChange.originalStart + diffChange.originalLength - 1);\r\n        const originalEndColumn = originalCharSequence.getEndColumn(diffChange.originalStart + diffChange.originalLength - 1);\r\n        const modifiedStartLineNumber = modifiedCharSequence.getStartLineNumber(diffChange.modifiedStart);\r\n        const modifiedStartColumn = modifiedCharSequence.getStartColumn(diffChange.modifiedStart);\r\n        const modifiedEndLineNumber = modifiedCharSequence.getEndLineNumber(diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n        const modifiedEndColumn = modifiedCharSequence.getEndColumn(diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n        return new CharChange(originalStartLineNumber, originalStartColumn, originalEndLineNumber, originalEndColumn, modifiedStartLineNumber, modifiedStartColumn, modifiedEndLineNumber, modifiedEndColumn);\r\n    }\r\n}\r\nfunction postProcessCharChanges(rawChanges) {\r\n    if (rawChanges.length <= 1) {\r\n        return rawChanges;\r\n    }\r\n    const result = [rawChanges[0]];\r\n    let prevChange = result[0];\r\n    for (let i = 1, len = rawChanges.length; i < len; i++) {\r\n        const currChange = rawChanges[i];\r\n        const originalMatchingLength = currChange.originalStart - (prevChange.originalStart + prevChange.originalLength);\r\n        const modifiedMatchingLength = currChange.modifiedStart - (prevChange.modifiedStart + prevChange.modifiedLength);\r\n        // Both of the above should be equal, but the continueProcessingPredicate may prevent this from being true\r\n        const matchingLength = Math.min(originalMatchingLength, modifiedMatchingLength);\r\n        if (matchingLength < MINIMUM_MATCHING_CHARACTER_LENGTH) {\r\n            // Merge the current change into the previous one\r\n            prevChange.originalLength = (currChange.originalStart + currChange.originalLength) - prevChange.originalStart;\r\n            prevChange.modifiedLength = (currChange.modifiedStart + currChange.modifiedLength) - prevChange.modifiedStart;\r\n        }\r\n        else {\r\n            // Add the current change\r\n            result.push(currChange);\r\n            prevChange = currChange;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nclass LineChange {\r\n    constructor(originalStartLineNumber, originalEndLineNumber, modifiedStartLineNumber, modifiedEndLineNumber, charChanges) {\r\n        this.originalStartLineNumber = originalStartLineNumber;\r\n        this.originalEndLineNumber = originalEndLineNumber;\r\n        this.modifiedStartLineNumber = modifiedStartLineNumber;\r\n        this.modifiedEndLineNumber = modifiedEndLineNumber;\r\n        this.charChanges = charChanges;\r\n    }\r\n    static createFromDiffResult(shouldIgnoreTrimWhitespace, diffChange, originalLineSequence, modifiedLineSequence, continueCharDiff, shouldComputeCharChanges, shouldPostProcessCharChanges) {\r\n        let originalStartLineNumber;\r\n        let originalEndLineNumber;\r\n        let modifiedStartLineNumber;\r\n        let modifiedEndLineNumber;\r\n        let charChanges = undefined;\r\n        if (diffChange.originalLength === 0) {\r\n            originalStartLineNumber = originalLineSequence.getStartLineNumber(diffChange.originalStart) - 1;\r\n            originalEndLineNumber = 0;\r\n        }\r\n        else {\r\n            originalStartLineNumber = originalLineSequence.getStartLineNumber(diffChange.originalStart);\r\n            originalEndLineNumber = originalLineSequence.getEndLineNumber(diffChange.originalStart + diffChange.originalLength - 1);\r\n        }\r\n        if (diffChange.modifiedLength === 0) {\r\n            modifiedStartLineNumber = modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart) - 1;\r\n            modifiedEndLineNumber = 0;\r\n        }\r\n        else {\r\n            modifiedStartLineNumber = modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart);\r\n            modifiedEndLineNumber = modifiedLineSequence.getEndLineNumber(diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n        }\r\n        if (shouldComputeCharChanges && diffChange.originalLength > 0 && diffChange.originalLength < 20 && diffChange.modifiedLength > 0 && diffChange.modifiedLength < 20 && continueCharDiff()) {\r\n            // Compute character changes for diff chunks of at most 20 lines...\r\n            const originalCharSequence = originalLineSequence.createCharSequence(shouldIgnoreTrimWhitespace, diffChange.originalStart, diffChange.originalStart + diffChange.originalLength - 1);\r\n            const modifiedCharSequence = modifiedLineSequence.createCharSequence(shouldIgnoreTrimWhitespace, diffChange.modifiedStart, diffChange.modifiedStart + diffChange.modifiedLength - 1);\r\n            if (originalCharSequence.getElements().length > 0 && modifiedCharSequence.getElements().length > 0) {\r\n                let rawChanges = computeDiff(originalCharSequence, modifiedCharSequence, continueCharDiff, true).changes;\r\n                if (shouldPostProcessCharChanges) {\r\n                    rawChanges = postProcessCharChanges(rawChanges);\r\n                }\r\n                charChanges = [];\r\n                for (let i = 0, length = rawChanges.length; i < length; i++) {\r\n                    charChanges.push(CharChange.createFromDiffChange(rawChanges[i], originalCharSequence, modifiedCharSequence));\r\n                }\r\n            }\r\n        }\r\n        return new LineChange(originalStartLineNumber, originalEndLineNumber, modifiedStartLineNumber, modifiedEndLineNumber, charChanges);\r\n    }\r\n}\r\nexport class DiffComputer {\r\n    constructor(originalLines, modifiedLines, opts) {\r\n        this.shouldComputeCharChanges = opts.shouldComputeCharChanges;\r\n        this.shouldPostProcessCharChanges = opts.shouldPostProcessCharChanges;\r\n        this.shouldIgnoreTrimWhitespace = opts.shouldIgnoreTrimWhitespace;\r\n        this.shouldMakePrettyDiff = opts.shouldMakePrettyDiff;\r\n        this.originalLines = originalLines;\r\n        this.modifiedLines = modifiedLines;\r\n        this.original = new LineSequence(originalLines);\r\n        this.modified = new LineSequence(modifiedLines);\r\n        this.continueLineDiff = createContinueProcessingPredicate(opts.maxComputationTime);\r\n        this.continueCharDiff = createContinueProcessingPredicate(opts.maxComputationTime === 0 ? 0 : Math.min(opts.maxComputationTime, 5000)); // never run after 5s for character changes...\r\n    }\r\n    computeDiff() {\r\n        if (this.original.lines.length === 1 && this.original.lines[0].length === 0) {\r\n            // empty original => fast path\r\n            if (this.modified.lines.length === 1 && this.modified.lines[0].length === 0) {\r\n                return {\r\n                    quitEarly: false,\r\n                    changes: []\r\n                };\r\n            }\r\n            return {\r\n                quitEarly: false,\r\n                changes: [{\r\n                        originalStartLineNumber: 1,\r\n                        originalEndLineNumber: 1,\r\n                        modifiedStartLineNumber: 1,\r\n                        modifiedEndLineNumber: this.modified.lines.length,\r\n                        charChanges: undefined\r\n                    }]\r\n            };\r\n        }\r\n        if (this.modified.lines.length === 1 && this.modified.lines[0].length === 0) {\r\n            // empty modified => fast path\r\n            return {\r\n                quitEarly: false,\r\n                changes: [{\r\n                        originalStartLineNumber: 1,\r\n                        originalEndLineNumber: this.original.lines.length,\r\n                        modifiedStartLineNumber: 1,\r\n                        modifiedEndLineNumber: 1,\r\n                        charChanges: undefined\r\n                    }]\r\n            };\r\n        }\r\n        const diffResult = computeDiff(this.original, this.modified, this.continueLineDiff, this.shouldMakePrettyDiff);\r\n        const rawChanges = diffResult.changes;\r\n        const quitEarly = diffResult.quitEarly;\r\n        // The diff is always computed with ignoring trim whitespace\r\n        // This ensures we get the prettiest diff\r\n        if (this.shouldIgnoreTrimWhitespace) {\r\n            const lineChanges = [];\r\n            for (let i = 0, length = rawChanges.length; i < length; i++) {\r\n                lineChanges.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace, rawChanges[i], this.original, this.modified, this.continueCharDiff, this.shouldComputeCharChanges, this.shouldPostProcessCharChanges));\r\n            }\r\n            return {\r\n                quitEarly: quitEarly,\r\n                changes: lineChanges\r\n            };\r\n        }\r\n        // Need to post-process and introduce changes where the trim whitespace is different\r\n        // Note that we are looping starting at -1 to also cover the lines before the first change\r\n        const result = [];\r\n        let originalLineIndex = 0;\r\n        let modifiedLineIndex = 0;\r\n        for (let i = -1 /* !!!! */, len = rawChanges.length; i < len; i++) {\r\n            const nextChange = (i + 1 < len ? rawChanges[i + 1] : null);\r\n            const originalStop = (nextChange ? nextChange.originalStart : this.originalLines.length);\r\n            const modifiedStop = (nextChange ? nextChange.modifiedStart : this.modifiedLines.length);\r\n            while (originalLineIndex < originalStop && modifiedLineIndex < modifiedStop) {\r\n                const originalLine = this.originalLines[originalLineIndex];\r\n                const modifiedLine = this.modifiedLines[modifiedLineIndex];\r\n                if (originalLine !== modifiedLine) {\r\n                    // These lines differ only in trim whitespace\r\n                    // Check the leading whitespace\r\n                    {\r\n                        let originalStartColumn = getFirstNonBlankColumn(originalLine, 1);\r\n                        let modifiedStartColumn = getFirstNonBlankColumn(modifiedLine, 1);\r\n                        while (originalStartColumn > 1 && modifiedStartColumn > 1) {\r\n                            const originalChar = originalLine.charCodeAt(originalStartColumn - 2);\r\n                            const modifiedChar = modifiedLine.charCodeAt(modifiedStartColumn - 2);\r\n                            if (originalChar !== modifiedChar) {\r\n                                break;\r\n                            }\r\n                            originalStartColumn--;\r\n                            modifiedStartColumn--;\r\n                        }\r\n                        if (originalStartColumn > 1 || modifiedStartColumn > 1) {\r\n                            this._pushTrimWhitespaceCharChange(result, originalLineIndex + 1, 1, originalStartColumn, modifiedLineIndex + 1, 1, modifiedStartColumn);\r\n                        }\r\n                    }\r\n                    // Check the trailing whitespace\r\n                    {\r\n                        let originalEndColumn = getLastNonBlankColumn(originalLine, 1);\r\n                        let modifiedEndColumn = getLastNonBlankColumn(modifiedLine, 1);\r\n                        const originalMaxColumn = originalLine.length + 1;\r\n                        const modifiedMaxColumn = modifiedLine.length + 1;\r\n                        while (originalEndColumn < originalMaxColumn && modifiedEndColumn < modifiedMaxColumn) {\r\n                            const originalChar = originalLine.charCodeAt(originalEndColumn - 1);\r\n                            const modifiedChar = originalLine.charCodeAt(modifiedEndColumn - 1);\r\n                            if (originalChar !== modifiedChar) {\r\n                                break;\r\n                            }\r\n                            originalEndColumn++;\r\n                            modifiedEndColumn++;\r\n                        }\r\n                        if (originalEndColumn < originalMaxColumn || modifiedEndColumn < modifiedMaxColumn) {\r\n                            this._pushTrimWhitespaceCharChange(result, originalLineIndex + 1, originalEndColumn, originalMaxColumn, modifiedLineIndex + 1, modifiedEndColumn, modifiedMaxColumn);\r\n                        }\r\n                    }\r\n                }\r\n                originalLineIndex++;\r\n                modifiedLineIndex++;\r\n            }\r\n            if (nextChange) {\r\n                // Emit the actual change\r\n                result.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace, nextChange, this.original, this.modified, this.continueCharDiff, this.shouldComputeCharChanges, this.shouldPostProcessCharChanges));\r\n                originalLineIndex += nextChange.originalLength;\r\n                modifiedLineIndex += nextChange.modifiedLength;\r\n            }\r\n        }\r\n        return {\r\n            quitEarly: quitEarly,\r\n            changes: result\r\n        };\r\n    }\r\n    _pushTrimWhitespaceCharChange(result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn) {\r\n        if (this._mergeTrimWhitespaceCharChange(result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn)) {\r\n            // Merged into previous\r\n            return;\r\n        }\r\n        let charChanges = undefined;\r\n        if (this.shouldComputeCharChanges) {\r\n            charChanges = [new CharChange(originalLineNumber, originalStartColumn, originalLineNumber, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedLineNumber, modifiedEndColumn)];\r\n        }\r\n        result.push(new LineChange(originalLineNumber, originalLineNumber, modifiedLineNumber, modifiedLineNumber, charChanges));\r\n    }\r\n    _mergeTrimWhitespaceCharChange(result, originalLineNumber, originalStartColumn, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedEndColumn) {\r\n        const len = result.length;\r\n        if (len === 0) {\r\n            return false;\r\n        }\r\n        const prevChange = result[len - 1];\r\n        if (prevChange.originalEndLineNumber === 0 || prevChange.modifiedEndLineNumber === 0) {\r\n            // Don't merge with inserts/deletes\r\n            return false;\r\n        }\r\n        if (prevChange.originalEndLineNumber === originalLineNumber && prevChange.modifiedEndLineNumber === modifiedLineNumber) {\r\n            if (this.shouldComputeCharChanges && prevChange.charChanges) {\r\n                prevChange.charChanges.push(new CharChange(originalLineNumber, originalStartColumn, originalLineNumber, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedLineNumber, modifiedEndColumn));\r\n            }\r\n            return true;\r\n        }\r\n        if (prevChange.originalEndLineNumber + 1 === originalLineNumber && prevChange.modifiedEndLineNumber + 1 === modifiedLineNumber) {\r\n            prevChange.originalEndLineNumber = originalLineNumber;\r\n            prevChange.modifiedEndLineNumber = modifiedLineNumber;\r\n            if (this.shouldComputeCharChanges && prevChange.charChanges) {\r\n                prevChange.charChanges.push(new CharChange(originalLineNumber, originalStartColumn, originalLineNumber, originalEndColumn, modifiedLineNumber, modifiedStartColumn, modifiedLineNumber, modifiedEndColumn));\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nfunction getFirstNonBlankColumn(txt, defaultValue) {\r\n    const r = strings.firstNonWhitespaceIndex(txt);\r\n    if (r === -1) {\r\n        return defaultValue;\r\n    }\r\n    return r + 1;\r\n}\r\nfunction getLastNonBlankColumn(txt, defaultValue) {\r\n    const r = strings.lastNonWhitespaceIndex(txt);\r\n    if (r === -1) {\r\n        return defaultValue;\r\n    }\r\n    return r + 2;\r\n}\r\nfunction createContinueProcessingPredicate(maximumRuntime) {\r\n    if (maximumRuntime === 0) {\r\n        return () => true;\r\n    }\r\n    const startTime = Date.now();\r\n    return () => {\r\n        return Date.now() - startTime < maximumRuntime;\r\n    };\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { forEachAdjacent } from '../../../../../base/common/arrays.js';\r\nimport { BugIndicatingError } from '../../../../../base/common/errors.js';\r\nimport { OffsetRange } from '../../../core/offsetRange.js';\r\nexport class DiffAlgorithmResult {\r\n    static trivial(seq1, seq2) {\r\n        return new DiffAlgorithmResult([new SequenceDiff(OffsetRange.ofLength(seq1.length), OffsetRange.ofLength(seq2.length))], false);\r\n    }\r\n    static trivialTimedOut(seq1, seq2) {\r\n        return new DiffAlgorithmResult([new SequenceDiff(OffsetRange.ofLength(seq1.length), OffsetRange.ofLength(seq2.length))], true);\r\n    }\r\n    constructor(diffs, \r\n    /**\r\n     * Indicates if the time out was reached.\r\n     * In that case, the diffs might be an approximation and the user should be asked to rerun the diff with more time.\r\n     */\r\n    hitTimeout) {\r\n        this.diffs = diffs;\r\n        this.hitTimeout = hitTimeout;\r\n    }\r\n}\r\nexport class SequenceDiff {\r\n    static invert(sequenceDiffs, doc1Length) {\r\n        const result = [];\r\n        forEachAdjacent(sequenceDiffs, (a, b) => {\r\n            result.push(SequenceDiff.fromOffsetPairs(a ? a.getEndExclusives() : OffsetPair.zero, b ? b.getStarts() : new OffsetPair(doc1Length, (a ? a.seq2Range.endExclusive - a.seq1Range.endExclusive : 0) + doc1Length)));\r\n        });\r\n        return result;\r\n    }\r\n    static fromOffsetPairs(start, endExclusive) {\r\n        return new SequenceDiff(new OffsetRange(start.offset1, endExclusive.offset1), new OffsetRange(start.offset2, endExclusive.offset2));\r\n    }\r\n    constructor(seq1Range, seq2Range) {\r\n        this.seq1Range = seq1Range;\r\n        this.seq2Range = seq2Range;\r\n    }\r\n    swap() {\r\n        return new SequenceDiff(this.seq2Range, this.seq1Range);\r\n    }\r\n    toString() {\r\n        return `${this.seq1Range} <-> ${this.seq2Range}`;\r\n    }\r\n    join(other) {\r\n        return new SequenceDiff(this.seq1Range.join(other.seq1Range), this.seq2Range.join(other.seq2Range));\r\n    }\r\n    delta(offset) {\r\n        if (offset === 0) {\r\n            return this;\r\n        }\r\n        return new SequenceDiff(this.seq1Range.delta(offset), this.seq2Range.delta(offset));\r\n    }\r\n    deltaStart(offset) {\r\n        if (offset === 0) {\r\n            return this;\r\n        }\r\n        return new SequenceDiff(this.seq1Range.deltaStart(offset), this.seq2Range.deltaStart(offset));\r\n    }\r\n    deltaEnd(offset) {\r\n        if (offset === 0) {\r\n            return this;\r\n        }\r\n        return new SequenceDiff(this.seq1Range.deltaEnd(offset), this.seq2Range.deltaEnd(offset));\r\n    }\r\n    intersect(other) {\r\n        const i1 = this.seq1Range.intersect(other.seq1Range);\r\n        const i2 = this.seq2Range.intersect(other.seq2Range);\r\n        if (!i1 || !i2) {\r\n            return undefined;\r\n        }\r\n        return new SequenceDiff(i1, i2);\r\n    }\r\n    getStarts() {\r\n        return new OffsetPair(this.seq1Range.start, this.seq2Range.start);\r\n    }\r\n    getEndExclusives() {\r\n        return new OffsetPair(this.seq1Range.endExclusive, this.seq2Range.endExclusive);\r\n    }\r\n}\r\nexport class OffsetPair {\r\n    constructor(offset1, offset2) {\r\n        this.offset1 = offset1;\r\n        this.offset2 = offset2;\r\n    }\r\n    toString() {\r\n        return `${this.offset1} <-> ${this.offset2}`;\r\n    }\r\n}\r\nOffsetPair.zero = new OffsetPair(0, 0);\r\nOffsetPair.max = new OffsetPair(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\r\nexport class InfiniteTimeout {\r\n    isValid() {\r\n        return true;\r\n    }\r\n}\r\nInfiniteTimeout.instance = new InfiniteTimeout();\r\nexport class DateTimeout {\r\n    constructor(timeout) {\r\n        this.timeout = timeout;\r\n        this.startTime = Date.now();\r\n        this.valid = true;\r\n        if (timeout <= 0) {\r\n            throw new BugIndicatingError('timeout must be positive');\r\n        }\r\n    }\r\n    // Recommendation: Set a log-point `{this.disable()}` in the body\r\n    isValid() {\r\n        const valid = Date.now() - this.startTime < this.timeout;\r\n        if (!valid && this.valid) {\r\n            this.valid = false; // timeout reached\r\n            // eslint-disable-next-line no-debugger\r\n            debugger; // WARNING: Most likely debugging caused the timeout. Call `this.disable()` to continue without timing out.\r\n        }\r\n        return this.valid;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport class Array2D {\r\n    constructor(width, height) {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.array = [];\r\n        this.array = new Array(width * height);\r\n    }\r\n    get(x, y) {\r\n        return this.array[x + y * this.width];\r\n    }\r\n    set(x, y, value) {\r\n        this.array[x + y * this.width] = value;\r\n    }\r\n}\r\nexport function isSpace(charCode) {\r\n    return charCode === 32 /* CharCode.Space */ || charCode === 9 /* CharCode.Tab */;\r\n}\r\nexport class LineRangeFragment {\r\n    static getKey(chr) {\r\n        let key = this.chrKeys.get(chr);\r\n        if (key === undefined) {\r\n            key = this.chrKeys.size;\r\n            this.chrKeys.set(chr, key);\r\n        }\r\n        return key;\r\n    }\r\n    constructor(range, lines, source) {\r\n        this.range = range;\r\n        this.lines = lines;\r\n        this.source = source;\r\n        this.histogram = [];\r\n        let counter = 0;\r\n        for (let i = range.startLineNumber - 1; i < range.endLineNumberExclusive - 1; i++) {\r\n            const line = lines[i];\r\n            for (let j = 0; j < line.length; j++) {\r\n                counter++;\r\n                const chr = line[j];\r\n                const key = LineRangeFragment.getKey(chr);\r\n                this.histogram[key] = (this.histogram[key] || 0) + 1;\r\n            }\r\n            counter++;\r\n            const key = LineRangeFragment.getKey('\\n');\r\n            this.histogram[key] = (this.histogram[key] || 0) + 1;\r\n        }\r\n        this.totalCount = counter;\r\n    }\r\n    computeSimilarity(other) {\r\n        var _a, _b;\r\n        let sumDifferences = 0;\r\n        const maxLength = Math.max(this.histogram.length, other.histogram.length);\r\n        for (let i = 0; i < maxLength; i++) {\r\n            sumDifferences += Math.abs(((_a = this.histogram[i]) !== null && _a !== void 0 ? _a : 0) - ((_b = other.histogram[i]) !== null && _b !== void 0 ? _b : 0));\r\n        }\r\n        return 1 - (sumDifferences / (this.totalCount + other.totalCount));\r\n    }\r\n}\r\nLineRangeFragment.chrKeys = new Map();\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { OffsetRange } from '../../../core/offsetRange.js';\r\nimport { SequenceDiff, InfiniteTimeout, DiffAlgorithmResult } from './diffAlgorithm.js';\r\nimport { Array2D } from '../utils.js';\r\n/**\r\n * A O(MN) diffing algorithm that supports a score function.\r\n * The algorithm can be improved by processing the 2d array diagonally.\r\n*/\r\nexport class DynamicProgrammingDiffing {\r\n    compute(sequence1, sequence2, timeout = InfiniteTimeout.instance, equalityScore) {\r\n        if (sequence1.length === 0 || sequence2.length === 0) {\r\n            return DiffAlgorithmResult.trivial(sequence1, sequence2);\r\n        }\r\n        /**\r\n         * lcsLengths.get(i, j): Length of the longest common subsequence of sequence1.substring(0, i + 1) and sequence2.substring(0, j + 1).\r\n         */\r\n        const lcsLengths = new Array2D(sequence1.length, sequence2.length);\r\n        const directions = new Array2D(sequence1.length, sequence2.length);\r\n        const lengths = new Array2D(sequence1.length, sequence2.length);\r\n        // ==== Initializing lcsLengths ====\r\n        for (let s1 = 0; s1 < sequence1.length; s1++) {\r\n            for (let s2 = 0; s2 < sequence2.length; s2++) {\r\n                if (!timeout.isValid()) {\r\n                    return DiffAlgorithmResult.trivialTimedOut(sequence1, sequence2);\r\n                }\r\n                const horizontalLen = s1 === 0 ? 0 : lcsLengths.get(s1 - 1, s2);\r\n                const verticalLen = s2 === 0 ? 0 : lcsLengths.get(s1, s2 - 1);\r\n                let extendedSeqScore;\r\n                if (sequence1.getElement(s1) === sequence2.getElement(s2)) {\r\n                    if (s1 === 0 || s2 === 0) {\r\n                        extendedSeqScore = 0;\r\n                    }\r\n                    else {\r\n                        extendedSeqScore = lcsLengths.get(s1 - 1, s2 - 1);\r\n                    }\r\n                    if (s1 > 0 && s2 > 0 && directions.get(s1 - 1, s2 - 1) === 3) {\r\n                        // Prefer consecutive diagonals\r\n                        extendedSeqScore += lengths.get(s1 - 1, s2 - 1);\r\n                    }\r\n                    extendedSeqScore += (equalityScore ? equalityScore(s1, s2) : 1);\r\n                }\r\n                else {\r\n                    extendedSeqScore = -1;\r\n                }\r\n                const newValue = Math.max(horizontalLen, verticalLen, extendedSeqScore);\r\n                if (newValue === extendedSeqScore) {\r\n                    // Prefer diagonals\r\n                    const prevLen = s1 > 0 && s2 > 0 ? lengths.get(s1 - 1, s2 - 1) : 0;\r\n                    lengths.set(s1, s2, prevLen + 1);\r\n                    directions.set(s1, s2, 3);\r\n                }\r\n                else if (newValue === horizontalLen) {\r\n                    lengths.set(s1, s2, 0);\r\n                    directions.set(s1, s2, 1);\r\n                }\r\n                else if (newValue === verticalLen) {\r\n                    lengths.set(s1, s2, 0);\r\n                    directions.set(s1, s2, 2);\r\n                }\r\n                lcsLengths.set(s1, s2, newValue);\r\n            }\r\n        }\r\n        // ==== Backtracking ====\r\n        const result = [];\r\n        let lastAligningPosS1 = sequence1.length;\r\n        let lastAligningPosS2 = sequence2.length;\r\n        function reportDecreasingAligningPositions(s1, s2) {\r\n            if (s1 + 1 !== lastAligningPosS1 || s2 + 1 !== lastAligningPosS2) {\r\n                result.push(new SequenceDiff(new OffsetRange(s1 + 1, lastAligningPosS1), new OffsetRange(s2 + 1, lastAligningPosS2)));\r\n            }\r\n            lastAligningPosS1 = s1;\r\n            lastAligningPosS2 = s2;\r\n        }\r\n        let s1 = sequence1.length - 1;\r\n        let s2 = sequence2.length - 1;\r\n        while (s1 >= 0 && s2 >= 0) {\r\n            if (directions.get(s1, s2) === 3) {\r\n                reportDecreasingAligningPositions(s1, s2);\r\n                s1--;\r\n                s2--;\r\n            }\r\n            else {\r\n                if (directions.get(s1, s2) === 1) {\r\n                    s1--;\r\n                }\r\n                else {\r\n                    s2--;\r\n                }\r\n            }\r\n        }\r\n        reportDecreasingAligningPositions(-1, -1);\r\n        result.reverse();\r\n        return new DiffAlgorithmResult(result, false);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { OffsetRange } from '../../../core/offsetRange.js';\r\nimport { DiffAlgorithmResult, InfiniteTimeout, SequenceDiff } from './diffAlgorithm.js';\r\n/**\r\n * An O(ND) diff algorithm that has a quadratic space worst-case complexity.\r\n*/\r\nexport class MyersDiffAlgorithm {\r\n    compute(seq1, seq2, timeout = InfiniteTimeout.instance) {\r\n        // These are common special cases.\r\n        // The early return improves performance dramatically.\r\n        if (seq1.length === 0 || seq2.length === 0) {\r\n            return DiffAlgorithmResult.trivial(seq1, seq2);\r\n        }\r\n        const seqX = seq1; // Text on the x axis\r\n        const seqY = seq2; // Text on the y axis\r\n        function getXAfterSnake(x, y) {\r\n            while (x < seqX.length && y < seqY.length && seqX.getElement(x) === seqY.getElement(y)) {\r\n                x++;\r\n                y++;\r\n            }\r\n            return x;\r\n        }\r\n        let d = 0;\r\n        // V[k]: X value of longest d-line that ends in diagonal k.\r\n        // d-line: path from (0,0) to (x,y) that uses exactly d non-diagonals.\r\n        // diagonal k: Set of points (x,y) with x-y = k.\r\n        // k=1 -> (1,0),(2,1)\r\n        const V = new FastInt32Array();\r\n        V.set(0, getXAfterSnake(0, 0));\r\n        const paths = new FastArrayNegativeIndices();\r\n        paths.set(0, V.get(0) === 0 ? null : new SnakePath(null, 0, 0, V.get(0)));\r\n        let k = 0;\r\n        loop: while (true) {\r\n            d++;\r\n            if (!timeout.isValid()) {\r\n                return DiffAlgorithmResult.trivialTimedOut(seqX, seqY);\r\n            }\r\n            // The paper has `for (k = -d; k <= d; k += 2)`, but we can ignore diagonals that cannot influence the result.\r\n            const lowerBound = -Math.min(d, seqY.length + (d % 2));\r\n            const upperBound = Math.min(d, seqX.length + (d % 2));\r\n            for (k = lowerBound; k <= upperBound; k += 2) {\r\n                let step = 0;\r\n                // We can use the X values of (d-1)-lines to compute X value of the longest d-lines.\r\n                const maxXofDLineTop = k === upperBound ? -1 : V.get(k + 1); // We take a vertical non-diagonal (add a symbol in seqX)\r\n                const maxXofDLineLeft = k === lowerBound ? -1 : V.get(k - 1) + 1; // We take a horizontal non-diagonal (+1 x) (delete a symbol in seqX)\r\n                step++;\r\n                const x = Math.min(Math.max(maxXofDLineTop, maxXofDLineLeft), seqX.length);\r\n                const y = x - k;\r\n                step++;\r\n                if (x > seqX.length || y > seqY.length) {\r\n                    // This diagonal is irrelevant for the result.\r\n                    // TODO: Don't pay the cost for this in the next iteration.\r\n                    continue;\r\n                }\r\n                const newMaxX = getXAfterSnake(x, y);\r\n                V.set(k, newMaxX);\r\n                const lastPath = x === maxXofDLineTop ? paths.get(k + 1) : paths.get(k - 1);\r\n                paths.set(k, newMaxX !== x ? new SnakePath(lastPath, x, y, newMaxX - x) : lastPath);\r\n                if (V.get(k) === seqX.length && V.get(k) - k === seqY.length) {\r\n                    break loop;\r\n                }\r\n            }\r\n        }\r\n        let path = paths.get(k);\r\n        const result = [];\r\n        let lastAligningPosS1 = seqX.length;\r\n        let lastAligningPosS2 = seqY.length;\r\n        while (true) {\r\n            const endX = path ? path.x + path.length : 0;\r\n            const endY = path ? path.y + path.length : 0;\r\n            if (endX !== lastAligningPosS1 || endY !== lastAligningPosS2) {\r\n                result.push(new SequenceDiff(new OffsetRange(endX, lastAligningPosS1), new OffsetRange(endY, lastAligningPosS2)));\r\n            }\r\n            if (!path) {\r\n                break;\r\n            }\r\n            lastAligningPosS1 = path.x;\r\n            lastAligningPosS2 = path.y;\r\n            path = path.prev;\r\n        }\r\n        result.reverse();\r\n        return new DiffAlgorithmResult(result, false);\r\n    }\r\n}\r\nclass SnakePath {\r\n    constructor(prev, x, y, length) {\r\n        this.prev = prev;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.length = length;\r\n    }\r\n}\r\n/**\r\n * An array that supports fast negative indices.\r\n*/\r\nclass FastInt32Array {\r\n    constructor() {\r\n        this.positiveArr = new Int32Array(10);\r\n        this.negativeArr = new Int32Array(10);\r\n    }\r\n    get(idx) {\r\n        if (idx < 0) {\r\n            idx = -idx - 1;\r\n            return this.negativeArr[idx];\r\n        }\r\n        else {\r\n            return this.positiveArr[idx];\r\n        }\r\n    }\r\n    set(idx, value) {\r\n        if (idx < 0) {\r\n            idx = -idx - 1;\r\n            if (idx >= this.negativeArr.length) {\r\n                const arr = this.negativeArr;\r\n                this.negativeArr = new Int32Array(arr.length * 2);\r\n                this.negativeArr.set(arr);\r\n            }\r\n            this.negativeArr[idx] = value;\r\n        }\r\n        else {\r\n            if (idx >= this.positiveArr.length) {\r\n                const arr = this.positiveArr;\r\n                this.positiveArr = new Int32Array(arr.length * 2);\r\n                this.positiveArr.set(arr);\r\n            }\r\n            this.positiveArr[idx] = value;\r\n        }\r\n    }\r\n}\r\n/**\r\n * An array that supports fast negative indices.\r\n*/\r\nclass FastArrayNegativeIndices {\r\n    constructor() {\r\n        this.positiveArr = [];\r\n        this.negativeArr = [];\r\n    }\r\n    get(idx) {\r\n        if (idx < 0) {\r\n            idx = -idx - 1;\r\n            return this.negativeArr[idx];\r\n        }\r\n        else {\r\n            return this.positiveArr[idx];\r\n        }\r\n    }\r\n    set(idx, value) {\r\n        if (idx < 0) {\r\n            idx = -idx - 1;\r\n            this.negativeArr[idx] = value;\r\n        }\r\n        else {\r\n            this.positiveArr[idx] = value;\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { findLastIdxMonotonous, findLastMonotonous, findFirstMonotonous } from '../../../../base/common/arraysFind.js';\r\nimport { OffsetRange } from '../../core/offsetRange.js';\r\nimport { Position } from '../../core/position.js';\r\nimport { Range } from '../../core/range.js';\r\nimport { isSpace } from './utils.js';\r\nexport class LinesSliceCharSequence {\r\n    constructor(lines, lineRange, considerWhitespaceChanges) {\r\n        // This slice has to have lineRange.length many \\n! (otherwise diffing against an empty slice will be problematic)\r\n        // (Unless it covers the entire document, in that case the other slice also has to cover the entire document ands it's okay)\r\n        this.lines = lines;\r\n        this.considerWhitespaceChanges = considerWhitespaceChanges;\r\n        this.elements = [];\r\n        this.firstCharOffsetByLine = [];\r\n        // To account for trimming\r\n        this.additionalOffsetByLine = [];\r\n        // If the slice covers the end, but does not start at the beginning, we include just the \\n of the previous line.\r\n        let trimFirstLineFully = false;\r\n        if (lineRange.start > 0 && lineRange.endExclusive >= lines.length) {\r\n            lineRange = new OffsetRange(lineRange.start - 1, lineRange.endExclusive);\r\n            trimFirstLineFully = true;\r\n        }\r\n        this.lineRange = lineRange;\r\n        this.firstCharOffsetByLine[0] = 0;\r\n        for (let i = this.lineRange.start; i < this.lineRange.endExclusive; i++) {\r\n            let line = lines[i];\r\n            let offset = 0;\r\n            if (trimFirstLineFully) {\r\n                offset = line.length;\r\n                line = '';\r\n                trimFirstLineFully = false;\r\n            }\r\n            else if (!considerWhitespaceChanges) {\r\n                const trimmedStartLine = line.trimStart();\r\n                offset = line.length - trimmedStartLine.length;\r\n                line = trimmedStartLine.trimEnd();\r\n            }\r\n            this.additionalOffsetByLine.push(offset);\r\n            for (let i = 0; i < line.length; i++) {\r\n                this.elements.push(line.charCodeAt(i));\r\n            }\r\n            // Don't add an \\n that does not exist in the document.\r\n            if (i < lines.length - 1) {\r\n                this.elements.push('\\n'.charCodeAt(0));\r\n                this.firstCharOffsetByLine[i - this.lineRange.start + 1] = this.elements.length;\r\n            }\r\n        }\r\n        // To account for the last line\r\n        this.additionalOffsetByLine.push(0);\r\n    }\r\n    toString() {\r\n        return `Slice: \"${this.text}\"`;\r\n    }\r\n    get text() {\r\n        return this.getText(new OffsetRange(0, this.length));\r\n    }\r\n    getText(range) {\r\n        return this.elements.slice(range.start, range.endExclusive).map(e => String.fromCharCode(e)).join('');\r\n    }\r\n    getElement(offset) {\r\n        return this.elements[offset];\r\n    }\r\n    get length() {\r\n        return this.elements.length;\r\n    }\r\n    getBoundaryScore(length) {\r\n        //   a   b   c   ,           d   e   f\r\n        // 11  0   0   12  15  6   13  0   0   11\r\n        const prevCategory = getCategory(length > 0 ? this.elements[length - 1] : -1);\r\n        const nextCategory = getCategory(length < this.elements.length ? this.elements[length] : -1);\r\n        if (prevCategory === 7 /* CharBoundaryCategory.LineBreakCR */ && nextCategory === 8 /* CharBoundaryCategory.LineBreakLF */) {\r\n            // don't break between \\r and \\n\r\n            return 0;\r\n        }\r\n        let score = 0;\r\n        if (prevCategory !== nextCategory) {\r\n            score += 10;\r\n            if (prevCategory === 0 /* CharBoundaryCategory.WordLower */ && nextCategory === 1 /* CharBoundaryCategory.WordUpper */) {\r\n                score += 1;\r\n            }\r\n        }\r\n        score += getCategoryBoundaryScore(prevCategory);\r\n        score += getCategoryBoundaryScore(nextCategory);\r\n        return score;\r\n    }\r\n    translateOffset(offset) {\r\n        // find smallest i, so that lineBreakOffsets[i] <= offset using binary search\r\n        if (this.lineRange.isEmpty) {\r\n            return new Position(this.lineRange.start + 1, 1);\r\n        }\r\n        const i = findLastIdxMonotonous(this.firstCharOffsetByLine, (value) => value <= offset);\r\n        return new Position(this.lineRange.start + i + 1, offset - this.firstCharOffsetByLine[i] + this.additionalOffsetByLine[i] + 1);\r\n    }\r\n    translateRange(range) {\r\n        return Range.fromPositions(this.translateOffset(range.start), this.translateOffset(range.endExclusive));\r\n    }\r\n    /**\r\n     * Finds the word that contains the character at the given offset\r\n     */\r\n    findWordContaining(offset) {\r\n        if (offset < 0 || offset >= this.elements.length) {\r\n            return undefined;\r\n        }\r\n        if (!isWordChar(this.elements[offset])) {\r\n            return undefined;\r\n        }\r\n        // find start\r\n        let start = offset;\r\n        while (start > 0 && isWordChar(this.elements[start - 1])) {\r\n            start--;\r\n        }\r\n        // find end\r\n        let end = offset;\r\n        while (end < this.elements.length && isWordChar(this.elements[end])) {\r\n            end++;\r\n        }\r\n        return new OffsetRange(start, end);\r\n    }\r\n    countLinesIn(range) {\r\n        return this.translateOffset(range.endExclusive).lineNumber - this.translateOffset(range.start).lineNumber;\r\n    }\r\n    isStronglyEqual(offset1, offset2) {\r\n        return this.elements[offset1] === this.elements[offset2];\r\n    }\r\n    extendToFullLines(range) {\r\n        var _a, _b;\r\n        const start = (_a = findLastMonotonous(this.firstCharOffsetByLine, x => x <= range.start)) !== null && _a !== void 0 ? _a : 0;\r\n        const end = (_b = findFirstMonotonous(this.firstCharOffsetByLine, x => range.endExclusive <= x)) !== null && _b !== void 0 ? _b : this.elements.length;\r\n        return new OffsetRange(start, end);\r\n    }\r\n}\r\nfunction isWordChar(charCode) {\r\n    return charCode >= 97 /* CharCode.a */ && charCode <= 122 /* CharCode.z */\r\n        || charCode >= 65 /* CharCode.A */ && charCode <= 90 /* CharCode.Z */\r\n        || charCode >= 48 /* CharCode.Digit0 */ && charCode <= 57 /* CharCode.Digit9 */;\r\n}\r\nconst score = {\r\n    [0 /* CharBoundaryCategory.WordLower */]: 0,\r\n    [1 /* CharBoundaryCategory.WordUpper */]: 0,\r\n    [2 /* CharBoundaryCategory.WordNumber */]: 0,\r\n    [3 /* CharBoundaryCategory.End */]: 10,\r\n    [4 /* CharBoundaryCategory.Other */]: 2,\r\n    [5 /* CharBoundaryCategory.Separator */]: 3,\r\n    [6 /* CharBoundaryCategory.Space */]: 3,\r\n    [7 /* CharBoundaryCategory.LineBreakCR */]: 10,\r\n    [8 /* CharBoundaryCategory.LineBreakLF */]: 10,\r\n};\r\nfunction getCategoryBoundaryScore(category) {\r\n    return score[category];\r\n}\r\nfunction getCategory(charCode) {\r\n    if (charCode === 10 /* CharCode.LineFeed */) {\r\n        return 8 /* CharBoundaryCategory.LineBreakLF */;\r\n    }\r\n    else if (charCode === 13 /* CharCode.CarriageReturn */) {\r\n        return 7 /* CharBoundaryCategory.LineBreakCR */;\r\n    }\r\n    else if (isSpace(charCode)) {\r\n        return 6 /* CharBoundaryCategory.Space */;\r\n    }\r\n    else if (charCode >= 97 /* CharCode.a */ && charCode <= 122 /* CharCode.z */) {\r\n        return 0 /* CharBoundaryCategory.WordLower */;\r\n    }\r\n    else if (charCode >= 65 /* CharCode.A */ && charCode <= 90 /* CharCode.Z */) {\r\n        return 1 /* CharBoundaryCategory.WordUpper */;\r\n    }\r\n    else if (charCode >= 48 /* CharCode.Digit0 */ && charCode <= 57 /* CharCode.Digit9 */) {\r\n        return 2 /* CharBoundaryCategory.WordNumber */;\r\n    }\r\n    else if (charCode === -1) {\r\n        return 3 /* CharBoundaryCategory.End */;\r\n    }\r\n    else if (charCode === 44 /* CharCode.Comma */ || charCode === 59 /* CharCode.Semicolon */) {\r\n        return 5 /* CharBoundaryCategory.Separator */;\r\n    }\r\n    else {\r\n        return 4 /* CharBoundaryCategory.Other */;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { SequenceDiff } from './algorithms/diffAlgorithm.js';\r\nimport { LineRangeMapping } from '../rangeMapping.js';\r\nimport { pushMany, compareBy, numberComparator, reverseOrder } from '../../../../base/common/arrays.js';\r\nimport { MonotonousArray, findLastMonotonous } from '../../../../base/common/arraysFind.js';\r\nimport { SetMap } from '../../../../base/common/map.js';\r\nimport { LineRange, LineRangeSet } from '../../core/lineRange.js';\r\nimport { OffsetRange } from '../../core/offsetRange.js';\r\nimport { LinesSliceCharSequence } from './linesSliceCharSequence.js';\r\nimport { LineRangeFragment, isSpace } from './utils.js';\r\nimport { MyersDiffAlgorithm } from './algorithms/myersDiffAlgorithm.js';\r\nexport function computeMovedLines(changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout) {\r\n    let { moves, excludedChanges } = computeMovesFromSimpleDeletionsToSimpleInsertions(changes, originalLines, modifiedLines, timeout);\r\n    if (!timeout.isValid()) {\r\n        return [];\r\n    }\r\n    const filteredChanges = changes.filter(c => !excludedChanges.has(c));\r\n    const unchangedMoves = computeUnchangedMoves(filteredChanges, hashedOriginalLines, hashedModifiedLines, originalLines, modifiedLines, timeout);\r\n    pushMany(moves, unchangedMoves);\r\n    moves = joinCloseConsecutiveMoves(moves);\r\n    // Ignore too short moves\r\n    moves = moves.filter(current => {\r\n        const lines = current.original.toOffsetRange().slice(originalLines).map(l => l.trim());\r\n        const originalText = lines.join('\\n');\r\n        return originalText.length >= 15 && countWhere(lines, l => l.length >= 2) >= 2;\r\n    });\r\n    moves = removeMovesInSameDiff(changes, moves);\r\n    return moves;\r\n}\r\nfunction countWhere(arr, predicate) {\r\n    let count = 0;\r\n    for (const t of arr) {\r\n        if (predicate(t)) {\r\n            count++;\r\n        }\r\n    }\r\n    return count;\r\n}\r\nfunction computeMovesFromSimpleDeletionsToSimpleInsertions(changes, originalLines, modifiedLines, timeout) {\r\n    const moves = [];\r\n    const deletions = changes\r\n        .filter(c => c.modified.isEmpty && c.original.length >= 3)\r\n        .map(d => new LineRangeFragment(d.original, originalLines, d));\r\n    const insertions = new Set(changes\r\n        .filter(c => c.original.isEmpty && c.modified.length >= 3)\r\n        .map(d => new LineRangeFragment(d.modified, modifiedLines, d)));\r\n    const excludedChanges = new Set();\r\n    for (const deletion of deletions) {\r\n        let highestSimilarity = -1;\r\n        let best;\r\n        for (const insertion of insertions) {\r\n            const similarity = deletion.computeSimilarity(insertion);\r\n            if (similarity > highestSimilarity) {\r\n                highestSimilarity = similarity;\r\n                best = insertion;\r\n            }\r\n        }\r\n        if (highestSimilarity > 0.90 && best) {\r\n            insertions.delete(best);\r\n            moves.push(new LineRangeMapping(deletion.range, best.range));\r\n            excludedChanges.add(deletion.source);\r\n            excludedChanges.add(best.source);\r\n        }\r\n        if (!timeout.isValid()) {\r\n            return { moves, excludedChanges };\r\n        }\r\n    }\r\n    return { moves, excludedChanges };\r\n}\r\nfunction computeUnchangedMoves(changes, hashedOriginalLines, hashedModifiedLines, originalLines, modifiedLines, timeout) {\r\n    const moves = [];\r\n    const original3LineHashes = new SetMap();\r\n    for (const change of changes) {\r\n        for (let i = change.original.startLineNumber; i < change.original.endLineNumberExclusive - 2; i++) {\r\n            const key = `${hashedOriginalLines[i - 1]}:${hashedOriginalLines[i + 1 - 1]}:${hashedOriginalLines[i + 2 - 1]}`;\r\n            original3LineHashes.add(key, { range: new LineRange(i, i + 3) });\r\n        }\r\n    }\r\n    const possibleMappings = [];\r\n    changes.sort(compareBy(c => c.modified.startLineNumber, numberComparator));\r\n    for (const change of changes) {\r\n        let lastMappings = [];\r\n        for (let i = change.modified.startLineNumber; i < change.modified.endLineNumberExclusive - 2; i++) {\r\n            const key = `${hashedModifiedLines[i - 1]}:${hashedModifiedLines[i + 1 - 1]}:${hashedModifiedLines[i + 2 - 1]}`;\r\n            const currentModifiedRange = new LineRange(i, i + 3);\r\n            const nextMappings = [];\r\n            original3LineHashes.forEach(key, ({ range }) => {\r\n                for (const lastMapping of lastMappings) {\r\n                    // does this match extend some last match?\r\n                    if (lastMapping.originalLineRange.endLineNumberExclusive + 1 === range.endLineNumberExclusive &&\r\n                        lastMapping.modifiedLineRange.endLineNumberExclusive + 1 === currentModifiedRange.endLineNumberExclusive) {\r\n                        lastMapping.originalLineRange = new LineRange(lastMapping.originalLineRange.startLineNumber, range.endLineNumberExclusive);\r\n                        lastMapping.modifiedLineRange = new LineRange(lastMapping.modifiedLineRange.startLineNumber, currentModifiedRange.endLineNumberExclusive);\r\n                        nextMappings.push(lastMapping);\r\n                        return;\r\n                    }\r\n                }\r\n                const mapping = {\r\n                    modifiedLineRange: currentModifiedRange,\r\n                    originalLineRange: range,\r\n                };\r\n                possibleMappings.push(mapping);\r\n                nextMappings.push(mapping);\r\n            });\r\n            lastMappings = nextMappings;\r\n        }\r\n        if (!timeout.isValid()) {\r\n            return [];\r\n        }\r\n    }\r\n    possibleMappings.sort(reverseOrder(compareBy(m => m.modifiedLineRange.length, numberComparator)));\r\n    const modifiedSet = new LineRangeSet();\r\n    const originalSet = new LineRangeSet();\r\n    for (const mapping of possibleMappings) {\r\n        const diffOrigToMod = mapping.modifiedLineRange.startLineNumber - mapping.originalLineRange.startLineNumber;\r\n        const modifiedSections = modifiedSet.subtractFrom(mapping.modifiedLineRange);\r\n        const originalTranslatedSections = originalSet.subtractFrom(mapping.originalLineRange).getWithDelta(diffOrigToMod);\r\n        const modifiedIntersectedSections = modifiedSections.getIntersection(originalTranslatedSections);\r\n        for (const s of modifiedIntersectedSections.ranges) {\r\n            if (s.length < 3) {\r\n                continue;\r\n            }\r\n            const modifiedLineRange = s;\r\n            const originalLineRange = s.delta(-diffOrigToMod);\r\n            moves.push(new LineRangeMapping(originalLineRange, modifiedLineRange));\r\n            modifiedSet.addRange(modifiedLineRange);\r\n            originalSet.addRange(originalLineRange);\r\n        }\r\n    }\r\n    moves.sort(compareBy(m => m.original.startLineNumber, numberComparator));\r\n    const monotonousChanges = new MonotonousArray(changes);\r\n    for (let i = 0; i < moves.length; i++) {\r\n        const move = moves[i];\r\n        const firstTouchingChangeOrig = monotonousChanges.findLastMonotonous(c => c.original.startLineNumber <= move.original.startLineNumber);\r\n        const firstTouchingChangeMod = findLastMonotonous(changes, c => c.modified.startLineNumber <= move.modified.startLineNumber);\r\n        const linesAbove = Math.max(move.original.startLineNumber - firstTouchingChangeOrig.original.startLineNumber, move.modified.startLineNumber - firstTouchingChangeMod.modified.startLineNumber);\r\n        const lastTouchingChangeOrig = monotonousChanges.findLastMonotonous(c => c.original.startLineNumber < move.original.endLineNumberExclusive);\r\n        const lastTouchingChangeMod = findLastMonotonous(changes, c => c.modified.startLineNumber < move.modified.endLineNumberExclusive);\r\n        const linesBelow = Math.max(lastTouchingChangeOrig.original.endLineNumberExclusive - move.original.endLineNumberExclusive, lastTouchingChangeMod.modified.endLineNumberExclusive - move.modified.endLineNumberExclusive);\r\n        let extendToTop;\r\n        for (extendToTop = 0; extendToTop < linesAbove; extendToTop++) {\r\n            const origLine = move.original.startLineNumber - extendToTop - 1;\r\n            const modLine = move.modified.startLineNumber - extendToTop - 1;\r\n            if (origLine > originalLines.length || modLine > modifiedLines.length) {\r\n                break;\r\n            }\r\n            if (modifiedSet.contains(modLine) || originalSet.contains(origLine)) {\r\n                break;\r\n            }\r\n            if (!areLinesSimilar(originalLines[origLine - 1], modifiedLines[modLine - 1], timeout)) {\r\n                break;\r\n            }\r\n        }\r\n        if (extendToTop > 0) {\r\n            originalSet.addRange(new LineRange(move.original.startLineNumber - extendToTop, move.original.startLineNumber));\r\n            modifiedSet.addRange(new LineRange(move.modified.startLineNumber - extendToTop, move.modified.startLineNumber));\r\n        }\r\n        let extendToBottom;\r\n        for (extendToBottom = 0; extendToBottom < linesBelow; extendToBottom++) {\r\n            const origLine = move.original.endLineNumberExclusive + extendToBottom;\r\n            const modLine = move.modified.endLineNumberExclusive + extendToBottom;\r\n            if (origLine > originalLines.length || modLine > modifiedLines.length) {\r\n                break;\r\n            }\r\n            if (modifiedSet.contains(modLine) || originalSet.contains(origLine)) {\r\n                break;\r\n            }\r\n            if (!areLinesSimilar(originalLines[origLine - 1], modifiedLines[modLine - 1], timeout)) {\r\n                break;\r\n            }\r\n        }\r\n        if (extendToBottom > 0) {\r\n            originalSet.addRange(new LineRange(move.original.endLineNumberExclusive, move.original.endLineNumberExclusive + extendToBottom));\r\n            modifiedSet.addRange(new LineRange(move.modified.endLineNumberExclusive, move.modified.endLineNumberExclusive + extendToBottom));\r\n        }\r\n        if (extendToTop > 0 || extendToBottom > 0) {\r\n            moves[i] = new LineRangeMapping(new LineRange(move.original.startLineNumber - extendToTop, move.original.endLineNumberExclusive + extendToBottom), new LineRange(move.modified.startLineNumber - extendToTop, move.modified.endLineNumberExclusive + extendToBottom));\r\n        }\r\n    }\r\n    return moves;\r\n}\r\nfunction areLinesSimilar(line1, line2, timeout) {\r\n    if (line1.trim() === line2.trim()) {\r\n        return true;\r\n    }\r\n    if (line1.length > 300 && line2.length > 300) {\r\n        return false;\r\n    }\r\n    const myersDiffingAlgorithm = new MyersDiffAlgorithm();\r\n    const result = myersDiffingAlgorithm.compute(new LinesSliceCharSequence([line1], new OffsetRange(0, 1), false), new LinesSliceCharSequence([line2], new OffsetRange(0, 1), false), timeout);\r\n    let commonNonSpaceCharCount = 0;\r\n    const inverted = SequenceDiff.invert(result.diffs, line1.length);\r\n    for (const seq of inverted) {\r\n        seq.seq1Range.forEach(idx => {\r\n            if (!isSpace(line1.charCodeAt(idx))) {\r\n                commonNonSpaceCharCount++;\r\n            }\r\n        });\r\n    }\r\n    function countNonWsChars(str) {\r\n        let count = 0;\r\n        for (let i = 0; i < line1.length; i++) {\r\n            if (!isSpace(str.charCodeAt(i))) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n    const longerLineLength = countNonWsChars(line1.length > line2.length ? line1 : line2);\r\n    const r = commonNonSpaceCharCount / longerLineLength > 0.6 && longerLineLength > 10;\r\n    return r;\r\n}\r\nfunction joinCloseConsecutiveMoves(moves) {\r\n    if (moves.length === 0) {\r\n        return moves;\r\n    }\r\n    moves.sort(compareBy(m => m.original.startLineNumber, numberComparator));\r\n    const result = [moves[0]];\r\n    for (let i = 1; i < moves.length; i++) {\r\n        const last = result[result.length - 1];\r\n        const current = moves[i];\r\n        const originalDist = current.original.startLineNumber - last.original.endLineNumberExclusive;\r\n        const modifiedDist = current.modified.startLineNumber - last.modified.endLineNumberExclusive;\r\n        const currentMoveAfterLast = originalDist >= 0 && modifiedDist >= 0;\r\n        if (currentMoveAfterLast && originalDist + modifiedDist <= 2) {\r\n            result[result.length - 1] = last.join(current);\r\n            continue;\r\n        }\r\n        result.push(current);\r\n    }\r\n    return result;\r\n}\r\nfunction removeMovesInSameDiff(changes, moves) {\r\n    const changesMonotonous = new MonotonousArray(changes);\r\n    moves = moves.filter(m => {\r\n        const diffBeforeEndOfMoveOriginal = changesMonotonous.findLastMonotonous(c => c.original.startLineNumber < m.original.endLineNumberExclusive)\r\n            || new LineRangeMapping(new LineRange(1, 1), new LineRange(1, 1));\r\n        const diffBeforeEndOfMoveModified = findLastMonotonous(changes, c => c.modified.startLineNumber < m.modified.endLineNumberExclusive);\r\n        const differentDiffs = diffBeforeEndOfMoveOriginal !== diffBeforeEndOfMoveModified;\r\n        return differentDiffs;\r\n    });\r\n    return moves;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { forEachWithNeighbors } from '../../../../base/common/arrays.js';\r\nimport { OffsetRange } from '../../core/offsetRange.js';\r\nimport { OffsetPair, SequenceDiff } from './algorithms/diffAlgorithm.js';\r\nexport function optimizeSequenceDiffs(sequence1, sequence2, sequenceDiffs) {\r\n    let result = sequenceDiffs;\r\n    result = joinSequenceDiffsByShifting(sequence1, sequence2, result);\r\n    // Sometimes, calling this function twice improves the result.\r\n    // Uncomment the second invocation and run the tests to see the difference.\r\n    result = joinSequenceDiffsByShifting(sequence1, sequence2, result);\r\n    result = shiftSequenceDiffs(sequence1, sequence2, result);\r\n    return result;\r\n}\r\n/**\r\n * This function fixes issues like this:\r\n * ```\r\n * import { Baz, Bar } from \"foo\";\r\n * ```\r\n * <->\r\n * ```\r\n * import { Baz, Bar, Foo } from \"foo\";\r\n * ```\r\n * Computed diff: [ {Add \",\" after Bar}, {Add \"Foo \" after space} }\r\n * Improved diff: [{Add \", Foo\" after Bar}]\r\n */\r\nfunction joinSequenceDiffsByShifting(sequence1, sequence2, sequenceDiffs) {\r\n    if (sequenceDiffs.length === 0) {\r\n        return sequenceDiffs;\r\n    }\r\n    const result = [];\r\n    result.push(sequenceDiffs[0]);\r\n    // First move them all to the left as much as possible and join them if possible\r\n    for (let i = 1; i < sequenceDiffs.length; i++) {\r\n        const prevResult = result[result.length - 1];\r\n        let cur = sequenceDiffs[i];\r\n        if (cur.seq1Range.isEmpty || cur.seq2Range.isEmpty) {\r\n            const length = cur.seq1Range.start - prevResult.seq1Range.endExclusive;\r\n            let d;\r\n            for (d = 1; d <= length; d++) {\r\n                if (sequence1.getElement(cur.seq1Range.start - d) !== sequence1.getElement(cur.seq1Range.endExclusive - d) ||\r\n                    sequence2.getElement(cur.seq2Range.start - d) !== sequence2.getElement(cur.seq2Range.endExclusive - d)) {\r\n                    break;\r\n                }\r\n            }\r\n            d--;\r\n            if (d === length) {\r\n                // Merge previous and current diff\r\n                result[result.length - 1] = new SequenceDiff(new OffsetRange(prevResult.seq1Range.start, cur.seq1Range.endExclusive - length), new OffsetRange(prevResult.seq2Range.start, cur.seq2Range.endExclusive - length));\r\n                continue;\r\n            }\r\n            cur = cur.delta(-d);\r\n        }\r\n        result.push(cur);\r\n    }\r\n    const result2 = [];\r\n    // Then move them all to the right and join them again if possible\r\n    for (let i = 0; i < result.length - 1; i++) {\r\n        const nextResult = result[i + 1];\r\n        let cur = result[i];\r\n        if (cur.seq1Range.isEmpty || cur.seq2Range.isEmpty) {\r\n            const length = nextResult.seq1Range.start - cur.seq1Range.endExclusive;\r\n            let d;\r\n            for (d = 0; d < length; d++) {\r\n                if (!sequence1.isStronglyEqual(cur.seq1Range.start + d, cur.seq1Range.endExclusive + d) ||\r\n                    !sequence2.isStronglyEqual(cur.seq2Range.start + d, cur.seq2Range.endExclusive + d)) {\r\n                    break;\r\n                }\r\n            }\r\n            if (d === length) {\r\n                // Merge previous and current diff, write to result!\r\n                result[i + 1] = new SequenceDiff(new OffsetRange(cur.seq1Range.start + length, nextResult.seq1Range.endExclusive), new OffsetRange(cur.seq2Range.start + length, nextResult.seq2Range.endExclusive));\r\n                continue;\r\n            }\r\n            if (d > 0) {\r\n                cur = cur.delta(d);\r\n            }\r\n        }\r\n        result2.push(cur);\r\n    }\r\n    if (result.length > 0) {\r\n        result2.push(result[result.length - 1]);\r\n    }\r\n    return result2;\r\n}\r\n// align character level diffs at whitespace characters\r\n// import { IBar } from \"foo\";\r\n// import { I[Arr, I]Bar } from \"foo\";\r\n// ->\r\n// import { [IArr, ]IBar } from \"foo\";\r\n// import { ITransaction, observableValue, transaction } from 'vs/base/common/observable';\r\n// import { ITransaction, observable[FromEvent, observable]Value, transaction } from 'vs/base/common/observable';\r\n// ->\r\n// import { ITransaction, [observableFromEvent, ]observableValue, transaction } from 'vs/base/common/observable';\r\n// collectBrackets(level + 1, levelPerBracketType);\r\n// collectBrackets(level + 1, levelPerBracket[ + 1, levelPerBracket]Type);\r\n// ->\r\n// collectBrackets(level + 1, [levelPerBracket + 1, ]levelPerBracketType);\r\nfunction shiftSequenceDiffs(sequence1, sequence2, sequenceDiffs) {\r\n    if (!sequence1.getBoundaryScore || !sequence2.getBoundaryScore) {\r\n        return sequenceDiffs;\r\n    }\r\n    for (let i = 0; i < sequenceDiffs.length; i++) {\r\n        const prevDiff = (i > 0 ? sequenceDiffs[i - 1] : undefined);\r\n        const diff = sequenceDiffs[i];\r\n        const nextDiff = (i + 1 < sequenceDiffs.length ? sequenceDiffs[i + 1] : undefined);\r\n        const seq1ValidRange = new OffsetRange(prevDiff ? prevDiff.seq1Range.start + 1 : 0, nextDiff ? nextDiff.seq1Range.endExclusive - 1 : sequence1.length);\r\n        const seq2ValidRange = new OffsetRange(prevDiff ? prevDiff.seq2Range.start + 1 : 0, nextDiff ? nextDiff.seq2Range.endExclusive - 1 : sequence2.length);\r\n        if (diff.seq1Range.isEmpty) {\r\n            sequenceDiffs[i] = shiftDiffToBetterPosition(diff, sequence1, sequence2, seq1ValidRange, seq2ValidRange);\r\n        }\r\n        else if (diff.seq2Range.isEmpty) {\r\n            sequenceDiffs[i] = shiftDiffToBetterPosition(diff.swap(), sequence2, sequence1, seq2ValidRange, seq1ValidRange).swap();\r\n        }\r\n    }\r\n    return sequenceDiffs;\r\n}\r\nfunction shiftDiffToBetterPosition(diff, sequence1, sequence2, seq1ValidRange, seq2ValidRange) {\r\n    const maxShiftLimit = 100; // To prevent performance issues\r\n    // don't touch previous or next!\r\n    let deltaBefore = 1;\r\n    while (diff.seq1Range.start - deltaBefore >= seq1ValidRange.start &&\r\n        diff.seq2Range.start - deltaBefore >= seq2ValidRange.start &&\r\n        sequence2.isStronglyEqual(diff.seq2Range.start - deltaBefore, diff.seq2Range.endExclusive - deltaBefore) && deltaBefore < maxShiftLimit) {\r\n        deltaBefore++;\r\n    }\r\n    deltaBefore--;\r\n    let deltaAfter = 0;\r\n    while (diff.seq1Range.start + deltaAfter < seq1ValidRange.endExclusive &&\r\n        diff.seq2Range.endExclusive + deltaAfter < seq2ValidRange.endExclusive &&\r\n        sequence2.isStronglyEqual(diff.seq2Range.start + deltaAfter, diff.seq2Range.endExclusive + deltaAfter) && deltaAfter < maxShiftLimit) {\r\n        deltaAfter++;\r\n    }\r\n    if (deltaBefore === 0 && deltaAfter === 0) {\r\n        return diff;\r\n    }\r\n    // Visualize `[sequence1.text, diff.seq1Range.start + deltaAfter]`\r\n    // and `[sequence2.text, diff.seq2Range.start + deltaAfter, diff.seq2Range.endExclusive + deltaAfter]`\r\n    let bestDelta = 0;\r\n    let bestScore = -1;\r\n    // find best scored delta\r\n    for (let delta = -deltaBefore; delta <= deltaAfter; delta++) {\r\n        const seq2OffsetStart = diff.seq2Range.start + delta;\r\n        const seq2OffsetEndExclusive = diff.seq2Range.endExclusive + delta;\r\n        const seq1Offset = diff.seq1Range.start + delta;\r\n        const score = sequence1.getBoundaryScore(seq1Offset) + sequence2.getBoundaryScore(seq2OffsetStart) + sequence2.getBoundaryScore(seq2OffsetEndExclusive);\r\n        if (score > bestScore) {\r\n            bestScore = score;\r\n            bestDelta = delta;\r\n        }\r\n    }\r\n    return diff.delta(bestDelta);\r\n}\r\nexport function removeShortMatches(sequence1, sequence2, sequenceDiffs) {\r\n    const result = [];\r\n    for (const s of sequenceDiffs) {\r\n        const last = result[result.length - 1];\r\n        if (!last) {\r\n            result.push(s);\r\n            continue;\r\n        }\r\n        if (s.seq1Range.start - last.seq1Range.endExclusive <= 2 || s.seq2Range.start - last.seq2Range.endExclusive <= 2) {\r\n            result[result.length - 1] = new SequenceDiff(last.seq1Range.join(s.seq1Range), last.seq2Range.join(s.seq2Range));\r\n        }\r\n        else {\r\n            result.push(s);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function extendDiffsToEntireWordIfAppropriate(sequence1, sequence2, sequenceDiffs) {\r\n    const additional = [];\r\n    let lastModifiedWord = undefined;\r\n    function maybePushWordToAdditional() {\r\n        if (!lastModifiedWord) {\r\n            return;\r\n        }\r\n        const originalLength1 = lastModifiedWord.s1Range.length - lastModifiedWord.deleted;\r\n        const originalLength2 = lastModifiedWord.s2Range.length - lastModifiedWord.added;\r\n        if (originalLength1 !== originalLength2) {\r\n            // TODO figure out why this happens\r\n        }\r\n        if (Math.max(lastModifiedWord.deleted, lastModifiedWord.added) + (lastModifiedWord.count - 1) > originalLength1) {\r\n            additional.push(new SequenceDiff(lastModifiedWord.s1Range, lastModifiedWord.s2Range));\r\n        }\r\n        lastModifiedWord = undefined;\r\n    }\r\n    for (const s of sequenceDiffs) {\r\n        function processWord(s1Range, s2Range) {\r\n            var _a, _b, _c, _d;\r\n            if (!lastModifiedWord || !lastModifiedWord.s1Range.containsRange(s1Range) || !lastModifiedWord.s2Range.containsRange(s2Range)) {\r\n                if (lastModifiedWord && !(lastModifiedWord.s1Range.endExclusive < s1Range.start && lastModifiedWord.s2Range.endExclusive < s2Range.start)) {\r\n                    const s1Added = OffsetRange.tryCreate(lastModifiedWord.s1Range.endExclusive, s1Range.start);\r\n                    const s2Added = OffsetRange.tryCreate(lastModifiedWord.s2Range.endExclusive, s2Range.start);\r\n                    lastModifiedWord.deleted += (_a = s1Added === null || s1Added === void 0 ? void 0 : s1Added.length) !== null && _a !== void 0 ? _a : 0;\r\n                    lastModifiedWord.added += (_b = s2Added === null || s2Added === void 0 ? void 0 : s2Added.length) !== null && _b !== void 0 ? _b : 0;\r\n                    lastModifiedWord.s1Range = lastModifiedWord.s1Range.join(s1Range);\r\n                    lastModifiedWord.s2Range = lastModifiedWord.s2Range.join(s2Range);\r\n                }\r\n                else {\r\n                    maybePushWordToAdditional();\r\n                    lastModifiedWord = { added: 0, deleted: 0, count: 0, s1Range: s1Range, s2Range: s2Range };\r\n                }\r\n            }\r\n            const changedS1 = s1Range.intersect(s.seq1Range);\r\n            const changedS2 = s2Range.intersect(s.seq2Range);\r\n            lastModifiedWord.count++;\r\n            lastModifiedWord.deleted += (_c = changedS1 === null || changedS1 === void 0 ? void 0 : changedS1.length) !== null && _c !== void 0 ? _c : 0;\r\n            lastModifiedWord.added += (_d = changedS2 === null || changedS2 === void 0 ? void 0 : changedS2.length) !== null && _d !== void 0 ? _d : 0;\r\n        }\r\n        const w1Before = sequence1.findWordContaining(s.seq1Range.start - 1);\r\n        const w2Before = sequence2.findWordContaining(s.seq2Range.start - 1);\r\n        const w1After = sequence1.findWordContaining(s.seq1Range.endExclusive);\r\n        const w2After = sequence2.findWordContaining(s.seq2Range.endExclusive);\r\n        if (w1Before && w1After && w2Before && w2After && w1Before.equals(w1After) && w2Before.equals(w2After)) {\r\n            processWord(w1Before, w2Before);\r\n        }\r\n        else {\r\n            if (w1Before && w2Before) {\r\n                processWord(w1Before, w2Before);\r\n            }\r\n            if (w1After && w2After) {\r\n                processWord(w1After, w2After);\r\n            }\r\n        }\r\n    }\r\n    maybePushWordToAdditional();\r\n    const merged = mergeSequenceDiffs(sequenceDiffs, additional);\r\n    return merged;\r\n}\r\nfunction mergeSequenceDiffs(sequenceDiffs1, sequenceDiffs2) {\r\n    const result = [];\r\n    while (sequenceDiffs1.length > 0 || sequenceDiffs2.length > 0) {\r\n        const sd1 = sequenceDiffs1[0];\r\n        const sd2 = sequenceDiffs2[0];\r\n        let next;\r\n        if (sd1 && (!sd2 || sd1.seq1Range.start < sd2.seq1Range.start)) {\r\n            next = sequenceDiffs1.shift();\r\n        }\r\n        else {\r\n            next = sequenceDiffs2.shift();\r\n        }\r\n        if (result.length > 0 && result[result.length - 1].seq1Range.endExclusive >= next.seq1Range.start) {\r\n            result[result.length - 1] = result[result.length - 1].join(next);\r\n        }\r\n        else {\r\n            result.push(next);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function removeVeryShortMatchingLinesBetweenDiffs(sequence1, _sequence2, sequenceDiffs) {\r\n    let diffs = sequenceDiffs;\r\n    if (diffs.length === 0) {\r\n        return diffs;\r\n    }\r\n    let counter = 0;\r\n    let shouldRepeat;\r\n    do {\r\n        shouldRepeat = false;\r\n        const result = [\r\n            diffs[0]\r\n        ];\r\n        for (let i = 1; i < diffs.length; i++) {\r\n            const cur = diffs[i];\r\n            const lastResult = result[result.length - 1];\r\n            function shouldJoinDiffs(before, after) {\r\n                const unchangedRange = new OffsetRange(lastResult.seq1Range.endExclusive, cur.seq1Range.start);\r\n                const unchangedText = sequence1.getText(unchangedRange);\r\n                const unchangedTextWithoutWs = unchangedText.replace(/\\s/g, '');\r\n                if (unchangedTextWithoutWs.length <= 4\r\n                    && (before.seq1Range.length + before.seq2Range.length > 5 || after.seq1Range.length + after.seq2Range.length > 5)) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            const shouldJoin = shouldJoinDiffs(lastResult, cur);\r\n            if (shouldJoin) {\r\n                shouldRepeat = true;\r\n                result[result.length - 1] = result[result.length - 1].join(cur);\r\n            }\r\n            else {\r\n                result.push(cur);\r\n            }\r\n        }\r\n        diffs = result;\r\n    } while (counter++ < 10 && shouldRepeat);\r\n    return diffs;\r\n}\r\nexport function removeVeryShortMatchingTextBetweenLongDiffs(sequence1, sequence2, sequenceDiffs) {\r\n    let diffs = sequenceDiffs;\r\n    if (diffs.length === 0) {\r\n        return diffs;\r\n    }\r\n    let counter = 0;\r\n    let shouldRepeat;\r\n    do {\r\n        shouldRepeat = false;\r\n        const result = [\r\n            diffs[0]\r\n        ];\r\n        for (let i = 1; i < diffs.length; i++) {\r\n            const cur = diffs[i];\r\n            const lastResult = result[result.length - 1];\r\n            function shouldJoinDiffs(before, after) {\r\n                const unchangedRange = new OffsetRange(lastResult.seq1Range.endExclusive, cur.seq1Range.start);\r\n                const unchangedLineCount = sequence1.countLinesIn(unchangedRange);\r\n                if (unchangedLineCount > 5 || unchangedRange.length > 500) {\r\n                    return false;\r\n                }\r\n                const unchangedText = sequence1.getText(unchangedRange).trim();\r\n                if (unchangedText.length > 20 || unchangedText.split(/\\r\\n|\\r|\\n/).length > 1) {\r\n                    return false;\r\n                }\r\n                const beforeLineCount1 = sequence1.countLinesIn(before.seq1Range);\r\n                const beforeSeq1Length = before.seq1Range.length;\r\n                const beforeLineCount2 = sequence2.countLinesIn(before.seq2Range);\r\n                const beforeSeq2Length = before.seq2Range.length;\r\n                const afterLineCount1 = sequence1.countLinesIn(after.seq1Range);\r\n                const afterSeq1Length = after.seq1Range.length;\r\n                const afterLineCount2 = sequence2.countLinesIn(after.seq2Range);\r\n                const afterSeq2Length = after.seq2Range.length;\r\n                // TODO: Maybe a neural net can be used to derive the result from these numbers\r\n                const max = 2 * 40 + 50;\r\n                function cap(v) {\r\n                    return Math.min(v, max);\r\n                }\r\n                if (Math.pow(Math.pow(cap(beforeLineCount1 * 40 + beforeSeq1Length), 1.5) + Math.pow(cap(beforeLineCount2 * 40 + beforeSeq2Length), 1.5), 1.5)\r\n                    + Math.pow(Math.pow(cap(afterLineCount1 * 40 + afterSeq1Length), 1.5) + Math.pow(cap(afterLineCount2 * 40 + afterSeq2Length), 1.5), 1.5) > ((max ** 1.5) ** 1.5) * 1.3) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            const shouldJoin = shouldJoinDiffs(lastResult, cur);\r\n            if (shouldJoin) {\r\n                shouldRepeat = true;\r\n                result[result.length - 1] = result[result.length - 1].join(cur);\r\n            }\r\n            else {\r\n                result.push(cur);\r\n            }\r\n        }\r\n        diffs = result;\r\n    } while (counter++ < 10 && shouldRepeat);\r\n    const newDiffs = [];\r\n    // Remove short suffixes/prefixes\r\n    forEachWithNeighbors(diffs, (prev, cur, next) => {\r\n        let newDiff = cur;\r\n        function shouldMarkAsChanged(text) {\r\n            return text.length > 0 && text.trim().length <= 3 && cur.seq1Range.length + cur.seq2Range.length > 100;\r\n        }\r\n        const fullRange1 = sequence1.extendToFullLines(cur.seq1Range);\r\n        const prefix = sequence1.getText(new OffsetRange(fullRange1.start, cur.seq1Range.start));\r\n        if (shouldMarkAsChanged(prefix)) {\r\n            newDiff = newDiff.deltaStart(-prefix.length);\r\n        }\r\n        const suffix = sequence1.getText(new OffsetRange(cur.seq1Range.endExclusive, fullRange1.endExclusive));\r\n        if (shouldMarkAsChanged(suffix)) {\r\n            newDiff = newDiff.deltaEnd(suffix.length);\r\n        }\r\n        const availableSpace = SequenceDiff.fromOffsetPairs(prev ? prev.getEndExclusives() : OffsetPair.zero, next ? next.getStarts() : OffsetPair.max);\r\n        const result = newDiff.intersect(availableSpace);\r\n        newDiffs.push(result);\r\n    });\r\n    return newDiffs;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport class LineSequence {\r\n    constructor(trimmedHash, lines) {\r\n        this.trimmedHash = trimmedHash;\r\n        this.lines = lines;\r\n    }\r\n    getElement(offset) {\r\n        return this.trimmedHash[offset];\r\n    }\r\n    get length() {\r\n        return this.trimmedHash.length;\r\n    }\r\n    getBoundaryScore(length) {\r\n        const indentationBefore = length === 0 ? 0 : getIndentation(this.lines[length - 1]);\r\n        const indentationAfter = length === this.lines.length ? 0 : getIndentation(this.lines[length]);\r\n        return 1000 - (indentationBefore + indentationAfter);\r\n    }\r\n    getText(range) {\r\n        return this.lines.slice(range.start, range.endExclusive).join('\\n');\r\n    }\r\n    isStronglyEqual(offset1, offset2) {\r\n        return this.lines[offset1] === this.lines[offset2];\r\n    }\r\n}\r\nfunction getIndentation(str) {\r\n    let i = 0;\r\n    while (i < str.length && (str.charCodeAt(i) === 32 /* CharCode.Space */ || str.charCodeAt(i) === 9 /* CharCode.Tab */)) {\r\n        i++;\r\n    }\r\n    return i;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { equals, groupAdjacentBy } from '../../../../base/common/arrays.js';\r\nimport { assertFn, checkAdjacentItems } from '../../../../base/common/assert.js';\r\nimport { LineRange } from '../../core/lineRange.js';\r\nimport { OffsetRange } from '../../core/offsetRange.js';\r\nimport { Range } from '../../core/range.js';\r\nimport { DateTimeout, InfiniteTimeout, SequenceDiff } from './algorithms/diffAlgorithm.js';\r\nimport { DynamicProgrammingDiffing } from './algorithms/dynamicProgrammingDiffing.js';\r\nimport { MyersDiffAlgorithm } from './algorithms/myersDiffAlgorithm.js';\r\nimport { computeMovedLines } from './computeMovedLines.js';\r\nimport { extendDiffsToEntireWordIfAppropriate, optimizeSequenceDiffs, removeVeryShortMatchingLinesBetweenDiffs, removeVeryShortMatchingTextBetweenLongDiffs, removeShortMatches } from './heuristicSequenceOptimizations.js';\r\nimport { LinesDiff, MovedText } from '../linesDiffComputer.js';\r\nimport { DetailedLineRangeMapping, RangeMapping } from '../rangeMapping.js';\r\nimport { LinesSliceCharSequence } from './linesSliceCharSequence.js';\r\nimport { LineSequence } from './lineSequence.js';\r\nexport class DefaultLinesDiffComputer {\r\n    constructor() {\r\n        this.dynamicProgrammingDiffing = new DynamicProgrammingDiffing();\r\n        this.myersDiffingAlgorithm = new MyersDiffAlgorithm();\r\n    }\r\n    computeDiff(originalLines, modifiedLines, options) {\r\n        if (originalLines.length <= 1 && equals(originalLines, modifiedLines, (a, b) => a === b)) {\r\n            return new LinesDiff([], [], false);\r\n        }\r\n        if (originalLines.length === 1 && originalLines[0].length === 0 || modifiedLines.length === 1 && modifiedLines[0].length === 0) {\r\n            return new LinesDiff([\r\n                new DetailedLineRangeMapping(new LineRange(1, originalLines.length + 1), new LineRange(1, modifiedLines.length + 1), [\r\n                    new RangeMapping(new Range(1, 1, originalLines.length, originalLines[0].length + 1), new Range(1, 1, modifiedLines.length, modifiedLines[0].length + 1))\r\n                ])\r\n            ], [], false);\r\n        }\r\n        const timeout = options.maxComputationTimeMs === 0 ? InfiniteTimeout.instance : new DateTimeout(options.maxComputationTimeMs);\r\n        const considerWhitespaceChanges = !options.ignoreTrimWhitespace;\r\n        const perfectHashes = new Map();\r\n        function getOrCreateHash(text) {\r\n            let hash = perfectHashes.get(text);\r\n            if (hash === undefined) {\r\n                hash = perfectHashes.size;\r\n                perfectHashes.set(text, hash);\r\n            }\r\n            return hash;\r\n        }\r\n        const originalLinesHashes = originalLines.map((l) => getOrCreateHash(l.trim()));\r\n        const modifiedLinesHashes = modifiedLines.map((l) => getOrCreateHash(l.trim()));\r\n        const sequence1 = new LineSequence(originalLinesHashes, originalLines);\r\n        const sequence2 = new LineSequence(modifiedLinesHashes, modifiedLines);\r\n        const lineAlignmentResult = (() => {\r\n            if (sequence1.length + sequence2.length < 1700) {\r\n                // Use the improved algorithm for small files\r\n                return this.dynamicProgrammingDiffing.compute(sequence1, sequence2, timeout, (offset1, offset2) => originalLines[offset1] === modifiedLines[offset2]\r\n                    ? modifiedLines[offset2].length === 0\r\n                        ? 0.1\r\n                        : 1 + Math.log(1 + modifiedLines[offset2].length)\r\n                    : 0.99);\r\n            }\r\n            return this.myersDiffingAlgorithm.compute(sequence1, sequence2);\r\n        })();\r\n        let lineAlignments = lineAlignmentResult.diffs;\r\n        let hitTimeout = lineAlignmentResult.hitTimeout;\r\n        lineAlignments = optimizeSequenceDiffs(sequence1, sequence2, lineAlignments);\r\n        lineAlignments = removeVeryShortMatchingLinesBetweenDiffs(sequence1, sequence2, lineAlignments);\r\n        const alignments = [];\r\n        const scanForWhitespaceChanges = (equalLinesCount) => {\r\n            if (!considerWhitespaceChanges) {\r\n                return;\r\n            }\r\n            for (let i = 0; i < equalLinesCount; i++) {\r\n                const seq1Offset = seq1LastStart + i;\r\n                const seq2Offset = seq2LastStart + i;\r\n                if (originalLines[seq1Offset] !== modifiedLines[seq2Offset]) {\r\n                    // This is because of whitespace changes, diff these lines\r\n                    const characterDiffs = this.refineDiff(originalLines, modifiedLines, new SequenceDiff(new OffsetRange(seq1Offset, seq1Offset + 1), new OffsetRange(seq2Offset, seq2Offset + 1)), timeout, considerWhitespaceChanges);\r\n                    for (const a of characterDiffs.mappings) {\r\n                        alignments.push(a);\r\n                    }\r\n                    if (characterDiffs.hitTimeout) {\r\n                        hitTimeout = true;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        let seq1LastStart = 0;\r\n        let seq2LastStart = 0;\r\n        for (const diff of lineAlignments) {\r\n            assertFn(() => diff.seq1Range.start - seq1LastStart === diff.seq2Range.start - seq2LastStart);\r\n            const equalLinesCount = diff.seq1Range.start - seq1LastStart;\r\n            scanForWhitespaceChanges(equalLinesCount);\r\n            seq1LastStart = diff.seq1Range.endExclusive;\r\n            seq2LastStart = diff.seq2Range.endExclusive;\r\n            const characterDiffs = this.refineDiff(originalLines, modifiedLines, diff, timeout, considerWhitespaceChanges);\r\n            if (characterDiffs.hitTimeout) {\r\n                hitTimeout = true;\r\n            }\r\n            for (const a of characterDiffs.mappings) {\r\n                alignments.push(a);\r\n            }\r\n        }\r\n        scanForWhitespaceChanges(originalLines.length - seq1LastStart);\r\n        const changes = lineRangeMappingFromRangeMappings(alignments, originalLines, modifiedLines);\r\n        let moves = [];\r\n        if (options.computeMoves) {\r\n            moves = this.computeMoves(changes, originalLines, modifiedLines, originalLinesHashes, modifiedLinesHashes, timeout, considerWhitespaceChanges);\r\n        }\r\n        // Make sure all ranges are valid\r\n        assertFn(() => {\r\n            function validatePosition(pos, lines) {\r\n                if (pos.lineNumber < 1 || pos.lineNumber > lines.length) {\r\n                    return false;\r\n                }\r\n                const line = lines[pos.lineNumber - 1];\r\n                if (pos.column < 1 || pos.column > line.length + 1) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            function validateRange(range, lines) {\r\n                if (range.startLineNumber < 1 || range.startLineNumber > lines.length + 1) {\r\n                    return false;\r\n                }\r\n                if (range.endLineNumberExclusive < 1 || range.endLineNumberExclusive > lines.length + 1) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            for (const c of changes) {\r\n                if (!c.innerChanges) {\r\n                    return false;\r\n                }\r\n                for (const ic of c.innerChanges) {\r\n                    const valid = validatePosition(ic.modifiedRange.getStartPosition(), modifiedLines) && validatePosition(ic.modifiedRange.getEndPosition(), modifiedLines) &&\r\n                        validatePosition(ic.originalRange.getStartPosition(), originalLines) && validatePosition(ic.originalRange.getEndPosition(), originalLines);\r\n                    if (!valid) {\r\n                        return false;\r\n                    }\r\n                }\r\n                if (!validateRange(c.modified, modifiedLines) || !validateRange(c.original, originalLines)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n        return new LinesDiff(changes, moves, hitTimeout);\r\n    }\r\n    computeMoves(changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout, considerWhitespaceChanges) {\r\n        const moves = computeMovedLines(changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout);\r\n        const movesWithDiffs = moves.map(m => {\r\n            const moveChanges = this.refineDiff(originalLines, modifiedLines, new SequenceDiff(m.original.toOffsetRange(), m.modified.toOffsetRange()), timeout, considerWhitespaceChanges);\r\n            const mappings = lineRangeMappingFromRangeMappings(moveChanges.mappings, originalLines, modifiedLines, true);\r\n            return new MovedText(m, mappings);\r\n        });\r\n        return movesWithDiffs;\r\n    }\r\n    refineDiff(originalLines, modifiedLines, diff, timeout, considerWhitespaceChanges) {\r\n        const slice1 = new LinesSliceCharSequence(originalLines, diff.seq1Range, considerWhitespaceChanges);\r\n        const slice2 = new LinesSliceCharSequence(modifiedLines, diff.seq2Range, considerWhitespaceChanges);\r\n        const diffResult = slice1.length + slice2.length < 500\r\n            ? this.dynamicProgrammingDiffing.compute(slice1, slice2, timeout)\r\n            : this.myersDiffingAlgorithm.compute(slice1, slice2, timeout);\r\n        let diffs = diffResult.diffs;\r\n        diffs = optimizeSequenceDiffs(slice1, slice2, diffs);\r\n        diffs = extendDiffsToEntireWordIfAppropriate(slice1, slice2, diffs);\r\n        diffs = removeShortMatches(slice1, slice2, diffs);\r\n        diffs = removeVeryShortMatchingTextBetweenLongDiffs(slice1, slice2, diffs);\r\n        const result = diffs.map((d) => new RangeMapping(slice1.translateRange(d.seq1Range), slice2.translateRange(d.seq2Range)));\r\n        // Assert: result applied on original should be the same as diff applied to original\r\n        return {\r\n            mappings: result,\r\n            hitTimeout: diffResult.hitTimeout,\r\n        };\r\n    }\r\n}\r\nexport function lineRangeMappingFromRangeMappings(alignments, originalLines, modifiedLines, dontAssertStartLine = false) {\r\n    const changes = [];\r\n    for (const g of groupAdjacentBy(alignments.map(a => getLineRangeMapping(a, originalLines, modifiedLines)), (a1, a2) => a1.original.overlapOrTouch(a2.original)\r\n        || a1.modified.overlapOrTouch(a2.modified))) {\r\n        const first = g[0];\r\n        const last = g[g.length - 1];\r\n        changes.push(new DetailedLineRangeMapping(first.original.join(last.original), first.modified.join(last.modified), g.map(a => a.innerChanges[0])));\r\n    }\r\n    assertFn(() => {\r\n        if (!dontAssertStartLine) {\r\n            if (changes.length > 0 && changes[0].original.startLineNumber !== changes[0].modified.startLineNumber) {\r\n                return false;\r\n            }\r\n        }\r\n        return checkAdjacentItems(changes, (m1, m2) => m2.original.startLineNumber - m1.original.endLineNumberExclusive === m2.modified.startLineNumber - m1.modified.endLineNumberExclusive &&\r\n            // There has to be an unchanged line in between (otherwise both diffs should have been joined)\r\n            m1.original.endLineNumberExclusive < m2.original.startLineNumber &&\r\n            m1.modified.endLineNumberExclusive < m2.modified.startLineNumber);\r\n    });\r\n    return changes;\r\n}\r\nexport function getLineRangeMapping(rangeMapping, originalLines, modifiedLines) {\r\n    let lineStartDelta = 0;\r\n    let lineEndDelta = 0;\r\n    // rangeMapping describes the edit that replaces `rangeMapping.originalRange` with `newText := getText(modifiedLines, rangeMapping.modifiedRange)`.\r\n    // original: ]xxx \\n <- this line is not modified\r\n    // modified: ]xx  \\n\r\n    if (rangeMapping.modifiedRange.endColumn === 1 && rangeMapping.originalRange.endColumn === 1\r\n        && rangeMapping.originalRange.startLineNumber + lineStartDelta <= rangeMapping.originalRange.endLineNumber\r\n        && rangeMapping.modifiedRange.startLineNumber + lineStartDelta <= rangeMapping.modifiedRange.endLineNumber) {\r\n        // We can only do this if the range is not empty yet\r\n        lineEndDelta = -1;\r\n    }\r\n    // original: xxx[ \\n <- this line is not modified\r\n    // modified: xxx[ \\n\r\n    if (rangeMapping.modifiedRange.startColumn - 1 >= modifiedLines[rangeMapping.modifiedRange.startLineNumber - 1].length\r\n        && rangeMapping.originalRange.startColumn - 1 >= originalLines[rangeMapping.originalRange.startLineNumber - 1].length\r\n        && rangeMapping.originalRange.startLineNumber <= rangeMapping.originalRange.endLineNumber + lineEndDelta\r\n        && rangeMapping.modifiedRange.startLineNumber <= rangeMapping.modifiedRange.endLineNumber + lineEndDelta) {\r\n        // We can only do this if the range is not empty yet\r\n        lineStartDelta = 1;\r\n    }\r\n    const originalLineRange = new LineRange(rangeMapping.originalRange.startLineNumber + lineStartDelta, rangeMapping.originalRange.endLineNumber + 1 + lineEndDelta);\r\n    const modifiedLineRange = new LineRange(rangeMapping.modifiedRange.startLineNumber + lineStartDelta, rangeMapping.modifiedRange.endLineNumber + 1 + lineEndDelta);\r\n    return new DetailedLineRangeMapping(originalLineRange, modifiedLineRange, [rangeMapping]);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { LegacyLinesDiffComputer } from './legacyLinesDiffComputer.js';\r\nimport { DefaultLinesDiffComputer } from './defaultLinesDiffComputer/defaultLinesDiffComputer.js';\r\nexport const linesDiffComputers = {\r\n    getLegacy: () => new LegacyLinesDiffComputer(),\r\n    getDefault: () => new DefaultLinesDiffComputer(),\r\n};\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Color, HSLA } from '../../../base/common/color.js';\r\nfunction _parseCaptureGroups(captureGroups) {\r\n    const values = [];\r\n    for (const captureGroup of captureGroups) {\r\n        const parsedNumber = Number(captureGroup);\r\n        if (parsedNumber || parsedNumber === 0 && captureGroup.replace(/\\s/g, '') !== '') {\r\n            values.push(parsedNumber);\r\n        }\r\n    }\r\n    return values;\r\n}\r\nfunction _toIColor(r, g, b, a) {\r\n    return {\r\n        red: r / 255,\r\n        blue: b / 255,\r\n        green: g / 255,\r\n        alpha: a\r\n    };\r\n}\r\nfunction _findRange(model, match) {\r\n    const index = match.index;\r\n    const length = match[0].length;\r\n    if (!index) {\r\n        return;\r\n    }\r\n    const startPosition = model.positionAt(index);\r\n    const range = {\r\n        startLineNumber: startPosition.lineNumber,\r\n        startColumn: startPosition.column,\r\n        endLineNumber: startPosition.lineNumber,\r\n        endColumn: startPosition.column + length\r\n    };\r\n    return range;\r\n}\r\nfunction _findHexColorInformation(range, hexValue) {\r\n    if (!range) {\r\n        return;\r\n    }\r\n    const parsedHexColor = Color.Format.CSS.parseHex(hexValue);\r\n    if (!parsedHexColor) {\r\n        return;\r\n    }\r\n    return {\r\n        range: range,\r\n        color: _toIColor(parsedHexColor.rgba.r, parsedHexColor.rgba.g, parsedHexColor.rgba.b, parsedHexColor.rgba.a)\r\n    };\r\n}\r\nfunction _findRGBColorInformation(range, matches, isAlpha) {\r\n    if (!range || matches.length !== 1) {\r\n        return;\r\n    }\r\n    const match = matches[0];\r\n    const captureGroups = match.values();\r\n    const parsedRegex = _parseCaptureGroups(captureGroups);\r\n    return {\r\n        range: range,\r\n        color: _toIColor(parsedRegex[0], parsedRegex[1], parsedRegex[2], isAlpha ? parsedRegex[3] : 1)\r\n    };\r\n}\r\nfunction _findHSLColorInformation(range, matches, isAlpha) {\r\n    if (!range || matches.length !== 1) {\r\n        return;\r\n    }\r\n    const match = matches[0];\r\n    const captureGroups = match.values();\r\n    const parsedRegex = _parseCaptureGroups(captureGroups);\r\n    const colorEquivalent = new Color(new HSLA(parsedRegex[0], parsedRegex[1] / 100, parsedRegex[2] / 100, isAlpha ? parsedRegex[3] : 1));\r\n    return {\r\n        range: range,\r\n        color: _toIColor(colorEquivalent.rgba.r, colorEquivalent.rgba.g, colorEquivalent.rgba.b, colorEquivalent.rgba.a)\r\n    };\r\n}\r\nfunction _findMatches(model, regex) {\r\n    if (typeof model === 'string') {\r\n        return [...model.matchAll(regex)];\r\n    }\r\n    else {\r\n        return model.findMatches(regex);\r\n    }\r\n}\r\nfunction computeColors(model) {\r\n    const result = [];\r\n    // Early validation for RGB and HSL\r\n    const initialValidationRegex = /\\b(rgb|rgba|hsl|hsla)(\\([0-9\\s,.\\%]*\\))|(#)([A-Fa-f0-9]{3})\\b|(#)([A-Fa-f0-9]{4})\\b|(#)([A-Fa-f0-9]{6})\\b|(#)([A-Fa-f0-9]{8})\\b/gm;\r\n    const initialValidationMatches = _findMatches(model, initialValidationRegex);\r\n    // Potential colors have been found, validate the parameters\r\n    if (initialValidationMatches.length > 0) {\r\n        for (const initialMatch of initialValidationMatches) {\r\n            const initialCaptureGroups = initialMatch.filter(captureGroup => captureGroup !== undefined);\r\n            const colorScheme = initialCaptureGroups[1];\r\n            const colorParameters = initialCaptureGroups[2];\r\n            if (!colorParameters) {\r\n                continue;\r\n            }\r\n            let colorInformation;\r\n            if (colorScheme === 'rgb') {\r\n                const regexParameters = /^\\(\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*,\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*,\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*\\)$/gm;\r\n                colorInformation = _findRGBColorInformation(_findRange(model, initialMatch), _findMatches(colorParameters, regexParameters), false);\r\n            }\r\n            else if (colorScheme === 'rgba') {\r\n                const regexParameters = /^\\(\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*,\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*,\\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\\s*,\\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\\s*\\)$/gm;\r\n                colorInformation = _findRGBColorInformation(_findRange(model, initialMatch), _findMatches(colorParameters, regexParameters), true);\r\n            }\r\n            else if (colorScheme === 'hsl') {\r\n                const regexParameters = /^\\(\\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\\s*,\\s*(100|\\d{1,2}[.]\\d*|\\d{1,2})%\\s*,\\s*(100|\\d{1,2}[.]\\d*|\\d{1,2})%\\s*\\)$/gm;\r\n                colorInformation = _findHSLColorInformation(_findRange(model, initialMatch), _findMatches(colorParameters, regexParameters), false);\r\n            }\r\n            else if (colorScheme === 'hsla') {\r\n                const regexParameters = /^\\(\\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\\s*,\\s*(100|\\d{1,2}[.]\\d*|\\d{1,2})%\\s*,\\s*(100|\\d{1,2}[.]\\d*|\\d{1,2})%\\s*,\\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\\s*\\)$/gm;\r\n                colorInformation = _findHSLColorInformation(_findRange(model, initialMatch), _findMatches(colorParameters, regexParameters), true);\r\n            }\r\n            else if (colorScheme === '#') {\r\n                colorInformation = _findHexColorInformation(_findRange(model, initialMatch), colorScheme + colorParameters);\r\n            }\r\n            if (colorInformation) {\r\n                result.push(colorInformation);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Returns an array of all default document colors in the provided document\r\n */\r\nexport function computeDefaultDocumentColors(model) {\r\n    if (!model || typeof model.getValue !== 'function' || typeof model.positionAt !== 'function') {\r\n        // Unknown caller!\r\n        return [];\r\n    }\r\n    return computeColors(model);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { stringDiff } from '../../../base/common/diff/diff.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { Position } from '../core/position.js';\r\nimport { Range } from '../core/range.js';\r\nimport { MirrorTextModel as BaseMirrorModel } from '../model/mirrorTextModel.js';\r\nimport { ensureValidWordDefinition, getWordAtText } from '../core/wordHelper.js';\r\nimport { computeLinks } from '../languages/linkComputer.js';\r\nimport { BasicInplaceReplace } from '../languages/supports/inplaceReplaceSupport.js';\r\nimport { createMonacoBaseAPI } from './editorBaseApi.js';\r\nimport { StopWatch } from '../../../base/common/stopwatch.js';\r\nimport { UnicodeTextModelHighlighter } from './unicodeTextModelHighlighter.js';\r\nimport { linesDiffComputers } from '../diff/linesDiffComputers.js';\r\nimport { createProxyObject, getAllMethodNames } from '../../../base/common/objects.js';\r\nimport { computeDefaultDocumentColors } from '../languages/defaultDocumentColorsComputer.js';\r\n/**\r\n * @internal\r\n */\r\nclass MirrorModel extends BaseMirrorModel {\r\n    get uri() {\r\n        return this._uri;\r\n    }\r\n    get eol() {\r\n        return this._eol;\r\n    }\r\n    getValue() {\r\n        return this.getText();\r\n    }\r\n    findMatches(regex) {\r\n        const matches = [];\r\n        for (let i = 0; i < this._lines.length; i++) {\r\n            const line = this._lines[i];\r\n            const offsetToAdd = this.offsetAt(new Position(i + 1, 1));\r\n            const iteratorOverMatches = line.matchAll(regex);\r\n            for (const match of iteratorOverMatches) {\r\n                if (match.index || match.index === 0) {\r\n                    match.index = match.index + offsetToAdd;\r\n                }\r\n                matches.push(match);\r\n            }\r\n        }\r\n        return matches;\r\n    }\r\n    getLinesContent() {\r\n        return this._lines.slice(0);\r\n    }\r\n    getLineCount() {\r\n        return this._lines.length;\r\n    }\r\n    getLineContent(lineNumber) {\r\n        return this._lines[lineNumber - 1];\r\n    }\r\n    getWordAtPosition(position, wordDefinition) {\r\n        const wordAtText = getWordAtText(position.column, ensureValidWordDefinition(wordDefinition), this._lines[position.lineNumber - 1], 0);\r\n        if (wordAtText) {\r\n            return new Range(position.lineNumber, wordAtText.startColumn, position.lineNumber, wordAtText.endColumn);\r\n        }\r\n        return null;\r\n    }\r\n    words(wordDefinition) {\r\n        const lines = this._lines;\r\n        const wordenize = this._wordenize.bind(this);\r\n        let lineNumber = 0;\r\n        let lineText = '';\r\n        let wordRangesIdx = 0;\r\n        let wordRanges = [];\r\n        return {\r\n            *[Symbol.iterator]() {\r\n                while (true) {\r\n                    if (wordRangesIdx < wordRanges.length) {\r\n                        const value = lineText.substring(wordRanges[wordRangesIdx].start, wordRanges[wordRangesIdx].end);\r\n                        wordRangesIdx += 1;\r\n                        yield value;\r\n                    }\r\n                    else {\r\n                        if (lineNumber < lines.length) {\r\n                            lineText = lines[lineNumber];\r\n                            wordRanges = wordenize(lineText, wordDefinition);\r\n                            wordRangesIdx = 0;\r\n                            lineNumber += 1;\r\n                        }\r\n                        else {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n    getLineWords(lineNumber, wordDefinition) {\r\n        const content = this._lines[lineNumber - 1];\r\n        const ranges = this._wordenize(content, wordDefinition);\r\n        const words = [];\r\n        for (const range of ranges) {\r\n            words.push({\r\n                word: content.substring(range.start, range.end),\r\n                startColumn: range.start + 1,\r\n                endColumn: range.end + 1\r\n            });\r\n        }\r\n        return words;\r\n    }\r\n    _wordenize(content, wordDefinition) {\r\n        const result = [];\r\n        let match;\r\n        wordDefinition.lastIndex = 0; // reset lastIndex just to be sure\r\n        while (match = wordDefinition.exec(content)) {\r\n            if (match[0].length === 0) {\r\n                // it did match the empty string\r\n                break;\r\n            }\r\n            result.push({ start: match.index, end: match.index + match[0].length });\r\n        }\r\n        return result;\r\n    }\r\n    getValueInRange(range) {\r\n        range = this._validateRange(range);\r\n        if (range.startLineNumber === range.endLineNumber) {\r\n            return this._lines[range.startLineNumber - 1].substring(range.startColumn - 1, range.endColumn - 1);\r\n        }\r\n        const lineEnding = this._eol;\r\n        const startLineIndex = range.startLineNumber - 1;\r\n        const endLineIndex = range.endLineNumber - 1;\r\n        const resultLines = [];\r\n        resultLines.push(this._lines[startLineIndex].substring(range.startColumn - 1));\r\n        for (let i = startLineIndex + 1; i < endLineIndex; i++) {\r\n            resultLines.push(this._lines[i]);\r\n        }\r\n        resultLines.push(this._lines[endLineIndex].substring(0, range.endColumn - 1));\r\n        return resultLines.join(lineEnding);\r\n    }\r\n    offsetAt(position) {\r\n        position = this._validatePosition(position);\r\n        this._ensureLineStarts();\r\n        return this._lineStarts.getPrefixSum(position.lineNumber - 2) + (position.column - 1);\r\n    }\r\n    positionAt(offset) {\r\n        offset = Math.floor(offset);\r\n        offset = Math.max(0, offset);\r\n        this._ensureLineStarts();\r\n        const out = this._lineStarts.getIndexOf(offset);\r\n        const lineLength = this._lines[out.index].length;\r\n        // Ensure we return a valid position\r\n        return {\r\n            lineNumber: 1 + out.index,\r\n            column: 1 + Math.min(out.remainder, lineLength)\r\n        };\r\n    }\r\n    _validateRange(range) {\r\n        const start = this._validatePosition({ lineNumber: range.startLineNumber, column: range.startColumn });\r\n        const end = this._validatePosition({ lineNumber: range.endLineNumber, column: range.endColumn });\r\n        if (start.lineNumber !== range.startLineNumber\r\n            || start.column !== range.startColumn\r\n            || end.lineNumber !== range.endLineNumber\r\n            || end.column !== range.endColumn) {\r\n            return {\r\n                startLineNumber: start.lineNumber,\r\n                startColumn: start.column,\r\n                endLineNumber: end.lineNumber,\r\n                endColumn: end.column\r\n            };\r\n        }\r\n        return range;\r\n    }\r\n    _validatePosition(position) {\r\n        if (!Position.isIPosition(position)) {\r\n            throw new Error('bad position');\r\n        }\r\n        let { lineNumber, column } = position;\r\n        let hasChanged = false;\r\n        if (lineNumber < 1) {\r\n            lineNumber = 1;\r\n            column = 1;\r\n            hasChanged = true;\r\n        }\r\n        else if (lineNumber > this._lines.length) {\r\n            lineNumber = this._lines.length;\r\n            column = this._lines[lineNumber - 1].length + 1;\r\n            hasChanged = true;\r\n        }\r\n        else {\r\n            const maxCharacter = this._lines[lineNumber - 1].length + 1;\r\n            if (column < 1) {\r\n                column = 1;\r\n                hasChanged = true;\r\n            }\r\n            else if (column > maxCharacter) {\r\n                column = maxCharacter;\r\n                hasChanged = true;\r\n            }\r\n        }\r\n        if (!hasChanged) {\r\n            return position;\r\n        }\r\n        else {\r\n            return { lineNumber, column };\r\n        }\r\n    }\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport class EditorSimpleWorker {\r\n    constructor(host, foreignModuleFactory) {\r\n        this._host = host;\r\n        this._models = Object.create(null);\r\n        this._foreignModuleFactory = foreignModuleFactory;\r\n        this._foreignModule = null;\r\n    }\r\n    dispose() {\r\n        this._models = Object.create(null);\r\n    }\r\n    _getModel(uri) {\r\n        return this._models[uri];\r\n    }\r\n    _getModels() {\r\n        const all = [];\r\n        Object.keys(this._models).forEach((key) => all.push(this._models[key]));\r\n        return all;\r\n    }\r\n    acceptNewModel(data) {\r\n        this._models[data.url] = new MirrorModel(URI.parse(data.url), data.lines, data.EOL, data.versionId);\r\n    }\r\n    acceptModelChanged(strURL, e) {\r\n        if (!this._models[strURL]) {\r\n            return;\r\n        }\r\n        const model = this._models[strURL];\r\n        model.onEvents(e);\r\n    }\r\n    acceptRemovedModel(strURL) {\r\n        if (!this._models[strURL]) {\r\n            return;\r\n        }\r\n        delete this._models[strURL];\r\n    }\r\n    async computeUnicodeHighlights(url, options, range) {\r\n        const model = this._getModel(url);\r\n        if (!model) {\r\n            return { ranges: [], hasMore: false, ambiguousCharacterCount: 0, invisibleCharacterCount: 0, nonBasicAsciiCharacterCount: 0 };\r\n        }\r\n        return UnicodeTextModelHighlighter.computeUnicodeHighlights(model, options, range);\r\n    }\r\n    // ---- BEGIN diff --------------------------------------------------------------------------\r\n    async computeDiff(originalUrl, modifiedUrl, options, algorithm) {\r\n        const original = this._getModel(originalUrl);\r\n        const modified = this._getModel(modifiedUrl);\r\n        if (!original || !modified) {\r\n            return null;\r\n        }\r\n        return EditorSimpleWorker.computeDiff(original, modified, options, algorithm);\r\n    }\r\n    static computeDiff(originalTextModel, modifiedTextModel, options, algorithm) {\r\n        const diffAlgorithm = algorithm === 'advanced' ? linesDiffComputers.getDefault() : linesDiffComputers.getLegacy();\r\n        const originalLines = originalTextModel.getLinesContent();\r\n        const modifiedLines = modifiedTextModel.getLinesContent();\r\n        const result = diffAlgorithm.computeDiff(originalLines, modifiedLines, options);\r\n        const identical = (result.changes.length > 0 ? false : this._modelsAreIdentical(originalTextModel, modifiedTextModel));\r\n        function getLineChanges(changes) {\r\n            return changes.map(m => {\r\n                var _a;\r\n                return ([m.original.startLineNumber, m.original.endLineNumberExclusive, m.modified.startLineNumber, m.modified.endLineNumberExclusive, (_a = m.innerChanges) === null || _a === void 0 ? void 0 : _a.map(m => [\r\n                        m.originalRange.startLineNumber,\r\n                        m.originalRange.startColumn,\r\n                        m.originalRange.endLineNumber,\r\n                        m.originalRange.endColumn,\r\n                        m.modifiedRange.startLineNumber,\r\n                        m.modifiedRange.startColumn,\r\n                        m.modifiedRange.endLineNumber,\r\n                        m.modifiedRange.endColumn,\r\n                    ])]);\r\n            });\r\n        }\r\n        return {\r\n            identical,\r\n            quitEarly: result.hitTimeout,\r\n            changes: getLineChanges(result.changes),\r\n            moves: result.moves.map(m => ([\r\n                m.lineRangeMapping.original.startLineNumber,\r\n                m.lineRangeMapping.original.endLineNumberExclusive,\r\n                m.lineRangeMapping.modified.startLineNumber,\r\n                m.lineRangeMapping.modified.endLineNumberExclusive,\r\n                getLineChanges(m.changes)\r\n            ])),\r\n        };\r\n    }\r\n    static _modelsAreIdentical(original, modified) {\r\n        const originalLineCount = original.getLineCount();\r\n        const modifiedLineCount = modified.getLineCount();\r\n        if (originalLineCount !== modifiedLineCount) {\r\n            return false;\r\n        }\r\n        for (let line = 1; line <= originalLineCount; line++) {\r\n            const originalLine = original.getLineContent(line);\r\n            const modifiedLine = modified.getLineContent(line);\r\n            if (originalLine !== modifiedLine) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    async computeMoreMinimalEdits(modelUrl, edits, pretty) {\r\n        const model = this._getModel(modelUrl);\r\n        if (!model) {\r\n            return edits;\r\n        }\r\n        const result = [];\r\n        let lastEol = undefined;\r\n        edits = edits.slice(0).sort((a, b) => {\r\n            if (a.range && b.range) {\r\n                return Range.compareRangesUsingStarts(a.range, b.range);\r\n            }\r\n            // eol only changes should go to the end\r\n            const aRng = a.range ? 0 : 1;\r\n            const bRng = b.range ? 0 : 1;\r\n            return aRng - bRng;\r\n        });\r\n        // merge adjacent edits\r\n        let writeIndex = 0;\r\n        for (let readIndex = 1; readIndex < edits.length; readIndex++) {\r\n            if (Range.getEndPosition(edits[writeIndex].range).equals(Range.getStartPosition(edits[readIndex].range))) {\r\n                edits[writeIndex].range = Range.fromPositions(Range.getStartPosition(edits[writeIndex].range), Range.getEndPosition(edits[readIndex].range));\r\n                edits[writeIndex].text += edits[readIndex].text;\r\n            }\r\n            else {\r\n                writeIndex++;\r\n                edits[writeIndex] = edits[readIndex];\r\n            }\r\n        }\r\n        edits.length = writeIndex + 1;\r\n        for (let { range, text, eol } of edits) {\r\n            if (typeof eol === 'number') {\r\n                lastEol = eol;\r\n            }\r\n            if (Range.isEmpty(range) && !text) {\r\n                // empty change\r\n                continue;\r\n            }\r\n            const original = model.getValueInRange(range);\r\n            text = text.replace(/\\r\\n|\\n|\\r/g, model.eol);\r\n            if (original === text) {\r\n                // noop\r\n                continue;\r\n            }\r\n            // make sure diff won't take too long\r\n            if (Math.max(text.length, original.length) > EditorSimpleWorker._diffLimit) {\r\n                result.push({ range, text });\r\n                continue;\r\n            }\r\n            // compute diff between original and edit.text\r\n            const changes = stringDiff(original, text, pretty);\r\n            const editOffset = model.offsetAt(Range.lift(range).getStartPosition());\r\n            for (const change of changes) {\r\n                const start = model.positionAt(editOffset + change.originalStart);\r\n                const end = model.positionAt(editOffset + change.originalStart + change.originalLength);\r\n                const newEdit = {\r\n                    text: text.substr(change.modifiedStart, change.modifiedLength),\r\n                    range: { startLineNumber: start.lineNumber, startColumn: start.column, endLineNumber: end.lineNumber, endColumn: end.column }\r\n                };\r\n                if (model.getValueInRange(newEdit.range) !== newEdit.text) {\r\n                    result.push(newEdit);\r\n                }\r\n            }\r\n        }\r\n        if (typeof lastEol === 'number') {\r\n            result.push({ eol: lastEol, text: '', range: { startLineNumber: 0, startColumn: 0, endLineNumber: 0, endColumn: 0 } });\r\n        }\r\n        return result;\r\n    }\r\n    // ---- END minimal edits ---------------------------------------------------------------\r\n    async computeLinks(modelUrl) {\r\n        const model = this._getModel(modelUrl);\r\n        if (!model) {\r\n            return null;\r\n        }\r\n        return computeLinks(model);\r\n    }\r\n    // --- BEGIN default document colors -----------------------------------------------------------\r\n    async computeDefaultDocumentColors(modelUrl) {\r\n        const model = this._getModel(modelUrl);\r\n        if (!model) {\r\n            return null;\r\n        }\r\n        return computeDefaultDocumentColors(model);\r\n    }\r\n    async textualSuggest(modelUrls, leadingWord, wordDef, wordDefFlags) {\r\n        const sw = new StopWatch();\r\n        const wordDefRegExp = new RegExp(wordDef, wordDefFlags);\r\n        const seen = new Set();\r\n        outer: for (const url of modelUrls) {\r\n            const model = this._getModel(url);\r\n            if (!model) {\r\n                continue;\r\n            }\r\n            for (const word of model.words(wordDefRegExp)) {\r\n                if (word === leadingWord || !isNaN(Number(word))) {\r\n                    continue;\r\n                }\r\n                seen.add(word);\r\n                if (seen.size > EditorSimpleWorker._suggestionsLimit) {\r\n                    break outer;\r\n                }\r\n            }\r\n        }\r\n        return { words: Array.from(seen), duration: sw.elapsed() };\r\n    }\r\n    // ---- END suggest --------------------------------------------------------------------------\r\n    //#region -- word ranges --\r\n    async computeWordRanges(modelUrl, range, wordDef, wordDefFlags) {\r\n        const model = this._getModel(modelUrl);\r\n        if (!model) {\r\n            return Object.create(null);\r\n        }\r\n        const wordDefRegExp = new RegExp(wordDef, wordDefFlags);\r\n        const result = Object.create(null);\r\n        for (let line = range.startLineNumber; line < range.endLineNumber; line++) {\r\n            const words = model.getLineWords(line, wordDefRegExp);\r\n            for (const word of words) {\r\n                if (!isNaN(Number(word.word))) {\r\n                    continue;\r\n                }\r\n                let array = result[word.word];\r\n                if (!array) {\r\n                    array = [];\r\n                    result[word.word] = array;\r\n                }\r\n                array.push({\r\n                    startLineNumber: line,\r\n                    startColumn: word.startColumn,\r\n                    endLineNumber: line,\r\n                    endColumn: word.endColumn\r\n                });\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    //#endregion\r\n    async navigateValueSet(modelUrl, range, up, wordDef, wordDefFlags) {\r\n        const model = this._getModel(modelUrl);\r\n        if (!model) {\r\n            return null;\r\n        }\r\n        const wordDefRegExp = new RegExp(wordDef, wordDefFlags);\r\n        if (range.startColumn === range.endColumn) {\r\n            range = {\r\n                startLineNumber: range.startLineNumber,\r\n                startColumn: range.startColumn,\r\n                endLineNumber: range.endLineNumber,\r\n                endColumn: range.endColumn + 1\r\n            };\r\n        }\r\n        const selectionText = model.getValueInRange(range);\r\n        const wordRange = model.getWordAtPosition({ lineNumber: range.startLineNumber, column: range.startColumn }, wordDefRegExp);\r\n        if (!wordRange) {\r\n            return null;\r\n        }\r\n        const word = model.getValueInRange(wordRange);\r\n        const result = BasicInplaceReplace.INSTANCE.navigateValueSet(range, selectionText, wordRange, word, up);\r\n        return result;\r\n    }\r\n    // ---- BEGIN foreign module support --------------------------------------------------------------------------\r\n    loadForeignModule(moduleId, createData, foreignHostMethods) {\r\n        const proxyMethodRequest = (method, args) => {\r\n            return this._host.fhr(method, args);\r\n        };\r\n        const foreignHost = createProxyObject(foreignHostMethods, proxyMethodRequest);\r\n        const ctx = {\r\n            host: foreignHost,\r\n            getMirrorModels: () => {\r\n                return this._getModels();\r\n            }\r\n        };\r\n        if (this._foreignModuleFactory) {\r\n            this._foreignModule = this._foreignModuleFactory(ctx, createData);\r\n            // static foreing module\r\n            return Promise.resolve(getAllMethodNames(this._foreignModule));\r\n        }\r\n        // ESM-comment-begin\r\n        // \t\treturn new Promise<any>((resolve, reject) => {\r\n        // \t\t\trequire([moduleId], (foreignModule: { create: IForeignModuleFactory }) => {\r\n        // \t\t\t\tthis._foreignModule = foreignModule.create(ctx, createData);\r\n        // \r\n        // \t\t\t\tresolve(getAllMethodNames(this._foreignModule));\r\n        // \r\n        // \t\t\t}, reject);\r\n        // \t\t});\r\n        // ESM-comment-end\r\n        // ESM-uncomment-begin\r\n        return Promise.reject(new Error(`Unexpected usage`));\r\n        // ESM-uncomment-end\r\n    }\r\n    // foreign method request\r\n    fmr(method, args) {\r\n        if (!this._foreignModule || typeof this._foreignModule[method] !== 'function') {\r\n            return Promise.reject(new Error('Missing requestHandler or method: ' + method));\r\n        }\r\n        try {\r\n            return Promise.resolve(this._foreignModule[method].apply(this._foreignModule, args));\r\n        }\r\n        catch (e) {\r\n            return Promise.reject(e);\r\n        }\r\n    }\r\n}\r\n// ---- END diff --------------------------------------------------------------------------\r\n// ---- BEGIN minimal edits ---------------------------------------------------------------\r\nEditorSimpleWorker._diffLimit = 100000;\r\n// ---- BEGIN suggest --------------------------------------------------------------------------\r\nEditorSimpleWorker._suggestionsLimit = 10000;\r\n/**\r\n * Called on the worker side\r\n * @internal\r\n */\r\nexport function create(host) {\r\n    return new EditorSimpleWorker(host, null);\r\n}\r\nif (typeof importScripts === 'function') {\r\n    // Running in a web worker\r\n    globalThis.monaco = createMonacoBaseAPI();\r\n}\r\n", "import { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nexport const ITextResourceConfigurationService = createDecorator('textResourceConfigurationService');\r\nexport const ITextResourcePropertiesService = createDecorator('textResourcePropertiesService');\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { IntervalTimer, timeout } from '../../../base/common/async.js';\r\nimport { Disposable, dispose, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { SimpleWorkerClient, logOnceWebWorkerWarning } from '../../../base/common/worker/simpleWorker.js';\r\nimport { DefaultWorkerFactory } from '../../../base/browser/defaultWorkerFactory.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\r\nimport { EditorSimpleWorker } from '../../common/services/editorSimpleWorker.js';\r\nimport { IModelService } from '../../common/services/model.js';\r\nimport { ITextResourceConfigurationService } from '../../common/services/textResourceConfiguration.js';\r\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\r\nimport { ILogService } from '../../../platform/log/common/log.js';\r\nimport { StopWatch } from '../../../base/common/stopwatch.js';\r\nimport { canceled } from '../../../base/common/errors.js';\r\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\r\nimport { MovedText } from '../../common/diff/linesDiffComputer.js';\r\nimport { DetailedLineRangeMapping, RangeMapping, LineRangeMapping } from '../../common/diff/rangeMapping.js';\r\nimport { LineRange } from '../../common/core/lineRange.js';\r\nimport { $window } from '../../../base/browser/window.js';\r\nimport { WindowIntervalTimer } from '../../../base/browser/dom.js';\r\n/**\r\n * Stop syncing a model to the worker if it was not needed for 1 min.\r\n */\r\nconst STOP_SYNC_MODEL_DELTA_TIME_MS = 60 * 1000;\r\n/**\r\n * Stop the worker if it was not needed for 5 min.\r\n */\r\nconst STOP_WORKER_DELTA_TIME_MS = 5 * 60 * 1000;\r\nfunction canSyncModel(modelService, resource) {\r\n    const model = modelService.getModel(resource);\r\n    if (!model) {\r\n        return false;\r\n    }\r\n    if (model.isTooLargeForSyncing()) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nlet EditorWorkerService = class EditorWorkerService extends Disposable {\r\n    constructor(modelService, configurationService, logService, languageConfigurationService, languageFeaturesService) {\r\n        super();\r\n        this._modelService = modelService;\r\n        this._workerManager = this._register(new WorkerManager(this._modelService, languageConfigurationService));\r\n        this._logService = logService;\r\n        // register default link-provider and default completions-provider\r\n        this._register(languageFeaturesService.linkProvider.register({ language: '*', hasAccessToAllModels: true }, {\r\n            provideLinks: (model, token) => {\r\n                if (!canSyncModel(this._modelService, model.uri)) {\r\n                    return Promise.resolve({ links: [] }); // File too large\r\n                }\r\n                return this._workerManager.withWorker().then(client => client.computeLinks(model.uri)).then(links => {\r\n                    return links && { links };\r\n                });\r\n            }\r\n        }));\r\n        this._register(languageFeaturesService.completionProvider.register('*', new WordBasedCompletionItemProvider(this._workerManager, configurationService, this._modelService, languageConfigurationService)));\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    canComputeUnicodeHighlights(uri) {\r\n        return canSyncModel(this._modelService, uri);\r\n    }\r\n    computedUnicodeHighlights(uri, options, range) {\r\n        return this._workerManager.withWorker().then(client => client.computedUnicodeHighlights(uri, options, range));\r\n    }\r\n    async computeDiff(original, modified, options, algorithm) {\r\n        const result = await this._workerManager.withWorker().then(client => client.computeDiff(original, modified, options, algorithm));\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        // Convert from space efficient JSON data to rich objects.\r\n        const diff = {\r\n            identical: result.identical,\r\n            quitEarly: result.quitEarly,\r\n            changes: toLineRangeMappings(result.changes),\r\n            moves: result.moves.map(m => new MovedText(new LineRangeMapping(new LineRange(m[0], m[1]), new LineRange(m[2], m[3])), toLineRangeMappings(m[4])))\r\n        };\r\n        return diff;\r\n        function toLineRangeMappings(changes) {\r\n            return changes.map((c) => {\r\n                var _a;\r\n                return new DetailedLineRangeMapping(new LineRange(c[0], c[1]), new LineRange(c[2], c[3]), (_a = c[4]) === null || _a === void 0 ? void 0 : _a.map((c) => new RangeMapping(new Range(c[0], c[1], c[2], c[3]), new Range(c[4], c[5], c[6], c[7]))));\r\n            });\r\n        }\r\n    }\r\n    computeMoreMinimalEdits(resource, edits, pretty = false) {\r\n        if (isNonEmptyArray(edits)) {\r\n            if (!canSyncModel(this._modelService, resource)) {\r\n                return Promise.resolve(edits); // File too large\r\n            }\r\n            const sw = StopWatch.create();\r\n            const result = this._workerManager.withWorker().then(client => client.computeMoreMinimalEdits(resource, edits, pretty));\r\n            result.finally(() => this._logService.trace('FORMAT#computeMoreMinimalEdits', resource.toString(true), sw.elapsed()));\r\n            return Promise.race([result, timeout(1000).then(() => edits)]);\r\n        }\r\n        else {\r\n            return Promise.resolve(undefined);\r\n        }\r\n    }\r\n    canNavigateValueSet(resource) {\r\n        return (canSyncModel(this._modelService, resource));\r\n    }\r\n    navigateValueSet(resource, range, up) {\r\n        return this._workerManager.withWorker().then(client => client.navigateValueSet(resource, range, up));\r\n    }\r\n    canComputeWordRanges(resource) {\r\n        return canSyncModel(this._modelService, resource);\r\n    }\r\n    computeWordRanges(resource, range) {\r\n        return this._workerManager.withWorker().then(client => client.computeWordRanges(resource, range));\r\n    }\r\n};\r\nEditorWorkerService = __decorate([\r\n    __param(0, IModelService),\r\n    __param(1, ITextResourceConfigurationService),\r\n    __param(2, ILogService),\r\n    __param(3, ILanguageConfigurationService),\r\n    __param(4, ILanguageFeaturesService)\r\n], EditorWorkerService);\r\nexport { EditorWorkerService };\r\nclass WordBasedCompletionItemProvider {\r\n    constructor(workerManager, configurationService, modelService, languageConfigurationService) {\r\n        this.languageConfigurationService = languageConfigurationService;\r\n        this._debugDisplayName = 'wordbasedCompletions';\r\n        this._workerManager = workerManager;\r\n        this._configurationService = configurationService;\r\n        this._modelService = modelService;\r\n    }\r\n    async provideCompletionItems(model, position) {\r\n        const config = this._configurationService.getValue(model.uri, position, 'editor');\r\n        if (config.wordBasedSuggestions === 'off') {\r\n            return undefined;\r\n        }\r\n        const models = [];\r\n        if (config.wordBasedSuggestions === 'currentDocument') {\r\n            // only current file and only if not too large\r\n            if (canSyncModel(this._modelService, model.uri)) {\r\n                models.push(model.uri);\r\n            }\r\n        }\r\n        else {\r\n            // either all files or files of same language\r\n            for (const candidate of this._modelService.getModels()) {\r\n                if (!canSyncModel(this._modelService, candidate.uri)) {\r\n                    continue;\r\n                }\r\n                if (candidate === model) {\r\n                    models.unshift(candidate.uri);\r\n                }\r\n                else if (config.wordBasedSuggestions === 'allDocuments' || candidate.getLanguageId() === model.getLanguageId()) {\r\n                    models.push(candidate.uri);\r\n                }\r\n            }\r\n        }\r\n        if (models.length === 0) {\r\n            return undefined; // File too large, no other files\r\n        }\r\n        const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\r\n        const word = model.getWordAtPosition(position);\r\n        const replace = !word ? Range.fromPositions(position) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\r\n        const insert = replace.setEndPosition(position.lineNumber, position.column);\r\n        const client = await this._workerManager.withWorker();\r\n        const data = await client.textualSuggest(models, word === null || word === void 0 ? void 0 : word.word, wordDefRegExp);\r\n        if (!data) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            duration: data.duration,\r\n            suggestions: data.words.map((word) => {\r\n                return {\r\n                    kind: 18 /* languages.CompletionItemKind.Text */,\r\n                    label: word,\r\n                    insertText: word,\r\n                    range: { insert, replace }\r\n                };\r\n            }),\r\n        };\r\n    }\r\n}\r\nclass WorkerManager extends Disposable {\r\n    constructor(modelService, languageConfigurationService) {\r\n        super();\r\n        this.languageConfigurationService = languageConfigurationService;\r\n        this._modelService = modelService;\r\n        this._editorWorkerClient = null;\r\n        this._lastWorkerUsedTime = (new Date()).getTime();\r\n        const stopWorkerInterval = this._register(new WindowIntervalTimer());\r\n        stopWorkerInterval.cancelAndSet(() => this._checkStopIdleWorker(), Math.round(STOP_WORKER_DELTA_TIME_MS / 2), $window);\r\n        this._register(this._modelService.onModelRemoved(_ => this._checkStopEmptyWorker()));\r\n    }\r\n    dispose() {\r\n        if (this._editorWorkerClient) {\r\n            this._editorWorkerClient.dispose();\r\n            this._editorWorkerClient = null;\r\n        }\r\n        super.dispose();\r\n    }\r\n    /**\r\n     * Check if the model service has no more models and stop the worker if that is the case.\r\n     */\r\n    _checkStopEmptyWorker() {\r\n        if (!this._editorWorkerClient) {\r\n            return;\r\n        }\r\n        const models = this._modelService.getModels();\r\n        if (models.length === 0) {\r\n            // There are no more models => nothing possible for me to do\r\n            this._editorWorkerClient.dispose();\r\n            this._editorWorkerClient = null;\r\n        }\r\n    }\r\n    /**\r\n     * Check if the worker has been idle for a while and then stop it.\r\n     */\r\n    _checkStopIdleWorker() {\r\n        if (!this._editorWorkerClient) {\r\n            return;\r\n        }\r\n        const timeSinceLastWorkerUsedTime = (new Date()).getTime() - this._lastWorkerUsedTime;\r\n        if (timeSinceLastWorkerUsedTime > STOP_WORKER_DELTA_TIME_MS) {\r\n            this._editorWorkerClient.dispose();\r\n            this._editorWorkerClient = null;\r\n        }\r\n    }\r\n    withWorker() {\r\n        this._lastWorkerUsedTime = (new Date()).getTime();\r\n        if (!this._editorWorkerClient) {\r\n            this._editorWorkerClient = new EditorWorkerClient(this._modelService, false, 'editorWorkerService', this.languageConfigurationService);\r\n        }\r\n        return Promise.resolve(this._editorWorkerClient);\r\n    }\r\n}\r\nclass EditorModelManager extends Disposable {\r\n    constructor(proxy, modelService, keepIdleModels) {\r\n        super();\r\n        this._syncedModels = Object.create(null);\r\n        this._syncedModelsLastUsedTime = Object.create(null);\r\n        this._proxy = proxy;\r\n        this._modelService = modelService;\r\n        if (!keepIdleModels) {\r\n            const timer = new IntervalTimer();\r\n            timer.cancelAndSet(() => this._checkStopModelSync(), Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS / 2));\r\n            this._register(timer);\r\n        }\r\n    }\r\n    dispose() {\r\n        for (const modelUrl in this._syncedModels) {\r\n            dispose(this._syncedModels[modelUrl]);\r\n        }\r\n        this._syncedModels = Object.create(null);\r\n        this._syncedModelsLastUsedTime = Object.create(null);\r\n        super.dispose();\r\n    }\r\n    ensureSyncedResources(resources, forceLargeModels) {\r\n        for (const resource of resources) {\r\n            const resourceStr = resource.toString();\r\n            if (!this._syncedModels[resourceStr]) {\r\n                this._beginModelSync(resource, forceLargeModels);\r\n            }\r\n            if (this._syncedModels[resourceStr]) {\r\n                this._syncedModelsLastUsedTime[resourceStr] = (new Date()).getTime();\r\n            }\r\n        }\r\n    }\r\n    _checkStopModelSync() {\r\n        const currentTime = (new Date()).getTime();\r\n        const toRemove = [];\r\n        for (const modelUrl in this._syncedModelsLastUsedTime) {\r\n            const elapsedTime = currentTime - this._syncedModelsLastUsedTime[modelUrl];\r\n            if (elapsedTime > STOP_SYNC_MODEL_DELTA_TIME_MS) {\r\n                toRemove.push(modelUrl);\r\n            }\r\n        }\r\n        for (const e of toRemove) {\r\n            this._stopModelSync(e);\r\n        }\r\n    }\r\n    _beginModelSync(resource, forceLargeModels) {\r\n        const model = this._modelService.getModel(resource);\r\n        if (!model) {\r\n            return;\r\n        }\r\n        if (!forceLargeModels && model.isTooLargeForSyncing()) {\r\n            return;\r\n        }\r\n        const modelUrl = resource.toString();\r\n        this._proxy.acceptNewModel({\r\n            url: model.uri.toString(),\r\n            lines: model.getLinesContent(),\r\n            EOL: model.getEOL(),\r\n            versionId: model.getVersionId()\r\n        });\r\n        const toDispose = new DisposableStore();\r\n        toDispose.add(model.onDidChangeContent((e) => {\r\n            this._proxy.acceptModelChanged(modelUrl.toString(), e);\r\n        }));\r\n        toDispose.add(model.onWillDispose(() => {\r\n            this._stopModelSync(modelUrl);\r\n        }));\r\n        toDispose.add(toDisposable(() => {\r\n            this._proxy.acceptRemovedModel(modelUrl);\r\n        }));\r\n        this._syncedModels[modelUrl] = toDispose;\r\n    }\r\n    _stopModelSync(modelUrl) {\r\n        const toDispose = this._syncedModels[modelUrl];\r\n        delete this._syncedModels[modelUrl];\r\n        delete this._syncedModelsLastUsedTime[modelUrl];\r\n        dispose(toDispose);\r\n    }\r\n}\r\nclass SynchronousWorkerClient {\r\n    constructor(instance) {\r\n        this._instance = instance;\r\n        this._proxyObj = Promise.resolve(this._instance);\r\n    }\r\n    dispose() {\r\n        this._instance.dispose();\r\n    }\r\n    getProxyObject() {\r\n        return this._proxyObj;\r\n    }\r\n}\r\nexport class EditorWorkerHost {\r\n    constructor(workerClient) {\r\n        this._workerClient = workerClient;\r\n    }\r\n    // foreign host request\r\n    fhr(method, args) {\r\n        return this._workerClient.fhr(method, args);\r\n    }\r\n}\r\nexport class EditorWorkerClient extends Disposable {\r\n    constructor(modelService, keepIdleModels, label, languageConfigurationService) {\r\n        super();\r\n        this.languageConfigurationService = languageConfigurationService;\r\n        this._disposed = false;\r\n        this._modelService = modelService;\r\n        this._keepIdleModels = keepIdleModels;\r\n        this._workerFactory = new DefaultWorkerFactory(label);\r\n        this._worker = null;\r\n        this._modelManager = null;\r\n    }\r\n    // foreign host request\r\n    fhr(method, args) {\r\n        throw new Error(`Not implemented!`);\r\n    }\r\n    _getOrCreateWorker() {\r\n        if (!this._worker) {\r\n            try {\r\n                this._worker = this._register(new SimpleWorkerClient(this._workerFactory, 'vs/editor/common/services/editorSimpleWorker', new EditorWorkerHost(this)));\r\n            }\r\n            catch (err) {\r\n                logOnceWebWorkerWarning(err);\r\n                this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\r\n            }\r\n        }\r\n        return this._worker;\r\n    }\r\n    _getProxy() {\r\n        return this._getOrCreateWorker().getProxyObject().then(undefined, (err) => {\r\n            logOnceWebWorkerWarning(err);\r\n            this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\r\n            return this._getOrCreateWorker().getProxyObject();\r\n        });\r\n    }\r\n    _getOrCreateModelManager(proxy) {\r\n        if (!this._modelManager) {\r\n            this._modelManager = this._register(new EditorModelManager(proxy, this._modelService, this._keepIdleModels));\r\n        }\r\n        return this._modelManager;\r\n    }\r\n    async _withSyncedResources(resources, forceLargeModels = false) {\r\n        if (this._disposed) {\r\n            return Promise.reject(canceled());\r\n        }\r\n        return this._getProxy().then((proxy) => {\r\n            this._getOrCreateModelManager(proxy).ensureSyncedResources(resources, forceLargeModels);\r\n            return proxy;\r\n        });\r\n    }\r\n    computedUnicodeHighlights(uri, options, range) {\r\n        return this._withSyncedResources([uri]).then(proxy => {\r\n            return proxy.computeUnicodeHighlights(uri.toString(), options, range);\r\n        });\r\n    }\r\n    computeDiff(original, modified, options, algorithm) {\r\n        return this._withSyncedResources([original, modified], /* forceLargeModels */ true).then(proxy => {\r\n            return proxy.computeDiff(original.toString(), modified.toString(), options, algorithm);\r\n        });\r\n    }\r\n    computeMoreMinimalEdits(resource, edits, pretty) {\r\n        return this._withSyncedResources([resource]).then(proxy => {\r\n            return proxy.computeMoreMinimalEdits(resource.toString(), edits, pretty);\r\n        });\r\n    }\r\n    computeLinks(resource) {\r\n        return this._withSyncedResources([resource]).then(proxy => {\r\n            return proxy.computeLinks(resource.toString());\r\n        });\r\n    }\r\n    computeDefaultDocumentColors(resource) {\r\n        return this._withSyncedResources([resource]).then(proxy => {\r\n            return proxy.computeDefaultDocumentColors(resource.toString());\r\n        });\r\n    }\r\n    async textualSuggest(resources, leadingWord, wordDefRegExp) {\r\n        const proxy = await this._withSyncedResources(resources);\r\n        const wordDef = wordDefRegExp.source;\r\n        const wordDefFlags = wordDefRegExp.flags;\r\n        return proxy.textualSuggest(resources.map(r => r.toString()), leadingWord, wordDef, wordDefFlags);\r\n    }\r\n    computeWordRanges(resource, range) {\r\n        return this._withSyncedResources([resource]).then(proxy => {\r\n            const model = this._modelService.getModel(resource);\r\n            if (!model) {\r\n                return Promise.resolve(null);\r\n            }\r\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\r\n            const wordDef = wordDefRegExp.source;\r\n            const wordDefFlags = wordDefRegExp.flags;\r\n            return proxy.computeWordRanges(resource.toString(), range, wordDef, wordDefFlags);\r\n        });\r\n    }\r\n    navigateValueSet(resource, range, up) {\r\n        return this._withSyncedResources([resource]).then(proxy => {\r\n            const model = this._modelService.getModel(resource);\r\n            if (!model) {\r\n                return null;\r\n            }\r\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\r\n            const wordDef = wordDefRegExp.source;\r\n            const wordDefFlags = wordDefRegExp.flags;\r\n            return proxy.navigateValueSet(resource.toString(), range, up, wordDef, wordDefFlags);\r\n        });\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._disposed = true;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { getAllMethodNames } from '../../../base/common/objects.js';\r\nimport { EditorWorkerClient } from './editorWorkerService.js';\r\n/**\r\n * Create a new web worker that has model syncing capabilities built in.\r\n * Specify an AMD module to load that will `create` an object that will be proxied.\r\n */\r\nexport function createWebWorker(modelService, languageConfigurationService, opts) {\r\n    return new MonacoWebWorkerImpl(modelService, languageConfigurationService, opts);\r\n}\r\nclass MonacoWebWorkerImpl extends EditorWorkerClient {\r\n    constructor(modelService, languageConfigurationService, opts) {\r\n        super(modelService, opts.keepIdleModels || false, opts.label, languageConfigurationService);\r\n        this._foreignModuleId = opts.moduleId;\r\n        this._foreignModuleCreateData = opts.createData || null;\r\n        this._foreignModuleHost = opts.host || null;\r\n        this._foreignProxy = null;\r\n    }\r\n    // foreign host request\r\n    fhr(method, args) {\r\n        if (!this._foreignModuleHost || typeof this._foreignModuleHost[method] !== 'function') {\r\n            return Promise.reject(new Error('Missing method ' + method + ' or missing main thread foreign host.'));\r\n        }\r\n        try {\r\n            return Promise.resolve(this._foreignModuleHost[method].apply(this._foreignModuleHost, args));\r\n        }\r\n        catch (e) {\r\n            return Promise.reject(e);\r\n        }\r\n    }\r\n    _getForeignProxy() {\r\n        if (!this._foreignProxy) {\r\n            this._foreignProxy = this._getProxy().then((proxy) => {\r\n                const foreignHostMethods = this._foreignModuleHost ? getAllMethodNames(this._foreignModuleHost) : [];\r\n                return proxy.loadForeignModule(this._foreignModuleId, this._foreignModuleCreateData, foreignHostMethods).then((foreignMethods) => {\r\n                    this._foreignModuleCreateData = null;\r\n                    const proxyMethodRequest = (method, args) => {\r\n                        return proxy.fmr(method, args);\r\n                    };\r\n                    const createProxyMethod = (method, proxyMethodRequest) => {\r\n                        return function () {\r\n                            const args = Array.prototype.slice.call(arguments, 0);\r\n                            return proxyMethodRequest(method, args);\r\n                        };\r\n                    };\r\n                    const foreignProxy = {};\r\n                    for (const foreignMethod of foreignMethods) {\r\n                        foreignProxy[foreignMethod] = createProxyMethod(foreignMethod, proxyMethodRequest);\r\n                    }\r\n                    return foreignProxy;\r\n                });\r\n            });\r\n        }\r\n        return this._foreignProxy;\r\n    }\r\n    getProxy() {\r\n        return this._getForeignProxy();\r\n    }\r\n    withSyncedResources(resources) {\r\n        return this._withSyncedResources(resources).then(_ => this.getProxy());\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport function isFuzzyActionArr(what) {\r\n    return (Array.isArray(what));\r\n}\r\nexport function isFuzzyAction(what) {\r\n    return !isFuzzyActionArr(what);\r\n}\r\nexport function isString(what) {\r\n    return (typeof what === 'string');\r\n}\r\nexport function isIAction(what) {\r\n    return !isString(what);\r\n}\r\n// Small helper functions\r\n/**\r\n * Is a string null, undefined, or empty?\r\n */\r\nexport function empty(s) {\r\n    return (s ? false : true);\r\n}\r\n/**\r\n * Puts a string to lower case if 'ignoreCase' is set.\r\n */\r\nexport function fixCase(lexer, str) {\r\n    return (lexer.ignoreCase && str ? str.toLowerCase() : str);\r\n}\r\n/**\r\n * Ensures there are no bad characters in a CSS token class.\r\n */\r\nexport function sanitize(s) {\r\n    return s.replace(/[&<>'\"_]/g, '-'); // used on all output token CSS classes\r\n}\r\n// Logging\r\n/**\r\n * Logs a message.\r\n */\r\nexport function log(lexer, msg) {\r\n    console.log(`${lexer.languageId}: ${msg}`);\r\n}\r\n// Throwing errors\r\nexport function createError(lexer, msg) {\r\n    return new Error(`${lexer.languageId}: ${msg}`);\r\n}\r\n// Helper functions for rule finding and substitution\r\n/**\r\n * substituteMatches is used on lexer strings and can substitutes predefined patterns:\r\n * \t\t$$  => $\r\n * \t\t$#  => id\r\n * \t\t$n  => matched entry n\r\n * \t\t@attr => contents of lexer[attr]\r\n *\r\n * See documentation for more info\r\n */\r\nexport function substituteMatches(lexer, str, id, matches, state) {\r\n    const re = /\\$((\\$)|(#)|(\\d\\d?)|[sS](\\d\\d?)|@(\\w+))/g;\r\n    let stateMatches = null;\r\n    return str.replace(re, function (full, sub, dollar, hash, n, s, attr, ofs, total) {\r\n        if (!empty(dollar)) {\r\n            return '$'; // $$\r\n        }\r\n        if (!empty(hash)) {\r\n            return fixCase(lexer, id); // default $#\r\n        }\r\n        if (!empty(n) && n < matches.length) {\r\n            return fixCase(lexer, matches[n]); // $n\r\n        }\r\n        if (!empty(attr) && lexer && typeof (lexer[attr]) === 'string') {\r\n            return lexer[attr]; //@attribute\r\n        }\r\n        if (stateMatches === null) { // split state on demand\r\n            stateMatches = state.split('.');\r\n            stateMatches.unshift(state);\r\n        }\r\n        if (!empty(s) && s < stateMatches.length) {\r\n            return fixCase(lexer, stateMatches[s]); //$Sn\r\n        }\r\n        return '';\r\n    });\r\n}\r\n/**\r\n * Find the tokenizer rules for a specific state (i.e. next action)\r\n */\r\nexport function findRules(lexer, inState) {\r\n    let state = inState;\r\n    while (state && state.length > 0) {\r\n        const rules = lexer.tokenizer[state];\r\n        if (rules) {\r\n            return rules;\r\n        }\r\n        const idx = state.lastIndexOf('.');\r\n        if (idx < 0) {\r\n            state = null; // no further parent\r\n        }\r\n        else {\r\n            state = state.substr(0, idx);\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Is a certain state defined? In contrast to 'findRules' this works on a ILexerMin.\r\n * This is used during compilation where we may know the defined states\r\n * but not yet whether the corresponding rules are correct.\r\n */\r\nexport function stateExists(lexer, inState) {\r\n    let state = inState;\r\n    while (state && state.length > 0) {\r\n        const exist = lexer.stateNames[state];\r\n        if (exist) {\r\n            return true;\r\n        }\r\n        const idx = state.lastIndexOf('.');\r\n        if (idx < 0) {\r\n            state = null; // no further parent\r\n        }\r\n        else {\r\n            state = state.substr(0, idx);\r\n        }\r\n    }\r\n    return false;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar MonarchTokenizer_1;\r\n/**\r\n * Create a syntax highighter with a fully declarative JSON style lexer description\r\n * using regular expressions.\r\n */\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport * as languages from '../../../common/languages.js';\r\nimport { NullState, nullTokenizeEncoded, nullTokenize } from '../../../common/languages/nullTokenize.js';\r\nimport * as monarchCommon from './monarchCommon.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nconst CACHE_STACK_DEPTH = 5;\r\n/**\r\n * Reuse the same stack elements up to a certain depth.\r\n */\r\nclass MonarchStackElementFactory {\r\n    static create(parent, state) {\r\n        return this._INSTANCE.create(parent, state);\r\n    }\r\n    constructor(maxCacheDepth) {\r\n        this._maxCacheDepth = maxCacheDepth;\r\n        this._entries = Object.create(null);\r\n    }\r\n    create(parent, state) {\r\n        if (parent !== null && parent.depth >= this._maxCacheDepth) {\r\n            // no caching above a certain depth\r\n            return new MonarchStackElement(parent, state);\r\n        }\r\n        let stackElementId = MonarchStackElement.getStackElementId(parent);\r\n        if (stackElementId.length > 0) {\r\n            stackElementId += '|';\r\n        }\r\n        stackElementId += state;\r\n        let result = this._entries[stackElementId];\r\n        if (result) {\r\n            return result;\r\n        }\r\n        result = new MonarchStackElement(parent, state);\r\n        this._entries[stackElementId] = result;\r\n        return result;\r\n    }\r\n}\r\nMonarchStackElementFactory._INSTANCE = new MonarchStackElementFactory(CACHE_STACK_DEPTH);\r\nclass MonarchStackElement {\r\n    constructor(parent, state) {\r\n        this.parent = parent;\r\n        this.state = state;\r\n        this.depth = (this.parent ? this.parent.depth : 0) + 1;\r\n    }\r\n    static getStackElementId(element) {\r\n        let result = '';\r\n        while (element !== null) {\r\n            if (result.length > 0) {\r\n                result += '|';\r\n            }\r\n            result += element.state;\r\n            element = element.parent;\r\n        }\r\n        return result;\r\n    }\r\n    static _equals(a, b) {\r\n        while (a !== null && b !== null) {\r\n            if (a === b) {\r\n                return true;\r\n            }\r\n            if (a.state !== b.state) {\r\n                return false;\r\n            }\r\n            a = a.parent;\r\n            b = b.parent;\r\n        }\r\n        if (a === null && b === null) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    equals(other) {\r\n        return MonarchStackElement._equals(this, other);\r\n    }\r\n    push(state) {\r\n        return MonarchStackElementFactory.create(this, state);\r\n    }\r\n    pop() {\r\n        return this.parent;\r\n    }\r\n    popall() {\r\n        let result = this;\r\n        while (result.parent) {\r\n            result = result.parent;\r\n        }\r\n        return result;\r\n    }\r\n    switchTo(state) {\r\n        return MonarchStackElementFactory.create(this.parent, state);\r\n    }\r\n}\r\nclass EmbeddedLanguageData {\r\n    constructor(languageId, state) {\r\n        this.languageId = languageId;\r\n        this.state = state;\r\n    }\r\n    equals(other) {\r\n        return (this.languageId === other.languageId\r\n            && this.state.equals(other.state));\r\n    }\r\n    clone() {\r\n        const stateClone = this.state.clone();\r\n        // save an object\r\n        if (stateClone === this.state) {\r\n            return this;\r\n        }\r\n        return new EmbeddedLanguageData(this.languageId, this.state);\r\n    }\r\n}\r\n/**\r\n * Reuse the same line states up to a certain depth.\r\n */\r\nclass MonarchLineStateFactory {\r\n    static create(stack, embeddedLanguageData) {\r\n        return this._INSTANCE.create(stack, embeddedLanguageData);\r\n    }\r\n    constructor(maxCacheDepth) {\r\n        this._maxCacheDepth = maxCacheDepth;\r\n        this._entries = Object.create(null);\r\n    }\r\n    create(stack, embeddedLanguageData) {\r\n        if (embeddedLanguageData !== null) {\r\n            // no caching when embedding\r\n            return new MonarchLineState(stack, embeddedLanguageData);\r\n        }\r\n        if (stack !== null && stack.depth >= this._maxCacheDepth) {\r\n            // no caching above a certain depth\r\n            return new MonarchLineState(stack, embeddedLanguageData);\r\n        }\r\n        const stackElementId = MonarchStackElement.getStackElementId(stack);\r\n        let result = this._entries[stackElementId];\r\n        if (result) {\r\n            return result;\r\n        }\r\n        result = new MonarchLineState(stack, null);\r\n        this._entries[stackElementId] = result;\r\n        return result;\r\n    }\r\n}\r\nMonarchLineStateFactory._INSTANCE = new MonarchLineStateFactory(CACHE_STACK_DEPTH);\r\nclass MonarchLineState {\r\n    constructor(stack, embeddedLanguageData) {\r\n        this.stack = stack;\r\n        this.embeddedLanguageData = embeddedLanguageData;\r\n    }\r\n    clone() {\r\n        const embeddedlanguageDataClone = this.embeddedLanguageData ? this.embeddedLanguageData.clone() : null;\r\n        // save an object\r\n        if (embeddedlanguageDataClone === this.embeddedLanguageData) {\r\n            return this;\r\n        }\r\n        return MonarchLineStateFactory.create(this.stack, this.embeddedLanguageData);\r\n    }\r\n    equals(other) {\r\n        if (!(other instanceof MonarchLineState)) {\r\n            return false;\r\n        }\r\n        if (!this.stack.equals(other.stack)) {\r\n            return false;\r\n        }\r\n        if (this.embeddedLanguageData === null && other.embeddedLanguageData === null) {\r\n            return true;\r\n        }\r\n        if (this.embeddedLanguageData === null || other.embeddedLanguageData === null) {\r\n            return false;\r\n        }\r\n        return this.embeddedLanguageData.equals(other.embeddedLanguageData);\r\n    }\r\n}\r\nclass MonarchClassicTokensCollector {\r\n    constructor() {\r\n        this._tokens = [];\r\n        this._languageId = null;\r\n        this._lastTokenType = null;\r\n        this._lastTokenLanguage = null;\r\n    }\r\n    enterLanguage(languageId) {\r\n        this._languageId = languageId;\r\n    }\r\n    emit(startOffset, type) {\r\n        if (this._lastTokenType === type && this._lastTokenLanguage === this._languageId) {\r\n            return;\r\n        }\r\n        this._lastTokenType = type;\r\n        this._lastTokenLanguage = this._languageId;\r\n        this._tokens.push(new languages.Token(startOffset, type, this._languageId));\r\n    }\r\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\r\n        const nestedLanguageId = embeddedLanguageData.languageId;\r\n        const embeddedModeState = embeddedLanguageData.state;\r\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\r\n        if (!nestedLanguageTokenizationSupport) {\r\n            this.enterLanguage(nestedLanguageId);\r\n            this.emit(offsetDelta, '');\r\n            return embeddedModeState;\r\n        }\r\n        const nestedResult = nestedLanguageTokenizationSupport.tokenize(embeddedLanguageLine, hasEOL, embeddedModeState);\r\n        if (offsetDelta !== 0) {\r\n            for (const token of nestedResult.tokens) {\r\n                this._tokens.push(new languages.Token(token.offset + offsetDelta, token.type, token.language));\r\n            }\r\n        }\r\n        else {\r\n            this._tokens = this._tokens.concat(nestedResult.tokens);\r\n        }\r\n        this._lastTokenType = null;\r\n        this._lastTokenLanguage = null;\r\n        this._languageId = null;\r\n        return nestedResult.endState;\r\n    }\r\n    finalize(endState) {\r\n        return new languages.TokenizationResult(this._tokens, endState);\r\n    }\r\n}\r\nclass MonarchModernTokensCollector {\r\n    constructor(languageService, theme) {\r\n        this._languageService = languageService;\r\n        this._theme = theme;\r\n        this._prependTokens = null;\r\n        this._tokens = [];\r\n        this._currentLanguageId = 0 /* LanguageId.Null */;\r\n        this._lastTokenMetadata = 0;\r\n    }\r\n    enterLanguage(languageId) {\r\n        this._currentLanguageId = this._languageService.languageIdCodec.encodeLanguageId(languageId);\r\n    }\r\n    emit(startOffset, type) {\r\n        const metadata = this._theme.match(this._currentLanguageId, type) | 1024 /* MetadataConsts.BALANCED_BRACKETS_MASK */;\r\n        if (this._lastTokenMetadata === metadata) {\r\n            return;\r\n        }\r\n        this._lastTokenMetadata = metadata;\r\n        this._tokens.push(startOffset);\r\n        this._tokens.push(metadata);\r\n    }\r\n    static _merge(a, b, c) {\r\n        const aLen = (a !== null ? a.length : 0);\r\n        const bLen = b.length;\r\n        const cLen = (c !== null ? c.length : 0);\r\n        if (aLen === 0 && bLen === 0 && cLen === 0) {\r\n            return new Uint32Array(0);\r\n        }\r\n        if (aLen === 0 && bLen === 0) {\r\n            return c;\r\n        }\r\n        if (bLen === 0 && cLen === 0) {\r\n            return a;\r\n        }\r\n        const result = new Uint32Array(aLen + bLen + cLen);\r\n        if (a !== null) {\r\n            result.set(a);\r\n        }\r\n        for (let i = 0; i < bLen; i++) {\r\n            result[aLen + i] = b[i];\r\n        }\r\n        if (c !== null) {\r\n            result.set(c, aLen + bLen);\r\n        }\r\n        return result;\r\n    }\r\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\r\n        const nestedLanguageId = embeddedLanguageData.languageId;\r\n        const embeddedModeState = embeddedLanguageData.state;\r\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\r\n        if (!nestedLanguageTokenizationSupport) {\r\n            this.enterLanguage(nestedLanguageId);\r\n            this.emit(offsetDelta, '');\r\n            return embeddedModeState;\r\n        }\r\n        const nestedResult = nestedLanguageTokenizationSupport.tokenizeEncoded(embeddedLanguageLine, hasEOL, embeddedModeState);\r\n        if (offsetDelta !== 0) {\r\n            for (let i = 0, len = nestedResult.tokens.length; i < len; i += 2) {\r\n                nestedResult.tokens[i] += offsetDelta;\r\n            }\r\n        }\r\n        this._prependTokens = MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, nestedResult.tokens);\r\n        this._tokens = [];\r\n        this._currentLanguageId = 0;\r\n        this._lastTokenMetadata = 0;\r\n        return nestedResult.endState;\r\n    }\r\n    finalize(endState) {\r\n        return new languages.EncodedTokenizationResult(MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, null), endState);\r\n    }\r\n}\r\nlet MonarchTokenizer = MonarchTokenizer_1 = class MonarchTokenizer extends Disposable {\r\n    constructor(languageService, standaloneThemeService, languageId, lexer, _configurationService) {\r\n        super();\r\n        this._configurationService = _configurationService;\r\n        this._languageService = languageService;\r\n        this._standaloneThemeService = standaloneThemeService;\r\n        this._languageId = languageId;\r\n        this._lexer = lexer;\r\n        this._embeddedLanguages = Object.create(null);\r\n        this.embeddedLoaded = Promise.resolve(undefined);\r\n        // Set up listening for embedded modes\r\n        let emitting = false;\r\n        this._register(languages.TokenizationRegistry.onDidChange((e) => {\r\n            if (emitting) {\r\n                return;\r\n            }\r\n            let isOneOfMyEmbeddedModes = false;\r\n            for (let i = 0, len = e.changedLanguages.length; i < len; i++) {\r\n                const language = e.changedLanguages[i];\r\n                if (this._embeddedLanguages[language]) {\r\n                    isOneOfMyEmbeddedModes = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (isOneOfMyEmbeddedModes) {\r\n                emitting = true;\r\n                languages.TokenizationRegistry.handleChange([this._languageId]);\r\n                emitting = false;\r\n            }\r\n        }));\r\n        this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\r\n            overrideIdentifier: this._languageId\r\n        });\r\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\r\n            if (e.affectsConfiguration('editor.maxTokenizationLineLength')) {\r\n                this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\r\n                    overrideIdentifier: this._languageId\r\n                });\r\n            }\r\n        }));\r\n    }\r\n    getLoadStatus() {\r\n        const promises = [];\r\n        for (const nestedLanguageId in this._embeddedLanguages) {\r\n            const tokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\r\n            if (tokenizationSupport) {\r\n                // The nested language is already loaded\r\n                if (tokenizationSupport instanceof MonarchTokenizer_1) {\r\n                    const nestedModeStatus = tokenizationSupport.getLoadStatus();\r\n                    if (nestedModeStatus.loaded === false) {\r\n                        promises.push(nestedModeStatus.promise);\r\n                    }\r\n                }\r\n                continue;\r\n            }\r\n            if (!languages.TokenizationRegistry.isResolved(nestedLanguageId)) {\r\n                // The nested language is in the process of being loaded\r\n                promises.push(languages.TokenizationRegistry.getOrCreate(nestedLanguageId));\r\n            }\r\n        }\r\n        if (promises.length === 0) {\r\n            return {\r\n                loaded: true\r\n            };\r\n        }\r\n        return {\r\n            loaded: false,\r\n            promise: Promise.all(promises).then(_ => undefined)\r\n        };\r\n    }\r\n    getInitialState() {\r\n        const rootState = MonarchStackElementFactory.create(null, this._lexer.start);\r\n        return MonarchLineStateFactory.create(rootState, null);\r\n    }\r\n    tokenize(line, hasEOL, lineState) {\r\n        if (line.length >= this._maxTokenizationLineLength) {\r\n            return nullTokenize(this._languageId, lineState);\r\n        }\r\n        const tokensCollector = new MonarchClassicTokensCollector();\r\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\r\n        return tokensCollector.finalize(endLineState);\r\n    }\r\n    tokenizeEncoded(line, hasEOL, lineState) {\r\n        if (line.length >= this._maxTokenizationLineLength) {\r\n            return nullTokenizeEncoded(this._languageService.languageIdCodec.encodeLanguageId(this._languageId), lineState);\r\n        }\r\n        const tokensCollector = new MonarchModernTokensCollector(this._languageService, this._standaloneThemeService.getColorTheme().tokenTheme);\r\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\r\n        return tokensCollector.finalize(endLineState);\r\n    }\r\n    _tokenize(line, hasEOL, lineState, collector) {\r\n        if (lineState.embeddedLanguageData) {\r\n            return this._nestedTokenize(line, hasEOL, lineState, 0, collector);\r\n        }\r\n        else {\r\n            return this._myTokenize(line, hasEOL, lineState, 0, collector);\r\n        }\r\n    }\r\n    _findLeavingNestedLanguageOffset(line, state) {\r\n        let rules = this._lexer.tokenizer[state.stack.state];\r\n        if (!rules) {\r\n            rules = monarchCommon.findRules(this._lexer, state.stack.state); // do parent matching\r\n            if (!rules) {\r\n                throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state.stack.state);\r\n            }\r\n        }\r\n        let popOffset = -1;\r\n        let hasEmbeddedPopRule = false;\r\n        for (const rule of rules) {\r\n            if (!monarchCommon.isIAction(rule.action) || rule.action.nextEmbedded !== '@pop') {\r\n                continue;\r\n            }\r\n            hasEmbeddedPopRule = true;\r\n            let regex = rule.regex;\r\n            const regexSource = rule.regex.source;\r\n            if (regexSource.substr(0, 4) === '^(?:' && regexSource.substr(regexSource.length - 1, 1) === ')') {\r\n                const flags = (regex.ignoreCase ? 'i' : '') + (regex.unicode ? 'u' : '');\r\n                regex = new RegExp(regexSource.substr(4, regexSource.length - 5), flags);\r\n            }\r\n            const result = line.search(regex);\r\n            if (result === -1 || (result !== 0 && rule.matchOnlyAtLineStart)) {\r\n                continue;\r\n            }\r\n            if (popOffset === -1 || result < popOffset) {\r\n                popOffset = result;\r\n            }\r\n        }\r\n        if (!hasEmbeddedPopRule) {\r\n            throw monarchCommon.createError(this._lexer, 'no rule containing nextEmbedded: \"@pop\" in tokenizer embedded state: ' + state.stack.state);\r\n        }\r\n        return popOffset;\r\n    }\r\n    _nestedTokenize(line, hasEOL, lineState, offsetDelta, tokensCollector) {\r\n        const popOffset = this._findLeavingNestedLanguageOffset(line, lineState);\r\n        if (popOffset === -1) {\r\n            // tokenization will not leave nested language\r\n            const nestedEndState = tokensCollector.nestedLanguageTokenize(line, hasEOL, lineState.embeddedLanguageData, offsetDelta);\r\n            return MonarchLineStateFactory.create(lineState.stack, new EmbeddedLanguageData(lineState.embeddedLanguageData.languageId, nestedEndState));\r\n        }\r\n        const nestedLanguageLine = line.substring(0, popOffset);\r\n        if (nestedLanguageLine.length > 0) {\r\n            // tokenize with the nested language\r\n            tokensCollector.nestedLanguageTokenize(nestedLanguageLine, false, lineState.embeddedLanguageData, offsetDelta);\r\n        }\r\n        const restOfTheLine = line.substring(popOffset);\r\n        return this._myTokenize(restOfTheLine, hasEOL, lineState, offsetDelta + popOffset, tokensCollector);\r\n    }\r\n    _safeRuleName(rule) {\r\n        if (rule) {\r\n            return rule.name;\r\n        }\r\n        return '(unknown)';\r\n    }\r\n    _myTokenize(lineWithoutLF, hasEOL, lineState, offsetDelta, tokensCollector) {\r\n        tokensCollector.enterLanguage(this._languageId);\r\n        const lineWithoutLFLength = lineWithoutLF.length;\r\n        const line = (hasEOL && this._lexer.includeLF ? lineWithoutLF + '\\n' : lineWithoutLF);\r\n        const lineLength = line.length;\r\n        let embeddedLanguageData = lineState.embeddedLanguageData;\r\n        let stack = lineState.stack;\r\n        let pos = 0;\r\n        let groupMatching = null;\r\n        // See https://github.com/microsoft/monaco-editor/issues/1235\r\n        // Evaluate rules at least once for an empty line\r\n        let forceEvaluation = true;\r\n        while (forceEvaluation || pos < lineLength) {\r\n            const pos0 = pos;\r\n            const stackLen0 = stack.depth;\r\n            const groupLen0 = groupMatching ? groupMatching.groups.length : 0;\r\n            const state = stack.state;\r\n            let matches = null;\r\n            let matched = null;\r\n            let action = null;\r\n            let rule = null;\r\n            let enteringEmbeddedLanguage = null;\r\n            // check if we need to process group matches first\r\n            if (groupMatching) {\r\n                matches = groupMatching.matches;\r\n                const groupEntry = groupMatching.groups.shift();\r\n                matched = groupEntry.matched;\r\n                action = groupEntry.action;\r\n                rule = groupMatching.rule;\r\n                // cleanup if necessary\r\n                if (groupMatching.groups.length === 0) {\r\n                    groupMatching = null;\r\n                }\r\n            }\r\n            else {\r\n                // otherwise we match on the token stream\r\n                if (!forceEvaluation && pos >= lineLength) {\r\n                    // nothing to do\r\n                    break;\r\n                }\r\n                forceEvaluation = false;\r\n                // get the rules for this state\r\n                let rules = this._lexer.tokenizer[state];\r\n                if (!rules) {\r\n                    rules = monarchCommon.findRules(this._lexer, state); // do parent matching\r\n                    if (!rules) {\r\n                        throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state);\r\n                    }\r\n                }\r\n                // try each rule until we match\r\n                const restOfLine = line.substr(pos);\r\n                for (const rule of rules) {\r\n                    if (pos === 0 || !rule.matchOnlyAtLineStart) {\r\n                        matches = restOfLine.match(rule.regex);\r\n                        if (matches) {\r\n                            matched = matches[0];\r\n                            action = rule.action;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // We matched 'rule' with 'matches' and 'action'\r\n            if (!matches) {\r\n                matches = [''];\r\n                matched = '';\r\n            }\r\n            if (!action) {\r\n                // bad: we didn't match anything, and there is no action to take\r\n                // we need to advance the stream or we get progress trouble\r\n                if (pos < lineLength) {\r\n                    matches = [line.charAt(pos)];\r\n                    matched = matches[0];\r\n                }\r\n                action = this._lexer.defaultToken;\r\n            }\r\n            if (matched === null) {\r\n                // should never happen, needed for strict null checking\r\n                break;\r\n            }\r\n            // advance stream\r\n            pos += matched.length;\r\n            // maybe call action function (used for 'cases')\r\n            while (monarchCommon.isFuzzyAction(action) && monarchCommon.isIAction(action) && action.test) {\r\n                action = action.test(matched, matches, state, pos === lineLength);\r\n            }\r\n            let result = null;\r\n            // set the result: either a string or an array of actions\r\n            if (typeof action === 'string' || Array.isArray(action)) {\r\n                result = action;\r\n            }\r\n            else if (action.group) {\r\n                result = action.group;\r\n            }\r\n            else if (action.token !== null && action.token !== undefined) {\r\n                // do $n replacements?\r\n                if (action.tokenSubst) {\r\n                    result = monarchCommon.substituteMatches(this._lexer, action.token, matched, matches, state);\r\n                }\r\n                else {\r\n                    result = action.token;\r\n                }\r\n                // enter embedded language?\r\n                if (action.nextEmbedded) {\r\n                    if (action.nextEmbedded === '@pop') {\r\n                        if (!embeddedLanguageData) {\r\n                            throw monarchCommon.createError(this._lexer, 'cannot pop embedded language if not inside one');\r\n                        }\r\n                        embeddedLanguageData = null;\r\n                    }\r\n                    else if (embeddedLanguageData) {\r\n                        throw monarchCommon.createError(this._lexer, 'cannot enter embedded language from within an embedded language');\r\n                    }\r\n                    else {\r\n                        enteringEmbeddedLanguage = monarchCommon.substituteMatches(this._lexer, action.nextEmbedded, matched, matches, state);\r\n                    }\r\n                }\r\n                // state transformations\r\n                if (action.goBack) { // back up the stream..\r\n                    pos = Math.max(0, pos - action.goBack);\r\n                }\r\n                if (action.switchTo && typeof action.switchTo === 'string') {\r\n                    let nextState = monarchCommon.substituteMatches(this._lexer, action.switchTo, matched, matches, state); // switch state without a push...\r\n                    if (nextState[0] === '@') {\r\n                        nextState = nextState.substr(1); // peel off starting '@'\r\n                    }\r\n                    if (!monarchCommon.findRules(this._lexer, nextState)) {\r\n                        throw monarchCommon.createError(this._lexer, 'trying to switch to a state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\r\n                    }\r\n                    else {\r\n                        stack = stack.switchTo(nextState);\r\n                    }\r\n                }\r\n                else if (action.transform && typeof action.transform === 'function') {\r\n                    throw monarchCommon.createError(this._lexer, 'action.transform not supported');\r\n                }\r\n                else if (action.next) {\r\n                    if (action.next === '@push') {\r\n                        if (stack.depth >= this._lexer.maxStack) {\r\n                            throw monarchCommon.createError(this._lexer, 'maximum tokenizer stack size reached: [' +\r\n                                stack.state + ',' + stack.parent.state + ',...]');\r\n                        }\r\n                        else {\r\n                            stack = stack.push(state);\r\n                        }\r\n                    }\r\n                    else if (action.next === '@pop') {\r\n                        if (stack.depth <= 1) {\r\n                            throw monarchCommon.createError(this._lexer, 'trying to pop an empty stack in rule: ' + this._safeRuleName(rule));\r\n                        }\r\n                        else {\r\n                            stack = stack.pop();\r\n                        }\r\n                    }\r\n                    else if (action.next === '@popall') {\r\n                        stack = stack.popall();\r\n                    }\r\n                    else {\r\n                        let nextState = monarchCommon.substituteMatches(this._lexer, action.next, matched, matches, state);\r\n                        if (nextState[0] === '@') {\r\n                            nextState = nextState.substr(1); // peel off starting '@'\r\n                        }\r\n                        if (!monarchCommon.findRules(this._lexer, nextState)) {\r\n                            throw monarchCommon.createError(this._lexer, 'trying to set a next state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\r\n                        }\r\n                        else {\r\n                            stack = stack.push(nextState);\r\n                        }\r\n                    }\r\n                }\r\n                if (action.log && typeof (action.log) === 'string') {\r\n                    monarchCommon.log(this._lexer, this._lexer.languageId + ': ' + monarchCommon.substituteMatches(this._lexer, action.log, matched, matches, state));\r\n                }\r\n            }\r\n            // check result\r\n            if (result === null) {\r\n                throw monarchCommon.createError(this._lexer, 'lexer rule has no well-defined action in rule: ' + this._safeRuleName(rule));\r\n            }\r\n            const computeNewStateForEmbeddedLanguage = (enteringEmbeddedLanguage) => {\r\n                // support language names, mime types, and language ids\r\n                const languageId = (this._languageService.getLanguageIdByLanguageName(enteringEmbeddedLanguage)\r\n                    || this._languageService.getLanguageIdByMimeType(enteringEmbeddedLanguage)\r\n                    || enteringEmbeddedLanguage);\r\n                const embeddedLanguageData = this._getNestedEmbeddedLanguageData(languageId);\r\n                if (pos < lineLength) {\r\n                    // there is content from the embedded language on this line\r\n                    const restOfLine = lineWithoutLF.substr(pos);\r\n                    return this._nestedTokenize(restOfLine, hasEOL, MonarchLineStateFactory.create(stack, embeddedLanguageData), offsetDelta + pos, tokensCollector);\r\n                }\r\n                else {\r\n                    return MonarchLineStateFactory.create(stack, embeddedLanguageData);\r\n                }\r\n            };\r\n            // is the result a group match?\r\n            if (Array.isArray(result)) {\r\n                if (groupMatching && groupMatching.groups.length > 0) {\r\n                    throw monarchCommon.createError(this._lexer, 'groups cannot be nested: ' + this._safeRuleName(rule));\r\n                }\r\n                if (matches.length !== result.length + 1) {\r\n                    throw monarchCommon.createError(this._lexer, 'matched number of groups does not match the number of actions in rule: ' + this._safeRuleName(rule));\r\n                }\r\n                let totalLen = 0;\r\n                for (let i = 1; i < matches.length; i++) {\r\n                    totalLen += matches[i].length;\r\n                }\r\n                if (totalLen !== matched.length) {\r\n                    throw monarchCommon.createError(this._lexer, 'with groups, all characters should be matched in consecutive groups in rule: ' + this._safeRuleName(rule));\r\n                }\r\n                groupMatching = {\r\n                    rule: rule,\r\n                    matches: matches,\r\n                    groups: []\r\n                };\r\n                for (let i = 0; i < result.length; i++) {\r\n                    groupMatching.groups[i] = {\r\n                        action: result[i],\r\n                        matched: matches[i + 1]\r\n                    };\r\n                }\r\n                pos -= matched.length;\r\n                // call recursively to initiate first result match\r\n                continue;\r\n            }\r\n            else {\r\n                // regular result\r\n                // check for '@rematch'\r\n                if (result === '@rematch') {\r\n                    pos -= matched.length;\r\n                    matched = ''; // better set the next state too..\r\n                    matches = null;\r\n                    result = '';\r\n                    // Even though `@rematch` was specified, if `nextEmbedded` also specified,\r\n                    // a state transition should occur.\r\n                    if (enteringEmbeddedLanguage !== null) {\r\n                        return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\r\n                    }\r\n                }\r\n                // check progress\r\n                if (matched.length === 0) {\r\n                    if (lineLength === 0 || stackLen0 !== stack.depth || state !== stack.state || (!groupMatching ? 0 : groupMatching.groups.length) !== groupLen0) {\r\n                        continue;\r\n                    }\r\n                    else {\r\n                        throw monarchCommon.createError(this._lexer, 'no progress in tokenizer in rule: ' + this._safeRuleName(rule));\r\n                    }\r\n                }\r\n                // return the result (and check for brace matching)\r\n                // todo: for efficiency we could pre-sanitize tokenPostfix and substitutions\r\n                let tokenType = null;\r\n                if (monarchCommon.isString(result) && result.indexOf('@brackets') === 0) {\r\n                    const rest = result.substr('@brackets'.length);\r\n                    const bracket = findBracket(this._lexer, matched);\r\n                    if (!bracket) {\r\n                        throw monarchCommon.createError(this._lexer, '@brackets token returned but no bracket defined as: ' + matched);\r\n                    }\r\n                    tokenType = monarchCommon.sanitize(bracket.token + rest);\r\n                }\r\n                else {\r\n                    const token = (result === '' ? '' : result + this._lexer.tokenPostfix);\r\n                    tokenType = monarchCommon.sanitize(token);\r\n                }\r\n                if (pos0 < lineWithoutLFLength) {\r\n                    tokensCollector.emit(pos0 + offsetDelta, tokenType);\r\n                }\r\n            }\r\n            if (enteringEmbeddedLanguage !== null) {\r\n                return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\r\n            }\r\n        }\r\n        return MonarchLineStateFactory.create(stack, embeddedLanguageData);\r\n    }\r\n    _getNestedEmbeddedLanguageData(languageId) {\r\n        if (!this._languageService.isRegisteredLanguageId(languageId)) {\r\n            return new EmbeddedLanguageData(languageId, NullState);\r\n        }\r\n        if (languageId !== this._languageId) {\r\n            // Fire language loading event\r\n            this._languageService.requestBasicLanguageFeatures(languageId);\r\n            languages.TokenizationRegistry.getOrCreate(languageId);\r\n            this._embeddedLanguages[languageId] = true;\r\n        }\r\n        const tokenizationSupport = languages.TokenizationRegistry.get(languageId);\r\n        if (tokenizationSupport) {\r\n            return new EmbeddedLanguageData(languageId, tokenizationSupport.getInitialState());\r\n        }\r\n        return new EmbeddedLanguageData(languageId, NullState);\r\n    }\r\n};\r\nMonarchTokenizer = MonarchTokenizer_1 = __decorate([\r\n    __param(4, IConfigurationService)\r\n], MonarchTokenizer);\r\nexport { MonarchTokenizer };\r\n/**\r\n * Searches for a bracket in the 'brackets' attribute that matches the input.\r\n */\r\nfunction findBracket(lexer, matched) {\r\n    if (!matched) {\r\n        return null;\r\n    }\r\n    matched = monarchCommon.fixCase(lexer, matched);\r\n    const brackets = lexer.brackets;\r\n    for (const bracket of brackets) {\r\n        if (bracket.open === matched) {\r\n            return { token: bracket.token, bracketType: 1 /* monarchCommon.MonarchBracket.Open */ };\r\n        }\r\n        else if (bracket.close === matched) {\r\n            return { token: bracket.token, bracketType: -1 /* monarchCommon.MonarchBracket.Close */ };\r\n        }\r\n    }\r\n    return null;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { TokenizationRegistry } from '../../common/languages.js';\r\nimport { LineTokens } from '../../common/tokens/lineTokens.js';\r\nimport { RenderLineInput, renderViewLine2 as renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\r\nimport { ViewLineRenderingData } from '../../common/viewModel.js';\r\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\r\nconst ttPolicy = createTrustedTypesPolicy('standaloneColorizer', { createHTML: value => value });\r\nexport class Colorizer {\r\n    static colorizeElement(themeService, languageService, domNode, options) {\r\n        options = options || {};\r\n        const theme = options.theme || 'vs';\r\n        const mimeType = options.mimeType || domNode.getAttribute('lang') || domNode.getAttribute('data-lang');\r\n        if (!mimeType) {\r\n            console.error('Mode not detected');\r\n            return Promise.resolve();\r\n        }\r\n        const languageId = languageService.getLanguageIdByMimeType(mimeType) || mimeType;\r\n        themeService.setTheme(theme);\r\n        const text = domNode.firstChild ? domNode.firstChild.nodeValue : '';\r\n        domNode.className += ' ' + theme;\r\n        const render = (str) => {\r\n            var _a;\r\n            const trustedhtml = (_a = ttPolicy === null || ttPolicy === void 0 ? void 0 : ttPolicy.createHTML(str)) !== null && _a !== void 0 ? _a : str;\r\n            domNode.innerHTML = trustedhtml;\r\n        };\r\n        return this.colorize(languageService, text || '', languageId, options).then(render, (err) => console.error(err));\r\n    }\r\n    static async colorize(languageService, text, languageId, options) {\r\n        const languageIdCodec = languageService.languageIdCodec;\r\n        let tabSize = 4;\r\n        if (options && typeof options.tabSize === 'number') {\r\n            tabSize = options.tabSize;\r\n        }\r\n        if (strings.startsWithUTF8BOM(text)) {\r\n            text = text.substr(1);\r\n        }\r\n        const lines = strings.splitLines(text);\r\n        if (!languageService.isRegisteredLanguageId(languageId)) {\r\n            return _fakeColorize(lines, tabSize, languageIdCodec);\r\n        }\r\n        const tokenizationSupport = await TokenizationRegistry.getOrCreate(languageId);\r\n        if (tokenizationSupport) {\r\n            return _colorize(lines, tabSize, tokenizationSupport, languageIdCodec);\r\n        }\r\n        return _fakeColorize(lines, tabSize, languageIdCodec);\r\n    }\r\n    static colorizeLine(line, mightContainNonBasicASCII, mightContainRTL, tokens, tabSize = 4) {\r\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, mightContainNonBasicASCII);\r\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, mightContainRTL);\r\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, tokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\r\n        return renderResult.html;\r\n    }\r\n    static colorizeModelLine(model, lineNumber, tabSize = 4) {\r\n        const content = model.getLineContent(lineNumber);\r\n        model.tokenization.forceTokenization(lineNumber);\r\n        const tokens = model.tokenization.getLineTokens(lineNumber);\r\n        const inflatedTokens = tokens.inflate();\r\n        return this.colorizeLine(content, model.mightContainNonBasicASCII(), model.mightContainRTL(), inflatedTokens, tabSize);\r\n    }\r\n}\r\nfunction _colorize(lines, tabSize, tokenizationSupport, languageIdCodec) {\r\n    return new Promise((c, e) => {\r\n        const execute = () => {\r\n            const result = _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec);\r\n            if (tokenizationSupport instanceof MonarchTokenizer) {\r\n                const status = tokenizationSupport.getLoadStatus();\r\n                if (status.loaded === false) {\r\n                    status.promise.then(execute, e);\r\n                    return;\r\n                }\r\n            }\r\n            c(result);\r\n        };\r\n        execute();\r\n    });\r\n}\r\nfunction _fakeColorize(lines, tabSize, languageIdCodec) {\r\n    let html = [];\r\n    const defaultMetadata = ((0 /* FontStyle.None */ << 11 /* MetadataConsts.FONT_STYLE_OFFSET */)\r\n        | (1 /* ColorId.DefaultForeground */ << 15 /* MetadataConsts.FOREGROUND_OFFSET */)\r\n        | (2 /* ColorId.DefaultBackground */ << 24 /* MetadataConsts.BACKGROUND_OFFSET */)) >>> 0;\r\n    const tokens = new Uint32Array(2);\r\n    tokens[0] = 0;\r\n    tokens[1] = defaultMetadata;\r\n    for (let i = 0, length = lines.length; i < length; i++) {\r\n        const line = lines[i];\r\n        tokens[0] = line.length;\r\n        const lineTokens = new LineTokens(tokens, line, languageIdCodec);\r\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\r\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\r\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\r\n        html = html.concat(renderResult.html);\r\n        html.push('<br/>');\r\n    }\r\n    return html.join('');\r\n}\r\nfunction _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec) {\r\n    let html = [];\r\n    let state = tokenizationSupport.getInitialState();\r\n    for (let i = 0, length = lines.length; i < length; i++) {\r\n        const line = lines[i];\r\n        const tokenizeResult = tokenizationSupport.tokenizeEncoded(line, true, state);\r\n        LineTokens.convertToEndOffset(tokenizeResult.tokens, line.length);\r\n        const lineTokens = new LineTokens(tokenizeResult.tokens, line, languageIdCodec);\r\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\r\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\r\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens.inflate(), [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\r\n        html = html.concat(renderResult.html);\r\n        html.push('<br/>');\r\n        state = tokenizeResult.endState;\r\n    }\r\n    return html.join('');\r\n}\r\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\r\nimport { LinkedList } from '../../../base/common/linkedList.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nlet AbstractCodeEditorService = class AbstractCodeEditorService extends Disposable {\r\n    constructor(_themeService) {\r\n        super();\r\n        this._themeService = _themeService;\r\n        this._onWillCreateCodeEditor = this._register(new Emitter());\r\n        this._onCodeEditorAdd = this._register(new Emitter());\r\n        this.onCodeEditorAdd = this._onCodeEditorAdd.event;\r\n        this._onCodeEditorRemove = this._register(new Emitter());\r\n        this.onCodeEditorRemove = this._onCodeEditorRemove.event;\r\n        this._onWillCreateDiffEditor = this._register(new Emitter());\r\n        this._onDiffEditorAdd = this._register(new Emitter());\r\n        this.onDiffEditorAdd = this._onDiffEditorAdd.event;\r\n        this._onDiffEditorRemove = this._register(new Emitter());\r\n        this.onDiffEditorRemove = this._onDiffEditorRemove.event;\r\n        this._decorationOptionProviders = new Map();\r\n        this._codeEditorOpenHandlers = new LinkedList();\r\n        this._modelProperties = new Map();\r\n        this._codeEditors = Object.create(null);\r\n        this._diffEditors = Object.create(null);\r\n        this._globalStyleSheet = null;\r\n    }\r\n    willCreateCodeEditor() {\r\n        this._onWillCreateCodeEditor.fire();\r\n    }\r\n    addCodeEditor(editor) {\r\n        this._codeEditors[editor.getId()] = editor;\r\n        this._onCodeEditorAdd.fire(editor);\r\n    }\r\n    removeCodeEditor(editor) {\r\n        if (delete this._codeEditors[editor.getId()]) {\r\n            this._onCodeEditorRemove.fire(editor);\r\n        }\r\n    }\r\n    listCodeEditors() {\r\n        return Object.keys(this._codeEditors).map(id => this._codeEditors[id]);\r\n    }\r\n    willCreateDiffEditor() {\r\n        this._onWillCreateDiffEditor.fire();\r\n    }\r\n    addDiffEditor(editor) {\r\n        this._diffEditors[editor.getId()] = editor;\r\n        this._onDiffEditorAdd.fire(editor);\r\n    }\r\n    listDiffEditors() {\r\n        return Object.keys(this._diffEditors).map(id => this._diffEditors[id]);\r\n    }\r\n    getFocusedCodeEditor() {\r\n        let editorWithWidgetFocus = null;\r\n        const editors = this.listCodeEditors();\r\n        for (const editor of editors) {\r\n            if (editor.hasTextFocus()) {\r\n                // bingo!\r\n                return editor;\r\n            }\r\n            if (editor.hasWidgetFocus()) {\r\n                editorWithWidgetFocus = editor;\r\n            }\r\n        }\r\n        return editorWithWidgetFocus;\r\n    }\r\n    removeDecorationType(key) {\r\n        const provider = this._decorationOptionProviders.get(key);\r\n        if (provider) {\r\n            provider.refCount--;\r\n            if (provider.refCount <= 0) {\r\n                this._decorationOptionProviders.delete(key);\r\n                provider.dispose();\r\n                this.listCodeEditors().forEach((ed) => ed.removeDecorationsByType(key));\r\n            }\r\n        }\r\n    }\r\n    setModelProperty(resource, key, value) {\r\n        const key1 = resource.toString();\r\n        let dest;\r\n        if (this._modelProperties.has(key1)) {\r\n            dest = this._modelProperties.get(key1);\r\n        }\r\n        else {\r\n            dest = new Map();\r\n            this._modelProperties.set(key1, dest);\r\n        }\r\n        dest.set(key, value);\r\n    }\r\n    getModelProperty(resource, key) {\r\n        const key1 = resource.toString();\r\n        if (this._modelProperties.has(key1)) {\r\n            const innerMap = this._modelProperties.get(key1);\r\n            return innerMap.get(key);\r\n        }\r\n        return undefined;\r\n    }\r\n    async openCodeEditor(input, source, sideBySide) {\r\n        for (const handler of this._codeEditorOpenHandlers) {\r\n            const candidate = await handler(input, source, sideBySide);\r\n            if (candidate !== null) {\r\n                return candidate;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    registerCodeEditorOpenHandler(handler) {\r\n        const rm = this._codeEditorOpenHandlers.unshift(handler);\r\n        return toDisposable(rm);\r\n    }\r\n};\r\nAbstractCodeEditorService = __decorate([\r\n    __param(0, IThemeService)\r\n], AbstractCodeEditorService);\r\nexport { AbstractCodeEditorService };\r\nexport class GlobalStyleSheet {\r\n    constructor(styleSheet) {\r\n        this._styleSheet = styleSheet;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { windowOpenNoOpener } from '../../../base/browser/dom.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { AbstractCodeEditorService } from '../../browser/services/abstractCodeEditorService.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nlet StandaloneCodeEditorService = class StandaloneCodeEditorService extends AbstractCodeEditorService {\r\n    constructor(contextKeyService, themeService) {\r\n        super(themeService);\r\n        this._register(this.onCodeEditorAdd(() => this._checkContextKey()));\r\n        this._register(this.onCodeEditorRemove(() => this._checkContextKey()));\r\n        this._editorIsOpen = contextKeyService.createKey('editorIsOpen', false);\r\n        this._activeCodeEditor = null;\r\n        this._register(this.registerCodeEditorOpenHandler(async (input, source, sideBySide) => {\r\n            if (!source) {\r\n                return null;\r\n            }\r\n            return this.doOpenEditor(source, input);\r\n        }));\r\n    }\r\n    _checkContextKey() {\r\n        let hasCodeEditor = false;\r\n        for (const editor of this.listCodeEditors()) {\r\n            if (!editor.isSimpleWidget) {\r\n                hasCodeEditor = true;\r\n                break;\r\n            }\r\n        }\r\n        this._editorIsOpen.set(hasCodeEditor);\r\n    }\r\n    setActiveCodeEditor(activeCodeEditor) {\r\n        this._activeCodeEditor = activeCodeEditor;\r\n    }\r\n    getActiveCodeEditor() {\r\n        return this._activeCodeEditor;\r\n    }\r\n    doOpenEditor(editor, input) {\r\n        const model = this.findModel(editor, input.resource);\r\n        if (!model) {\r\n            if (input.resource) {\r\n                const schema = input.resource.scheme;\r\n                if (schema === Schemas.http || schema === Schemas.https) {\r\n                    // This is a fully qualified http or https URL\r\n                    windowOpenNoOpener(input.resource.toString());\r\n                    return editor;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        const selection = (input.options ? input.options.selection : null);\r\n        if (selection) {\r\n            if (typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\r\n                editor.setSelection(selection);\r\n                editor.revealRangeInCenter(selection, 1 /* ScrollType.Immediate */);\r\n            }\r\n            else {\r\n                const pos = {\r\n                    lineNumber: selection.startLineNumber,\r\n                    column: selection.startColumn\r\n                };\r\n                editor.setPosition(pos);\r\n                editor.revealPositionInCenter(pos, 1 /* ScrollType.Immediate */);\r\n            }\r\n        }\r\n        return editor;\r\n    }\r\n    findModel(editor, resource) {\r\n        const model = editor.getModel();\r\n        if (model && model.uri.toString() !== resource.toString()) {\r\n            return null;\r\n        }\r\n        return model;\r\n    }\r\n};\r\nStandaloneCodeEditorService = __decorate([\r\n    __param(0, IContextKeyService),\r\n    __param(1, IThemeService)\r\n], StandaloneCodeEditorService);\r\nexport { StandaloneCodeEditorService };\r\nregisterSingleton(ICodeEditorService, StandaloneCodeEditorService, 0 /* InstantiationType.Eager */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\r\nexport const ILayoutService = createDecorator('layoutService');\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { Event } from '../../../base/common/event.js';\r\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\r\nimport { coalesce, firstOrDefault } from '../../../base/common/arrays.js';\r\nimport { mainWindow } from '../../../base/browser/window.js';\r\nlet StandaloneLayoutService = class StandaloneLayoutService {\r\n    get mainContainer() {\r\n        var _a, _b;\r\n        return (_b = (_a = firstOrDefault(this._codeEditorService.listCodeEditors())) === null || _a === void 0 ? void 0 : _a.getContainerDomNode()) !== null && _b !== void 0 ? _b : mainWindow.document.body;\r\n    }\r\n    get activeContainer() {\r\n        var _a, _b;\r\n        const activeCodeEditor = (_a = this._codeEditorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : this._codeEditorService.getActiveCodeEditor();\r\n        return (_b = activeCodeEditor === null || activeCodeEditor === void 0 ? void 0 : activeCodeEditor.getContainerDomNode()) !== null && _b !== void 0 ? _b : this.mainContainer;\r\n    }\r\n    get mainContainerDimension() {\r\n        return dom.getClientArea(this.mainContainer);\r\n    }\r\n    get activeContainerDimension() {\r\n        return dom.getClientArea(this.activeContainer);\r\n    }\r\n    get containers() {\r\n        return coalesce(this._codeEditorService.listCodeEditors().map(codeEditor => codeEditor.getContainerDomNode()));\r\n    }\r\n    getContainer() {\r\n        return this.activeContainer;\r\n    }\r\n    focus() {\r\n        var _a;\r\n        (_a = this._codeEditorService.getFocusedCodeEditor()) === null || _a === void 0 ? void 0 : _a.focus();\r\n    }\r\n    constructor(_codeEditorService) {\r\n        this._codeEditorService = _codeEditorService;\r\n        this.onDidLayoutMainContainer = Event.None;\r\n        this.onDidLayoutActiveContainer = Event.None;\r\n        this.onDidLayoutContainer = Event.None;\r\n        this.onDidChangeActiveContainer = Event.None;\r\n        this.onDidAddContainer = Event.None;\r\n        this.mainContainerOffset = { top: 0, quickPickTop: 0 };\r\n        this.activeContainerOffset = { top: 0, quickPickTop: 0 };\r\n    }\r\n};\r\nStandaloneLayoutService = __decorate([\r\n    __param(0, ICodeEditorService)\r\n], StandaloneLayoutService);\r\nlet EditorScopedLayoutService = class EditorScopedLayoutService extends StandaloneLayoutService {\r\n    get mainContainer() {\r\n        return this._container;\r\n    }\r\n    constructor(_container, codeEditorService) {\r\n        super(codeEditorService);\r\n        this._container = _container;\r\n    }\r\n};\r\nEditorScopedLayoutService = __decorate([\r\n    __param(1, ICodeEditorService)\r\n], EditorScopedLayoutService);\r\nexport { EditorScopedLayoutService };\r\nregisterSingleton(ILayoutService, StandaloneLayoutService, 1 /* InstantiationType.Delayed */);\r\n", "import { createDecorator } from '../../instantiation/common/instantiation.js';\r\nexport const IDialogService = createDecorator('dialogService');\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { Disposable, isDisposable } from '../../../base/common/lifecycle.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport Severity from '../../../base/common/severity.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { IDialogService } from '../../dialogs/common/dialogs.js';\r\nimport { registerSingleton } from '../../instantiation/common/extensions.js';\r\nimport { INotificationService } from '../../notification/common/notification.js';\r\nimport { IUndoRedoService, ResourceEditStackSnapshot, UndoRedoGroup, UndoRedoSource } from './undoRedo.js';\r\nconst DEBUG = false;\r\nfunction getResourceLabel(resource) {\r\n    return resource.scheme === Schemas.file ? resource.fsPath : resource.path;\r\n}\r\nlet stackElementCounter = 0;\r\nclass ResourceStackElement {\r\n    constructor(actual, resourceLabel, strResource, groupId, groupOrder, sourceId, sourceOrder) {\r\n        this.id = (++stackElementCounter);\r\n        this.type = 0 /* UndoRedoElementType.Resource */;\r\n        this.actual = actual;\r\n        this.label = actual.label;\r\n        this.confirmBeforeUndo = actual.confirmBeforeUndo || false;\r\n        this.resourceLabel = resourceLabel;\r\n        this.strResource = strResource;\r\n        this.resourceLabels = [this.resourceLabel];\r\n        this.strResources = [this.strResource];\r\n        this.groupId = groupId;\r\n        this.groupOrder = groupOrder;\r\n        this.sourceId = sourceId;\r\n        this.sourceOrder = sourceOrder;\r\n        this.isValid = true;\r\n    }\r\n    setValid(isValid) {\r\n        this.isValid = isValid;\r\n    }\r\n    toString() {\r\n        return `[id:${this.id}] [group:${this.groupId}] [${this.isValid ? '  VALID' : 'INVALID'}] ${this.actual.constructor.name} - ${this.actual}`;\r\n    }\r\n}\r\nclass ResourceReasonPair {\r\n    constructor(resourceLabel, reason) {\r\n        this.resourceLabel = resourceLabel;\r\n        this.reason = reason;\r\n    }\r\n}\r\nclass RemovedResources {\r\n    constructor() {\r\n        this.elements = new Map();\r\n    }\r\n    createMessage() {\r\n        const externalRemoval = [];\r\n        const noParallelUniverses = [];\r\n        for (const [, element] of this.elements) {\r\n            const dest = (element.reason === 0 /* RemovedResourceReason.ExternalRemoval */\r\n                ? externalRemoval\r\n                : noParallelUniverses);\r\n            dest.push(element.resourceLabel);\r\n        }\r\n        const messages = [];\r\n        if (externalRemoval.length > 0) {\r\n            messages.push(nls.localize({ key: 'externalRemoval', comment: ['{0} is a list of filenames'] }, \"The following files have been closed and modified on disk: {0}.\", externalRemoval.join(', ')));\r\n        }\r\n        if (noParallelUniverses.length > 0) {\r\n            messages.push(nls.localize({ key: 'noParallelUniverses', comment: ['{0} is a list of filenames'] }, \"The following files have been modified in an incompatible way: {0}.\", noParallelUniverses.join(', ')));\r\n        }\r\n        return messages.join('\\n');\r\n    }\r\n    get size() {\r\n        return this.elements.size;\r\n    }\r\n    has(strResource) {\r\n        return this.elements.has(strResource);\r\n    }\r\n    set(strResource, value) {\r\n        this.elements.set(strResource, value);\r\n    }\r\n    delete(strResource) {\r\n        return this.elements.delete(strResource);\r\n    }\r\n}\r\nclass WorkspaceStackElement {\r\n    constructor(actual, resourceLabels, strResources, groupId, groupOrder, sourceId, sourceOrder) {\r\n        this.id = (++stackElementCounter);\r\n        this.type = 1 /* UndoRedoElementType.Workspace */;\r\n        this.actual = actual;\r\n        this.label = actual.label;\r\n        this.confirmBeforeUndo = actual.confirmBeforeUndo || false;\r\n        this.resourceLabels = resourceLabels;\r\n        this.strResources = strResources;\r\n        this.groupId = groupId;\r\n        this.groupOrder = groupOrder;\r\n        this.sourceId = sourceId;\r\n        this.sourceOrder = sourceOrder;\r\n        this.removedResources = null;\r\n        this.invalidatedResources = null;\r\n    }\r\n    canSplit() {\r\n        return (typeof this.actual.split === 'function');\r\n    }\r\n    removeResource(resourceLabel, strResource, reason) {\r\n        if (!this.removedResources) {\r\n            this.removedResources = new RemovedResources();\r\n        }\r\n        if (!this.removedResources.has(strResource)) {\r\n            this.removedResources.set(strResource, new ResourceReasonPair(resourceLabel, reason));\r\n        }\r\n    }\r\n    setValid(resourceLabel, strResource, isValid) {\r\n        if (isValid) {\r\n            if (this.invalidatedResources) {\r\n                this.invalidatedResources.delete(strResource);\r\n                if (this.invalidatedResources.size === 0) {\r\n                    this.invalidatedResources = null;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!this.invalidatedResources) {\r\n                this.invalidatedResources = new RemovedResources();\r\n            }\r\n            if (!this.invalidatedResources.has(strResource)) {\r\n                this.invalidatedResources.set(strResource, new ResourceReasonPair(resourceLabel, 0 /* RemovedResourceReason.ExternalRemoval */));\r\n            }\r\n        }\r\n    }\r\n    toString() {\r\n        return `[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources ? 'INVALID' : '  VALID'}] ${this.actual.constructor.name} - ${this.actual}`;\r\n    }\r\n}\r\nclass ResourceEditStack {\r\n    constructor(resourceLabel, strResource) {\r\n        this.resourceLabel = resourceLabel;\r\n        this.strResource = strResource;\r\n        this._past = [];\r\n        this._future = [];\r\n        this.locked = false;\r\n        this.versionId = 1;\r\n    }\r\n    dispose() {\r\n        for (const element of this._past) {\r\n            if (element.type === 1 /* UndoRedoElementType.Workspace */) {\r\n                element.removeResource(this.resourceLabel, this.strResource, 0 /* RemovedResourceReason.ExternalRemoval */);\r\n            }\r\n        }\r\n        for (const element of this._future) {\r\n            if (element.type === 1 /* UndoRedoElementType.Workspace */) {\r\n                element.removeResource(this.resourceLabel, this.strResource, 0 /* RemovedResourceReason.ExternalRemoval */);\r\n            }\r\n        }\r\n        this.versionId++;\r\n    }\r\n    toString() {\r\n        const result = [];\r\n        result.push(`* ${this.strResource}:`);\r\n        for (let i = 0; i < this._past.length; i++) {\r\n            result.push(`   * [UNDO] ${this._past[i]}`);\r\n        }\r\n        for (let i = this._future.length - 1; i >= 0; i--) {\r\n            result.push(`   * [REDO] ${this._future[i]}`);\r\n        }\r\n        return result.join('\\n');\r\n    }\r\n    flushAllElements() {\r\n        this._past = [];\r\n        this._future = [];\r\n        this.versionId++;\r\n    }\r\n    _setElementValidFlag(element, isValid) {\r\n        if (element.type === 1 /* UndoRedoElementType.Workspace */) {\r\n            element.setValid(this.resourceLabel, this.strResource, isValid);\r\n        }\r\n        else {\r\n            element.setValid(isValid);\r\n        }\r\n    }\r\n    setElementsValidFlag(isValid, filter) {\r\n        for (const element of this._past) {\r\n            if (filter(element.actual)) {\r\n                this._setElementValidFlag(element, isValid);\r\n            }\r\n        }\r\n        for (const element of this._future) {\r\n            if (filter(element.actual)) {\r\n                this._setElementValidFlag(element, isValid);\r\n            }\r\n        }\r\n    }\r\n    pushElement(element) {\r\n        // remove the future\r\n        for (const futureElement of this._future) {\r\n            if (futureElement.type === 1 /* UndoRedoElementType.Workspace */) {\r\n                futureElement.removeResource(this.resourceLabel, this.strResource, 1 /* RemovedResourceReason.NoParallelUniverses */);\r\n            }\r\n        }\r\n        this._future = [];\r\n        this._past.push(element);\r\n        this.versionId++;\r\n    }\r\n    createSnapshot(resource) {\r\n        const elements = [];\r\n        for (let i = 0, len = this._past.length; i < len; i++) {\r\n            elements.push(this._past[i].id);\r\n        }\r\n        for (let i = this._future.length - 1; i >= 0; i--) {\r\n            elements.push(this._future[i].id);\r\n        }\r\n        return new ResourceEditStackSnapshot(resource, elements);\r\n    }\r\n    restoreSnapshot(snapshot) {\r\n        const snapshotLength = snapshot.elements.length;\r\n        let isOK = true;\r\n        let snapshotIndex = 0;\r\n        let removePastAfter = -1;\r\n        for (let i = 0, len = this._past.length; i < len; i++, snapshotIndex++) {\r\n            const element = this._past[i];\r\n            if (isOK && (snapshotIndex >= snapshotLength || element.id !== snapshot.elements[snapshotIndex])) {\r\n                isOK = false;\r\n                removePastAfter = 0;\r\n            }\r\n            if (!isOK && element.type === 1 /* UndoRedoElementType.Workspace */) {\r\n                element.removeResource(this.resourceLabel, this.strResource, 0 /* RemovedResourceReason.ExternalRemoval */);\r\n            }\r\n        }\r\n        let removeFutureBefore = -1;\r\n        for (let i = this._future.length - 1; i >= 0; i--, snapshotIndex++) {\r\n            const element = this._future[i];\r\n            if (isOK && (snapshotIndex >= snapshotLength || element.id !== snapshot.elements[snapshotIndex])) {\r\n                isOK = false;\r\n                removeFutureBefore = i;\r\n            }\r\n            if (!isOK && element.type === 1 /* UndoRedoElementType.Workspace */) {\r\n                element.removeResource(this.resourceLabel, this.strResource, 0 /* RemovedResourceReason.ExternalRemoval */);\r\n            }\r\n        }\r\n        if (removePastAfter !== -1) {\r\n            this._past = this._past.slice(0, removePastAfter);\r\n        }\r\n        if (removeFutureBefore !== -1) {\r\n            this._future = this._future.slice(removeFutureBefore + 1);\r\n        }\r\n        this.versionId++;\r\n    }\r\n    getElements() {\r\n        const past = [];\r\n        const future = [];\r\n        for (const element of this._past) {\r\n            past.push(element.actual);\r\n        }\r\n        for (const element of this._future) {\r\n            future.push(element.actual);\r\n        }\r\n        return { past, future };\r\n    }\r\n    getClosestPastElement() {\r\n        if (this._past.length === 0) {\r\n            return null;\r\n        }\r\n        return this._past[this._past.length - 1];\r\n    }\r\n    getSecondClosestPastElement() {\r\n        if (this._past.length < 2) {\r\n            return null;\r\n        }\r\n        return this._past[this._past.length - 2];\r\n    }\r\n    getClosestFutureElement() {\r\n        if (this._future.length === 0) {\r\n            return null;\r\n        }\r\n        return this._future[this._future.length - 1];\r\n    }\r\n    hasPastElements() {\r\n        return (this._past.length > 0);\r\n    }\r\n    hasFutureElements() {\r\n        return (this._future.length > 0);\r\n    }\r\n    splitPastWorkspaceElement(toRemove, individualMap) {\r\n        for (let j = this._past.length - 1; j >= 0; j--) {\r\n            if (this._past[j] === toRemove) {\r\n                if (individualMap.has(this.strResource)) {\r\n                    // gets replaced\r\n                    this._past[j] = individualMap.get(this.strResource);\r\n                }\r\n                else {\r\n                    // gets deleted\r\n                    this._past.splice(j, 1);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        this.versionId++;\r\n    }\r\n    splitFutureWorkspaceElement(toRemove, individualMap) {\r\n        for (let j = this._future.length - 1; j >= 0; j--) {\r\n            if (this._future[j] === toRemove) {\r\n                if (individualMap.has(this.strResource)) {\r\n                    // gets replaced\r\n                    this._future[j] = individualMap.get(this.strResource);\r\n                }\r\n                else {\r\n                    // gets deleted\r\n                    this._future.splice(j, 1);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        this.versionId++;\r\n    }\r\n    moveBackward(element) {\r\n        this._past.pop();\r\n        this._future.push(element);\r\n        this.versionId++;\r\n    }\r\n    moveForward(element) {\r\n        this._future.pop();\r\n        this._past.push(element);\r\n        this.versionId++;\r\n    }\r\n}\r\nclass EditStackSnapshot {\r\n    constructor(editStacks) {\r\n        this.editStacks = editStacks;\r\n        this._versionIds = [];\r\n        for (let i = 0, len = this.editStacks.length; i < len; i++) {\r\n            this._versionIds[i] = this.editStacks[i].versionId;\r\n        }\r\n    }\r\n    isValid() {\r\n        for (let i = 0, len = this.editStacks.length; i < len; i++) {\r\n            if (this._versionIds[i] !== this.editStacks[i].versionId) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\nconst missingEditStack = new ResourceEditStack('', '');\r\nmissingEditStack.locked = true;\r\nlet UndoRedoService = class UndoRedoService {\r\n    constructor(_dialogService, _notificationService) {\r\n        this._dialogService = _dialogService;\r\n        this._notificationService = _notificationService;\r\n        this._editStacks = new Map();\r\n        this._uriComparisonKeyComputers = [];\r\n    }\r\n    getUriComparisonKey(resource) {\r\n        for (const uriComparisonKeyComputer of this._uriComparisonKeyComputers) {\r\n            if (uriComparisonKeyComputer[0] === resource.scheme) {\r\n                return uriComparisonKeyComputer[1].getComparisonKey(resource);\r\n            }\r\n        }\r\n        return resource.toString();\r\n    }\r\n    _print(label) {\r\n        console.log(`------------------------------------`);\r\n        console.log(`AFTER ${label}: `);\r\n        const str = [];\r\n        for (const element of this._editStacks) {\r\n            str.push(element[1].toString());\r\n        }\r\n        console.log(str.join('\\n'));\r\n    }\r\n    pushElement(element, group = UndoRedoGroup.None, source = UndoRedoSource.None) {\r\n        if (element.type === 0 /* UndoRedoElementType.Resource */) {\r\n            const resourceLabel = getResourceLabel(element.resource);\r\n            const strResource = this.getUriComparisonKey(element.resource);\r\n            this._pushElement(new ResourceStackElement(element, resourceLabel, strResource, group.id, group.nextOrder(), source.id, source.nextOrder()));\r\n        }\r\n        else {\r\n            const seen = new Set();\r\n            const resourceLabels = [];\r\n            const strResources = [];\r\n            for (const resource of element.resources) {\r\n                const resourceLabel = getResourceLabel(resource);\r\n                const strResource = this.getUriComparisonKey(resource);\r\n                if (seen.has(strResource)) {\r\n                    continue;\r\n                }\r\n                seen.add(strResource);\r\n                resourceLabels.push(resourceLabel);\r\n                strResources.push(strResource);\r\n            }\r\n            if (resourceLabels.length === 1) {\r\n                this._pushElement(new ResourceStackElement(element, resourceLabels[0], strResources[0], group.id, group.nextOrder(), source.id, source.nextOrder()));\r\n            }\r\n            else {\r\n                this._pushElement(new WorkspaceStackElement(element, resourceLabels, strResources, group.id, group.nextOrder(), source.id, source.nextOrder()));\r\n            }\r\n        }\r\n        if (DEBUG) {\r\n            this._print('pushElement');\r\n        }\r\n    }\r\n    _pushElement(element) {\r\n        for (let i = 0, len = element.strResources.length; i < len; i++) {\r\n            const resourceLabel = element.resourceLabels[i];\r\n            const strResource = element.strResources[i];\r\n            let editStack;\r\n            if (this._editStacks.has(strResource)) {\r\n                editStack = this._editStacks.get(strResource);\r\n            }\r\n            else {\r\n                editStack = new ResourceEditStack(resourceLabel, strResource);\r\n                this._editStacks.set(strResource, editStack);\r\n            }\r\n            editStack.pushElement(element);\r\n        }\r\n    }\r\n    getLastElement(resource) {\r\n        const strResource = this.getUriComparisonKey(resource);\r\n        if (this._editStacks.has(strResource)) {\r\n            const editStack = this._editStacks.get(strResource);\r\n            if (editStack.hasFutureElements()) {\r\n                return null;\r\n            }\r\n            const closestPastElement = editStack.getClosestPastElement();\r\n            return closestPastElement ? closestPastElement.actual : null;\r\n        }\r\n        return null;\r\n    }\r\n    _splitPastWorkspaceElement(toRemove, ignoreResources) {\r\n        const individualArr = toRemove.actual.split();\r\n        const individualMap = new Map();\r\n        for (const _element of individualArr) {\r\n            const resourceLabel = getResourceLabel(_element.resource);\r\n            const strResource = this.getUriComparisonKey(_element.resource);\r\n            const element = new ResourceStackElement(_element, resourceLabel, strResource, 0, 0, 0, 0);\r\n            individualMap.set(element.strResource, element);\r\n        }\r\n        for (const strResource of toRemove.strResources) {\r\n            if (ignoreResources && ignoreResources.has(strResource)) {\r\n                continue;\r\n            }\r\n            const editStack = this._editStacks.get(strResource);\r\n            editStack.splitPastWorkspaceElement(toRemove, individualMap);\r\n        }\r\n    }\r\n    _splitFutureWorkspaceElement(toRemove, ignoreResources) {\r\n        const individualArr = toRemove.actual.split();\r\n        const individualMap = new Map();\r\n        for (const _element of individualArr) {\r\n            const resourceLabel = getResourceLabel(_element.resource);\r\n            const strResource = this.getUriComparisonKey(_element.resource);\r\n            const element = new ResourceStackElement(_element, resourceLabel, strResource, 0, 0, 0, 0);\r\n            individualMap.set(element.strResource, element);\r\n        }\r\n        for (const strResource of toRemove.strResources) {\r\n            if (ignoreResources && ignoreResources.has(strResource)) {\r\n                continue;\r\n            }\r\n            const editStack = this._editStacks.get(strResource);\r\n            editStack.splitFutureWorkspaceElement(toRemove, individualMap);\r\n        }\r\n    }\r\n    removeElements(resource) {\r\n        const strResource = typeof resource === 'string' ? resource : this.getUriComparisonKey(resource);\r\n        if (this._editStacks.has(strResource)) {\r\n            const editStack = this._editStacks.get(strResource);\r\n            editStack.dispose();\r\n            this._editStacks.delete(strResource);\r\n        }\r\n        if (DEBUG) {\r\n            this._print('removeElements');\r\n        }\r\n    }\r\n    setElementsValidFlag(resource, isValid, filter) {\r\n        const strResource = this.getUriComparisonKey(resource);\r\n        if (this._editStacks.has(strResource)) {\r\n            const editStack = this._editStacks.get(strResource);\r\n            editStack.setElementsValidFlag(isValid, filter);\r\n        }\r\n        if (DEBUG) {\r\n            this._print('setElementsValidFlag');\r\n        }\r\n    }\r\n    createSnapshot(resource) {\r\n        const strResource = this.getUriComparisonKey(resource);\r\n        if (this._editStacks.has(strResource)) {\r\n            const editStack = this._editStacks.get(strResource);\r\n            return editStack.createSnapshot(resource);\r\n        }\r\n        return new ResourceEditStackSnapshot(resource, []);\r\n    }\r\n    restoreSnapshot(snapshot) {\r\n        const strResource = this.getUriComparisonKey(snapshot.resource);\r\n        if (this._editStacks.has(strResource)) {\r\n            const editStack = this._editStacks.get(strResource);\r\n            editStack.restoreSnapshot(snapshot);\r\n            if (!editStack.hasPastElements() && !editStack.hasFutureElements()) {\r\n                // the edit stack is now empty, just remove it entirely\r\n                editStack.dispose();\r\n                this._editStacks.delete(strResource);\r\n            }\r\n        }\r\n        if (DEBUG) {\r\n            this._print('restoreSnapshot');\r\n        }\r\n    }\r\n    getElements(resource) {\r\n        const strResource = this.getUriComparisonKey(resource);\r\n        if (this._editStacks.has(strResource)) {\r\n            const editStack = this._editStacks.get(strResource);\r\n            return editStack.getElements();\r\n        }\r\n        return { past: [], future: [] };\r\n    }\r\n    _findClosestUndoElementWithSource(sourceId) {\r\n        if (!sourceId) {\r\n            return [null, null];\r\n        }\r\n        // find an element with the sourceId and with the highest sourceOrder ready to be undone\r\n        let matchedElement = null;\r\n        let matchedStrResource = null;\r\n        for (const [strResource, editStack] of this._editStacks) {\r\n            const candidate = editStack.getClosestPastElement();\r\n            if (!candidate) {\r\n                continue;\r\n            }\r\n            if (candidate.sourceId === sourceId) {\r\n                if (!matchedElement || candidate.sourceOrder > matchedElement.sourceOrder) {\r\n                    matchedElement = candidate;\r\n                    matchedStrResource = strResource;\r\n                }\r\n            }\r\n        }\r\n        return [matchedElement, matchedStrResource];\r\n    }\r\n    canUndo(resourceOrSource) {\r\n        if (resourceOrSource instanceof UndoRedoSource) {\r\n            const [, matchedStrResource] = this._findClosestUndoElementWithSource(resourceOrSource.id);\r\n            return matchedStrResource ? true : false;\r\n        }\r\n        const strResource = this.getUriComparisonKey(resourceOrSource);\r\n        if (this._editStacks.has(strResource)) {\r\n            const editStack = this._editStacks.get(strResource);\r\n            return editStack.hasPastElements();\r\n        }\r\n        return false;\r\n    }\r\n    _onError(err, element) {\r\n        onUnexpectedError(err);\r\n        // An error occurred while undoing or redoing => drop the undo/redo stack for all affected resources\r\n        for (const strResource of element.strResources) {\r\n            this.removeElements(strResource);\r\n        }\r\n        this._notificationService.error(err);\r\n    }\r\n    _acquireLocks(editStackSnapshot) {\r\n        // first, check if all locks can be acquired\r\n        for (const editStack of editStackSnapshot.editStacks) {\r\n            if (editStack.locked) {\r\n                throw new Error('Cannot acquire edit stack lock');\r\n            }\r\n        }\r\n        // can acquire all locks\r\n        for (const editStack of editStackSnapshot.editStacks) {\r\n            editStack.locked = true;\r\n        }\r\n        return () => {\r\n            // release all locks\r\n            for (const editStack of editStackSnapshot.editStacks) {\r\n                editStack.locked = false;\r\n            }\r\n        };\r\n    }\r\n    _safeInvokeWithLocks(element, invoke, editStackSnapshot, cleanup, continuation) {\r\n        const releaseLocks = this._acquireLocks(editStackSnapshot);\r\n        let result;\r\n        try {\r\n            result = invoke();\r\n        }\r\n        catch (err) {\r\n            releaseLocks();\r\n            cleanup.dispose();\r\n            return this._onError(err, element);\r\n        }\r\n        if (result) {\r\n            // result is Promise<void>\r\n            return result.then(() => {\r\n                releaseLocks();\r\n                cleanup.dispose();\r\n                return continuation();\r\n            }, (err) => {\r\n                releaseLocks();\r\n                cleanup.dispose();\r\n                return this._onError(err, element);\r\n            });\r\n        }\r\n        else {\r\n            // result is void\r\n            releaseLocks();\r\n            cleanup.dispose();\r\n            return continuation();\r\n        }\r\n    }\r\n    async _invokeWorkspacePrepare(element) {\r\n        if (typeof element.actual.prepareUndoRedo === 'undefined') {\r\n            return Disposable.None;\r\n        }\r\n        const result = element.actual.prepareUndoRedo();\r\n        if (typeof result === 'undefined') {\r\n            return Disposable.None;\r\n        }\r\n        return result;\r\n    }\r\n    _invokeResourcePrepare(element, callback) {\r\n        if (element.actual.type !== 1 /* UndoRedoElementType.Workspace */ || typeof element.actual.prepareUndoRedo === 'undefined') {\r\n            // no preparation needed\r\n            return callback(Disposable.None);\r\n        }\r\n        const r = element.actual.prepareUndoRedo();\r\n        if (!r) {\r\n            // nothing to clean up\r\n            return callback(Disposable.None);\r\n        }\r\n        if (isDisposable(r)) {\r\n            return callback(r);\r\n        }\r\n        return r.then((disposable) => {\r\n            return callback(disposable);\r\n        });\r\n    }\r\n    _getAffectedEditStacks(element) {\r\n        const affectedEditStacks = [];\r\n        for (const strResource of element.strResources) {\r\n            affectedEditStacks.push(this._editStacks.get(strResource) || missingEditStack);\r\n        }\r\n        return new EditStackSnapshot(affectedEditStacks);\r\n    }\r\n    _tryToSplitAndUndo(strResource, element, ignoreResources, message) {\r\n        if (element.canSplit()) {\r\n            this._splitPastWorkspaceElement(element, ignoreResources);\r\n            this._notificationService.warn(message);\r\n            return new WorkspaceVerificationError(this._undo(strResource, 0, true));\r\n        }\r\n        else {\r\n            // Cannot safely split this workspace element => flush all undo/redo stacks\r\n            for (const strResource of element.strResources) {\r\n                this.removeElements(strResource);\r\n            }\r\n            this._notificationService.warn(message);\r\n            return new WorkspaceVerificationError();\r\n        }\r\n    }\r\n    _checkWorkspaceUndo(strResource, element, editStackSnapshot, checkInvalidatedResources) {\r\n        if (element.removedResources) {\r\n            return this._tryToSplitAndUndo(strResource, element, element.removedResources, nls.localize({ key: 'cannotWorkspaceUndo', comment: ['{0} is a label for an operation. {1} is another message.'] }, \"Could not undo '{0}' across all files. {1}\", element.label, element.removedResources.createMessage()));\r\n        }\r\n        if (checkInvalidatedResources && element.invalidatedResources) {\r\n            return this._tryToSplitAndUndo(strResource, element, element.invalidatedResources, nls.localize({ key: 'cannotWorkspaceUndo', comment: ['{0} is a label for an operation. {1} is another message.'] }, \"Could not undo '{0}' across all files. {1}\", element.label, element.invalidatedResources.createMessage()));\r\n        }\r\n        // this must be the last past element in all the impacted resources!\r\n        const cannotUndoDueToResources = [];\r\n        for (const editStack of editStackSnapshot.editStacks) {\r\n            if (editStack.getClosestPastElement() !== element) {\r\n                cannotUndoDueToResources.push(editStack.resourceLabel);\r\n            }\r\n        }\r\n        if (cannotUndoDueToResources.length > 0) {\r\n            return this._tryToSplitAndUndo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceUndoDueToChanges', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not undo '{0}' across all files because changes were made to {1}\", element.label, cannotUndoDueToResources.join(', ')));\r\n        }\r\n        const cannotLockDueToResources = [];\r\n        for (const editStack of editStackSnapshot.editStacks) {\r\n            if (editStack.locked) {\r\n                cannotLockDueToResources.push(editStack.resourceLabel);\r\n            }\r\n        }\r\n        if (cannotLockDueToResources.length > 0) {\r\n            return this._tryToSplitAndUndo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceUndoDueToInProgressUndoRedo', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}\", element.label, cannotLockDueToResources.join(', ')));\r\n        }\r\n        // check if new stack elements were added in the meantime...\r\n        if (!editStackSnapshot.isValid()) {\r\n            return this._tryToSplitAndUndo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceUndoDueToInMeantimeUndoRedo', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime\", element.label));\r\n        }\r\n        return null;\r\n    }\r\n    _workspaceUndo(strResource, element, undoConfirmed) {\r\n        const affectedEditStacks = this._getAffectedEditStacks(element);\r\n        const verificationError = this._checkWorkspaceUndo(strResource, element, affectedEditStacks, /*invalidated resources will be checked after the prepare call*/ false);\r\n        if (verificationError) {\r\n            return verificationError.returnValue;\r\n        }\r\n        return this._confirmAndExecuteWorkspaceUndo(strResource, element, affectedEditStacks, undoConfirmed);\r\n    }\r\n    _isPartOfUndoGroup(element) {\r\n        if (!element.groupId) {\r\n            return false;\r\n        }\r\n        // check that there is at least another element with the same groupId ready to be undone\r\n        for (const [, editStack] of this._editStacks) {\r\n            const pastElement = editStack.getClosestPastElement();\r\n            if (!pastElement) {\r\n                continue;\r\n            }\r\n            if (pastElement === element) {\r\n                const secondPastElement = editStack.getSecondClosestPastElement();\r\n                if (secondPastElement && secondPastElement.groupId === element.groupId) {\r\n                    // there is another element with the same group id in the same stack!\r\n                    return true;\r\n                }\r\n            }\r\n            if (pastElement.groupId === element.groupId) {\r\n                // there is another element with the same group id in another stack!\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    async _confirmAndExecuteWorkspaceUndo(strResource, element, editStackSnapshot, undoConfirmed) {\r\n        if (element.canSplit() && !this._isPartOfUndoGroup(element)) {\r\n            // this element can be split\r\n            let UndoChoice;\r\n            (function (UndoChoice) {\r\n                UndoChoice[UndoChoice[\"All\"] = 0] = \"All\";\r\n                UndoChoice[UndoChoice[\"This\"] = 1] = \"This\";\r\n                UndoChoice[UndoChoice[\"Cancel\"] = 2] = \"Cancel\";\r\n            })(UndoChoice || (UndoChoice = {}));\r\n            const { result } = await this._dialogService.prompt({\r\n                type: Severity.Info,\r\n                message: nls.localize('confirmWorkspace', \"Would you like to undo '{0}' across all files?\", element.label),\r\n                buttons: [\r\n                    {\r\n                        label: nls.localize({ key: 'ok', comment: ['{0} denotes a number that is > 1, && denotes a mnemonic'] }, \"&&Undo in {0} Files\", editStackSnapshot.editStacks.length),\r\n                        run: () => UndoChoice.All\r\n                    },\r\n                    {\r\n                        label: nls.localize({ key: 'nok', comment: ['&& denotes a mnemonic'] }, \"Undo this &&File\"),\r\n                        run: () => UndoChoice.This\r\n                    }\r\n                ],\r\n                cancelButton: {\r\n                    run: () => UndoChoice.Cancel\r\n                }\r\n            });\r\n            if (result === UndoChoice.Cancel) {\r\n                // choice: cancel\r\n                return;\r\n            }\r\n            if (result === UndoChoice.This) {\r\n                // choice: undo this file\r\n                this._splitPastWorkspaceElement(element, null);\r\n                return this._undo(strResource, 0, true);\r\n            }\r\n            // choice: undo in all files\r\n            // At this point, it is possible that the element has been made invalid in the meantime (due to the confirmation await)\r\n            const verificationError1 = this._checkWorkspaceUndo(strResource, element, editStackSnapshot, /*invalidated resources will be checked after the prepare call*/ false);\r\n            if (verificationError1) {\r\n                return verificationError1.returnValue;\r\n            }\r\n            undoConfirmed = true;\r\n        }\r\n        // prepare\r\n        let cleanup;\r\n        try {\r\n            cleanup = await this._invokeWorkspacePrepare(element);\r\n        }\r\n        catch (err) {\r\n            return this._onError(err, element);\r\n        }\r\n        // At this point, it is possible that the element has been made invalid in the meantime (due to the prepare await)\r\n        const verificationError2 = this._checkWorkspaceUndo(strResource, element, editStackSnapshot, /*now also check that there are no more invalidated resources*/ true);\r\n        if (verificationError2) {\r\n            cleanup.dispose();\r\n            return verificationError2.returnValue;\r\n        }\r\n        for (const editStack of editStackSnapshot.editStacks) {\r\n            editStack.moveBackward(element);\r\n        }\r\n        return this._safeInvokeWithLocks(element, () => element.actual.undo(), editStackSnapshot, cleanup, () => this._continueUndoInGroup(element.groupId, undoConfirmed));\r\n    }\r\n    _resourceUndo(editStack, element, undoConfirmed) {\r\n        if (!element.isValid) {\r\n            // invalid element => immediately flush edit stack!\r\n            editStack.flushAllElements();\r\n            return;\r\n        }\r\n        if (editStack.locked) {\r\n            const message = nls.localize({ key: 'cannotResourceUndoDueToInProgressUndoRedo', comment: ['{0} is a label for an operation.'] }, \"Could not undo '{0}' because there is already an undo or redo operation running.\", element.label);\r\n            this._notificationService.warn(message);\r\n            return;\r\n        }\r\n        return this._invokeResourcePrepare(element, (cleanup) => {\r\n            editStack.moveBackward(element);\r\n            return this._safeInvokeWithLocks(element, () => element.actual.undo(), new EditStackSnapshot([editStack]), cleanup, () => this._continueUndoInGroup(element.groupId, undoConfirmed));\r\n        });\r\n    }\r\n    _findClosestUndoElementInGroup(groupId) {\r\n        if (!groupId) {\r\n            return [null, null];\r\n        }\r\n        // find another element with the same groupId and with the highest groupOrder ready to be undone\r\n        let matchedElement = null;\r\n        let matchedStrResource = null;\r\n        for (const [strResource, editStack] of this._editStacks) {\r\n            const candidate = editStack.getClosestPastElement();\r\n            if (!candidate) {\r\n                continue;\r\n            }\r\n            if (candidate.groupId === groupId) {\r\n                if (!matchedElement || candidate.groupOrder > matchedElement.groupOrder) {\r\n                    matchedElement = candidate;\r\n                    matchedStrResource = strResource;\r\n                }\r\n            }\r\n        }\r\n        return [matchedElement, matchedStrResource];\r\n    }\r\n    _continueUndoInGroup(groupId, undoConfirmed) {\r\n        if (!groupId) {\r\n            return;\r\n        }\r\n        const [, matchedStrResource] = this._findClosestUndoElementInGroup(groupId);\r\n        if (matchedStrResource) {\r\n            return this._undo(matchedStrResource, 0, undoConfirmed);\r\n        }\r\n    }\r\n    undo(resourceOrSource) {\r\n        if (resourceOrSource instanceof UndoRedoSource) {\r\n            const [, matchedStrResource] = this._findClosestUndoElementWithSource(resourceOrSource.id);\r\n            return matchedStrResource ? this._undo(matchedStrResource, resourceOrSource.id, false) : undefined;\r\n        }\r\n        if (typeof resourceOrSource === 'string') {\r\n            return this._undo(resourceOrSource, 0, false);\r\n        }\r\n        return this._undo(this.getUriComparisonKey(resourceOrSource), 0, false);\r\n    }\r\n    _undo(strResource, sourceId = 0, undoConfirmed) {\r\n        if (!this._editStacks.has(strResource)) {\r\n            return;\r\n        }\r\n        const editStack = this._editStacks.get(strResource);\r\n        const element = editStack.getClosestPastElement();\r\n        if (!element) {\r\n            return;\r\n        }\r\n        if (element.groupId) {\r\n            // this element is a part of a group, we need to make sure undoing in a group is in order\r\n            const [matchedElement, matchedStrResource] = this._findClosestUndoElementInGroup(element.groupId);\r\n            if (element !== matchedElement && matchedStrResource) {\r\n                // there is an element in the same group that should be undone before this one\r\n                return this._undo(matchedStrResource, sourceId, undoConfirmed);\r\n            }\r\n        }\r\n        const shouldPromptForConfirmation = (element.sourceId !== sourceId || element.confirmBeforeUndo);\r\n        if (shouldPromptForConfirmation && !undoConfirmed) {\r\n            // Hit a different source or the element asks for prompt before undo, prompt for confirmation\r\n            return this._confirmAndContinueUndo(strResource, sourceId, element);\r\n        }\r\n        try {\r\n            if (element.type === 1 /* UndoRedoElementType.Workspace */) {\r\n                return this._workspaceUndo(strResource, element, undoConfirmed);\r\n            }\r\n            else {\r\n                return this._resourceUndo(editStack, element, undoConfirmed);\r\n            }\r\n        }\r\n        finally {\r\n            if (DEBUG) {\r\n                this._print('undo');\r\n            }\r\n        }\r\n    }\r\n    async _confirmAndContinueUndo(strResource, sourceId, element) {\r\n        const result = await this._dialogService.confirm({\r\n            message: nls.localize('confirmDifferentSource', \"Would you like to undo '{0}'?\", element.label),\r\n            primaryButton: nls.localize({ key: 'confirmDifferentSource.yes', comment: ['&& denotes a mnemonic'] }, \"&&Yes\"),\r\n            cancelButton: nls.localize('confirmDifferentSource.no', \"No\")\r\n        });\r\n        if (!result.confirmed) {\r\n            return;\r\n        }\r\n        return this._undo(strResource, sourceId, true);\r\n    }\r\n    _findClosestRedoElementWithSource(sourceId) {\r\n        if (!sourceId) {\r\n            return [null, null];\r\n        }\r\n        // find an element with sourceId and with the lowest sourceOrder ready to be redone\r\n        let matchedElement = null;\r\n        let matchedStrResource = null;\r\n        for (const [strResource, editStack] of this._editStacks) {\r\n            const candidate = editStack.getClosestFutureElement();\r\n            if (!candidate) {\r\n                continue;\r\n            }\r\n            if (candidate.sourceId === sourceId) {\r\n                if (!matchedElement || candidate.sourceOrder < matchedElement.sourceOrder) {\r\n                    matchedElement = candidate;\r\n                    matchedStrResource = strResource;\r\n                }\r\n            }\r\n        }\r\n        return [matchedElement, matchedStrResource];\r\n    }\r\n    canRedo(resourceOrSource) {\r\n        if (resourceOrSource instanceof UndoRedoSource) {\r\n            const [, matchedStrResource] = this._findClosestRedoElementWithSource(resourceOrSource.id);\r\n            return matchedStrResource ? true : false;\r\n        }\r\n        const strResource = this.getUriComparisonKey(resourceOrSource);\r\n        if (this._editStacks.has(strResource)) {\r\n            const editStack = this._editStacks.get(strResource);\r\n            return editStack.hasFutureElements();\r\n        }\r\n        return false;\r\n    }\r\n    _tryToSplitAndRedo(strResource, element, ignoreResources, message) {\r\n        if (element.canSplit()) {\r\n            this._splitFutureWorkspaceElement(element, ignoreResources);\r\n            this._notificationService.warn(message);\r\n            return new WorkspaceVerificationError(this._redo(strResource));\r\n        }\r\n        else {\r\n            // Cannot safely split this workspace element => flush all undo/redo stacks\r\n            for (const strResource of element.strResources) {\r\n                this.removeElements(strResource);\r\n            }\r\n            this._notificationService.warn(message);\r\n            return new WorkspaceVerificationError();\r\n        }\r\n    }\r\n    _checkWorkspaceRedo(strResource, element, editStackSnapshot, checkInvalidatedResources) {\r\n        if (element.removedResources) {\r\n            return this._tryToSplitAndRedo(strResource, element, element.removedResources, nls.localize({ key: 'cannotWorkspaceRedo', comment: ['{0} is a label for an operation. {1} is another message.'] }, \"Could not redo '{0}' across all files. {1}\", element.label, element.removedResources.createMessage()));\r\n        }\r\n        if (checkInvalidatedResources && element.invalidatedResources) {\r\n            return this._tryToSplitAndRedo(strResource, element, element.invalidatedResources, nls.localize({ key: 'cannotWorkspaceRedo', comment: ['{0} is a label for an operation. {1} is another message.'] }, \"Could not redo '{0}' across all files. {1}\", element.label, element.invalidatedResources.createMessage()));\r\n        }\r\n        // this must be the last future element in all the impacted resources!\r\n        const cannotRedoDueToResources = [];\r\n        for (const editStack of editStackSnapshot.editStacks) {\r\n            if (editStack.getClosestFutureElement() !== element) {\r\n                cannotRedoDueToResources.push(editStack.resourceLabel);\r\n            }\r\n        }\r\n        if (cannotRedoDueToResources.length > 0) {\r\n            return this._tryToSplitAndRedo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceRedoDueToChanges', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not redo '{0}' across all files because changes were made to {1}\", element.label, cannotRedoDueToResources.join(', ')));\r\n        }\r\n        const cannotLockDueToResources = [];\r\n        for (const editStack of editStackSnapshot.editStacks) {\r\n            if (editStack.locked) {\r\n                cannotLockDueToResources.push(editStack.resourceLabel);\r\n            }\r\n        }\r\n        if (cannotLockDueToResources.length > 0) {\r\n            return this._tryToSplitAndRedo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceRedoDueToInProgressUndoRedo', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}\", element.label, cannotLockDueToResources.join(', ')));\r\n        }\r\n        // check if new stack elements were added in the meantime...\r\n        if (!editStackSnapshot.isValid()) {\r\n            return this._tryToSplitAndRedo(strResource, element, null, nls.localize({ key: 'cannotWorkspaceRedoDueToInMeantimeUndoRedo', comment: ['{0} is a label for an operation. {1} is a list of filenames.'] }, \"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime\", element.label));\r\n        }\r\n        return null;\r\n    }\r\n    _workspaceRedo(strResource, element) {\r\n        const affectedEditStacks = this._getAffectedEditStacks(element);\r\n        const verificationError = this._checkWorkspaceRedo(strResource, element, affectedEditStacks, /*invalidated resources will be checked after the prepare call*/ false);\r\n        if (verificationError) {\r\n            return verificationError.returnValue;\r\n        }\r\n        return this._executeWorkspaceRedo(strResource, element, affectedEditStacks);\r\n    }\r\n    async _executeWorkspaceRedo(strResource, element, editStackSnapshot) {\r\n        // prepare\r\n        let cleanup;\r\n        try {\r\n            cleanup = await this._invokeWorkspacePrepare(element);\r\n        }\r\n        catch (err) {\r\n            return this._onError(err, element);\r\n        }\r\n        // At this point, it is possible that the element has been made invalid in the meantime (due to the prepare await)\r\n        const verificationError = this._checkWorkspaceRedo(strResource, element, editStackSnapshot, /*now also check that there are no more invalidated resources*/ true);\r\n        if (verificationError) {\r\n            cleanup.dispose();\r\n            return verificationError.returnValue;\r\n        }\r\n        for (const editStack of editStackSnapshot.editStacks) {\r\n            editStack.moveForward(element);\r\n        }\r\n        return this._safeInvokeWithLocks(element, () => element.actual.redo(), editStackSnapshot, cleanup, () => this._continueRedoInGroup(element.groupId));\r\n    }\r\n    _resourceRedo(editStack, element) {\r\n        if (!element.isValid) {\r\n            // invalid element => immediately flush edit stack!\r\n            editStack.flushAllElements();\r\n            return;\r\n        }\r\n        if (editStack.locked) {\r\n            const message = nls.localize({ key: 'cannotResourceRedoDueToInProgressUndoRedo', comment: ['{0} is a label for an operation.'] }, \"Could not redo '{0}' because there is already an undo or redo operation running.\", element.label);\r\n            this._notificationService.warn(message);\r\n            return;\r\n        }\r\n        return this._invokeResourcePrepare(element, (cleanup) => {\r\n            editStack.moveForward(element);\r\n            return this._safeInvokeWithLocks(element, () => element.actual.redo(), new EditStackSnapshot([editStack]), cleanup, () => this._continueRedoInGroup(element.groupId));\r\n        });\r\n    }\r\n    _findClosestRedoElementInGroup(groupId) {\r\n        if (!groupId) {\r\n            return [null, null];\r\n        }\r\n        // find another element with the same groupId and with the lowest groupOrder ready to be redone\r\n        let matchedElement = null;\r\n        let matchedStrResource = null;\r\n        for (const [strResource, editStack] of this._editStacks) {\r\n            const candidate = editStack.getClosestFutureElement();\r\n            if (!candidate) {\r\n                continue;\r\n            }\r\n            if (candidate.groupId === groupId) {\r\n                if (!matchedElement || candidate.groupOrder < matchedElement.groupOrder) {\r\n                    matchedElement = candidate;\r\n                    matchedStrResource = strResource;\r\n                }\r\n            }\r\n        }\r\n        return [matchedElement, matchedStrResource];\r\n    }\r\n    _continueRedoInGroup(groupId) {\r\n        if (!groupId) {\r\n            return;\r\n        }\r\n        const [, matchedStrResource] = this._findClosestRedoElementInGroup(groupId);\r\n        if (matchedStrResource) {\r\n            return this._redo(matchedStrResource);\r\n        }\r\n    }\r\n    redo(resourceOrSource) {\r\n        if (resourceOrSource instanceof UndoRedoSource) {\r\n            const [, matchedStrResource] = this._findClosestRedoElementWithSource(resourceOrSource.id);\r\n            return matchedStrResource ? this._redo(matchedStrResource) : undefined;\r\n        }\r\n        if (typeof resourceOrSource === 'string') {\r\n            return this._redo(resourceOrSource);\r\n        }\r\n        return this._redo(this.getUriComparisonKey(resourceOrSource));\r\n    }\r\n    _redo(strResource) {\r\n        if (!this._editStacks.has(strResource)) {\r\n            return;\r\n        }\r\n        const editStack = this._editStacks.get(strResource);\r\n        const element = editStack.getClosestFutureElement();\r\n        if (!element) {\r\n            return;\r\n        }\r\n        if (element.groupId) {\r\n            // this element is a part of a group, we need to make sure redoing in a group is in order\r\n            const [matchedElement, matchedStrResource] = this._findClosestRedoElementInGroup(element.groupId);\r\n            if (element !== matchedElement && matchedStrResource) {\r\n                // there is an element in the same group that should be redone before this one\r\n                return this._redo(matchedStrResource);\r\n            }\r\n        }\r\n        try {\r\n            if (element.type === 1 /* UndoRedoElementType.Workspace */) {\r\n                return this._workspaceRedo(strResource, element);\r\n            }\r\n            else {\r\n                return this._resourceRedo(editStack, element);\r\n            }\r\n        }\r\n        finally {\r\n            if (DEBUG) {\r\n                this._print('redo');\r\n            }\r\n        }\r\n    }\r\n};\r\nUndoRedoService = __decorate([\r\n    __param(0, IDialogService),\r\n    __param(1, INotificationService)\r\n], UndoRedoService);\r\nexport { UndoRedoService };\r\nclass WorkspaceVerificationError {\r\n    constructor(returnValue) {\r\n        this.returnValue = returnValue;\r\n    }\r\n}\r\nregisterSingleton(IUndoRedoService, UndoRedoService, 1 /* InstantiationType.Delayed */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { TokenMetadata } from '../encodedTokenAttributes.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { ILogService, LogLevel } from '../../../platform/log/common/log.js';\r\nimport { SparseMultilineTokens } from '../tokens/sparseMultilineTokens.js';\r\nimport { ILanguageService } from '../languages/language.js';\r\nlet SemanticTokensProviderStyling = class SemanticTokensProviderStyling {\r\n    constructor(_legend, _themeService, _languageService, _logService) {\r\n        this._legend = _legend;\r\n        this._themeService = _themeService;\r\n        this._languageService = _languageService;\r\n        this._logService = _logService;\r\n        this._hasWarnedOverlappingTokens = false;\r\n        this._hasWarnedInvalidLengthTokens = false;\r\n        this._hasWarnedInvalidEditStart = false;\r\n        this._hashTable = new HashTable();\r\n    }\r\n    getMetadata(tokenTypeIndex, tokenModifierSet, languageId) {\r\n        const encodedLanguageId = this._languageService.languageIdCodec.encodeLanguageId(languageId);\r\n        const entry = this._hashTable.get(tokenTypeIndex, tokenModifierSet, encodedLanguageId);\r\n        let metadata;\r\n        if (entry) {\r\n            metadata = entry.metadata;\r\n            if (this._logService.getLevel() === LogLevel.Trace) {\r\n                this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${tokenTypeIndex} / ${tokenModifierSet}: foreground ${TokenMetadata.getForeground(metadata)}, fontStyle ${TokenMetadata.getFontStyle(metadata).toString(2)}`);\r\n            }\r\n        }\r\n        else {\r\n            let tokenType = this._legend.tokenTypes[tokenTypeIndex];\r\n            const tokenModifiers = [];\r\n            if (tokenType) {\r\n                let modifierSet = tokenModifierSet;\r\n                for (let modifierIndex = 0; modifierSet > 0 && modifierIndex < this._legend.tokenModifiers.length; modifierIndex++) {\r\n                    if (modifierSet & 1) {\r\n                        tokenModifiers.push(this._legend.tokenModifiers[modifierIndex]);\r\n                    }\r\n                    modifierSet = modifierSet >> 1;\r\n                }\r\n                if (modifierSet > 0 && this._logService.getLevel() === LogLevel.Trace) {\r\n                    this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${tokenModifierSet.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`);\r\n                    tokenModifiers.push('not-in-legend');\r\n                }\r\n                const tokenStyle = this._themeService.getColorTheme().getTokenStyleMetadata(tokenType, tokenModifiers, languageId);\r\n                if (typeof tokenStyle === 'undefined') {\r\n                    metadata = 2147483647 /* SemanticTokensProviderStylingConstants.NO_STYLING */;\r\n                }\r\n                else {\r\n                    metadata = 0;\r\n                    if (typeof tokenStyle.italic !== 'undefined') {\r\n                        const italicBit = (tokenStyle.italic ? 1 /* FontStyle.Italic */ : 0) << 11 /* MetadataConsts.FONT_STYLE_OFFSET */;\r\n                        metadata |= italicBit | 1 /* MetadataConsts.SEMANTIC_USE_ITALIC */;\r\n                    }\r\n                    if (typeof tokenStyle.bold !== 'undefined') {\r\n                        const boldBit = (tokenStyle.bold ? 2 /* FontStyle.Bold */ : 0) << 11 /* MetadataConsts.FONT_STYLE_OFFSET */;\r\n                        metadata |= boldBit | 2 /* MetadataConsts.SEMANTIC_USE_BOLD */;\r\n                    }\r\n                    if (typeof tokenStyle.underline !== 'undefined') {\r\n                        const underlineBit = (tokenStyle.underline ? 4 /* FontStyle.Underline */ : 0) << 11 /* MetadataConsts.FONT_STYLE_OFFSET */;\r\n                        metadata |= underlineBit | 4 /* MetadataConsts.SEMANTIC_USE_UNDERLINE */;\r\n                    }\r\n                    if (typeof tokenStyle.strikethrough !== 'undefined') {\r\n                        const strikethroughBit = (tokenStyle.strikethrough ? 8 /* FontStyle.Strikethrough */ : 0) << 11 /* MetadataConsts.FONT_STYLE_OFFSET */;\r\n                        metadata |= strikethroughBit | 8 /* MetadataConsts.SEMANTIC_USE_STRIKETHROUGH */;\r\n                    }\r\n                    if (tokenStyle.foreground) {\r\n                        const foregroundBits = (tokenStyle.foreground) << 15 /* MetadataConsts.FOREGROUND_OFFSET */;\r\n                        metadata |= foregroundBits | 16 /* MetadataConsts.SEMANTIC_USE_FOREGROUND */;\r\n                    }\r\n                    if (metadata === 0) {\r\n                        // Nothing!\r\n                        metadata = 2147483647 /* SemanticTokensProviderStylingConstants.NO_STYLING */;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (this._logService.getLevel() === LogLevel.Trace) {\r\n                    this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${tokenTypeIndex} for legend: ${JSON.stringify(this._legend.tokenTypes)}`);\r\n                }\r\n                metadata = 2147483647 /* SemanticTokensProviderStylingConstants.NO_STYLING */;\r\n                tokenType = 'not-in-legend';\r\n            }\r\n            this._hashTable.add(tokenTypeIndex, tokenModifierSet, encodedLanguageId, metadata);\r\n            if (this._logService.getLevel() === LogLevel.Trace) {\r\n                this._logService.trace(`SemanticTokensProviderStyling ${tokenTypeIndex} (${tokenType}) / ${tokenModifierSet} (${tokenModifiers.join(' ')}): foreground ${TokenMetadata.getForeground(metadata)}, fontStyle ${TokenMetadata.getFontStyle(metadata).toString(2)}`);\r\n            }\r\n        }\r\n        return metadata;\r\n    }\r\n    warnOverlappingSemanticTokens(lineNumber, startColumn) {\r\n        if (!this._hasWarnedOverlappingTokens) {\r\n            this._hasWarnedOverlappingTokens = true;\r\n            console.warn(`Overlapping semantic tokens detected at lineNumber ${lineNumber}, column ${startColumn}`);\r\n        }\r\n    }\r\n    warnInvalidLengthSemanticTokens(lineNumber, startColumn) {\r\n        if (!this._hasWarnedInvalidLengthTokens) {\r\n            this._hasWarnedInvalidLengthTokens = true;\r\n            console.warn(`Semantic token with invalid length detected at lineNumber ${lineNumber}, column ${startColumn}`);\r\n        }\r\n    }\r\n    warnInvalidEditStart(previousResultId, resultId, editIndex, editStart, maxExpectedStart) {\r\n        if (!this._hasWarnedInvalidEditStart) {\r\n            this._hasWarnedInvalidEditStart = true;\r\n            console.warn(`Invalid semantic tokens edit detected (previousResultId: ${previousResultId}, resultId: ${resultId}) at edit #${editIndex}: The provided start offset ${editStart} is outside the previous data (length ${maxExpectedStart}).`);\r\n        }\r\n    }\r\n};\r\nSemanticTokensProviderStyling = __decorate([\r\n    __param(1, IThemeService),\r\n    __param(2, ILanguageService),\r\n    __param(3, ILogService)\r\n], SemanticTokensProviderStyling);\r\nexport { SemanticTokensProviderStyling };\r\nexport function toMultilineTokens2(tokens, styling, languageId) {\r\n    const srcData = tokens.data;\r\n    const tokenCount = (tokens.data.length / 5) | 0;\r\n    const tokensPerArea = Math.max(Math.ceil(tokenCount / 1024 /* SemanticColoringConstants.DesiredMaxAreas */), 400 /* SemanticColoringConstants.DesiredTokensPerArea */);\r\n    const result = [];\r\n    let tokenIndex = 0;\r\n    let lastLineNumber = 1;\r\n    let lastStartCharacter = 0;\r\n    while (tokenIndex < tokenCount) {\r\n        const tokenStartIndex = tokenIndex;\r\n        let tokenEndIndex = Math.min(tokenStartIndex + tokensPerArea, tokenCount);\r\n        // Keep tokens on the same line in the same area...\r\n        if (tokenEndIndex < tokenCount) {\r\n            let smallTokenEndIndex = tokenEndIndex;\r\n            while (smallTokenEndIndex - 1 > tokenStartIndex && srcData[5 * smallTokenEndIndex] === 0) {\r\n                smallTokenEndIndex--;\r\n            }\r\n            if (smallTokenEndIndex - 1 === tokenStartIndex) {\r\n                // there are so many tokens on this line that our area would be empty, we must now go right\r\n                let bigTokenEndIndex = tokenEndIndex;\r\n                while (bigTokenEndIndex + 1 < tokenCount && srcData[5 * bigTokenEndIndex] === 0) {\r\n                    bigTokenEndIndex++;\r\n                }\r\n                tokenEndIndex = bigTokenEndIndex;\r\n            }\r\n            else {\r\n                tokenEndIndex = smallTokenEndIndex;\r\n            }\r\n        }\r\n        let destData = new Uint32Array((tokenEndIndex - tokenStartIndex) * 4);\r\n        let destOffset = 0;\r\n        let areaLine = 0;\r\n        let prevLineNumber = 0;\r\n        let prevEndCharacter = 0;\r\n        while (tokenIndex < tokenEndIndex) {\r\n            const srcOffset = 5 * tokenIndex;\r\n            const deltaLine = srcData[srcOffset];\r\n            const deltaCharacter = srcData[srcOffset + 1];\r\n            // Casting both `lineNumber`, `startCharacter` and `endCharacter` here to uint32 using `|0`\r\n            // to validate below with the actual values that will be inserted in the Uint32Array result\r\n            const lineNumber = (lastLineNumber + deltaLine) | 0;\r\n            const startCharacter = (deltaLine === 0 ? (lastStartCharacter + deltaCharacter) | 0 : deltaCharacter);\r\n            const length = srcData[srcOffset + 2];\r\n            const endCharacter = (startCharacter + length) | 0;\r\n            const tokenTypeIndex = srcData[srcOffset + 3];\r\n            const tokenModifierSet = srcData[srcOffset + 4];\r\n            if (endCharacter <= startCharacter) {\r\n                // this token is invalid (most likely a negative length casted to uint32)\r\n                styling.warnInvalidLengthSemanticTokens(lineNumber, startCharacter + 1);\r\n            }\r\n            else if (prevLineNumber === lineNumber && prevEndCharacter > startCharacter) {\r\n                // this token overlaps with the previous token\r\n                styling.warnOverlappingSemanticTokens(lineNumber, startCharacter + 1);\r\n            }\r\n            else {\r\n                const metadata = styling.getMetadata(tokenTypeIndex, tokenModifierSet, languageId);\r\n                if (metadata !== 2147483647 /* SemanticTokensProviderStylingConstants.NO_STYLING */) {\r\n                    if (areaLine === 0) {\r\n                        areaLine = lineNumber;\r\n                    }\r\n                    destData[destOffset] = lineNumber - areaLine;\r\n                    destData[destOffset + 1] = startCharacter;\r\n                    destData[destOffset + 2] = endCharacter;\r\n                    destData[destOffset + 3] = metadata;\r\n                    destOffset += 4;\r\n                    prevLineNumber = lineNumber;\r\n                    prevEndCharacter = endCharacter;\r\n                }\r\n            }\r\n            lastLineNumber = lineNumber;\r\n            lastStartCharacter = startCharacter;\r\n            tokenIndex++;\r\n        }\r\n        if (destOffset !== destData.length) {\r\n            destData = destData.subarray(0, destOffset);\r\n        }\r\n        const tokens = SparseMultilineTokens.create(areaLine, destData);\r\n        result.push(tokens);\r\n    }\r\n    return result;\r\n}\r\nclass HashTableEntry {\r\n    constructor(tokenTypeIndex, tokenModifierSet, languageId, metadata) {\r\n        this.tokenTypeIndex = tokenTypeIndex;\r\n        this.tokenModifierSet = tokenModifierSet;\r\n        this.languageId = languageId;\r\n        this.metadata = metadata;\r\n        this.next = null;\r\n    }\r\n}\r\nclass HashTable {\r\n    constructor() {\r\n        this._elementsCount = 0;\r\n        this._currentLengthIndex = 0;\r\n        this._currentLength = HashTable._SIZES[this._currentLengthIndex];\r\n        this._growCount = Math.round(this._currentLengthIndex + 1 < HashTable._SIZES.length ? 2 / 3 * this._currentLength : 0);\r\n        this._elements = [];\r\n        HashTable._nullOutEntries(this._elements, this._currentLength);\r\n    }\r\n    static _nullOutEntries(entries, length) {\r\n        for (let i = 0; i < length; i++) {\r\n            entries[i] = null;\r\n        }\r\n    }\r\n    _hash2(n1, n2) {\r\n        return (((n1 << 5) - n1) + n2) | 0; // n1 * 31 + n2, keep as int32\r\n    }\r\n    _hashFunc(tokenTypeIndex, tokenModifierSet, languageId) {\r\n        return this._hash2(this._hash2(tokenTypeIndex, tokenModifierSet), languageId) % this._currentLength;\r\n    }\r\n    get(tokenTypeIndex, tokenModifierSet, languageId) {\r\n        const hash = this._hashFunc(tokenTypeIndex, tokenModifierSet, languageId);\r\n        let p = this._elements[hash];\r\n        while (p) {\r\n            if (p.tokenTypeIndex === tokenTypeIndex && p.tokenModifierSet === tokenModifierSet && p.languageId === languageId) {\r\n                return p;\r\n            }\r\n            p = p.next;\r\n        }\r\n        return null;\r\n    }\r\n    add(tokenTypeIndex, tokenModifierSet, languageId, metadata) {\r\n        this._elementsCount++;\r\n        if (this._growCount !== 0 && this._elementsCount >= this._growCount) {\r\n            // expand!\r\n            const oldElements = this._elements;\r\n            this._currentLengthIndex++;\r\n            this._currentLength = HashTable._SIZES[this._currentLengthIndex];\r\n            this._growCount = Math.round(this._currentLengthIndex + 1 < HashTable._SIZES.length ? 2 / 3 * this._currentLength : 0);\r\n            this._elements = [];\r\n            HashTable._nullOutEntries(this._elements, this._currentLength);\r\n            for (const first of oldElements) {\r\n                let p = first;\r\n                while (p) {\r\n                    const oldNext = p.next;\r\n                    p.next = null;\r\n                    this._add(p);\r\n                    p = oldNext;\r\n                }\r\n            }\r\n        }\r\n        this._add(new HashTableEntry(tokenTypeIndex, tokenModifierSet, languageId, metadata));\r\n    }\r\n    _add(element) {\r\n        const hash = this._hashFunc(element.tokenTypeIndex, element.tokenModifierSet, element.languageId);\r\n        element.next = this._elements[hash];\r\n        this._elements[hash] = element;\r\n    }\r\n}\r\nHashTable._SIZES = [3, 7, 13, 31, 61, 127, 251, 509, 1021, 2039, 4093, 8191, 16381, 32749, 65521, 131071, 262139, 524287, 1048573, 2097143];\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nexport const ISemanticTokensStylingService = createDecorator('semanticTokensStylingService');\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { ILanguageService } from '../languages/language.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { ILogService } from '../../../platform/log/common/log.js';\r\nimport { SemanticTokensProviderStyling } from './semanticTokensProviderStyling.js';\r\nimport { ISemanticTokensStylingService } from './semanticTokensStyling.js';\r\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\r\nlet SemanticTokensStylingService = class SemanticTokensStylingService extends Disposable {\r\n    constructor(_themeService, _logService, _languageService) {\r\n        super();\r\n        this._themeService = _themeService;\r\n        this._logService = _logService;\r\n        this._languageService = _languageService;\r\n        this._caches = new WeakMap();\r\n        this._register(this._themeService.onDidColorThemeChange(() => {\r\n            this._caches = new WeakMap();\r\n        }));\r\n    }\r\n    getStyling(provider) {\r\n        if (!this._caches.has(provider)) {\r\n            this._caches.set(provider, new SemanticTokensProviderStyling(provider.getLegend(), this._themeService, this._languageService, this._logService));\r\n        }\r\n        return this._caches.get(provider);\r\n    }\r\n};\r\nSemanticTokensStylingService = __decorate([\r\n    __param(0, IThemeService),\r\n    __param(1, ILogService),\r\n    __param(2, ILanguageService)\r\n], SemanticTokensStylingService);\r\nexport { SemanticTokensStylingService };\r\nregisterSingleton(ISemanticTokensStylingService, SemanticTokensStylingService, 1 /* InstantiationType.Delayed */);\r\n", "import { isThenable } from './async.js';\r\nimport { isEqualOrParent } from './extpath.js';\r\nimport { LRUCache } from './map.js';\r\nimport { basename, extname, posix, sep } from './path.js';\r\nimport { isLinux } from './platform.js';\r\nimport { escapeRegExpCharacters, ltrim } from './strings.js';\r\nexport const GLOBSTAR = '**';\r\nexport const GLOB_SPLIT = '/';\r\nconst PATH_REGEX = '[/\\\\\\\\]'; // any slash or backslash\r\nconst NO_PATH_REGEX = '[^/\\\\\\\\]'; // any non-slash and non-backslash\r\nconst ALL_FORWARD_SLASHES = /\\//g;\r\nfunction starsToRegExp(starCount, isLastPattern) {\r\n    switch (starCount) {\r\n        case 0:\r\n            return '';\r\n        case 1:\r\n            return `${NO_PATH_REGEX}*?`; // 1 star matches any number of characters except path separator (/ and \\) - non greedy (?)\r\n        default:\r\n            // Matches:  (Path Sep OR Path Val followed by Path Sep) 0-many times except when it's the last pattern\r\n            //           in which case also matches (Path Sep followed by Path Val)\r\n            // Group is non capturing because we don't need to capture at all (?:...)\r\n            // Overall we use non-greedy matching because it could be that we match too much\r\n            return `(?:${PATH_REGEX}|${NO_PATH_REGEX}+${PATH_REGEX}${isLastPattern ? `|${PATH_REGEX}${NO_PATH_REGEX}+` : ''})*?`;\r\n    }\r\n}\r\nexport function splitGlobAware(pattern, splitChar) {\r\n    if (!pattern) {\r\n        return [];\r\n    }\r\n    const segments = [];\r\n    let inBraces = false;\r\n    let inBrackets = false;\r\n    let curVal = '';\r\n    for (const char of pattern) {\r\n        switch (char) {\r\n            case splitChar:\r\n                if (!inBraces && !inBrackets) {\r\n                    segments.push(curVal);\r\n                    curVal = '';\r\n                    continue;\r\n                }\r\n                break;\r\n            case '{':\r\n                inBraces = true;\r\n                break;\r\n            case '}':\r\n                inBraces = false;\r\n                break;\r\n            case '[':\r\n                inBrackets = true;\r\n                break;\r\n            case ']':\r\n                inBrackets = false;\r\n                break;\r\n        }\r\n        curVal += char;\r\n    }\r\n    // Tail\r\n    if (curVal) {\r\n        segments.push(curVal);\r\n    }\r\n    return segments;\r\n}\r\nfunction parseRegExp(pattern) {\r\n    if (!pattern) {\r\n        return '';\r\n    }\r\n    let regEx = '';\r\n    // Split up into segments for each slash found\r\n    const segments = splitGlobAware(pattern, GLOB_SPLIT);\r\n    // Special case where we only have globstars\r\n    if (segments.every(segment => segment === GLOBSTAR)) {\r\n        regEx = '.*';\r\n    }\r\n    // Build regex over segments\r\n    else {\r\n        let previousSegmentWasGlobStar = false;\r\n        segments.forEach((segment, index) => {\r\n            // Treat globstar specially\r\n            if (segment === GLOBSTAR) {\r\n                // if we have more than one globstar after another, just ignore it\r\n                if (previousSegmentWasGlobStar) {\r\n                    return;\r\n                }\r\n                regEx += starsToRegExp(2, index === segments.length - 1);\r\n            }\r\n            // Anything else, not globstar\r\n            else {\r\n                // States\r\n                let inBraces = false;\r\n                let braceVal = '';\r\n                let inBrackets = false;\r\n                let bracketVal = '';\r\n                for (const char of segment) {\r\n                    // Support brace expansion\r\n                    if (char !== '}' && inBraces) {\r\n                        braceVal += char;\r\n                        continue;\r\n                    }\r\n                    // Support brackets\r\n                    if (inBrackets && (char !== ']' || !bracketVal) /* ] is literally only allowed as first character in brackets to match it */) {\r\n                        let res;\r\n                        // range operator\r\n                        if (char === '-') {\r\n                            res = char;\r\n                        }\r\n                        // negation operator (only valid on first index in bracket)\r\n                        else if ((char === '^' || char === '!') && !bracketVal) {\r\n                            res = '^';\r\n                        }\r\n                        // glob split matching is not allowed within character ranges\r\n                        // see http://man7.org/linux/man-pages/man7/glob.7.html\r\n                        else if (char === GLOB_SPLIT) {\r\n                            res = '';\r\n                        }\r\n                        // anything else gets escaped\r\n                        else {\r\n                            res = escapeRegExpCharacters(char);\r\n                        }\r\n                        bracketVal += res;\r\n                        continue;\r\n                    }\r\n                    switch (char) {\r\n                        case '{':\r\n                            inBraces = true;\r\n                            continue;\r\n                        case '[':\r\n                            inBrackets = true;\r\n                            continue;\r\n                        case '}': {\r\n                            const choices = splitGlobAware(braceVal, ',');\r\n                            // Converts {foo,bar} => [foo|bar]\r\n                            const braceRegExp = `(?:${choices.map(choice => parseRegExp(choice)).join('|')})`;\r\n                            regEx += braceRegExp;\r\n                            inBraces = false;\r\n                            braceVal = '';\r\n                            break;\r\n                        }\r\n                        case ']': {\r\n                            regEx += ('[' + bracketVal + ']');\r\n                            inBrackets = false;\r\n                            bracketVal = '';\r\n                            break;\r\n                        }\r\n                        case '?':\r\n                            regEx += NO_PATH_REGEX; // 1 ? matches any single character except path separator (/ and \\)\r\n                            continue;\r\n                        case '*':\r\n                            regEx += starsToRegExp(1);\r\n                            continue;\r\n                        default:\r\n                            regEx += escapeRegExpCharacters(char);\r\n                    }\r\n                }\r\n                // Tail: Add the slash we had split on if there is more to\r\n                // come and the remaining pattern is not a globstar\r\n                // For example if pattern: some/**/*.js we want the \"/\" after\r\n                // some to be included in the RegEx to prevent a folder called\r\n                // \"something\" to match as well.\r\n                if (index < segments.length - 1 && // more segments to come after this\r\n                    (segments[index + 1] !== GLOBSTAR || // next segment is not **, or...\r\n                        index + 2 < segments.length // ...next segment is ** but there is more segments after that\r\n                    )) {\r\n                    regEx += PATH_REGEX;\r\n                }\r\n            }\r\n            // update globstar state\r\n            previousSegmentWasGlobStar = (segment === GLOBSTAR);\r\n        });\r\n    }\r\n    return regEx;\r\n}\r\n// regexes to check for trivial glob patterns that just check for String#endsWith\r\nconst T1 = /^\\*\\*\\/\\*\\.[\\w\\.-]+$/; // **/*.something\r\nconst T2 = /^\\*\\*\\/([\\w\\.-]+)\\/?$/; // **/something\r\nconst T3 = /^{\\*\\*\\/\\*?[\\w\\.-]+\\/?(,\\*\\*\\/\\*?[\\w\\.-]+\\/?)*}$/; // {**/*.something,**/*.else} or {**/package.json,**/project.json}\r\nconst T3_2 = /^{\\*\\*\\/\\*?[\\w\\.-]+(\\/(\\*\\*)?)?(,\\*\\*\\/\\*?[\\w\\.-]+(\\/(\\*\\*)?)?)*}$/; // Like T3, with optional trailing /**\r\nconst T4 = /^\\*\\*((\\/[\\w\\.-]+)+)\\/?$/; // **/something/else\r\nconst T5 = /^([\\w\\.-]+(\\/[\\w\\.-]+)*)\\/?$/; // something/else\r\nconst CACHE = new LRUCache(10000); // bounded to 10000 elements\r\nconst FALSE = function () {\r\n    return false;\r\n};\r\nconst NULL = function () {\r\n    return null;\r\n};\r\nfunction parsePattern(arg1, options) {\r\n    if (!arg1) {\r\n        return NULL;\r\n    }\r\n    // Handle relative patterns\r\n    let pattern;\r\n    if (typeof arg1 !== 'string') {\r\n        pattern = arg1.pattern;\r\n    }\r\n    else {\r\n        pattern = arg1;\r\n    }\r\n    // Whitespace trimming\r\n    pattern = pattern.trim();\r\n    // Check cache\r\n    const patternKey = `${pattern}_${!!options.trimForExclusions}`;\r\n    let parsedPattern = CACHE.get(patternKey);\r\n    if (parsedPattern) {\r\n        return wrapRelativePattern(parsedPattern, arg1);\r\n    }\r\n    // Check for Trivials\r\n    let match;\r\n    if (T1.test(pattern)) {\r\n        parsedPattern = trivia1(pattern.substr(4), pattern); // common pattern: **/*.txt just need endsWith check\r\n    }\r\n    else if (match = T2.exec(trimForExclusions(pattern, options))) { // common pattern: **/some.txt just need basename check\r\n        parsedPattern = trivia2(match[1], pattern);\r\n    }\r\n    else if ((options.trimForExclusions ? T3_2 : T3).test(pattern)) { // repetition of common patterns (see above) {**/*.txt,**/*.png}\r\n        parsedPattern = trivia3(pattern, options);\r\n    }\r\n    else if (match = T4.exec(trimForExclusions(pattern, options))) { // common pattern: **/something/else just need endsWith check\r\n        parsedPattern = trivia4and5(match[1].substr(1), pattern, true);\r\n    }\r\n    else if (match = T5.exec(trimForExclusions(pattern, options))) { // common pattern: something/else just need equals check\r\n        parsedPattern = trivia4and5(match[1], pattern, false);\r\n    }\r\n    // Otherwise convert to pattern\r\n    else {\r\n        parsedPattern = toRegExp(pattern);\r\n    }\r\n    // Cache\r\n    CACHE.set(patternKey, parsedPattern);\r\n    return wrapRelativePattern(parsedPattern, arg1);\r\n}\r\nfunction wrapRelativePattern(parsedPattern, arg2) {\r\n    if (typeof arg2 === 'string') {\r\n        return parsedPattern;\r\n    }\r\n    const wrappedPattern = function (path, basename) {\r\n        if (!isEqualOrParent(path, arg2.base, !isLinux)) {\r\n            // skip glob matching if `base` is not a parent of `path`\r\n            return null;\r\n        }\r\n        // Given we have checked `base` being a parent of `path`,\r\n        // we can now remove the `base` portion of the `path`\r\n        // and only match on the remaining path components\r\n        // For that we try to extract the portion of the `path`\r\n        // that comes after the `base` portion. We have to account\r\n        // for the fact that `base` might end in a path separator\r\n        // (https://github.com/microsoft/vscode/issues/162498)\r\n        return parsedPattern(ltrim(path.substr(arg2.base.length), sep), basename);\r\n    };\r\n    // Make sure to preserve associated metadata\r\n    wrappedPattern.allBasenames = parsedPattern.allBasenames;\r\n    wrappedPattern.allPaths = parsedPattern.allPaths;\r\n    wrappedPattern.basenames = parsedPattern.basenames;\r\n    wrappedPattern.patterns = parsedPattern.patterns;\r\n    return wrappedPattern;\r\n}\r\nfunction trimForExclusions(pattern, options) {\r\n    return options.trimForExclusions && pattern.endsWith('/**') ? pattern.substr(0, pattern.length - 2) : pattern; // dropping **, tailing / is dropped later\r\n}\r\n// common pattern: **/*.txt just need endsWith check\r\nfunction trivia1(base, pattern) {\r\n    return function (path, basename) {\r\n        return typeof path === 'string' && path.endsWith(base) ? pattern : null;\r\n    };\r\n}\r\n// common pattern: **/some.txt just need basename check\r\nfunction trivia2(base, pattern) {\r\n    const slashBase = `/${base}`;\r\n    const backslashBase = `\\\\${base}`;\r\n    const parsedPattern = function (path, basename) {\r\n        if (typeof path !== 'string') {\r\n            return null;\r\n        }\r\n        if (basename) {\r\n            return basename === base ? pattern : null;\r\n        }\r\n        return path === base || path.endsWith(slashBase) || path.endsWith(backslashBase) ? pattern : null;\r\n    };\r\n    const basenames = [base];\r\n    parsedPattern.basenames = basenames;\r\n    parsedPattern.patterns = [pattern];\r\n    parsedPattern.allBasenames = basenames;\r\n    return parsedPattern;\r\n}\r\n// repetition of common patterns (see above) {**/*.txt,**/*.png}\r\nfunction trivia3(pattern, options) {\r\n    const parsedPatterns = aggregateBasenameMatches(pattern.slice(1, -1)\r\n        .split(',')\r\n        .map(pattern => parsePattern(pattern, options))\r\n        .filter(pattern => pattern !== NULL), pattern);\r\n    const patternsLength = parsedPatterns.length;\r\n    if (!patternsLength) {\r\n        return NULL;\r\n    }\r\n    if (patternsLength === 1) {\r\n        return parsedPatterns[0];\r\n    }\r\n    const parsedPattern = function (path, basename) {\r\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\r\n            if (parsedPatterns[i](path, basename)) {\r\n                return pattern;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    const withBasenames = parsedPatterns.find(pattern => !!pattern.allBasenames);\r\n    if (withBasenames) {\r\n        parsedPattern.allBasenames = withBasenames.allBasenames;\r\n    }\r\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, []);\r\n    if (allPaths.length) {\r\n        parsedPattern.allPaths = allPaths;\r\n    }\r\n    return parsedPattern;\r\n}\r\n// common patterns: **/something/else just need endsWith check, something/else just needs and equals check\r\nfunction trivia4and5(targetPath, pattern, matchPathEnds) {\r\n    const usingPosixSep = sep === posix.sep;\r\n    const nativePath = usingPosixSep ? targetPath : targetPath.replace(ALL_FORWARD_SLASHES, sep);\r\n    const nativePathEnd = sep + nativePath;\r\n    const targetPathEnd = posix.sep + targetPath;\r\n    let parsedPattern;\r\n    if (matchPathEnds) {\r\n        parsedPattern = function (path, basename) {\r\n            return typeof path === 'string' && ((path === nativePath || path.endsWith(nativePathEnd)) || !usingPosixSep && (path === targetPath || path.endsWith(targetPathEnd))) ? pattern : null;\r\n        };\r\n    }\r\n    else {\r\n        parsedPattern = function (path, basename) {\r\n            return typeof path === 'string' && (path === nativePath || (!usingPosixSep && path === targetPath)) ? pattern : null;\r\n        };\r\n    }\r\n    parsedPattern.allPaths = [(matchPathEnds ? '*/' : './') + targetPath];\r\n    return parsedPattern;\r\n}\r\nfunction toRegExp(pattern) {\r\n    try {\r\n        const regExp = new RegExp(`^${parseRegExp(pattern)}$`);\r\n        return function (path) {\r\n            regExp.lastIndex = 0; // reset RegExp to its initial state to reuse it!\r\n            return typeof path === 'string' && regExp.test(path) ? pattern : null;\r\n        };\r\n    }\r\n    catch (error) {\r\n        return NULL;\r\n    }\r\n}\r\nexport function match(arg1, path, hasSibling) {\r\n    if (!arg1 || typeof path !== 'string') {\r\n        return false;\r\n    }\r\n    return parse(arg1)(path, undefined, hasSibling);\r\n}\r\nexport function parse(arg1, options = {}) {\r\n    if (!arg1) {\r\n        return FALSE;\r\n    }\r\n    // Glob with String\r\n    if (typeof arg1 === 'string' || isRelativePattern(arg1)) {\r\n        const parsedPattern = parsePattern(arg1, options);\r\n        if (parsedPattern === NULL) {\r\n            return FALSE;\r\n        }\r\n        const resultPattern = function (path, basename) {\r\n            return !!parsedPattern(path, basename);\r\n        };\r\n        if (parsedPattern.allBasenames) {\r\n            resultPattern.allBasenames = parsedPattern.allBasenames;\r\n        }\r\n        if (parsedPattern.allPaths) {\r\n            resultPattern.allPaths = parsedPattern.allPaths;\r\n        }\r\n        return resultPattern;\r\n    }\r\n    // Glob with Expression\r\n    return parsedExpression(arg1, options);\r\n}\r\nexport function isRelativePattern(obj) {\r\n    const rp = obj;\r\n    if (!rp) {\r\n        return false;\r\n    }\r\n    return typeof rp.base === 'string' && typeof rp.pattern === 'string';\r\n}\r\nfunction parsedExpression(expression, options) {\r\n    const parsedPatterns = aggregateBasenameMatches(Object.getOwnPropertyNames(expression)\r\n        .map(pattern => parseExpressionPattern(pattern, expression[pattern], options))\r\n        .filter(pattern => pattern !== NULL));\r\n    const patternsLength = parsedPatterns.length;\r\n    if (!patternsLength) {\r\n        return NULL;\r\n    }\r\n    if (!parsedPatterns.some(parsedPattern => !!parsedPattern.requiresSiblings)) {\r\n        if (patternsLength === 1) {\r\n            return parsedPatterns[0];\r\n        }\r\n        const resultExpression = function (path, basename) {\r\n            let resultPromises = undefined;\r\n            for (let i = 0, n = parsedPatterns.length; i < n; i++) {\r\n                const result = parsedPatterns[i](path, basename);\r\n                if (typeof result === 'string') {\r\n                    return result; // immediately return as soon as the first expression matches\r\n                }\r\n                // If the result is a promise, we have to keep it for\r\n                // later processing and await the result properly.\r\n                if (isThenable(result)) {\r\n                    if (!resultPromises) {\r\n                        resultPromises = [];\r\n                    }\r\n                    resultPromises.push(result);\r\n                }\r\n            }\r\n            // With result promises, we have to loop over each and\r\n            // await the result before we can return any result.\r\n            if (resultPromises) {\r\n                return (async () => {\r\n                    for (const resultPromise of resultPromises) {\r\n                        const result = await resultPromise;\r\n                        if (typeof result === 'string') {\r\n                            return result;\r\n                        }\r\n                    }\r\n                    return null;\r\n                })();\r\n            }\r\n            return null;\r\n        };\r\n        const withBasenames = parsedPatterns.find(pattern => !!pattern.allBasenames);\r\n        if (withBasenames) {\r\n            resultExpression.allBasenames = withBasenames.allBasenames;\r\n        }\r\n        const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, []);\r\n        if (allPaths.length) {\r\n            resultExpression.allPaths = allPaths;\r\n        }\r\n        return resultExpression;\r\n    }\r\n    const resultExpression = function (path, base, hasSibling) {\r\n        let name = undefined;\r\n        let resultPromises = undefined;\r\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\r\n            // Pattern matches path\r\n            const parsedPattern = parsedPatterns[i];\r\n            if (parsedPattern.requiresSiblings && hasSibling) {\r\n                if (!base) {\r\n                    base = basename(path);\r\n                }\r\n                if (!name) {\r\n                    name = base.substr(0, base.length - extname(path).length);\r\n                }\r\n            }\r\n            const result = parsedPattern(path, base, name, hasSibling);\r\n            if (typeof result === 'string') {\r\n                return result; // immediately return as soon as the first expression matches\r\n            }\r\n            // If the result is a promise, we have to keep it for\r\n            // later processing and await the result properly.\r\n            if (isThenable(result)) {\r\n                if (!resultPromises) {\r\n                    resultPromises = [];\r\n                }\r\n                resultPromises.push(result);\r\n            }\r\n        }\r\n        // With result promises, we have to loop over each and\r\n        // await the result before we can return any result.\r\n        if (resultPromises) {\r\n            return (async () => {\r\n                for (const resultPromise of resultPromises) {\r\n                    const result = await resultPromise;\r\n                    if (typeof result === 'string') {\r\n                        return result;\r\n                    }\r\n                }\r\n                return null;\r\n            })();\r\n        }\r\n        return null;\r\n    };\r\n    const withBasenames = parsedPatterns.find(pattern => !!pattern.allBasenames);\r\n    if (withBasenames) {\r\n        resultExpression.allBasenames = withBasenames.allBasenames;\r\n    }\r\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, []);\r\n    if (allPaths.length) {\r\n        resultExpression.allPaths = allPaths;\r\n    }\r\n    return resultExpression;\r\n}\r\nfunction parseExpressionPattern(pattern, value, options) {\r\n    if (value === false) {\r\n        return NULL; // pattern is disabled\r\n    }\r\n    const parsedPattern = parsePattern(pattern, options);\r\n    if (parsedPattern === NULL) {\r\n        return NULL;\r\n    }\r\n    // Expression Pattern is <boolean>\r\n    if (typeof value === 'boolean') {\r\n        return parsedPattern;\r\n    }\r\n    // Expression Pattern is <SiblingClause>\r\n    if (value) {\r\n        const when = value.when;\r\n        if (typeof when === 'string') {\r\n            const result = (path, basename, name, hasSibling) => {\r\n                if (!hasSibling || !parsedPattern(path, basename)) {\r\n                    return null;\r\n                }\r\n                const clausePattern = when.replace('$(basename)', () => name);\r\n                const matched = hasSibling(clausePattern);\r\n                return isThenable(matched) ?\r\n                    matched.then(match => match ? pattern : null) :\r\n                    matched ? pattern : null;\r\n            };\r\n            result.requiresSiblings = true;\r\n            return result;\r\n        }\r\n    }\r\n    // Expression is anything\r\n    return parsedPattern;\r\n}\r\nfunction aggregateBasenameMatches(parsedPatterns, result) {\r\n    const basenamePatterns = parsedPatterns.filter(parsedPattern => !!parsedPattern.basenames);\r\n    if (basenamePatterns.length < 2) {\r\n        return parsedPatterns;\r\n    }\r\n    const basenames = basenamePatterns.reduce((all, current) => {\r\n        const basenames = current.basenames;\r\n        return basenames ? all.concat(basenames) : all;\r\n    }, []);\r\n    let patterns;\r\n    if (result) {\r\n        patterns = [];\r\n        for (let i = 0, n = basenames.length; i < n; i++) {\r\n            patterns.push(result);\r\n        }\r\n    }\r\n    else {\r\n        patterns = basenamePatterns.reduce((all, current) => {\r\n            const patterns = current.patterns;\r\n            return patterns ? all.concat(patterns) : all;\r\n        }, []);\r\n    }\r\n    const aggregate = function (path, basename) {\r\n        if (typeof path !== 'string') {\r\n            return null;\r\n        }\r\n        if (!basename) {\r\n            let i;\r\n            for (i = path.length; i > 0; i--) {\r\n                const ch = path.charCodeAt(i - 1);\r\n                if (ch === 47 /* CharCode.Slash */ || ch === 92 /* CharCode.Backslash */) {\r\n                    break;\r\n                }\r\n            }\r\n            basename = path.substr(i);\r\n        }\r\n        const index = basenames.indexOf(basename);\r\n        return index !== -1 ? patterns[index] : null;\r\n    };\r\n    aggregate.basenames = basenames;\r\n    aggregate.patterns = patterns;\r\n    aggregate.allBasenames = basenames;\r\n    const aggregatedPatterns = parsedPatterns.filter(parsedPattern => !parsedPattern.basenames);\r\n    aggregatedPatterns.push(aggregate);\r\n    return aggregatedPatterns;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { match as matchGlobPattern } from '../../base/common/glob.js';\r\nimport { normalize } from '../../base/common/path.js';\r\nexport function score(selector, candidateUri, candidateLanguage, candidateIsSynchronized, candidateNotebookUri, candidateNotebookType) {\r\n    if (Array.isArray(selector)) {\r\n        // array -> take max individual value\r\n        let ret = 0;\r\n        for (const filter of selector) {\r\n            const value = score(filter, candidateUri, candidateLanguage, candidateIsSynchronized, candidateNotebookUri, candidateNotebookType);\r\n            if (value === 10) {\r\n                return value; // already at the highest\r\n            }\r\n            if (value > ret) {\r\n                ret = value;\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    else if (typeof selector === 'string') {\r\n        if (!candidateIsSynchronized) {\r\n            return 0;\r\n        }\r\n        // short-hand notion, desugars to\r\n        // 'fooLang' -> { language: 'fooLang'}\r\n        // '*' -> { language: '*' }\r\n        if (selector === '*') {\r\n            return 5;\r\n        }\r\n        else if (selector === candidateLanguage) {\r\n            return 10;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    else if (selector) {\r\n        // filter -> select accordingly, use defaults for scheme\r\n        const { language, pattern, scheme, hasAccessToAllModels, notebookType } = selector; // TODO: microsoft/TypeScript#42768\r\n        if (!candidateIsSynchronized && !hasAccessToAllModels) {\r\n            return 0;\r\n        }\r\n        // selector targets a notebook -> use the notebook uri instead\r\n        // of the \"normal\" document uri.\r\n        if (notebookType && candidateNotebookUri) {\r\n            candidateUri = candidateNotebookUri;\r\n        }\r\n        let ret = 0;\r\n        if (scheme) {\r\n            if (scheme === candidateUri.scheme) {\r\n                ret = 10;\r\n            }\r\n            else if (scheme === '*') {\r\n                ret = 5;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n        if (language) {\r\n            if (language === candidateLanguage) {\r\n                ret = 10;\r\n            }\r\n            else if (language === '*') {\r\n                ret = Math.max(ret, 5);\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n        if (notebookType) {\r\n            if (notebookType === candidateNotebookType) {\r\n                ret = 10;\r\n            }\r\n            else if (notebookType === '*' && candidateNotebookType !== undefined) {\r\n                ret = Math.max(ret, 5);\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n        if (pattern) {\r\n            let normalizedPattern;\r\n            if (typeof pattern === 'string') {\r\n                normalizedPattern = pattern;\r\n            }\r\n            else {\r\n                // Since this pattern has a `base` property, we need\r\n                // to normalize this path first before passing it on\r\n                // because we will compare it against `Uri.fsPath`\r\n                // which uses platform specific separators.\r\n                // Refs: https://github.com/microsoft/vscode/issues/99938\r\n                normalizedPattern = { ...pattern, base: normalize(pattern.base) };\r\n            }\r\n            if (normalizedPattern === candidateUri.fsPath || matchGlobPattern(normalizedPattern, candidateUri.fsPath)) {\r\n                ret = 10;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../base/common/event.js';\r\nimport { toDisposable } from '../../base/common/lifecycle.js';\r\nimport { shouldSynchronizeModel } from './model.js';\r\nimport { score } from './languageSelector.js';\r\nfunction isExclusive(selector) {\r\n    if (typeof selector === 'string') {\r\n        return false;\r\n    }\r\n    else if (Array.isArray(selector)) {\r\n        return selector.every(isExclusive);\r\n    }\r\n    else {\r\n        return !!selector.exclusive; // TODO: microsoft/TypeScript#42768\r\n    }\r\n}\r\nclass MatchCandidate {\r\n    constructor(uri, languageId, notebookUri, notebookType) {\r\n        this.uri = uri;\r\n        this.languageId = languageId;\r\n        this.notebookUri = notebookUri;\r\n        this.notebookType = notebookType;\r\n    }\r\n    equals(other) {\r\n        var _a, _b;\r\n        return this.notebookType === other.notebookType\r\n            && this.languageId === other.languageId\r\n            && this.uri.toString() === other.uri.toString()\r\n            && ((_a = this.notebookUri) === null || _a === void 0 ? void 0 : _a.toString()) === ((_b = other.notebookUri) === null || _b === void 0 ? void 0 : _b.toString());\r\n    }\r\n}\r\nexport class LanguageFeatureRegistry {\r\n    constructor(_notebookInfoResolver) {\r\n        this._notebookInfoResolver = _notebookInfoResolver;\r\n        this._clock = 0;\r\n        this._entries = [];\r\n        this._onDidChange = new Emitter();\r\n        this.onDidChange = this._onDidChange.event;\r\n    }\r\n    register(selector, provider) {\r\n        let entry = {\r\n            selector,\r\n            provider,\r\n            _score: -1,\r\n            _time: this._clock++\r\n        };\r\n        this._entries.push(entry);\r\n        this._lastCandidate = undefined;\r\n        this._onDidChange.fire(this._entries.length);\r\n        return toDisposable(() => {\r\n            if (entry) {\r\n                const idx = this._entries.indexOf(entry);\r\n                if (idx >= 0) {\r\n                    this._entries.splice(idx, 1);\r\n                    this._lastCandidate = undefined;\r\n                    this._onDidChange.fire(this._entries.length);\r\n                    entry = undefined;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    has(model) {\r\n        return this.all(model).length > 0;\r\n    }\r\n    all(model) {\r\n        if (!model) {\r\n            return [];\r\n        }\r\n        this._updateScores(model);\r\n        const result = [];\r\n        // from registry\r\n        for (const entry of this._entries) {\r\n            if (entry._score > 0) {\r\n                result.push(entry.provider);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    ordered(model) {\r\n        const result = [];\r\n        this._orderedForEach(model, entry => result.push(entry.provider));\r\n        return result;\r\n    }\r\n    orderedGroups(model) {\r\n        const result = [];\r\n        let lastBucket;\r\n        let lastBucketScore;\r\n        this._orderedForEach(model, entry => {\r\n            if (lastBucket && lastBucketScore === entry._score) {\r\n                lastBucket.push(entry.provider);\r\n            }\r\n            else {\r\n                lastBucketScore = entry._score;\r\n                lastBucket = [entry.provider];\r\n                result.push(lastBucket);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    _orderedForEach(model, callback) {\r\n        this._updateScores(model);\r\n        for (const entry of this._entries) {\r\n            if (entry._score > 0) {\r\n                callback(entry);\r\n            }\r\n        }\r\n    }\r\n    _updateScores(model) {\r\n        var _a, _b;\r\n        const notebookInfo = (_a = this._notebookInfoResolver) === null || _a === void 0 ? void 0 : _a.call(this, model.uri);\r\n        // use the uri (scheme, pattern) of the notebook info iff we have one\r\n        // otherwise it's the model's/document's uri\r\n        const candidate = notebookInfo\r\n            ? new MatchCandidate(model.uri, model.getLanguageId(), notebookInfo.uri, notebookInfo.type)\r\n            : new MatchCandidate(model.uri, model.getLanguageId(), undefined, undefined);\r\n        if ((_b = this._lastCandidate) === null || _b === void 0 ? void 0 : _b.equals(candidate)) {\r\n            // nothing has changed\r\n            return;\r\n        }\r\n        this._lastCandidate = candidate;\r\n        for (const entry of this._entries) {\r\n            entry._score = score(entry.selector, candidate.uri, candidate.languageId, shouldSynchronizeModel(model), candidate.notebookUri, candidate.notebookType);\r\n            if (isExclusive(entry.selector) && entry._score > 0) {\r\n                // support for one exclusive selector that overwrites\r\n                // any other selector\r\n                for (const entry of this._entries) {\r\n                    entry._score = 0;\r\n                }\r\n                entry._score = 1000;\r\n                break;\r\n            }\r\n        }\r\n        // needs sorting\r\n        this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime);\r\n    }\r\n    static _compareByScoreAndTime(a, b) {\r\n        if (a._score < b._score) {\r\n            return 1;\r\n        }\r\n        else if (a._score > b._score) {\r\n            return -1;\r\n        }\r\n        // De-prioritize built-in providers\r\n        if (isBuiltinSelector(a.selector) && !isBuiltinSelector(b.selector)) {\r\n            return 1;\r\n        }\r\n        else if (!isBuiltinSelector(a.selector) && isBuiltinSelector(b.selector)) {\r\n            return -1;\r\n        }\r\n        if (a._time < b._time) {\r\n            return 1;\r\n        }\r\n        else if (a._time > b._time) {\r\n            return -1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n}\r\nfunction isBuiltinSelector(selector) {\r\n    if (typeof selector === 'string') {\r\n        return false;\r\n    }\r\n    if (Array.isArray(selector)) {\r\n        return selector.some(isBuiltinSelector);\r\n    }\r\n    return Boolean(selector.isBuiltin);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { LanguageFeatureRegistry } from '../languageFeatureRegistry.js';\r\nimport { ILanguageFeaturesService } from './languageFeatures.js';\r\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\r\nexport class LanguageFeaturesService {\r\n    constructor() {\r\n        this.referenceProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.renameProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.codeActionProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.definitionProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.typeDefinitionProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.declarationProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.implementationProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.documentSymbolProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.inlayHintsProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.colorProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.codeLensProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.documentFormattingEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.documentRangeFormattingEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.onTypeFormattingEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.signatureHelpProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.hoverProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.documentHighlightProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.multiDocumentHighlightProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.selectionRangeProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.foldingRangeProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.linkProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.inlineCompletionsProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.completionProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.linkedEditingRangeProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.documentRangeSemanticTokensProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.documentSemanticTokensProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.documentOnDropEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n        this.documentPasteEditProvider = new LanguageFeatureRegistry(this._score.bind(this));\r\n    }\r\n    _score(uri) {\r\n        var _a;\r\n        return (_a = this._notebookTypeResolver) === null || _a === void 0 ? void 0 : _a.call(this, uri);\r\n    }\r\n}\r\nregisterSingleton(ILanguageFeaturesService, LanguageFeaturesService, 1 /* InstantiationType.Delayed */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport const diffEditorDefaultOptions = {\r\n    enableSplitViewResizing: true,\r\n    splitViewDefaultRatio: 0.5,\r\n    renderSideBySide: true,\r\n    renderMarginRevertIcon: true,\r\n    maxComputationTime: 5000,\r\n    maxFileSize: 50,\r\n    ignoreTrimWhitespace: true,\r\n    renderIndicators: true,\r\n    originalEditable: false,\r\n    diffCodeLens: false,\r\n    renderOverviewRuler: true,\r\n    diffWordWrap: 'inherit',\r\n    diffAlgorithm: 'advanced',\r\n    accessibilityVerbose: false,\r\n    experimental: {\r\n        showMoves: false,\r\n        showEmptyDecorations: true,\r\n    },\r\n    hideUnchangedRegions: {\r\n        enabled: false,\r\n        contextLineCount: 3,\r\n        minimumLineCount: 3,\r\n        revealLineCount: 20,\r\n    },\r\n    isInEmbeddedEditor: false,\r\n    onlyShowAccessibleDiffViewer: false,\r\n    renderSideBySideInlineBreakpoint: 900,\r\n    useInlineViewWhenSpaceIsLimited: true,\r\n};\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { diffEditorDefaultOptions } from './diffEditor.js';\r\nimport { editorOptionsRegistry } from './editorOptions.js';\r\nimport { EDITOR_MODEL_DEFAULTS } from '../core/textModelDefaults.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { Extensions } from '../../../platform/configuration/common/configurationRegistry.js';\r\nimport { Registry } from '../../../platform/registry/common/platform.js';\r\nexport const editorConfigurationBaseNode = Object.freeze({\r\n    id: 'editor',\r\n    order: 5,\r\n    type: 'object',\r\n    title: nls.localize('editorConfigurationTitle', \"Editor\"),\r\n    scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\r\n});\r\nconst editorConfiguration = {\r\n    ...editorConfigurationBaseNode,\r\n    properties: {\r\n        'editor.tabSize': {\r\n            type: 'number',\r\n            default: EDITOR_MODEL_DEFAULTS.tabSize,\r\n            minimum: 1,\r\n            markdownDescription: nls.localize('tabSize', \"The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.\", '`#editor.detectIndentation#`')\r\n        },\r\n        'editor.indentSize': {\r\n            'anyOf': [\r\n                {\r\n                    type: 'string',\r\n                    enum: ['tabSize']\r\n                },\r\n                {\r\n                    type: 'number',\r\n                    minimum: 1\r\n                }\r\n            ],\r\n            default: 'tabSize',\r\n            markdownDescription: nls.localize('indentSize', \"The number of spaces used for indentation or `\\\"tabSize\\\"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.\")\r\n        },\r\n        'editor.insertSpaces': {\r\n            type: 'boolean',\r\n            default: EDITOR_MODEL_DEFAULTS.insertSpaces,\r\n            markdownDescription: nls.localize('insertSpaces', \"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.\", '`#editor.detectIndentation#`')\r\n        },\r\n        'editor.detectIndentation': {\r\n            type: 'boolean',\r\n            default: EDITOR_MODEL_DEFAULTS.detectIndentation,\r\n            markdownDescription: nls.localize('detectIndentation', \"Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.\", '`#editor.tabSize#`', '`#editor.insertSpaces#`')\r\n        },\r\n        'editor.trimAutoWhitespace': {\r\n            type: 'boolean',\r\n            default: EDITOR_MODEL_DEFAULTS.trimAutoWhitespace,\r\n            description: nls.localize('trimAutoWhitespace', \"Remove trailing auto inserted whitespace.\")\r\n        },\r\n        'editor.largeFileOptimizations': {\r\n            type: 'boolean',\r\n            default: EDITOR_MODEL_DEFAULTS.largeFileOptimizations,\r\n            description: nls.localize('largeFileOptimizations', \"Special handling for large files to disable certain memory intensive features.\")\r\n        },\r\n        'editor.wordBasedSuggestions': {\r\n            enum: ['off', 'currentDocument', 'matchingDocuments', 'allDocuments'],\r\n            default: 'matchingDocuments',\r\n            enumDescriptions: [\r\n                nls.localize('wordBasedSuggestions.off', 'Turn off Word Based Suggestions.'),\r\n                nls.localize('wordBasedSuggestions.currentDocument', 'Only suggest words from the active document.'),\r\n                nls.localize('wordBasedSuggestions.matchingDocuments', 'Suggest words from all open documents of the same language.'),\r\n                nls.localize('wordBasedSuggestions.allDocuments', 'Suggest words from all open documents.')\r\n            ],\r\n            description: nls.localize('wordBasedSuggestions', \"Controls whether completions should be computed based on words in the document and from which documents they are computed.\")\r\n        },\r\n        'editor.semanticHighlighting.enabled': {\r\n            enum: [true, false, 'configuredByTheme'],\r\n            enumDescriptions: [\r\n                nls.localize('semanticHighlighting.true', 'Semantic highlighting enabled for all color themes.'),\r\n                nls.localize('semanticHighlighting.false', 'Semantic highlighting disabled for all color themes.'),\r\n                nls.localize('semanticHighlighting.configuredByTheme', 'Semantic highlighting is configured by the current color theme\\'s `semanticHighlighting` setting.')\r\n            ],\r\n            default: 'configuredByTheme',\r\n            description: nls.localize('semanticHighlighting.enabled', \"Controls whether the semanticHighlighting is shown for the languages that support it.\")\r\n        },\r\n        'editor.stablePeek': {\r\n            type: 'boolean',\r\n            default: false,\r\n            markdownDescription: nls.localize('stablePeek', \"Keep peek editors open even when double-clicking their content or when hitting `Escape`.\")\r\n        },\r\n        'editor.maxTokenizationLineLength': {\r\n            type: 'integer',\r\n            default: 20000,\r\n            description: nls.localize('maxTokenizationLineLength', \"Lines above this length will not be tokenized for performance reasons\")\r\n        },\r\n        'editor.experimental.asyncTokenization': {\r\n            type: 'boolean',\r\n            default: false,\r\n            description: nls.localize('editor.experimental.asyncTokenization', \"Controls whether the tokenization should happen asynchronously on a web worker.\"),\r\n            tags: ['experimental'],\r\n        },\r\n        'editor.experimental.asyncTokenizationLogging': {\r\n            type: 'boolean',\r\n            default: false,\r\n            description: nls.localize('editor.experimental.asyncTokenizationLogging', \"Controls whether async tokenization should be logged. For debugging only.\"),\r\n        },\r\n        'editor.experimental.asyncTokenizationVerification': {\r\n            type: 'boolean',\r\n            default: false,\r\n            description: nls.localize('editor.experimental.asyncTokenizationVerification', \"Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only.\"),\r\n            tags: ['experimental'],\r\n        },\r\n        'editor.language.brackets': {\r\n            type: ['array', 'null'],\r\n            default: null, // We want to distinguish the empty array from not configured.\r\n            description: nls.localize('schema.brackets', 'Defines the bracket symbols that increase or decrease the indentation.'),\r\n            items: {\r\n                type: 'array',\r\n                items: [\r\n                    {\r\n                        type: 'string',\r\n                        description: nls.localize('schema.openBracket', 'The opening bracket character or string sequence.')\r\n                    },\r\n                    {\r\n                        type: 'string',\r\n                        description: nls.localize('schema.closeBracket', 'The closing bracket character or string sequence.')\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        'editor.language.colorizedBracketPairs': {\r\n            type: ['array', 'null'],\r\n            default: null, // We want to distinguish the empty array from not configured.\r\n            description: nls.localize('schema.colorizedBracketPairs', 'Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled.'),\r\n            items: {\r\n                type: 'array',\r\n                items: [\r\n                    {\r\n                        type: 'string',\r\n                        description: nls.localize('schema.openBracket', 'The opening bracket character or string sequence.')\r\n                    },\r\n                    {\r\n                        type: 'string',\r\n                        description: nls.localize('schema.closeBracket', 'The closing bracket character or string sequence.')\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        'diffEditor.maxComputationTime': {\r\n            type: 'number',\r\n            default: diffEditorDefaultOptions.maxComputationTime,\r\n            description: nls.localize('maxComputationTime', \"Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.\")\r\n        },\r\n        'diffEditor.maxFileSize': {\r\n            type: 'number',\r\n            default: diffEditorDefaultOptions.maxFileSize,\r\n            description: nls.localize('maxFileSize', \"Maximum file size in MB for which to compute diffs. Use 0 for no limit.\")\r\n        },\r\n        'diffEditor.renderSideBySide': {\r\n            type: 'boolean',\r\n            default: diffEditorDefaultOptions.renderSideBySide,\r\n            description: nls.localize('sideBySide', \"Controls whether the diff editor shows the diff side by side or inline.\")\r\n        },\r\n        'diffEditor.renderSideBySideInlineBreakpoint': {\r\n            type: 'number',\r\n            default: diffEditorDefaultOptions.renderSideBySideInlineBreakpoint,\r\n            description: nls.localize('renderSideBySideInlineBreakpoint', \"If the diff editor width is smaller than this value, the inline view is used.\")\r\n        },\r\n        'diffEditor.useInlineViewWhenSpaceIsLimited': {\r\n            type: 'boolean',\r\n            default: diffEditorDefaultOptions.useInlineViewWhenSpaceIsLimited,\r\n            description: nls.localize('useInlineViewWhenSpaceIsLimited', \"If enabled and the editor width is too small, the inline view is used.\")\r\n        },\r\n        'diffEditor.renderMarginRevertIcon': {\r\n            type: 'boolean',\r\n            default: diffEditorDefaultOptions.renderMarginRevertIcon,\r\n            description: nls.localize('renderMarginRevertIcon', \"When enabled, the diff editor shows arrows in its glyph margin to revert changes.\")\r\n        },\r\n        'diffEditor.ignoreTrimWhitespace': {\r\n            type: 'boolean',\r\n            default: diffEditorDefaultOptions.ignoreTrimWhitespace,\r\n            description: nls.localize('ignoreTrimWhitespace', \"When enabled, the diff editor ignores changes in leading or trailing whitespace.\")\r\n        },\r\n        'diffEditor.renderIndicators': {\r\n            type: 'boolean',\r\n            default: diffEditorDefaultOptions.renderIndicators,\r\n            description: nls.localize('renderIndicators', \"Controls whether the diff editor shows +/- indicators for added/removed changes.\")\r\n        },\r\n        'diffEditor.codeLens': {\r\n            type: 'boolean',\r\n            default: diffEditorDefaultOptions.diffCodeLens,\r\n            description: nls.localize('codeLens', \"Controls whether the editor shows CodeLens.\")\r\n        },\r\n        'diffEditor.wordWrap': {\r\n            type: 'string',\r\n            enum: ['off', 'on', 'inherit'],\r\n            default: diffEditorDefaultOptions.diffWordWrap,\r\n            markdownEnumDescriptions: [\r\n                nls.localize('wordWrap.off', \"Lines will never wrap.\"),\r\n                nls.localize('wordWrap.on', \"Lines will wrap at the viewport width.\"),\r\n                nls.localize('wordWrap.inherit', \"Lines will wrap according to the {0} setting.\", '`#editor.wordWrap#`'),\r\n            ]\r\n        },\r\n        'diffEditor.diffAlgorithm': {\r\n            type: 'string',\r\n            enum: ['legacy', 'advanced'],\r\n            default: diffEditorDefaultOptions.diffAlgorithm,\r\n            markdownEnumDescriptions: [\r\n                nls.localize('diffAlgorithm.legacy', \"Uses the legacy diffing algorithm.\"),\r\n                nls.localize('diffAlgorithm.advanced', \"Uses the advanced diffing algorithm.\"),\r\n            ],\r\n            tags: ['experimental'],\r\n        },\r\n        'diffEditor.hideUnchangedRegions.enabled': {\r\n            type: 'boolean',\r\n            default: diffEditorDefaultOptions.hideUnchangedRegions.enabled,\r\n            markdownDescription: nls.localize('hideUnchangedRegions.enabled', \"Controls whether the diff editor shows unchanged regions.\"),\r\n        },\r\n        'diffEditor.hideUnchangedRegions.revealLineCount': {\r\n            type: 'integer',\r\n            default: diffEditorDefaultOptions.hideUnchangedRegions.revealLineCount,\r\n            markdownDescription: nls.localize('hideUnchangedRegions.revealLineCount', \"Controls how many lines are used for unchanged regions.\"),\r\n            minimum: 1,\r\n        },\r\n        'diffEditor.hideUnchangedRegions.minimumLineCount': {\r\n            type: 'integer',\r\n            default: diffEditorDefaultOptions.hideUnchangedRegions.minimumLineCount,\r\n            markdownDescription: nls.localize('hideUnchangedRegions.minimumLineCount', \"Controls how many lines are used as a minimum for unchanged regions.\"),\r\n            minimum: 1,\r\n        },\r\n        'diffEditor.hideUnchangedRegions.contextLineCount': {\r\n            type: 'integer',\r\n            default: diffEditorDefaultOptions.hideUnchangedRegions.contextLineCount,\r\n            markdownDescription: nls.localize('hideUnchangedRegions.contextLineCount', \"Controls how many lines are used as context when comparing unchanged regions.\"),\r\n            minimum: 1,\r\n        },\r\n        'diffEditor.experimental.showMoves': {\r\n            type: 'boolean',\r\n            default: diffEditorDefaultOptions.experimental.showMoves,\r\n            markdownDescription: nls.localize('showMoves', \"Controls whether the diff editor should show detected code moves.\")\r\n        },\r\n        'diffEditor.experimental.showEmptyDecorations': {\r\n            type: 'boolean',\r\n            default: diffEditorDefaultOptions.experimental.showEmptyDecorations,\r\n            description: nls.localize('showEmptyDecorations', \"Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.\"),\r\n        }\r\n    }\r\n};\r\nfunction isConfigurationPropertySchema(x) {\r\n    return (typeof x.type !== 'undefined' || typeof x.anyOf !== 'undefined');\r\n}\r\n// Add properties from the Editor Option Registry\r\nfor (const editorOption of editorOptionsRegistry) {\r\n    const schema = editorOption.schema;\r\n    if (typeof schema !== 'undefined') {\r\n        if (isConfigurationPropertySchema(schema)) {\r\n            // This is a single schema contribution\r\n            editorConfiguration.properties[`editor.${editorOption.name}`] = schema;\r\n        }\r\n        else {\r\n            for (const key in schema) {\r\n                if (Object.hasOwnProperty.call(schema, key)) {\r\n                    editorConfiguration.properties[key] = schema[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nlet cachedEditorConfigurationKeys = null;\r\nfunction getEditorConfigurationKeys() {\r\n    if (cachedEditorConfigurationKeys === null) {\r\n        cachedEditorConfigurationKeys = Object.create(null);\r\n        Object.keys(editorConfiguration.properties).forEach((prop) => {\r\n            cachedEditorConfigurationKeys[prop] = true;\r\n        });\r\n    }\r\n    return cachedEditorConfigurationKeys;\r\n}\r\nexport function isEditorConfigurationKey(key) {\r\n    const editorConfigurationKeys = getEditorConfigurationKeys();\r\n    return (editorConfigurationKeys[`editor.${key}`] || false);\r\n}\r\nexport function isDiffEditorConfigurationKey(key) {\r\n    const editorConfigurationKeys = getEditorConfigurationKeys();\r\n    return (editorConfigurationKeys[`diffEditor.${key}`] || false);\r\n}\r\nconst configurationRegistry = Registry.as(Extensions.Configuration);\r\nconfigurationRegistry.registerConfiguration(editorConfiguration);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as arrays from '../../../base/common/arrays.js';\r\nimport { ResourceMap } from '../../../base/common/map.js';\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport * as types from '../../../base/common/types.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { addToValueTree, getConfigurationValue, removeFromValueTree, toValuesTree } from './configuration.js';\r\nimport { Extensions, overrideIdentifiersFromKey, OVERRIDE_PROPERTY_REGEX } from './configurationRegistry.js';\r\nimport { Registry } from '../../registry/common/platform.js';\r\nfunction freeze(data) {\r\n    return Object.isFrozen(data) ? data : objects.deepFreeze(data);\r\n}\r\nexport class ConfigurationModel {\r\n    constructor(_contents = {}, _keys = [], _overrides = [], raw) {\r\n        this._contents = _contents;\r\n        this._keys = _keys;\r\n        this._overrides = _overrides;\r\n        this.raw = raw;\r\n        this.overrideConfigurations = new Map();\r\n    }\r\n    get rawConfiguration() {\r\n        var _a;\r\n        if (!this._rawConfiguration) {\r\n            if ((_a = this.raw) === null || _a === void 0 ? void 0 : _a.length) {\r\n                const rawConfigurationModels = this.raw.map(raw => {\r\n                    if (raw instanceof ConfigurationModel) {\r\n                        return raw;\r\n                    }\r\n                    const parser = new ConfigurationModelParser('');\r\n                    parser.parseRaw(raw);\r\n                    return parser.configurationModel;\r\n                });\r\n                this._rawConfiguration = rawConfigurationModels.reduce((previous, current) => current === previous ? current : previous.merge(current), rawConfigurationModels[0]);\r\n            }\r\n            else {\r\n                // raw is same as current\r\n                this._rawConfiguration = this;\r\n            }\r\n        }\r\n        return this._rawConfiguration;\r\n    }\r\n    get contents() {\r\n        return this._contents;\r\n    }\r\n    get overrides() {\r\n        return this._overrides;\r\n    }\r\n    get keys() {\r\n        return this._keys;\r\n    }\r\n    isEmpty() {\r\n        return this._keys.length === 0 && Object.keys(this._contents).length === 0 && this._overrides.length === 0;\r\n    }\r\n    getValue(section) {\r\n        return section ? getConfigurationValue(this.contents, section) : this.contents;\r\n    }\r\n    inspect(section, overrideIdentifier) {\r\n        const value = this.rawConfiguration.getValue(section);\r\n        const override = overrideIdentifier ? this.rawConfiguration.getOverrideValue(section, overrideIdentifier) : undefined;\r\n        const merged = overrideIdentifier ? this.rawConfiguration.override(overrideIdentifier).getValue(section) : value;\r\n        return { value, override, merged };\r\n    }\r\n    getOverrideValue(section, overrideIdentifier) {\r\n        const overrideContents = this.getContentsForOverrideIdentifer(overrideIdentifier);\r\n        return overrideContents\r\n            ? section ? getConfigurationValue(overrideContents, section) : overrideContents\r\n            : undefined;\r\n    }\r\n    override(identifier) {\r\n        let overrideConfigurationModel = this.overrideConfigurations.get(identifier);\r\n        if (!overrideConfigurationModel) {\r\n            overrideConfigurationModel = this.createOverrideConfigurationModel(identifier);\r\n            this.overrideConfigurations.set(identifier, overrideConfigurationModel);\r\n        }\r\n        return overrideConfigurationModel;\r\n    }\r\n    merge(...others) {\r\n        var _a, _b;\r\n        const contents = objects.deepClone(this.contents);\r\n        const overrides = objects.deepClone(this.overrides);\r\n        const keys = [...this.keys];\r\n        const raws = ((_a = this.raw) === null || _a === void 0 ? void 0 : _a.length) ? [...this.raw] : [this];\r\n        for (const other of others) {\r\n            raws.push(...(((_b = other.raw) === null || _b === void 0 ? void 0 : _b.length) ? other.raw : [other]));\r\n            if (other.isEmpty()) {\r\n                continue;\r\n            }\r\n            this.mergeContents(contents, other.contents);\r\n            for (const otherOverride of other.overrides) {\r\n                const [override] = overrides.filter(o => arrays.equals(o.identifiers, otherOverride.identifiers));\r\n                if (override) {\r\n                    this.mergeContents(override.contents, otherOverride.contents);\r\n                    override.keys.push(...otherOverride.keys);\r\n                    override.keys = arrays.distinct(override.keys);\r\n                }\r\n                else {\r\n                    overrides.push(objects.deepClone(otherOverride));\r\n                }\r\n            }\r\n            for (const key of other.keys) {\r\n                if (keys.indexOf(key) === -1) {\r\n                    keys.push(key);\r\n                }\r\n            }\r\n        }\r\n        return new ConfigurationModel(contents, keys, overrides, raws.every(raw => raw instanceof ConfigurationModel) ? undefined : raws);\r\n    }\r\n    createOverrideConfigurationModel(identifier) {\r\n        const overrideContents = this.getContentsForOverrideIdentifer(identifier);\r\n        if (!overrideContents || typeof overrideContents !== 'object' || !Object.keys(overrideContents).length) {\r\n            // If there are no valid overrides, return self\r\n            return this;\r\n        }\r\n        const contents = {};\r\n        for (const key of arrays.distinct([...Object.keys(this.contents), ...Object.keys(overrideContents)])) {\r\n            let contentsForKey = this.contents[key];\r\n            const overrideContentsForKey = overrideContents[key];\r\n            // If there are override contents for the key, clone and merge otherwise use base contents\r\n            if (overrideContentsForKey) {\r\n                // Clone and merge only if base contents and override contents are of type object otherwise just override\r\n                if (typeof contentsForKey === 'object' && typeof overrideContentsForKey === 'object') {\r\n                    contentsForKey = objects.deepClone(contentsForKey);\r\n                    this.mergeContents(contentsForKey, overrideContentsForKey);\r\n                }\r\n                else {\r\n                    contentsForKey = overrideContentsForKey;\r\n                }\r\n            }\r\n            contents[key] = contentsForKey;\r\n        }\r\n        return new ConfigurationModel(contents, this.keys, this.overrides);\r\n    }\r\n    mergeContents(source, target) {\r\n        for (const key of Object.keys(target)) {\r\n            if (key in source) {\r\n                if (types.isObject(source[key]) && types.isObject(target[key])) {\r\n                    this.mergeContents(source[key], target[key]);\r\n                    continue;\r\n                }\r\n            }\r\n            source[key] = objects.deepClone(target[key]);\r\n        }\r\n    }\r\n    getContentsForOverrideIdentifer(identifier) {\r\n        let contentsForIdentifierOnly = null;\r\n        let contents = null;\r\n        const mergeContents = (contentsToMerge) => {\r\n            if (contentsToMerge) {\r\n                if (contents) {\r\n                    this.mergeContents(contents, contentsToMerge);\r\n                }\r\n                else {\r\n                    contents = objects.deepClone(contentsToMerge);\r\n                }\r\n            }\r\n        };\r\n        for (const override of this.overrides) {\r\n            if (override.identifiers.length === 1 && override.identifiers[0] === identifier) {\r\n                contentsForIdentifierOnly = override.contents;\r\n            }\r\n            else if (override.identifiers.includes(identifier)) {\r\n                mergeContents(override.contents);\r\n            }\r\n        }\r\n        // Merge contents of the identifier only at the end to take precedence.\r\n        mergeContents(contentsForIdentifierOnly);\r\n        return contents;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            contents: this.contents,\r\n            overrides: this.overrides,\r\n            keys: this.keys\r\n        };\r\n    }\r\n    // Update methods\r\n    addValue(key, value) {\r\n        this.updateValue(key, value, true);\r\n    }\r\n    setValue(key, value) {\r\n        this.updateValue(key, value, false);\r\n    }\r\n    removeValue(key) {\r\n        const index = this.keys.indexOf(key);\r\n        if (index === -1) {\r\n            return;\r\n        }\r\n        this.keys.splice(index, 1);\r\n        removeFromValueTree(this.contents, key);\r\n        if (OVERRIDE_PROPERTY_REGEX.test(key)) {\r\n            this.overrides.splice(this.overrides.findIndex(o => arrays.equals(o.identifiers, overrideIdentifiersFromKey(key))), 1);\r\n        }\r\n    }\r\n    updateValue(key, value, add) {\r\n        addToValueTree(this.contents, key, value, e => console.error(e));\r\n        add = add || this.keys.indexOf(key) === -1;\r\n        if (add) {\r\n            this.keys.push(key);\r\n        }\r\n        if (OVERRIDE_PROPERTY_REGEX.test(key)) {\r\n            this.overrides.push({\r\n                identifiers: overrideIdentifiersFromKey(key),\r\n                keys: Object.keys(this.contents[key]),\r\n                contents: toValuesTree(this.contents[key], message => console.error(message)),\r\n            });\r\n        }\r\n    }\r\n}\r\nexport class ConfigurationModelParser {\r\n    constructor(_name) {\r\n        this._name = _name;\r\n        this._raw = null;\r\n        this._configurationModel = null;\r\n        this._restrictedConfigurations = [];\r\n    }\r\n    get configurationModel() {\r\n        return this._configurationModel || new ConfigurationModel();\r\n    }\r\n    parseRaw(raw, options) {\r\n        this._raw = raw;\r\n        const { contents, keys, overrides, restricted, hasExcludedProperties } = this.doParseRaw(raw, options);\r\n        this._configurationModel = new ConfigurationModel(contents, keys, overrides, hasExcludedProperties ? [raw] : undefined /* raw has not changed */);\r\n        this._restrictedConfigurations = restricted || [];\r\n    }\r\n    doParseRaw(raw, options) {\r\n        const configurationProperties = Registry.as(Extensions.Configuration).getConfigurationProperties();\r\n        const filtered = this.filter(raw, configurationProperties, true, options);\r\n        raw = filtered.raw;\r\n        const contents = toValuesTree(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\r\n        const keys = Object.keys(raw);\r\n        const overrides = this.toOverrides(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\r\n        return { contents, keys, overrides, restricted: filtered.restricted, hasExcludedProperties: filtered.hasExcludedProperties };\r\n    }\r\n    filter(properties, configurationProperties, filterOverriddenProperties, options) {\r\n        var _a, _b, _c;\r\n        let hasExcludedProperties = false;\r\n        if (!(options === null || options === void 0 ? void 0 : options.scopes) && !(options === null || options === void 0 ? void 0 : options.skipRestricted) && !((_a = options === null || options === void 0 ? void 0 : options.exclude) === null || _a === void 0 ? void 0 : _a.length)) {\r\n            return { raw: properties, restricted: [], hasExcludedProperties };\r\n        }\r\n        const raw = {};\r\n        const restricted = [];\r\n        for (const key in properties) {\r\n            if (OVERRIDE_PROPERTY_REGEX.test(key) && filterOverriddenProperties) {\r\n                const result = this.filter(properties[key], configurationProperties, false, options);\r\n                raw[key] = result.raw;\r\n                hasExcludedProperties = hasExcludedProperties || result.hasExcludedProperties;\r\n                restricted.push(...result.restricted);\r\n            }\r\n            else {\r\n                const propertySchema = configurationProperties[key];\r\n                const scope = propertySchema ? typeof propertySchema.scope !== 'undefined' ? propertySchema.scope : 3 /* ConfigurationScope.WINDOW */ : undefined;\r\n                if (propertySchema === null || propertySchema === void 0 ? void 0 : propertySchema.restricted) {\r\n                    restricted.push(key);\r\n                }\r\n                if (!((_b = options.exclude) === null || _b === void 0 ? void 0 : _b.includes(key)) /* Check exclude */\r\n                    && (((_c = options.include) === null || _c === void 0 ? void 0 : _c.includes(key) /* Check include */)\r\n                        || ((scope === undefined || options.scopes === undefined || options.scopes.includes(scope)) /* Check scopes */\r\n                            && !(options.skipRestricted && (propertySchema === null || propertySchema === void 0 ? void 0 : propertySchema.restricted))))) /* Check restricted */ {\r\n                    raw[key] = properties[key];\r\n                }\r\n                else {\r\n                    hasExcludedProperties = true;\r\n                }\r\n            }\r\n        }\r\n        return { raw, restricted, hasExcludedProperties };\r\n    }\r\n    toOverrides(raw, conflictReporter) {\r\n        const overrides = [];\r\n        for (const key of Object.keys(raw)) {\r\n            if (OVERRIDE_PROPERTY_REGEX.test(key)) {\r\n                const overrideRaw = {};\r\n                for (const keyInOverrideRaw in raw[key]) {\r\n                    overrideRaw[keyInOverrideRaw] = raw[key][keyInOverrideRaw];\r\n                }\r\n                overrides.push({\r\n                    identifiers: overrideIdentifiersFromKey(key),\r\n                    keys: Object.keys(overrideRaw),\r\n                    contents: toValuesTree(overrideRaw, conflictReporter)\r\n                });\r\n            }\r\n        }\r\n        return overrides;\r\n    }\r\n}\r\nclass ConfigurationInspectValue {\r\n    constructor(key, overrides, _value, overrideIdentifiers, defaultConfiguration, policyConfiguration, applicationConfiguration, userConfiguration, localUserConfiguration, remoteUserConfiguration, workspaceConfiguration, folderConfigurationModel, memoryConfigurationModel) {\r\n        this.key = key;\r\n        this.overrides = overrides;\r\n        this._value = _value;\r\n        this.overrideIdentifiers = overrideIdentifiers;\r\n        this.defaultConfiguration = defaultConfiguration;\r\n        this.policyConfiguration = policyConfiguration;\r\n        this.applicationConfiguration = applicationConfiguration;\r\n        this.userConfiguration = userConfiguration;\r\n        this.localUserConfiguration = localUserConfiguration;\r\n        this.remoteUserConfiguration = remoteUserConfiguration;\r\n        this.workspaceConfiguration = workspaceConfiguration;\r\n        this.folderConfigurationModel = folderConfigurationModel;\r\n        this.memoryConfigurationModel = memoryConfigurationModel;\r\n    }\r\n    inspect(model, section, overrideIdentifier) {\r\n        const inspectValue = model.inspect(section, overrideIdentifier);\r\n        return {\r\n            get value() { return freeze(inspectValue.value); },\r\n            get override() { return freeze(inspectValue.override); },\r\n            get merged() { return freeze(inspectValue.merged); }\r\n        };\r\n    }\r\n    get userInspectValue() {\r\n        if (!this._userInspectValue) {\r\n            this._userInspectValue = this.inspect(this.userConfiguration, this.key, this.overrides.overrideIdentifier);\r\n        }\r\n        return this._userInspectValue;\r\n    }\r\n    get user() {\r\n        return this.userInspectValue.value !== undefined || this.userInspectValue.override !== undefined ? { value: this.userInspectValue.value, override: this.userInspectValue.override } : undefined;\r\n    }\r\n}\r\nexport class Configuration {\r\n    constructor(_defaultConfiguration, _policyConfiguration, _applicationConfiguration, _localUserConfiguration, _remoteUserConfiguration = new ConfigurationModel(), _workspaceConfiguration = new ConfigurationModel(), _folderConfigurations = new ResourceMap(), _memoryConfiguration = new ConfigurationModel(), _memoryConfigurationByResource = new ResourceMap()) {\r\n        this._defaultConfiguration = _defaultConfiguration;\r\n        this._policyConfiguration = _policyConfiguration;\r\n        this._applicationConfiguration = _applicationConfiguration;\r\n        this._localUserConfiguration = _localUserConfiguration;\r\n        this._remoteUserConfiguration = _remoteUserConfiguration;\r\n        this._workspaceConfiguration = _workspaceConfiguration;\r\n        this._folderConfigurations = _folderConfigurations;\r\n        this._memoryConfiguration = _memoryConfiguration;\r\n        this._memoryConfigurationByResource = _memoryConfigurationByResource;\r\n        this._workspaceConsolidatedConfiguration = null;\r\n        this._foldersConsolidatedConfigurations = new ResourceMap();\r\n        this._userConfiguration = null;\r\n    }\r\n    getValue(section, overrides, workspace) {\r\n        const consolidateConfigurationModel = this.getConsolidatedConfigurationModel(section, overrides, workspace);\r\n        return consolidateConfigurationModel.getValue(section);\r\n    }\r\n    updateValue(key, value, overrides = {}) {\r\n        let memoryConfiguration;\r\n        if (overrides.resource) {\r\n            memoryConfiguration = this._memoryConfigurationByResource.get(overrides.resource);\r\n            if (!memoryConfiguration) {\r\n                memoryConfiguration = new ConfigurationModel();\r\n                this._memoryConfigurationByResource.set(overrides.resource, memoryConfiguration);\r\n            }\r\n        }\r\n        else {\r\n            memoryConfiguration = this._memoryConfiguration;\r\n        }\r\n        if (value === undefined) {\r\n            memoryConfiguration.removeValue(key);\r\n        }\r\n        else {\r\n            memoryConfiguration.setValue(key, value);\r\n        }\r\n        if (!overrides.resource) {\r\n            this._workspaceConsolidatedConfiguration = null;\r\n        }\r\n    }\r\n    inspect(key, overrides, workspace) {\r\n        const consolidateConfigurationModel = this.getConsolidatedConfigurationModel(key, overrides, workspace);\r\n        const folderConfigurationModel = this.getFolderConfigurationModelForResource(overrides.resource, workspace);\r\n        const memoryConfigurationModel = overrides.resource ? this._memoryConfigurationByResource.get(overrides.resource) || this._memoryConfiguration : this._memoryConfiguration;\r\n        const overrideIdentifiers = new Set();\r\n        for (const override of consolidateConfigurationModel.overrides) {\r\n            for (const overrideIdentifier of override.identifiers) {\r\n                if (consolidateConfigurationModel.getOverrideValue(key, overrideIdentifier) !== undefined) {\r\n                    overrideIdentifiers.add(overrideIdentifier);\r\n                }\r\n            }\r\n        }\r\n        return new ConfigurationInspectValue(key, overrides, consolidateConfigurationModel.getValue(key), overrideIdentifiers.size ? [...overrideIdentifiers] : undefined, this._defaultConfiguration, this._policyConfiguration.isEmpty() ? undefined : this._policyConfiguration, this.applicationConfiguration.isEmpty() ? undefined : this.applicationConfiguration, this.userConfiguration, this.localUserConfiguration, this.remoteUserConfiguration, workspace ? this._workspaceConfiguration : undefined, folderConfigurationModel ? folderConfigurationModel : undefined, memoryConfigurationModel);\r\n    }\r\n    get applicationConfiguration() {\r\n        return this._applicationConfiguration;\r\n    }\r\n    get userConfiguration() {\r\n        if (!this._userConfiguration) {\r\n            this._userConfiguration = this._remoteUserConfiguration.isEmpty() ? this._localUserConfiguration : this._localUserConfiguration.merge(this._remoteUserConfiguration);\r\n        }\r\n        return this._userConfiguration;\r\n    }\r\n    get localUserConfiguration() {\r\n        return this._localUserConfiguration;\r\n    }\r\n    get remoteUserConfiguration() {\r\n        return this._remoteUserConfiguration;\r\n    }\r\n    getConsolidatedConfigurationModel(section, overrides, workspace) {\r\n        let configurationModel = this.getConsolidatedConfigurationModelForResource(overrides, workspace);\r\n        if (overrides.overrideIdentifier) {\r\n            configurationModel = configurationModel.override(overrides.overrideIdentifier);\r\n        }\r\n        if (!this._policyConfiguration.isEmpty() && this._policyConfiguration.getValue(section) !== undefined) {\r\n            configurationModel = configurationModel.merge(this._policyConfiguration);\r\n        }\r\n        return configurationModel;\r\n    }\r\n    getConsolidatedConfigurationModelForResource({ resource }, workspace) {\r\n        let consolidateConfiguration = this.getWorkspaceConsolidatedConfiguration();\r\n        if (workspace && resource) {\r\n            const root = workspace.getFolder(resource);\r\n            if (root) {\r\n                consolidateConfiguration = this.getFolderConsolidatedConfiguration(root.uri) || consolidateConfiguration;\r\n            }\r\n            const memoryConfigurationForResource = this._memoryConfigurationByResource.get(resource);\r\n            if (memoryConfigurationForResource) {\r\n                consolidateConfiguration = consolidateConfiguration.merge(memoryConfigurationForResource);\r\n            }\r\n        }\r\n        return consolidateConfiguration;\r\n    }\r\n    getWorkspaceConsolidatedConfiguration() {\r\n        if (!this._workspaceConsolidatedConfiguration) {\r\n            this._workspaceConsolidatedConfiguration = this._defaultConfiguration.merge(this.applicationConfiguration, this.userConfiguration, this._workspaceConfiguration, this._memoryConfiguration);\r\n        }\r\n        return this._workspaceConsolidatedConfiguration;\r\n    }\r\n    getFolderConsolidatedConfiguration(folder) {\r\n        let folderConsolidatedConfiguration = this._foldersConsolidatedConfigurations.get(folder);\r\n        if (!folderConsolidatedConfiguration) {\r\n            const workspaceConsolidateConfiguration = this.getWorkspaceConsolidatedConfiguration();\r\n            const folderConfiguration = this._folderConfigurations.get(folder);\r\n            if (folderConfiguration) {\r\n                folderConsolidatedConfiguration = workspaceConsolidateConfiguration.merge(folderConfiguration);\r\n                this._foldersConsolidatedConfigurations.set(folder, folderConsolidatedConfiguration);\r\n            }\r\n            else {\r\n                folderConsolidatedConfiguration = workspaceConsolidateConfiguration;\r\n            }\r\n        }\r\n        return folderConsolidatedConfiguration;\r\n    }\r\n    getFolderConfigurationModelForResource(resource, workspace) {\r\n        if (workspace && resource) {\r\n            const root = workspace.getFolder(resource);\r\n            if (root) {\r\n                return this._folderConfigurations.get(root.uri);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    toData() {\r\n        return {\r\n            defaults: {\r\n                contents: this._defaultConfiguration.contents,\r\n                overrides: this._defaultConfiguration.overrides,\r\n                keys: this._defaultConfiguration.keys\r\n            },\r\n            policy: {\r\n                contents: this._policyConfiguration.contents,\r\n                overrides: this._policyConfiguration.overrides,\r\n                keys: this._policyConfiguration.keys\r\n            },\r\n            application: {\r\n                contents: this.applicationConfiguration.contents,\r\n                overrides: this.applicationConfiguration.overrides,\r\n                keys: this.applicationConfiguration.keys\r\n            },\r\n            user: {\r\n                contents: this.userConfiguration.contents,\r\n                overrides: this.userConfiguration.overrides,\r\n                keys: this.userConfiguration.keys\r\n            },\r\n            workspace: {\r\n                contents: this._workspaceConfiguration.contents,\r\n                overrides: this._workspaceConfiguration.overrides,\r\n                keys: this._workspaceConfiguration.keys\r\n            },\r\n            folders: [...this._folderConfigurations.keys()].reduce((result, folder) => {\r\n                const { contents, overrides, keys } = this._folderConfigurations.get(folder);\r\n                result.push([folder, { contents, overrides, keys }]);\r\n                return result;\r\n            }, [])\r\n        };\r\n    }\r\n    static parse(data) {\r\n        const defaultConfiguration = this.parseConfigurationModel(data.defaults);\r\n        const policyConfiguration = this.parseConfigurationModel(data.policy);\r\n        const applicationConfiguration = this.parseConfigurationModel(data.application);\r\n        const userConfiguration = this.parseConfigurationModel(data.user);\r\n        const workspaceConfiguration = this.parseConfigurationModel(data.workspace);\r\n        const folders = data.folders.reduce((result, value) => {\r\n            result.set(URI.revive(value[0]), this.parseConfigurationModel(value[1]));\r\n            return result;\r\n        }, new ResourceMap());\r\n        return new Configuration(defaultConfiguration, policyConfiguration, applicationConfiguration, userConfiguration, new ConfigurationModel(), workspaceConfiguration, folders, new ConfigurationModel(), new ResourceMap());\r\n    }\r\n    static parseConfigurationModel(model) {\r\n        return new ConfigurationModel(model.contents, model.keys, model.overrides);\r\n    }\r\n}\r\nexport class ConfigurationChangeEvent {\r\n    constructor(change, previous, currentConfiguraiton, currentWorkspace) {\r\n        this.change = change;\r\n        this.previous = previous;\r\n        this.currentConfiguraiton = currentConfiguraiton;\r\n        this.currentWorkspace = currentWorkspace;\r\n        this._marker = '\\n';\r\n        this._markerCode1 = this._marker.charCodeAt(0);\r\n        this._markerCode2 = '.'.charCodeAt(0);\r\n        this.affectedKeys = new Set();\r\n        this._previousConfiguration = undefined;\r\n        for (const key of change.keys) {\r\n            this.affectedKeys.add(key);\r\n        }\r\n        for (const [, keys] of change.overrides) {\r\n            for (const key of keys) {\r\n                this.affectedKeys.add(key);\r\n            }\r\n        }\r\n        // Example: '\\nfoo.bar\\nabc.def\\n'\r\n        this._affectsConfigStr = this._marker;\r\n        for (const key of this.affectedKeys) {\r\n            this._affectsConfigStr += key + this._marker;\r\n        }\r\n    }\r\n    get previousConfiguration() {\r\n        if (!this._previousConfiguration && this.previous) {\r\n            this._previousConfiguration = Configuration.parse(this.previous.data);\r\n        }\r\n        return this._previousConfiguration;\r\n    }\r\n    affectsConfiguration(section, overrides) {\r\n        var _a;\r\n        // we have one large string with all keys that have changed. we pad (marker) the section\r\n        // and check that either find it padded or before a segment character\r\n        const needle = this._marker + section;\r\n        const idx = this._affectsConfigStr.indexOf(needle);\r\n        if (idx < 0) {\r\n            // NOT: (marker + section)\r\n            return false;\r\n        }\r\n        const pos = idx + needle.length;\r\n        if (pos >= this._affectsConfigStr.length) {\r\n            return false;\r\n        }\r\n        const code = this._affectsConfigStr.charCodeAt(pos);\r\n        if (code !== this._markerCode1 && code !== this._markerCode2) {\r\n            // NOT: section + (marker | segment)\r\n            return false;\r\n        }\r\n        if (overrides) {\r\n            const value1 = this.previousConfiguration ? this.previousConfiguration.getValue(section, overrides, (_a = this.previous) === null || _a === void 0 ? void 0 : _a.workspace) : undefined;\r\n            const value2 = this.currentConfiguraiton.getValue(section, overrides, this.currentWorkspace);\r\n            return !objects.equals(value1, value2);\r\n        }\r\n        return true;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { implies, expressionsAreEqualWithConstantSubstitution } from '../../contextkey/common/contextkey.js';\r\n// util definitions to make working with the above types easier within this module:\r\nexport const NoMatchingKb = { kind: 0 /* ResultKind.NoMatchingKb */ };\r\nconst MoreChordsNeeded = { kind: 1 /* ResultKind.MoreChordsNeeded */ };\r\nfunction KbFound(commandId, commandArgs, isBubble) {\r\n    return { kind: 2 /* ResultKind.KbFound */, commandId, commandArgs, isBubble };\r\n}\r\n//#endregion\r\n/**\r\n * Stores mappings from keybindings to commands and from commands to keybindings.\r\n * Given a sequence of chords, `resolve`s which keybinding it matches\r\n */\r\nexport class KeybindingResolver {\r\n    constructor(\r\n    /** built-in and extension-provided keybindings */\r\n    defaultKeybindings, \r\n    /** user's keybindings */\r\n    overrides, log) {\r\n        var _a;\r\n        this._log = log;\r\n        this._defaultKeybindings = defaultKeybindings;\r\n        this._defaultBoundCommands = new Map();\r\n        for (const defaultKeybinding of defaultKeybindings) {\r\n            const command = defaultKeybinding.command;\r\n            if (command && command.charAt(0) !== '-') {\r\n                this._defaultBoundCommands.set(command, true);\r\n            }\r\n        }\r\n        this._map = new Map();\r\n        this._lookupMap = new Map();\r\n        this._keybindings = KeybindingResolver.handleRemovals([].concat(defaultKeybindings).concat(overrides));\r\n        for (let i = 0, len = this._keybindings.length; i < len; i++) {\r\n            const k = this._keybindings[i];\r\n            if (k.chords.length === 0) {\r\n                // unbound\r\n                continue;\r\n            }\r\n            // substitute with constants that are registered after startup - https://github.com/microsoft/vscode/issues/174218#issuecomment-1437972127\r\n            const when = (_a = k.when) === null || _a === void 0 ? void 0 : _a.substituteConstants();\r\n            if (when && when.type === 0 /* ContextKeyExprType.False */) {\r\n                // when condition is false\r\n                continue;\r\n            }\r\n            this._addKeyPress(k.chords[0], k);\r\n        }\r\n    }\r\n    static _isTargetedForRemoval(defaultKb, keypress, when) {\r\n        if (keypress) {\r\n            for (let i = 0; i < keypress.length; i++) {\r\n                if (keypress[i] !== defaultKb.chords[i]) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        // `true` means always, as does `undefined`\r\n        // so we will treat `true` === `undefined`\r\n        if (when && when.type !== 1 /* ContextKeyExprType.True */) {\r\n            if (!defaultKb.when) {\r\n                return false;\r\n            }\r\n            if (!expressionsAreEqualWithConstantSubstitution(when, defaultKb.when)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Looks for rules containing \"-commandId\" and removes them.\r\n     */\r\n    static handleRemovals(rules) {\r\n        // Do a first pass and construct a hash-map for removals\r\n        const removals = new Map();\r\n        for (let i = 0, len = rules.length; i < len; i++) {\r\n            const rule = rules[i];\r\n            if (rule.command && rule.command.charAt(0) === '-') {\r\n                const command = rule.command.substring(1);\r\n                if (!removals.has(command)) {\r\n                    removals.set(command, [rule]);\r\n                }\r\n                else {\r\n                    removals.get(command).push(rule);\r\n                }\r\n            }\r\n        }\r\n        if (removals.size === 0) {\r\n            // There are no removals\r\n            return rules;\r\n        }\r\n        // Do a second pass and keep only non-removed keybindings\r\n        const result = [];\r\n        for (let i = 0, len = rules.length; i < len; i++) {\r\n            const rule = rules[i];\r\n            if (!rule.command || rule.command.length === 0) {\r\n                result.push(rule);\r\n                continue;\r\n            }\r\n            if (rule.command.charAt(0) === '-') {\r\n                continue;\r\n            }\r\n            const commandRemovals = removals.get(rule.command);\r\n            if (!commandRemovals || !rule.isDefault) {\r\n                result.push(rule);\r\n                continue;\r\n            }\r\n            let isRemoved = false;\r\n            for (const commandRemoval of commandRemovals) {\r\n                const when = commandRemoval.when;\r\n                if (this._isTargetedForRemoval(rule, commandRemoval.chords, when)) {\r\n                    isRemoved = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!isRemoved) {\r\n                result.push(rule);\r\n                continue;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    _addKeyPress(keypress, item) {\r\n        const conflicts = this._map.get(keypress);\r\n        if (typeof conflicts === 'undefined') {\r\n            // There is no conflict so far\r\n            this._map.set(keypress, [item]);\r\n            this._addToLookupMap(item);\r\n            return;\r\n        }\r\n        for (let i = conflicts.length - 1; i >= 0; i--) {\r\n            const conflict = conflicts[i];\r\n            if (conflict.command === item.command) {\r\n                continue;\r\n            }\r\n            // Test if the shorter keybinding is a prefix of the longer one.\r\n            // If the shorter keybinding is a prefix, it effectively will shadow the longer one and is considered a conflict.\r\n            let isShorterKbPrefix = true;\r\n            for (let i = 1; i < conflict.chords.length && i < item.chords.length; i++) {\r\n                if (conflict.chords[i] !== item.chords[i]) {\r\n                    // The ith step does not conflict\r\n                    isShorterKbPrefix = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (!isShorterKbPrefix) {\r\n                continue;\r\n            }\r\n            if (KeybindingResolver.whenIsEntirelyIncluded(conflict.when, item.when)) {\r\n                // `item` completely overwrites `conflict`\r\n                // Remove conflict from the lookupMap\r\n                this._removeFromLookupMap(conflict);\r\n            }\r\n        }\r\n        conflicts.push(item);\r\n        this._addToLookupMap(item);\r\n    }\r\n    _addToLookupMap(item) {\r\n        if (!item.command) {\r\n            return;\r\n        }\r\n        let arr = this._lookupMap.get(item.command);\r\n        if (typeof arr === 'undefined') {\r\n            arr = [item];\r\n            this._lookupMap.set(item.command, arr);\r\n        }\r\n        else {\r\n            arr.push(item);\r\n        }\r\n    }\r\n    _removeFromLookupMap(item) {\r\n        if (!item.command) {\r\n            return;\r\n        }\r\n        const arr = this._lookupMap.get(item.command);\r\n        if (typeof arr === 'undefined') {\r\n            return;\r\n        }\r\n        for (let i = 0, len = arr.length; i < len; i++) {\r\n            if (arr[i] === item) {\r\n                arr.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Returns true if it is provable `a` implies `b`.\r\n     */\r\n    static whenIsEntirelyIncluded(a, b) {\r\n        if (!b || b.type === 1 /* ContextKeyExprType.True */) {\r\n            return true;\r\n        }\r\n        if (!a || a.type === 1 /* ContextKeyExprType.True */) {\r\n            return false;\r\n        }\r\n        return implies(a, b);\r\n    }\r\n    getKeybindings() {\r\n        return this._keybindings;\r\n    }\r\n    lookupPrimaryKeybinding(commandId, context) {\r\n        const items = this._lookupMap.get(commandId);\r\n        if (typeof items === 'undefined' || items.length === 0) {\r\n            return null;\r\n        }\r\n        if (items.length === 1) {\r\n            return items[0];\r\n        }\r\n        for (let i = items.length - 1; i >= 0; i--) {\r\n            const item = items[i];\r\n            if (context.contextMatchesRules(item.when)) {\r\n                return item;\r\n            }\r\n        }\r\n        return items[items.length - 1];\r\n    }\r\n    /**\r\n     * Looks up a keybinding trigged as a result of pressing a sequence of chords - `[...currentChords, keypress]`\r\n     *\r\n     * Example: resolving 3 chords pressed sequentially - `cmd+k cmd+p cmd+i`:\r\n     * \t`currentChords = [ 'cmd+k' , 'cmd+p' ]` and `keypress = `cmd+i` - last pressed chord\r\n     */\r\n    resolve(context, currentChords, keypress) {\r\n        const pressedChords = [...currentChords, keypress];\r\n        this._log(`| Resolving ${pressedChords}`);\r\n        const kbCandidates = this._map.get(pressedChords[0]);\r\n        if (kbCandidates === undefined) {\r\n            // No bindings with such 0-th chord\r\n            this._log(`\\\\ No keybinding entries.`);\r\n            return NoMatchingKb;\r\n        }\r\n        let lookupMap = null;\r\n        if (pressedChords.length < 2) {\r\n            lookupMap = kbCandidates;\r\n        }\r\n        else {\r\n            // Fetch all chord bindings for `currentChords`\r\n            lookupMap = [];\r\n            for (let i = 0, len = kbCandidates.length; i < len; i++) {\r\n                const candidate = kbCandidates[i];\r\n                if (pressedChords.length > candidate.chords.length) { // # of pressed chords can't be less than # of chords in a keybinding to invoke\r\n                    continue;\r\n                }\r\n                let prefixMatches = true;\r\n                for (let i = 1; i < pressedChords.length; i++) {\r\n                    if (candidate.chords[i] !== pressedChords[i]) {\r\n                        prefixMatches = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (prefixMatches) {\r\n                    lookupMap.push(candidate);\r\n                }\r\n            }\r\n        }\r\n        // check there's a keybinding with a matching when clause\r\n        const result = this._findCommand(context, lookupMap);\r\n        if (!result) {\r\n            this._log(`\\\\ From ${lookupMap.length} keybinding entries, no when clauses matched the context.`);\r\n            return NoMatchingKb;\r\n        }\r\n        // check we got all chords necessary to be sure a particular keybinding needs to be invoked\r\n        if (pressedChords.length < result.chords.length) {\r\n            // The chord sequence is not complete\r\n            this._log(`\\\\ From ${lookupMap.length} keybinding entries, awaiting ${result.chords.length - pressedChords.length} more chord(s), when: ${printWhenExplanation(result.when)}, source: ${printSourceExplanation(result)}.`);\r\n            return MoreChordsNeeded;\r\n        }\r\n        this._log(`\\\\ From ${lookupMap.length} keybinding entries, matched ${result.command}, when: ${printWhenExplanation(result.when)}, source: ${printSourceExplanation(result)}.`);\r\n        return KbFound(result.command, result.commandArgs, result.bubble);\r\n    }\r\n    _findCommand(context, matches) {\r\n        for (let i = matches.length - 1; i >= 0; i--) {\r\n            const k = matches[i];\r\n            if (!KeybindingResolver._contextMatchesRules(context, k.when)) {\r\n                continue;\r\n            }\r\n            return k;\r\n        }\r\n        return null;\r\n    }\r\n    static _contextMatchesRules(context, rules) {\r\n        if (!rules) {\r\n            return true;\r\n        }\r\n        return rules.evaluate(context);\r\n    }\r\n}\r\nfunction printWhenExplanation(when) {\r\n    if (!when) {\r\n        return `no when condition`;\r\n    }\r\n    return `${when.serialize()}`;\r\n}\r\nfunction printSourceExplanation(kb) {\r\n    return (kb.extensionId\r\n        ? (kb.isBuiltinExtension ? `built-in extension ${kb.extensionId}` : `user extension ${kb.extensionId}`)\r\n        : (kb.isDefault ? `built-in` : `user`));\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { IntervalTimer, TimeoutTimer } from '../../../base/common/async.js';\r\nimport { illegalState } from '../../../base/common/errors.js';\r\nimport { Emitter, Event } from '../../../base/common/event.js';\r\nimport { IME } from '../../../base/common/ime.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { NoMatchingKb } from './keybindingResolver.js';\r\nconst HIGH_FREQ_COMMANDS = /^(cursor|delete|undo|redo|tab|editor\\.action\\.clipboard)/;\r\nexport class AbstractKeybindingService extends Disposable {\r\n    get onDidUpdateKeybindings() {\r\n        return this._onDidUpdateKeybindings ? this._onDidUpdateKeybindings.event : Event.None; // Sinon stubbing walks properties on prototype\r\n    }\r\n    get inChordMode() {\r\n        return this._currentChords.length > 0;\r\n    }\r\n    constructor(_contextKeyService, _commandService, _telemetryService, _notificationService, _logService) {\r\n        super();\r\n        this._contextKeyService = _contextKeyService;\r\n        this._commandService = _commandService;\r\n        this._telemetryService = _telemetryService;\r\n        this._notificationService = _notificationService;\r\n        this._logService = _logService;\r\n        this._onDidUpdateKeybindings = this._register(new Emitter());\r\n        this._currentChords = [];\r\n        this._currentChordChecker = new IntervalTimer();\r\n        this._currentChordStatusMessage = null;\r\n        this._ignoreSingleModifiers = KeybindingModifierSet.EMPTY;\r\n        this._currentSingleModifier = null;\r\n        this._currentSingleModifierClearTimeout = new TimeoutTimer();\r\n        this._logging = false;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    _log(str) {\r\n        if (this._logging) {\r\n            this._logService.info(`[KeybindingService]: ${str}`);\r\n        }\r\n    }\r\n    getKeybindings() {\r\n        return this._getResolver().getKeybindings();\r\n    }\r\n    lookupKeybinding(commandId, context) {\r\n        const result = this._getResolver().lookupPrimaryKeybinding(commandId, context || this._contextKeyService);\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        return result.resolvedKeybinding;\r\n    }\r\n    dispatchEvent(e, target) {\r\n        return this._dispatch(e, target);\r\n    }\r\n    // TODO@ulugbekna: update namings to align with `_doDispatch`\r\n    // TODO@ulugbekna: this fn doesn't seem to take into account single-modifier keybindings, eg `shift shift`\r\n    softDispatch(e, target) {\r\n        this._log(`/ Soft dispatching keyboard event`);\r\n        const keybinding = this.resolveKeyboardEvent(e);\r\n        if (keybinding.hasMultipleChords()) {\r\n            console.warn('keyboard event should not be mapped to multiple chords');\r\n            return NoMatchingKb;\r\n        }\r\n        const [firstChord,] = keybinding.getDispatchChords();\r\n        if (firstChord === null) {\r\n            // cannot be dispatched, probably only modifier keys\r\n            this._log(`\\\\ Keyboard event cannot be dispatched`);\r\n            return NoMatchingKb;\r\n        }\r\n        const contextValue = this._contextKeyService.getContext(target);\r\n        const currentChords = this._currentChords.map((({ keypress }) => keypress));\r\n        return this._getResolver().resolve(contextValue, currentChords, firstChord);\r\n    }\r\n    _scheduleLeaveChordMode() {\r\n        const chordLastInteractedTime = Date.now();\r\n        this._currentChordChecker.cancelAndSet(() => {\r\n            if (!this._documentHasFocus()) {\r\n                // Focus has been lost => leave chord mode\r\n                this._leaveChordMode();\r\n                return;\r\n            }\r\n            if (Date.now() - chordLastInteractedTime > 5000) {\r\n                // 5 seconds elapsed => leave chord mode\r\n                this._leaveChordMode();\r\n            }\r\n        }, 500);\r\n    }\r\n    _expectAnotherChord(firstChord, keypressLabel) {\r\n        this._currentChords.push({ keypress: firstChord, label: keypressLabel });\r\n        switch (this._currentChords.length) {\r\n            case 0:\r\n                throw illegalState('impossible');\r\n            case 1:\r\n                // TODO@ulugbekna: revise this message and the one below (at least, fix terminology)\r\n                this._currentChordStatusMessage = this._notificationService.status(nls.localize('first.chord', \"({0}) was pressed. Waiting for second key of chord...\", keypressLabel));\r\n                break;\r\n            default: {\r\n                const fullKeypressLabel = this._currentChords.map(({ label }) => label).join(', ');\r\n                this._currentChordStatusMessage = this._notificationService.status(nls.localize('next.chord', \"({0}) was pressed. Waiting for next key of chord...\", fullKeypressLabel));\r\n            }\r\n        }\r\n        this._scheduleLeaveChordMode();\r\n        if (IME.enabled) {\r\n            IME.disable();\r\n        }\r\n    }\r\n    _leaveChordMode() {\r\n        if (this._currentChordStatusMessage) {\r\n            this._currentChordStatusMessage.dispose();\r\n            this._currentChordStatusMessage = null;\r\n        }\r\n        this._currentChordChecker.cancel();\r\n        this._currentChords = [];\r\n        IME.enable();\r\n    }\r\n    _dispatch(e, target) {\r\n        return this._doDispatch(this.resolveKeyboardEvent(e), target, /*isSingleModiferChord*/ false);\r\n    }\r\n    _singleModifierDispatch(e, target) {\r\n        const keybinding = this.resolveKeyboardEvent(e);\r\n        const [singleModifier,] = keybinding.getSingleModifierDispatchChords();\r\n        if (singleModifier) {\r\n            if (this._ignoreSingleModifiers.has(singleModifier)) {\r\n                this._log(`+ Ignoring single modifier ${singleModifier} due to it being pressed together with other keys.`);\r\n                this._ignoreSingleModifiers = KeybindingModifierSet.EMPTY;\r\n                this._currentSingleModifierClearTimeout.cancel();\r\n                this._currentSingleModifier = null;\r\n                return false;\r\n            }\r\n            this._ignoreSingleModifiers = KeybindingModifierSet.EMPTY;\r\n            if (this._currentSingleModifier === null) {\r\n                // we have a valid `singleModifier`, store it for the next keyup, but clear it in 300ms\r\n                this._log(`+ Storing single modifier for possible chord ${singleModifier}.`);\r\n                this._currentSingleModifier = singleModifier;\r\n                this._currentSingleModifierClearTimeout.cancelAndSet(() => {\r\n                    this._log(`+ Clearing single modifier due to 300ms elapsed.`);\r\n                    this._currentSingleModifier = null;\r\n                }, 300);\r\n                return false;\r\n            }\r\n            if (singleModifier === this._currentSingleModifier) {\r\n                // bingo!\r\n                this._log(`/ Dispatching single modifier chord ${singleModifier} ${singleModifier}`);\r\n                this._currentSingleModifierClearTimeout.cancel();\r\n                this._currentSingleModifier = null;\r\n                return this._doDispatch(keybinding, target, /*isSingleModiferChord*/ true);\r\n            }\r\n            this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${singleModifier}`);\r\n            this._currentSingleModifierClearTimeout.cancel();\r\n            this._currentSingleModifier = null;\r\n            return false;\r\n        }\r\n        // When pressing a modifier and holding it pressed with any other modifier or key combination,\r\n        // the pressed modifiers should no longer be considered for single modifier dispatch.\r\n        const [firstChord,] = keybinding.getChords();\r\n        this._ignoreSingleModifiers = new KeybindingModifierSet(firstChord);\r\n        if (this._currentSingleModifier !== null) {\r\n            this._log(`+ Clearing single modifier due to other key up.`);\r\n        }\r\n        this._currentSingleModifierClearTimeout.cancel();\r\n        this._currentSingleModifier = null;\r\n        return false;\r\n    }\r\n    _doDispatch(userKeypress, target, isSingleModiferChord = false) {\r\n        var _a;\r\n        let shouldPreventDefault = false;\r\n        if (userKeypress.hasMultipleChords()) { // warn - because user can press a single chord at a time\r\n            console.warn('Unexpected keyboard event mapped to multiple chords');\r\n            return false;\r\n        }\r\n        let userPressedChord = null;\r\n        let currentChords = null;\r\n        if (isSingleModiferChord) {\r\n            // The keybinding is the second keypress of a single modifier chord, e.g. \"shift shift\".\r\n            // A single modifier can only occur when the same modifier is pressed in short sequence,\r\n            // hence we disregard `_currentChord` and use the same modifier instead.\r\n            const [dispatchKeyname,] = userKeypress.getSingleModifierDispatchChords();\r\n            userPressedChord = dispatchKeyname;\r\n            currentChords = dispatchKeyname ? [dispatchKeyname] : []; // TODO@ulugbekna: in the `else` case we assign an empty array - make sure `resolve` can handle an empty array well\r\n        }\r\n        else {\r\n            [userPressedChord,] = userKeypress.getDispatchChords();\r\n            currentChords = this._currentChords.map(({ keypress }) => keypress);\r\n        }\r\n        if (userPressedChord === null) {\r\n            this._log(`\\\\ Keyboard event cannot be dispatched in keydown phase.`);\r\n            // cannot be dispatched, probably only modifier keys\r\n            return shouldPreventDefault;\r\n        }\r\n        const contextValue = this._contextKeyService.getContext(target);\r\n        const keypressLabel = userKeypress.getLabel();\r\n        const resolveResult = this._getResolver().resolve(contextValue, currentChords, userPressedChord);\r\n        switch (resolveResult.kind) {\r\n            case 0 /* ResultKind.NoMatchingKb */: {\r\n                this._logService.trace('KeybindingService#dispatch', keypressLabel, `[ No matching keybinding ]`);\r\n                if (this.inChordMode) {\r\n                    const currentChordsLabel = this._currentChords.map(({ label }) => label).join(', ');\r\n                    this._log(`+ Leaving multi-chord mode: Nothing bound to \"${currentChordsLabel}, ${keypressLabel}\".`);\r\n                    this._notificationService.status(nls.localize('missing.chord', \"The key combination ({0}, {1}) is not a command.\", currentChordsLabel, keypressLabel), { hideAfter: 10 * 1000 /* 10s */ });\r\n                    this._leaveChordMode();\r\n                    shouldPreventDefault = true;\r\n                }\r\n                return shouldPreventDefault;\r\n            }\r\n            case 1 /* ResultKind.MoreChordsNeeded */: {\r\n                this._logService.trace('KeybindingService#dispatch', keypressLabel, `[ Several keybindings match - more chords needed ]`);\r\n                shouldPreventDefault = true;\r\n                this._expectAnotherChord(userPressedChord, keypressLabel);\r\n                this._log(this._currentChords.length === 1 ? `+ Entering multi-chord mode...` : `+ Continuing multi-chord mode...`);\r\n                return shouldPreventDefault;\r\n            }\r\n            case 2 /* ResultKind.KbFound */: {\r\n                this._logService.trace('KeybindingService#dispatch', keypressLabel, `[ Will dispatch command ${resolveResult.commandId} ]`);\r\n                if (resolveResult.commandId === null || resolveResult.commandId === '') {\r\n                    if (this.inChordMode) {\r\n                        const currentChordsLabel = this._currentChords.map(({ label }) => label).join(', ');\r\n                        this._log(`+ Leaving chord mode: Nothing bound to \"${currentChordsLabel}, ${keypressLabel}\".`);\r\n                        this._notificationService.status(nls.localize('missing.chord', \"The key combination ({0}, {1}) is not a command.\", currentChordsLabel, keypressLabel), { hideAfter: 10 * 1000 /* 10s */ });\r\n                        this._leaveChordMode();\r\n                        shouldPreventDefault = true;\r\n                    }\r\n                }\r\n                else {\r\n                    if (this.inChordMode) {\r\n                        this._leaveChordMode();\r\n                    }\r\n                    if (!resolveResult.isBubble) {\r\n                        shouldPreventDefault = true;\r\n                    }\r\n                    this._log(`+ Invoking command ${resolveResult.commandId}.`);\r\n                    if (typeof resolveResult.commandArgs === 'undefined') {\r\n                        this._commandService.executeCommand(resolveResult.commandId).then(undefined, err => this._notificationService.warn(err));\r\n                    }\r\n                    else {\r\n                        this._commandService.executeCommand(resolveResult.commandId, resolveResult.commandArgs).then(undefined, err => this._notificationService.warn(err));\r\n                    }\r\n                    if (!HIGH_FREQ_COMMANDS.test(resolveResult.commandId)) {\r\n                        this._telemetryService.publicLog2('workbenchActionExecuted', { id: resolveResult.commandId, from: 'keybinding', detail: (_a = userKeypress.getUserSettingsLabel()) !== null && _a !== void 0 ? _a : undefined });\r\n                    }\r\n                }\r\n                return shouldPreventDefault;\r\n            }\r\n        }\r\n    }\r\n    mightProducePrintableCharacter(event) {\r\n        if (event.ctrlKey || event.metaKey) {\r\n            // ignore ctrl/cmd-combination but not shift/alt-combinatios\r\n            return false;\r\n        }\r\n        // weak check for certain ranges. this is properly implemented in a subclass\r\n        // with access to the KeyboardMapperFactory.\r\n        if ((event.keyCode >= 31 /* KeyCode.KeyA */ && event.keyCode <= 56 /* KeyCode.KeyZ */)\r\n            || (event.keyCode >= 21 /* KeyCode.Digit0 */ && event.keyCode <= 30 /* KeyCode.Digit9 */)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass KeybindingModifierSet {\r\n    constructor(source) {\r\n        this._ctrlKey = source ? source.ctrlKey : false;\r\n        this._shiftKey = source ? source.shiftKey : false;\r\n        this._altKey = source ? source.altKey : false;\r\n        this._metaKey = source ? source.metaKey : false;\r\n    }\r\n    has(modifier) {\r\n        switch (modifier) {\r\n            case 'ctrl': return this._ctrlKey;\r\n            case 'shift': return this._shiftKey;\r\n            case 'alt': return this._altKey;\r\n            case 'meta': return this._metaKey;\r\n        }\r\n    }\r\n}\r\nKeybindingModifierSet.EMPTY = new KeybindingModifierSet(null);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport class ResolvedKeybindingItem {\r\n    constructor(resolvedKeybinding, command, commandArgs, when, isDefault, extensionId, isBuiltinExtension) {\r\n        this._resolvedKeybindingItemBrand = undefined;\r\n        this.resolvedKeybinding = resolvedKeybinding;\r\n        this.chords = resolvedKeybinding ? toEmptyArrayIfContainsNull(resolvedKeybinding.getDispatchChords()) : [];\r\n        if (resolvedKeybinding && this.chords.length === 0) {\r\n            // handle possible single modifier chord keybindings\r\n            this.chords = toEmptyArrayIfContainsNull(resolvedKeybinding.getSingleModifierDispatchChords());\r\n        }\r\n        this.bubble = (command ? command.charCodeAt(0) === 94 /* CharCode.Caret */ : false);\r\n        this.command = this.bubble ? command.substr(1) : command;\r\n        this.commandArgs = commandArgs;\r\n        this.when = when;\r\n        this.isDefault = isDefault;\r\n        this.extensionId = extensionId;\r\n        this.isBuiltinExtension = isBuiltinExtension;\r\n    }\r\n}\r\nexport function toEmptyArrayIfContainsNull(arr) {\r\n    const result = [];\r\n    for (let i = 0, len = arr.length; i < len; i++) {\r\n        const element = arr[i];\r\n        if (!element) {\r\n            return [];\r\n        }\r\n        result.push(element);\r\n    }\r\n    return result;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { illegalArgument } from '../../../base/common/errors.js';\r\nimport { AriaLabelProvider, ElectronAcceleratorLabelProvider, UILabelProvider, UserSettingsLabelProvider } from '../../../base/common/keybindingLabels.js';\r\nimport { ResolvedKeybinding, ResolvedChord } from '../../../base/common/keybindings.js';\r\nexport class BaseResolvedKeybinding extends ResolvedKeybinding {\r\n    constructor(os, chords) {\r\n        super();\r\n        if (chords.length === 0) {\r\n            throw illegalArgument(`chords`);\r\n        }\r\n        this._os = os;\r\n        this._chords = chords;\r\n    }\r\n    getLabel() {\r\n        return UILabelProvider.toLabel(this._os, this._chords, (keybinding) => this._getLabel(keybinding));\r\n    }\r\n    getAriaLabel() {\r\n        return AriaLabelProvider.toLabel(this._os, this._chords, (keybinding) => this._getAriaLabel(keybinding));\r\n    }\r\n    getElectronAccelerator() {\r\n        if (this._chords.length > 1) {\r\n            // [Electron Accelerators] Electron cannot handle chords\r\n            return null;\r\n        }\r\n        if (this._chords[0].isDuplicateModifierCase()) {\r\n            // [Electron Accelerators] Electron cannot handle modifier only keybindings\r\n            // e.g. \"shift shift\"\r\n            return null;\r\n        }\r\n        return ElectronAcceleratorLabelProvider.toLabel(this._os, this._chords, (keybinding) => this._getElectronAccelerator(keybinding));\r\n    }\r\n    getUserSettingsLabel() {\r\n        return UserSettingsLabelProvider.toLabel(this._os, this._chords, (keybinding) => this._getUserSettingsLabel(keybinding));\r\n    }\r\n    hasMultipleChords() {\r\n        return (this._chords.length > 1);\r\n    }\r\n    getChords() {\r\n        return this._chords.map((keybinding) => this._getChord(keybinding));\r\n    }\r\n    _getChord(keybinding) {\r\n        return new ResolvedChord(keybinding.ctrlKey, keybinding.shiftKey, keybinding.altKey, keybinding.metaKey, this._getLabel(keybinding), this._getAriaLabel(keybinding));\r\n    }\r\n    getDispatchChords() {\r\n        return this._chords.map((keybinding) => this._getChordDispatch(keybinding));\r\n    }\r\n    getSingleModifierDispatchChords() {\r\n        return this._chords.map((keybinding) => this._getSingleModifierChordDispatch(keybinding));\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { KeyCodeUtils, IMMUTABLE_CODE_TO_KEY_CODE } from '../../../base/common/keyCodes.js';\r\nimport { KeyCodeChord } from '../../../base/common/keybindings.js';\r\nimport { BaseResolvedKeybinding } from './baseResolvedKeybinding.js';\r\nimport { toEmptyArrayIfContainsNull } from './resolvedKeybindingItem.js';\r\n/**\r\n * Do not instantiate. Use KeybindingService to get a ResolvedKeybinding seeded with information about the current kb layout.\r\n */\r\nexport class USLayoutResolvedKeybinding extends BaseResolvedKeybinding {\r\n    constructor(chords, os) {\r\n        super(os, chords);\r\n    }\r\n    _keyCodeToUILabel(keyCode) {\r\n        if (this._os === 2 /* OperatingSystem.Macintosh */) {\r\n            switch (keyCode) {\r\n                case 15 /* KeyCode.LeftArrow */:\r\n                    return '';\r\n                case 16 /* KeyCode.UpArrow */:\r\n                    return '';\r\n                case 17 /* KeyCode.RightArrow */:\r\n                    return '';\r\n                case 18 /* KeyCode.DownArrow */:\r\n                    return '';\r\n            }\r\n        }\r\n        return KeyCodeUtils.toString(keyCode);\r\n    }\r\n    _getLabel(chord) {\r\n        if (chord.isDuplicateModifierCase()) {\r\n            return '';\r\n        }\r\n        return this._keyCodeToUILabel(chord.keyCode);\r\n    }\r\n    _getAriaLabel(chord) {\r\n        if (chord.isDuplicateModifierCase()) {\r\n            return '';\r\n        }\r\n        return KeyCodeUtils.toString(chord.keyCode);\r\n    }\r\n    _getElectronAccelerator(chord) {\r\n        return KeyCodeUtils.toElectronAccelerator(chord.keyCode);\r\n    }\r\n    _getUserSettingsLabel(chord) {\r\n        if (chord.isDuplicateModifierCase()) {\r\n            return '';\r\n        }\r\n        const result = KeyCodeUtils.toUserSettingsUS(chord.keyCode);\r\n        return (result ? result.toLowerCase() : result);\r\n    }\r\n    _getChordDispatch(chord) {\r\n        return USLayoutResolvedKeybinding.getDispatchStr(chord);\r\n    }\r\n    static getDispatchStr(chord) {\r\n        if (chord.isModifierKey()) {\r\n            return null;\r\n        }\r\n        let result = '';\r\n        if (chord.ctrlKey) {\r\n            result += 'ctrl+';\r\n        }\r\n        if (chord.shiftKey) {\r\n            result += 'shift+';\r\n        }\r\n        if (chord.altKey) {\r\n            result += 'alt+';\r\n        }\r\n        if (chord.metaKey) {\r\n            result += 'meta+';\r\n        }\r\n        result += KeyCodeUtils.toString(chord.keyCode);\r\n        return result;\r\n    }\r\n    _getSingleModifierChordDispatch(keybinding) {\r\n        if (keybinding.keyCode === 5 /* KeyCode.Ctrl */ && !keybinding.shiftKey && !keybinding.altKey && !keybinding.metaKey) {\r\n            return 'ctrl';\r\n        }\r\n        if (keybinding.keyCode === 4 /* KeyCode.Shift */ && !keybinding.ctrlKey && !keybinding.altKey && !keybinding.metaKey) {\r\n            return 'shift';\r\n        }\r\n        if (keybinding.keyCode === 6 /* KeyCode.Alt */ && !keybinding.ctrlKey && !keybinding.shiftKey && !keybinding.metaKey) {\r\n            return 'alt';\r\n        }\r\n        if (keybinding.keyCode === 57 /* KeyCode.Meta */ && !keybinding.ctrlKey && !keybinding.shiftKey && !keybinding.altKey) {\r\n            return 'meta';\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * *NOTE*: Check return value for `KeyCode.Unknown`.\r\n     */\r\n    static _scanCodeToKeyCode(scanCode) {\r\n        const immutableKeyCode = IMMUTABLE_CODE_TO_KEY_CODE[scanCode];\r\n        if (immutableKeyCode !== -1 /* KeyCode.DependsOnKbLayout */) {\r\n            return immutableKeyCode;\r\n        }\r\n        switch (scanCode) {\r\n            case 10 /* ScanCode.KeyA */: return 31 /* KeyCode.KeyA */;\r\n            case 11 /* ScanCode.KeyB */: return 32 /* KeyCode.KeyB */;\r\n            case 12 /* ScanCode.KeyC */: return 33 /* KeyCode.KeyC */;\r\n            case 13 /* ScanCode.KeyD */: return 34 /* KeyCode.KeyD */;\r\n            case 14 /* ScanCode.KeyE */: return 35 /* KeyCode.KeyE */;\r\n            case 15 /* ScanCode.KeyF */: return 36 /* KeyCode.KeyF */;\r\n            case 16 /* ScanCode.KeyG */: return 37 /* KeyCode.KeyG */;\r\n            case 17 /* ScanCode.KeyH */: return 38 /* KeyCode.KeyH */;\r\n            case 18 /* ScanCode.KeyI */: return 39 /* KeyCode.KeyI */;\r\n            case 19 /* ScanCode.KeyJ */: return 40 /* KeyCode.KeyJ */;\r\n            case 20 /* ScanCode.KeyK */: return 41 /* KeyCode.KeyK */;\r\n            case 21 /* ScanCode.KeyL */: return 42 /* KeyCode.KeyL */;\r\n            case 22 /* ScanCode.KeyM */: return 43 /* KeyCode.KeyM */;\r\n            case 23 /* ScanCode.KeyN */: return 44 /* KeyCode.KeyN */;\r\n            case 24 /* ScanCode.KeyO */: return 45 /* KeyCode.KeyO */;\r\n            case 25 /* ScanCode.KeyP */: return 46 /* KeyCode.KeyP */;\r\n            case 26 /* ScanCode.KeyQ */: return 47 /* KeyCode.KeyQ */;\r\n            case 27 /* ScanCode.KeyR */: return 48 /* KeyCode.KeyR */;\r\n            case 28 /* ScanCode.KeyS */: return 49 /* KeyCode.KeyS */;\r\n            case 29 /* ScanCode.KeyT */: return 50 /* KeyCode.KeyT */;\r\n            case 30 /* ScanCode.KeyU */: return 51 /* KeyCode.KeyU */;\r\n            case 31 /* ScanCode.KeyV */: return 52 /* KeyCode.KeyV */;\r\n            case 32 /* ScanCode.KeyW */: return 53 /* KeyCode.KeyW */;\r\n            case 33 /* ScanCode.KeyX */: return 54 /* KeyCode.KeyX */;\r\n            case 34 /* ScanCode.KeyY */: return 55 /* KeyCode.KeyY */;\r\n            case 35 /* ScanCode.KeyZ */: return 56 /* KeyCode.KeyZ */;\r\n            case 36 /* ScanCode.Digit1 */: return 22 /* KeyCode.Digit1 */;\r\n            case 37 /* ScanCode.Digit2 */: return 23 /* KeyCode.Digit2 */;\r\n            case 38 /* ScanCode.Digit3 */: return 24 /* KeyCode.Digit3 */;\r\n            case 39 /* ScanCode.Digit4 */: return 25 /* KeyCode.Digit4 */;\r\n            case 40 /* ScanCode.Digit5 */: return 26 /* KeyCode.Digit5 */;\r\n            case 41 /* ScanCode.Digit6 */: return 27 /* KeyCode.Digit6 */;\r\n            case 42 /* ScanCode.Digit7 */: return 28 /* KeyCode.Digit7 */;\r\n            case 43 /* ScanCode.Digit8 */: return 29 /* KeyCode.Digit8 */;\r\n            case 44 /* ScanCode.Digit9 */: return 30 /* KeyCode.Digit9 */;\r\n            case 45 /* ScanCode.Digit0 */: return 21 /* KeyCode.Digit0 */;\r\n            case 51 /* ScanCode.Minus */: return 88 /* KeyCode.Minus */;\r\n            case 52 /* ScanCode.Equal */: return 86 /* KeyCode.Equal */;\r\n            case 53 /* ScanCode.BracketLeft */: return 92 /* KeyCode.BracketLeft */;\r\n            case 54 /* ScanCode.BracketRight */: return 94 /* KeyCode.BracketRight */;\r\n            case 55 /* ScanCode.Backslash */: return 93 /* KeyCode.Backslash */;\r\n            case 56 /* ScanCode.IntlHash */: return 0 /* KeyCode.Unknown */; // missing\r\n            case 57 /* ScanCode.Semicolon */: return 85 /* KeyCode.Semicolon */;\r\n            case 58 /* ScanCode.Quote */: return 95 /* KeyCode.Quote */;\r\n            case 59 /* ScanCode.Backquote */: return 91 /* KeyCode.Backquote */;\r\n            case 60 /* ScanCode.Comma */: return 87 /* KeyCode.Comma */;\r\n            case 61 /* ScanCode.Period */: return 89 /* KeyCode.Period */;\r\n            case 62 /* ScanCode.Slash */: return 90 /* KeyCode.Slash */;\r\n            case 106 /* ScanCode.IntlBackslash */: return 97 /* KeyCode.IntlBackslash */;\r\n        }\r\n        return 0 /* KeyCode.Unknown */;\r\n    }\r\n    static _toKeyCodeChord(chord) {\r\n        if (!chord) {\r\n            return null;\r\n        }\r\n        if (chord instanceof KeyCodeChord) {\r\n            return chord;\r\n        }\r\n        const keyCode = this._scanCodeToKeyCode(chord.scanCode);\r\n        if (keyCode === 0 /* KeyCode.Unknown */) {\r\n            return null;\r\n        }\r\n        return new KeyCodeChord(chord.ctrlKey, chord.shiftKey, chord.altKey, chord.metaKey, keyCode);\r\n    }\r\n    static resolveKeybinding(keybinding, os) {\r\n        const chords = toEmptyArrayIfContainsNull(keybinding.chords.map(chord => this._toKeyCodeChord(chord)));\r\n        if (chords.length > 0) {\r\n            return [new USLayoutResolvedKeybinding(chords, os)];\r\n        }\r\n        return [];\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as nls from '../../nls.js';\r\nexport var InspectTokensNLS;\r\n(function (InspectTokensNLS) {\r\n    InspectTokensNLS.inspectTokensAction = nls.localize('inspectTokens', \"Developer: Inspect Tokens\");\r\n})(InspectTokensNLS || (InspectTokensNLS = {}));\r\nexport var GoToLineNLS;\r\n(function (GoToLineNLS) {\r\n    GoToLineNLS.gotoLineActionLabel = nls.localize('gotoLineActionLabel', \"Go to Line/Column...\");\r\n})(GoToLineNLS || (GoToLineNLS = {}));\r\nexport var QuickHelpNLS;\r\n(function (QuickHelpNLS) {\r\n    QuickHelpNLS.helpQuickAccessActionLabel = nls.localize('helpQuickAccess', \"Show all Quick Access Providers\");\r\n})(QuickHelpNLS || (QuickHelpNLS = {}));\r\nexport var QuickCommandNLS;\r\n(function (QuickCommandNLS) {\r\n    QuickCommandNLS.quickCommandActionLabel = nls.localize('quickCommandActionLabel', \"Command Palette\");\r\n    QuickCommandNLS.quickCommandHelp = nls.localize('quickCommandActionHelp', \"Show And Run Commands\");\r\n})(QuickCommandNLS || (QuickCommandNLS = {}));\r\nexport var QuickOutlineNLS;\r\n(function (QuickOutlineNLS) {\r\n    QuickOutlineNLS.quickOutlineActionLabel = nls.localize('quickOutlineActionLabel', \"Go to Symbol...\");\r\n    QuickOutlineNLS.quickOutlineByCategoryActionLabel = nls.localize('quickOutlineByCategoryActionLabel', \"Go to Symbol by Category...\");\r\n})(QuickOutlineNLS || (QuickOutlineNLS = {}));\r\nexport var StandaloneCodeEditorNLS;\r\n(function (StandaloneCodeEditorNLS) {\r\n    StandaloneCodeEditorNLS.editorViewAccessibleLabel = nls.localize('editorViewAccessibleLabel', \"Editor content\");\r\n    StandaloneCodeEditorNLS.accessibilityHelpMessage = nls.localize('accessibilityHelpMessage', \"Press Alt+F1 for Accessibility Options.\");\r\n})(StandaloneCodeEditorNLS || (StandaloneCodeEditorNLS = {}));\r\nexport var ToggleHighContrastNLS;\r\n(function (ToggleHighContrastNLS) {\r\n    ToggleHighContrastNLS.toggleHighContrast = nls.localize('toggleHighContrast', \"Toggle High Contrast Theme\");\r\n})(ToggleHighContrastNLS || (ToggleHighContrastNLS = {}));\r\nexport var StandaloneServicesNLS;\r\n(function (StandaloneServicesNLS) {\r\n    StandaloneServicesNLS.bulkEditServiceSummary = nls.localize('bulkEditServiceSummary', \"Made {0} edits in {1} files\");\r\n})(StandaloneServicesNLS || (StandaloneServicesNLS = {}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\r\nexport const IWorkspaceTrustManagementService = createDecorator('workspaceTrustManagementService');\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { BrowserFeatures } from '../../canIUse.js';\r\nimport * as DOM from '../../dom.js';\r\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\r\nimport * as platform from '../../../common/platform.js';\r\nimport { Range } from '../../../common/range.js';\r\nimport './contextview.css';\r\nexport function isAnchor(obj) {\r\n    const anchor = obj;\r\n    return !!anchor && typeof anchor.x === 'number' && typeof anchor.y === 'number';\r\n}\r\nexport var LayoutAnchorMode;\r\n(function (LayoutAnchorMode) {\r\n    LayoutAnchorMode[LayoutAnchorMode[\"AVOID\"] = 0] = \"AVOID\";\r\n    LayoutAnchorMode[LayoutAnchorMode[\"ALIGN\"] = 1] = \"ALIGN\";\r\n})(LayoutAnchorMode || (LayoutAnchorMode = {}));\r\n/**\r\n * Lays out a one dimensional view next to an anchor in a viewport.\r\n *\r\n * @returns The view offset within the viewport.\r\n */\r\nexport function layout(viewportSize, viewSize, anchor) {\r\n    const layoutAfterAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset : anchor.offset + anchor.size;\r\n    const layoutBeforeAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset + anchor.size : anchor.offset;\r\n    if (anchor.position === 0 /* LayoutAnchorPosition.Before */) {\r\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\r\n            return layoutAfterAnchorBoundary; // happy case, lay it out after the anchor\r\n        }\r\n        if (viewSize <= layoutBeforeAnchorBoundary) {\r\n            return layoutBeforeAnchorBoundary - viewSize; // ok case, lay it out before the anchor\r\n        }\r\n        return Math.max(viewportSize - viewSize, 0); // sad case, lay it over the anchor\r\n    }\r\n    else {\r\n        if (viewSize <= layoutBeforeAnchorBoundary) {\r\n            return layoutBeforeAnchorBoundary - viewSize; // happy case, lay it out before the anchor\r\n        }\r\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\r\n            return layoutAfterAnchorBoundary; // ok case, lay it out after the anchor\r\n        }\r\n        return 0; // sad case, lay it over the anchor\r\n    }\r\n}\r\nexport class ContextView extends Disposable {\r\n    constructor(container, domPosition) {\r\n        super();\r\n        this.container = null;\r\n        this.useFixedPosition = false;\r\n        this.useShadowDOM = false;\r\n        this.delegate = null;\r\n        this.toDisposeOnClean = Disposable.None;\r\n        this.toDisposeOnSetContainer = Disposable.None;\r\n        this.shadowRoot = null;\r\n        this.shadowRootHostElement = null;\r\n        this.view = DOM.$('.context-view');\r\n        DOM.hide(this.view);\r\n        this.setContainer(container, domPosition);\r\n        this._register(toDisposable(() => this.setContainer(null, 1 /* ContextViewDOMPosition.ABSOLUTE */)));\r\n    }\r\n    setContainer(container, domPosition) {\r\n        var _a;\r\n        this.useFixedPosition = domPosition !== 1 /* ContextViewDOMPosition.ABSOLUTE */;\r\n        const usedShadowDOM = this.useShadowDOM;\r\n        this.useShadowDOM = domPosition === 3 /* ContextViewDOMPosition.FIXED_SHADOW */;\r\n        if (container === this.container && usedShadowDOM !== this.useShadowDOM) {\r\n            return; // container is the same and now shadow DOM usage has changed\r\n        }\r\n        if (this.container) {\r\n            this.toDisposeOnSetContainer.dispose();\r\n            if (this.shadowRoot) {\r\n                this.shadowRoot.removeChild(this.view);\r\n                this.shadowRoot = null;\r\n                (_a = this.shadowRootHostElement) === null || _a === void 0 ? void 0 : _a.remove();\r\n                this.shadowRootHostElement = null;\r\n            }\r\n            else {\r\n                this.container.removeChild(this.view);\r\n            }\r\n            this.container = null;\r\n        }\r\n        if (container) {\r\n            this.container = container;\r\n            if (this.useShadowDOM) {\r\n                this.shadowRootHostElement = DOM.$('.shadow-root-host');\r\n                this.container.appendChild(this.shadowRootHostElement);\r\n                this.shadowRoot = this.shadowRootHostElement.attachShadow({ mode: 'open' });\r\n                const style = document.createElement('style');\r\n                style.textContent = SHADOW_ROOT_CSS;\r\n                this.shadowRoot.appendChild(style);\r\n                this.shadowRoot.appendChild(this.view);\r\n                this.shadowRoot.appendChild(DOM.$('slot'));\r\n            }\r\n            else {\r\n                this.container.appendChild(this.view);\r\n            }\r\n            const toDisposeOnSetContainer = new DisposableStore();\r\n            ContextView.BUBBLE_UP_EVENTS.forEach(event => {\r\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\r\n                    this.onDOMEvent(e, false);\r\n                }));\r\n            });\r\n            ContextView.BUBBLE_DOWN_EVENTS.forEach(event => {\r\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\r\n                    this.onDOMEvent(e, true);\r\n                }, true));\r\n            });\r\n            this.toDisposeOnSetContainer = toDisposeOnSetContainer;\r\n        }\r\n    }\r\n    show(delegate) {\r\n        var _a, _b;\r\n        if (this.isVisible()) {\r\n            this.hide();\r\n        }\r\n        // Show static box\r\n        DOM.clearNode(this.view);\r\n        this.view.className = 'context-view';\r\n        this.view.style.top = '0px';\r\n        this.view.style.left = '0px';\r\n        this.view.style.zIndex = '2575';\r\n        this.view.style.position = this.useFixedPosition ? 'fixed' : 'absolute';\r\n        DOM.show(this.view);\r\n        // Render content\r\n        this.toDisposeOnClean = delegate.render(this.view) || Disposable.None;\r\n        // Set active delegate\r\n        this.delegate = delegate;\r\n        // Layout\r\n        this.doLayout();\r\n        // Focus\r\n        (_b = (_a = this.delegate).focus) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n    }\r\n    getViewElement() {\r\n        return this.view;\r\n    }\r\n    layout() {\r\n        if (!this.isVisible()) {\r\n            return;\r\n        }\r\n        if (this.delegate.canRelayout === false && !(platform.isIOS && BrowserFeatures.pointerEvents)) {\r\n            this.hide();\r\n            return;\r\n        }\r\n        if (this.delegate.layout) {\r\n            this.delegate.layout();\r\n        }\r\n        this.doLayout();\r\n    }\r\n    doLayout() {\r\n        // Check that we still have a delegate - this.delegate.layout may have hidden\r\n        if (!this.isVisible()) {\r\n            return;\r\n        }\r\n        // Get anchor\r\n        const anchor = this.delegate.getAnchor();\r\n        // Compute around\r\n        let around;\r\n        // Get the element's position and size (to anchor the view)\r\n        if (anchor instanceof HTMLElement) {\r\n            const elementPosition = DOM.getDomNodePagePosition(anchor);\r\n            // In areas where zoom is applied to the element or its ancestors, we need to adjust the size of the element\r\n            // e.g. The title bar has counter zoom behavior meaning it applies the inverse of zoom level.\r\n            // Window Zoom Level: 1.5, Title Bar Zoom: 1/1.5, Size Multiplier: 1.5\r\n            const zoom = DOM.getDomNodeZoomLevel(anchor);\r\n            around = {\r\n                top: elementPosition.top * zoom,\r\n                left: elementPosition.left * zoom,\r\n                width: elementPosition.width * zoom,\r\n                height: elementPosition.height * zoom\r\n            };\r\n        }\r\n        else if (isAnchor(anchor)) {\r\n            around = {\r\n                top: anchor.y,\r\n                left: anchor.x,\r\n                width: anchor.width || 1,\r\n                height: anchor.height || 2\r\n            };\r\n        }\r\n        else {\r\n            around = {\r\n                top: anchor.posy,\r\n                left: anchor.posx,\r\n                // We are about to position the context view where the mouse\r\n                // cursor is. To prevent the view being exactly under the mouse\r\n                // when showing and thus potentially triggering an action within,\r\n                // we treat the mouse location like a small sized block element.\r\n                width: 2,\r\n                height: 2\r\n            };\r\n        }\r\n        const viewSizeWidth = DOM.getTotalWidth(this.view);\r\n        const viewSizeHeight = DOM.getTotalHeight(this.view);\r\n        const anchorPosition = this.delegate.anchorPosition || 0 /* AnchorPosition.BELOW */;\r\n        const anchorAlignment = this.delegate.anchorAlignment || 0 /* AnchorAlignment.LEFT */;\r\n        const anchorAxisAlignment = this.delegate.anchorAxisAlignment || 0 /* AnchorAxisAlignment.VERTICAL */;\r\n        let top;\r\n        let left;\r\n        const activeWindow = DOM.getActiveWindow();\r\n        if (anchorAxisAlignment === 0 /* AnchorAxisAlignment.VERTICAL */) {\r\n            const verticalAnchor = { offset: around.top - activeWindow.pageYOffset, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\r\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\r\n            top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\r\n            // if view intersects vertically with anchor,  we must avoid the anchor\r\n            if (Range.intersects({ start: top, end: top + viewSizeHeight }, { start: verticalAnchor.offset, end: verticalAnchor.offset + verticalAnchor.size })) {\r\n                horizontalAnchor.mode = LayoutAnchorMode.AVOID;\r\n            }\r\n            left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\r\n        }\r\n        else {\r\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\r\n            const verticalAnchor = { offset: around.top, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\r\n            left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\r\n            // if view intersects horizontally with anchor, we must avoid the anchor\r\n            if (Range.intersects({ start: left, end: left + viewSizeWidth }, { start: horizontalAnchor.offset, end: horizontalAnchor.offset + horizontalAnchor.size })) {\r\n                verticalAnchor.mode = LayoutAnchorMode.AVOID;\r\n            }\r\n            top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\r\n        }\r\n        this.view.classList.remove('top', 'bottom', 'left', 'right');\r\n        this.view.classList.add(anchorPosition === 0 /* AnchorPosition.BELOW */ ? 'bottom' : 'top');\r\n        this.view.classList.add(anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 'left' : 'right');\r\n        this.view.classList.toggle('fixed', this.useFixedPosition);\r\n        const containerPosition = DOM.getDomNodePagePosition(this.container);\r\n        this.view.style.top = `${top - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).top : containerPosition.top)}px`;\r\n        this.view.style.left = `${left - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).left : containerPosition.left)}px`;\r\n        this.view.style.width = 'initial';\r\n    }\r\n    hide(data) {\r\n        const delegate = this.delegate;\r\n        this.delegate = null;\r\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.onHide) {\r\n            delegate.onHide(data);\r\n        }\r\n        this.toDisposeOnClean.dispose();\r\n        DOM.hide(this.view);\r\n    }\r\n    isVisible() {\r\n        return !!this.delegate;\r\n    }\r\n    onDOMEvent(e, onCapture) {\r\n        if (this.delegate) {\r\n            if (this.delegate.onDOMEvent) {\r\n                this.delegate.onDOMEvent(e, DOM.getWindow(e).document.activeElement);\r\n            }\r\n            else if (onCapture && !DOM.isAncestor(e.target, this.container)) {\r\n                this.hide();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this.hide();\r\n        super.dispose();\r\n    }\r\n}\r\nContextView.BUBBLE_UP_EVENTS = ['click', 'keydown', 'focus', 'blur'];\r\nContextView.BUBBLE_DOWN_EVENTS = ['click'];\r\nconst SHADOW_ROOT_CSS = /* css */ `\r\n\t:host {\r\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\r\n\t}\r\n\r\n\t.codicon[class*='codicon-'] {\r\n\t\tfont: normal normal normal 16px/1 codicon;\r\n\t\tdisplay: inline-block;\r\n\t\ttext-decoration: none;\r\n\t\ttext-rendering: auto;\r\n\t\ttext-align: center;\r\n\t\t-webkit-font-smoothing: antialiased;\r\n\t\t-moz-osx-font-smoothing: grayscale;\r\n\t\tuser-select: none;\r\n\t\t-webkit-user-select: none;\r\n\t\t-ms-user-select: none;\r\n\t}\r\n\r\n\t:host {\r\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"HelveticaNeue-Light\", system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif;\r\n\t}\r\n\r\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\r\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Hiragino Sans GB\", sans-serif; }\r\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang TC\", sans-serif; }\r\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, \"Hiragino Kaku Gothic Pro\", sans-serif; }\r\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, \"Nanum Gothic\", \"Apple SD Gothic Neo\", \"AppleGothic\", sans-serif; }\r\n\r\n\t:host-context(.windows) { font-family: \"Segoe WPC\", \"Segoe UI\", sans-serif; }\r\n\t:host-context(.windows:lang(zh-Hans)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft YaHei\", sans-serif; }\r\n\t:host-context(.windows:lang(zh-Hant)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft Jhenghei\", sans-serif; }\r\n\t:host-context(.windows:lang(ja)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Yu Gothic UI\", \"Meiryo UI\", sans-serif; }\r\n\t:host-context(.windows:lang(ko)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Malgun Gothic\", \"Dotom\", sans-serif; }\r\n\r\n\t:host-context(.linux) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif; }\r\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans SC\", \"Source Han Sans CN\", \"Source Han Sans\", sans-serif; }\r\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans TC\", \"Source Han Sans TW\", \"Source Han Sans\", sans-serif; }\r\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans J\", \"Source Han Sans JP\", \"Source Han Sans\", sans-serif; }\r\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans K\", \"Source Han Sans JR\", \"Source Han Sans\", \"UnDotum\", \"FBaekmuk Gulim\", sans-serif; }\r\n`;\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { ContextView } from '../../../base/browser/ui/contextview/contextview.js';\r\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\r\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\r\nimport { getWindow } from '../../../base/browser/dom.js';\r\nlet ContextViewService = class ContextViewService extends Disposable {\r\n    constructor(layoutService) {\r\n        super();\r\n        this.layoutService = layoutService;\r\n        this.currentViewDisposable = Disposable.None;\r\n        this.contextView = this._register(new ContextView(this.layoutService.mainContainer, 1 /* ContextViewDOMPosition.ABSOLUTE */));\r\n        this.layout();\r\n        this._register(layoutService.onDidLayoutContainer(() => this.layout()));\r\n    }\r\n    // ContextView\r\n    showContextView(delegate, container, shadowRoot) {\r\n        let domPosition;\r\n        if (container) {\r\n            if (container === this.layoutService.getContainer(getWindow(container))) {\r\n                domPosition = 1 /* ContextViewDOMPosition.ABSOLUTE */;\r\n            }\r\n            else if (shadowRoot) {\r\n                domPosition = 3 /* ContextViewDOMPosition.FIXED_SHADOW */;\r\n            }\r\n            else {\r\n                domPosition = 2 /* ContextViewDOMPosition.FIXED */;\r\n            }\r\n        }\r\n        else {\r\n            domPosition = 1 /* ContextViewDOMPosition.ABSOLUTE */;\r\n        }\r\n        this.contextView.setContainer(container !== null && container !== void 0 ? container : this.layoutService.activeContainer, domPosition);\r\n        this.contextView.show(delegate);\r\n        const disposable = toDisposable(() => {\r\n            if (this.currentViewDisposable === disposable) {\r\n                this.hideContextView();\r\n            }\r\n        });\r\n        this.currentViewDisposable = disposable;\r\n        return disposable;\r\n    }\r\n    getContextViewElement() {\r\n        return this.contextView.getViewElement();\r\n    }\r\n    layout() {\r\n        this.contextView.layout();\r\n    }\r\n    hideContextView(data) {\r\n        this.contextView.hide(data);\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.currentViewDisposable.dispose();\r\n        this.currentViewDisposable = Disposable.None;\r\n    }\r\n};\r\nContextViewService = __decorate([\r\n    __param(0, ILayoutService)\r\n], ContextViewService);\r\nexport { ContextViewService };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { parse } from '../../../base/common/glob.js';\r\nimport { Mimes } from '../../../base/common/mime.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { basename, posix } from '../../../base/common/path.js';\r\nimport { DataUri } from '../../../base/common/resources.js';\r\nimport { startsWithUTF8BOM } from '../../../base/common/strings.js';\r\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\r\nlet registeredAssociations = [];\r\nlet nonUserRegisteredAssociations = [];\r\nlet userRegisteredAssociations = [];\r\n/**\r\n * Associate a language to the registry (platform).\r\n * * **NOTE**: This association will lose over associations registered using `registerConfiguredLanguageAssociation`.\r\n * * **NOTE**: Use `clearPlatformLanguageAssociations` to remove all associations registered using this function.\r\n */\r\nexport function registerPlatformLanguageAssociation(association, warnOnOverwrite = false) {\r\n    _registerLanguageAssociation(association, false, warnOnOverwrite);\r\n}\r\nfunction _registerLanguageAssociation(association, userConfigured, warnOnOverwrite) {\r\n    // Register\r\n    const associationItem = toLanguageAssociationItem(association, userConfigured);\r\n    registeredAssociations.push(associationItem);\r\n    if (!associationItem.userConfigured) {\r\n        nonUserRegisteredAssociations.push(associationItem);\r\n    }\r\n    else {\r\n        userRegisteredAssociations.push(associationItem);\r\n    }\r\n    // Check for conflicts unless this is a user configured association\r\n    if (warnOnOverwrite && !associationItem.userConfigured) {\r\n        registeredAssociations.forEach(a => {\r\n            if (a.mime === associationItem.mime || a.userConfigured) {\r\n                return; // same mime or userConfigured is ok\r\n            }\r\n            if (associationItem.extension && a.extension === associationItem.extension) {\r\n                console.warn(`Overwriting extension <<${associationItem.extension}>> to now point to mime <<${associationItem.mime}>>`);\r\n            }\r\n            if (associationItem.filename && a.filename === associationItem.filename) {\r\n                console.warn(`Overwriting filename <<${associationItem.filename}>> to now point to mime <<${associationItem.mime}>>`);\r\n            }\r\n            if (associationItem.filepattern && a.filepattern === associationItem.filepattern) {\r\n                console.warn(`Overwriting filepattern <<${associationItem.filepattern}>> to now point to mime <<${associationItem.mime}>>`);\r\n            }\r\n            if (associationItem.firstline && a.firstline === associationItem.firstline) {\r\n                console.warn(`Overwriting firstline <<${associationItem.firstline}>> to now point to mime <<${associationItem.mime}>>`);\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction toLanguageAssociationItem(association, userConfigured) {\r\n    return {\r\n        id: association.id,\r\n        mime: association.mime,\r\n        filename: association.filename,\r\n        extension: association.extension,\r\n        filepattern: association.filepattern,\r\n        firstline: association.firstline,\r\n        userConfigured: userConfigured,\r\n        filenameLowercase: association.filename ? association.filename.toLowerCase() : undefined,\r\n        extensionLowercase: association.extension ? association.extension.toLowerCase() : undefined,\r\n        filepatternLowercase: association.filepattern ? parse(association.filepattern.toLowerCase()) : undefined,\r\n        filepatternOnPath: association.filepattern ? association.filepattern.indexOf(posix.sep) >= 0 : false\r\n    };\r\n}\r\n/**\r\n * Clear language associations from the registry (platform).\r\n */\r\nexport function clearPlatformLanguageAssociations() {\r\n    registeredAssociations = registeredAssociations.filter(a => a.userConfigured);\r\n    nonUserRegisteredAssociations = [];\r\n}\r\n/**\r\n * @see `getMimeTypes`\r\n */\r\nexport function getLanguageIds(resource, firstLine) {\r\n    return getAssociations(resource, firstLine).map(item => item.id);\r\n}\r\nfunction getAssociations(resource, firstLine) {\r\n    let path;\r\n    if (resource) {\r\n        switch (resource.scheme) {\r\n            case Schemas.file:\r\n                path = resource.fsPath;\r\n                break;\r\n            case Schemas.data: {\r\n                const metadata = DataUri.parseMetaData(resource);\r\n                path = metadata.get(DataUri.META_DATA_LABEL);\r\n                break;\r\n            }\r\n            case Schemas.vscodeNotebookCell:\r\n                // File path not relevant for language detection of cell\r\n                path = undefined;\r\n                break;\r\n            default:\r\n                path = resource.path;\r\n        }\r\n    }\r\n    if (!path) {\r\n        return [{ id: 'unknown', mime: Mimes.unknown }];\r\n    }\r\n    path = path.toLowerCase();\r\n    const filename = basename(path);\r\n    // 1.) User configured mappings have highest priority\r\n    const configuredLanguage = getAssociationByPath(path, filename, userRegisteredAssociations);\r\n    if (configuredLanguage) {\r\n        return [configuredLanguage, { id: PLAINTEXT_LANGUAGE_ID, mime: Mimes.text }];\r\n    }\r\n    // 2.) Registered mappings have middle priority\r\n    const registeredLanguage = getAssociationByPath(path, filename, nonUserRegisteredAssociations);\r\n    if (registeredLanguage) {\r\n        return [registeredLanguage, { id: PLAINTEXT_LANGUAGE_ID, mime: Mimes.text }];\r\n    }\r\n    // 3.) Firstline has lowest priority\r\n    if (firstLine) {\r\n        const firstlineLanguage = getAssociationByFirstline(firstLine);\r\n        if (firstlineLanguage) {\r\n            return [firstlineLanguage, { id: PLAINTEXT_LANGUAGE_ID, mime: Mimes.text }];\r\n        }\r\n    }\r\n    return [{ id: 'unknown', mime: Mimes.unknown }];\r\n}\r\nfunction getAssociationByPath(path, filename, associations) {\r\n    var _a;\r\n    let filenameMatch = undefined;\r\n    let patternMatch = undefined;\r\n    let extensionMatch = undefined;\r\n    // We want to prioritize associations based on the order they are registered so that the last registered\r\n    // association wins over all other. This is for https://github.com/microsoft/vscode/issues/20074\r\n    for (let i = associations.length - 1; i >= 0; i--) {\r\n        const association = associations[i];\r\n        // First exact name match\r\n        if (filename === association.filenameLowercase) {\r\n            filenameMatch = association;\r\n            break; // take it!\r\n        }\r\n        // Longest pattern match\r\n        if (association.filepattern) {\r\n            if (!patternMatch || association.filepattern.length > patternMatch.filepattern.length) {\r\n                const target = association.filepatternOnPath ? path : filename; // match on full path if pattern contains path separator\r\n                if ((_a = association.filepatternLowercase) === null || _a === void 0 ? void 0 : _a.call(association, target)) {\r\n                    patternMatch = association;\r\n                }\r\n            }\r\n        }\r\n        // Longest extension match\r\n        if (association.extension) {\r\n            if (!extensionMatch || association.extension.length > extensionMatch.extension.length) {\r\n                if (filename.endsWith(association.extensionLowercase)) {\r\n                    extensionMatch = association;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // 1.) Exact name match has second highest priority\r\n    if (filenameMatch) {\r\n        return filenameMatch;\r\n    }\r\n    // 2.) Match on pattern\r\n    if (patternMatch) {\r\n        return patternMatch;\r\n    }\r\n    // 3.) Match on extension comes next\r\n    if (extensionMatch) {\r\n        return extensionMatch;\r\n    }\r\n    return undefined;\r\n}\r\nfunction getAssociationByFirstline(firstLine) {\r\n    if (startsWithUTF8BOM(firstLine)) {\r\n        firstLine = firstLine.substr(1);\r\n    }\r\n    if (firstLine.length > 0) {\r\n        // We want to prioritize associations based on the order they are registered so that the last registered\r\n        // association wins over all other. This is for https://github.com/microsoft/vscode/issues/20074\r\n        for (let i = registeredAssociations.length - 1; i >= 0; i--) {\r\n            const association = registeredAssociations[i];\r\n            if (!association.firstline) {\r\n                continue;\r\n            }\r\n            const matches = firstLine.match(association.firstline);\r\n            if (matches && matches.length > 0) {\r\n                return association;\r\n            }\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { regExpLeadsToEndlessLoop } from '../../../base/common/strings.js';\r\nimport { clearPlatformLanguageAssociations, getLanguageIds, registerPlatformLanguageAssociation } from './languagesAssociations.js';\r\nimport { ModesRegistry, PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\r\nimport { Extensions } from '../../../platform/configuration/common/configurationRegistry.js';\r\nimport { Registry } from '../../../platform/registry/common/platform.js';\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\nconst NULL_LANGUAGE_ID = 'vs.editor.nullLanguage';\r\nexport class LanguageIdCodec {\r\n    constructor() {\r\n        this._languageIdToLanguage = [];\r\n        this._languageToLanguageId = new Map();\r\n        this._register(NULL_LANGUAGE_ID, 0 /* LanguageId.Null */);\r\n        this._register(PLAINTEXT_LANGUAGE_ID, 1 /* LanguageId.PlainText */);\r\n        this._nextLanguageId = 2;\r\n    }\r\n    _register(language, languageId) {\r\n        this._languageIdToLanguage[languageId] = language;\r\n        this._languageToLanguageId.set(language, languageId);\r\n    }\r\n    register(language) {\r\n        if (this._languageToLanguageId.has(language)) {\r\n            return;\r\n        }\r\n        const languageId = this._nextLanguageId++;\r\n        this._register(language, languageId);\r\n    }\r\n    encodeLanguageId(languageId) {\r\n        return this._languageToLanguageId.get(languageId) || 0 /* LanguageId.Null */;\r\n    }\r\n    decodeLanguageId(languageId) {\r\n        return this._languageIdToLanguage[languageId] || NULL_LANGUAGE_ID;\r\n    }\r\n}\r\nexport class LanguagesRegistry extends Disposable {\r\n    constructor(useModesRegistry = true, warnOnOverwrite = false) {\r\n        super();\r\n        this._onDidChange = this._register(new Emitter());\r\n        this.onDidChange = this._onDidChange.event;\r\n        LanguagesRegistry.instanceCount++;\r\n        this._warnOnOverwrite = warnOnOverwrite;\r\n        this.languageIdCodec = new LanguageIdCodec();\r\n        this._dynamicLanguages = [];\r\n        this._languages = {};\r\n        this._mimeTypesMap = {};\r\n        this._nameMap = {};\r\n        this._lowercaseNameMap = {};\r\n        if (useModesRegistry) {\r\n            this._initializeFromRegistry();\r\n            this._register(ModesRegistry.onDidChangeLanguages((m) => {\r\n                this._initializeFromRegistry();\r\n            }));\r\n        }\r\n    }\r\n    dispose() {\r\n        LanguagesRegistry.instanceCount--;\r\n        super.dispose();\r\n    }\r\n    _initializeFromRegistry() {\r\n        this._languages = {};\r\n        this._mimeTypesMap = {};\r\n        this._nameMap = {};\r\n        this._lowercaseNameMap = {};\r\n        clearPlatformLanguageAssociations();\r\n        const desc = [].concat(ModesRegistry.getLanguages()).concat(this._dynamicLanguages);\r\n        this._registerLanguages(desc);\r\n    }\r\n    _registerLanguages(desc) {\r\n        for (const d of desc) {\r\n            this._registerLanguage(d);\r\n        }\r\n        // Rebuild fast path maps\r\n        this._mimeTypesMap = {};\r\n        this._nameMap = {};\r\n        this._lowercaseNameMap = {};\r\n        Object.keys(this._languages).forEach((langId) => {\r\n            const language = this._languages[langId];\r\n            if (language.name) {\r\n                this._nameMap[language.name] = language.identifier;\r\n            }\r\n            language.aliases.forEach((alias) => {\r\n                this._lowercaseNameMap[alias.toLowerCase()] = language.identifier;\r\n            });\r\n            language.mimetypes.forEach((mimetype) => {\r\n                this._mimeTypesMap[mimetype] = language.identifier;\r\n            });\r\n        });\r\n        Registry.as(Extensions.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds());\r\n        this._onDidChange.fire();\r\n    }\r\n    _registerLanguage(lang) {\r\n        const langId = lang.id;\r\n        let resolvedLanguage;\r\n        if (hasOwnProperty.call(this._languages, langId)) {\r\n            resolvedLanguage = this._languages[langId];\r\n        }\r\n        else {\r\n            this.languageIdCodec.register(langId);\r\n            resolvedLanguage = {\r\n                identifier: langId,\r\n                name: null,\r\n                mimetypes: [],\r\n                aliases: [],\r\n                extensions: [],\r\n                filenames: [],\r\n                configurationFiles: [],\r\n                icons: []\r\n            };\r\n            this._languages[langId] = resolvedLanguage;\r\n        }\r\n        this._mergeLanguage(resolvedLanguage, lang);\r\n    }\r\n    _mergeLanguage(resolvedLanguage, lang) {\r\n        const langId = lang.id;\r\n        let primaryMime = null;\r\n        if (Array.isArray(lang.mimetypes) && lang.mimetypes.length > 0) {\r\n            resolvedLanguage.mimetypes.push(...lang.mimetypes);\r\n            primaryMime = lang.mimetypes[0];\r\n        }\r\n        if (!primaryMime) {\r\n            primaryMime = `text/x-${langId}`;\r\n            resolvedLanguage.mimetypes.push(primaryMime);\r\n        }\r\n        if (Array.isArray(lang.extensions)) {\r\n            if (lang.configuration) {\r\n                // insert first as this appears to be the 'primary' language definition\r\n                resolvedLanguage.extensions = lang.extensions.concat(resolvedLanguage.extensions);\r\n            }\r\n            else {\r\n                resolvedLanguage.extensions = resolvedLanguage.extensions.concat(lang.extensions);\r\n            }\r\n            for (const extension of lang.extensions) {\r\n                registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, extension: extension }, this._warnOnOverwrite);\r\n            }\r\n        }\r\n        if (Array.isArray(lang.filenames)) {\r\n            for (const filename of lang.filenames) {\r\n                registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, filename: filename }, this._warnOnOverwrite);\r\n                resolvedLanguage.filenames.push(filename);\r\n            }\r\n        }\r\n        if (Array.isArray(lang.filenamePatterns)) {\r\n            for (const filenamePattern of lang.filenamePatterns) {\r\n                registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, filepattern: filenamePattern }, this._warnOnOverwrite);\r\n            }\r\n        }\r\n        if (typeof lang.firstLine === 'string' && lang.firstLine.length > 0) {\r\n            let firstLineRegexStr = lang.firstLine;\r\n            if (firstLineRegexStr.charAt(0) !== '^') {\r\n                firstLineRegexStr = '^' + firstLineRegexStr;\r\n            }\r\n            try {\r\n                const firstLineRegex = new RegExp(firstLineRegexStr);\r\n                if (!regExpLeadsToEndlessLoop(firstLineRegex)) {\r\n                    registerPlatformLanguageAssociation({ id: langId, mime: primaryMime, firstline: firstLineRegex }, this._warnOnOverwrite);\r\n                }\r\n            }\r\n            catch (err) {\r\n                // Most likely, the regex was bad\r\n                console.warn(`[${lang.id}]: Invalid regular expression \\`${firstLineRegexStr}\\`: `, err);\r\n            }\r\n        }\r\n        resolvedLanguage.aliases.push(langId);\r\n        let langAliases = null;\r\n        if (typeof lang.aliases !== 'undefined' && Array.isArray(lang.aliases)) {\r\n            if (lang.aliases.length === 0) {\r\n                // signal that this language should not get a name\r\n                langAliases = [null];\r\n            }\r\n            else {\r\n                langAliases = lang.aliases;\r\n            }\r\n        }\r\n        if (langAliases !== null) {\r\n            for (const langAlias of langAliases) {\r\n                if (!langAlias || langAlias.length === 0) {\r\n                    continue;\r\n                }\r\n                resolvedLanguage.aliases.push(langAlias);\r\n            }\r\n        }\r\n        const containsAliases = (langAliases !== null && langAliases.length > 0);\r\n        if (containsAliases && langAliases[0] === null) {\r\n            // signal that this language should not get a name\r\n        }\r\n        else {\r\n            const bestName = (containsAliases ? langAliases[0] : null) || langId;\r\n            if (containsAliases || !resolvedLanguage.name) {\r\n                resolvedLanguage.name = bestName;\r\n            }\r\n        }\r\n        if (lang.configuration) {\r\n            resolvedLanguage.configurationFiles.push(lang.configuration);\r\n        }\r\n        if (lang.icon) {\r\n            resolvedLanguage.icons.push(lang.icon);\r\n        }\r\n    }\r\n    isRegisteredLanguageId(languageId) {\r\n        if (!languageId) {\r\n            return false;\r\n        }\r\n        return hasOwnProperty.call(this._languages, languageId);\r\n    }\r\n    getRegisteredLanguageIds() {\r\n        return Object.keys(this._languages);\r\n    }\r\n    getLanguageIdByLanguageName(languageName) {\r\n        const languageNameLower = languageName.toLowerCase();\r\n        if (!hasOwnProperty.call(this._lowercaseNameMap, languageNameLower)) {\r\n            return null;\r\n        }\r\n        return this._lowercaseNameMap[languageNameLower];\r\n    }\r\n    getLanguageIdByMimeType(mimeType) {\r\n        if (!mimeType) {\r\n            return null;\r\n        }\r\n        if (hasOwnProperty.call(this._mimeTypesMap, mimeType)) {\r\n            return this._mimeTypesMap[mimeType];\r\n        }\r\n        return null;\r\n    }\r\n    guessLanguageIdByFilepathOrFirstLine(resource, firstLine) {\r\n        if (!resource && !firstLine) {\r\n            return [];\r\n        }\r\n        return getLanguageIds(resource, firstLine);\r\n    }\r\n}\r\nLanguagesRegistry.instanceCount = 0;\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { LanguagesRegistry } from './languagesRegistry.js';\r\nimport { firstOrDefault } from '../../../base/common/arrays.js';\r\nimport { TokenizationRegistry } from '../languages.js';\r\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\r\nexport class LanguageService extends Disposable {\r\n    constructor(warnOnOverwrite = false) {\r\n        super();\r\n        this._onDidRequestBasicLanguageFeatures = this._register(new Emitter());\r\n        this.onDidRequestBasicLanguageFeatures = this._onDidRequestBasicLanguageFeatures.event;\r\n        this._onDidRequestRichLanguageFeatures = this._register(new Emitter());\r\n        this.onDidRequestRichLanguageFeatures = this._onDidRequestRichLanguageFeatures.event;\r\n        this._onDidChange = this._register(new Emitter({ leakWarningThreshold: 200 /* https://github.com/microsoft/vscode/issues/119968 */ }));\r\n        this.onDidChange = this._onDidChange.event;\r\n        this._requestedBasicLanguages = new Set();\r\n        this._requestedRichLanguages = new Set();\r\n        LanguageService.instanceCount++;\r\n        this._registry = this._register(new LanguagesRegistry(true, warnOnOverwrite));\r\n        this.languageIdCodec = this._registry.languageIdCodec;\r\n        this._register(this._registry.onDidChange(() => this._onDidChange.fire()));\r\n    }\r\n    dispose() {\r\n        LanguageService.instanceCount--;\r\n        super.dispose();\r\n    }\r\n    isRegisteredLanguageId(languageId) {\r\n        return this._registry.isRegisteredLanguageId(languageId);\r\n    }\r\n    getLanguageIdByLanguageName(languageName) {\r\n        return this._registry.getLanguageIdByLanguageName(languageName);\r\n    }\r\n    getLanguageIdByMimeType(mimeType) {\r\n        return this._registry.getLanguageIdByMimeType(mimeType);\r\n    }\r\n    guessLanguageIdByFilepathOrFirstLine(resource, firstLine) {\r\n        const languageIds = this._registry.guessLanguageIdByFilepathOrFirstLine(resource, firstLine);\r\n        return firstOrDefault(languageIds, null);\r\n    }\r\n    createById(languageId) {\r\n        return new LanguageSelection(this.onDidChange, () => {\r\n            return this._createAndGetLanguageIdentifier(languageId);\r\n        });\r\n    }\r\n    createByFilepathOrFirstLine(resource, firstLine) {\r\n        return new LanguageSelection(this.onDidChange, () => {\r\n            const languageId = this.guessLanguageIdByFilepathOrFirstLine(resource, firstLine);\r\n            return this._createAndGetLanguageIdentifier(languageId);\r\n        });\r\n    }\r\n    _createAndGetLanguageIdentifier(languageId) {\r\n        if (!languageId || !this.isRegisteredLanguageId(languageId)) {\r\n            // Fall back to plain text if language is unknown\r\n            languageId = PLAINTEXT_LANGUAGE_ID;\r\n        }\r\n        return languageId;\r\n    }\r\n    requestBasicLanguageFeatures(languageId) {\r\n        if (!this._requestedBasicLanguages.has(languageId)) {\r\n            this._requestedBasicLanguages.add(languageId);\r\n            this._onDidRequestBasicLanguageFeatures.fire(languageId);\r\n        }\r\n    }\r\n    requestRichLanguageFeatures(languageId) {\r\n        if (!this._requestedRichLanguages.has(languageId)) {\r\n            this._requestedRichLanguages.add(languageId);\r\n            // Ensure basic features are requested\r\n            this.requestBasicLanguageFeatures(languageId);\r\n            // Ensure tokenizers are created\r\n            TokenizationRegistry.getOrCreate(languageId);\r\n            this._onDidRequestRichLanguageFeatures.fire(languageId);\r\n        }\r\n    }\r\n}\r\nLanguageService.instanceCount = 0;\r\nclass LanguageSelection {\r\n    constructor(_onDidChangeLanguages, _selector) {\r\n        this._onDidChangeLanguages = _onDidChangeLanguages;\r\n        this._selector = _selector;\r\n        this._listener = null;\r\n        this._emitter = null;\r\n        this.languageId = this._selector();\r\n    }\r\n    _dispose() {\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = null;\r\n        }\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = null;\r\n        }\r\n    }\r\n    get onDidChange() {\r\n        if (!this._listener) {\r\n            this._listener = this._onDidChangeLanguages(() => this._evaluate());\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new Emitter({\r\n                onDidRemoveLastListener: () => {\r\n                    this._dispose();\r\n                }\r\n            });\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    _evaluate() {\r\n        var _a;\r\n        const languageId = this._selector();\r\n        if (languageId === this.languageId) {\r\n            // no change\r\n            return;\r\n        }\r\n        this.languageId = languageId;\r\n        (_a = this._emitter) === null || _a === void 0 ? void 0 : _a.fire(this.languageId);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { isFirefox } from '../../browser.js';\r\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\r\nimport { $, addDisposableListener, append, clearNode, createStyleSheet, Dimension, EventHelper, EventType, getActiveElement, getWindow, isAncestor, isInShadowDOM } from '../../dom.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { StandardMouseEvent } from '../../mouseEvent.js';\r\nimport { ActionBar } from '../actionbar/actionbar.js';\r\nimport { ActionViewItem, BaseActionViewItem } from '../actionbar/actionViewItems.js';\r\nimport { layout } from '../contextview/contextview.js';\r\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\r\nimport { EmptySubmenuAction, Separator, SubmenuAction } from '../../../common/actions.js';\r\nimport { RunOnceScheduler } from '../../../common/async.js';\r\nimport { Codicon, getCodiconFontCharacters } from '../../../common/codicons.js';\r\nimport { ThemeIcon } from '../../../common/themables.js';\r\nimport { stripIcons } from '../../../common/iconLabels.js';\r\nimport { DisposableStore } from '../../../common/lifecycle.js';\r\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\r\nimport * as strings from '../../../common/strings.js';\r\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\r\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\r\nexport var Direction;\r\n(function (Direction) {\r\n    Direction[Direction[\"Right\"] = 0] = \"Right\";\r\n    Direction[Direction[\"Left\"] = 1] = \"Left\";\r\n})(Direction || (Direction = {}));\r\nexport class Menu extends ActionBar {\r\n    constructor(container, actions, options, menuStyles) {\r\n        container.classList.add('monaco-menu-container');\r\n        container.setAttribute('role', 'presentation');\r\n        const menuElement = document.createElement('div');\r\n        menuElement.classList.add('monaco-menu');\r\n        menuElement.setAttribute('role', 'presentation');\r\n        super(menuElement, {\r\n            orientation: 1 /* ActionsOrientation.VERTICAL */,\r\n            actionViewItemProvider: action => this.doGetActionViewItem(action, options, parentData),\r\n            context: options.context,\r\n            actionRunner: options.actionRunner,\r\n            ariaLabel: options.ariaLabel,\r\n            ariaRole: 'menu',\r\n            focusOnlyEnabledItems: true,\r\n            triggerKeys: { keys: [3 /* KeyCode.Enter */, ...(isMacintosh || isLinux ? [10 /* KeyCode.Space */] : [])], keyDown: true }\r\n        });\r\n        this.menuStyles = menuStyles;\r\n        this.menuElement = menuElement;\r\n        this.actionsList.tabIndex = 0;\r\n        this.initializeOrUpdateStyleSheet(container, menuStyles);\r\n        this._register(Gesture.addTarget(menuElement));\r\n        this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\r\n            const event = new StandardKeyboardEvent(e);\r\n            // Stop tab navigation of menus\r\n            if (event.equals(2 /* KeyCode.Tab */)) {\r\n                e.preventDefault();\r\n            }\r\n        }));\r\n        if (options.enableMnemonics) {\r\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\r\n                const key = e.key.toLocaleLowerCase();\r\n                if (this.mnemonics.has(key)) {\r\n                    EventHelper.stop(e, true);\r\n                    const actions = this.mnemonics.get(key);\r\n                    if (actions.length === 1) {\r\n                        if (actions[0] instanceof SubmenuMenuActionViewItem && actions[0].container) {\r\n                            this.focusItemByElement(actions[0].container);\r\n                        }\r\n                        actions[0].onClick(e);\r\n                    }\r\n                    if (actions.length > 1) {\r\n                        const action = actions.shift();\r\n                        if (action && action.container) {\r\n                            this.focusItemByElement(action.container);\r\n                            actions.push(action);\r\n                        }\r\n                        this.mnemonics.set(key, actions);\r\n                    }\r\n                }\r\n            }));\r\n        }\r\n        if (isLinux) {\r\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\r\n                const event = new StandardKeyboardEvent(e);\r\n                if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {\r\n                    this.focusedItem = this.viewItems.length - 1;\r\n                    this.focusNext();\r\n                    EventHelper.stop(e, true);\r\n                }\r\n                else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {\r\n                    this.focusedItem = 0;\r\n                    this.focusPrevious();\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }));\r\n        }\r\n        this._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\r\n            const relatedTarget = e.relatedTarget;\r\n            if (!isAncestor(relatedTarget, this.domNode)) {\r\n                this.focusedItem = undefined;\r\n                this.updateFocus();\r\n                e.stopPropagation();\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\r\n            let target = e.target;\r\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\r\n                return;\r\n            }\r\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\r\n                target = target.parentElement;\r\n            }\r\n            if (target.classList.contains('action-item')) {\r\n                const lastFocusedItem = this.focusedItem;\r\n                this.setFocusedItem(target);\r\n                if (lastFocusedItem !== this.focusedItem) {\r\n                    this.updateFocus();\r\n                }\r\n            }\r\n        }));\r\n        // Support touch on actions list to focus items (needed for submenus)\r\n        this._register(Gesture.addTarget(this.actionsList));\r\n        this._register(addDisposableListener(this.actionsList, TouchEventType.Tap, e => {\r\n            let target = e.initialTarget;\r\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\r\n                return;\r\n            }\r\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\r\n                target = target.parentElement;\r\n            }\r\n            if (target.classList.contains('action-item')) {\r\n                const lastFocusedItem = this.focusedItem;\r\n                this.setFocusedItem(target);\r\n                if (lastFocusedItem !== this.focusedItem) {\r\n                    this.updateFocus();\r\n                }\r\n            }\r\n        }));\r\n        const parentData = {\r\n            parent: this\r\n        };\r\n        this.mnemonics = new Map();\r\n        // Scroll Logic\r\n        this.scrollableElement = this._register(new DomScrollableElement(menuElement, {\r\n            alwaysConsumeMouseWheel: true,\r\n            horizontal: 2 /* ScrollbarVisibility.Hidden */,\r\n            vertical: 3 /* ScrollbarVisibility.Visible */,\r\n            verticalScrollbarSize: 7,\r\n            handleMouseWheel: true,\r\n            useShadows: true\r\n        }));\r\n        const scrollElement = this.scrollableElement.getDomNode();\r\n        scrollElement.style.position = '';\r\n        this.styleScrollElement(scrollElement, menuStyles);\r\n        // Support scroll on menu drag\r\n        this._register(addDisposableListener(menuElement, TouchEventType.Change, e => {\r\n            EventHelper.stop(e, true);\r\n            const scrollTop = this.scrollableElement.getScrollPosition().scrollTop;\r\n            this.scrollableElement.setScrollPosition({ scrollTop: scrollTop - e.translationY });\r\n        }));\r\n        this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, e => {\r\n            // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\r\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\r\n            e.preventDefault();\r\n        }));\r\n        const window = getWindow(container);\r\n        menuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35)}px`;\r\n        actions = actions.filter(a => {\r\n            var _a;\r\n            if ((_a = options.submenuIds) === null || _a === void 0 ? void 0 : _a.has(a.id)) {\r\n                console.warn(`Found submenu cycle: ${a.id}`);\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        this.push(actions, { icon: true, label: true, isMenu: true });\r\n        container.appendChild(this.scrollableElement.getDomNode());\r\n        this.scrollableElement.scanDomNode();\r\n        this.viewItems.filter(item => !(item instanceof MenuSeparatorActionViewItem)).forEach((item, index, array) => {\r\n            item.updatePositionInSet(index + 1, array.length);\r\n        });\r\n    }\r\n    initializeOrUpdateStyleSheet(container, style) {\r\n        if (!this.styleSheet) {\r\n            if (isInShadowDOM(container)) {\r\n                this.styleSheet = createStyleSheet(container);\r\n            }\r\n            else {\r\n                if (!Menu.globalStyleSheet) {\r\n                    Menu.globalStyleSheet = createStyleSheet();\r\n                }\r\n                this.styleSheet = Menu.globalStyleSheet;\r\n            }\r\n        }\r\n        this.styleSheet.textContent = getMenuWidgetCSS(style, isInShadowDOM(container));\r\n    }\r\n    styleScrollElement(scrollElement, style) {\r\n        var _a, _b;\r\n        const fgColor = (_a = style.foregroundColor) !== null && _a !== void 0 ? _a : '';\r\n        const bgColor = (_b = style.backgroundColor) !== null && _b !== void 0 ? _b : '';\r\n        const border = style.borderColor ? `1px solid ${style.borderColor}` : '';\r\n        const borderRadius = '5px';\r\n        const shadow = style.shadowColor ? `0 2px 8px ${style.shadowColor}` : '';\r\n        scrollElement.style.outline = border;\r\n        scrollElement.style.borderRadius = borderRadius;\r\n        scrollElement.style.color = fgColor;\r\n        scrollElement.style.backgroundColor = bgColor;\r\n        scrollElement.style.boxShadow = shadow;\r\n    }\r\n    getContainer() {\r\n        return this.scrollableElement.getDomNode();\r\n    }\r\n    get onScroll() {\r\n        return this.scrollableElement.onScroll;\r\n    }\r\n    focusItemByElement(element) {\r\n        const lastFocusedItem = this.focusedItem;\r\n        this.setFocusedItem(element);\r\n        if (lastFocusedItem !== this.focusedItem) {\r\n            this.updateFocus();\r\n        }\r\n    }\r\n    setFocusedItem(element) {\r\n        for (let i = 0; i < this.actionsList.children.length; i++) {\r\n            const elem = this.actionsList.children[i];\r\n            if (element === elem) {\r\n                this.focusedItem = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    updateFocus(fromRight) {\r\n        super.updateFocus(fromRight, true, true);\r\n        if (typeof this.focusedItem !== 'undefined') {\r\n            // Workaround for #80047 caused by an issue in chromium\r\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\r\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\r\n            this.scrollableElement.setScrollPosition({\r\n                scrollTop: Math.round(this.menuElement.scrollTop)\r\n            });\r\n        }\r\n    }\r\n    doGetActionViewItem(action, options, parentData) {\r\n        if (action instanceof Separator) {\r\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true }, this.menuStyles);\r\n        }\r\n        else if (action instanceof SubmenuAction) {\r\n            const menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, { ...options, submenuIds: new Set([...(options.submenuIds || []), action.id]) }, this.menuStyles);\r\n            if (options.enableMnemonics) {\r\n                const mnemonic = menuActionViewItem.getMnemonic();\r\n                if (mnemonic && menuActionViewItem.isEnabled()) {\r\n                    let actionViewItems = [];\r\n                    if (this.mnemonics.has(mnemonic)) {\r\n                        actionViewItems = this.mnemonics.get(mnemonic);\r\n                    }\r\n                    actionViewItems.push(menuActionViewItem);\r\n                    this.mnemonics.set(mnemonic, actionViewItems);\r\n                }\r\n            }\r\n            return menuActionViewItem;\r\n        }\r\n        else {\r\n            const menuItemOptions = { enableMnemonics: options.enableMnemonics, useEventAsContext: options.useEventAsContext };\r\n            if (options.getKeyBinding) {\r\n                const keybinding = options.getKeyBinding(action);\r\n                if (keybinding) {\r\n                    const keybindingLabel = keybinding.getLabel();\r\n                    if (keybindingLabel) {\r\n                        menuItemOptions.keybinding = keybindingLabel;\r\n                    }\r\n                }\r\n            }\r\n            const menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions, this.menuStyles);\r\n            if (options.enableMnemonics) {\r\n                const mnemonic = menuActionViewItem.getMnemonic();\r\n                if (mnemonic && menuActionViewItem.isEnabled()) {\r\n                    let actionViewItems = [];\r\n                    if (this.mnemonics.has(mnemonic)) {\r\n                        actionViewItems = this.mnemonics.get(mnemonic);\r\n                    }\r\n                    actionViewItems.push(menuActionViewItem);\r\n                    this.mnemonics.set(mnemonic, actionViewItems);\r\n                }\r\n            }\r\n            return menuActionViewItem;\r\n        }\r\n    }\r\n}\r\nclass BaseMenuActionViewItem extends BaseActionViewItem {\r\n    constructor(ctx, action, options, menuStyle) {\r\n        options.isMenu = true;\r\n        super(action, action, options);\r\n        this.menuStyle = menuStyle;\r\n        this.options = options;\r\n        this.options.icon = options.icon !== undefined ? options.icon : false;\r\n        this.options.label = options.label !== undefined ? options.label : true;\r\n        this.cssClass = '';\r\n        // Set mnemonic\r\n        if (this.options.label && options.enableMnemonics) {\r\n            const label = this.action.label;\r\n            if (label) {\r\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\r\n                if (matches) {\r\n                    this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\r\n                }\r\n            }\r\n        }\r\n        // Add mouse up listener later to avoid accidental clicks\r\n        this.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\r\n            if (!this.element) {\r\n                return;\r\n            }\r\n            this._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\r\n                // removed default prevention as it conflicts\r\n                // with BaseActionViewItem #101537\r\n                // add back if issues arise and link new issue\r\n                EventHelper.stop(e, true);\r\n                // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\r\n                // > Writing to the clipboard\r\n                // > You can use the \"cut\" and \"copy\" commands without any special\r\n                // permission if you are using them in a short-lived event handler\r\n                // for a user action (for example, a click handler).\r\n                // => to get the Copy and Paste context menu actions working on Firefox,\r\n                // there should be no timeout here\r\n                if (isFirefox) {\r\n                    const mouseEvent = new StandardMouseEvent(getWindow(this.element), e);\r\n                    // Allowing right click to trigger the event causes the issue described below,\r\n                    // but since the solution below does not work in FF, we must disable right click\r\n                    if (mouseEvent.rightButton) {\r\n                        return;\r\n                    }\r\n                    this.onClick(e);\r\n                }\r\n                // In all other cases, set timeout to allow context menu cancellation to trigger\r\n                // otherwise the action will destroy the menu and a second context menu\r\n                // will still trigger for right click.\r\n                else {\r\n                    setTimeout(() => {\r\n                        this.onClick(e);\r\n                    }, 0);\r\n                }\r\n            }));\r\n            this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => {\r\n                EventHelper.stop(e, true);\r\n            }));\r\n        }, 100);\r\n        this._register(this.runOnceToEnableMouseUp);\r\n    }\r\n    render(container) {\r\n        super.render(container);\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        this.container = container;\r\n        this.item = append(this.element, $('a.action-menu-item'));\r\n        if (this._action.id === Separator.ID) {\r\n            // A separator is a presentation item\r\n            this.item.setAttribute('role', 'presentation');\r\n        }\r\n        else {\r\n            this.item.setAttribute('role', 'menuitem');\r\n            if (this.mnemonic) {\r\n                this.item.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);\r\n            }\r\n        }\r\n        this.check = append(this.item, $('span.menu-item-check' + ThemeIcon.asCSSSelector(Codicon.menuSelection)));\r\n        this.check.setAttribute('role', 'none');\r\n        this.label = append(this.item, $('span.action-label'));\r\n        if (this.options.label && this.options.keybinding) {\r\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\r\n        }\r\n        // Adds mouse up listener to actually run the action\r\n        this.runOnceToEnableMouseUp.schedule();\r\n        this.updateClass();\r\n        this.updateLabel();\r\n        this.updateTooltip();\r\n        this.updateEnabled();\r\n        this.updateChecked();\r\n        this.applyStyle();\r\n    }\r\n    blur() {\r\n        super.blur();\r\n        this.applyStyle();\r\n    }\r\n    focus() {\r\n        var _a;\r\n        super.focus();\r\n        (_a = this.item) === null || _a === void 0 ? void 0 : _a.focus();\r\n        this.applyStyle();\r\n    }\r\n    updatePositionInSet(pos, setSize) {\r\n        if (this.item) {\r\n            this.item.setAttribute('aria-posinset', `${pos}`);\r\n            this.item.setAttribute('aria-setsize', `${setSize}`);\r\n        }\r\n    }\r\n    updateLabel() {\r\n        var _a;\r\n        if (!this.label) {\r\n            return;\r\n        }\r\n        if (this.options.label) {\r\n            clearNode(this.label);\r\n            let label = stripIcons(this.action.label);\r\n            if (label) {\r\n                const cleanLabel = cleanMnemonic(label);\r\n                if (!this.options.enableMnemonics) {\r\n                    label = cleanLabel;\r\n                }\r\n                this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\r\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\r\n                if (matches) {\r\n                    label = strings.escape(label);\r\n                    // This is global, reset it\r\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\r\n                    let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\r\n                    // We can't use negative lookbehind so if we match our negative and skip\r\n                    while (escMatch && escMatch[1]) {\r\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\r\n                    }\r\n                    const replaceDoubleEscapes = (str) => str.replace(/&amp;&amp;/g, '&amp;');\r\n                    if (escMatch) {\r\n                        this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', { 'aria-hidden': 'true' }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\r\n                    }\r\n                    else {\r\n                        this.label.innerText = replaceDoubleEscapes(label).trim();\r\n                    }\r\n                    (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\r\n                }\r\n                else {\r\n                    this.label.innerText = label.replace(/&&/g, '&').trim();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    updateTooltip() {\r\n        // menus should function like native menus and they do not have tooltips\r\n    }\r\n    updateClass() {\r\n        if (this.cssClass && this.item) {\r\n            this.item.classList.remove(...this.cssClass.split(' '));\r\n        }\r\n        if (this.options.icon && this.label) {\r\n            this.cssClass = this.action.class || '';\r\n            this.label.classList.add('icon');\r\n            if (this.cssClass) {\r\n                this.label.classList.add(...this.cssClass.split(' '));\r\n            }\r\n            this.updateEnabled();\r\n        }\r\n        else if (this.label) {\r\n            this.label.classList.remove('icon');\r\n        }\r\n    }\r\n    updateEnabled() {\r\n        if (this.action.enabled) {\r\n            if (this.element) {\r\n                this.element.classList.remove('disabled');\r\n                this.element.removeAttribute('aria-disabled');\r\n            }\r\n            if (this.item) {\r\n                this.item.classList.remove('disabled');\r\n                this.item.removeAttribute('aria-disabled');\r\n                this.item.tabIndex = 0;\r\n            }\r\n        }\r\n        else {\r\n            if (this.element) {\r\n                this.element.classList.add('disabled');\r\n                this.element.setAttribute('aria-disabled', 'true');\r\n            }\r\n            if (this.item) {\r\n                this.item.classList.add('disabled');\r\n                this.item.setAttribute('aria-disabled', 'true');\r\n            }\r\n        }\r\n    }\r\n    updateChecked() {\r\n        if (!this.item) {\r\n            return;\r\n        }\r\n        const checked = this.action.checked;\r\n        this.item.classList.toggle('checked', !!checked);\r\n        if (checked !== undefined) {\r\n            this.item.setAttribute('role', 'menuitemcheckbox');\r\n            this.item.setAttribute('aria-checked', checked ? 'true' : 'false');\r\n        }\r\n        else {\r\n            this.item.setAttribute('role', 'menuitem');\r\n            this.item.setAttribute('aria-checked', '');\r\n        }\r\n    }\r\n    getMnemonic() {\r\n        return this.mnemonic;\r\n    }\r\n    applyStyle() {\r\n        const isSelected = this.element && this.element.classList.contains('focused');\r\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\r\n        const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\r\n        const outline = isSelected && this.menuStyle.selectionBorderColor ? `1px solid ${this.menuStyle.selectionBorderColor}` : '';\r\n        const outlineOffset = isSelected && this.menuStyle.selectionBorderColor ? `-1px` : '';\r\n        if (this.item) {\r\n            this.item.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\r\n            this.item.style.backgroundColor = bgColor !== null && bgColor !== void 0 ? bgColor : '';\r\n            this.item.style.outline = outline;\r\n            this.item.style.outlineOffset = outlineOffset;\r\n        }\r\n        if (this.check) {\r\n            this.check.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\r\n        }\r\n    }\r\n}\r\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\r\n    constructor(action, submenuActions, parentData, submenuOptions, menuStyles) {\r\n        super(action, action, submenuOptions, menuStyles);\r\n        this.submenuActions = submenuActions;\r\n        this.parentData = parentData;\r\n        this.submenuOptions = submenuOptions;\r\n        this.mysubmenu = null;\r\n        this.submenuDisposables = this._register(new DisposableStore());\r\n        this.mouseOver = false;\r\n        this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : Direction.Right;\r\n        this.showScheduler = new RunOnceScheduler(() => {\r\n            if (this.mouseOver) {\r\n                this.cleanupExistingSubmenu(false);\r\n                this.createSubmenu(false);\r\n            }\r\n        }, 250);\r\n        this.hideScheduler = new RunOnceScheduler(() => {\r\n            if (this.element && (!isAncestor(getActiveElement(), this.element) && this.parentData.submenu === this.mysubmenu)) {\r\n                this.parentData.parent.focus(false);\r\n                this.cleanupExistingSubmenu(true);\r\n            }\r\n        }, 750);\r\n    }\r\n    render(container) {\r\n        super.render(container);\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        if (this.item) {\r\n            this.item.classList.add('monaco-submenu-item');\r\n            this.item.tabIndex = 0;\r\n            this.item.setAttribute('aria-haspopup', 'true');\r\n            this.updateAriaExpanded('false');\r\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator' + ThemeIcon.asCSSSelector(Codicon.menuSubmenu)));\r\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\r\n        }\r\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\r\n            const event = new StandardKeyboardEvent(e);\r\n            if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\r\n                EventHelper.stop(e, true);\r\n                this.createSubmenu(true);\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\r\n            const event = new StandardKeyboardEvent(e);\r\n            if (getActiveElement() === this.item) {\r\n                if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\r\n            if (!this.mouseOver) {\r\n                this.mouseOver = true;\r\n                this.showScheduler.schedule();\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\r\n            this.mouseOver = false;\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\r\n            if (this.element && !isAncestor(getActiveElement(), this.element)) {\r\n                this.hideScheduler.schedule();\r\n            }\r\n        }));\r\n        this._register(this.parentData.parent.onScroll(() => {\r\n            if (this.parentData.submenu === this.mysubmenu) {\r\n                this.parentData.parent.focus(false);\r\n                this.cleanupExistingSubmenu(true);\r\n            }\r\n        }));\r\n    }\r\n    updateEnabled() {\r\n        // override on submenu entry\r\n        // native menus do not observe enablement on sumbenus\r\n        // we mimic that behavior\r\n    }\r\n    onClick(e) {\r\n        // stop clicking from trying to run an action\r\n        EventHelper.stop(e, true);\r\n        this.cleanupExistingSubmenu(false);\r\n        this.createSubmenu(true);\r\n    }\r\n    cleanupExistingSubmenu(force) {\r\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\r\n            // disposal may throw if the submenu has already been removed\r\n            try {\r\n                this.parentData.submenu.dispose();\r\n            }\r\n            catch (_a) { }\r\n            this.parentData.submenu = undefined;\r\n            this.updateAriaExpanded('false');\r\n            if (this.submenuContainer) {\r\n                this.submenuDisposables.clear();\r\n                this.submenuContainer = undefined;\r\n            }\r\n        }\r\n    }\r\n    calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\r\n        const ret = { top: 0, left: 0 };\r\n        // Start with horizontal\r\n        ret.left = layout(windowDimensions.width, submenu.width, { position: expandDirection === Direction.Right ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, offset: entry.left, size: entry.width });\r\n        // We don't have enough room to layout the menu fully, so we are overlapping the menu\r\n        if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\r\n            if (entry.left + 10 + submenu.width <= windowDimensions.width) {\r\n                ret.left = entry.left + 10;\r\n            }\r\n            entry.top += 10;\r\n            entry.height = 0;\r\n        }\r\n        // Now that we have a horizontal position, try layout vertically\r\n        ret.top = layout(windowDimensions.height, submenu.height, { position: 0 /* LayoutAnchorPosition.Before */, offset: entry.top, size: 0 });\r\n        // We didn't have enough room below, but we did above, so we shift down to align the menu\r\n        if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\r\n            ret.top += entry.height;\r\n        }\r\n        return ret;\r\n    }\r\n    createSubmenu(selectFirstItem = true) {\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        if (!this.parentData.submenu) {\r\n            this.updateAriaExpanded('true');\r\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\r\n            this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view');\r\n            // Set the top value of the menu container before construction\r\n            // This allows the menu constructor to calculate the proper max height\r\n            const computedStyles = getWindow(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode);\r\n            const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\r\n            // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\r\n            this.submenuContainer.style.zIndex = '1';\r\n            this.submenuContainer.style.position = 'fixed';\r\n            this.submenuContainer.style.top = '0';\r\n            this.submenuContainer.style.left = '0';\r\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions, this.menuStyle);\r\n            // layout submenu\r\n            const entryBox = this.element.getBoundingClientRect();\r\n            const entryBoxUpdated = {\r\n                top: entryBox.top - paddingTop,\r\n                left: entryBox.left,\r\n                height: entryBox.height + 2 * paddingTop,\r\n                width: entryBox.width\r\n            };\r\n            const viewBox = this.submenuContainer.getBoundingClientRect();\r\n            const window = getWindow(this.element);\r\n            const { top, left } = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection);\r\n            // subtract offsets caused by transform parent\r\n            this.submenuContainer.style.left = `${left - viewBox.left}px`;\r\n            this.submenuContainer.style.top = `${top - viewBox.top}px`;\r\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\r\n                const event = new StandardKeyboardEvent(e);\r\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\r\n                    EventHelper.stop(e, true);\r\n                    this.parentData.parent.focus();\r\n                    this.cleanupExistingSubmenu(true);\r\n                }\r\n            }));\r\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\r\n                const event = new StandardKeyboardEvent(e);\r\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }));\r\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(() => {\r\n                this.parentData.parent.focus();\r\n                this.cleanupExistingSubmenu(true);\r\n            }));\r\n            this.parentData.submenu.focus(selectFirstItem);\r\n            this.mysubmenu = this.parentData.submenu;\r\n        }\r\n        else {\r\n            this.parentData.submenu.focus(false);\r\n        }\r\n    }\r\n    updateAriaExpanded(value) {\r\n        var _a;\r\n        if (this.item) {\r\n            (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\r\n        }\r\n    }\r\n    applyStyle() {\r\n        super.applyStyle();\r\n        const isSelected = this.element && this.element.classList.contains('focused');\r\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\r\n        if (this.submenuIndicator) {\r\n            this.submenuIndicator.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\r\n        }\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.hideScheduler.dispose();\r\n        if (this.mysubmenu) {\r\n            this.mysubmenu.dispose();\r\n            this.mysubmenu = null;\r\n        }\r\n        if (this.submenuContainer) {\r\n            this.submenuContainer = undefined;\r\n        }\r\n    }\r\n}\r\nclass MenuSeparatorActionViewItem extends ActionViewItem {\r\n    constructor(context, action, options, menuStyles) {\r\n        super(context, action, options);\r\n        this.menuStyles = menuStyles;\r\n    }\r\n    render(container) {\r\n        super.render(container);\r\n        if (this.label) {\r\n            this.label.style.borderBottomColor = this.menuStyles.separatorColor ? `${this.menuStyles.separatorColor}` : '';\r\n        }\r\n    }\r\n}\r\nexport function cleanMnemonic(label) {\r\n    const regex = MENU_MNEMONIC_REGEX;\r\n    const matches = regex.exec(label);\r\n    if (!matches) {\r\n        return label;\r\n    }\r\n    const mnemonicInText = !matches[1];\r\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\r\n}\r\nexport function formatRule(c) {\r\n    const fontCharacter = getCodiconFontCharacters()[c.id];\r\n    return `.codicon-${c.id}:before { content: '\\\\${fontCharacter.toString(16)}'; }`;\r\n}\r\nfunction getMenuWidgetCSS(style, isForShadowDom) {\r\n    let result = /* css */ `\r\n.monaco-menu {\r\n\tfont-size: 13px;\r\n\tborder-radius: 5px;\r\n\tmin-width: 160px;\r\n}\r\n\r\n${formatRule(Codicon.menuSelection)}\r\n${formatRule(Codicon.menuSubmenu)}\r\n\r\n.monaco-menu .monaco-action-bar {\r\n\ttext-align: right;\r\n\toverflow: hidden;\r\n\twhite-space: nowrap;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar .actions-container {\r\n\tdisplay: flex;\r\n\tmargin: 0 auto;\r\n\tpadding: 0;\r\n\twidth: 100%;\r\n\tjustify-content: flex-end;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .actions-container {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.reverse .actions-container {\r\n\tflex-direction: row-reverse;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar .action-item {\r\n\tcursor: pointer;\r\n\tdisplay: inline-block;\r\n\ttransition: transform 50ms ease;\r\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\r\n}\r\n\r\n.monaco-menu .monaco-action-bar .action-item.disabled {\r\n\tcursor: default;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.animated .action-item.active {\r\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 =  */\r\n}\r\n\r\n.monaco-menu .monaco-action-bar .action-item .icon,\r\n.monaco-menu .monaco-action-bar .action-item .codicon {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar .action-item .codicon {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar .action-label {\r\n\tfont-size: 11px;\r\n\tmargin-right: 4px;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\r\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\r\n\tcolor: var(--vscode-disabledForeground);\r\n}\r\n\r\n/* Vertical actions */\r\n\r\n.monaco-menu .monaco-action-bar.vertical {\r\n\ttext-align: left;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-item {\r\n\tdisplay: block;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\r\n\tdisplay: block;\r\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\r\n\tpadding-top: 1px;\r\n\tpadding: 30px;\r\n}\r\n\r\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\r\n\tmargin-left: 6px;\r\n}\r\n\r\n/* Action Items */\r\n.monaco-menu .monaco-action-bar .action-item.select-container {\r\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\r\n\tflex: 1;\r\n\tmax-width: 170px;\r\n\tmin-width: 60px;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tmargin-right: 10px;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical {\r\n\tmargin-left: 0;\r\n\toverflow: visible;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .actions-container {\r\n\tdisplay: block;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-item {\r\n\tpadding: 0;\r\n\ttransform: none;\r\n\tdisplay: flex;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\r\n\ttransform: none;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\r\n\tflex: 1 1 auto;\r\n\tdisplay: flex;\r\n\theight: 2em;\r\n\talign-items: center;\r\n\tposition: relative;\r\n\tmargin: 0 4px;\r\n\tborder-radius: 4px;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\r\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\r\n\topacity: unset;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-label {\r\n\tflex: 1 1 auto;\r\n\ttext-decoration: none;\r\n\tpadding: 0 1em;\r\n\tbackground: none;\r\n\tfont-size: 12px;\r\n\tline-height: 1;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .keybinding,\r\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\r\n\tdisplay: inline-block;\r\n\tflex: 2 1 auto;\r\n\tpadding: 0 1em;\r\n\ttext-align: right;\r\n\tfont-size: 12px;\r\n\tline-height: 1;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\r\n\theight: 100%;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\r\n\tfont-size: 16px !important;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\r\n\tmargin-left: auto;\r\n\tmargin-right: -20px;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\r\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\r\n\topacity: 0.4;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\r\n\tdisplay: inline-block;\r\n\tbox-sizing: border-box;\r\n\tmargin: 0;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-item {\r\n\tposition: static;\r\n\toverflow: visible;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\r\n\tposition: absolute;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\r\n\twidth: 100%;\r\n\theight: 0px !important;\r\n\topacity: 1;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\r\n\tpadding: 0.7em 1em 0.1em 1em;\r\n\tfont-weight: bold;\r\n\topacity: 1;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\r\n\tcolor: inherit;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\r\n\tposition: absolute;\r\n\tvisibility: hidden;\r\n\twidth: 1em;\r\n\theight: 100%;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\r\n\tvisibility: visible;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n/* Context Menu */\r\n\r\n.context-view.monaco-menu-container {\r\n\toutline: 0;\r\n\tborder: none;\r\n\tanimation: fadeIn 0.083s linear;\r\n\t-webkit-app-region: no-drag;\r\n}\r\n\r\n.context-view.monaco-menu-container :focus,\r\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\r\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\r\n\toutline: 0;\r\n}\r\n\r\n.hc-black .context-view.monaco-menu-container,\r\n.hc-light .context-view.monaco-menu-container,\r\n:host-context(.hc-black) .context-view.monaco-menu-container,\r\n:host-context(.hc-light) .context-view.monaco-menu-container {\r\n\tbox-shadow: none;\r\n}\r\n\r\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\r\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\r\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\r\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\r\n\tbackground: none;\r\n}\r\n\r\n/* Vertical Action Bar Styles */\r\n\r\n.monaco-menu .monaco-action-bar.vertical {\r\n\tpadding: 4px 0;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\r\n\theight: 2em;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\r\n.monaco-menu .monaco-action-bar.vertical .keybinding {\r\n\tfont-size: inherit;\r\n\tpadding: 0 2em;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\r\n\tfont-size: inherit;\r\n\twidth: 2em;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\r\n\tfont-size: inherit;\r\n\tmargin: 5px 0 !important;\r\n\tpadding: 0;\r\n\tborder-radius: 0;\r\n}\r\n\r\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\r\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\r\n\tmargin-left: 0;\r\n\tmargin-right: 0;\r\n}\r\n\r\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\r\n\tfont-size: 60%;\r\n\tpadding: 0 1.8em;\r\n}\r\n\r\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\r\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\r\n\theight: 100%;\r\n\tmask-size: 10px 10px;\r\n\t-webkit-mask-size: 10px 10px;\r\n}\r\n\r\n.monaco-menu .action-item {\r\n\tcursor: default;\r\n}`;\r\n    if (isForShadowDom) {\r\n        // Only define scrollbar styles when used inside shadow dom,\r\n        // otherwise leave their styling to the global workbench styling.\r\n        result += `\r\n\t\t\t/* Arrows */\r\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tfont-size: 11px !important;\r\n\t\t\t}\r\n\r\n\t\t\t.monaco-scrollable-element > .visible {\r\n\t\t\t\topacity: 1;\r\n\r\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\r\n\t\t\t\tbackground:rgba(0,0,0,0);\r\n\r\n\t\t\t\ttransition: opacity 100ms linear;\r\n\t\t\t}\r\n\t\t\t.monaco-scrollable-element > .invisible {\r\n\t\t\t\topacity: 0;\r\n\t\t\t\tpointer-events: none;\r\n\t\t\t}\r\n\t\t\t.monaco-scrollable-element > .invisible.fade {\r\n\t\t\t\ttransition: opacity 800ms linear;\r\n\t\t\t}\r\n\r\n\t\t\t/* Scrollable Content Inset Shadow */\r\n\t\t\t.monaco-scrollable-element > .shadow {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tdisplay: none;\r\n\t\t\t}\r\n\t\t\t.monaco-scrollable-element > .shadow.top {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tleft: 3px;\r\n\t\t\t\theight: 3px;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t\t.monaco-scrollable-element > .shadow.left {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\ttop: 3px;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\twidth: 3px;\r\n\t\t\t}\r\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\theight: 3px;\r\n\t\t\t\twidth: 3px;\r\n\t\t\t}\r\n\t\t`;\r\n        // Scrollbars\r\n        const scrollbarShadowColor = style.scrollbarShadow;\r\n        if (scrollbarShadowColor) {\r\n            result += `\r\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\r\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 0 6px 6px -6px inset;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\r\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 0 6px -6px inset;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\r\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 6px 6px -6px inset;\r\n\t\t\t\t}\r\n\t\t\t`;\r\n        }\r\n        const scrollbarSliderBackgroundColor = style.scrollbarSliderBackground;\r\n        if (scrollbarSliderBackgroundColor) {\r\n            result += `\r\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\r\n\t\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\r\n\t\t\t\t}\r\n\t\t\t`;\r\n        }\r\n        const scrollbarSliderHoverBackgroundColor = style.scrollbarSliderHoverBackground;\r\n        if (scrollbarSliderHoverBackgroundColor) {\r\n            result += `\r\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\r\n\t\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\r\n\t\t\t\t}\r\n\t\t\t`;\r\n        }\r\n        const scrollbarSliderActiveBackgroundColor = style.scrollbarSliderActiveBackground;\r\n        if (scrollbarSliderActiveBackgroundColor) {\r\n            result += `\r\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\r\n\t\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\r\n\t\t\t\t}\r\n\t\t\t`;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { $, addDisposableListener, EventType, getActiveElement, getWindow, isAncestor } from '../../../base/browser/dom.js';\r\nimport { StandardMouseEvent } from '../../../base/browser/mouseEvent.js';\r\nimport { Menu } from '../../../base/browser/ui/menu/menu.js';\r\nimport { ActionRunner } from '../../../base/common/actions.js';\r\nimport { isCancellationError } from '../../../base/common/errors.js';\r\nimport { combinedDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { defaultMenuStyles } from '../../theme/browser/defaultStyles.js';\r\nexport class ContextMenuHandler {\r\n    constructor(contextViewService, telemetryService, notificationService, keybindingService) {\r\n        this.contextViewService = contextViewService;\r\n        this.telemetryService = telemetryService;\r\n        this.notificationService = notificationService;\r\n        this.keybindingService = keybindingService;\r\n        this.focusToReturn = null;\r\n        this.lastContainer = null;\r\n        this.block = null;\r\n        this.blockDisposable = null;\r\n        this.options = { blockMouse: true };\r\n    }\r\n    configure(options) {\r\n        this.options = options;\r\n    }\r\n    showContextMenu(delegate) {\r\n        const actions = delegate.getActions();\r\n        if (!actions.length) {\r\n            return; // Don't render an empty context menu\r\n        }\r\n        this.focusToReturn = getActiveElement();\r\n        let menu;\r\n        const shadowRootElement = delegate.domForShadowRoot instanceof HTMLElement ? delegate.domForShadowRoot : undefined;\r\n        this.contextViewService.showContextView({\r\n            getAnchor: () => delegate.getAnchor(),\r\n            canRelayout: false,\r\n            anchorAlignment: delegate.anchorAlignment,\r\n            anchorAxisAlignment: delegate.anchorAxisAlignment,\r\n            render: (container) => {\r\n                var _a;\r\n                this.lastContainer = container;\r\n                const className = delegate.getMenuClassName ? delegate.getMenuClassName() : '';\r\n                if (className) {\r\n                    container.className += ' ' + className;\r\n                }\r\n                // Render invisible div to block mouse interaction in the rest of the UI\r\n                if (this.options.blockMouse) {\r\n                    this.block = container.appendChild($('.context-view-block'));\r\n                    this.block.style.position = 'fixed';\r\n                    this.block.style.cursor = 'initial';\r\n                    this.block.style.left = '0';\r\n                    this.block.style.top = '0';\r\n                    this.block.style.width = '100%';\r\n                    this.block.style.height = '100%';\r\n                    this.block.style.zIndex = '-1';\r\n                    (_a = this.blockDisposable) === null || _a === void 0 ? void 0 : _a.dispose();\r\n                    this.blockDisposable = addDisposableListener(this.block, EventType.MOUSE_DOWN, e => e.stopPropagation());\r\n                }\r\n                const menuDisposables = new DisposableStore();\r\n                const actionRunner = delegate.actionRunner || new ActionRunner();\r\n                actionRunner.onWillRun(evt => this.onActionRun(evt, !delegate.skipTelemetry), this, menuDisposables);\r\n                actionRunner.onDidRun(this.onDidActionRun, this, menuDisposables);\r\n                menu = new Menu(container, actions, {\r\n                    actionViewItemProvider: delegate.getActionViewItem,\r\n                    context: delegate.getActionsContext ? delegate.getActionsContext() : null,\r\n                    actionRunner,\r\n                    getKeyBinding: delegate.getKeyBinding ? delegate.getKeyBinding : action => this.keybindingService.lookupKeybinding(action.id)\r\n                }, defaultMenuStyles);\r\n                menu.onDidCancel(() => this.contextViewService.hideContextView(true), null, menuDisposables);\r\n                menu.onDidBlur(() => this.contextViewService.hideContextView(true), null, menuDisposables);\r\n                const targetWindow = getWindow(container);\r\n                menuDisposables.add(addDisposableListener(targetWindow, EventType.BLUR, () => this.contextViewService.hideContextView(true)));\r\n                menuDisposables.add(addDisposableListener(targetWindow, EventType.MOUSE_DOWN, (e) => {\r\n                    if (e.defaultPrevented) {\r\n                        return;\r\n                    }\r\n                    const event = new StandardMouseEvent(targetWindow, e);\r\n                    let element = event.target;\r\n                    // Don't do anything as we are likely creating a context menu\r\n                    if (event.rightButton) {\r\n                        return;\r\n                    }\r\n                    while (element) {\r\n                        if (element === container) {\r\n                            return;\r\n                        }\r\n                        element = element.parentElement;\r\n                    }\r\n                    this.contextViewService.hideContextView(true);\r\n                }));\r\n                return combinedDisposable(menuDisposables, menu);\r\n            },\r\n            focus: () => {\r\n                menu === null || menu === void 0 ? void 0 : menu.focus(!!delegate.autoSelectFirstItem);\r\n            },\r\n            onHide: (didCancel) => {\r\n                var _a, _b, _c;\r\n                (_a = delegate.onHide) === null || _a === void 0 ? void 0 : _a.call(delegate, !!didCancel);\r\n                if (this.block) {\r\n                    this.block.remove();\r\n                    this.block = null;\r\n                }\r\n                (_b = this.blockDisposable) === null || _b === void 0 ? void 0 : _b.dispose();\r\n                this.blockDisposable = null;\r\n                if (!!this.lastContainer && (getActiveElement() === this.lastContainer || isAncestor(getActiveElement(), this.lastContainer))) {\r\n                    (_c = this.focusToReturn) === null || _c === void 0 ? void 0 : _c.focus();\r\n                }\r\n                this.lastContainer = null;\r\n            }\r\n        }, shadowRootElement, !!shadowRootElement);\r\n    }\r\n    onActionRun(e, logTelemetry) {\r\n        if (logTelemetry) {\r\n            this.telemetryService.publicLog2('workbenchActionExecuted', { id: e.action.id, from: 'contextMenu' });\r\n        }\r\n        this.contextViewService.hideContextView(false);\r\n    }\r\n    onDidActionRun(e) {\r\n        if (e.error && !isCancellationError(e.error)) {\r\n            this.notificationService.error(e.error);\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { ModifierKeyEmitter } from '../../../base/browser/dom.js';\r\nimport { Separator } from '../../../base/common/actions.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { createAndFillInContextMenuActions } from '../../actions/browser/menuEntryActionViewItem.js';\r\nimport { IMenuService, MenuId } from '../../actions/common/actions.js';\r\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\r\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\r\nimport { INotificationService } from '../../notification/common/notification.js';\r\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\r\nimport { ContextMenuHandler } from './contextMenuHandler.js';\r\nimport { IContextViewService } from './contextView.js';\r\nlet ContextMenuService = class ContextMenuService extends Disposable {\r\n    get contextMenuHandler() {\r\n        if (!this._contextMenuHandler) {\r\n            this._contextMenuHandler = new ContextMenuHandler(this.contextViewService, this.telemetryService, this.notificationService, this.keybindingService);\r\n        }\r\n        return this._contextMenuHandler;\r\n    }\r\n    constructor(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService) {\r\n        super();\r\n        this.telemetryService = telemetryService;\r\n        this.notificationService = notificationService;\r\n        this.contextViewService = contextViewService;\r\n        this.keybindingService = keybindingService;\r\n        this.menuService = menuService;\r\n        this.contextKeyService = contextKeyService;\r\n        this._contextMenuHandler = undefined;\r\n        this._onDidShowContextMenu = this._store.add(new Emitter());\r\n        this._onDidHideContextMenu = this._store.add(new Emitter());\r\n    }\r\n    configure(options) {\r\n        this.contextMenuHandler.configure(options);\r\n    }\r\n    // ContextMenu\r\n    showContextMenu(delegate) {\r\n        delegate = ContextMenuMenuDelegate.transform(delegate, this.menuService, this.contextKeyService);\r\n        this.contextMenuHandler.showContextMenu({\r\n            ...delegate,\r\n            onHide: (didCancel) => {\r\n                var _a;\r\n                (_a = delegate.onHide) === null || _a === void 0 ? void 0 : _a.call(delegate, didCancel);\r\n                this._onDidHideContextMenu.fire();\r\n            }\r\n        });\r\n        ModifierKeyEmitter.getInstance().resetKeyStatus();\r\n        this._onDidShowContextMenu.fire();\r\n    }\r\n};\r\nContextMenuService = __decorate([\r\n    __param(0, ITelemetryService),\r\n    __param(1, INotificationService),\r\n    __param(2, IContextViewService),\r\n    __param(3, IKeybindingService),\r\n    __param(4, IMenuService),\r\n    __param(5, IContextKeyService)\r\n], ContextMenuService);\r\nexport { ContextMenuService };\r\nexport var ContextMenuMenuDelegate;\r\n(function (ContextMenuMenuDelegate) {\r\n    function is(thing) {\r\n        return thing && thing.menuId instanceof MenuId;\r\n    }\r\n    function transform(delegate, menuService, globalContextKeyService) {\r\n        if (!is(delegate)) {\r\n            return delegate;\r\n        }\r\n        const { menuId, menuActionOptions, contextKeyService } = delegate;\r\n        return {\r\n            ...delegate,\r\n            getActions: () => {\r\n                const target = [];\r\n                if (menuId) {\r\n                    const menu = menuService.createMenu(menuId, contextKeyService !== null && contextKeyService !== void 0 ? contextKeyService : globalContextKeyService);\r\n                    createAndFillInContextMenuActions(menu, menuActionOptions, target);\r\n                    menu.dispose();\r\n                }\r\n                if (!delegate.getActions) {\r\n                    return target;\r\n                }\r\n                else {\r\n                    return Separator.join(delegate.getActions(), target);\r\n                }\r\n            }\r\n        };\r\n    }\r\n    ContextMenuMenuDelegate.transform = transform;\r\n})(ContextMenuMenuDelegate || (ContextMenuMenuDelegate = {}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport var EditorOpenSource;\r\n(function (EditorOpenSource) {\r\n    /**\r\n     * Default: the editor is opening via a programmatic call\r\n     * to the editor service API.\r\n     */\r\n    EditorOpenSource[EditorOpenSource[\"API\"] = 0] = \"API\";\r\n    /**\r\n     * Indicates that a user action triggered the opening, e.g.\r\n     * via mouse or keyboard use.\r\n     */\r\n    EditorOpenSource[EditorOpenSource[\"USER\"] = 1] = \"USER\";\r\n})(EditorOpenSource || (EditorOpenSource = {}));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { mainWindow } from '../../../base/browser/window.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { LinkedList } from '../../../base/common/linkedList.js';\r\nimport { ResourceMap } from '../../../base/common/map.js';\r\nimport { parse } from '../../../base/common/marshalling.js';\r\nimport { matchesScheme, matchesSomeScheme, Schemas } from '../../../base/common/network.js';\r\nimport { normalizePath } from '../../../base/common/resources.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { ICodeEditorService } from './codeEditorService.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { EditorOpenSource } from '../../../platform/editor/common/editor.js';\r\nimport { extractSelection } from '../../../platform/opener/common/opener.js';\r\nlet CommandOpener = class CommandOpener {\r\n    constructor(_commandService) {\r\n        this._commandService = _commandService;\r\n    }\r\n    async open(target, options) {\r\n        if (!matchesScheme(target, Schemas.command)) {\r\n            return false;\r\n        }\r\n        if (!(options === null || options === void 0 ? void 0 : options.allowCommands)) {\r\n            // silently ignore commands when command-links are disabled, also\r\n            // suppress other openers by returning TRUE\r\n            return true;\r\n        }\r\n        if (typeof target === 'string') {\r\n            target = URI.parse(target);\r\n        }\r\n        if (Array.isArray(options.allowCommands)) {\r\n            // Only allow specific commands\r\n            if (!options.allowCommands.includes(target.path)) {\r\n                // Suppress other openers by returning TRUE\r\n                return true;\r\n            }\r\n        }\r\n        // execute as command\r\n        let args = [];\r\n        try {\r\n            args = parse(decodeURIComponent(target.query));\r\n        }\r\n        catch (_a) {\r\n            // ignore and retry\r\n            try {\r\n                args = parse(target.query);\r\n            }\r\n            catch (_b) {\r\n                // ignore error\r\n            }\r\n        }\r\n        if (!Array.isArray(args)) {\r\n            args = [args];\r\n        }\r\n        await this._commandService.executeCommand(target.path, ...args);\r\n        return true;\r\n    }\r\n};\r\nCommandOpener = __decorate([\r\n    __param(0, ICommandService)\r\n], CommandOpener);\r\nlet EditorOpener = class EditorOpener {\r\n    constructor(_editorService) {\r\n        this._editorService = _editorService;\r\n    }\r\n    async open(target, options) {\r\n        if (typeof target === 'string') {\r\n            target = URI.parse(target);\r\n        }\r\n        const { selection, uri } = extractSelection(target);\r\n        target = uri;\r\n        if (target.scheme === Schemas.file) {\r\n            target = normalizePath(target); // workaround for non-normalized paths (https://github.com/microsoft/vscode/issues/12954)\r\n        }\r\n        await this._editorService.openCodeEditor({\r\n            resource: target,\r\n            options: {\r\n                selection,\r\n                source: (options === null || options === void 0 ? void 0 : options.fromUserGesture) ? EditorOpenSource.USER : EditorOpenSource.API,\r\n                ...options === null || options === void 0 ? void 0 : options.editorOptions\r\n            }\r\n        }, this._editorService.getFocusedCodeEditor(), options === null || options === void 0 ? void 0 : options.openToSide);\r\n        return true;\r\n    }\r\n};\r\nEditorOpener = __decorate([\r\n    __param(0, ICodeEditorService)\r\n], EditorOpener);\r\nlet OpenerService = class OpenerService {\r\n    constructor(editorService, commandService) {\r\n        this._openers = new LinkedList();\r\n        this._validators = new LinkedList();\r\n        this._resolvers = new LinkedList();\r\n        this._resolvedUriTargets = new ResourceMap(uri => uri.with({ path: null, fragment: null, query: null }).toString());\r\n        this._externalOpeners = new LinkedList();\r\n        // Default external opener is going through window.open()\r\n        this._defaultExternalOpener = {\r\n            openExternal: async (href) => {\r\n                // ensure to open HTTP/HTTPS links into new windows\r\n                // to not trigger a navigation. Any other link is\r\n                // safe to be set as HREF to prevent a blank window\r\n                // from opening.\r\n                if (matchesSomeScheme(href, Schemas.http, Schemas.https)) {\r\n                    dom.windowOpenNoOpener(href);\r\n                }\r\n                else {\r\n                    mainWindow.location.href = href;\r\n                }\r\n                return true;\r\n            }\r\n        };\r\n        // Default opener: any external, maito, http(s), command, and catch-all-editors\r\n        this._openers.push({\r\n            open: async (target, options) => {\r\n                if ((options === null || options === void 0 ? void 0 : options.openExternal) || matchesSomeScheme(target, Schemas.mailto, Schemas.http, Schemas.https, Schemas.vsls)) {\r\n                    // open externally\r\n                    await this._doOpenExternal(target, options);\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n        this._openers.push(new CommandOpener(commandService));\r\n        this._openers.push(new EditorOpener(editorService));\r\n    }\r\n    registerOpener(opener) {\r\n        const remove = this._openers.unshift(opener);\r\n        return { dispose: remove };\r\n    }\r\n    async open(target, options) {\r\n        var _a;\r\n        // check with contributed validators\r\n        const targetURI = typeof target === 'string' ? URI.parse(target) : target;\r\n        // validate against the original URI that this URI resolves to, if one exists\r\n        const validationTarget = (_a = this._resolvedUriTargets.get(targetURI)) !== null && _a !== void 0 ? _a : target;\r\n        for (const validator of this._validators) {\r\n            if (!(await validator.shouldOpen(validationTarget, options))) {\r\n                return false;\r\n            }\r\n        }\r\n        // check with contributed openers\r\n        for (const opener of this._openers) {\r\n            const handled = await opener.open(target, options);\r\n            if (handled) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    async resolveExternalUri(resource, options) {\r\n        for (const resolver of this._resolvers) {\r\n            try {\r\n                const result = await resolver.resolveExternalUri(resource, options);\r\n                if (result) {\r\n                    if (!this._resolvedUriTargets.has(result.resolved)) {\r\n                        this._resolvedUriTargets.set(result.resolved, resource);\r\n                    }\r\n                    return result;\r\n                }\r\n            }\r\n            catch (_a) {\r\n                // noop\r\n            }\r\n        }\r\n        throw new Error('Could not resolve external URI: ' + resource.toString());\r\n    }\r\n    async _doOpenExternal(resource, options) {\r\n        //todo@jrieken IExternalUriResolver should support `uri: URI | string`\r\n        const uri = typeof resource === 'string' ? URI.parse(resource) : resource;\r\n        let externalUri;\r\n        try {\r\n            externalUri = (await this.resolveExternalUri(uri, options)).resolved;\r\n        }\r\n        catch (_a) {\r\n            externalUri = uri;\r\n        }\r\n        let href;\r\n        if (typeof resource === 'string' && uri.toString() === externalUri.toString()) {\r\n            // open the url-string AS IS\r\n            href = resource;\r\n        }\r\n        else {\r\n            // open URI using the toString(noEncode)+encodeURI-trick\r\n            href = encodeURI(externalUri.toString(true));\r\n        }\r\n        if (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) {\r\n            const preferredOpenerId = typeof (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) === 'string' ? options === null || options === void 0 ? void 0 : options.allowContributedOpeners : undefined;\r\n            for (const opener of this._externalOpeners) {\r\n                const didOpen = await opener.openExternal(href, {\r\n                    sourceUri: uri,\r\n                    preferredOpenerId,\r\n                }, CancellationToken.None);\r\n                if (didOpen) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return this._defaultExternalOpener.openExternal(href, { sourceUri: uri }, CancellationToken.None);\r\n    }\r\n    dispose() {\r\n        this._validators.clear();\r\n    }\r\n};\r\nOpenerService = __decorate([\r\n    __param(0, ICodeEditorService),\r\n    __param(1, ICommandService)\r\n], OpenerService);\r\nexport { OpenerService };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { IMarkerService, MarkerSeverity } from '../../../platform/markers/common/markers.js';\r\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\r\nimport { OverviewRulerLane, MinimapPosition } from '../model.js';\r\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\r\nimport { overviewRulerWarning, overviewRulerInfo, overviewRulerError } from '../core/editorColorRegistry.js';\r\nimport { IModelService } from './model.js';\r\nimport { Range } from '../core/range.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { minimapInfo, minimapWarning, minimapError } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { BidirectionalMap, ResourceMap } from '../../../base/common/map.js';\r\nimport { diffSets } from '../../../base/common/collections.js';\r\nlet MarkerDecorationsService = class MarkerDecorationsService extends Disposable {\r\n    constructor(modelService, _markerService) {\r\n        super();\r\n        this._markerService = _markerService;\r\n        this._onDidChangeMarker = this._register(new Emitter());\r\n        this._markerDecorations = new ResourceMap();\r\n        modelService.getModels().forEach(model => this._onModelAdded(model));\r\n        this._register(modelService.onModelAdded(this._onModelAdded, this));\r\n        this._register(modelService.onModelRemoved(this._onModelRemoved, this));\r\n        this._register(this._markerService.onMarkerChanged(this._handleMarkerChange, this));\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._markerDecorations.forEach(value => value.dispose());\r\n        this._markerDecorations.clear();\r\n    }\r\n    getMarker(uri, decoration) {\r\n        const markerDecorations = this._markerDecorations.get(uri);\r\n        return markerDecorations ? (markerDecorations.getMarker(decoration) || null) : null;\r\n    }\r\n    _handleMarkerChange(changedResources) {\r\n        changedResources.forEach((resource) => {\r\n            const markerDecorations = this._markerDecorations.get(resource);\r\n            if (markerDecorations) {\r\n                this._updateDecorations(markerDecorations);\r\n            }\r\n        });\r\n    }\r\n    _onModelAdded(model) {\r\n        const markerDecorations = new MarkerDecorations(model);\r\n        this._markerDecorations.set(model.uri, markerDecorations);\r\n        this._updateDecorations(markerDecorations);\r\n    }\r\n    _onModelRemoved(model) {\r\n        var _a;\r\n        const markerDecorations = this._markerDecorations.get(model.uri);\r\n        if (markerDecorations) {\r\n            markerDecorations.dispose();\r\n            this._markerDecorations.delete(model.uri);\r\n        }\r\n        // clean up markers for internal, transient models\r\n        if (model.uri.scheme === Schemas.inMemory\r\n            || model.uri.scheme === Schemas.internal\r\n            || model.uri.scheme === Schemas.vscode) {\r\n            (_a = this._markerService) === null || _a === void 0 ? void 0 : _a.read({ resource: model.uri }).map(marker => marker.owner).forEach(owner => this._markerService.remove(owner, [model.uri]));\r\n        }\r\n    }\r\n    _updateDecorations(markerDecorations) {\r\n        // Limit to the first 500 errors/warnings\r\n        const markers = this._markerService.read({ resource: markerDecorations.model.uri, take: 500 });\r\n        if (markerDecorations.update(markers)) {\r\n            this._onDidChangeMarker.fire(markerDecorations.model);\r\n        }\r\n    }\r\n};\r\nMarkerDecorationsService = __decorate([\r\n    __param(0, IModelService),\r\n    __param(1, IMarkerService)\r\n], MarkerDecorationsService);\r\nexport { MarkerDecorationsService };\r\nclass MarkerDecorations extends Disposable {\r\n    constructor(model) {\r\n        super();\r\n        this.model = model;\r\n        this._map = new BidirectionalMap();\r\n        this._register(toDisposable(() => {\r\n            this.model.deltaDecorations([...this._map.values()], []);\r\n            this._map.clear();\r\n        }));\r\n    }\r\n    update(markers) {\r\n        // We use the fact that marker instances are not recreated when different owners\r\n        // update. So we can compare references to find out what changed since the last update.\r\n        const { added, removed } = diffSets(new Set(this._map.keys()), new Set(markers));\r\n        if (added.length === 0 && removed.length === 0) {\r\n            return false;\r\n        }\r\n        const oldIds = removed.map(marker => this._map.get(marker));\r\n        const newDecorations = added.map(marker => {\r\n            return {\r\n                range: this._createDecorationRange(this.model, marker),\r\n                options: this._createDecorationOption(marker)\r\n            };\r\n        });\r\n        const ids = this.model.deltaDecorations(oldIds, newDecorations);\r\n        for (const removedMarker of removed) {\r\n            this._map.delete(removedMarker);\r\n        }\r\n        for (let index = 0; index < ids.length; index++) {\r\n            this._map.set(added[index], ids[index]);\r\n        }\r\n        return true;\r\n    }\r\n    getMarker(decoration) {\r\n        return this._map.getKey(decoration.id);\r\n    }\r\n    _createDecorationRange(model, rawMarker) {\r\n        let ret = Range.lift(rawMarker);\r\n        if (rawMarker.severity === MarkerSeverity.Hint && !this._hasMarkerTag(rawMarker, 1 /* MarkerTag.Unnecessary */) && !this._hasMarkerTag(rawMarker, 2 /* MarkerTag.Deprecated */)) {\r\n            // * never render hints on multiple lines\r\n            // * make enough space for three dots\r\n            ret = ret.setEndPosition(ret.startLineNumber, ret.startColumn + 2);\r\n        }\r\n        ret = model.validateRange(ret);\r\n        if (ret.isEmpty()) {\r\n            const maxColumn = model.getLineLastNonWhitespaceColumn(ret.startLineNumber) ||\r\n                model.getLineMaxColumn(ret.startLineNumber);\r\n            if (maxColumn === 1 || ret.endColumn >= maxColumn) {\r\n                // empty line or behind eol\r\n                // keep the range as is, it will be rendered 1ch wide\r\n                return ret;\r\n            }\r\n            const word = model.getWordAtPosition(ret.getStartPosition());\r\n            if (word) {\r\n                ret = new Range(ret.startLineNumber, word.startColumn, ret.endLineNumber, word.endColumn);\r\n            }\r\n        }\r\n        else if (rawMarker.endColumn === Number.MAX_VALUE && rawMarker.startColumn === 1 && ret.startLineNumber === ret.endLineNumber) {\r\n            const minColumn = model.getLineFirstNonWhitespaceColumn(rawMarker.startLineNumber);\r\n            if (minColumn < ret.endColumn) {\r\n                ret = new Range(ret.startLineNumber, minColumn, ret.endLineNumber, ret.endColumn);\r\n                rawMarker.startColumn = minColumn;\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    _createDecorationOption(marker) {\r\n        let className;\r\n        let color = undefined;\r\n        let zIndex;\r\n        let inlineClassName = undefined;\r\n        let minimap;\r\n        switch (marker.severity) {\r\n            case MarkerSeverity.Hint:\r\n                if (this._hasMarkerTag(marker, 2 /* MarkerTag.Deprecated */)) {\r\n                    className = undefined;\r\n                }\r\n                else if (this._hasMarkerTag(marker, 1 /* MarkerTag.Unnecessary */)) {\r\n                    className = \"squiggly-unnecessary\" /* ClassName.EditorUnnecessaryDecoration */;\r\n                }\r\n                else {\r\n                    className = \"squiggly-hint\" /* ClassName.EditorHintDecoration */;\r\n                }\r\n                zIndex = 0;\r\n                break;\r\n            case MarkerSeverity.Info:\r\n                className = \"squiggly-info\" /* ClassName.EditorInfoDecoration */;\r\n                color = themeColorFromId(overviewRulerInfo);\r\n                zIndex = 10;\r\n                minimap = {\r\n                    color: themeColorFromId(minimapInfo),\r\n                    position: MinimapPosition.Inline\r\n                };\r\n                break;\r\n            case MarkerSeverity.Warning:\r\n                className = \"squiggly-warning\" /* ClassName.EditorWarningDecoration */;\r\n                color = themeColorFromId(overviewRulerWarning);\r\n                zIndex = 20;\r\n                minimap = {\r\n                    color: themeColorFromId(minimapWarning),\r\n                    position: MinimapPosition.Inline\r\n                };\r\n                break;\r\n            case MarkerSeverity.Error:\r\n            default:\r\n                className = \"squiggly-error\" /* ClassName.EditorErrorDecoration */;\r\n                color = themeColorFromId(overviewRulerError);\r\n                zIndex = 30;\r\n                minimap = {\r\n                    color: themeColorFromId(minimapError),\r\n                    position: MinimapPosition.Inline\r\n                };\r\n                break;\r\n        }\r\n        if (marker.tags) {\r\n            if (marker.tags.indexOf(1 /* MarkerTag.Unnecessary */) !== -1) {\r\n                inlineClassName = \"squiggly-inline-unnecessary\" /* ClassName.EditorUnnecessaryInlineDecoration */;\r\n            }\r\n            if (marker.tags.indexOf(2 /* MarkerTag.Deprecated */) !== -1) {\r\n                inlineClassName = \"squiggly-inline-deprecated\" /* ClassName.EditorDeprecatedInlineDecoration */;\r\n            }\r\n        }\r\n        return {\r\n            description: 'marker-decoration',\r\n            stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\r\n            className,\r\n            showIfCollapsed: true,\r\n            overviewRuler: {\r\n                color,\r\n                position: OverviewRulerLane.Right\r\n            },\r\n            minimap,\r\n            zIndex,\r\n            inlineClassName,\r\n        };\r\n    }\r\n    _hasMarkerTag(marker, tag) {\r\n        if (marker.tags) {\r\n            return marker.tags.indexOf(tag) >= 0;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar ModelService_1;\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../base/common/platform.js';\r\nimport { TextModel } from '../model/textModel.js';\r\nimport { EDITOR_MODEL_DEFAULTS } from '../core/textModelDefaults.js';\r\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\r\nimport { ILanguageService } from '../languages/language.js';\r\nimport { ITextResourcePropertiesService } from './textResourceConfiguration.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { IUndoRedoService } from '../../../platform/undoRedo/common/undoRedo.js';\r\nimport { StringSHA1 } from '../../../base/common/hash.js';\r\nimport { isEditStackElement } from '../model/editStack.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { equals } from '../../../base/common/objects.js';\r\nimport { ILanguageConfigurationService } from '../languages/languageConfigurationRegistry.js';\r\nfunction MODEL_ID(resource) {\r\n    return resource.toString();\r\n}\r\nclass ModelData {\r\n    constructor(model, onWillDispose, onDidChangeLanguage) {\r\n        this.model = model;\r\n        this._modelEventListeners = new DisposableStore();\r\n        this.model = model;\r\n        this._modelEventListeners.add(model.onWillDispose(() => onWillDispose(model)));\r\n        this._modelEventListeners.add(model.onDidChangeLanguage((e) => onDidChangeLanguage(model, e)));\r\n    }\r\n    dispose() {\r\n        this._modelEventListeners.dispose();\r\n    }\r\n}\r\nconst DEFAULT_EOL = (platform.isLinux || platform.isMacintosh) ? 1 /* DefaultEndOfLine.LF */ : 2 /* DefaultEndOfLine.CRLF */;\r\nclass DisposedModelInfo {\r\n    constructor(uri, initialUndoRedoSnapshot, time, sharesUndoRedoStack, heapSize, sha1, versionId, alternativeVersionId) {\r\n        this.uri = uri;\r\n        this.initialUndoRedoSnapshot = initialUndoRedoSnapshot;\r\n        this.time = time;\r\n        this.sharesUndoRedoStack = sharesUndoRedoStack;\r\n        this.heapSize = heapSize;\r\n        this.sha1 = sha1;\r\n        this.versionId = versionId;\r\n        this.alternativeVersionId = alternativeVersionId;\r\n    }\r\n}\r\nlet ModelService = ModelService_1 = class ModelService extends Disposable {\r\n    constructor(_configurationService, _resourcePropertiesService, _undoRedoService, _languageService, _languageConfigurationService) {\r\n        super();\r\n        this._configurationService = _configurationService;\r\n        this._resourcePropertiesService = _resourcePropertiesService;\r\n        this._undoRedoService = _undoRedoService;\r\n        this._languageService = _languageService;\r\n        this._languageConfigurationService = _languageConfigurationService;\r\n        this._onModelAdded = this._register(new Emitter());\r\n        this.onModelAdded = this._onModelAdded.event;\r\n        this._onModelRemoved = this._register(new Emitter());\r\n        this.onModelRemoved = this._onModelRemoved.event;\r\n        this._onModelModeChanged = this._register(new Emitter());\r\n        this.onModelLanguageChanged = this._onModelModeChanged.event;\r\n        this._modelCreationOptionsByLanguageAndResource = Object.create(null);\r\n        this._models = {};\r\n        this._disposedModels = new Map();\r\n        this._disposedModelsHeapSize = 0;\r\n        this._register(this._configurationService.onDidChangeConfiguration(e => this._updateModelOptions(e)));\r\n        this._updateModelOptions(undefined);\r\n    }\r\n    static _readModelOptions(config, isForSimpleWidget) {\r\n        var _a;\r\n        let tabSize = EDITOR_MODEL_DEFAULTS.tabSize;\r\n        if (config.editor && typeof config.editor.tabSize !== 'undefined') {\r\n            const parsedTabSize = parseInt(config.editor.tabSize, 10);\r\n            if (!isNaN(parsedTabSize)) {\r\n                tabSize = parsedTabSize;\r\n            }\r\n            if (tabSize < 1) {\r\n                tabSize = 1;\r\n            }\r\n        }\r\n        let indentSize = 'tabSize';\r\n        if (config.editor && typeof config.editor.indentSize !== 'undefined' && config.editor.indentSize !== 'tabSize') {\r\n            const parsedIndentSize = parseInt(config.editor.indentSize, 10);\r\n            if (!isNaN(parsedIndentSize)) {\r\n                indentSize = Math.max(parsedIndentSize, 1);\r\n            }\r\n        }\r\n        let insertSpaces = EDITOR_MODEL_DEFAULTS.insertSpaces;\r\n        if (config.editor && typeof config.editor.insertSpaces !== 'undefined') {\r\n            insertSpaces = (config.editor.insertSpaces === 'false' ? false : Boolean(config.editor.insertSpaces));\r\n        }\r\n        let newDefaultEOL = DEFAULT_EOL;\r\n        const eol = config.eol;\r\n        if (eol === '\\r\\n') {\r\n            newDefaultEOL = 2 /* DefaultEndOfLine.CRLF */;\r\n        }\r\n        else if (eol === '\\n') {\r\n            newDefaultEOL = 1 /* DefaultEndOfLine.LF */;\r\n        }\r\n        let trimAutoWhitespace = EDITOR_MODEL_DEFAULTS.trimAutoWhitespace;\r\n        if (config.editor && typeof config.editor.trimAutoWhitespace !== 'undefined') {\r\n            trimAutoWhitespace = (config.editor.trimAutoWhitespace === 'false' ? false : Boolean(config.editor.trimAutoWhitespace));\r\n        }\r\n        let detectIndentation = EDITOR_MODEL_DEFAULTS.detectIndentation;\r\n        if (config.editor && typeof config.editor.detectIndentation !== 'undefined') {\r\n            detectIndentation = (config.editor.detectIndentation === 'false' ? false : Boolean(config.editor.detectIndentation));\r\n        }\r\n        let largeFileOptimizations = EDITOR_MODEL_DEFAULTS.largeFileOptimizations;\r\n        if (config.editor && typeof config.editor.largeFileOptimizations !== 'undefined') {\r\n            largeFileOptimizations = (config.editor.largeFileOptimizations === 'false' ? false : Boolean(config.editor.largeFileOptimizations));\r\n        }\r\n        let bracketPairColorizationOptions = EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions;\r\n        if (((_a = config.editor) === null || _a === void 0 ? void 0 : _a.bracketPairColorization) && typeof config.editor.bracketPairColorization === 'object') {\r\n            bracketPairColorizationOptions = {\r\n                enabled: !!config.editor.bracketPairColorization.enabled,\r\n                independentColorPoolPerBracketType: !!config.editor.bracketPairColorization.independentColorPoolPerBracketType\r\n            };\r\n        }\r\n        return {\r\n            isForSimpleWidget: isForSimpleWidget,\r\n            tabSize: tabSize,\r\n            indentSize: indentSize,\r\n            insertSpaces: insertSpaces,\r\n            detectIndentation: detectIndentation,\r\n            defaultEOL: newDefaultEOL,\r\n            trimAutoWhitespace: trimAutoWhitespace,\r\n            largeFileOptimizations: largeFileOptimizations,\r\n            bracketPairColorizationOptions\r\n        };\r\n    }\r\n    _getEOL(resource, language) {\r\n        if (resource) {\r\n            return this._resourcePropertiesService.getEOL(resource, language);\r\n        }\r\n        const eol = this._configurationService.getValue('files.eol', { overrideIdentifier: language });\r\n        if (eol && typeof eol === 'string' && eol !== 'auto') {\r\n            return eol;\r\n        }\r\n        return platform.OS === 3 /* platform.OperatingSystem.Linux */ || platform.OS === 2 /* platform.OperatingSystem.Macintosh */ ? '\\n' : '\\r\\n';\r\n    }\r\n    _shouldRestoreUndoStack() {\r\n        const result = this._configurationService.getValue('files.restoreUndoStack');\r\n        if (typeof result === 'boolean') {\r\n            return result;\r\n        }\r\n        return true;\r\n    }\r\n    getCreationOptions(languageIdOrSelection, resource, isForSimpleWidget) {\r\n        const language = (typeof languageIdOrSelection === 'string' ? languageIdOrSelection : languageIdOrSelection.languageId);\r\n        let creationOptions = this._modelCreationOptionsByLanguageAndResource[language + resource];\r\n        if (!creationOptions) {\r\n            const editor = this._configurationService.getValue('editor', { overrideIdentifier: language, resource });\r\n            const eol = this._getEOL(resource, language);\r\n            creationOptions = ModelService_1._readModelOptions({ editor, eol }, isForSimpleWidget);\r\n            this._modelCreationOptionsByLanguageAndResource[language + resource] = creationOptions;\r\n        }\r\n        return creationOptions;\r\n    }\r\n    _updateModelOptions(e) {\r\n        const oldOptionsByLanguageAndResource = this._modelCreationOptionsByLanguageAndResource;\r\n        this._modelCreationOptionsByLanguageAndResource = Object.create(null);\r\n        // Update options on all models\r\n        const keys = Object.keys(this._models);\r\n        for (let i = 0, len = keys.length; i < len; i++) {\r\n            const modelId = keys[i];\r\n            const modelData = this._models[modelId];\r\n            const language = modelData.model.getLanguageId();\r\n            const uri = modelData.model.uri;\r\n            if (e && !e.affectsConfiguration('editor', { overrideIdentifier: language, resource: uri }) && !e.affectsConfiguration('files.eol', { overrideIdentifier: language, resource: uri })) {\r\n                continue; // perf: skip if this model is not affected by configuration change\r\n            }\r\n            const oldOptions = oldOptionsByLanguageAndResource[language + uri];\r\n            const newOptions = this.getCreationOptions(language, uri, modelData.model.isForSimpleWidget);\r\n            ModelService_1._setModelOptionsForModel(modelData.model, newOptions, oldOptions);\r\n        }\r\n    }\r\n    static _setModelOptionsForModel(model, newOptions, currentOptions) {\r\n        if (currentOptions && currentOptions.defaultEOL !== newOptions.defaultEOL && model.getLineCount() === 1) {\r\n            model.setEOL(newOptions.defaultEOL === 1 /* DefaultEndOfLine.LF */ ? 0 /* EndOfLineSequence.LF */ : 1 /* EndOfLineSequence.CRLF */);\r\n        }\r\n        if (currentOptions\r\n            && (currentOptions.detectIndentation === newOptions.detectIndentation)\r\n            && (currentOptions.insertSpaces === newOptions.insertSpaces)\r\n            && (currentOptions.tabSize === newOptions.tabSize)\r\n            && (currentOptions.indentSize === newOptions.indentSize)\r\n            && (currentOptions.trimAutoWhitespace === newOptions.trimAutoWhitespace)\r\n            && equals(currentOptions.bracketPairColorizationOptions, newOptions.bracketPairColorizationOptions)) {\r\n            // Same indent opts, no need to touch the model\r\n            return;\r\n        }\r\n        if (newOptions.detectIndentation) {\r\n            model.detectIndentation(newOptions.insertSpaces, newOptions.tabSize);\r\n            model.updateOptions({\r\n                trimAutoWhitespace: newOptions.trimAutoWhitespace,\r\n                bracketColorizationOptions: newOptions.bracketPairColorizationOptions\r\n            });\r\n        }\r\n        else {\r\n            model.updateOptions({\r\n                insertSpaces: newOptions.insertSpaces,\r\n                tabSize: newOptions.tabSize,\r\n                indentSize: newOptions.indentSize,\r\n                trimAutoWhitespace: newOptions.trimAutoWhitespace,\r\n                bracketColorizationOptions: newOptions.bracketPairColorizationOptions\r\n            });\r\n        }\r\n    }\r\n    // --- begin IModelService\r\n    _insertDisposedModel(disposedModelData) {\r\n        this._disposedModels.set(MODEL_ID(disposedModelData.uri), disposedModelData);\r\n        this._disposedModelsHeapSize += disposedModelData.heapSize;\r\n    }\r\n    _removeDisposedModel(resource) {\r\n        const disposedModelData = this._disposedModels.get(MODEL_ID(resource));\r\n        if (disposedModelData) {\r\n            this._disposedModelsHeapSize -= disposedModelData.heapSize;\r\n        }\r\n        this._disposedModels.delete(MODEL_ID(resource));\r\n        return disposedModelData;\r\n    }\r\n    _ensureDisposedModelsHeapSize(maxModelsHeapSize) {\r\n        if (this._disposedModelsHeapSize > maxModelsHeapSize) {\r\n            // we must remove some old undo stack elements to free up some memory\r\n            const disposedModels = [];\r\n            this._disposedModels.forEach(entry => {\r\n                if (!entry.sharesUndoRedoStack) {\r\n                    disposedModels.push(entry);\r\n                }\r\n            });\r\n            disposedModels.sort((a, b) => a.time - b.time);\r\n            while (disposedModels.length > 0 && this._disposedModelsHeapSize > maxModelsHeapSize) {\r\n                const disposedModel = disposedModels.shift();\r\n                this._removeDisposedModel(disposedModel.uri);\r\n                if (disposedModel.initialUndoRedoSnapshot !== null) {\r\n                    this._undoRedoService.restoreSnapshot(disposedModel.initialUndoRedoSnapshot);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _createModelData(value, languageIdOrSelection, resource, isForSimpleWidget) {\r\n        // create & save the model\r\n        const options = this.getCreationOptions(languageIdOrSelection, resource, isForSimpleWidget);\r\n        const model = new TextModel(value, languageIdOrSelection, options, resource, this._undoRedoService, this._languageService, this._languageConfigurationService);\r\n        if (resource && this._disposedModels.has(MODEL_ID(resource))) {\r\n            const disposedModelData = this._removeDisposedModel(resource);\r\n            const elements = this._undoRedoService.getElements(resource);\r\n            const sha1Computer = this._getSHA1Computer();\r\n            const sha1IsEqual = (sha1Computer.canComputeSHA1(model)\r\n                ? sha1Computer.computeSHA1(model) === disposedModelData.sha1\r\n                : false);\r\n            if (sha1IsEqual || disposedModelData.sharesUndoRedoStack) {\r\n                for (const element of elements.past) {\r\n                    if (isEditStackElement(element) && element.matchesResource(resource)) {\r\n                        element.setModel(model);\r\n                    }\r\n                }\r\n                for (const element of elements.future) {\r\n                    if (isEditStackElement(element) && element.matchesResource(resource)) {\r\n                        element.setModel(model);\r\n                    }\r\n                }\r\n                this._undoRedoService.setElementsValidFlag(resource, true, (element) => (isEditStackElement(element) && element.matchesResource(resource)));\r\n                if (sha1IsEqual) {\r\n                    model._overwriteVersionId(disposedModelData.versionId);\r\n                    model._overwriteAlternativeVersionId(disposedModelData.alternativeVersionId);\r\n                    model._overwriteInitialUndoRedoSnapshot(disposedModelData.initialUndoRedoSnapshot);\r\n                }\r\n            }\r\n            else {\r\n                if (disposedModelData.initialUndoRedoSnapshot !== null) {\r\n                    this._undoRedoService.restoreSnapshot(disposedModelData.initialUndoRedoSnapshot);\r\n                }\r\n            }\r\n        }\r\n        const modelId = MODEL_ID(model.uri);\r\n        if (this._models[modelId]) {\r\n            // There already exists a model with this id => this is a programmer error\r\n            throw new Error('ModelService: Cannot add model because it already exists!');\r\n        }\r\n        const modelData = new ModelData(model, (model) => this._onWillDispose(model), (model, e) => this._onDidChangeLanguage(model, e));\r\n        this._models[modelId] = modelData;\r\n        return modelData;\r\n    }\r\n    createModel(value, languageSelection, resource, isForSimpleWidget = false) {\r\n        let modelData;\r\n        if (languageSelection) {\r\n            modelData = this._createModelData(value, languageSelection, resource, isForSimpleWidget);\r\n        }\r\n        else {\r\n            modelData = this._createModelData(value, PLAINTEXT_LANGUAGE_ID, resource, isForSimpleWidget);\r\n        }\r\n        this._onModelAdded.fire(modelData.model);\r\n        return modelData.model;\r\n    }\r\n    getModels() {\r\n        const ret = [];\r\n        const keys = Object.keys(this._models);\r\n        for (let i = 0, len = keys.length; i < len; i++) {\r\n            const modelId = keys[i];\r\n            ret.push(this._models[modelId].model);\r\n        }\r\n        return ret;\r\n    }\r\n    getModel(resource) {\r\n        const modelId = MODEL_ID(resource);\r\n        const modelData = this._models[modelId];\r\n        if (!modelData) {\r\n            return null;\r\n        }\r\n        return modelData.model;\r\n    }\r\n    // --- end IModelService\r\n    _schemaShouldMaintainUndoRedoElements(resource) {\r\n        return (resource.scheme === Schemas.file\r\n            || resource.scheme === Schemas.vscodeRemote\r\n            || resource.scheme === Schemas.vscodeUserData\r\n            || resource.scheme === Schemas.vscodeNotebookCell\r\n            || resource.scheme === 'fake-fs' // for tests\r\n        );\r\n    }\r\n    _onWillDispose(model) {\r\n        const modelId = MODEL_ID(model.uri);\r\n        const modelData = this._models[modelId];\r\n        const sharesUndoRedoStack = (this._undoRedoService.getUriComparisonKey(model.uri) !== model.uri.toString());\r\n        let maintainUndoRedoStack = false;\r\n        let heapSize = 0;\r\n        if (sharesUndoRedoStack || (this._shouldRestoreUndoStack() && this._schemaShouldMaintainUndoRedoElements(model.uri))) {\r\n            const elements = this._undoRedoService.getElements(model.uri);\r\n            if (elements.past.length > 0 || elements.future.length > 0) {\r\n                for (const element of elements.past) {\r\n                    if (isEditStackElement(element) && element.matchesResource(model.uri)) {\r\n                        maintainUndoRedoStack = true;\r\n                        heapSize += element.heapSize(model.uri);\r\n                        element.setModel(model.uri); // remove reference from text buffer instance\r\n                    }\r\n                }\r\n                for (const element of elements.future) {\r\n                    if (isEditStackElement(element) && element.matchesResource(model.uri)) {\r\n                        maintainUndoRedoStack = true;\r\n                        heapSize += element.heapSize(model.uri);\r\n                        element.setModel(model.uri); // remove reference from text buffer instance\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        const maxMemory = ModelService_1.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;\r\n        const sha1Computer = this._getSHA1Computer();\r\n        if (!maintainUndoRedoStack) {\r\n            if (!sharesUndoRedoStack) {\r\n                const initialUndoRedoSnapshot = modelData.model.getInitialUndoRedoSnapshot();\r\n                if (initialUndoRedoSnapshot !== null) {\r\n                    this._undoRedoService.restoreSnapshot(initialUndoRedoSnapshot);\r\n                }\r\n            }\r\n        }\r\n        else if (!sharesUndoRedoStack && (heapSize > maxMemory || !sha1Computer.canComputeSHA1(model))) {\r\n            // the undo stack for this file would never fit in the configured memory or the file is very large, so don't bother with it.\r\n            const initialUndoRedoSnapshot = modelData.model.getInitialUndoRedoSnapshot();\r\n            if (initialUndoRedoSnapshot !== null) {\r\n                this._undoRedoService.restoreSnapshot(initialUndoRedoSnapshot);\r\n            }\r\n        }\r\n        else {\r\n            this._ensureDisposedModelsHeapSize(maxMemory - heapSize);\r\n            // We only invalidate the elements, but they remain in the undo-redo service.\r\n            this._undoRedoService.setElementsValidFlag(model.uri, false, (element) => (isEditStackElement(element) && element.matchesResource(model.uri)));\r\n            this._insertDisposedModel(new DisposedModelInfo(model.uri, modelData.model.getInitialUndoRedoSnapshot(), Date.now(), sharesUndoRedoStack, heapSize, sha1Computer.computeSHA1(model), model.getVersionId(), model.getAlternativeVersionId()));\r\n        }\r\n        delete this._models[modelId];\r\n        modelData.dispose();\r\n        // clean up cache\r\n        delete this._modelCreationOptionsByLanguageAndResource[model.getLanguageId() + model.uri];\r\n        this._onModelRemoved.fire(model);\r\n    }\r\n    _onDidChangeLanguage(model, e) {\r\n        const oldLanguageId = e.oldLanguage;\r\n        const newLanguageId = model.getLanguageId();\r\n        const oldOptions = this.getCreationOptions(oldLanguageId, model.uri, model.isForSimpleWidget);\r\n        const newOptions = this.getCreationOptions(newLanguageId, model.uri, model.isForSimpleWidget);\r\n        ModelService_1._setModelOptionsForModel(model, newOptions, oldOptions);\r\n        this._onModelModeChanged.fire({ model, oldLanguageId: oldLanguageId });\r\n    }\r\n    _getSHA1Computer() {\r\n        return new DefaultModelSHA1Computer();\r\n    }\r\n};\r\nModelService.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK = 20 * 1024 * 1024;\r\nModelService = ModelService_1 = __decorate([\r\n    __param(0, IConfigurationService),\r\n    __param(1, ITextResourcePropertiesService),\r\n    __param(2, IUndoRedoService),\r\n    __param(3, ILanguageService),\r\n    __param(4, ILanguageConfigurationService)\r\n], ModelService);\r\nexport { ModelService };\r\nexport class DefaultModelSHA1Computer {\r\n    canComputeSHA1(model) {\r\n        return (model.getValueLength() <= DefaultModelSHA1Computer.MAX_MODEL_SIZE);\r\n    }\r\n    computeSHA1(model) {\r\n        // compute the sha1\r\n        const shaComputer = new StringSHA1();\r\n        const snapshot = model.createSnapshot();\r\n        let text;\r\n        while ((text = snapshot.read())) {\r\n            shaComputer.update(text);\r\n        }\r\n        return shaComputer.digest();\r\n    }\r\n}\r\nDefaultModelSHA1Computer.MAX_MODEL_SIZE = 10 * 1024 * 1024; // takes 200ms to compute a sha1 on a 10MB model on a new machine\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './standaloneQuickInput.css';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { EditorScopedLayoutService } from '../standaloneLayoutService.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { QuickInputService } from '../../../../platform/quickinput/browser/quickInputService.js';\r\nimport { createSingleCallFunction } from '../../../../base/common/functional.js';\r\nlet EditorScopedQuickInputService = class EditorScopedQuickInputService extends QuickInputService {\r\n    constructor(editor, instantiationService, contextKeyService, themeService, codeEditorService) {\r\n        super(instantiationService, contextKeyService, themeService, new EditorScopedLayoutService(editor.getContainerDomNode(), codeEditorService));\r\n        this.host = undefined;\r\n        // Use the passed in code editor as host for the quick input widget\r\n        const contribution = QuickInputEditorContribution.get(editor);\r\n        if (contribution) {\r\n            const widget = contribution.widget;\r\n            this.host = {\r\n                _serviceBrand: undefined,\r\n                get mainContainer() { return widget.getDomNode(); },\r\n                getContainer() { return widget.getDomNode(); },\r\n                get containers() { return [widget.getDomNode()]; },\r\n                get activeContainer() { return widget.getDomNode(); },\r\n                get mainContainerDimension() { return editor.getLayoutInfo(); },\r\n                get activeContainerDimension() { return editor.getLayoutInfo(); },\r\n                get onDidLayoutMainContainer() { return editor.onDidLayoutChange; },\r\n                get onDidLayoutActiveContainer() { return editor.onDidLayoutChange; },\r\n                get onDidLayoutContainer() { return Event.map(editor.onDidLayoutChange, dimension => ({ container: widget.getDomNode(), dimension })); },\r\n                get onDidChangeActiveContainer() { return Event.None; },\r\n                get onDidAddContainer() { return Event.None; },\r\n                get mainContainerOffset() { return { top: 0, quickPickTop: 0 }; },\r\n                get activeContainerOffset() { return { top: 0, quickPickTop: 0 }; },\r\n                focus: () => editor.focus()\r\n            };\r\n        }\r\n        else {\r\n            this.host = undefined;\r\n        }\r\n    }\r\n    createController() {\r\n        return super.createController(this.host);\r\n    }\r\n};\r\nEditorScopedQuickInputService = __decorate([\r\n    __param(1, IInstantiationService),\r\n    __param(2, IContextKeyService),\r\n    __param(3, IThemeService),\r\n    __param(4, ICodeEditorService)\r\n], EditorScopedQuickInputService);\r\nlet StandaloneQuickInputService = class StandaloneQuickInputService {\r\n    get activeService() {\r\n        const editor = this.codeEditorService.getFocusedCodeEditor();\r\n        if (!editor) {\r\n            throw new Error('Quick input service needs a focused editor to work.');\r\n        }\r\n        // Find the quick input implementation for the focused\r\n        // editor or create it lazily if not yet created\r\n        let quickInputService = this.mapEditorToService.get(editor);\r\n        if (!quickInputService) {\r\n            const newQuickInputService = quickInputService = this.instantiationService.createInstance(EditorScopedQuickInputService, editor);\r\n            this.mapEditorToService.set(editor, quickInputService);\r\n            createSingleCallFunction(editor.onDidDispose)(() => {\r\n                newQuickInputService.dispose();\r\n                this.mapEditorToService.delete(editor);\r\n            });\r\n        }\r\n        return quickInputService;\r\n    }\r\n    get quickAccess() { return this.activeService.quickAccess; }\r\n    constructor(instantiationService, codeEditorService) {\r\n        this.instantiationService = instantiationService;\r\n        this.codeEditorService = codeEditorService;\r\n        this.mapEditorToService = new Map();\r\n    }\r\n    pick(picks, options = {}, token = CancellationToken.None) {\r\n        return this.activeService /* TS fail */.pick(picks, options, token);\r\n    }\r\n    createQuickPick() {\r\n        return this.activeService.createQuickPick();\r\n    }\r\n    createInputBox() {\r\n        return this.activeService.createInputBox();\r\n    }\r\n};\r\nStandaloneQuickInputService = __decorate([\r\n    __param(0, IInstantiationService),\r\n    __param(1, ICodeEditorService)\r\n], StandaloneQuickInputService);\r\nexport { StandaloneQuickInputService };\r\nexport class QuickInputEditorContribution {\r\n    static get(editor) {\r\n        return editor.getContribution(QuickInputEditorContribution.ID);\r\n    }\r\n    constructor(editor) {\r\n        this.editor = editor;\r\n        this.widget = new QuickInputEditorWidget(this.editor);\r\n    }\r\n    dispose() {\r\n        this.widget.dispose();\r\n    }\r\n}\r\nQuickInputEditorContribution.ID = 'editor.controller.quickInput';\r\nexport class QuickInputEditorWidget {\r\n    constructor(codeEditor) {\r\n        this.codeEditor = codeEditor;\r\n        this.domNode = document.createElement('div');\r\n        this.codeEditor.addOverlayWidget(this);\r\n    }\r\n    getId() {\r\n        return QuickInputEditorWidget.ID;\r\n    }\r\n    getDomNode() {\r\n        return this.domNode;\r\n    }\r\n    getPosition() {\r\n        return { preference: 2 /* OverlayWidgetPositionPreference.TOP_CENTER */ };\r\n    }\r\n    dispose() {\r\n        this.codeEditor.removeOverlayWidget(this);\r\n    }\r\n}\r\nQuickInputEditorWidget.ID = 'editor.contrib.quickInputWidget';\r\nregisterEditorContribution(QuickInputEditorContribution.ID, QuickInputEditorContribution, 4 /* EditorContributionInstantiation.Lazy */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { coalesce } from '../../../base/common/arrays.js';\r\nimport { toDisposable } from '../../../base/common/lifecycle.js';\r\nimport { Registry } from '../../registry/common/platform.js';\r\nexport var DefaultQuickAccessFilterValue;\r\n(function (DefaultQuickAccessFilterValue) {\r\n    /**\r\n     * Keep the value as it is given to quick access.\r\n     */\r\n    DefaultQuickAccessFilterValue[DefaultQuickAccessFilterValue[\"PRESERVE\"] = 0] = \"PRESERVE\";\r\n    /**\r\n     * Use the value that was used last time something was accepted from the picker.\r\n     */\r\n    DefaultQuickAccessFilterValue[DefaultQuickAccessFilterValue[\"LAST\"] = 1] = \"LAST\";\r\n})(DefaultQuickAccessFilterValue || (DefaultQuickAccessFilterValue = {}));\r\nexport const Extensions = {\r\n    Quickaccess: 'workbench.contributions.quickaccess'\r\n};\r\nexport class QuickAccessRegistry {\r\n    constructor() {\r\n        this.providers = [];\r\n        this.defaultProvider = undefined;\r\n    }\r\n    registerQuickAccessProvider(provider) {\r\n        // Extract the default provider when no prefix is present\r\n        if (provider.prefix.length === 0) {\r\n            this.defaultProvider = provider;\r\n        }\r\n        else {\r\n            this.providers.push(provider);\r\n        }\r\n        // sort the providers by decreasing prefix length, such that longer\r\n        // prefixes take priority: 'ext' vs 'ext install' - the latter should win\r\n        this.providers.sort((providerA, providerB) => providerB.prefix.length - providerA.prefix.length);\r\n        return toDisposable(() => {\r\n            this.providers.splice(this.providers.indexOf(provider), 1);\r\n            if (this.defaultProvider === provider) {\r\n                this.defaultProvider = undefined;\r\n            }\r\n        });\r\n    }\r\n    getQuickAccessProviders() {\r\n        return coalesce([this.defaultProvider, ...this.providers]);\r\n    }\r\n    getQuickAccessProvider(prefix) {\r\n        const result = prefix ? (this.providers.find(provider => prefix.startsWith(provider.prefix)) || undefined) : undefined;\r\n        return result || this.defaultProvider;\r\n    }\r\n}\r\nRegistry.add(Extensions.Quickaccess, new QuickAccessRegistry());\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\r\nexport const NO_KEY_MODS = { ctrlCmd: false, alt: false };\r\nexport var QuickInputHideReason;\r\n(function (QuickInputHideReason) {\r\n    /**\r\n     * Focus moved away from the quick input.\r\n     */\r\n    QuickInputHideReason[QuickInputHideReason[\"Blur\"] = 1] = \"Blur\";\r\n    /**\r\n     * An explicit user gesture, e.g. pressing Escape key.\r\n     */\r\n    QuickInputHideReason[QuickInputHideReason[\"Gesture\"] = 2] = \"Gesture\";\r\n    /**\r\n     * Anything else.\r\n     */\r\n    QuickInputHideReason[QuickInputHideReason[\"Other\"] = 3] = \"Other\";\r\n})(QuickInputHideReason || (QuickInputHideReason = {}));\r\nexport var ItemActivation;\r\n(function (ItemActivation) {\r\n    ItemActivation[ItemActivation[\"NONE\"] = 0] = \"NONE\";\r\n    ItemActivation[ItemActivation[\"FIRST\"] = 1] = \"FIRST\";\r\n    ItemActivation[ItemActivation[\"SECOND\"] = 2] = \"SECOND\";\r\n    ItemActivation[ItemActivation[\"LAST\"] = 3] = \"LAST\";\r\n})(ItemActivation || (ItemActivation = {}));\r\nexport class QuickPickItemScorerAccessor {\r\n    constructor(options) {\r\n        this.options = options;\r\n    }\r\n}\r\nexport const quickPickItemScorerAccessor = new QuickPickItemScorerAccessor();\r\n//#endregion\r\nexport const IQuickInputService = createDecorator('quickInputService');\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { DeferredPromise } from '../../../base/common/async.js';\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { Event } from '../../../base/common/event.js';\r\nimport { Disposable, DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\r\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\r\nimport { DefaultQuickAccessFilterValue, Extensions } from '../common/quickAccess.js';\r\nimport { IQuickInputService, ItemActivation } from '../common/quickInput.js';\r\nimport { Registry } from '../../registry/common/platform.js';\r\nlet QuickAccessController = class QuickAccessController extends Disposable {\r\n    constructor(quickInputService, instantiationService) {\r\n        super();\r\n        this.quickInputService = quickInputService;\r\n        this.instantiationService = instantiationService;\r\n        this.registry = Registry.as(Extensions.Quickaccess);\r\n        this.mapProviderToDescriptor = new Map();\r\n        this.lastAcceptedPickerValues = new Map();\r\n        this.visibleQuickAccess = undefined;\r\n    }\r\n    show(value = '', options) {\r\n        this.doShowOrPick(value, false, options);\r\n    }\r\n    doShowOrPick(value, pick, options) {\r\n        var _a;\r\n        // Find provider for the value to show\r\n        const [provider, descriptor] = this.getOrInstantiateProvider(value);\r\n        // Return early if quick access is already showing on that same prefix\r\n        const visibleQuickAccess = this.visibleQuickAccess;\r\n        const visibleDescriptor = visibleQuickAccess === null || visibleQuickAccess === void 0 ? void 0 : visibleQuickAccess.descriptor;\r\n        if (visibleQuickAccess && descriptor && visibleDescriptor === descriptor) {\r\n            // Apply value only if it is more specific than the prefix\r\n            // from the provider and we are not instructed to preserve\r\n            if (value !== descriptor.prefix && !(options === null || options === void 0 ? void 0 : options.preserveValue)) {\r\n                visibleQuickAccess.picker.value = value;\r\n            }\r\n            // Always adjust selection\r\n            this.adjustValueSelection(visibleQuickAccess.picker, descriptor, options);\r\n            return;\r\n        }\r\n        // Rewrite the filter value based on certain rules unless disabled\r\n        if (descriptor && !(options === null || options === void 0 ? void 0 : options.preserveValue)) {\r\n            let newValue = undefined;\r\n            // If we have a visible provider with a value, take it's filter value but\r\n            // rewrite to new provider prefix in case they differ\r\n            if (visibleQuickAccess && visibleDescriptor && visibleDescriptor !== descriptor) {\r\n                const newValueCandidateWithoutPrefix = visibleQuickAccess.value.substr(visibleDescriptor.prefix.length);\r\n                if (newValueCandidateWithoutPrefix) {\r\n                    newValue = `${descriptor.prefix}${newValueCandidateWithoutPrefix}`;\r\n                }\r\n            }\r\n            // Otherwise, take a default value as instructed\r\n            if (!newValue) {\r\n                const defaultFilterValue = provider === null || provider === void 0 ? void 0 : provider.defaultFilterValue;\r\n                if (defaultFilterValue === DefaultQuickAccessFilterValue.LAST) {\r\n                    newValue = this.lastAcceptedPickerValues.get(descriptor);\r\n                }\r\n                else if (typeof defaultFilterValue === 'string') {\r\n                    newValue = `${descriptor.prefix}${defaultFilterValue}`;\r\n                }\r\n            }\r\n            if (typeof newValue === 'string') {\r\n                value = newValue;\r\n            }\r\n        }\r\n        // Create a picker for the provider to use with the initial value\r\n        // and adjust the filtering to exclude the prefix from filtering\r\n        const disposables = new DisposableStore();\r\n        const picker = disposables.add(this.quickInputService.createQuickPick());\r\n        picker.value = value;\r\n        this.adjustValueSelection(picker, descriptor, options);\r\n        picker.placeholder = descriptor === null || descriptor === void 0 ? void 0 : descriptor.placeholder;\r\n        picker.quickNavigate = options === null || options === void 0 ? void 0 : options.quickNavigateConfiguration;\r\n        picker.hideInput = !!picker.quickNavigate && !visibleQuickAccess; // only hide input if there was no picker opened already\r\n        if (typeof (options === null || options === void 0 ? void 0 : options.itemActivation) === 'number' || (options === null || options === void 0 ? void 0 : options.quickNavigateConfiguration)) {\r\n            picker.itemActivation = (_a = options === null || options === void 0 ? void 0 : options.itemActivation) !== null && _a !== void 0 ? _a : ItemActivation.SECOND /* quick nav is always second */;\r\n        }\r\n        picker.contextKey = descriptor === null || descriptor === void 0 ? void 0 : descriptor.contextKey;\r\n        picker.filterValue = (value) => value.substring(descriptor ? descriptor.prefix.length : 0);\r\n        // Pick mode: setup a promise that can be resolved\r\n        // with the selected items and prevent execution\r\n        let pickPromise = undefined;\r\n        if (pick) {\r\n            pickPromise = new DeferredPromise();\r\n            disposables.add(Event.once(picker.onWillAccept)(e => {\r\n                e.veto();\r\n                picker.hide();\r\n            }));\r\n        }\r\n        // Register listeners\r\n        disposables.add(this.registerPickerListeners(picker, provider, descriptor, value, options === null || options === void 0 ? void 0 : options.providerOptions));\r\n        // Ask provider to fill the picker as needed if we have one\r\n        // and pass over a cancellation token that will indicate when\r\n        // the picker is hiding without a pick being made.\r\n        const cts = disposables.add(new CancellationTokenSource());\r\n        if (provider) {\r\n            disposables.add(provider.provide(picker, cts.token, options === null || options === void 0 ? void 0 : options.providerOptions));\r\n        }\r\n        // Finally, trigger disposal and cancellation when the picker\r\n        // hides depending on items selected or not.\r\n        Event.once(picker.onDidHide)(() => {\r\n            if (picker.selectedItems.length === 0) {\r\n                cts.cancel();\r\n            }\r\n            // Start to dispose once picker hides\r\n            disposables.dispose();\r\n            // Resolve pick promise with selected items\r\n            pickPromise === null || pickPromise === void 0 ? void 0 : pickPromise.complete(picker.selectedItems.slice(0));\r\n        });\r\n        // Finally, show the picker. This is important because a provider\r\n        // may not call this and then our disposables would leak that rely\r\n        // on the onDidHide event.\r\n        picker.show();\r\n        // Pick mode: return with promise\r\n        if (pick) {\r\n            return pickPromise === null || pickPromise === void 0 ? void 0 : pickPromise.p;\r\n        }\r\n    }\r\n    adjustValueSelection(picker, descriptor, options) {\r\n        var _a;\r\n        let valueSelection;\r\n        // Preserve: just always put the cursor at the end\r\n        if (options === null || options === void 0 ? void 0 : options.preserveValue) {\r\n            valueSelection = [picker.value.length, picker.value.length];\r\n        }\r\n        // Otherwise: select the value up until the prefix\r\n        else {\r\n            valueSelection = [(_a = descriptor === null || descriptor === void 0 ? void 0 : descriptor.prefix.length) !== null && _a !== void 0 ? _a : 0, picker.value.length];\r\n        }\r\n        picker.valueSelection = valueSelection;\r\n    }\r\n    registerPickerListeners(picker, provider, descriptor, value, providerOptions) {\r\n        const disposables = new DisposableStore();\r\n        // Remember as last visible picker and clean up once picker get's disposed\r\n        const visibleQuickAccess = this.visibleQuickAccess = { picker, descriptor, value };\r\n        disposables.add(toDisposable(() => {\r\n            if (visibleQuickAccess === this.visibleQuickAccess) {\r\n                this.visibleQuickAccess = undefined;\r\n            }\r\n        }));\r\n        // Whenever the value changes, check if the provider has\r\n        // changed and if so - re-create the picker from the beginning\r\n        disposables.add(picker.onDidChangeValue(value => {\r\n            const [providerForValue] = this.getOrInstantiateProvider(value);\r\n            if (providerForValue !== provider) {\r\n                this.show(value, {\r\n                    // do not rewrite value from user typing!\r\n                    preserveValue: true,\r\n                    // persist the value of the providerOptions from the original showing\r\n                    providerOptions\r\n                });\r\n            }\r\n            else {\r\n                visibleQuickAccess.value = value; // remember the value in our visible one\r\n            }\r\n        }));\r\n        // Remember picker input for future use when accepting\r\n        if (descriptor) {\r\n            disposables.add(picker.onDidAccept(() => {\r\n                this.lastAcceptedPickerValues.set(descriptor, picker.value);\r\n            }));\r\n        }\r\n        return disposables;\r\n    }\r\n    getOrInstantiateProvider(value) {\r\n        const providerDescriptor = this.registry.getQuickAccessProvider(value);\r\n        if (!providerDescriptor) {\r\n            return [undefined, undefined];\r\n        }\r\n        let provider = this.mapProviderToDescriptor.get(providerDescriptor);\r\n        if (!provider) {\r\n            provider = this.instantiationService.createInstance(providerDescriptor.ctor);\r\n            this.mapProviderToDescriptor.set(providerDescriptor, provider);\r\n        }\r\n        return [provider, providerDescriptor];\r\n    }\r\n};\r\nQuickAccessController = __decorate([\r\n    __param(0, IQuickInputService),\r\n    __param(1, IInstantiationService)\r\n], QuickAccessController);\r\nexport { QuickAccessController };\r\n", "import { addDisposableListener, EventHelper, EventType, reset, trackFocus } from '../../dom.js';\r\nimport { sanitize } from '../../dompurify/dompurify.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { renderMarkdown, renderStringAsPlaintext } from '../../markdownRenderer.js';\r\nimport { Gesture, EventType as TouchEventType } from '../../touch.js';\r\nimport { renderLabelWithIcons } from '../iconLabel/iconLabels.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport { isMarkdownString, markdownStringEqual } from '../../../common/htmlContent.js';\r\nimport { Disposable } from '../../../common/lifecycle.js';\r\nimport { ThemeIcon } from '../../../common/themables.js';\r\nimport './button.css';\r\nexport const unthemedButtonStyles = {\r\n    buttonBackground: '#0E639C',\r\n    buttonHoverBackground: '#006BB3',\r\n    buttonSeparator: Color.white.toString(),\r\n    buttonForeground: Color.white.toString(),\r\n    buttonBorder: undefined,\r\n    buttonSecondaryBackground: undefined,\r\n    buttonSecondaryForeground: undefined,\r\n    buttonSecondaryHoverBackground: undefined\r\n};\r\nexport class Button extends Disposable {\r\n    get onDidClick() { return this._onDidClick.event; }\r\n    constructor(container, options) {\r\n        super();\r\n        this._label = '';\r\n        this._onDidClick = this._register(new Emitter());\r\n        this.options = options;\r\n        this._element = document.createElement('a');\r\n        this._element.classList.add('monaco-button');\r\n        this._element.tabIndex = 0;\r\n        this._element.setAttribute('role', 'button');\r\n        this._element.classList.toggle('secondary', !!options.secondary);\r\n        const background = options.secondary ? options.buttonSecondaryBackground : options.buttonBackground;\r\n        const foreground = options.secondary ? options.buttonSecondaryForeground : options.buttonForeground;\r\n        this._element.style.color = foreground || '';\r\n        this._element.style.backgroundColor = background || '';\r\n        if (options.supportShortLabel) {\r\n            this._labelShortElement = document.createElement('div');\r\n            this._labelShortElement.classList.add('monaco-button-label-short');\r\n            this._element.appendChild(this._labelShortElement);\r\n            this._labelElement = document.createElement('div');\r\n            this._labelElement.classList.add('monaco-button-label');\r\n            this._element.appendChild(this._labelElement);\r\n            this._element.classList.add('monaco-text-button-with-short-label');\r\n        }\r\n        container.appendChild(this._element);\r\n        this._register(Gesture.addTarget(this._element));\r\n        [EventType.CLICK, TouchEventType.Tap].forEach(eventType => {\r\n            this._register(addDisposableListener(this._element, eventType, e => {\r\n                if (!this.enabled) {\r\n                    EventHelper.stop(e);\r\n                    return;\r\n                }\r\n                this._onDidClick.fire(e);\r\n            }));\r\n        });\r\n        this._register(addDisposableListener(this._element, EventType.KEY_DOWN, e => {\r\n            const event = new StandardKeyboardEvent(e);\r\n            let eventHandled = false;\r\n            if (this.enabled && (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */))) {\r\n                this._onDidClick.fire(e);\r\n                eventHandled = true;\r\n            }\r\n            else if (event.equals(9 /* KeyCode.Escape */)) {\r\n                this._element.blur();\r\n                eventHandled = true;\r\n            }\r\n            if (eventHandled) {\r\n                EventHelper.stop(event, true);\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OVER, e => {\r\n            if (!this._element.classList.contains('disabled')) {\r\n                this.updateBackground(true);\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OUT, e => {\r\n            this.updateBackground(false); // restore standard styles\r\n        }));\r\n        // Also set hover background when button is focused for feedback\r\n        this.focusTracker = this._register(trackFocus(this._element));\r\n        this._register(this.focusTracker.onDidFocus(() => { if (this.enabled) {\r\n            this.updateBackground(true);\r\n        } }));\r\n        this._register(this.focusTracker.onDidBlur(() => { if (this.enabled) {\r\n            this.updateBackground(false);\r\n        } }));\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._element.remove();\r\n    }\r\n    getContentElements(content) {\r\n        const elements = [];\r\n        for (let segment of renderLabelWithIcons(content)) {\r\n            if (typeof (segment) === 'string') {\r\n                segment = segment.trim();\r\n                // Ignore empty segment\r\n                if (segment === '') {\r\n                    continue;\r\n                }\r\n                // Convert string segments to <span> nodes\r\n                const node = document.createElement('span');\r\n                node.textContent = segment;\r\n                elements.push(node);\r\n            }\r\n            else {\r\n                elements.push(segment);\r\n            }\r\n        }\r\n        return elements;\r\n    }\r\n    updateBackground(hover) {\r\n        let background;\r\n        if (this.options.secondary) {\r\n            background = hover ? this.options.buttonSecondaryHoverBackground : this.options.buttonSecondaryBackground;\r\n        }\r\n        else {\r\n            background = hover ? this.options.buttonHoverBackground : this.options.buttonBackground;\r\n        }\r\n        if (background) {\r\n            this._element.style.backgroundColor = background;\r\n        }\r\n    }\r\n    get element() {\r\n        return this._element;\r\n    }\r\n    set label(value) {\r\n        var _a;\r\n        if (this._label === value) {\r\n            return;\r\n        }\r\n        if (isMarkdownString(this._label) && isMarkdownString(value) && markdownStringEqual(this._label, value)) {\r\n            return;\r\n        }\r\n        this._element.classList.add('monaco-text-button');\r\n        const labelElement = this.options.supportShortLabel ? this._labelElement : this._element;\r\n        if (isMarkdownString(value)) {\r\n            const rendered = renderMarkdown(value, { inline: true });\r\n            rendered.dispose();\r\n            // Don't include outer `<p>`\r\n            const root = (_a = rendered.element.querySelector('p')) === null || _a === void 0 ? void 0 : _a.innerHTML;\r\n            if (root) {\r\n                // Only allow a very limited set of inline html tags\r\n                const sanitized = sanitize(root, { ADD_TAGS: ['b', 'i', 'u', 'code', 'span'], ALLOWED_ATTR: ['class'], RETURN_TRUSTED_TYPE: true });\r\n                labelElement.innerHTML = sanitized;\r\n            }\r\n            else {\r\n                reset(labelElement);\r\n            }\r\n        }\r\n        else {\r\n            if (this.options.supportIcons) {\r\n                reset(labelElement, ...this.getContentElements(value));\r\n            }\r\n            else {\r\n                labelElement.textContent = value;\r\n            }\r\n        }\r\n        if (typeof this.options.title === 'string') {\r\n            this._element.title = this.options.title;\r\n        }\r\n        else if (this.options.title) {\r\n            this._element.title = renderStringAsPlaintext(value);\r\n        }\r\n        this._label = value;\r\n    }\r\n    get label() {\r\n        return this._label;\r\n    }\r\n    set icon(icon) {\r\n        this._element.classList.add(...ThemeIcon.asClassNameArray(icon));\r\n    }\r\n    set enabled(value) {\r\n        if (value) {\r\n            this._element.classList.remove('disabled');\r\n            this._element.setAttribute('aria-disabled', String(false));\r\n            this._element.tabIndex = 0;\r\n        }\r\n        else {\r\n            this._element.classList.add('disabled');\r\n            this._element.setAttribute('aria-disabled', String(true));\r\n        }\r\n    }\r\n    get enabled() {\r\n        return !this._element.classList.contains('disabled');\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { show } from '../../dom.js';\r\nimport { RunOnceScheduler } from '../../../common/async.js';\r\nimport { Disposable } from '../../../common/lifecycle.js';\r\nimport './progressbar.css';\r\nconst CSS_DONE = 'done';\r\nconst CSS_ACTIVE = 'active';\r\nconst CSS_INFINITE = 'infinite';\r\nconst CSS_INFINITE_LONG_RUNNING = 'infinite-long-running';\r\nconst CSS_DISCRETE = 'discrete';\r\n/**\r\n * A progress bar with support for infinite or discrete progress.\r\n */\r\nexport class ProgressBar extends Disposable {\r\n    constructor(container, options) {\r\n        super();\r\n        this.workedVal = 0;\r\n        this.showDelayedScheduler = this._register(new RunOnceScheduler(() => show(this.element), 0));\r\n        this.longRunningScheduler = this._register(new RunOnceScheduler(() => this.infiniteLongRunning(), ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD));\r\n        this.create(container, options);\r\n    }\r\n    create(container, options) {\r\n        this.element = document.createElement('div');\r\n        this.element.classList.add('monaco-progress-container');\r\n        this.element.setAttribute('role', 'progressbar');\r\n        this.element.setAttribute('aria-valuemin', '0');\r\n        container.appendChild(this.element);\r\n        this.bit = document.createElement('div');\r\n        this.bit.classList.add('progress-bit');\r\n        this.bit.style.backgroundColor = (options === null || options === void 0 ? void 0 : options.progressBarBackground) || '#0E70C0';\r\n        this.element.appendChild(this.bit);\r\n    }\r\n    off() {\r\n        this.bit.style.width = 'inherit';\r\n        this.bit.style.opacity = '1';\r\n        this.element.classList.remove(CSS_ACTIVE, CSS_INFINITE, CSS_INFINITE_LONG_RUNNING, CSS_DISCRETE);\r\n        this.workedVal = 0;\r\n        this.totalWork = undefined;\r\n        this.longRunningScheduler.cancel();\r\n    }\r\n    /**\r\n     * Stops the progressbar from showing any progress instantly without fading out.\r\n     */\r\n    stop() {\r\n        return this.doDone(false);\r\n    }\r\n    doDone(delayed) {\r\n        this.element.classList.add(CSS_DONE);\r\n        // discrete: let it grow to 100% width and hide afterwards\r\n        if (!this.element.classList.contains(CSS_INFINITE)) {\r\n            this.bit.style.width = 'inherit';\r\n            if (delayed) {\r\n                setTimeout(() => this.off(), 200);\r\n            }\r\n            else {\r\n                this.off();\r\n            }\r\n        }\r\n        // infinite: let it fade out and hide afterwards\r\n        else {\r\n            this.bit.style.opacity = '0';\r\n            if (delayed) {\r\n                setTimeout(() => this.off(), 200);\r\n            }\r\n            else {\r\n                this.off();\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Use this mode to indicate progress that has no total number of work units.\r\n     */\r\n    infinite() {\r\n        this.bit.style.width = '2%';\r\n        this.bit.style.opacity = '1';\r\n        this.element.classList.remove(CSS_DISCRETE, CSS_DONE, CSS_INFINITE_LONG_RUNNING);\r\n        this.element.classList.add(CSS_ACTIVE, CSS_INFINITE);\r\n        this.longRunningScheduler.schedule();\r\n        return this;\r\n    }\r\n    infiniteLongRunning() {\r\n        this.element.classList.add(CSS_INFINITE_LONG_RUNNING);\r\n    }\r\n    getContainer() {\r\n        return this.element;\r\n    }\r\n}\r\n/**\r\n * After a certain time of showing the progress bar, switch\r\n * to long-running mode and throttle animations to reduce\r\n * the pressure on the GPU process.\r\n *\r\n * https://github.com/microsoft/vscode/issues/97900\r\n * https://github.com/microsoft/vscode/issues/138396\r\n */\r\nProgressBar.LONG_RUNNING_INFINITE_THRESHOLD = 10000;\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { FindInput } from '../../../base/browser/ui/findinput/findInput.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport Severity from '../../../base/common/severity.js';\r\nimport './media/quickInput.css';\r\nconst $ = dom.$;\r\nexport class QuickInputBox extends Disposable {\r\n    constructor(parent, inputBoxStyles, toggleStyles) {\r\n        super();\r\n        this.parent = parent;\r\n        this.onKeyDown = (handler) => {\r\n            return dom.addStandardDisposableListener(this.findInput.inputBox.inputElement, dom.EventType.KEY_DOWN, handler);\r\n        };\r\n        this.onMouseDown = (handler) => {\r\n            return dom.addStandardDisposableListener(this.findInput.inputBox.inputElement, dom.EventType.MOUSE_DOWN, handler);\r\n        };\r\n        this.onDidChange = (handler) => {\r\n            return this.findInput.onDidChange(handler);\r\n        };\r\n        this.container = dom.append(this.parent, $('.quick-input-box'));\r\n        this.findInput = this._register(new FindInput(this.container, undefined, { label: '', inputBoxStyles, toggleStyles }));\r\n        const input = this.findInput.inputBox.inputElement;\r\n        input.role = 'combobox';\r\n        input.ariaHasPopup = 'menu';\r\n        input.ariaAutoComplete = 'list';\r\n        input.ariaExpanded = 'true';\r\n    }\r\n    get value() {\r\n        return this.findInput.getValue();\r\n    }\r\n    set value(value) {\r\n        this.findInput.setValue(value);\r\n    }\r\n    select(range = null) {\r\n        this.findInput.inputBox.select(range);\r\n    }\r\n    isSelectionAtEnd() {\r\n        return this.findInput.inputBox.isSelectionAtEnd();\r\n    }\r\n    get placeholder() {\r\n        return this.findInput.inputBox.inputElement.getAttribute('placeholder') || '';\r\n    }\r\n    set placeholder(placeholder) {\r\n        this.findInput.inputBox.setPlaceHolder(placeholder);\r\n    }\r\n    get password() {\r\n        return this.findInput.inputBox.inputElement.type === 'password';\r\n    }\r\n    set password(password) {\r\n        this.findInput.inputBox.inputElement.type = password ? 'password' : 'text';\r\n    }\r\n    set enabled(enabled) {\r\n        // We can't disable the input box because it is still used for\r\n        // navigating the list. Instead, we disable the list and the OK\r\n        // so that nothing can be selected.\r\n        // TODO: should this be what we do for all find inputs? Or maybe some _other_ API\r\n        // on findInput to change it to readonly?\r\n        this.findInput.inputBox.inputElement.toggleAttribute('readonly', !enabled);\r\n        // TODO: styles of the quick pick need to be moved to the CSS instead of being in line\r\n        // so things like this can be done in CSS\r\n        // this.findInput.inputBox.inputElement.classList.toggle('disabled', !enabled);\r\n    }\r\n    set toggles(toggles) {\r\n        this.findInput.setAdditionalToggles(toggles);\r\n    }\r\n    setAttribute(name, value) {\r\n        this.findInput.inputBox.inputElement.setAttribute(name, value);\r\n    }\r\n    showDecoration(decoration) {\r\n        if (decoration === Severity.Ignore) {\r\n            this.findInput.clearMessage();\r\n        }\r\n        else {\r\n            this.findInput.showMessage({ type: decoration === Severity.Info ? 1 /* MessageType.INFO */ : decoration === Severity.Warning ? 2 /* MessageType.WARNING */ : 3 /* MessageType.ERROR */, content: '' });\r\n        }\r\n    }\r\n    stylesForType(decoration) {\r\n        return this.findInput.inputBox.stylesForType(decoration === Severity.Info ? 1 /* MessageType.INFO */ : decoration === Severity.Warning ? 2 /* MessageType.WARNING */ : 3 /* MessageType.ERROR */);\r\n    }\r\n    setFocus() {\r\n        this.findInput.focus();\r\n    }\r\n    layout() {\r\n        this.findInput.inputBox.layout();\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Lazy } from './lazy.js';\r\n// When comparing large numbers of strings it's better for performance to create an\r\n// Intl.Collator object and use the function provided by its compare property\r\n// than it is to use String.prototype.localeCompare()\r\n// A collator with numeric sorting enabled, and no sensitivity to case, accents or diacritics.\r\nconst intlFileNameCollatorBaseNumeric = new Lazy(() => {\r\n    const collator = new Intl.Collator(undefined, { numeric: true, sensitivity: 'base' });\r\n    return {\r\n        collator,\r\n        collatorIsNumeric: collator.resolvedOptions().numeric\r\n    };\r\n});\r\n// A collator with numeric sorting enabled.\r\nconst intlFileNameCollatorNumeric = new Lazy(() => {\r\n    const collator = new Intl.Collator(undefined, { numeric: true });\r\n    return {\r\n        collator\r\n    };\r\n});\r\n// A collator with numeric sorting enabled, and sensitivity to accents and diacritics but not case.\r\nconst intlFileNameCollatorNumericCaseInsensitive = new Lazy(() => {\r\n    const collator = new Intl.Collator(undefined, { numeric: true, sensitivity: 'accent' });\r\n    return {\r\n        collator\r\n    };\r\n});\r\n/** Compares filenames without distinguishing the name from the extension. Disambiguates by unicode comparison. */\r\nexport function compareFileNames(one, other, caseSensitive = false) {\r\n    const a = one || '';\r\n    const b = other || '';\r\n    const result = intlFileNameCollatorBaseNumeric.value.collator.compare(a, b);\r\n    // Using the numeric option will make compare(`foo1`, `foo01`) === 0. Disambiguate.\r\n    if (intlFileNameCollatorBaseNumeric.value.collatorIsNumeric && result === 0 && a !== b) {\r\n        return a < b ? -1 : 1;\r\n    }\r\n    return result;\r\n}\r\nexport function compareAnything(one, other, lookFor) {\r\n    const elementAName = one.toLowerCase();\r\n    const elementBName = other.toLowerCase();\r\n    // Sort prefix matches over non prefix matches\r\n    const prefixCompare = compareByPrefix(one, other, lookFor);\r\n    if (prefixCompare) {\r\n        return prefixCompare;\r\n    }\r\n    // Sort suffix matches over non suffix matches\r\n    const elementASuffixMatch = elementAName.endsWith(lookFor);\r\n    const elementBSuffixMatch = elementBName.endsWith(lookFor);\r\n    if (elementASuffixMatch !== elementBSuffixMatch) {\r\n        return elementASuffixMatch ? -1 : 1;\r\n    }\r\n    // Understand file names\r\n    const r = compareFileNames(elementAName, elementBName);\r\n    if (r !== 0) {\r\n        return r;\r\n    }\r\n    // Compare by name\r\n    return elementAName.localeCompare(elementBName);\r\n}\r\nexport function compareByPrefix(one, other, lookFor) {\r\n    const elementAName = one.toLowerCase();\r\n    const elementBName = other.toLowerCase();\r\n    // Sort prefix matches over non prefix matches\r\n    const elementAPrefixMatch = elementAName.startsWith(lookFor);\r\n    const elementBPrefixMatch = elementBName.startsWith(lookFor);\r\n    if (elementAPrefixMatch !== elementBPrefixMatch) {\r\n        return elementAPrefixMatch ? -1 : 1;\r\n    }\r\n    // Same prefix: Sort shorter matches to the top to have those on top that match more precisely\r\n    else if (elementAPrefixMatch && elementBPrefixMatch) {\r\n        if (elementAName.length < elementBName.length) {\r\n            return -1;\r\n        }\r\n        if (elementAName.length > elementBName.length) {\r\n            return 1;\r\n        }\r\n    }\r\n    return 0;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\r\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\r\nimport { KeybindingLabel } from '../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\r\nimport { range } from '../../../base/common/arrays.js';\r\nimport { ThrottledDelayer } from '../../../base/common/async.js';\r\nimport { compareAnything } from '../../../base/common/comparers.js';\r\nimport { memoize } from '../../../base/common/decorators.js';\r\nimport { isCancellationError } from '../../../base/common/errors.js';\r\nimport { Emitter, Event } from '../../../base/common/event.js';\r\nimport { getCodiconAriaLabel, matchesFuzzyIconAware, parseLabelWithIcons } from '../../../base/common/iconLabels.js';\r\nimport { DisposableStore, dispose } from '../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../base/common/platform.js';\r\nimport { ltrim } from '../../../base/common/strings.js';\r\nimport './media/quickInput.css';\r\nimport { localize } from '../../../nls.js';\r\nimport { getIconClass } from './quickInputUtils.js';\r\nimport { Lazy } from '../../../base/common/lazy.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { isDark } from '../../theme/common/theme.js';\r\nconst $ = dom.$;\r\nclass ListElement {\r\n    constructor(mainItem, previous, index, hasCheckbox, fireButtonTriggered, fireSeparatorButtonTriggered, onCheckedEmitter) {\r\n        var _a, _b, _c;\r\n        // state will get updated later\r\n        this._checked = false;\r\n        this._hidden = false;\r\n        this.hasCheckbox = hasCheckbox;\r\n        this.index = index;\r\n        this.fireButtonTriggered = fireButtonTriggered;\r\n        this.fireSeparatorButtonTriggered = fireSeparatorButtonTriggered;\r\n        this._onChecked = onCheckedEmitter;\r\n        this.onChecked = hasCheckbox\r\n            ? Event.map(Event.filter(this._onChecked.event, e => e.listElement === this), e => e.checked)\r\n            : Event.None;\r\n        if (mainItem.type === 'separator') {\r\n            this._separator = mainItem;\r\n        }\r\n        else {\r\n            this.item = mainItem;\r\n            if (previous && previous.type === 'separator' && !previous.buttons) {\r\n                this._separator = previous;\r\n            }\r\n            this.saneDescription = this.item.description;\r\n            this.saneDetail = this.item.detail;\r\n            this._labelHighlights = (_a = this.item.highlights) === null || _a === void 0 ? void 0 : _a.label;\r\n            this._descriptionHighlights = (_b = this.item.highlights) === null || _b === void 0 ? void 0 : _b.description;\r\n            this._detailHighlights = (_c = this.item.highlights) === null || _c === void 0 ? void 0 : _c.detail;\r\n            this.saneTooltip = this.item.tooltip;\r\n        }\r\n        this._init = new Lazy(() => {\r\n            var _a;\r\n            const saneLabel = (_a = mainItem.label) !== null && _a !== void 0 ? _a : '';\r\n            const saneSortLabel = parseLabelWithIcons(saneLabel).text.trim();\r\n            const saneAriaLabel = mainItem.ariaLabel || [saneLabel, this.saneDescription, this.saneDetail]\r\n                .map(s => getCodiconAriaLabel(s))\r\n                .filter(s => !!s)\r\n                .join(', ');\r\n            return {\r\n                saneLabel,\r\n                saneSortLabel,\r\n                saneAriaLabel\r\n            };\r\n        });\r\n    }\r\n    // #region Lazy Getters\r\n    get saneLabel() {\r\n        return this._init.value.saneLabel;\r\n    }\r\n    get saneSortLabel() {\r\n        return this._init.value.saneSortLabel;\r\n    }\r\n    get saneAriaLabel() {\r\n        return this._init.value.saneAriaLabel;\r\n    }\r\n    // #endregion\r\n    // #region Getters and Setters\r\n    get element() {\r\n        return this._element;\r\n    }\r\n    set element(value) {\r\n        this._element = value;\r\n    }\r\n    get hidden() {\r\n        return this._hidden;\r\n    }\r\n    set hidden(value) {\r\n        this._hidden = value;\r\n    }\r\n    get checked() {\r\n        return this._checked;\r\n    }\r\n    set checked(value) {\r\n        if (value !== this._checked) {\r\n            this._checked = value;\r\n            this._onChecked.fire({ listElement: this, checked: value });\r\n        }\r\n    }\r\n    get separator() {\r\n        return this._separator;\r\n    }\r\n    set separator(value) {\r\n        this._separator = value;\r\n    }\r\n    get labelHighlights() {\r\n        return this._labelHighlights;\r\n    }\r\n    set labelHighlights(value) {\r\n        this._labelHighlights = value;\r\n    }\r\n    get descriptionHighlights() {\r\n        return this._descriptionHighlights;\r\n    }\r\n    set descriptionHighlights(value) {\r\n        this._descriptionHighlights = value;\r\n    }\r\n    get detailHighlights() {\r\n        return this._detailHighlights;\r\n    }\r\n    set detailHighlights(value) {\r\n        this._detailHighlights = value;\r\n    }\r\n}\r\nclass ListElementRenderer {\r\n    constructor(themeService) {\r\n        this.themeService = themeService;\r\n    }\r\n    get templateId() {\r\n        return ListElementRenderer.ID;\r\n    }\r\n    renderTemplate(container) {\r\n        const data = Object.create(null);\r\n        data.toDisposeElement = [];\r\n        data.toDisposeTemplate = [];\r\n        data.entry = dom.append(container, $('.quick-input-list-entry'));\r\n        // Checkbox\r\n        const label = dom.append(data.entry, $('label.quick-input-list-label'));\r\n        data.toDisposeTemplate.push(dom.addStandardDisposableListener(label, dom.EventType.CLICK, e => {\r\n            if (!data.checkbox.offsetParent) { // If checkbox not visible:\r\n                e.preventDefault(); // Prevent toggle of checkbox when it is immediately shown afterwards. #91740\r\n            }\r\n        }));\r\n        data.checkbox = dom.append(label, $('input.quick-input-list-checkbox'));\r\n        data.checkbox.type = 'checkbox';\r\n        data.toDisposeTemplate.push(dom.addStandardDisposableListener(data.checkbox, dom.EventType.CHANGE, e => {\r\n            data.element.checked = data.checkbox.checked;\r\n        }));\r\n        // Rows\r\n        const rows = dom.append(label, $('.quick-input-list-rows'));\r\n        const row1 = dom.append(rows, $('.quick-input-list-row'));\r\n        const row2 = dom.append(rows, $('.quick-input-list-row'));\r\n        // Label\r\n        data.label = new IconLabel(row1, { supportHighlights: true, supportDescriptionHighlights: true, supportIcons: true });\r\n        data.toDisposeTemplate.push(data.label);\r\n        data.icon = dom.prepend(data.label.element, $('.quick-input-list-icon'));\r\n        // Keybinding\r\n        const keybindingContainer = dom.append(row1, $('.quick-input-list-entry-keybinding'));\r\n        data.keybinding = new KeybindingLabel(keybindingContainer, platform.OS);\r\n        // Detail\r\n        const detailContainer = dom.append(row2, $('.quick-input-list-label-meta'));\r\n        data.detail = new IconLabel(detailContainer, { supportHighlights: true, supportIcons: true });\r\n        data.toDisposeTemplate.push(data.detail);\r\n        // Separator\r\n        data.separator = dom.append(data.entry, $('.quick-input-list-separator'));\r\n        // Actions\r\n        data.actionBar = new ActionBar(data.entry);\r\n        data.actionBar.domNode.classList.add('quick-input-list-entry-action-bar');\r\n        data.toDisposeTemplate.push(data.actionBar);\r\n        return data;\r\n    }\r\n    renderElement(element, index, data) {\r\n        var _a, _b, _c, _d;\r\n        data.element = element;\r\n        element.element = (_a = data.entry) !== null && _a !== void 0 ? _a : undefined;\r\n        const mainItem = element.item ? element.item : element.separator;\r\n        data.checkbox.checked = element.checked;\r\n        data.toDisposeElement.push(element.onChecked(checked => data.checkbox.checked = checked));\r\n        const { labelHighlights, descriptionHighlights, detailHighlights } = element;\r\n        if ((_b = element.item) === null || _b === void 0 ? void 0 : _b.iconPath) {\r\n            const icon = isDark(this.themeService.getColorTheme().type) ? element.item.iconPath.dark : ((_c = element.item.iconPath.light) !== null && _c !== void 0 ? _c : element.item.iconPath.dark);\r\n            const iconUrl = URI.revive(icon);\r\n            data.icon.className = 'quick-input-list-icon';\r\n            data.icon.style.backgroundImage = dom.asCSSUrl(iconUrl);\r\n        }\r\n        else {\r\n            data.icon.style.backgroundImage = '';\r\n            data.icon.className = ((_d = element.item) === null || _d === void 0 ? void 0 : _d.iconClass) ? `quick-input-list-icon ${element.item.iconClass}` : '';\r\n        }\r\n        // Label\r\n        const options = {\r\n            matches: labelHighlights || [],\r\n            descriptionTitle: element.saneDescription,\r\n            descriptionMatches: descriptionHighlights || [],\r\n            labelEscapeNewLines: true\r\n        };\r\n        if (mainItem.type !== 'separator') {\r\n            options.extraClasses = mainItem.iconClasses;\r\n            options.italic = mainItem.italic;\r\n            options.strikethrough = mainItem.strikethrough;\r\n            data.entry.classList.remove('quick-input-list-separator-as-item');\r\n        }\r\n        else {\r\n            data.entry.classList.add('quick-input-list-separator-as-item');\r\n        }\r\n        data.label.setLabel(element.saneLabel, element.saneDescription, options);\r\n        // Keybinding\r\n        data.keybinding.set(mainItem.type === 'separator' ? undefined : mainItem.keybinding);\r\n        // Detail\r\n        if (element.saneDetail) {\r\n            data.detail.element.style.display = '';\r\n            data.detail.setLabel(element.saneDetail, undefined, {\r\n                matches: detailHighlights,\r\n                title: element.saneDetail,\r\n                labelEscapeNewLines: true\r\n            });\r\n        }\r\n        else {\r\n            data.detail.element.style.display = 'none';\r\n        }\r\n        // Separator\r\n        if (element.item && element.separator && element.separator.label) {\r\n            data.separator.textContent = element.separator.label;\r\n            data.separator.style.display = '';\r\n        }\r\n        else {\r\n            data.separator.style.display = 'none';\r\n        }\r\n        data.entry.classList.toggle('quick-input-list-separator-border', !!element.separator);\r\n        // Actions\r\n        const buttons = mainItem.buttons;\r\n        if (buttons && buttons.length) {\r\n            data.actionBar.push(buttons.map((button, index) => {\r\n                let cssClasses = button.iconClass || (button.iconPath ? getIconClass(button.iconPath) : undefined);\r\n                if (button.alwaysVisible) {\r\n                    cssClasses = cssClasses ? `${cssClasses} always-visible` : 'always-visible';\r\n                }\r\n                return {\r\n                    id: `id-${index}`,\r\n                    class: cssClasses,\r\n                    enabled: true,\r\n                    label: '',\r\n                    tooltip: button.tooltip || '',\r\n                    run: () => {\r\n                        mainItem.type !== 'separator'\r\n                            ? element.fireButtonTriggered({\r\n                                button,\r\n                                item: mainItem\r\n                            })\r\n                            : element.fireSeparatorButtonTriggered({\r\n                                button,\r\n                                separator: mainItem\r\n                            });\r\n                    }\r\n                };\r\n            }), { icon: true, label: false });\r\n            data.entry.classList.add('has-actions');\r\n        }\r\n        else {\r\n            data.entry.classList.remove('has-actions');\r\n        }\r\n    }\r\n    disposeElement(element, index, data) {\r\n        data.toDisposeElement = dispose(data.toDisposeElement);\r\n        data.actionBar.clear();\r\n    }\r\n    disposeTemplate(data) {\r\n        data.toDisposeElement = dispose(data.toDisposeElement);\r\n        data.toDisposeTemplate = dispose(data.toDisposeTemplate);\r\n    }\r\n}\r\nListElementRenderer.ID = 'listelement';\r\nclass ListElementDelegate {\r\n    getHeight(element) {\r\n        if (!element.item) {\r\n            // must be a separator\r\n            return 24;\r\n        }\r\n        return element.saneDetail ? 44 : 22;\r\n    }\r\n    getTemplateId(element) {\r\n        return ListElementRenderer.ID;\r\n    }\r\n}\r\nexport var QuickInputListFocus;\r\n(function (QuickInputListFocus) {\r\n    QuickInputListFocus[QuickInputListFocus[\"First\"] = 1] = \"First\";\r\n    QuickInputListFocus[QuickInputListFocus[\"Second\"] = 2] = \"Second\";\r\n    QuickInputListFocus[QuickInputListFocus[\"Last\"] = 3] = \"Last\";\r\n    QuickInputListFocus[QuickInputListFocus[\"Next\"] = 4] = \"Next\";\r\n    QuickInputListFocus[QuickInputListFocus[\"Previous\"] = 5] = \"Previous\";\r\n    QuickInputListFocus[QuickInputListFocus[\"NextPage\"] = 6] = \"NextPage\";\r\n    QuickInputListFocus[QuickInputListFocus[\"PreviousPage\"] = 7] = \"PreviousPage\";\r\n})(QuickInputListFocus || (QuickInputListFocus = {}));\r\nexport class QuickInputList {\r\n    constructor(parent, id, options, themeService) {\r\n        this.parent = parent;\r\n        this.options = options;\r\n        this.inputElements = [];\r\n        this.elements = [];\r\n        this.elementsToIndexes = new Map();\r\n        this.matchOnDescription = false;\r\n        this.matchOnDetail = false;\r\n        this.matchOnLabel = true;\r\n        this.matchOnLabelMode = 'fuzzy';\r\n        this.sortByLabel = true;\r\n        this._onChangedAllVisibleChecked = new Emitter();\r\n        this.onChangedAllVisibleChecked = this._onChangedAllVisibleChecked.event;\r\n        this._onChangedCheckedCount = new Emitter();\r\n        this.onChangedCheckedCount = this._onChangedCheckedCount.event;\r\n        this._onChangedVisibleCount = new Emitter();\r\n        this.onChangedVisibleCount = this._onChangedVisibleCount.event;\r\n        this._onChangedCheckedElements = new Emitter();\r\n        this.onChangedCheckedElements = this._onChangedCheckedElements.event;\r\n        this._onButtonTriggered = new Emitter();\r\n        this.onButtonTriggered = this._onButtonTriggered.event;\r\n        this._onSeparatorButtonTriggered = new Emitter();\r\n        this.onSeparatorButtonTriggered = this._onSeparatorButtonTriggered.event;\r\n        this._onKeyDown = new Emitter();\r\n        this.onKeyDown = this._onKeyDown.event;\r\n        this._onLeave = new Emitter();\r\n        this.onLeave = this._onLeave.event;\r\n        this._listElementChecked = new Emitter();\r\n        this._fireCheckedEvents = true;\r\n        this.elementDisposables = [];\r\n        this.disposables = [];\r\n        this.id = id;\r\n        this.container = dom.append(this.parent, $('.quick-input-list'));\r\n        const delegate = new ListElementDelegate();\r\n        const accessibilityProvider = new QuickInputAccessibilityProvider();\r\n        this.list = options.createList('QuickInput', this.container, delegate, [new ListElementRenderer(themeService)], {\r\n            identityProvider: {\r\n                getId: element => {\r\n                    var _a, _b, _c, _d, _e, _f, _g, _h;\r\n                    // always prefer item over separator because if item is defined, it must be the main item type\r\n                    // always prefer a defined id if one was specified and use label as a fallback\r\n                    return (_h = (_f = (_d = (_b = (_a = element.item) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (_c = element.item) === null || _c === void 0 ? void 0 : _c.label) !== null && _d !== void 0 ? _d : (_e = element.separator) === null || _e === void 0 ? void 0 : _e.id) !== null && _f !== void 0 ? _f : (_g = element.separator) === null || _g === void 0 ? void 0 : _g.label) !== null && _h !== void 0 ? _h : '';\r\n                }\r\n            },\r\n            setRowLineHeight: false,\r\n            multipleSelectionSupport: false,\r\n            horizontalScrolling: false,\r\n            accessibilityProvider\r\n        });\r\n        this.list.getHTMLElement().id = id;\r\n        this.disposables.push(this.list);\r\n        this.disposables.push(this.list.onKeyDown(e => {\r\n            const event = new StandardKeyboardEvent(e);\r\n            switch (event.keyCode) {\r\n                case 10 /* KeyCode.Space */:\r\n                    this.toggleCheckbox();\r\n                    break;\r\n                case 31 /* KeyCode.KeyA */:\r\n                    if (platform.isMacintosh ? e.metaKey : e.ctrlKey) {\r\n                        this.list.setFocus(range(this.list.length));\r\n                    }\r\n                    break;\r\n                case 16 /* KeyCode.UpArrow */: {\r\n                    const focus1 = this.list.getFocus();\r\n                    if (focus1.length === 1 && focus1[0] === 0) {\r\n                        this._onLeave.fire();\r\n                    }\r\n                    break;\r\n                }\r\n                case 18 /* KeyCode.DownArrow */: {\r\n                    const focus2 = this.list.getFocus();\r\n                    if (focus2.length === 1 && focus2[0] === this.list.length - 1) {\r\n                        this._onLeave.fire();\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            this._onKeyDown.fire(event);\r\n        }));\r\n        this.disposables.push(this.list.onMouseDown(e => {\r\n            if (e.browserEvent.button !== 2) {\r\n                // Works around / fixes #64350.\r\n                e.browserEvent.preventDefault();\r\n            }\r\n        }));\r\n        this.disposables.push(dom.addDisposableListener(this.container, dom.EventType.CLICK, e => {\r\n            if (e.x || e.y) { // Avoid 'click' triggered by 'space' on checkbox.\r\n                this._onLeave.fire();\r\n            }\r\n        }));\r\n        this.disposables.push(this.list.onMouseMiddleClick(e => {\r\n            this._onLeave.fire();\r\n        }));\r\n        this.disposables.push(this.list.onContextMenu(e => {\r\n            if (typeof e.index === 'number') {\r\n                e.browserEvent.preventDefault();\r\n                // we want to treat a context menu event as\r\n                // a gesture to open the item at the index\r\n                // since we do not have any context menu\r\n                // this enables for example macOS to Ctrl-\r\n                // click on an item to open it.\r\n                this.list.setSelection([e.index]);\r\n            }\r\n        }));\r\n        if (options.hoverDelegate) {\r\n            const delayer = new ThrottledDelayer(options.hoverDelegate.delay);\r\n            // onMouseOver triggers every time a new element has been moused over\r\n            // even if it's on the same list item.\r\n            this.disposables.push(this.list.onMouseOver(async (e) => {\r\n                var _a;\r\n                // If we hover over an anchor element, we don't want to show the hover because\r\n                // the anchor may have a tooltip that we want to show instead.\r\n                if (e.browserEvent.target instanceof HTMLAnchorElement) {\r\n                    delayer.cancel();\r\n                    return;\r\n                }\r\n                if (\r\n                // anchors are an exception as called out above so we skip them here\r\n                !(e.browserEvent.relatedTarget instanceof HTMLAnchorElement) &&\r\n                    // check if the mouse is still over the same element\r\n                    dom.isAncestor(e.browserEvent.relatedTarget, (_a = e.element) === null || _a === void 0 ? void 0 : _a.element)) {\r\n                    return;\r\n                }\r\n                try {\r\n                    await delayer.trigger(async () => {\r\n                        if (e.element) {\r\n                            this.showHover(e.element);\r\n                        }\r\n                    });\r\n                }\r\n                catch (e) {\r\n                    // Ignore cancellation errors due to mouse out\r\n                    if (!isCancellationError(e)) {\r\n                        throw e;\r\n                    }\r\n                }\r\n            }));\r\n            this.disposables.push(this.list.onMouseOut(e => {\r\n                var _a;\r\n                // onMouseOut triggers every time a new element has been moused over\r\n                // even if it's on the same list item. We only want one event, so we\r\n                // check if the mouse is still over the same element.\r\n                if (dom.isAncestor(e.browserEvent.relatedTarget, (_a = e.element) === null || _a === void 0 ? void 0 : _a.element)) {\r\n                    return;\r\n                }\r\n                delayer.cancel();\r\n            }));\r\n            this.disposables.push(delayer);\r\n        }\r\n        this.disposables.push(this._listElementChecked.event(_ => this.fireCheckedEvents()));\r\n        this.disposables.push(this._onChangedAllVisibleChecked, this._onChangedCheckedCount, this._onChangedVisibleCount, this._onChangedCheckedElements, this._onButtonTriggered, this._onSeparatorButtonTriggered, this._onLeave, this._onKeyDown);\r\n    }\r\n    get onDidChangeFocus() {\r\n        return Event.map(this.list.onDidChangeFocus, e => e.elements.map(e => e.item));\r\n    }\r\n    get onDidChangeSelection() {\r\n        return Event.map(this.list.onDidChangeSelection, e => ({ items: e.elements.map(e => e.item), event: e.browserEvent }));\r\n    }\r\n    get scrollTop() {\r\n        return this.list.scrollTop;\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this.list.scrollTop = scrollTop;\r\n    }\r\n    get ariaLabel() {\r\n        return this.list.getHTMLElement().ariaLabel;\r\n    }\r\n    set ariaLabel(label) {\r\n        this.list.getHTMLElement().ariaLabel = label;\r\n    }\r\n    getAllVisibleChecked() {\r\n        return this.allVisibleChecked(this.elements, false);\r\n    }\r\n    allVisibleChecked(elements, whenNoneVisible = true) {\r\n        for (let i = 0, n = elements.length; i < n; i++) {\r\n            const element = elements[i];\r\n            if (!element.hidden) {\r\n                if (!element.checked) {\r\n                    return false;\r\n                }\r\n                else {\r\n                    whenNoneVisible = true;\r\n                }\r\n            }\r\n        }\r\n        return whenNoneVisible;\r\n    }\r\n    getCheckedCount() {\r\n        let count = 0;\r\n        const elements = this.elements;\r\n        for (let i = 0, n = elements.length; i < n; i++) {\r\n            if (elements[i].checked) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n    getVisibleCount() {\r\n        let count = 0;\r\n        const elements = this.elements;\r\n        for (let i = 0, n = elements.length; i < n; i++) {\r\n            if (!elements[i].hidden) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n    setAllVisibleChecked(checked) {\r\n        try {\r\n            this._fireCheckedEvents = false;\r\n            this.elements.forEach(element => {\r\n                if (!element.hidden) {\r\n                    element.checked = checked;\r\n                }\r\n            });\r\n        }\r\n        finally {\r\n            this._fireCheckedEvents = true;\r\n            this.fireCheckedEvents();\r\n        }\r\n    }\r\n    setElements(inputElements) {\r\n        this.elementDisposables = dispose(this.elementDisposables);\r\n        const fireButtonTriggered = (event) => this.fireButtonTriggered(event);\r\n        const fireSeparatorButtonTriggered = (event) => this.fireSeparatorButtonTriggered(event);\r\n        this.inputElements = inputElements;\r\n        const elementsToIndexes = new Map();\r\n        const hasCheckbox = this.parent.classList.contains('show-checkboxes');\r\n        this.elements = inputElements.reduce((result, item, index) => {\r\n            var _a;\r\n            const previous = index > 0 ? inputElements[index - 1] : undefined;\r\n            if (item.type === 'separator') {\r\n                if (!item.buttons) {\r\n                    // This separator will be rendered as a part of the list item\r\n                    return result;\r\n                }\r\n            }\r\n            const element = new ListElement(item, previous, index, hasCheckbox, fireButtonTriggered, fireSeparatorButtonTriggered, this._listElementChecked);\r\n            const resultIndex = result.length;\r\n            result.push(element);\r\n            elementsToIndexes.set((_a = element.item) !== null && _a !== void 0 ? _a : element.separator, resultIndex);\r\n            return result;\r\n        }, []);\r\n        this.elementsToIndexes = elementsToIndexes;\r\n        this.list.splice(0, this.list.length); // Clear focus and selection first, sending the events when the list is empty.\r\n        this.list.splice(0, this.list.length, this.elements);\r\n        this._onChangedVisibleCount.fire(this.elements.length);\r\n    }\r\n    getFocusedElements() {\r\n        return this.list.getFocusedElements()\r\n            .map(e => e.item);\r\n    }\r\n    setFocusedElements(items) {\r\n        this.list.setFocus(items\r\n            .filter(item => this.elementsToIndexes.has(item))\r\n            .map(item => this.elementsToIndexes.get(item)));\r\n        if (items.length > 0) {\r\n            const focused = this.list.getFocus()[0];\r\n            if (typeof focused === 'number') {\r\n                this.list.reveal(focused);\r\n            }\r\n        }\r\n    }\r\n    getActiveDescendant() {\r\n        return this.list.getHTMLElement().getAttribute('aria-activedescendant');\r\n    }\r\n    setSelectedElements(items) {\r\n        this.list.setSelection(items\r\n            .filter(item => this.elementsToIndexes.has(item))\r\n            .map(item => this.elementsToIndexes.get(item)));\r\n    }\r\n    getCheckedElements() {\r\n        return this.elements.filter(e => e.checked)\r\n            .map(e => e.item)\r\n            .filter(e => !!e);\r\n    }\r\n    setCheckedElements(items) {\r\n        try {\r\n            this._fireCheckedEvents = false;\r\n            const checked = new Set();\r\n            for (const item of items) {\r\n                checked.add(item);\r\n            }\r\n            for (const element of this.elements) {\r\n                element.checked = checked.has(element.item);\r\n            }\r\n        }\r\n        finally {\r\n            this._fireCheckedEvents = true;\r\n            this.fireCheckedEvents();\r\n        }\r\n    }\r\n    set enabled(value) {\r\n        this.list.getHTMLElement().style.pointerEvents = value ? '' : 'none';\r\n    }\r\n    focus(what) {\r\n        if (!this.list.length) {\r\n            return;\r\n        }\r\n        if (what === QuickInputListFocus.Second && this.list.length < 2) {\r\n            what = QuickInputListFocus.First;\r\n        }\r\n        switch (what) {\r\n            case QuickInputListFocus.First:\r\n                this.list.scrollTop = 0;\r\n                this.list.focusFirst(undefined, (e) => !!e.item);\r\n                break;\r\n            case QuickInputListFocus.Second:\r\n                this.list.scrollTop = 0;\r\n                this.list.focusNth(1, undefined, (e) => !!e.item);\r\n                break;\r\n            case QuickInputListFocus.Last:\r\n                this.list.scrollTop = this.list.scrollHeight;\r\n                this.list.focusLast(undefined, (e) => !!e.item);\r\n                break;\r\n            case QuickInputListFocus.Next: {\r\n                this.list.focusNext(undefined, true, undefined, (e) => !!e.item);\r\n                const index = this.list.getFocus()[0];\r\n                if (index !== 0 && !this.elements[index - 1].item && this.list.firstVisibleIndex > index - 1) {\r\n                    this.list.reveal(index - 1);\r\n                }\r\n                break;\r\n            }\r\n            case QuickInputListFocus.Previous: {\r\n                this.list.focusPrevious(undefined, true, undefined, (e) => !!e.item);\r\n                const index = this.list.getFocus()[0];\r\n                if (index !== 0 && !this.elements[index - 1].item && this.list.firstVisibleIndex > index - 1) {\r\n                    this.list.reveal(index - 1);\r\n                }\r\n                break;\r\n            }\r\n            case QuickInputListFocus.NextPage:\r\n                this.list.focusNextPage(undefined, (e) => !!e.item);\r\n                break;\r\n            case QuickInputListFocus.PreviousPage:\r\n                this.list.focusPreviousPage(undefined, (e) => !!e.item);\r\n                break;\r\n        }\r\n        const focused = this.list.getFocus()[0];\r\n        if (typeof focused === 'number') {\r\n            this.list.reveal(focused);\r\n        }\r\n    }\r\n    clearFocus() {\r\n        this.list.setFocus([]);\r\n    }\r\n    domFocus() {\r\n        this.list.domFocus();\r\n    }\r\n    /**\r\n     * Disposes of the hover and shows a new one for the given index if it has a tooltip.\r\n     * @param element The element to show the hover for\r\n     */\r\n    showHover(element) {\r\n        var _a, _b, _c;\r\n        if (this.options.hoverDelegate === undefined) {\r\n            return;\r\n        }\r\n        if (this._lastHover && !this._lastHover.isDisposed) {\r\n            (_b = (_a = this.options.hoverDelegate).onDidHideHover) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n            (_c = this._lastHover) === null || _c === void 0 ? void 0 : _c.dispose();\r\n        }\r\n        if (!element.element || !element.saneTooltip) {\r\n            return;\r\n        }\r\n        this._lastHover = this.options.hoverDelegate.showHover({\r\n            content: element.saneTooltip,\r\n            target: element.element,\r\n            linkHandler: (url) => {\r\n                this.options.linkOpenerDelegate(url);\r\n            },\r\n            appearance: {\r\n                showPointer: true,\r\n            },\r\n            container: this.container,\r\n            position: {\r\n                hoverPosition: 1 /* HoverPosition.RIGHT */\r\n            }\r\n        }, false);\r\n    }\r\n    layout(maxHeight) {\r\n        this.list.getHTMLElement().style.maxHeight = maxHeight ? `${\r\n        // Make sure height aligns with list item heights\r\n        Math.floor(maxHeight / 44) * 44\r\n            // Add some extra height so that it's clear there's more to scroll\r\n            + 6}px` : '';\r\n        this.list.layout();\r\n    }\r\n    filter(query) {\r\n        if (!(this.sortByLabel || this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\r\n            this.list.layout();\r\n            return false;\r\n        }\r\n        const queryWithWhitespace = query;\r\n        query = query.trim();\r\n        // Reset filtering\r\n        if (!query || !(this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\r\n            this.elements.forEach(element => {\r\n                element.labelHighlights = undefined;\r\n                element.descriptionHighlights = undefined;\r\n                element.detailHighlights = undefined;\r\n                element.hidden = false;\r\n                const previous = element.index && this.inputElements[element.index - 1];\r\n                if (element.item) {\r\n                    element.separator = previous && previous.type === 'separator' && !previous.buttons ? previous : undefined;\r\n                }\r\n            });\r\n        }\r\n        // Filter by value (since we support icons in labels, use $(..) aware fuzzy matching)\r\n        else {\r\n            let currentSeparator;\r\n            this.elements.forEach(element => {\r\n                var _a, _b, _c, _d;\r\n                let labelHighlights;\r\n                if (this.matchOnLabelMode === 'fuzzy') {\r\n                    labelHighlights = this.matchOnLabel ? (_a = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneLabel))) !== null && _a !== void 0 ? _a : undefined : undefined;\r\n                }\r\n                else {\r\n                    labelHighlights = this.matchOnLabel ? (_b = matchesContiguousIconAware(queryWithWhitespace, parseLabelWithIcons(element.saneLabel))) !== null && _b !== void 0 ? _b : undefined : undefined;\r\n                }\r\n                const descriptionHighlights = this.matchOnDescription ? (_c = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDescription || ''))) !== null && _c !== void 0 ? _c : undefined : undefined;\r\n                const detailHighlights = this.matchOnDetail ? (_d = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDetail || ''))) !== null && _d !== void 0 ? _d : undefined : undefined;\r\n                if (labelHighlights || descriptionHighlights || detailHighlights) {\r\n                    element.labelHighlights = labelHighlights;\r\n                    element.descriptionHighlights = descriptionHighlights;\r\n                    element.detailHighlights = detailHighlights;\r\n                    element.hidden = false;\r\n                }\r\n                else {\r\n                    element.labelHighlights = undefined;\r\n                    element.descriptionHighlights = undefined;\r\n                    element.detailHighlights = undefined;\r\n                    element.hidden = element.item ? !element.item.alwaysShow : true;\r\n                }\r\n                // Ensure separators are filtered out first before deciding if we need to bring them back\r\n                if (element.item) {\r\n                    element.separator = undefined;\r\n                }\r\n                else if (element.separator) {\r\n                    element.hidden = true;\r\n                }\r\n                // we can show the separator unless the list gets sorted by match\r\n                if (!this.sortByLabel) {\r\n                    const previous = element.index && this.inputElements[element.index - 1];\r\n                    currentSeparator = previous && previous.type === 'separator' ? previous : currentSeparator;\r\n                    if (currentSeparator && !element.hidden) {\r\n                        element.separator = currentSeparator;\r\n                        currentSeparator = undefined;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        const shownElements = this.elements.filter(element => !element.hidden);\r\n        // Sort by value\r\n        if (this.sortByLabel && query) {\r\n            const normalizedSearchValue = query.toLowerCase();\r\n            shownElements.sort((a, b) => {\r\n                return compareEntries(a, b, normalizedSearchValue);\r\n            });\r\n        }\r\n        this.elementsToIndexes = shownElements.reduce((map, element, index) => {\r\n            var _a;\r\n            map.set((_a = element.item) !== null && _a !== void 0 ? _a : element.separator, index);\r\n            return map;\r\n        }, new Map());\r\n        this.list.splice(0, this.list.length, shownElements);\r\n        this.list.setFocus([]);\r\n        this.list.layout();\r\n        this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\r\n        this._onChangedVisibleCount.fire(shownElements.length);\r\n        return true;\r\n    }\r\n    toggleCheckbox() {\r\n        try {\r\n            this._fireCheckedEvents = false;\r\n            const elements = this.list.getFocusedElements();\r\n            const allChecked = this.allVisibleChecked(elements);\r\n            for (const element of elements) {\r\n                element.checked = !allChecked;\r\n            }\r\n        }\r\n        finally {\r\n            this._fireCheckedEvents = true;\r\n            this.fireCheckedEvents();\r\n        }\r\n    }\r\n    display(display) {\r\n        this.container.style.display = display ? '' : 'none';\r\n    }\r\n    isDisplayed() {\r\n        return this.container.style.display !== 'none';\r\n    }\r\n    dispose() {\r\n        this.elementDisposables = dispose(this.elementDisposables);\r\n        this.disposables = dispose(this.disposables);\r\n    }\r\n    fireCheckedEvents() {\r\n        if (this._fireCheckedEvents) {\r\n            this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\r\n            this._onChangedCheckedCount.fire(this.getCheckedCount());\r\n            this._onChangedCheckedElements.fire(this.getCheckedElements());\r\n        }\r\n    }\r\n    fireButtonTriggered(event) {\r\n        this._onButtonTriggered.fire(event);\r\n    }\r\n    fireSeparatorButtonTriggered(event) {\r\n        this._onSeparatorButtonTriggered.fire(event);\r\n    }\r\n    style(styles) {\r\n        this.list.style(styles);\r\n    }\r\n    toggleHover() {\r\n        const element = this.list.getFocusedElements()[0];\r\n        if (!(element === null || element === void 0 ? void 0 : element.saneTooltip)) {\r\n            return;\r\n        }\r\n        // if there's a hover already, hide it (toggle off)\r\n        if (this._lastHover && !this._lastHover.isDisposed) {\r\n            this._lastHover.dispose();\r\n            return;\r\n        }\r\n        // If there is no hover, show it (toggle on)\r\n        const focused = this.list.getFocusedElements()[0];\r\n        if (!focused) {\r\n            return;\r\n        }\r\n        this.showHover(focused);\r\n        const store = new DisposableStore();\r\n        store.add(this.list.onDidChangeFocus(e => {\r\n            if (e.indexes.length) {\r\n                this.showHover(e.elements[0]);\r\n            }\r\n        }));\r\n        if (this._lastHover) {\r\n            store.add(this._lastHover);\r\n        }\r\n        this._toggleHover = store;\r\n        this.elementDisposables.push(this._toggleHover);\r\n    }\r\n}\r\n__decorate([\r\n    memoize\r\n], QuickInputList.prototype, \"onDidChangeFocus\", null);\r\n__decorate([\r\n    memoize\r\n], QuickInputList.prototype, \"onDidChangeSelection\", null);\r\nfunction matchesContiguousIconAware(query, target) {\r\n    const { text, iconOffsets } = target;\r\n    // Return early if there are no icon markers in the word to match against\r\n    if (!iconOffsets || iconOffsets.length === 0) {\r\n        return matchesContiguous(query, text);\r\n    }\r\n    // Trim the word to match against because it could have leading\r\n    // whitespace now if the word started with an icon\r\n    const wordToMatchAgainstWithoutIconsTrimmed = ltrim(text, ' ');\r\n    const leadingWhitespaceOffset = text.length - wordToMatchAgainstWithoutIconsTrimmed.length;\r\n    // match on value without icon\r\n    const matches = matchesContiguous(query, wordToMatchAgainstWithoutIconsTrimmed);\r\n    // Map matches back to offsets with icon and trimming\r\n    if (matches) {\r\n        for (const match of matches) {\r\n            const iconOffset = iconOffsets[match.start + leadingWhitespaceOffset] /* icon offsets at index */ + leadingWhitespaceOffset /* overall leading whitespace offset */;\r\n            match.start += iconOffset;\r\n            match.end += iconOffset;\r\n        }\r\n    }\r\n    return matches;\r\n}\r\nfunction matchesContiguous(word, wordToMatchAgainst) {\r\n    const matchIndex = wordToMatchAgainst.toLowerCase().indexOf(word.toLowerCase());\r\n    if (matchIndex !== -1) {\r\n        return [{ start: matchIndex, end: matchIndex + word.length }];\r\n    }\r\n    return null;\r\n}\r\nfunction compareEntries(elementA, elementB, lookFor) {\r\n    const labelHighlightsA = elementA.labelHighlights || [];\r\n    const labelHighlightsB = elementB.labelHighlights || [];\r\n    if (labelHighlightsA.length && !labelHighlightsB.length) {\r\n        return -1;\r\n    }\r\n    if (!labelHighlightsA.length && labelHighlightsB.length) {\r\n        return 1;\r\n    }\r\n    if (labelHighlightsA.length === 0 && labelHighlightsB.length === 0) {\r\n        return 0;\r\n    }\r\n    return compareAnything(elementA.saneSortLabel, elementB.saneSortLabel, lookFor);\r\n}\r\nclass QuickInputAccessibilityProvider {\r\n    getWidgetAriaLabel() {\r\n        return localize('quickInput', \"Quick Input\");\r\n    }\r\n    getAriaLabel(element) {\r\n        var _a;\r\n        return ((_a = element.separator) === null || _a === void 0 ? void 0 : _a.label)\r\n            ? `${element.saneAriaLabel}, ${element.separator.label}`\r\n            : element.saneAriaLabel;\r\n    }\r\n    getWidgetRole() {\r\n        return 'listbox';\r\n    }\r\n    getRole(element) {\r\n        return element.hasCheckbox ? 'checkbox' : 'option';\r\n    }\r\n    isChecked(element) {\r\n        if (!element.hasCheckbox) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            value: element.checked,\r\n            onDidChange: element.onChecked\r\n        };\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { memoize } from './decorators.js';\r\nexport class LinkedText {\r\n    constructor(nodes) {\r\n        this.nodes = nodes;\r\n    }\r\n    toString() {\r\n        return this.nodes.map(node => typeof node === 'string' ? node : node.label).join('');\r\n    }\r\n}\r\n__decorate([\r\n    memoize\r\n], LinkedText.prototype, \"toString\", null);\r\nconst LINK_REGEX = /\\[([^\\]]+)\\]\\(((?:https?:\\/\\/|command:|file:)[^\\)\\s]+)(?: ([\"'])(.+?)(\\3))?\\)/gi;\r\nexport function parseLinkedText(text) {\r\n    const result = [];\r\n    let index = 0;\r\n    let match;\r\n    while (match = LINK_REGEX.exec(text)) {\r\n        if (match.index - index > 0) {\r\n            result.push(text.substring(index, match.index));\r\n        }\r\n        const [, label, href, , title] = match;\r\n        if (title) {\r\n            result.push({ label, href, title });\r\n        }\r\n        else {\r\n            result.push({ label, href });\r\n        }\r\n        index = match.index + match[0].length;\r\n    }\r\n    if (index < text.length) {\r\n        result.push(text.substring(index));\r\n    }\r\n    return new LinkedText(result);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { DomEmitter } from '../../../base/browser/event.js';\r\nimport { Event } from '../../../base/common/event.js';\r\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\r\nimport { Gesture, EventType as GestureEventType } from '../../../base/browser/touch.js';\r\nimport { renderLabelWithIcons } from '../../../base/browser/ui/iconLabel/iconLabels.js';\r\nimport { IdGenerator } from '../../../base/common/idGenerator.js';\r\nimport { parseLinkedText } from '../../../base/common/linkedText.js';\r\nimport './media/quickInput.css';\r\nimport { localize } from '../../../nls.js';\r\nconst iconPathToClass = {};\r\nconst iconClassGenerator = new IdGenerator('quick-input-button-icon-');\r\nexport function getIconClass(iconPath) {\r\n    if (!iconPath) {\r\n        return undefined;\r\n    }\r\n    let iconClass;\r\n    const key = iconPath.dark.toString();\r\n    if (iconPathToClass[key]) {\r\n        iconClass = iconPathToClass[key];\r\n    }\r\n    else {\r\n        iconClass = iconClassGenerator.nextId();\r\n        dom.createCSSRule(`.${iconClass}, .hc-light .${iconClass}`, `background-image: ${dom.asCSSUrl(iconPath.light || iconPath.dark)}`);\r\n        dom.createCSSRule(`.vs-dark .${iconClass}, .hc-black .${iconClass}`, `background-image: ${dom.asCSSUrl(iconPath.dark)}`);\r\n        iconPathToClass[key] = iconClass;\r\n    }\r\n    return iconClass;\r\n}\r\nexport function renderQuickInputDescription(description, container, actionHandler) {\r\n    dom.reset(container);\r\n    const parsed = parseLinkedText(description);\r\n    let tabIndex = 0;\r\n    for (const node of parsed.nodes) {\r\n        if (typeof node === 'string') {\r\n            container.append(...renderLabelWithIcons(node));\r\n        }\r\n        else {\r\n            let title = node.title;\r\n            if (!title && node.href.startsWith('command:')) {\r\n                title = localize('executeCommand', \"Click to execute command '{0}'\", node.href.substring('command:'.length));\r\n            }\r\n            else if (!title) {\r\n                title = node.href;\r\n            }\r\n            const anchor = dom.$('a', { href: node.href, title, tabIndex: tabIndex++ }, node.label);\r\n            anchor.style.textDecoration = 'underline';\r\n            const handleOpen = (e) => {\r\n                if (dom.isEventLike(e)) {\r\n                    dom.EventHelper.stop(e, true);\r\n                }\r\n                actionHandler.callback(node.href);\r\n            };\r\n            const onClick = actionHandler.disposables.add(new DomEmitter(anchor, dom.EventType.CLICK)).event;\r\n            const onKeydown = actionHandler.disposables.add(new DomEmitter(anchor, dom.EventType.KEY_DOWN)).event;\r\n            const onSpaceOrEnter = Event.chain(onKeydown, $ => $.filter(e => {\r\n                const event = new StandardKeyboardEvent(e);\r\n                return event.equals(10 /* KeyCode.Space */) || event.equals(3 /* KeyCode.Enter */);\r\n            }));\r\n            actionHandler.disposables.add(Gesture.addTarget(anchor));\r\n            const onTap = actionHandler.disposables.add(new DomEmitter(anchor, GestureEventType.Tap)).event;\r\n            Event.any(onClick, onTap, onSpaceOrEnter)(handleOpen, null, actionHandler.disposables);\r\n            container.appendChild(anchor);\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\r\nimport { Toggle } from '../../../base/browser/ui/toggle/toggle.js';\r\nimport { Action } from '../../../base/common/actions.js';\r\nimport { equals } from '../../../base/common/arrays.js';\r\nimport { TimeoutTimer } from '../../../base/common/async.js';\r\nimport { Codicon } from '../../../base/common/codicons.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { isIOS } from '../../../base/common/platform.js';\r\nimport Severity from '../../../base/common/severity.js';\r\nimport { ThemeIcon } from '../../../base/common/themables.js';\r\nimport './media/quickInput.css';\r\nimport { localize } from '../../../nls.js';\r\nimport { ItemActivation, NO_KEY_MODS, QuickInputHideReason } from '../common/quickInput.js';\r\nimport { QuickInputListFocus } from './quickInputList.js';\r\nimport { getIconClass, renderQuickInputDescription } from './quickInputUtils.js';\r\nexport const backButton = {\r\n    iconClass: ThemeIcon.asClassName(Codicon.quickInputBack),\r\n    tooltip: localize('quickInput.back', \"Back\"),\r\n    handle: -1 // TODO\r\n};\r\nclass QuickInput extends Disposable {\r\n    constructor(ui) {\r\n        super();\r\n        this.ui = ui;\r\n        this._widgetUpdated = false;\r\n        this.visible = false;\r\n        this._enabled = true;\r\n        this._busy = false;\r\n        this._ignoreFocusOut = false;\r\n        this._buttons = [];\r\n        this.buttonsUpdated = false;\r\n        this._toggles = [];\r\n        this.togglesUpdated = false;\r\n        this.noValidationMessage = QuickInput.noPromptMessage;\r\n        this._severity = Severity.Ignore;\r\n        this.onDidTriggerButtonEmitter = this._register(new Emitter());\r\n        this.onDidHideEmitter = this._register(new Emitter());\r\n        this.onDisposeEmitter = this._register(new Emitter());\r\n        this.visibleDisposables = this._register(new DisposableStore());\r\n        this.onDidHide = this.onDidHideEmitter.event;\r\n    }\r\n    get title() {\r\n        return this._title;\r\n    }\r\n    set title(title) {\r\n        this._title = title;\r\n        this.update();\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    set description(description) {\r\n        this._description = description;\r\n        this.update();\r\n    }\r\n    get step() {\r\n        return this._steps;\r\n    }\r\n    set step(step) {\r\n        this._steps = step;\r\n        this.update();\r\n    }\r\n    get totalSteps() {\r\n        return this._totalSteps;\r\n    }\r\n    set totalSteps(totalSteps) {\r\n        this._totalSteps = totalSteps;\r\n        this.update();\r\n    }\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n    set enabled(enabled) {\r\n        this._enabled = enabled;\r\n        this.update();\r\n    }\r\n    get contextKey() {\r\n        return this._contextKey;\r\n    }\r\n    set contextKey(contextKey) {\r\n        this._contextKey = contextKey;\r\n        this.update();\r\n    }\r\n    get busy() {\r\n        return this._busy;\r\n    }\r\n    set busy(busy) {\r\n        this._busy = busy;\r\n        this.update();\r\n    }\r\n    get ignoreFocusOut() {\r\n        return this._ignoreFocusOut;\r\n    }\r\n    set ignoreFocusOut(ignoreFocusOut) {\r\n        const shouldUpdate = this._ignoreFocusOut !== ignoreFocusOut && !isIOS;\r\n        this._ignoreFocusOut = ignoreFocusOut && !isIOS;\r\n        if (shouldUpdate) {\r\n            this.update();\r\n        }\r\n    }\r\n    get buttons() {\r\n        return this._buttons;\r\n    }\r\n    set buttons(buttons) {\r\n        this._buttons = buttons;\r\n        this.buttonsUpdated = true;\r\n        this.update();\r\n    }\r\n    get toggles() {\r\n        return this._toggles;\r\n    }\r\n    set toggles(toggles) {\r\n        this._toggles = toggles !== null && toggles !== void 0 ? toggles : [];\r\n        this.togglesUpdated = true;\r\n        this.update();\r\n    }\r\n    get validationMessage() {\r\n        return this._validationMessage;\r\n    }\r\n    set validationMessage(validationMessage) {\r\n        this._validationMessage = validationMessage;\r\n        this.update();\r\n    }\r\n    get severity() {\r\n        return this._severity;\r\n    }\r\n    set severity(severity) {\r\n        this._severity = severity;\r\n        this.update();\r\n    }\r\n    show() {\r\n        if (this.visible) {\r\n            return;\r\n        }\r\n        this.visibleDisposables.add(this.ui.onDidTriggerButton(button => {\r\n            if (this.buttons.indexOf(button) !== -1) {\r\n                this.onDidTriggerButtonEmitter.fire(button);\r\n            }\r\n        }));\r\n        this.ui.show(this);\r\n        // update properties in the controller that get reset in the ui.show() call\r\n        this.visible = true;\r\n        // This ensures the message/prompt gets rendered\r\n        this._lastValidationMessage = undefined;\r\n        // This ensures the input box has the right severity applied\r\n        this._lastSeverity = undefined;\r\n        if (this.buttons.length) {\r\n            // if there are buttons, the ui.show() clears them out of the UI so we should\r\n            // rerender them.\r\n            this.buttonsUpdated = true;\r\n        }\r\n        if (this.toggles.length) {\r\n            // if there are toggles, the ui.show() clears them out of the UI so we should\r\n            // rerender them.\r\n            this.togglesUpdated = true;\r\n        }\r\n        this.update();\r\n    }\r\n    hide() {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        this.ui.hide();\r\n    }\r\n    didHide(reason = QuickInputHideReason.Other) {\r\n        this.visible = false;\r\n        this.visibleDisposables.clear();\r\n        this.onDidHideEmitter.fire({ reason });\r\n    }\r\n    update() {\r\n        var _a, _b;\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        const title = this.getTitle();\r\n        if (title && this.ui.title.textContent !== title) {\r\n            this.ui.title.textContent = title;\r\n        }\r\n        else if (!title && this.ui.title.innerHTML !== '&nbsp;') {\r\n            this.ui.title.innerText = '\\u00a0';\r\n        }\r\n        const description = this.getDescription();\r\n        if (this.ui.description1.textContent !== description) {\r\n            this.ui.description1.textContent = description;\r\n        }\r\n        if (this.ui.description2.textContent !== description) {\r\n            this.ui.description2.textContent = description;\r\n        }\r\n        if (this._widgetUpdated) {\r\n            this._widgetUpdated = false;\r\n            if (this._widget) {\r\n                dom.reset(this.ui.widget, this._widget);\r\n            }\r\n            else {\r\n                dom.reset(this.ui.widget);\r\n            }\r\n        }\r\n        if (this.busy && !this.busyDelay) {\r\n            this.busyDelay = new TimeoutTimer();\r\n            this.busyDelay.setIfNotSet(() => {\r\n                if (this.visible) {\r\n                    this.ui.progressBar.infinite();\r\n                }\r\n            }, 800);\r\n        }\r\n        if (!this.busy && this.busyDelay) {\r\n            this.ui.progressBar.stop();\r\n            this.busyDelay.cancel();\r\n            this.busyDelay = undefined;\r\n        }\r\n        if (this.buttonsUpdated) {\r\n            this.buttonsUpdated = false;\r\n            this.ui.leftActionBar.clear();\r\n            const leftButtons = this.buttons.filter(button => button === backButton);\r\n            this.ui.leftActionBar.push(leftButtons.map((button, index) => {\r\n                const action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath), true, async () => {\r\n                    this.onDidTriggerButtonEmitter.fire(button);\r\n                });\r\n                action.tooltip = button.tooltip || '';\r\n                return action;\r\n            }), { icon: true, label: false });\r\n            this.ui.rightActionBar.clear();\r\n            const rightButtons = this.buttons.filter(button => button !== backButton);\r\n            this.ui.rightActionBar.push(rightButtons.map((button, index) => {\r\n                const action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath), true, async () => {\r\n                    this.onDidTriggerButtonEmitter.fire(button);\r\n                });\r\n                action.tooltip = button.tooltip || '';\r\n                return action;\r\n            }), { icon: true, label: false });\r\n        }\r\n        if (this.togglesUpdated) {\r\n            this.togglesUpdated = false;\r\n            // HACK: Filter out toggles here that are not concrete Toggle objects. This is to workaround\r\n            // a layering issue as quick input's interface is in common but Toggle is in browser and\r\n            // it requires a HTMLElement on its interface\r\n            const concreteToggles = (_b = (_a = this.toggles) === null || _a === void 0 ? void 0 : _a.filter(opts => opts instanceof Toggle)) !== null && _b !== void 0 ? _b : [];\r\n            this.ui.inputBox.toggles = concreteToggles;\r\n        }\r\n        this.ui.ignoreFocusOut = this.ignoreFocusOut;\r\n        this.ui.setEnabled(this.enabled);\r\n        this.ui.setContextKey(this.contextKey);\r\n        const validationMessage = this.validationMessage || this.noValidationMessage;\r\n        if (this._lastValidationMessage !== validationMessage) {\r\n            this._lastValidationMessage = validationMessage;\r\n            dom.reset(this.ui.message);\r\n            renderQuickInputDescription(validationMessage, this.ui.message, {\r\n                callback: (content) => {\r\n                    this.ui.linkOpenerDelegate(content);\r\n                },\r\n                disposables: this.visibleDisposables,\r\n            });\r\n        }\r\n        if (this._lastSeverity !== this.severity) {\r\n            this._lastSeverity = this.severity;\r\n            this.showMessageDecoration(this.severity);\r\n        }\r\n    }\r\n    getTitle() {\r\n        if (this.title && this.step) {\r\n            return `${this.title} (${this.getSteps()})`;\r\n        }\r\n        if (this.title) {\r\n            return this.title;\r\n        }\r\n        if (this.step) {\r\n            return this.getSteps();\r\n        }\r\n        return '';\r\n    }\r\n    getDescription() {\r\n        return this.description || '';\r\n    }\r\n    getSteps() {\r\n        if (this.step && this.totalSteps) {\r\n            return localize('quickInput.steps', \"{0}/{1}\", this.step, this.totalSteps);\r\n        }\r\n        if (this.step) {\r\n            return String(this.step);\r\n        }\r\n        return '';\r\n    }\r\n    showMessageDecoration(severity) {\r\n        this.ui.inputBox.showDecoration(severity);\r\n        if (severity !== Severity.Ignore) {\r\n            const styles = this.ui.inputBox.stylesForType(severity);\r\n            this.ui.message.style.color = styles.foreground ? `${styles.foreground}` : '';\r\n            this.ui.message.style.backgroundColor = styles.background ? `${styles.background}` : '';\r\n            this.ui.message.style.border = styles.border ? `1px solid ${styles.border}` : '';\r\n            this.ui.message.style.marginBottom = '-2px';\r\n        }\r\n        else {\r\n            this.ui.message.style.color = '';\r\n            this.ui.message.style.backgroundColor = '';\r\n            this.ui.message.style.border = '';\r\n            this.ui.message.style.marginBottom = '';\r\n        }\r\n    }\r\n    dispose() {\r\n        this.hide();\r\n        this.onDisposeEmitter.fire();\r\n        super.dispose();\r\n    }\r\n}\r\nQuickInput.noPromptMessage = localize('inputModeEntry', \"Press 'Enter' to confirm your input or 'Escape' to cancel\");\r\nexport class QuickPick extends QuickInput {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._value = '';\r\n        this.onDidChangeValueEmitter = this._register(new Emitter());\r\n        this.onWillAcceptEmitter = this._register(new Emitter());\r\n        this.onDidAcceptEmitter = this._register(new Emitter());\r\n        this.onDidCustomEmitter = this._register(new Emitter());\r\n        this._items = [];\r\n        this.itemsUpdated = false;\r\n        this._canSelectMany = false;\r\n        this._canAcceptInBackground = false;\r\n        this._matchOnDescription = false;\r\n        this._matchOnDetail = false;\r\n        this._matchOnLabel = true;\r\n        this._matchOnLabelMode = 'fuzzy';\r\n        this._sortByLabel = true;\r\n        this._autoFocusOnList = true;\r\n        this._keepScrollPosition = false;\r\n        this._itemActivation = ItemActivation.FIRST;\r\n        this._activeItems = [];\r\n        this.activeItemsUpdated = false;\r\n        this.activeItemsToConfirm = [];\r\n        this.onDidChangeActiveEmitter = this._register(new Emitter());\r\n        this._selectedItems = [];\r\n        this.selectedItemsUpdated = false;\r\n        this.selectedItemsToConfirm = [];\r\n        this.onDidChangeSelectionEmitter = this._register(new Emitter());\r\n        this.onDidTriggerItemButtonEmitter = this._register(new Emitter());\r\n        this.onDidTriggerSeparatorButtonEmitter = this._register(new Emitter());\r\n        this.valueSelectionUpdated = true;\r\n        this._ok = 'default';\r\n        this._customButton = false;\r\n        this.filterValue = (value) => value;\r\n        this.onDidChangeValue = this.onDidChangeValueEmitter.event;\r\n        this.onWillAccept = this.onWillAcceptEmitter.event;\r\n        this.onDidAccept = this.onDidAcceptEmitter.event;\r\n        this.onDidChangeActive = this.onDidChangeActiveEmitter.event;\r\n        this.onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\r\n        this.onDidTriggerItemButton = this.onDidTriggerItemButtonEmitter.event;\r\n        this.onDidTriggerSeparatorButton = this.onDidTriggerSeparatorButtonEmitter.event;\r\n    }\r\n    get quickNavigate() {\r\n        return this._quickNavigate;\r\n    }\r\n    set quickNavigate(quickNavigate) {\r\n        this._quickNavigate = quickNavigate;\r\n        this.update();\r\n    }\r\n    get value() {\r\n        return this._value;\r\n    }\r\n    set value(value) {\r\n        this.doSetValue(value);\r\n    }\r\n    doSetValue(value, skipUpdate) {\r\n        if (this._value !== value) {\r\n            this._value = value;\r\n            if (!skipUpdate) {\r\n                this.update();\r\n            }\r\n            if (this.visible) {\r\n                const didFilter = this.ui.list.filter(this.filterValue(this._value));\r\n                if (didFilter) {\r\n                    this.trySelectFirst();\r\n                }\r\n            }\r\n            this.onDidChangeValueEmitter.fire(this._value);\r\n        }\r\n    }\r\n    set ariaLabel(ariaLabel) {\r\n        this._ariaLabel = ariaLabel;\r\n        this.update();\r\n    }\r\n    get ariaLabel() {\r\n        return this._ariaLabel;\r\n    }\r\n    get placeholder() {\r\n        return this._placeholder;\r\n    }\r\n    set placeholder(placeholder) {\r\n        this._placeholder = placeholder;\r\n        this.update();\r\n    }\r\n    get items() {\r\n        return this._items;\r\n    }\r\n    get scrollTop() {\r\n        return this.ui.list.scrollTop;\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this.ui.list.scrollTop = scrollTop;\r\n    }\r\n    set items(items) {\r\n        this._items = items;\r\n        this.itemsUpdated = true;\r\n        this.update();\r\n    }\r\n    get canSelectMany() {\r\n        return this._canSelectMany;\r\n    }\r\n    set canSelectMany(canSelectMany) {\r\n        this._canSelectMany = canSelectMany;\r\n        this.update();\r\n    }\r\n    get canAcceptInBackground() {\r\n        return this._canAcceptInBackground;\r\n    }\r\n    set canAcceptInBackground(canAcceptInBackground) {\r\n        this._canAcceptInBackground = canAcceptInBackground;\r\n    }\r\n    get matchOnDescription() {\r\n        return this._matchOnDescription;\r\n    }\r\n    set matchOnDescription(matchOnDescription) {\r\n        this._matchOnDescription = matchOnDescription;\r\n        this.update();\r\n    }\r\n    get matchOnDetail() {\r\n        return this._matchOnDetail;\r\n    }\r\n    set matchOnDetail(matchOnDetail) {\r\n        this._matchOnDetail = matchOnDetail;\r\n        this.update();\r\n    }\r\n    get matchOnLabel() {\r\n        return this._matchOnLabel;\r\n    }\r\n    set matchOnLabel(matchOnLabel) {\r\n        this._matchOnLabel = matchOnLabel;\r\n        this.update();\r\n    }\r\n    get matchOnLabelMode() {\r\n        return this._matchOnLabelMode;\r\n    }\r\n    set matchOnLabelMode(matchOnLabelMode) {\r\n        this._matchOnLabelMode = matchOnLabelMode;\r\n        this.update();\r\n    }\r\n    get sortByLabel() {\r\n        return this._sortByLabel;\r\n    }\r\n    set sortByLabel(sortByLabel) {\r\n        this._sortByLabel = sortByLabel;\r\n        this.update();\r\n    }\r\n    get autoFocusOnList() {\r\n        return this._autoFocusOnList;\r\n    }\r\n    set autoFocusOnList(autoFocusOnList) {\r\n        this._autoFocusOnList = autoFocusOnList;\r\n        this.update();\r\n    }\r\n    get keepScrollPosition() {\r\n        return this._keepScrollPosition;\r\n    }\r\n    set keepScrollPosition(keepScrollPosition) {\r\n        this._keepScrollPosition = keepScrollPosition;\r\n    }\r\n    get itemActivation() {\r\n        return this._itemActivation;\r\n    }\r\n    set itemActivation(itemActivation) {\r\n        this._itemActivation = itemActivation;\r\n    }\r\n    get activeItems() {\r\n        return this._activeItems;\r\n    }\r\n    set activeItems(activeItems) {\r\n        this._activeItems = activeItems;\r\n        this.activeItemsUpdated = true;\r\n        this.update();\r\n    }\r\n    get selectedItems() {\r\n        return this._selectedItems;\r\n    }\r\n    set selectedItems(selectedItems) {\r\n        this._selectedItems = selectedItems;\r\n        this.selectedItemsUpdated = true;\r\n        this.update();\r\n    }\r\n    get keyMods() {\r\n        if (this._quickNavigate) {\r\n            // Disable keyMods when quick navigate is enabled\r\n            // because in this model the interaction is purely\r\n            // keyboard driven and Ctrl/Alt are typically\r\n            // pressed and hold during this interaction.\r\n            return NO_KEY_MODS;\r\n        }\r\n        return this.ui.keyMods;\r\n    }\r\n    set valueSelection(valueSelection) {\r\n        this._valueSelection = valueSelection;\r\n        this.valueSelectionUpdated = true;\r\n        this.update();\r\n    }\r\n    get customButton() {\r\n        return this._customButton;\r\n    }\r\n    set customButton(showCustomButton) {\r\n        this._customButton = showCustomButton;\r\n        this.update();\r\n    }\r\n    get customLabel() {\r\n        return this._customButtonLabel;\r\n    }\r\n    set customLabel(label) {\r\n        this._customButtonLabel = label;\r\n        this.update();\r\n    }\r\n    get customHover() {\r\n        return this._customButtonHover;\r\n    }\r\n    set customHover(hover) {\r\n        this._customButtonHover = hover;\r\n        this.update();\r\n    }\r\n    get ok() {\r\n        return this._ok;\r\n    }\r\n    set ok(showOkButton) {\r\n        this._ok = showOkButton;\r\n        this.update();\r\n    }\r\n    get hideInput() {\r\n        return !!this._hideInput;\r\n    }\r\n    set hideInput(hideInput) {\r\n        this._hideInput = hideInput;\r\n        this.update();\r\n    }\r\n    trySelectFirst() {\r\n        if (this.autoFocusOnList) {\r\n            if (!this.canSelectMany) {\r\n                this.ui.list.focus(QuickInputListFocus.First);\r\n            }\r\n        }\r\n    }\r\n    show() {\r\n        if (!this.visible) {\r\n            this.visibleDisposables.add(this.ui.inputBox.onDidChange(value => {\r\n                this.doSetValue(value, true /* skip update since this originates from the UI */);\r\n            }));\r\n            this.visibleDisposables.add(this.ui.inputBox.onMouseDown(event => {\r\n                if (!this.autoFocusOnList) {\r\n                    this.ui.list.clearFocus();\r\n                }\r\n            }));\r\n            this.visibleDisposables.add((this._hideInput ? this.ui.list : this.ui.inputBox).onKeyDown((event) => {\r\n                switch (event.keyCode) {\r\n                    case 18 /* KeyCode.DownArrow */:\r\n                        this.ui.list.focus(QuickInputListFocus.Next);\r\n                        if (this.canSelectMany) {\r\n                            this.ui.list.domFocus();\r\n                        }\r\n                        dom.EventHelper.stop(event, true);\r\n                        break;\r\n                    case 16 /* KeyCode.UpArrow */:\r\n                        if (this.ui.list.getFocusedElements().length) {\r\n                            this.ui.list.focus(QuickInputListFocus.Previous);\r\n                        }\r\n                        else {\r\n                            this.ui.list.focus(QuickInputListFocus.Last);\r\n                        }\r\n                        if (this.canSelectMany) {\r\n                            this.ui.list.domFocus();\r\n                        }\r\n                        dom.EventHelper.stop(event, true);\r\n                        break;\r\n                    case 12 /* KeyCode.PageDown */:\r\n                        this.ui.list.focus(QuickInputListFocus.NextPage);\r\n                        if (this.canSelectMany) {\r\n                            this.ui.list.domFocus();\r\n                        }\r\n                        dom.EventHelper.stop(event, true);\r\n                        break;\r\n                    case 11 /* KeyCode.PageUp */:\r\n                        this.ui.list.focus(QuickInputListFocus.PreviousPage);\r\n                        if (this.canSelectMany) {\r\n                            this.ui.list.domFocus();\r\n                        }\r\n                        dom.EventHelper.stop(event, true);\r\n                        break;\r\n                    case 17 /* KeyCode.RightArrow */:\r\n                        if (!this._canAcceptInBackground) {\r\n                            return; // needs to be enabled\r\n                        }\r\n                        if (!this.ui.inputBox.isSelectionAtEnd()) {\r\n                            return; // ensure input box selection at end\r\n                        }\r\n                        if (this.activeItems[0]) {\r\n                            this._selectedItems = [this.activeItems[0]];\r\n                            this.onDidChangeSelectionEmitter.fire(this.selectedItems);\r\n                            this.handleAccept(true);\r\n                        }\r\n                        break;\r\n                    case 14 /* KeyCode.Home */:\r\n                        if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\r\n                            this.ui.list.focus(QuickInputListFocus.First);\r\n                            dom.EventHelper.stop(event, true);\r\n                        }\r\n                        break;\r\n                    case 13 /* KeyCode.End */:\r\n                        if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\r\n                            this.ui.list.focus(QuickInputListFocus.Last);\r\n                            dom.EventHelper.stop(event, true);\r\n                        }\r\n                        break;\r\n                }\r\n            }));\r\n            this.visibleDisposables.add(this.ui.onDidAccept(() => {\r\n                if (this.canSelectMany) {\r\n                    // if there are no checked elements, it means that an onDidChangeSelection never fired to overwrite\r\n                    // `_selectedItems`. In that case, we should emit one with an empty array to ensure that\r\n                    // `.selectedItems` is up to date.\r\n                    if (!this.ui.list.getCheckedElements().length) {\r\n                        this._selectedItems = [];\r\n                        this.onDidChangeSelectionEmitter.fire(this.selectedItems);\r\n                    }\r\n                }\r\n                else if (this.activeItems[0]) {\r\n                    // For single-select, we set `selectedItems` to the item that was accepted.\r\n                    this._selectedItems = [this.activeItems[0]];\r\n                    this.onDidChangeSelectionEmitter.fire(this.selectedItems);\r\n                }\r\n                this.handleAccept(false);\r\n            }));\r\n            this.visibleDisposables.add(this.ui.onDidCustom(() => {\r\n                this.onDidCustomEmitter.fire();\r\n            }));\r\n            this.visibleDisposables.add(this.ui.list.onDidChangeFocus(focusedItems => {\r\n                if (this.activeItemsUpdated) {\r\n                    return; // Expect another event.\r\n                }\r\n                if (this.activeItemsToConfirm !== this._activeItems && equals(focusedItems, this._activeItems, (a, b) => a === b)) {\r\n                    return;\r\n                }\r\n                this._activeItems = focusedItems;\r\n                this.onDidChangeActiveEmitter.fire(focusedItems);\r\n            }));\r\n            this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({ items: selectedItems, event }) => {\r\n                if (this.canSelectMany) {\r\n                    if (selectedItems.length) {\r\n                        this.ui.list.setSelectedElements([]);\r\n                    }\r\n                    return;\r\n                }\r\n                if (this.selectedItemsToConfirm !== this._selectedItems && equals(selectedItems, this._selectedItems, (a, b) => a === b)) {\r\n                    return;\r\n                }\r\n                this._selectedItems = selectedItems;\r\n                this.onDidChangeSelectionEmitter.fire(selectedItems);\r\n                if (selectedItems.length) {\r\n                    this.handleAccept(dom.isMouseEvent(event) && event.button === 1 /* mouse middle click */);\r\n                }\r\n            }));\r\n            this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(checkedItems => {\r\n                if (!this.canSelectMany) {\r\n                    return;\r\n                }\r\n                if (this.selectedItemsToConfirm !== this._selectedItems && equals(checkedItems, this._selectedItems, (a, b) => a === b)) {\r\n                    return;\r\n                }\r\n                this._selectedItems = checkedItems;\r\n                this.onDidChangeSelectionEmitter.fire(checkedItems);\r\n            }));\r\n            this.visibleDisposables.add(this.ui.list.onButtonTriggered(event => this.onDidTriggerItemButtonEmitter.fire(event)));\r\n            this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(event => this.onDidTriggerSeparatorButtonEmitter.fire(event)));\r\n            this.visibleDisposables.add(this.registerQuickNavigation());\r\n            this.valueSelectionUpdated = true;\r\n        }\r\n        super.show(); // TODO: Why have show() bubble up while update() trickles down?\r\n    }\r\n    handleAccept(inBackground) {\r\n        // Figure out veto via `onWillAccept` event\r\n        let veto = false;\r\n        this.onWillAcceptEmitter.fire({ veto: () => veto = true });\r\n        // Continue with `onDidAccept` if no veto\r\n        if (!veto) {\r\n            this.onDidAcceptEmitter.fire({ inBackground });\r\n        }\r\n    }\r\n    registerQuickNavigation() {\r\n        return dom.addDisposableListener(this.ui.container, dom.EventType.KEY_UP, e => {\r\n            if (this.canSelectMany || !this._quickNavigate) {\r\n                return;\r\n            }\r\n            const keyboardEvent = new StandardKeyboardEvent(e);\r\n            const keyCode = keyboardEvent.keyCode;\r\n            // Select element when keys are pressed that signal it\r\n            const quickNavKeys = this._quickNavigate.keybindings;\r\n            const wasTriggerKeyPressed = quickNavKeys.some(k => {\r\n                const chords = k.getChords();\r\n                if (chords.length > 1) {\r\n                    return false;\r\n                }\r\n                if (chords[0].shiftKey && keyCode === 4 /* KeyCode.Shift */) {\r\n                    if (keyboardEvent.ctrlKey || keyboardEvent.altKey || keyboardEvent.metaKey) {\r\n                        return false; // this is an optimistic check for the shift key being used to navigate back in quick input\r\n                    }\r\n                    return true;\r\n                }\r\n                if (chords[0].altKey && keyCode === 6 /* KeyCode.Alt */) {\r\n                    return true;\r\n                }\r\n                if (chords[0].ctrlKey && keyCode === 5 /* KeyCode.Ctrl */) {\r\n                    return true;\r\n                }\r\n                if (chords[0].metaKey && keyCode === 57 /* KeyCode.Meta */) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (wasTriggerKeyPressed) {\r\n                if (this.activeItems[0]) {\r\n                    this._selectedItems = [this.activeItems[0]];\r\n                    this.onDidChangeSelectionEmitter.fire(this.selectedItems);\r\n                    this.handleAccept(false);\r\n                }\r\n                // Unset quick navigate after press. It is only valid once\r\n                // and should not result in any behaviour change afterwards\r\n                // if the picker remains open because there was no active item\r\n                this._quickNavigate = undefined;\r\n            }\r\n        });\r\n    }\r\n    update() {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        // store the scrollTop before it is reset\r\n        const scrollTopBefore = this.keepScrollPosition ? this.scrollTop : 0;\r\n        const hasDescription = !!this.description;\r\n        const visibilities = {\r\n            title: !!this.title || !!this.step || !!this.buttons.length,\r\n            description: hasDescription,\r\n            checkAll: this.canSelectMany && !this._hideCheckAll,\r\n            checkBox: this.canSelectMany,\r\n            inputBox: !this._hideInput,\r\n            progressBar: !this._hideInput || hasDescription,\r\n            visibleCount: true,\r\n            count: this.canSelectMany && !this._hideCountBadge,\r\n            ok: this.ok === 'default' ? this.canSelectMany : this.ok,\r\n            list: true,\r\n            message: !!this.validationMessage,\r\n            customButton: this.customButton\r\n        };\r\n        this.ui.setVisibilities(visibilities);\r\n        super.update();\r\n        if (this.ui.inputBox.value !== this.value) {\r\n            this.ui.inputBox.value = this.value;\r\n        }\r\n        if (this.valueSelectionUpdated) {\r\n            this.valueSelectionUpdated = false;\r\n            this.ui.inputBox.select(this._valueSelection && { start: this._valueSelection[0], end: this._valueSelection[1] });\r\n        }\r\n        if (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\r\n            this.ui.inputBox.placeholder = (this.placeholder || '');\r\n        }\r\n        let ariaLabel = this.ariaLabel;\r\n        // Only set aria label to the input box placeholder if we actually have an input box.\r\n        if (!ariaLabel && visibilities.inputBox) {\r\n            ariaLabel = this.placeholder || QuickPick.DEFAULT_ARIA_LABEL;\r\n            // If we have a title, include it in the aria label.\r\n            if (this.title) {\r\n                ariaLabel += ` - ${this.title}`;\r\n            }\r\n        }\r\n        if (this.ui.list.ariaLabel !== ariaLabel) {\r\n            this.ui.list.ariaLabel = ariaLabel !== null && ariaLabel !== void 0 ? ariaLabel : null;\r\n        }\r\n        this.ui.list.matchOnDescription = this.matchOnDescription;\r\n        this.ui.list.matchOnDetail = this.matchOnDetail;\r\n        this.ui.list.matchOnLabel = this.matchOnLabel;\r\n        this.ui.list.matchOnLabelMode = this.matchOnLabelMode;\r\n        this.ui.list.sortByLabel = this.sortByLabel;\r\n        if (this.itemsUpdated) {\r\n            this.itemsUpdated = false;\r\n            this.ui.list.setElements(this.items);\r\n            this.ui.list.filter(this.filterValue(this.ui.inputBox.value));\r\n            this.ui.checkAll.checked = this.ui.list.getAllVisibleChecked();\r\n            this.ui.visibleCount.setCount(this.ui.list.getVisibleCount());\r\n            this.ui.count.setCount(this.ui.list.getCheckedCount());\r\n            switch (this._itemActivation) {\r\n                case ItemActivation.NONE:\r\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\r\n                    break;\r\n                case ItemActivation.SECOND:\r\n                    this.ui.list.focus(QuickInputListFocus.Second);\r\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\r\n                    break;\r\n                case ItemActivation.LAST:\r\n                    this.ui.list.focus(QuickInputListFocus.Last);\r\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\r\n                    break;\r\n                default:\r\n                    this.trySelectFirst();\r\n                    break;\r\n            }\r\n        }\r\n        if (this.ui.container.classList.contains('show-checkboxes') !== !!this.canSelectMany) {\r\n            if (this.canSelectMany) {\r\n                this.ui.list.clearFocus();\r\n            }\r\n            else {\r\n                this.trySelectFirst();\r\n            }\r\n        }\r\n        if (this.activeItemsUpdated) {\r\n            this.activeItemsUpdated = false;\r\n            this.activeItemsToConfirm = this._activeItems;\r\n            this.ui.list.setFocusedElements(this.activeItems);\r\n            if (this.activeItemsToConfirm === this._activeItems) {\r\n                this.activeItemsToConfirm = null;\r\n            }\r\n        }\r\n        if (this.selectedItemsUpdated) {\r\n            this.selectedItemsUpdated = false;\r\n            this.selectedItemsToConfirm = this._selectedItems;\r\n            if (this.canSelectMany) {\r\n                this.ui.list.setCheckedElements(this.selectedItems);\r\n            }\r\n            else {\r\n                this.ui.list.setSelectedElements(this.selectedItems);\r\n            }\r\n            if (this.selectedItemsToConfirm === this._selectedItems) {\r\n                this.selectedItemsToConfirm = null;\r\n            }\r\n        }\r\n        this.ui.customButton.label = this.customLabel || '';\r\n        this.ui.customButton.element.title = this.customHover || '';\r\n        if (!visibilities.inputBox) {\r\n            // we need to move focus into the tree to detect keybindings\r\n            // properly when the input box is not visible (quick nav)\r\n            this.ui.list.domFocus();\r\n            // Focus the first element in the list if multiselect is enabled\r\n            if (this.canSelectMany) {\r\n                this.ui.list.focus(QuickInputListFocus.First);\r\n            }\r\n        }\r\n        // Set the scroll position to what it was before updating the items\r\n        if (this.keepScrollPosition) {\r\n            this.scrollTop = scrollTopBefore;\r\n        }\r\n    }\r\n}\r\nQuickPick.DEFAULT_ARIA_LABEL = localize('quickInputBox.ariaLabel', \"Type to narrow down results.\");\r\nexport class InputBox extends QuickInput {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._value = '';\r\n        this.valueSelectionUpdated = true;\r\n        this._password = false;\r\n        this.onDidValueChangeEmitter = this._register(new Emitter());\r\n        this.onDidAcceptEmitter = this._register(new Emitter());\r\n        this.onDidChangeValue = this.onDidValueChangeEmitter.event;\r\n        this.onDidAccept = this.onDidAcceptEmitter.event;\r\n    }\r\n    get value() {\r\n        return this._value;\r\n    }\r\n    set value(value) {\r\n        this._value = value || '';\r\n        this.update();\r\n    }\r\n    get placeholder() {\r\n        return this._placeholder;\r\n    }\r\n    set placeholder(placeholder) {\r\n        this._placeholder = placeholder;\r\n        this.update();\r\n    }\r\n    get password() {\r\n        return this._password;\r\n    }\r\n    set password(password) {\r\n        this._password = password;\r\n        this.update();\r\n    }\r\n    show() {\r\n        if (!this.visible) {\r\n            this.visibleDisposables.add(this.ui.inputBox.onDidChange(value => {\r\n                if (value === this.value) {\r\n                    return;\r\n                }\r\n                this._value = value;\r\n                this.onDidValueChangeEmitter.fire(value);\r\n            }));\r\n            this.visibleDisposables.add(this.ui.onDidAccept(() => this.onDidAcceptEmitter.fire()));\r\n            this.valueSelectionUpdated = true;\r\n        }\r\n        super.show();\r\n    }\r\n    update() {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        this.ui.container.classList.remove('hidden-input');\r\n        const visibilities = {\r\n            title: !!this.title || !!this.step || !!this.buttons.length,\r\n            description: !!this.description || !!this.step,\r\n            inputBox: true,\r\n            message: true,\r\n            progressBar: true\r\n        };\r\n        this.ui.setVisibilities(visibilities);\r\n        super.update();\r\n        if (this.ui.inputBox.value !== this.value) {\r\n            this.ui.inputBox.value = this.value;\r\n        }\r\n        if (this.valueSelectionUpdated) {\r\n            this.valueSelectionUpdated = false;\r\n            this.ui.inputBox.select(this._valueSelection && { start: this._valueSelection[0], end: this._valueSelection[1] });\r\n        }\r\n        if (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\r\n            this.ui.inputBox.placeholder = (this.placeholder || '');\r\n        }\r\n        if (this.ui.inputBox.password !== this.password) {\r\n            this.ui.inputBox.password = this.password;\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { Button } from '../../../base/browser/ui/button/button.js';\r\nimport { CountBadge } from '../../../base/browser/ui/countBadge/countBadge.js';\r\nimport { ProgressBar } from '../../../base/browser/ui/progressbar/progressbar.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { Emitter, Event } from '../../../base/common/event.js';\r\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\r\nimport Severity from '../../../base/common/severity.js';\r\nimport { localize } from '../../../nls.js';\r\nimport { QuickInputHideReason } from '../common/quickInput.js';\r\nimport { QuickInputBox } from './quickInputBox.js';\r\nimport { QuickInputList } from './quickInputList.js';\r\nimport { QuickPick, backButton, InputBox } from './quickInput.js';\r\nimport { mainWindow } from '../../../base/browser/window.js';\r\nconst $ = dom.$;\r\nexport class QuickInputController extends Disposable {\r\n    constructor(options, themeService, layoutService) {\r\n        super();\r\n        this.options = options;\r\n        this.themeService = themeService;\r\n        this.layoutService = layoutService;\r\n        this.enabled = true;\r\n        this.onDidAcceptEmitter = this._register(new Emitter());\r\n        this.onDidCustomEmitter = this._register(new Emitter());\r\n        this.onDidTriggerButtonEmitter = this._register(new Emitter());\r\n        this.keyMods = { ctrlCmd: false, alt: false };\r\n        this.controller = null;\r\n        this.onShowEmitter = this._register(new Emitter());\r\n        this.onShow = this.onShowEmitter.event;\r\n        this.onHideEmitter = this._register(new Emitter());\r\n        this.onHide = this.onHideEmitter.event;\r\n        this.idPrefix = options.idPrefix;\r\n        this.parentElement = options.container;\r\n        this.styles = options.styles;\r\n        this._register(Event.runAndSubscribe(dom.onDidRegisterWindow, ({ window, disposables }) => this.registerKeyModsListeners(window, disposables), { window: mainWindow, disposables: this._store }));\r\n        this._register(dom.onWillUnregisterWindow(window => {\r\n            if (this.ui && dom.getWindow(this.ui.container) === window) {\r\n                // The window this quick input is contained in is about to\r\n                // close, so we have to make sure to reparent it back to an\r\n                // existing parent to not loose functionality.\r\n                // (https://github.com/microsoft/vscode/issues/195870)\r\n                this.reparentUI(this.layoutService.mainContainer);\r\n            }\r\n        }));\r\n    }\r\n    registerKeyModsListeners(window, disposables) {\r\n        const listener = (e) => {\r\n            this.keyMods.ctrlCmd = e.ctrlKey || e.metaKey;\r\n            this.keyMods.alt = e.altKey;\r\n        };\r\n        for (const event of [dom.EventType.KEY_DOWN, dom.EventType.KEY_UP, dom.EventType.MOUSE_DOWN]) {\r\n            disposables.add(dom.addDisposableListener(window, event, listener, true));\r\n        }\r\n    }\r\n    getUI(showInActiveContainer) {\r\n        if (this.ui) {\r\n            // In order to support aux windows, re-parent the controller\r\n            // if the original event is from a different document\r\n            if (showInActiveContainer) {\r\n                if (this.parentElement.ownerDocument !== this.layoutService.activeContainer.ownerDocument) {\r\n                    this.reparentUI(this.layoutService.activeContainer);\r\n                }\r\n            }\r\n            return this.ui;\r\n        }\r\n        const container = dom.append(this.parentElement, $('.quick-input-widget.show-file-icons'));\r\n        container.tabIndex = -1;\r\n        container.style.display = 'none';\r\n        const styleSheet = dom.createStyleSheet(container);\r\n        const titleBar = dom.append(container, $('.quick-input-titlebar'));\r\n        const actionBarOption = this.options.hoverDelegate ? { hoverDelegate: this.options.hoverDelegate } : undefined;\r\n        const leftActionBar = this._register(new ActionBar(titleBar, actionBarOption));\r\n        leftActionBar.domNode.classList.add('quick-input-left-action-bar');\r\n        const title = dom.append(titleBar, $('.quick-input-title'));\r\n        const rightActionBar = this._register(new ActionBar(titleBar, actionBarOption));\r\n        rightActionBar.domNode.classList.add('quick-input-right-action-bar');\r\n        const headerContainer = dom.append(container, $('.quick-input-header'));\r\n        const checkAll = dom.append(headerContainer, $('input.quick-input-check-all'));\r\n        checkAll.type = 'checkbox';\r\n        checkAll.setAttribute('aria-label', localize('quickInput.checkAll', \"Toggle all checkboxes\"));\r\n        this._register(dom.addStandardDisposableListener(checkAll, dom.EventType.CHANGE, e => {\r\n            const checked = checkAll.checked;\r\n            list.setAllVisibleChecked(checked);\r\n        }));\r\n        this._register(dom.addDisposableListener(checkAll, dom.EventType.CLICK, e => {\r\n            if (e.x || e.y) { // Avoid 'click' triggered by 'space'...\r\n                inputBox.setFocus();\r\n            }\r\n        }));\r\n        const description2 = dom.append(headerContainer, $('.quick-input-description'));\r\n        const inputContainer = dom.append(headerContainer, $('.quick-input-and-message'));\r\n        const filterContainer = dom.append(inputContainer, $('.quick-input-filter'));\r\n        const inputBox = this._register(new QuickInputBox(filterContainer, this.styles.inputBox, this.styles.toggle));\r\n        inputBox.setAttribute('aria-describedby', `${this.idPrefix}message`);\r\n        const visibleCountContainer = dom.append(filterContainer, $('.quick-input-visible-count'));\r\n        visibleCountContainer.setAttribute('aria-live', 'polite');\r\n        visibleCountContainer.setAttribute('aria-atomic', 'true');\r\n        const visibleCount = new CountBadge(visibleCountContainer, { countFormat: localize({ key: 'quickInput.visibleCount', comment: ['This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers.'] }, \"{0} Results\") }, this.styles.countBadge);\r\n        const countContainer = dom.append(filterContainer, $('.quick-input-count'));\r\n        countContainer.setAttribute('aria-live', 'polite');\r\n        const count = new CountBadge(countContainer, { countFormat: localize({ key: 'quickInput.countSelected', comment: ['This tells the user how many items are selected in a list of items to select from. The items can be anything.'] }, \"{0} Selected\") }, this.styles.countBadge);\r\n        const okContainer = dom.append(headerContainer, $('.quick-input-action'));\r\n        const ok = this._register(new Button(okContainer, this.styles.button));\r\n        ok.label = localize('ok', \"OK\");\r\n        this._register(ok.onDidClick(e => {\r\n            this.onDidAcceptEmitter.fire();\r\n        }));\r\n        const customButtonContainer = dom.append(headerContainer, $('.quick-input-action'));\r\n        const customButton = this._register(new Button(customButtonContainer, this.styles.button));\r\n        customButton.label = localize('custom', \"Custom\");\r\n        this._register(customButton.onDidClick(e => {\r\n            this.onDidCustomEmitter.fire();\r\n        }));\r\n        const message = dom.append(inputContainer, $(`#${this.idPrefix}message.quick-input-message`));\r\n        const progressBar = this._register(new ProgressBar(container, this.styles.progressBar));\r\n        progressBar.getContainer().classList.add('quick-input-progress');\r\n        const widget = dom.append(container, $('.quick-input-html-widget'));\r\n        widget.tabIndex = -1;\r\n        const description1 = dom.append(container, $('.quick-input-description'));\r\n        const listId = this.idPrefix + 'list';\r\n        const list = this._register(new QuickInputList(container, listId, this.options, this.themeService));\r\n        inputBox.setAttribute('aria-controls', listId);\r\n        this._register(list.onDidChangeFocus(() => {\r\n            var _a;\r\n            inputBox.setAttribute('aria-activedescendant', (_a = list.getActiveDescendant()) !== null && _a !== void 0 ? _a : '');\r\n        }));\r\n        this._register(list.onChangedAllVisibleChecked(checked => {\r\n            checkAll.checked = checked;\r\n        }));\r\n        this._register(list.onChangedVisibleCount(c => {\r\n            visibleCount.setCount(c);\r\n        }));\r\n        this._register(list.onChangedCheckedCount(c => {\r\n            count.setCount(c);\r\n        }));\r\n        this._register(list.onLeave(() => {\r\n            // Defer to avoid the input field reacting to the triggering key.\r\n            setTimeout(() => {\r\n                inputBox.setFocus();\r\n                if (this.controller instanceof QuickPick && this.controller.canSelectMany) {\r\n                    list.clearFocus();\r\n                }\r\n            }, 0);\r\n        }));\r\n        const focusTracker = dom.trackFocus(container);\r\n        this._register(focusTracker);\r\n        this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, e => {\r\n            // Ignore focus events within container\r\n            if (dom.isAncestor(e.relatedTarget, container)) {\r\n                return;\r\n            }\r\n            this.previousFocusElement = e.relatedTarget instanceof HTMLElement ? e.relatedTarget : undefined;\r\n        }, true));\r\n        this._register(focusTracker.onDidBlur(() => {\r\n            if (!this.getUI().ignoreFocusOut && !this.options.ignoreFocusOut()) {\r\n                this.hide(QuickInputHideReason.Blur);\r\n            }\r\n            this.previousFocusElement = undefined;\r\n        }));\r\n        this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, (e) => {\r\n            inputBox.setFocus();\r\n        }));\r\n        // TODO: Turn into commands instead of handling KEY_DOWN\r\n        this._register(dom.addStandardDisposableListener(container, dom.EventType.KEY_DOWN, (event) => {\r\n            if (dom.isAncestor(event.target, widget)) {\r\n                return; // Ignore event if target is inside widget to allow the widget to handle the event.\r\n            }\r\n            switch (event.keyCode) {\r\n                case 3 /* KeyCode.Enter */:\r\n                    dom.EventHelper.stop(event, true);\r\n                    if (this.enabled) {\r\n                        this.onDidAcceptEmitter.fire();\r\n                    }\r\n                    break;\r\n                case 9 /* KeyCode.Escape */:\r\n                    dom.EventHelper.stop(event, true);\r\n                    this.hide(QuickInputHideReason.Gesture);\r\n                    break;\r\n                case 2 /* KeyCode.Tab */:\r\n                    if (!event.altKey && !event.ctrlKey && !event.metaKey) {\r\n                        // detect only visible actions\r\n                        const selectors = [\r\n                            '.quick-input-list .monaco-action-bar .always-visible',\r\n                            '.quick-input-list-entry:hover .monaco-action-bar',\r\n                            '.monaco-list-row.focused .monaco-action-bar'\r\n                        ];\r\n                        if (container.classList.contains('show-checkboxes')) {\r\n                            selectors.push('input');\r\n                        }\r\n                        else {\r\n                            selectors.push('input[type=text]');\r\n                        }\r\n                        if (this.getUI().list.isDisplayed()) {\r\n                            selectors.push('.monaco-list');\r\n                        }\r\n                        // focus links if there are any\r\n                        if (this.getUI().message) {\r\n                            selectors.push('.quick-input-message a');\r\n                        }\r\n                        if (this.getUI().widget) {\r\n                            if (dom.isAncestor(event.target, this.getUI().widget)) {\r\n                                // let the widget control tab\r\n                                break;\r\n                            }\r\n                            selectors.push('.quick-input-html-widget');\r\n                        }\r\n                        const stops = container.querySelectorAll(selectors.join(', '));\r\n                        if (event.shiftKey && event.target === stops[0]) {\r\n                            // Clear the focus from the list in order to allow\r\n                            // screen readers to read operations in the input box.\r\n                            dom.EventHelper.stop(event, true);\r\n                            list.clearFocus();\r\n                        }\r\n                        else if (!event.shiftKey && dom.isAncestor(event.target, stops[stops.length - 1])) {\r\n                            dom.EventHelper.stop(event, true);\r\n                            stops[0].focus();\r\n                        }\r\n                    }\r\n                    break;\r\n                case 10 /* KeyCode.Space */:\r\n                    if (event.ctrlKey) {\r\n                        dom.EventHelper.stop(event, true);\r\n                        this.getUI().list.toggleHover();\r\n                    }\r\n                    break;\r\n            }\r\n        }));\r\n        this.ui = {\r\n            container,\r\n            styleSheet,\r\n            leftActionBar,\r\n            titleBar,\r\n            title,\r\n            description1,\r\n            description2,\r\n            widget,\r\n            rightActionBar,\r\n            checkAll,\r\n            inputContainer,\r\n            filterContainer,\r\n            inputBox,\r\n            visibleCountContainer,\r\n            visibleCount,\r\n            countContainer,\r\n            count,\r\n            okContainer,\r\n            ok,\r\n            message,\r\n            customButtonContainer,\r\n            customButton,\r\n            list,\r\n            progressBar,\r\n            onDidAccept: this.onDidAcceptEmitter.event,\r\n            onDidCustom: this.onDidCustomEmitter.event,\r\n            onDidTriggerButton: this.onDidTriggerButtonEmitter.event,\r\n            ignoreFocusOut: false,\r\n            keyMods: this.keyMods,\r\n            show: controller => this.show(controller),\r\n            hide: () => this.hide(),\r\n            setVisibilities: visibilities => this.setVisibilities(visibilities),\r\n            setEnabled: enabled => this.setEnabled(enabled),\r\n            setContextKey: contextKey => this.options.setContextKey(contextKey),\r\n            linkOpenerDelegate: content => this.options.linkOpenerDelegate(content)\r\n        };\r\n        this.updateStyles();\r\n        return this.ui;\r\n    }\r\n    reparentUI(container) {\r\n        if (this.ui) {\r\n            this.parentElement = container;\r\n            dom.append(this.parentElement, this.ui.container);\r\n        }\r\n    }\r\n    pick(picks, options = {}, token = CancellationToken.None) {\r\n        return new Promise((doResolve, reject) => {\r\n            let resolve = (result) => {\r\n                var _a;\r\n                resolve = doResolve;\r\n                (_a = options.onKeyMods) === null || _a === void 0 ? void 0 : _a.call(options, input.keyMods);\r\n                doResolve(result);\r\n            };\r\n            if (token.isCancellationRequested) {\r\n                resolve(undefined);\r\n                return;\r\n            }\r\n            const input = this.createQuickPick();\r\n            let activeItem;\r\n            const disposables = [\r\n                input,\r\n                input.onDidAccept(() => {\r\n                    if (input.canSelectMany) {\r\n                        resolve(input.selectedItems.slice());\r\n                        input.hide();\r\n                    }\r\n                    else {\r\n                        const result = input.activeItems[0];\r\n                        if (result) {\r\n                            resolve(result);\r\n                            input.hide();\r\n                        }\r\n                    }\r\n                }),\r\n                input.onDidChangeActive(items => {\r\n                    const focused = items[0];\r\n                    if (focused && options.onDidFocus) {\r\n                        options.onDidFocus(focused);\r\n                    }\r\n                }),\r\n                input.onDidChangeSelection(items => {\r\n                    if (!input.canSelectMany) {\r\n                        const result = items[0];\r\n                        if (result) {\r\n                            resolve(result);\r\n                            input.hide();\r\n                        }\r\n                    }\r\n                }),\r\n                input.onDidTriggerItemButton(event => options.onDidTriggerItemButton && options.onDidTriggerItemButton({\r\n                    ...event,\r\n                    removeItem: () => {\r\n                        const index = input.items.indexOf(event.item);\r\n                        if (index !== -1) {\r\n                            const items = input.items.slice();\r\n                            const removed = items.splice(index, 1);\r\n                            const activeItems = input.activeItems.filter(activeItem => activeItem !== removed[0]);\r\n                            const keepScrollPositionBefore = input.keepScrollPosition;\r\n                            input.keepScrollPosition = true;\r\n                            input.items = items;\r\n                            if (activeItems) {\r\n                                input.activeItems = activeItems;\r\n                            }\r\n                            input.keepScrollPosition = keepScrollPositionBefore;\r\n                        }\r\n                    }\r\n                })),\r\n                input.onDidTriggerSeparatorButton(event => { var _a; return (_a = options.onDidTriggerSeparatorButton) === null || _a === void 0 ? void 0 : _a.call(options, event); }),\r\n                input.onDidChangeValue(value => {\r\n                    if (activeItem && !value && (input.activeItems.length !== 1 || input.activeItems[0] !== activeItem)) {\r\n                        input.activeItems = [activeItem];\r\n                    }\r\n                }),\r\n                token.onCancellationRequested(() => {\r\n                    input.hide();\r\n                }),\r\n                input.onDidHide(() => {\r\n                    dispose(disposables);\r\n                    resolve(undefined);\r\n                }),\r\n            ];\r\n            input.title = options.title;\r\n            input.canSelectMany = !!options.canPickMany;\r\n            input.placeholder = options.placeHolder;\r\n            input.ignoreFocusOut = !!options.ignoreFocusLost;\r\n            input.matchOnDescription = !!options.matchOnDescription;\r\n            input.matchOnDetail = !!options.matchOnDetail;\r\n            input.matchOnLabel = (options.matchOnLabel === undefined) || options.matchOnLabel; // default to true\r\n            input.autoFocusOnList = (options.autoFocusOnList === undefined) || options.autoFocusOnList; // default to true\r\n            input.quickNavigate = options.quickNavigate;\r\n            input.hideInput = !!options.hideInput;\r\n            input.contextKey = options.contextKey;\r\n            input.busy = true;\r\n            Promise.all([picks, options.activeItem])\r\n                .then(([items, _activeItem]) => {\r\n                activeItem = _activeItem;\r\n                input.busy = false;\r\n                input.items = items;\r\n                if (input.canSelectMany) {\r\n                    input.selectedItems = items.filter(item => item.type !== 'separator' && item.picked);\r\n                }\r\n                if (activeItem) {\r\n                    input.activeItems = [activeItem];\r\n                }\r\n            });\r\n            input.show();\r\n            Promise.resolve(picks).then(undefined, err => {\r\n                reject(err);\r\n                input.hide();\r\n            });\r\n        });\r\n    }\r\n    createQuickPick() {\r\n        const ui = this.getUI(true);\r\n        return new QuickPick(ui);\r\n    }\r\n    createInputBox() {\r\n        const ui = this.getUI(true);\r\n        return new InputBox(ui);\r\n    }\r\n    show(controller) {\r\n        const ui = this.getUI(true);\r\n        this.onShowEmitter.fire();\r\n        const oldController = this.controller;\r\n        this.controller = controller;\r\n        oldController === null || oldController === void 0 ? void 0 : oldController.didHide();\r\n        this.setEnabled(true);\r\n        ui.leftActionBar.clear();\r\n        ui.title.textContent = '';\r\n        ui.description1.textContent = '';\r\n        ui.description2.textContent = '';\r\n        dom.reset(ui.widget);\r\n        ui.rightActionBar.clear();\r\n        ui.checkAll.checked = false;\r\n        // ui.inputBox.value = ''; Avoid triggering an event.\r\n        ui.inputBox.placeholder = '';\r\n        ui.inputBox.password = false;\r\n        ui.inputBox.showDecoration(Severity.Ignore);\r\n        ui.visibleCount.setCount(0);\r\n        ui.count.setCount(0);\r\n        dom.reset(ui.message);\r\n        ui.progressBar.stop();\r\n        ui.list.setElements([]);\r\n        ui.list.matchOnDescription = false;\r\n        ui.list.matchOnDetail = false;\r\n        ui.list.matchOnLabel = true;\r\n        ui.list.sortByLabel = true;\r\n        ui.ignoreFocusOut = false;\r\n        ui.inputBox.toggles = undefined;\r\n        const backKeybindingLabel = this.options.backKeybindingLabel();\r\n        backButton.tooltip = backKeybindingLabel ? localize('quickInput.backWithKeybinding', \"Back ({0})\", backKeybindingLabel) : localize('quickInput.back', \"Back\");\r\n        ui.container.style.display = '';\r\n        this.updateLayout();\r\n        ui.inputBox.setFocus();\r\n    }\r\n    isVisible() {\r\n        return !!this.ui && this.ui.container.style.display !== 'none';\r\n    }\r\n    setVisibilities(visibilities) {\r\n        const ui = this.getUI();\r\n        ui.title.style.display = visibilities.title ? '' : 'none';\r\n        ui.description1.style.display = visibilities.description && (visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\r\n        ui.description2.style.display = visibilities.description && !(visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\r\n        ui.checkAll.style.display = visibilities.checkAll ? '' : 'none';\r\n        ui.inputContainer.style.display = visibilities.inputBox ? '' : 'none';\r\n        ui.filterContainer.style.display = visibilities.inputBox ? '' : 'none';\r\n        ui.visibleCountContainer.style.display = visibilities.visibleCount ? '' : 'none';\r\n        ui.countContainer.style.display = visibilities.count ? '' : 'none';\r\n        ui.okContainer.style.display = visibilities.ok ? '' : 'none';\r\n        ui.customButtonContainer.style.display = visibilities.customButton ? '' : 'none';\r\n        ui.message.style.display = visibilities.message ? '' : 'none';\r\n        ui.progressBar.getContainer().style.display = visibilities.progressBar ? '' : 'none';\r\n        ui.list.display(!!visibilities.list);\r\n        ui.container.classList.toggle('show-checkboxes', !!visibilities.checkBox);\r\n        ui.container.classList.toggle('hidden-input', !visibilities.inputBox && !visibilities.description);\r\n        this.updateLayout(); // TODO\r\n    }\r\n    setEnabled(enabled) {\r\n        if (enabled !== this.enabled) {\r\n            this.enabled = enabled;\r\n            for (const item of this.getUI().leftActionBar.viewItems) {\r\n                item.action.enabled = enabled;\r\n            }\r\n            for (const item of this.getUI().rightActionBar.viewItems) {\r\n                item.action.enabled = enabled;\r\n            }\r\n            this.getUI().checkAll.disabled = !enabled;\r\n            this.getUI().inputBox.enabled = enabled;\r\n            this.getUI().ok.enabled = enabled;\r\n            this.getUI().list.enabled = enabled;\r\n        }\r\n    }\r\n    hide(reason) {\r\n        var _a, _b;\r\n        const controller = this.controller;\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        const container = (_a = this.ui) === null || _a === void 0 ? void 0 : _a.container;\r\n        const focusChanged = container && !dom.isAncestorOfActiveElement(container);\r\n        this.controller = null;\r\n        this.onHideEmitter.fire();\r\n        if (container) {\r\n            container.style.display = 'none';\r\n        }\r\n        if (!focusChanged) {\r\n            let currentElement = this.previousFocusElement;\r\n            while (currentElement && !currentElement.offsetParent) {\r\n                currentElement = (_b = currentElement.parentElement) !== null && _b !== void 0 ? _b : undefined;\r\n            }\r\n            if (currentElement === null || currentElement === void 0 ? void 0 : currentElement.offsetParent) {\r\n                currentElement.focus();\r\n                this.previousFocusElement = undefined;\r\n            }\r\n            else {\r\n                this.options.returnFocus();\r\n            }\r\n        }\r\n        controller.didHide(reason);\r\n    }\r\n    layout(dimension, titleBarOffset) {\r\n        this.dimension = dimension;\r\n        this.titleBarOffset = titleBarOffset;\r\n        this.updateLayout();\r\n    }\r\n    updateLayout() {\r\n        if (this.ui && this.isVisible()) {\r\n            this.ui.container.style.top = `${this.titleBarOffset}px`;\r\n            const style = this.ui.container.style;\r\n            const width = Math.min(this.dimension.width * 0.62 /* golden cut */, QuickInputController.MAX_WIDTH);\r\n            style.width = width + 'px';\r\n            style.marginLeft = '-' + (width / 2) + 'px';\r\n            this.ui.inputBox.layout();\r\n            this.ui.list.layout(this.dimension && this.dimension.height * 0.4);\r\n        }\r\n    }\r\n    applyStyles(styles) {\r\n        this.styles = styles;\r\n        this.updateStyles();\r\n    }\r\n    updateStyles() {\r\n        if (this.ui) {\r\n            const { quickInputTitleBackground, quickInputBackground, quickInputForeground, widgetBorder, widgetShadow, } = this.styles.widget;\r\n            this.ui.titleBar.style.backgroundColor = quickInputTitleBackground !== null && quickInputTitleBackground !== void 0 ? quickInputTitleBackground : '';\r\n            this.ui.container.style.backgroundColor = quickInputBackground !== null && quickInputBackground !== void 0 ? quickInputBackground : '';\r\n            this.ui.container.style.color = quickInputForeground !== null && quickInputForeground !== void 0 ? quickInputForeground : '';\r\n            this.ui.container.style.border = widgetBorder ? `1px solid ${widgetBorder}` : '';\r\n            this.ui.container.style.boxShadow = widgetShadow ? `0 0 8px 2px ${widgetShadow}` : '';\r\n            this.ui.list.style(this.styles.list);\r\n            const content = [];\r\n            if (this.styles.pickerGroup.pickerGroupBorder) {\r\n                content.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`);\r\n            }\r\n            if (this.styles.pickerGroup.pickerGroupForeground) {\r\n                content.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`);\r\n            }\r\n            if (this.styles.pickerGroup.pickerGroupForeground) {\r\n                content.push(`.quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }`);\r\n            }\r\n            if (this.styles.keybindingLabel.keybindingLabelBackground ||\r\n                this.styles.keybindingLabel.keybindingLabelBorder ||\r\n                this.styles.keybindingLabel.keybindingLabelBottomBorder ||\r\n                this.styles.keybindingLabel.keybindingLabelShadow ||\r\n                this.styles.keybindingLabel.keybindingLabelForeground) {\r\n                content.push('.quick-input-list .monaco-keybinding > .monaco-keybinding-key {');\r\n                if (this.styles.keybindingLabel.keybindingLabelBackground) {\r\n                    content.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`);\r\n                }\r\n                if (this.styles.keybindingLabel.keybindingLabelBorder) {\r\n                    // Order matters here. `border-color` must come before `border-bottom-color`.\r\n                    content.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`);\r\n                }\r\n                if (this.styles.keybindingLabel.keybindingLabelBottomBorder) {\r\n                    content.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`);\r\n                }\r\n                if (this.styles.keybindingLabel.keybindingLabelShadow) {\r\n                    content.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`);\r\n                }\r\n                if (this.styles.keybindingLabel.keybindingLabelForeground) {\r\n                    content.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`);\r\n                }\r\n                content.push('}');\r\n            }\r\n            const newStyles = content.join('\\n');\r\n            if (newStyles !== this.ui.styleSheet.textContent) {\r\n                this.ui.styleSheet.textContent = newStyles;\r\n            }\r\n        }\r\n    }\r\n}\r\nQuickInputController.MAX_WIDTH = 600; // Max total width of quick input widget\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\r\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\r\nimport { WorkbenchList } from '../../list/browser/listService.js';\r\nimport { IOpenerService } from '../../opener/common/opener.js';\r\nimport { QuickAccessController } from './quickAccess.js';\r\nimport { defaultButtonStyles, defaultCountBadgeStyles, defaultInputBoxStyles, defaultKeybindingLabelStyles, defaultProgressBarStyles, defaultToggleStyles, getListStyles } from '../../theme/browser/defaultStyles.js';\r\nimport { activeContrastBorder, asCssVariable, pickerGroupBorder, pickerGroupForeground, quickInputBackground, quickInputForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, quickInputTitleBackground, widgetBorder, widgetShadow } from '../../theme/common/colorRegistry.js';\r\nimport { IThemeService, Themable } from '../../theme/common/themeService.js';\r\nimport { QuickInputController } from './quickInputController.js';\r\nlet QuickInputService = class QuickInputService extends Themable {\r\n    get controller() {\r\n        if (!this._controller) {\r\n            this._controller = this._register(this.createController());\r\n        }\r\n        return this._controller;\r\n    }\r\n    get hasController() { return !!this._controller; }\r\n    get quickAccess() {\r\n        if (!this._quickAccess) {\r\n            this._quickAccess = this._register(this.instantiationService.createInstance(QuickAccessController));\r\n        }\r\n        return this._quickAccess;\r\n    }\r\n    constructor(instantiationService, contextKeyService, themeService, layoutService) {\r\n        super(themeService);\r\n        this.instantiationService = instantiationService;\r\n        this.contextKeyService = contextKeyService;\r\n        this.layoutService = layoutService;\r\n        this._onShow = this._register(new Emitter());\r\n        this._onHide = this._register(new Emitter());\r\n        this.contexts = new Map();\r\n    }\r\n    createController(host = this.layoutService, options) {\r\n        const defaultOptions = {\r\n            idPrefix: 'quickInput_',\r\n            container: host.activeContainer,\r\n            ignoreFocusOut: () => false,\r\n            backKeybindingLabel: () => undefined,\r\n            setContextKey: (id) => this.setContextKey(id),\r\n            linkOpenerDelegate: (content) => {\r\n                // HACK: https://github.com/microsoft/vscode/issues/173691\r\n                this.instantiationService.invokeFunction(accessor => {\r\n                    const openerService = accessor.get(IOpenerService);\r\n                    openerService.open(content, { allowCommands: true, fromUserGesture: true });\r\n                });\r\n            },\r\n            returnFocus: () => host.focus(),\r\n            createList: (user, container, delegate, renderers, options) => this.instantiationService.createInstance(WorkbenchList, user, container, delegate, renderers, options),\r\n            styles: this.computeStyles()\r\n        };\r\n        const controller = this._register(new QuickInputController({\r\n            ...defaultOptions,\r\n            ...options\r\n        }, this.themeService, this.layoutService));\r\n        controller.layout(host.activeContainerDimension, host.activeContainerOffset.quickPickTop);\r\n        // Layout changes\r\n        this._register(host.onDidLayoutActiveContainer(dimension => controller.layout(dimension, host.activeContainerOffset.quickPickTop)));\r\n        this._register(host.onDidChangeActiveContainer(() => {\r\n            if (controller.isVisible()) {\r\n                return;\r\n            }\r\n            controller.layout(host.activeContainerDimension, host.activeContainerOffset.quickPickTop);\r\n        }));\r\n        // Context keys\r\n        this._register(controller.onShow(() => {\r\n            this.resetContextKeys();\r\n            this._onShow.fire();\r\n        }));\r\n        this._register(controller.onHide(() => {\r\n            this.resetContextKeys();\r\n            this._onHide.fire();\r\n        }));\r\n        return controller;\r\n    }\r\n    setContextKey(id) {\r\n        let key;\r\n        if (id) {\r\n            key = this.contexts.get(id);\r\n            if (!key) {\r\n                key = new RawContextKey(id, false)\r\n                    .bindTo(this.contextKeyService);\r\n                this.contexts.set(id, key);\r\n            }\r\n        }\r\n        if (key && key.get()) {\r\n            return; // already active context\r\n        }\r\n        this.resetContextKeys();\r\n        key === null || key === void 0 ? void 0 : key.set(true);\r\n    }\r\n    resetContextKeys() {\r\n        this.contexts.forEach(context => {\r\n            if (context.get()) {\r\n                context.reset();\r\n            }\r\n        });\r\n    }\r\n    pick(picks, options = {}, token = CancellationToken.None) {\r\n        return this.controller.pick(picks, options, token);\r\n    }\r\n    createQuickPick() {\r\n        return this.controller.createQuickPick();\r\n    }\r\n    createInputBox() {\r\n        return this.controller.createInputBox();\r\n    }\r\n    updateStyles() {\r\n        if (this.hasController) {\r\n            this.controller.applyStyles(this.computeStyles());\r\n        }\r\n    }\r\n    computeStyles() {\r\n        return {\r\n            widget: {\r\n                quickInputBackground: asCssVariable(quickInputBackground),\r\n                quickInputForeground: asCssVariable(quickInputForeground),\r\n                quickInputTitleBackground: asCssVariable(quickInputTitleBackground),\r\n                widgetBorder: asCssVariable(widgetBorder),\r\n                widgetShadow: asCssVariable(widgetShadow),\r\n            },\r\n            inputBox: defaultInputBoxStyles,\r\n            toggle: defaultToggleStyles,\r\n            countBadge: defaultCountBadgeStyles,\r\n            button: defaultButtonStyles,\r\n            progressBar: defaultProgressBarStyles,\r\n            keybindingLabel: defaultKeybindingLabelStyles,\r\n            list: getListStyles({\r\n                listBackground: quickInputBackground,\r\n                listFocusBackground: quickInputListFocusBackground,\r\n                listFocusForeground: quickInputListFocusForeground,\r\n                // Look like focused when inactive.\r\n                listInactiveFocusForeground: quickInputListFocusForeground,\r\n                listInactiveSelectionIconForeground: quickInputListFocusIconForeground,\r\n                listInactiveFocusBackground: quickInputListFocusBackground,\r\n                listFocusOutline: activeContrastBorder,\r\n                listInactiveFocusOutline: activeContrastBorder,\r\n            }),\r\n            pickerGroup: {\r\n                pickerGroupBorder: asCssVariable(pickerGroupBorder),\r\n                pickerGroupForeground: asCssVariable(pickerGroupForeground),\r\n            }\r\n        };\r\n    }\r\n};\r\nQuickInputService = __decorate([\r\n    __param(0, IInstantiationService),\r\n    __param(1, IContextKeyService),\r\n    __param(2, IThemeService),\r\n    __param(3, ILayoutService)\r\n], QuickInputService);\r\nexport { QuickInputService };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Color } from '../../../../base/common/color.js';\r\nexport class ParsedTokenThemeRule {\r\n    constructor(token, index, fontStyle, foreground, background) {\r\n        this._parsedThemeRuleBrand = undefined;\r\n        this.token = token;\r\n        this.index = index;\r\n        this.fontStyle = fontStyle;\r\n        this.foreground = foreground;\r\n        this.background = background;\r\n    }\r\n}\r\n/**\r\n * Parse a raw theme into rules.\r\n */\r\nexport function parseTokenTheme(source) {\r\n    if (!source || !Array.isArray(source)) {\r\n        return [];\r\n    }\r\n    const result = [];\r\n    let resultLen = 0;\r\n    for (let i = 0, len = source.length; i < len; i++) {\r\n        const entry = source[i];\r\n        let fontStyle = -1 /* FontStyle.NotSet */;\r\n        if (typeof entry.fontStyle === 'string') {\r\n            fontStyle = 0 /* FontStyle.None */;\r\n            const segments = entry.fontStyle.split(' ');\r\n            for (let j = 0, lenJ = segments.length; j < lenJ; j++) {\r\n                const segment = segments[j];\r\n                switch (segment) {\r\n                    case 'italic':\r\n                        fontStyle = fontStyle | 1 /* FontStyle.Italic */;\r\n                        break;\r\n                    case 'bold':\r\n                        fontStyle = fontStyle | 2 /* FontStyle.Bold */;\r\n                        break;\r\n                    case 'underline':\r\n                        fontStyle = fontStyle | 4 /* FontStyle.Underline */;\r\n                        break;\r\n                    case 'strikethrough':\r\n                        fontStyle = fontStyle | 8 /* FontStyle.Strikethrough */;\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        let foreground = null;\r\n        if (typeof entry.foreground === 'string') {\r\n            foreground = entry.foreground;\r\n        }\r\n        let background = null;\r\n        if (typeof entry.background === 'string') {\r\n            background = entry.background;\r\n        }\r\n        result[resultLen++] = new ParsedTokenThemeRule(entry.token || '', i, fontStyle, foreground, background);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Resolve rules (i.e. inheritance).\r\n */\r\nfunction resolveParsedTokenThemeRules(parsedThemeRules, customTokenColors) {\r\n    // Sort rules lexicographically, and then by index if necessary\r\n    parsedThemeRules.sort((a, b) => {\r\n        const r = strcmp(a.token, b.token);\r\n        if (r !== 0) {\r\n            return r;\r\n        }\r\n        return a.index - b.index;\r\n    });\r\n    // Determine defaults\r\n    let defaultFontStyle = 0 /* FontStyle.None */;\r\n    let defaultForeground = '000000';\r\n    let defaultBackground = 'ffffff';\r\n    while (parsedThemeRules.length >= 1 && parsedThemeRules[0].token === '') {\r\n        const incomingDefaults = parsedThemeRules.shift();\r\n        if (incomingDefaults.fontStyle !== -1 /* FontStyle.NotSet */) {\r\n            defaultFontStyle = incomingDefaults.fontStyle;\r\n        }\r\n        if (incomingDefaults.foreground !== null) {\r\n            defaultForeground = incomingDefaults.foreground;\r\n        }\r\n        if (incomingDefaults.background !== null) {\r\n            defaultBackground = incomingDefaults.background;\r\n        }\r\n    }\r\n    const colorMap = new ColorMap();\r\n    // start with token colors from custom token themes\r\n    for (const color of customTokenColors) {\r\n        colorMap.getId(color);\r\n    }\r\n    const foregroundColorId = colorMap.getId(defaultForeground);\r\n    const backgroundColorId = colorMap.getId(defaultBackground);\r\n    const defaults = new ThemeTrieElementRule(defaultFontStyle, foregroundColorId, backgroundColorId);\r\n    const root = new ThemeTrieElement(defaults);\r\n    for (let i = 0, len = parsedThemeRules.length; i < len; i++) {\r\n        const rule = parsedThemeRules[i];\r\n        root.insert(rule.token, rule.fontStyle, colorMap.getId(rule.foreground), colorMap.getId(rule.background));\r\n    }\r\n    return new TokenTheme(colorMap, root);\r\n}\r\nconst colorRegExp = /^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;\r\nexport class ColorMap {\r\n    constructor() {\r\n        this._lastColorId = 0;\r\n        this._id2color = [];\r\n        this._color2id = new Map();\r\n    }\r\n    getId(color) {\r\n        if (color === null) {\r\n            return 0;\r\n        }\r\n        const match = color.match(colorRegExp);\r\n        if (!match) {\r\n            throw new Error('Illegal value for token color: ' + color);\r\n        }\r\n        color = match[1].toUpperCase();\r\n        let value = this._color2id.get(color);\r\n        if (value) {\r\n            return value;\r\n        }\r\n        value = ++this._lastColorId;\r\n        this._color2id.set(color, value);\r\n        this._id2color[value] = Color.fromHex('#' + color);\r\n        return value;\r\n    }\r\n    getColorMap() {\r\n        return this._id2color.slice(0);\r\n    }\r\n}\r\nexport class TokenTheme {\r\n    static createFromRawTokenTheme(source, customTokenColors) {\r\n        return this.createFromParsedTokenTheme(parseTokenTheme(source), customTokenColors);\r\n    }\r\n    static createFromParsedTokenTheme(source, customTokenColors) {\r\n        return resolveParsedTokenThemeRules(source, customTokenColors);\r\n    }\r\n    constructor(colorMap, root) {\r\n        this._colorMap = colorMap;\r\n        this._root = root;\r\n        this._cache = new Map();\r\n    }\r\n    getColorMap() {\r\n        return this._colorMap.getColorMap();\r\n    }\r\n    _match(token) {\r\n        return this._root.match(token);\r\n    }\r\n    match(languageId, token) {\r\n        // The cache contains the metadata without the language bits set.\r\n        let result = this._cache.get(token);\r\n        if (typeof result === 'undefined') {\r\n            const rule = this._match(token);\r\n            const standardToken = toStandardTokenType(token);\r\n            result = (rule.metadata\r\n                | (standardToken << 8 /* MetadataConsts.TOKEN_TYPE_OFFSET */)) >>> 0;\r\n            this._cache.set(token, result);\r\n        }\r\n        return (result\r\n            | (languageId << 0 /* MetadataConsts.LANGUAGEID_OFFSET */)) >>> 0;\r\n    }\r\n}\r\nconst STANDARD_TOKEN_TYPE_REGEXP = /\\b(comment|string|regex|regexp)\\b/;\r\nexport function toStandardTokenType(tokenType) {\r\n    const m = tokenType.match(STANDARD_TOKEN_TYPE_REGEXP);\r\n    if (!m) {\r\n        return 0 /* StandardTokenType.Other */;\r\n    }\r\n    switch (m[1]) {\r\n        case 'comment':\r\n            return 1 /* StandardTokenType.Comment */;\r\n        case 'string':\r\n            return 2 /* StandardTokenType.String */;\r\n        case 'regex':\r\n            return 3 /* StandardTokenType.RegEx */;\r\n        case 'regexp':\r\n            return 3 /* StandardTokenType.RegEx */;\r\n    }\r\n    throw new Error('Unexpected match for standard token type!');\r\n}\r\nexport function strcmp(a, b) {\r\n    if (a < b) {\r\n        return -1;\r\n    }\r\n    if (a > b) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\nexport class ThemeTrieElementRule {\r\n    constructor(fontStyle, foreground, background) {\r\n        this._themeTrieElementRuleBrand = undefined;\r\n        this._fontStyle = fontStyle;\r\n        this._foreground = foreground;\r\n        this._background = background;\r\n        this.metadata = ((this._fontStyle << 11 /* MetadataConsts.FONT_STYLE_OFFSET */)\r\n            | (this._foreground << 15 /* MetadataConsts.FOREGROUND_OFFSET */)\r\n            | (this._background << 24 /* MetadataConsts.BACKGROUND_OFFSET */)) >>> 0;\r\n    }\r\n    clone() {\r\n        return new ThemeTrieElementRule(this._fontStyle, this._foreground, this._background);\r\n    }\r\n    acceptOverwrite(fontStyle, foreground, background) {\r\n        if (fontStyle !== -1 /* FontStyle.NotSet */) {\r\n            this._fontStyle = fontStyle;\r\n        }\r\n        if (foreground !== 0 /* ColorId.None */) {\r\n            this._foreground = foreground;\r\n        }\r\n        if (background !== 0 /* ColorId.None */) {\r\n            this._background = background;\r\n        }\r\n        this.metadata = ((this._fontStyle << 11 /* MetadataConsts.FONT_STYLE_OFFSET */)\r\n            | (this._foreground << 15 /* MetadataConsts.FOREGROUND_OFFSET */)\r\n            | (this._background << 24 /* MetadataConsts.BACKGROUND_OFFSET */)) >>> 0;\r\n    }\r\n}\r\nexport class ThemeTrieElement {\r\n    constructor(mainRule) {\r\n        this._themeTrieElementBrand = undefined;\r\n        this._mainRule = mainRule;\r\n        this._children = new Map();\r\n    }\r\n    match(token) {\r\n        if (token === '') {\r\n            return this._mainRule;\r\n        }\r\n        const dotIndex = token.indexOf('.');\r\n        let head;\r\n        let tail;\r\n        if (dotIndex === -1) {\r\n            head = token;\r\n            tail = '';\r\n        }\r\n        else {\r\n            head = token.substring(0, dotIndex);\r\n            tail = token.substring(dotIndex + 1);\r\n        }\r\n        const child = this._children.get(head);\r\n        if (typeof child !== 'undefined') {\r\n            return child.match(tail);\r\n        }\r\n        return this._mainRule;\r\n    }\r\n    insert(token, fontStyle, foreground, background) {\r\n        if (token === '') {\r\n            // Merge into the main rule\r\n            this._mainRule.acceptOverwrite(fontStyle, foreground, background);\r\n            return;\r\n        }\r\n        const dotIndex = token.indexOf('.');\r\n        let head;\r\n        let tail;\r\n        if (dotIndex === -1) {\r\n            head = token;\r\n            tail = '';\r\n        }\r\n        else {\r\n            head = token.substring(0, dotIndex);\r\n            tail = token.substring(dotIndex + 1);\r\n        }\r\n        let child = this._children.get(head);\r\n        if (typeof child === 'undefined') {\r\n            child = new ThemeTrieElement(this._mainRule.clone());\r\n            this._children.set(head, child);\r\n        }\r\n        child.insert(tail, fontStyle, foreground, background);\r\n    }\r\n}\r\nexport function generateTokensCSSForColorMap(colorMap) {\r\n    const rules = [];\r\n    for (let i = 1, len = colorMap.length; i < len; i++) {\r\n        const color = colorMap[i];\r\n        rules[i] = `.mtk${i} { color: ${color}; }`;\r\n    }\r\n    rules.push('.mtki { font-style: italic; }');\r\n    rules.push('.mtkb { font-weight: bold; }');\r\n    rules.push('.mtku { text-decoration: underline; text-underline-position: under; }');\r\n    rules.push('.mtks { text-decoration: line-through; }');\r\n    rules.push('.mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }');\r\n    return rules.join('\\n');\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { editorActiveIndentGuide1, editorIndentGuide1 } from '../../common/core/editorColorRegistry.js';\r\nimport { editorBackground, editorForeground, editorInactiveSelection, editorSelectionHighlight } from '../../../platform/theme/common/colorRegistry.js';\r\n/* -------------------------------- Begin vs theme -------------------------------- */\r\nexport const vs = {\r\n    base: 'vs',\r\n    inherit: false,\r\n    rules: [\r\n        { token: '', foreground: '000000', background: 'fffffe' },\r\n        { token: 'invalid', foreground: 'cd3131' },\r\n        { token: 'emphasis', fontStyle: 'italic' },\r\n        { token: 'strong', fontStyle: 'bold' },\r\n        { token: 'variable', foreground: '001188' },\r\n        { token: 'variable.predefined', foreground: '4864AA' },\r\n        { token: 'constant', foreground: 'dd0000' },\r\n        { token: 'comment', foreground: '008000' },\r\n        { token: 'number', foreground: '098658' },\r\n        { token: 'number.hex', foreground: '3030c0' },\r\n        { token: 'regexp', foreground: '800000' },\r\n        { token: 'annotation', foreground: '808080' },\r\n        { token: 'type', foreground: '008080' },\r\n        { token: 'delimiter', foreground: '000000' },\r\n        { token: 'delimiter.html', foreground: '383838' },\r\n        { token: 'delimiter.xml', foreground: '0000FF' },\r\n        { token: 'tag', foreground: '800000' },\r\n        { token: 'tag.id.pug', foreground: '4F76AC' },\r\n        { token: 'tag.class.pug', foreground: '4F76AC' },\r\n        { token: 'meta.scss', foreground: '800000' },\r\n        { token: 'metatag', foreground: 'e00000' },\r\n        { token: 'metatag.content.html', foreground: 'FF0000' },\r\n        { token: 'metatag.html', foreground: '808080' },\r\n        { token: 'metatag.xml', foreground: '808080' },\r\n        { token: 'metatag.php', fontStyle: 'bold' },\r\n        { token: 'key', foreground: '863B00' },\r\n        { token: 'string.key.json', foreground: 'A31515' },\r\n        { token: 'string.value.json', foreground: '0451A5' },\r\n        { token: 'attribute.name', foreground: 'FF0000' },\r\n        { token: 'attribute.value', foreground: '0451A5' },\r\n        { token: 'attribute.value.number', foreground: '098658' },\r\n        { token: 'attribute.value.unit', foreground: '098658' },\r\n        { token: 'attribute.value.html', foreground: '0000FF' },\r\n        { token: 'attribute.value.xml', foreground: '0000FF' },\r\n        { token: 'string', foreground: 'A31515' },\r\n        { token: 'string.html', foreground: '0000FF' },\r\n        { token: 'string.sql', foreground: 'FF0000' },\r\n        { token: 'string.yaml', foreground: '0451A5' },\r\n        { token: 'keyword', foreground: '0000FF' },\r\n        { token: 'keyword.json', foreground: '0451A5' },\r\n        { token: 'keyword.flow', foreground: 'AF00DB' },\r\n        { token: 'keyword.flow.scss', foreground: '0000FF' },\r\n        { token: 'operator.scss', foreground: '666666' },\r\n        { token: 'operator.sql', foreground: '778899' },\r\n        { token: 'operator.swift', foreground: '666666' },\r\n        { token: 'predefined.sql', foreground: 'C700C7' },\r\n    ],\r\n    colors: {\r\n        [editorBackground]: '#FFFFFE',\r\n        [editorForeground]: '#000000',\r\n        [editorInactiveSelection]: '#E5EBF1',\r\n        [editorIndentGuide1]: '#D3D3D3',\r\n        [editorActiveIndentGuide1]: '#939393',\r\n        [editorSelectionHighlight]: '#ADD6FF4D'\r\n    }\r\n};\r\n/* -------------------------------- End vs theme -------------------------------- */\r\n/* -------------------------------- Begin vs-dark theme -------------------------------- */\r\nexport const vs_dark = {\r\n    base: 'vs-dark',\r\n    inherit: false,\r\n    rules: [\r\n        { token: '', foreground: 'D4D4D4', background: '1E1E1E' },\r\n        { token: 'invalid', foreground: 'f44747' },\r\n        { token: 'emphasis', fontStyle: 'italic' },\r\n        { token: 'strong', fontStyle: 'bold' },\r\n        { token: 'variable', foreground: '74B0DF' },\r\n        { token: 'variable.predefined', foreground: '4864AA' },\r\n        { token: 'variable.parameter', foreground: '9CDCFE' },\r\n        { token: 'constant', foreground: '569CD6' },\r\n        { token: 'comment', foreground: '608B4E' },\r\n        { token: 'number', foreground: 'B5CEA8' },\r\n        { token: 'number.hex', foreground: '5BB498' },\r\n        { token: 'regexp', foreground: 'B46695' },\r\n        { token: 'annotation', foreground: 'cc6666' },\r\n        { token: 'type', foreground: '3DC9B0' },\r\n        { token: 'delimiter', foreground: 'DCDCDC' },\r\n        { token: 'delimiter.html', foreground: '808080' },\r\n        { token: 'delimiter.xml', foreground: '808080' },\r\n        { token: 'tag', foreground: '569CD6' },\r\n        { token: 'tag.id.pug', foreground: '4F76AC' },\r\n        { token: 'tag.class.pug', foreground: '4F76AC' },\r\n        { token: 'meta.scss', foreground: 'A79873' },\r\n        { token: 'meta.tag', foreground: 'CE9178' },\r\n        { token: 'metatag', foreground: 'DD6A6F' },\r\n        { token: 'metatag.content.html', foreground: '9CDCFE' },\r\n        { token: 'metatag.html', foreground: '569CD6' },\r\n        { token: 'metatag.xml', foreground: '569CD6' },\r\n        { token: 'metatag.php', fontStyle: 'bold' },\r\n        { token: 'key', foreground: '9CDCFE' },\r\n        { token: 'string.key.json', foreground: '9CDCFE' },\r\n        { token: 'string.value.json', foreground: 'CE9178' },\r\n        { token: 'attribute.name', foreground: '9CDCFE' },\r\n        { token: 'attribute.value', foreground: 'CE9178' },\r\n        { token: 'attribute.value.number.css', foreground: 'B5CEA8' },\r\n        { token: 'attribute.value.unit.css', foreground: 'B5CEA8' },\r\n        { token: 'attribute.value.hex.css', foreground: 'D4D4D4' },\r\n        { token: 'string', foreground: 'CE9178' },\r\n        { token: 'string.sql', foreground: 'FF0000' },\r\n        { token: 'keyword', foreground: '569CD6' },\r\n        { token: 'keyword.flow', foreground: 'C586C0' },\r\n        { token: 'keyword.json', foreground: 'CE9178' },\r\n        { token: 'keyword.flow.scss', foreground: '569CD6' },\r\n        { token: 'operator.scss', foreground: '909090' },\r\n        { token: 'operator.sql', foreground: '778899' },\r\n        { token: 'operator.swift', foreground: '909090' },\r\n        { token: 'predefined.sql', foreground: 'FF00FF' },\r\n    ],\r\n    colors: {\r\n        [editorBackground]: '#1E1E1E',\r\n        [editorForeground]: '#D4D4D4',\r\n        [editorInactiveSelection]: '#3A3D41',\r\n        [editorIndentGuide1]: '#404040',\r\n        [editorActiveIndentGuide1]: '#707070',\r\n        [editorSelectionHighlight]: '#ADD6FF26'\r\n    }\r\n};\r\n/* -------------------------------- End vs-dark theme -------------------------------- */\r\n/* -------------------------------- Begin hc-black theme -------------------------------- */\r\nexport const hc_black = {\r\n    base: 'hc-black',\r\n    inherit: false,\r\n    rules: [\r\n        { token: '', foreground: 'FFFFFF', background: '000000' },\r\n        { token: 'invalid', foreground: 'f44747' },\r\n        { token: 'emphasis', fontStyle: 'italic' },\r\n        { token: 'strong', fontStyle: 'bold' },\r\n        { token: 'variable', foreground: '1AEBFF' },\r\n        { token: 'variable.parameter', foreground: '9CDCFE' },\r\n        { token: 'constant', foreground: '569CD6' },\r\n        { token: 'comment', foreground: '608B4E' },\r\n        { token: 'number', foreground: 'FFFFFF' },\r\n        { token: 'regexp', foreground: 'C0C0C0' },\r\n        { token: 'annotation', foreground: '569CD6' },\r\n        { token: 'type', foreground: '3DC9B0' },\r\n        { token: 'delimiter', foreground: 'FFFF00' },\r\n        { token: 'delimiter.html', foreground: 'FFFF00' },\r\n        { token: 'tag', foreground: '569CD6' },\r\n        { token: 'tag.id.pug', foreground: '4F76AC' },\r\n        { token: 'tag.class.pug', foreground: '4F76AC' },\r\n        { token: 'meta', foreground: 'D4D4D4' },\r\n        { token: 'meta.tag', foreground: 'CE9178' },\r\n        { token: 'metatag', foreground: '569CD6' },\r\n        { token: 'metatag.content.html', foreground: '1AEBFF' },\r\n        { token: 'metatag.html', foreground: '569CD6' },\r\n        { token: 'metatag.xml', foreground: '569CD6' },\r\n        { token: 'metatag.php', fontStyle: 'bold' },\r\n        { token: 'key', foreground: '9CDCFE' },\r\n        { token: 'string.key', foreground: '9CDCFE' },\r\n        { token: 'string.value', foreground: 'CE9178' },\r\n        { token: 'attribute.name', foreground: '569CD6' },\r\n        { token: 'attribute.value', foreground: '3FF23F' },\r\n        { token: 'string', foreground: 'CE9178' },\r\n        { token: 'string.sql', foreground: 'FF0000' },\r\n        { token: 'keyword', foreground: '569CD6' },\r\n        { token: 'keyword.flow', foreground: 'C586C0' },\r\n        { token: 'operator.sql', foreground: '778899' },\r\n        { token: 'operator.swift', foreground: '909090' },\r\n        { token: 'predefined.sql', foreground: 'FF00FF' },\r\n    ],\r\n    colors: {\r\n        [editorBackground]: '#000000',\r\n        [editorForeground]: '#FFFFFF',\r\n        [editorIndentGuide1]: '#FFFFFF',\r\n        [editorActiveIndentGuide1]: '#FFFFFF',\r\n    }\r\n};\r\n/* -------------------------------- End hc-black theme -------------------------------- */\r\n/* -------------------------------- Begin hc-light theme -------------------------------- */\r\nexport const hc_light = {\r\n    base: 'hc-light',\r\n    inherit: false,\r\n    rules: [\r\n        { token: '', foreground: '292929', background: 'FFFFFF' },\r\n        { token: 'invalid', foreground: 'B5200D' },\r\n        { token: 'emphasis', fontStyle: 'italic' },\r\n        { token: 'strong', fontStyle: 'bold' },\r\n        { token: 'variable', foreground: '264F70' },\r\n        { token: 'variable.predefined', foreground: '4864AA' },\r\n        { token: 'constant', foreground: 'dd0000' },\r\n        { token: 'comment', foreground: '008000' },\r\n        { token: 'number', foreground: '098658' },\r\n        { token: 'number.hex', foreground: '3030c0' },\r\n        { token: 'regexp', foreground: '800000' },\r\n        { token: 'annotation', foreground: '808080' },\r\n        { token: 'type', foreground: '008080' },\r\n        { token: 'delimiter', foreground: '000000' },\r\n        { token: 'delimiter.html', foreground: '383838' },\r\n        { token: 'tag', foreground: '800000' },\r\n        { token: 'tag.id.pug', foreground: '4F76AC' },\r\n        { token: 'tag.class.pug', foreground: '4F76AC' },\r\n        { token: 'meta.scss', foreground: '800000' },\r\n        { token: 'metatag', foreground: 'e00000' },\r\n        { token: 'metatag.content.html', foreground: 'B5200D' },\r\n        { token: 'metatag.html', foreground: '808080' },\r\n        { token: 'metatag.xml', foreground: '808080' },\r\n        { token: 'metatag.php', fontStyle: 'bold' },\r\n        { token: 'key', foreground: '863B00' },\r\n        { token: 'string.key.json', foreground: 'A31515' },\r\n        { token: 'string.value.json', foreground: '0451A5' },\r\n        { token: 'attribute.name', foreground: '264F78' },\r\n        { token: 'attribute.value', foreground: '0451A5' },\r\n        { token: 'string', foreground: 'A31515' },\r\n        { token: 'string.sql', foreground: 'B5200D' },\r\n        { token: 'keyword', foreground: '0000FF' },\r\n        { token: 'keyword.flow', foreground: 'AF00DB' },\r\n        { token: 'operator.sql', foreground: '778899' },\r\n        { token: 'operator.swift', foreground: '666666' },\r\n        { token: 'predefined.sql', foreground: 'C700C7' },\r\n    ],\r\n    colors: {\r\n        [editorBackground]: '#FFFFFF',\r\n        [editorForeground]: '#292929',\r\n        [editorIndentGuide1]: '#292929',\r\n        [editorActiveIndentGuide1]: '#292929',\r\n    }\r\n};\r\n/* -------------------------------- End hc-light theme -------------------------------- */\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { asCSSPropertyValue, asCSSUrl } from '../../../base/browser/dom.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { ThemeIcon } from '../../../base/common/themables.js';\r\nimport { getIconRegistry } from '../common/iconRegistry.js';\r\nexport function getIconsStyleSheet(themeService) {\r\n    const disposable = new DisposableStore();\r\n    const onDidChangeEmmiter = disposable.add(new Emitter());\r\n    const iconRegistry = getIconRegistry();\r\n    disposable.add(iconRegistry.onDidChange(() => onDidChangeEmmiter.fire()));\r\n    if (themeService) {\r\n        disposable.add(themeService.onDidProductIconThemeChange(() => onDidChangeEmmiter.fire()));\r\n    }\r\n    return {\r\n        dispose: () => disposable.dispose(),\r\n        onDidChange: onDidChangeEmmiter.event,\r\n        getCSS() {\r\n            const productIconTheme = themeService ? themeService.getProductIconTheme() : new UnthemedProductIconTheme();\r\n            const usedFontIds = {};\r\n            const formatIconRule = (contribution) => {\r\n                const definition = productIconTheme.getIcon(contribution);\r\n                if (!definition) {\r\n                    return undefined;\r\n                }\r\n                const fontContribution = definition.font;\r\n                if (fontContribution) {\r\n                    usedFontIds[fontContribution.id] = fontContribution.definition;\r\n                    return `.codicon-${contribution.id}:before { content: '${definition.fontCharacter}'; font-family: ${asCSSPropertyValue(fontContribution.id)}; }`;\r\n                }\r\n                // default font (codicon)\r\n                return `.codicon-${contribution.id}:before { content: '${definition.fontCharacter}'; }`;\r\n            };\r\n            const rules = [];\r\n            for (const contribution of iconRegistry.getIcons()) {\r\n                const rule = formatIconRule(contribution);\r\n                if (rule) {\r\n                    rules.push(rule);\r\n                }\r\n            }\r\n            for (const id in usedFontIds) {\r\n                const definition = usedFontIds[id];\r\n                const fontWeight = definition.weight ? `font-weight: ${definition.weight};` : '';\r\n                const fontStyle = definition.style ? `font-style: ${definition.style};` : '';\r\n                const src = definition.src.map(l => `${asCSSUrl(l.location)} format('${l.format}')`).join(', ');\r\n                rules.push(`@font-face { src: ${src}; font-family: ${asCSSPropertyValue(id)};${fontWeight}${fontStyle} font-display: block; }`);\r\n            }\r\n            return rules.join('\\n');\r\n        }\r\n    };\r\n}\r\nexport class UnthemedProductIconTheme {\r\n    getIcon(contribution) {\r\n        const iconRegistry = getIconRegistry();\r\n        let definition = contribution.defaults;\r\n        while (ThemeIcon.isThemeIcon(definition)) {\r\n            const c = iconRegistry.getIcon(definition.id);\r\n            if (!c) {\r\n                return undefined;\r\n            }\r\n            definition = c.defaults;\r\n        }\r\n        return definition;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { addMatchMediaChangeListener } from '../../../base/browser/browser.js';\r\nimport { Color } from '../../../base/common/color.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { TokenizationRegistry } from '../../common/languages.js';\r\nimport { TokenMetadata } from '../../common/encodedTokenAttributes.js';\r\nimport { TokenTheme, generateTokensCSSForColorMap } from '../../common/languages/supports/tokenization.js';\r\nimport { hc_black, hc_light, vs, vs_dark } from '../common/themes.js';\r\nimport { Registry } from '../../../platform/registry/common/platform.js';\r\nimport { asCssVariableName, Extensions } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { Extensions as ThemingExtensions } from '../../../platform/theme/common/themeService.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { ColorScheme, isDark, isHighContrast } from '../../../platform/theme/common/theme.js';\r\nimport { getIconsStyleSheet, UnthemedProductIconTheme } from '../../../platform/theme/browser/iconsStyleSheet.js';\r\nimport { mainWindow } from '../../../base/browser/window.js';\r\nexport const VS_LIGHT_THEME_NAME = 'vs';\r\nexport const VS_DARK_THEME_NAME = 'vs-dark';\r\nexport const HC_BLACK_THEME_NAME = 'hc-black';\r\nexport const HC_LIGHT_THEME_NAME = 'hc-light';\r\nconst colorRegistry = Registry.as(Extensions.ColorContribution);\r\nconst themingRegistry = Registry.as(ThemingExtensions.ThemingContribution);\r\nclass StandaloneTheme {\r\n    constructor(name, standaloneThemeData) {\r\n        this.semanticHighlighting = false;\r\n        this.themeData = standaloneThemeData;\r\n        const base = standaloneThemeData.base;\r\n        if (name.length > 0) {\r\n            if (isBuiltinTheme(name)) {\r\n                this.id = name;\r\n            }\r\n            else {\r\n                this.id = base + ' ' + name;\r\n            }\r\n            this.themeName = name;\r\n        }\r\n        else {\r\n            this.id = base;\r\n            this.themeName = base;\r\n        }\r\n        this.colors = null;\r\n        this.defaultColors = Object.create(null);\r\n        this._tokenTheme = null;\r\n    }\r\n    get base() {\r\n        return this.themeData.base;\r\n    }\r\n    notifyBaseUpdated() {\r\n        if (this.themeData.inherit) {\r\n            this.colors = null;\r\n            this._tokenTheme = null;\r\n        }\r\n    }\r\n    getColors() {\r\n        if (!this.colors) {\r\n            const colors = new Map();\r\n            for (const id in this.themeData.colors) {\r\n                colors.set(id, Color.fromHex(this.themeData.colors[id]));\r\n            }\r\n            if (this.themeData.inherit) {\r\n                const baseData = getBuiltinRules(this.themeData.base);\r\n                for (const id in baseData.colors) {\r\n                    if (!colors.has(id)) {\r\n                        colors.set(id, Color.fromHex(baseData.colors[id]));\r\n                    }\r\n                }\r\n            }\r\n            this.colors = colors;\r\n        }\r\n        return this.colors;\r\n    }\r\n    getColor(colorId, useDefault) {\r\n        const color = this.getColors().get(colorId);\r\n        if (color) {\r\n            return color;\r\n        }\r\n        if (useDefault !== false) {\r\n            return this.getDefault(colorId);\r\n        }\r\n        return undefined;\r\n    }\r\n    getDefault(colorId) {\r\n        let color = this.defaultColors[colorId];\r\n        if (color) {\r\n            return color;\r\n        }\r\n        color = colorRegistry.resolveDefaultColor(colorId, this);\r\n        this.defaultColors[colorId] = color;\r\n        return color;\r\n    }\r\n    defines(colorId) {\r\n        return this.getColors().has(colorId);\r\n    }\r\n    get type() {\r\n        switch (this.base) {\r\n            case VS_LIGHT_THEME_NAME: return ColorScheme.LIGHT;\r\n            case HC_BLACK_THEME_NAME: return ColorScheme.HIGH_CONTRAST_DARK;\r\n            case HC_LIGHT_THEME_NAME: return ColorScheme.HIGH_CONTRAST_LIGHT;\r\n            default: return ColorScheme.DARK;\r\n        }\r\n    }\r\n    get tokenTheme() {\r\n        if (!this._tokenTheme) {\r\n            let rules = [];\r\n            let encodedTokensColors = [];\r\n            if (this.themeData.inherit) {\r\n                const baseData = getBuiltinRules(this.themeData.base);\r\n                rules = baseData.rules;\r\n                if (baseData.encodedTokensColors) {\r\n                    encodedTokensColors = baseData.encodedTokensColors;\r\n                }\r\n            }\r\n            // Pick up default colors from `editor.foreground` and `editor.background` if available\r\n            const editorForeground = this.themeData.colors['editor.foreground'];\r\n            const editorBackground = this.themeData.colors['editor.background'];\r\n            if (editorForeground || editorBackground) {\r\n                const rule = { token: '' };\r\n                if (editorForeground) {\r\n                    rule.foreground = editorForeground;\r\n                }\r\n                if (editorBackground) {\r\n                    rule.background = editorBackground;\r\n                }\r\n                rules.push(rule);\r\n            }\r\n            rules = rules.concat(this.themeData.rules);\r\n            if (this.themeData.encodedTokensColors) {\r\n                encodedTokensColors = this.themeData.encodedTokensColors;\r\n            }\r\n            this._tokenTheme = TokenTheme.createFromRawTokenTheme(rules, encodedTokensColors);\r\n        }\r\n        return this._tokenTheme;\r\n    }\r\n    getTokenStyleMetadata(type, modifiers, modelLanguage) {\r\n        // use theme rules match\r\n        const style = this.tokenTheme._match([type].concat(modifiers).join('.'));\r\n        const metadata = style.metadata;\r\n        const foreground = TokenMetadata.getForeground(metadata);\r\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\r\n        return {\r\n            foreground: foreground,\r\n            italic: Boolean(fontStyle & 1 /* FontStyle.Italic */),\r\n            bold: Boolean(fontStyle & 2 /* FontStyle.Bold */),\r\n            underline: Boolean(fontStyle & 4 /* FontStyle.Underline */),\r\n            strikethrough: Boolean(fontStyle & 8 /* FontStyle.Strikethrough */)\r\n        };\r\n    }\r\n}\r\nfunction isBuiltinTheme(themeName) {\r\n    return (themeName === VS_LIGHT_THEME_NAME\r\n        || themeName === VS_DARK_THEME_NAME\r\n        || themeName === HC_BLACK_THEME_NAME\r\n        || themeName === HC_LIGHT_THEME_NAME);\r\n}\r\nfunction getBuiltinRules(builtinTheme) {\r\n    switch (builtinTheme) {\r\n        case VS_LIGHT_THEME_NAME:\r\n            return vs;\r\n        case VS_DARK_THEME_NAME:\r\n            return vs_dark;\r\n        case HC_BLACK_THEME_NAME:\r\n            return hc_black;\r\n        case HC_LIGHT_THEME_NAME:\r\n            return hc_light;\r\n    }\r\n}\r\nfunction newBuiltInTheme(builtinTheme) {\r\n    const themeData = getBuiltinRules(builtinTheme);\r\n    return new StandaloneTheme(builtinTheme, themeData);\r\n}\r\nexport class StandaloneThemeService extends Disposable {\r\n    constructor() {\r\n        super();\r\n        this._onColorThemeChange = this._register(new Emitter());\r\n        this.onDidColorThemeChange = this._onColorThemeChange.event;\r\n        this._onProductIconThemeChange = this._register(new Emitter());\r\n        this.onDidProductIconThemeChange = this._onProductIconThemeChange.event;\r\n        this._environment = Object.create(null);\r\n        this._builtInProductIconTheme = new UnthemedProductIconTheme();\r\n        this._autoDetectHighContrast = true;\r\n        this._knownThemes = new Map();\r\n        this._knownThemes.set(VS_LIGHT_THEME_NAME, newBuiltInTheme(VS_LIGHT_THEME_NAME));\r\n        this._knownThemes.set(VS_DARK_THEME_NAME, newBuiltInTheme(VS_DARK_THEME_NAME));\r\n        this._knownThemes.set(HC_BLACK_THEME_NAME, newBuiltInTheme(HC_BLACK_THEME_NAME));\r\n        this._knownThemes.set(HC_LIGHT_THEME_NAME, newBuiltInTheme(HC_LIGHT_THEME_NAME));\r\n        const iconsStyleSheet = this._register(getIconsStyleSheet(this));\r\n        this._codiconCSS = iconsStyleSheet.getCSS();\r\n        this._themeCSS = '';\r\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\r\n        this._globalStyleElement = null;\r\n        this._styleElements = [];\r\n        this._colorMapOverride = null;\r\n        this.setTheme(VS_LIGHT_THEME_NAME);\r\n        this._onOSSchemeChanged();\r\n        this._register(iconsStyleSheet.onDidChange(() => {\r\n            this._codiconCSS = iconsStyleSheet.getCSS();\r\n            this._updateCSS();\r\n        }));\r\n        addMatchMediaChangeListener('(forced-colors: active)', () => {\r\n            this._onOSSchemeChanged();\r\n        });\r\n    }\r\n    registerEditorContainer(domNode) {\r\n        if (dom.isInShadowDOM(domNode)) {\r\n            return this._registerShadowDomContainer(domNode);\r\n        }\r\n        return this._registerRegularEditorContainer();\r\n    }\r\n    _registerRegularEditorContainer() {\r\n        if (!this._globalStyleElement) {\r\n            this._globalStyleElement = dom.createStyleSheet(undefined, style => {\r\n                style.className = 'monaco-colors';\r\n                style.textContent = this._allCSS;\r\n            });\r\n            this._styleElements.push(this._globalStyleElement);\r\n        }\r\n        return Disposable.None;\r\n    }\r\n    _registerShadowDomContainer(domNode) {\r\n        const styleElement = dom.createStyleSheet(domNode, style => {\r\n            style.className = 'monaco-colors';\r\n            style.textContent = this._allCSS;\r\n        });\r\n        this._styleElements.push(styleElement);\r\n        return {\r\n            dispose: () => {\r\n                for (let i = 0; i < this._styleElements.length; i++) {\r\n                    if (this._styleElements[i] === styleElement) {\r\n                        this._styleElements.splice(i, 1);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n    defineTheme(themeName, themeData) {\r\n        if (!/^[a-z0-9\\-]+$/i.test(themeName)) {\r\n            throw new Error('Illegal theme name!');\r\n        }\r\n        if (!isBuiltinTheme(themeData.base) && !isBuiltinTheme(themeName)) {\r\n            throw new Error('Illegal theme base!');\r\n        }\r\n        // set or replace theme\r\n        this._knownThemes.set(themeName, new StandaloneTheme(themeName, themeData));\r\n        if (isBuiltinTheme(themeName)) {\r\n            this._knownThemes.forEach(theme => {\r\n                if (theme.base === themeName) {\r\n                    theme.notifyBaseUpdated();\r\n                }\r\n            });\r\n        }\r\n        if (this._theme.themeName === themeName) {\r\n            this.setTheme(themeName); // refresh theme\r\n        }\r\n    }\r\n    getColorTheme() {\r\n        return this._theme;\r\n    }\r\n    setColorMapOverride(colorMapOverride) {\r\n        this._colorMapOverride = colorMapOverride;\r\n        this._updateThemeOrColorMap();\r\n    }\r\n    setTheme(themeName) {\r\n        let theme;\r\n        if (this._knownThemes.has(themeName)) {\r\n            theme = this._knownThemes.get(themeName);\r\n        }\r\n        else {\r\n            theme = this._knownThemes.get(VS_LIGHT_THEME_NAME);\r\n        }\r\n        this._updateActualTheme(theme);\r\n    }\r\n    _updateActualTheme(desiredTheme) {\r\n        if (!desiredTheme || this._theme === desiredTheme) {\r\n            // Nothing to do\r\n            return;\r\n        }\r\n        this._theme = desiredTheme;\r\n        this._updateThemeOrColorMap();\r\n    }\r\n    _onOSSchemeChanged() {\r\n        if (this._autoDetectHighContrast) {\r\n            const wantsHighContrast = mainWindow.matchMedia(`(forced-colors: active)`).matches;\r\n            if (wantsHighContrast !== isHighContrast(this._theme.type)) {\r\n                // switch to high contrast or non-high contrast but stick to dark or light\r\n                let newThemeName;\r\n                if (isDark(this._theme.type)) {\r\n                    newThemeName = wantsHighContrast ? HC_BLACK_THEME_NAME : VS_DARK_THEME_NAME;\r\n                }\r\n                else {\r\n                    newThemeName = wantsHighContrast ? HC_LIGHT_THEME_NAME : VS_LIGHT_THEME_NAME;\r\n                }\r\n                this._updateActualTheme(this._knownThemes.get(newThemeName));\r\n            }\r\n        }\r\n    }\r\n    setAutoDetectHighContrast(autoDetectHighContrast) {\r\n        this._autoDetectHighContrast = autoDetectHighContrast;\r\n        this._onOSSchemeChanged();\r\n    }\r\n    _updateThemeOrColorMap() {\r\n        const cssRules = [];\r\n        const hasRule = {};\r\n        const ruleCollector = {\r\n            addRule: (rule) => {\r\n                if (!hasRule[rule]) {\r\n                    cssRules.push(rule);\r\n                    hasRule[rule] = true;\r\n                }\r\n            }\r\n        };\r\n        themingRegistry.getThemingParticipants().forEach(p => p(this._theme, ruleCollector, this._environment));\r\n        const colorVariables = [];\r\n        for (const item of colorRegistry.getColors()) {\r\n            const color = this._theme.getColor(item.id, true);\r\n            if (color) {\r\n                colorVariables.push(`${asCssVariableName(item.id)}: ${color.toString()};`);\r\n            }\r\n        }\r\n        ruleCollector.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${colorVariables.join('\\n')} }`);\r\n        const colorMap = this._colorMapOverride || this._theme.tokenTheme.getColorMap();\r\n        ruleCollector.addRule(generateTokensCSSForColorMap(colorMap));\r\n        this._themeCSS = cssRules.join('\\n');\r\n        this._updateCSS();\r\n        TokenizationRegistry.setColorMap(colorMap);\r\n        this._onColorThemeChange.fire(this._theme);\r\n    }\r\n    _updateCSS() {\r\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\r\n        this._styleElements.forEach(styleElement => styleElement.textContent = this._allCSS);\r\n    }\r\n    getFileIconTheme() {\r\n        return {\r\n            hasFileIcons: false,\r\n            hasFolderIcons: false,\r\n            hidesExplorerArrows: false\r\n        };\r\n    }\r\n    getProductIconTheme() {\r\n        return this._builtInProductIconTheme;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nexport const IStandaloneThemeService = createDecorator('themeService');\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { addDisposableListener } from '../../../base/browser/dom.js';\r\nimport { mainWindow } from '../../../base/browser/window.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../common/accessibility.js';\r\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\r\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\r\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\r\nlet AccessibilityService = class AccessibilityService extends Disposable {\r\n    constructor(_contextKeyService, _layoutService, _configurationService) {\r\n        super();\r\n        this._contextKeyService = _contextKeyService;\r\n        this._layoutService = _layoutService;\r\n        this._configurationService = _configurationService;\r\n        this._accessibilitySupport = 0 /* AccessibilitySupport.Unknown */;\r\n        this._onDidChangeScreenReaderOptimized = new Emitter();\r\n        this._onDidChangeReducedMotion = new Emitter();\r\n        this._accessibilityModeEnabledContext = CONTEXT_ACCESSIBILITY_MODE_ENABLED.bindTo(this._contextKeyService);\r\n        const updateContextKey = () => this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());\r\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\r\n            if (e.affectsConfiguration('editor.accessibilitySupport')) {\r\n                updateContextKey();\r\n                this._onDidChangeScreenReaderOptimized.fire();\r\n            }\r\n            if (e.affectsConfiguration('workbench.reduceMotion')) {\r\n                this._configMotionReduced = this._configurationService.getValue('workbench.reduceMotion');\r\n                this._onDidChangeReducedMotion.fire();\r\n            }\r\n        }));\r\n        updateContextKey();\r\n        this._register(this.onDidChangeScreenReaderOptimized(() => updateContextKey()));\r\n        const reduceMotionMatcher = mainWindow.matchMedia(`(prefers-reduced-motion: reduce)`);\r\n        this._systemMotionReduced = reduceMotionMatcher.matches;\r\n        this._configMotionReduced = this._configurationService.getValue('workbench.reduceMotion');\r\n        this.initReducedMotionListeners(reduceMotionMatcher);\r\n    }\r\n    initReducedMotionListeners(reduceMotionMatcher) {\r\n        this._register(addDisposableListener(reduceMotionMatcher, 'change', () => {\r\n            this._systemMotionReduced = reduceMotionMatcher.matches;\r\n            if (this._configMotionReduced === 'auto') {\r\n                this._onDidChangeReducedMotion.fire();\r\n            }\r\n        }));\r\n        const updateRootClasses = () => {\r\n            const reduce = this.isMotionReduced();\r\n            this._layoutService.mainContainer.classList.toggle('reduce-motion', reduce);\r\n            this._layoutService.mainContainer.classList.toggle('enable-motion', !reduce);\r\n        };\r\n        updateRootClasses();\r\n        this._register(this.onDidChangeReducedMotion(() => updateRootClasses()));\r\n    }\r\n    get onDidChangeScreenReaderOptimized() {\r\n        return this._onDidChangeScreenReaderOptimized.event;\r\n    }\r\n    isScreenReaderOptimized() {\r\n        const config = this._configurationService.getValue('editor.accessibilitySupport');\r\n        return config === 'on' || (config === 'auto' && this._accessibilitySupport === 2 /* AccessibilitySupport.Enabled */);\r\n    }\r\n    get onDidChangeReducedMotion() {\r\n        return this._onDidChangeReducedMotion.event;\r\n    }\r\n    isMotionReduced() {\r\n        const config = this._configMotionReduced;\r\n        return config === 'on' || (config === 'auto' && this._systemMotionReduced);\r\n    }\r\n    getAccessibilitySupport() {\r\n        return this._accessibilitySupport;\r\n    }\r\n};\r\nAccessibilityService = __decorate([\r\n    __param(0, IContextKeyService),\r\n    __param(1, ILayoutService),\r\n    __param(2, IConfigurationService)\r\n], AccessibilityService);\r\nexport { AccessibilityService };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar PersistedMenuHideState_1, MenuInfo_1;\r\nimport { RunOnceScheduler } from '../../../base/common/async.js';\r\nimport { DebounceEmitter, Emitter } from '../../../base/common/event.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { isIMenuItem, isISubmenuItem, MenuItemAction, MenuRegistry, SubmenuItemAction } from './actions.js';\r\nimport { ICommandService } from '../../commands/common/commands.js';\r\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\r\nimport { Separator, toAction } from '../../../base/common/actions.js';\r\nimport { IStorageService } from '../../storage/common/storage.js';\r\nimport { removeFastWithoutKeepingOrder } from '../../../base/common/arrays.js';\r\nimport { localize } from '../../../nls.js';\r\nlet MenuService = class MenuService {\r\n    constructor(_commandService, storageService) {\r\n        this._commandService = _commandService;\r\n        this._hiddenStates = new PersistedMenuHideState(storageService);\r\n    }\r\n    createMenu(id, contextKeyService, options) {\r\n        return new MenuImpl(id, this._hiddenStates, { emitEventsForSubmenuChanges: false, eventDebounceDelay: 50, ...options }, this._commandService, contextKeyService);\r\n    }\r\n    resetHiddenStates(ids) {\r\n        this._hiddenStates.reset(ids);\r\n    }\r\n};\r\nMenuService = __decorate([\r\n    __param(0, ICommandService),\r\n    __param(1, IStorageService)\r\n], MenuService);\r\nexport { MenuService };\r\nlet PersistedMenuHideState = PersistedMenuHideState_1 = class PersistedMenuHideState {\r\n    constructor(_storageService) {\r\n        this._storageService = _storageService;\r\n        this._disposables = new DisposableStore();\r\n        this._onDidChange = new Emitter();\r\n        this.onDidChange = this._onDidChange.event;\r\n        this._ignoreChangeEvent = false;\r\n        this._hiddenByDefaultCache = new Map();\r\n        try {\r\n            const raw = _storageService.get(PersistedMenuHideState_1._key, 0 /* StorageScope.PROFILE */, '{}');\r\n            this._data = JSON.parse(raw);\r\n        }\r\n        catch (err) {\r\n            this._data = Object.create(null);\r\n        }\r\n        this._disposables.add(_storageService.onDidChangeValue(0 /* StorageScope.PROFILE */, PersistedMenuHideState_1._key, this._disposables)(() => {\r\n            if (!this._ignoreChangeEvent) {\r\n                try {\r\n                    const raw = _storageService.get(PersistedMenuHideState_1._key, 0 /* StorageScope.PROFILE */, '{}');\r\n                    this._data = JSON.parse(raw);\r\n                }\r\n                catch (err) {\r\n                    console.log('FAILED to read storage after UPDATE', err);\r\n                }\r\n            }\r\n            this._onDidChange.fire();\r\n        }));\r\n    }\r\n    dispose() {\r\n        this._onDidChange.dispose();\r\n        this._disposables.dispose();\r\n    }\r\n    _isHiddenByDefault(menu, commandId) {\r\n        var _a;\r\n        return (_a = this._hiddenByDefaultCache.get(`${menu.id}/${commandId}`)) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    setDefaultState(menu, commandId, hidden) {\r\n        this._hiddenByDefaultCache.set(`${menu.id}/${commandId}`, hidden);\r\n    }\r\n    isHidden(menu, commandId) {\r\n        var _a, _b;\r\n        const hiddenByDefault = this._isHiddenByDefault(menu, commandId);\r\n        const state = (_b = (_a = this._data[menu.id]) === null || _a === void 0 ? void 0 : _a.includes(commandId)) !== null && _b !== void 0 ? _b : false;\r\n        return hiddenByDefault ? !state : state;\r\n    }\r\n    updateHidden(menu, commandId, hidden) {\r\n        const hiddenByDefault = this._isHiddenByDefault(menu, commandId);\r\n        if (hiddenByDefault) {\r\n            hidden = !hidden;\r\n        }\r\n        const entries = this._data[menu.id];\r\n        if (!hidden) {\r\n            // remove and cleanup\r\n            if (entries) {\r\n                const idx = entries.indexOf(commandId);\r\n                if (idx >= 0) {\r\n                    removeFastWithoutKeepingOrder(entries, idx);\r\n                }\r\n                if (entries.length === 0) {\r\n                    delete this._data[menu.id];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // add unless already added\r\n            if (!entries) {\r\n                this._data[menu.id] = [commandId];\r\n            }\r\n            else {\r\n                const idx = entries.indexOf(commandId);\r\n                if (idx < 0) {\r\n                    entries.push(commandId);\r\n                }\r\n            }\r\n        }\r\n        this._persist();\r\n    }\r\n    reset(menus) {\r\n        if (menus === undefined) {\r\n            // reset all\r\n            this._data = Object.create(null);\r\n            this._persist();\r\n        }\r\n        else {\r\n            // reset only for a specific menu\r\n            for (const { id } of menus) {\r\n                if (this._data[id]) {\r\n                    delete this._data[id];\r\n                }\r\n            }\r\n            this._persist();\r\n        }\r\n    }\r\n    _persist() {\r\n        try {\r\n            this._ignoreChangeEvent = true;\r\n            const raw = JSON.stringify(this._data);\r\n            this._storageService.store(PersistedMenuHideState_1._key, raw, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\r\n        }\r\n        finally {\r\n            this._ignoreChangeEvent = false;\r\n        }\r\n    }\r\n};\r\nPersistedMenuHideState._key = 'menu.hiddenCommands';\r\nPersistedMenuHideState = PersistedMenuHideState_1 = __decorate([\r\n    __param(0, IStorageService)\r\n], PersistedMenuHideState);\r\nlet MenuInfo = MenuInfo_1 = class MenuInfo {\r\n    constructor(_id, _hiddenStates, _collectContextKeysForSubmenus, _commandService, _contextKeyService) {\r\n        this._id = _id;\r\n        this._hiddenStates = _hiddenStates;\r\n        this._collectContextKeysForSubmenus = _collectContextKeysForSubmenus;\r\n        this._commandService = _commandService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._menuGroups = [];\r\n        this._structureContextKeys = new Set();\r\n        this._preconditionContextKeys = new Set();\r\n        this._toggledContextKeys = new Set();\r\n        this.refresh();\r\n    }\r\n    get structureContextKeys() {\r\n        return this._structureContextKeys;\r\n    }\r\n    get preconditionContextKeys() {\r\n        return this._preconditionContextKeys;\r\n    }\r\n    get toggledContextKeys() {\r\n        return this._toggledContextKeys;\r\n    }\r\n    refresh() {\r\n        // reset\r\n        this._menuGroups.length = 0;\r\n        this._structureContextKeys.clear();\r\n        this._preconditionContextKeys.clear();\r\n        this._toggledContextKeys.clear();\r\n        const menuItems = MenuRegistry.getMenuItems(this._id);\r\n        let group;\r\n        menuItems.sort(MenuInfo_1._compareMenuItems);\r\n        for (const item of menuItems) {\r\n            // group by groupId\r\n            const groupName = item.group || '';\r\n            if (!group || group[0] !== groupName) {\r\n                group = [groupName, []];\r\n                this._menuGroups.push(group);\r\n            }\r\n            group[1].push(item);\r\n            // keep keys for eventing\r\n            this._collectContextKeys(item);\r\n        }\r\n    }\r\n    _collectContextKeys(item) {\r\n        MenuInfo_1._fillInKbExprKeys(item.when, this._structureContextKeys);\r\n        if (isIMenuItem(item)) {\r\n            // keep precondition keys for event if applicable\r\n            if (item.command.precondition) {\r\n                MenuInfo_1._fillInKbExprKeys(item.command.precondition, this._preconditionContextKeys);\r\n            }\r\n            // keep toggled keys for event if applicable\r\n            if (item.command.toggled) {\r\n                const toggledExpression = item.command.toggled.condition || item.command.toggled;\r\n                MenuInfo_1._fillInKbExprKeys(toggledExpression, this._toggledContextKeys);\r\n            }\r\n        }\r\n        else if (this._collectContextKeysForSubmenus) {\r\n            // recursively collect context keys from submenus so that this\r\n            // menu fires events when context key changes affect submenus\r\n            MenuRegistry.getMenuItems(item.submenu).forEach(this._collectContextKeys, this);\r\n        }\r\n    }\r\n    createActionGroups(options) {\r\n        const result = [];\r\n        for (const group of this._menuGroups) {\r\n            const [id, items] = group;\r\n            const activeActions = [];\r\n            for (const item of items) {\r\n                if (this._contextKeyService.contextMatchesRules(item.when)) {\r\n                    const isMenuItem = isIMenuItem(item);\r\n                    if (isMenuItem) {\r\n                        this._hiddenStates.setDefaultState(this._id, item.command.id, !!item.isHiddenByDefault);\r\n                    }\r\n                    const menuHide = createMenuHide(this._id, isMenuItem ? item.command : item, this._hiddenStates);\r\n                    if (isMenuItem) {\r\n                        // MenuItemAction\r\n                        activeActions.push(new MenuItemAction(item.command, item.alt, options, menuHide, this._contextKeyService, this._commandService));\r\n                    }\r\n                    else {\r\n                        // SubmenuItemAction\r\n                        const groups = new MenuInfo_1(item.submenu, this._hiddenStates, this._collectContextKeysForSubmenus, this._commandService, this._contextKeyService).createActionGroups(options);\r\n                        const submenuActions = Separator.join(...groups.map(g => g[1]));\r\n                        if (submenuActions.length > 0) {\r\n                            activeActions.push(new SubmenuItemAction(item, menuHide, submenuActions));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (activeActions.length > 0) {\r\n                result.push([id, activeActions]);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    static _fillInKbExprKeys(exp, set) {\r\n        if (exp) {\r\n            for (const key of exp.keys()) {\r\n                set.add(key);\r\n            }\r\n        }\r\n    }\r\n    static _compareMenuItems(a, b) {\r\n        const aGroup = a.group;\r\n        const bGroup = b.group;\r\n        if (aGroup !== bGroup) {\r\n            // Falsy groups come last\r\n            if (!aGroup) {\r\n                return 1;\r\n            }\r\n            else if (!bGroup) {\r\n                return -1;\r\n            }\r\n            // 'navigation' group comes first\r\n            if (aGroup === 'navigation') {\r\n                return -1;\r\n            }\r\n            else if (bGroup === 'navigation') {\r\n                return 1;\r\n            }\r\n            // lexical sort for groups\r\n            const value = aGroup.localeCompare(bGroup);\r\n            if (value !== 0) {\r\n                return value;\r\n            }\r\n        }\r\n        // sort on priority - default is 0\r\n        const aPrio = a.order || 0;\r\n        const bPrio = b.order || 0;\r\n        if (aPrio < bPrio) {\r\n            return -1;\r\n        }\r\n        else if (aPrio > bPrio) {\r\n            return 1;\r\n        }\r\n        // sort on titles\r\n        return MenuInfo_1._compareTitles(isIMenuItem(a) ? a.command.title : a.title, isIMenuItem(b) ? b.command.title : b.title);\r\n    }\r\n    static _compareTitles(a, b) {\r\n        const aStr = typeof a === 'string' ? a : a.original;\r\n        const bStr = typeof b === 'string' ? b : b.original;\r\n        return aStr.localeCompare(bStr);\r\n    }\r\n};\r\nMenuInfo = MenuInfo_1 = __decorate([\r\n    __param(3, ICommandService),\r\n    __param(4, IContextKeyService)\r\n], MenuInfo);\r\nlet MenuImpl = class MenuImpl {\r\n    constructor(id, hiddenStates, options, commandService, contextKeyService) {\r\n        this._disposables = new DisposableStore();\r\n        this._menuInfo = new MenuInfo(id, hiddenStates, options.emitEventsForSubmenuChanges, commandService, contextKeyService);\r\n        // Rebuild this menu whenever the menu registry reports an event for this MenuId.\r\n        // This usually happen while code and extensions are loaded and affects the over\r\n        // structure of the menu\r\n        const rebuildMenuSoon = new RunOnceScheduler(() => {\r\n            this._menuInfo.refresh();\r\n            this._onDidChange.fire({ menu: this, isStructuralChange: true, isEnablementChange: true, isToggleChange: true });\r\n        }, options.eventDebounceDelay);\r\n        this._disposables.add(rebuildMenuSoon);\r\n        this._disposables.add(MenuRegistry.onDidChangeMenu(e => {\r\n            if (e.has(id)) {\r\n                rebuildMenuSoon.schedule();\r\n            }\r\n        }));\r\n        // When context keys or storage state changes we need to check if the menu also has changed. However,\r\n        // we only do that when someone listens on this menu because (1) these events are\r\n        // firing often and (2) menu are often leaked\r\n        const lazyListener = this._disposables.add(new DisposableStore());\r\n        const merge = (events) => {\r\n            let isStructuralChange = false;\r\n            let isEnablementChange = false;\r\n            let isToggleChange = false;\r\n            for (const item of events) {\r\n                isStructuralChange = isStructuralChange || item.isStructuralChange;\r\n                isEnablementChange = isEnablementChange || item.isEnablementChange;\r\n                isToggleChange = isToggleChange || item.isToggleChange;\r\n                if (isStructuralChange && isEnablementChange && isToggleChange) {\r\n                    // everything is TRUE, no need to continue iterating\r\n                    break;\r\n                }\r\n            }\r\n            return { menu: this, isStructuralChange, isEnablementChange, isToggleChange };\r\n        };\r\n        const startLazyListener = () => {\r\n            lazyListener.add(contextKeyService.onDidChangeContext(e => {\r\n                const isStructuralChange = e.affectsSome(this._menuInfo.structureContextKeys);\r\n                const isEnablementChange = e.affectsSome(this._menuInfo.preconditionContextKeys);\r\n                const isToggleChange = e.affectsSome(this._menuInfo.toggledContextKeys);\r\n                if (isStructuralChange || isEnablementChange || isToggleChange) {\r\n                    this._onDidChange.fire({ menu: this, isStructuralChange, isEnablementChange, isToggleChange });\r\n                }\r\n            }));\r\n            lazyListener.add(hiddenStates.onDidChange(e => {\r\n                this._onDidChange.fire({ menu: this, isStructuralChange: true, isEnablementChange: false, isToggleChange: false });\r\n            }));\r\n        };\r\n        this._onDidChange = new DebounceEmitter({\r\n            // start/stop context key listener\r\n            onWillAddFirstListener: startLazyListener,\r\n            onDidRemoveLastListener: lazyListener.clear.bind(lazyListener),\r\n            delay: options.eventDebounceDelay,\r\n            merge\r\n        });\r\n        this.onDidChange = this._onDidChange.event;\r\n    }\r\n    getActions(options) {\r\n        return this._menuInfo.createActionGroups(options);\r\n    }\r\n    dispose() {\r\n        this._disposables.dispose();\r\n        this._onDidChange.dispose();\r\n    }\r\n};\r\nMenuImpl = __decorate([\r\n    __param(3, ICommandService),\r\n    __param(4, IContextKeyService)\r\n], MenuImpl);\r\nfunction createMenuHide(menu, command, states) {\r\n    const id = isISubmenuItem(command) ? command.submenu.id : command.id;\r\n    const title = typeof command.title === 'string' ? command.title : command.title.value;\r\n    const hide = toAction({\r\n        id: `hide/${menu.id}/${id}`,\r\n        label: localize('hide.label', 'Hide \\'{0}\\'', title),\r\n        run() { states.updateHidden(menu, id, true); }\r\n    });\r\n    const toggle = toAction({\r\n        id: `toggle/${menu.id}/${id}`,\r\n        label: title,\r\n        get checked() { return !states.isHidden(menu, id); },\r\n        run() { states.updateHidden(menu, id, !!this.checked); }\r\n    });\r\n    return {\r\n        hide,\r\n        toggle,\r\n        get isHidden() { return !toggle.checked; },\r\n    };\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { isSafari, isWebkitWebView } from '../../../base/browser/browser.js';\r\nimport { $, addDisposableListener, getActiveDocument } from '../../../base/browser/dom.js';\r\nimport { DeferredPromise } from '../../../base/common/async.js';\r\nimport { Event } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\r\nimport { ILogService } from '../../log/common/log.js';\r\nlet BrowserClipboardService = class BrowserClipboardService extends Disposable {\r\n    constructor(layoutService, logService) {\r\n        super();\r\n        this.layoutService = layoutService;\r\n        this.logService = logService;\r\n        this.mapTextToType = new Map(); // unsupported in web (only in-memory)\r\n        this.findText = ''; // unsupported in web (only in-memory)\r\n        this.resources = []; // unsupported in web (only in-memory)\r\n        if (isSafari || isWebkitWebView) {\r\n            this.installWebKitWriteTextWorkaround();\r\n        }\r\n    }\r\n    // In Safari, it has the following note:\r\n    //\r\n    // \"The request to write to the clipboard must be triggered during a user gesture.\r\n    // A call to clipboard.write or clipboard.writeText outside the scope of a user\r\n    // gesture(such as \"click\" or \"touch\" event handlers) will result in the immediate\r\n    // rejection of the promise returned by the API call.\"\r\n    // From: https://webkit.org/blog/10855/async-clipboard-api/\r\n    //\r\n    // Since extensions run in a web worker, and handle gestures in an asynchronous way,\r\n    // they are not classified by Safari as \"in response to a user gesture\" and will reject.\r\n    //\r\n    // This function sets up some handlers to work around that behavior.\r\n    installWebKitWriteTextWorkaround() {\r\n        const handler = () => {\r\n            const currentWritePromise = new DeferredPromise();\r\n            // Cancel the previous promise since we just created a new one in response to this new event\r\n            if (this.webKitPendingClipboardWritePromise && !this.webKitPendingClipboardWritePromise.isSettled) {\r\n                this.webKitPendingClipboardWritePromise.cancel();\r\n            }\r\n            this.webKitPendingClipboardWritePromise = currentWritePromise;\r\n            // The ctor of ClipboardItem allows you to pass in a promise that will resolve to a string.\r\n            // This allows us to pass in a Promise that will either be cancelled by another event or\r\n            // resolved with the contents of the first call to this.writeText.\r\n            // see https://developer.mozilla.org/en-US/docs/Web/API/ClipboardItem/ClipboardItem#parameters\r\n            navigator.clipboard.write([new ClipboardItem({\r\n                    'text/plain': currentWritePromise.p,\r\n                })]).catch(async (err) => {\r\n                if (!(err instanceof Error) || err.name !== 'NotAllowedError' || !currentWritePromise.isRejected) {\r\n                    this.logService.error(err);\r\n                }\r\n            });\r\n        };\r\n        this._register(Event.runAndSubscribe(this.layoutService.onDidAddContainer, ({ container, disposables }) => {\r\n            disposables.add(addDisposableListener(container, 'click', handler));\r\n            disposables.add(addDisposableListener(container, 'keydown', handler));\r\n        }, { container: this.layoutService.mainContainer, disposables: this._store }));\r\n    }\r\n    async writeText(text, type) {\r\n        // With type: only in-memory is supported\r\n        if (type) {\r\n            this.mapTextToType.set(type, text);\r\n            return;\r\n        }\r\n        if (this.webKitPendingClipboardWritePromise) {\r\n            // For Safari, we complete this Promise which allows the call to `navigator.clipboard.write()`\r\n            // above to resolve and successfully copy to the clipboard. If we let this continue, Safari\r\n            // would throw an error because this call stack doesn't appear to originate from a user gesture.\r\n            return this.webKitPendingClipboardWritePromise.complete(text);\r\n        }\r\n        // Guard access to navigator.clipboard with try/catch\r\n        // as we have seen DOMExceptions in certain browsers\r\n        // due to security policies.\r\n        try {\r\n            return await navigator.clipboard.writeText(text);\r\n        }\r\n        catch (error) {\r\n            console.error(error);\r\n        }\r\n        // Fallback to textarea and execCommand solution\r\n        const activeDocument = getActiveDocument();\r\n        const activeElement = activeDocument.activeElement;\r\n        const textArea = activeDocument.body.appendChild($('textarea', { 'aria-hidden': true }));\r\n        textArea.style.height = '1px';\r\n        textArea.style.width = '1px';\r\n        textArea.style.position = 'absolute';\r\n        textArea.value = text;\r\n        textArea.focus();\r\n        textArea.select();\r\n        activeDocument.execCommand('copy');\r\n        if (activeElement instanceof HTMLElement) {\r\n            activeElement.focus();\r\n        }\r\n        activeDocument.body.removeChild(textArea);\r\n        return;\r\n    }\r\n    async readText(type) {\r\n        // With type: only in-memory is supported\r\n        if (type) {\r\n            return this.mapTextToType.get(type) || '';\r\n        }\r\n        // Guard access to navigator.clipboard with try/catch\r\n        // as we have seen DOMExceptions in certain browsers\r\n        // due to security policies.\r\n        try {\r\n            return await navigator.clipboard.readText();\r\n        }\r\n        catch (error) {\r\n            console.error(error);\r\n            return '';\r\n        }\r\n    }\r\n    async readFindText() {\r\n        return this.findText;\r\n    }\r\n    async writeFindText(text) {\r\n        this.findText = text;\r\n    }\r\n    async writeResources(resources) {\r\n        this.resources = resources;\r\n    }\r\n    async readResources() {\r\n        return this.resources;\r\n    }\r\n};\r\nBrowserClipboardService = __decorate([\r\n    __param(0, ILayoutService),\r\n    __param(1, ILogService)\r\n], BrowserClipboardService);\r\nexport { BrowserClipboardService };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { PauseableEmitter } from '../../../base/common/event.js';\r\nimport { Iterable } from '../../../base/common/iterator.js';\r\nimport { Disposable, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { cloneAndChange } from '../../../base/common/objects.js';\r\nimport { TernarySearchTree } from '../../../base/common/ternarySearchTree.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { localize } from '../../../nls.js';\r\nimport { CommandsRegistry } from '../../commands/common/commands.js';\r\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\r\nimport { IContextKeyService, RawContextKey } from '../common/contextkey.js';\r\nconst KEYBINDING_CONTEXT_ATTR = 'data-keybinding-context';\r\nexport class Context {\r\n    constructor(id, parent) {\r\n        this._id = id;\r\n        this._parent = parent;\r\n        this._value = Object.create(null);\r\n        this._value['_contextId'] = id;\r\n    }\r\n    get value() {\r\n        return { ...this._value };\r\n    }\r\n    setValue(key, value) {\r\n        // console.log('SET ' + key + ' = ' + value + ' ON ' + this._id);\r\n        if (this._value[key] !== value) {\r\n            this._value[key] = value;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    removeValue(key) {\r\n        // console.log('REMOVE ' + key + ' FROM ' + this._id);\r\n        if (key in this._value) {\r\n            delete this._value[key];\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    getValue(key) {\r\n        const ret = this._value[key];\r\n        if (typeof ret === 'undefined' && this._parent) {\r\n            return this._parent.getValue(key);\r\n        }\r\n        return ret;\r\n    }\r\n}\r\nclass NullContext extends Context {\r\n    constructor() {\r\n        super(-1, null);\r\n    }\r\n    setValue(key, value) {\r\n        return false;\r\n    }\r\n    removeValue(key) {\r\n        return false;\r\n    }\r\n    getValue(key) {\r\n        return undefined;\r\n    }\r\n}\r\nNullContext.INSTANCE = new NullContext();\r\nclass ConfigAwareContextValuesContainer extends Context {\r\n    constructor(id, _configurationService, emitter) {\r\n        super(id, null);\r\n        this._configurationService = _configurationService;\r\n        this._values = TernarySearchTree.forConfigKeys();\r\n        this._listener = this._configurationService.onDidChangeConfiguration(event => {\r\n            if (event.source === 7 /* ConfigurationTarget.DEFAULT */) {\r\n                // new setting, reset everything\r\n                const allKeys = Array.from(this._values, ([k]) => k);\r\n                this._values.clear();\r\n                emitter.fire(new ArrayContextKeyChangeEvent(allKeys));\r\n            }\r\n            else {\r\n                const changedKeys = [];\r\n                for (const configKey of event.affectedKeys) {\r\n                    const contextKey = `config.${configKey}`;\r\n                    const cachedItems = this._values.findSuperstr(contextKey);\r\n                    if (cachedItems !== undefined) {\r\n                        changedKeys.push(...Iterable.map(cachedItems, ([key]) => key));\r\n                        this._values.deleteSuperstr(contextKey);\r\n                    }\r\n                    if (this._values.has(contextKey)) {\r\n                        changedKeys.push(contextKey);\r\n                        this._values.delete(contextKey);\r\n                    }\r\n                }\r\n                emitter.fire(new ArrayContextKeyChangeEvent(changedKeys));\r\n            }\r\n        });\r\n    }\r\n    dispose() {\r\n        this._listener.dispose();\r\n    }\r\n    getValue(key) {\r\n        if (key.indexOf(ConfigAwareContextValuesContainer._keyPrefix) !== 0) {\r\n            return super.getValue(key);\r\n        }\r\n        if (this._values.has(key)) {\r\n            return this._values.get(key);\r\n        }\r\n        const configKey = key.substr(ConfigAwareContextValuesContainer._keyPrefix.length);\r\n        const configValue = this._configurationService.getValue(configKey);\r\n        let value = undefined;\r\n        switch (typeof configValue) {\r\n            case 'number':\r\n            case 'boolean':\r\n            case 'string':\r\n                value = configValue;\r\n                break;\r\n            default:\r\n                if (Array.isArray(configValue)) {\r\n                    value = JSON.stringify(configValue);\r\n                }\r\n                else {\r\n                    value = configValue;\r\n                }\r\n        }\r\n        this._values.set(key, value);\r\n        return value;\r\n    }\r\n    setValue(key, value) {\r\n        return super.setValue(key, value);\r\n    }\r\n    removeValue(key) {\r\n        return super.removeValue(key);\r\n    }\r\n}\r\nConfigAwareContextValuesContainer._keyPrefix = 'config.';\r\nclass ContextKey {\r\n    constructor(service, key, defaultValue) {\r\n        this._service = service;\r\n        this._key = key;\r\n        this._defaultValue = defaultValue;\r\n        this.reset();\r\n    }\r\n    set(value) {\r\n        this._service.setContext(this._key, value);\r\n    }\r\n    reset() {\r\n        if (typeof this._defaultValue === 'undefined') {\r\n            this._service.removeContext(this._key);\r\n        }\r\n        else {\r\n            this._service.setContext(this._key, this._defaultValue);\r\n        }\r\n    }\r\n    get() {\r\n        return this._service.getContextKeyValue(this._key);\r\n    }\r\n}\r\nclass SimpleContextKeyChangeEvent {\r\n    constructor(key) {\r\n        this.key = key;\r\n    }\r\n    affectsSome(keys) {\r\n        return keys.has(this.key);\r\n    }\r\n    allKeysContainedIn(keys) {\r\n        return this.affectsSome(keys);\r\n    }\r\n}\r\nclass ArrayContextKeyChangeEvent {\r\n    constructor(keys) {\r\n        this.keys = keys;\r\n    }\r\n    affectsSome(keys) {\r\n        for (const key of this.keys) {\r\n            if (keys.has(key)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    allKeysContainedIn(keys) {\r\n        return this.keys.every(key => keys.has(key));\r\n    }\r\n}\r\nclass CompositeContextKeyChangeEvent {\r\n    constructor(events) {\r\n        this.events = events;\r\n    }\r\n    affectsSome(keys) {\r\n        for (const e of this.events) {\r\n            if (e.affectsSome(keys)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    allKeysContainedIn(keys) {\r\n        return this.events.every(evt => evt.allKeysContainedIn(keys));\r\n    }\r\n}\r\nfunction allEventKeysInContext(event, context) {\r\n    return event.allKeysContainedIn(new Set(Object.keys(context)));\r\n}\r\nexport class AbstractContextKeyService extends Disposable {\r\n    constructor(myContextId) {\r\n        super();\r\n        this._onDidChangeContext = this._register(new PauseableEmitter({ merge: input => new CompositeContextKeyChangeEvent(input) }));\r\n        this.onDidChangeContext = this._onDidChangeContext.event;\r\n        this._isDisposed = false;\r\n        this._myContextId = myContextId;\r\n    }\r\n    createKey(key, defaultValue) {\r\n        if (this._isDisposed) {\r\n            throw new Error(`AbstractContextKeyService has been disposed`);\r\n        }\r\n        return new ContextKey(this, key, defaultValue);\r\n    }\r\n    bufferChangeEvents(callback) {\r\n        this._onDidChangeContext.pause();\r\n        try {\r\n            callback();\r\n        }\r\n        finally {\r\n            this._onDidChangeContext.resume();\r\n        }\r\n    }\r\n    createScoped(domNode) {\r\n        if (this._isDisposed) {\r\n            throw new Error(`AbstractContextKeyService has been disposed`);\r\n        }\r\n        return new ScopedContextKeyService(this, domNode);\r\n    }\r\n    contextMatchesRules(rules) {\r\n        if (this._isDisposed) {\r\n            throw new Error(`AbstractContextKeyService has been disposed`);\r\n        }\r\n        const context = this.getContextValuesContainer(this._myContextId);\r\n        const result = (rules ? rules.evaluate(context) : true);\r\n        // console.group(rules.serialize() + ' -> ' + result);\r\n        // rules.keys().forEach(key => { console.log(key, ctx[key]); });\r\n        // console.groupEnd();\r\n        return result;\r\n    }\r\n    getContextKeyValue(key) {\r\n        if (this._isDisposed) {\r\n            return undefined;\r\n        }\r\n        return this.getContextValuesContainer(this._myContextId).getValue(key);\r\n    }\r\n    setContext(key, value) {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        const myContext = this.getContextValuesContainer(this._myContextId);\r\n        if (!myContext) {\r\n            return;\r\n        }\r\n        if (myContext.setValue(key, value)) {\r\n            this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\r\n        }\r\n    }\r\n    removeContext(key) {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        if (this.getContextValuesContainer(this._myContextId).removeValue(key)) {\r\n            this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\r\n        }\r\n    }\r\n    getContext(target) {\r\n        if (this._isDisposed) {\r\n            return NullContext.INSTANCE;\r\n        }\r\n        return this.getContextValuesContainer(findContextAttr(target));\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._isDisposed = true;\r\n    }\r\n}\r\nlet ContextKeyService = class ContextKeyService extends AbstractContextKeyService {\r\n    constructor(configurationService) {\r\n        super(0);\r\n        this._contexts = new Map();\r\n        this._lastContextId = 0;\r\n        const myContext = this._register(new ConfigAwareContextValuesContainer(this._myContextId, configurationService, this._onDidChangeContext));\r\n        this._contexts.set(this._myContextId, myContext);\r\n        // Uncomment this to see the contexts continuously logged\r\n        // let lastLoggedValue: string | null = null;\r\n        // setInterval(() => {\r\n        // \tlet values = Object.keys(this._contexts).map((key) => this._contexts[key]);\r\n        // \tlet logValue = values.map(v => JSON.stringify(v._value, null, '\\t')).join('\\n');\r\n        // \tif (lastLoggedValue !== logValue) {\r\n        // \t\tlastLoggedValue = logValue;\r\n        // \t\tconsole.log(lastLoggedValue);\r\n        // \t}\r\n        // }, 2000);\r\n    }\r\n    getContextValuesContainer(contextId) {\r\n        if (this._isDisposed) {\r\n            return NullContext.INSTANCE;\r\n        }\r\n        return this._contexts.get(contextId) || NullContext.INSTANCE;\r\n    }\r\n    createChildContext(parentContextId = this._myContextId) {\r\n        if (this._isDisposed) {\r\n            throw new Error(`ContextKeyService has been disposed`);\r\n        }\r\n        const id = (++this._lastContextId);\r\n        this._contexts.set(id, new Context(id, this.getContextValuesContainer(parentContextId)));\r\n        return id;\r\n    }\r\n    disposeContext(contextId) {\r\n        if (!this._isDisposed) {\r\n            this._contexts.delete(contextId);\r\n        }\r\n    }\r\n};\r\nContextKeyService = __decorate([\r\n    __param(0, IConfigurationService)\r\n], ContextKeyService);\r\nexport { ContextKeyService };\r\nclass ScopedContextKeyService extends AbstractContextKeyService {\r\n    constructor(parent, domNode) {\r\n        super(parent.createChildContext());\r\n        this._parentChangeListener = this._register(new MutableDisposable());\r\n        this._parent = parent;\r\n        this._updateParentChangeListener();\r\n        this._domNode = domNode;\r\n        if (this._domNode.hasAttribute(KEYBINDING_CONTEXT_ATTR)) {\r\n            let extraInfo = '';\r\n            if (this._domNode.classList) {\r\n                extraInfo = Array.from(this._domNode.classList.values()).join(', ');\r\n            }\r\n            console.error(`Element already has context attribute${extraInfo ? ': ' + extraInfo : ''}`);\r\n        }\r\n        this._domNode.setAttribute(KEYBINDING_CONTEXT_ATTR, String(this._myContextId));\r\n    }\r\n    _updateParentChangeListener() {\r\n        // Forward parent events to this listener. Parent will change.\r\n        this._parentChangeListener.value = this._parent.onDidChangeContext(e => {\r\n            const thisContainer = this._parent.getContextValuesContainer(this._myContextId);\r\n            const thisContextValues = thisContainer.value;\r\n            if (!allEventKeysInContext(e, thisContextValues)) {\r\n                this._onDidChangeContext.fire(e);\r\n            }\r\n        });\r\n    }\r\n    dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        this._parent.disposeContext(this._myContextId);\r\n        this._domNode.removeAttribute(KEYBINDING_CONTEXT_ATTR);\r\n        super.dispose();\r\n    }\r\n    getContextValuesContainer(contextId) {\r\n        if (this._isDisposed) {\r\n            return NullContext.INSTANCE;\r\n        }\r\n        return this._parent.getContextValuesContainer(contextId);\r\n    }\r\n    createChildContext(parentContextId = this._myContextId) {\r\n        if (this._isDisposed) {\r\n            throw new Error(`ScopedContextKeyService has been disposed`);\r\n        }\r\n        return this._parent.createChildContext(parentContextId);\r\n    }\r\n    disposeContext(contextId) {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n        this._parent.disposeContext(contextId);\r\n    }\r\n}\r\nfunction findContextAttr(domNode) {\r\n    while (domNode) {\r\n        if (domNode.hasAttribute(KEYBINDING_CONTEXT_ATTR)) {\r\n            const attr = domNode.getAttribute(KEYBINDING_CONTEXT_ATTR);\r\n            if (attr) {\r\n                return parseInt(attr, 10);\r\n            }\r\n            return NaN;\r\n        }\r\n        domNode = domNode.parentElement;\r\n    }\r\n    return 0;\r\n}\r\nexport function setContext(accessor, contextKey, contextValue) {\r\n    const contextKeyService = accessor.get(IContextKeyService);\r\n    contextKeyService.createKey(String(contextKey), stringifyURIs(contextValue));\r\n}\r\nfunction stringifyURIs(contextValue) {\r\n    return cloneAndChange(contextValue, (obj) => {\r\n        if (typeof obj === 'object' && obj.$mid === 1 /* MarshalledId.Uri */) {\r\n            return URI.revive(obj).toString();\r\n        }\r\n        if (obj instanceof URI) {\r\n            return obj.toString();\r\n        }\r\n        return undefined;\r\n    });\r\n}\r\nCommandsRegistry.registerCommand('_setContext', setContext);\r\nCommandsRegistry.registerCommand({\r\n    id: 'getContextKeyInfo',\r\n    handler() {\r\n        return [...RawContextKey.all()].sort((a, b) => a.key.localeCompare(b.key));\r\n    },\r\n    metadata: {\r\n        description: localize('getContextKeyInfo', \"A command that returns information about context keys\"),\r\n        args: []\r\n    }\r\n});\r\nCommandsRegistry.registerCommand('_generateContextKeyInfo', function () {\r\n    const result = [];\r\n    const seen = new Set();\r\n    for (const info of RawContextKey.all()) {\r\n        if (!seen.has(info.key)) {\r\n            seen.add(info.key);\r\n            result.push(info);\r\n        }\r\n    }\r\n    result.sort((a, b) => a.key.localeCompare(b.key));\r\n    console.log(JSON.stringify(result, undefined, 2));\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport class Node {\r\n    constructor(key, data) {\r\n        this.key = key;\r\n        this.data = data;\r\n        this.incoming = new Map();\r\n        this.outgoing = new Map();\r\n    }\r\n}\r\nexport class Graph {\r\n    constructor(_hashFn) {\r\n        this._hashFn = _hashFn;\r\n        this._nodes = new Map();\r\n        // empty\r\n    }\r\n    roots() {\r\n        const ret = [];\r\n        for (const node of this._nodes.values()) {\r\n            if (node.outgoing.size === 0) {\r\n                ret.push(node);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    insertEdge(from, to) {\r\n        const fromNode = this.lookupOrInsertNode(from);\r\n        const toNode = this.lookupOrInsertNode(to);\r\n        fromNode.outgoing.set(toNode.key, toNode);\r\n        toNode.incoming.set(fromNode.key, fromNode);\r\n    }\r\n    removeNode(data) {\r\n        const key = this._hashFn(data);\r\n        this._nodes.delete(key);\r\n        for (const node of this._nodes.values()) {\r\n            node.outgoing.delete(key);\r\n            node.incoming.delete(key);\r\n        }\r\n    }\r\n    lookupOrInsertNode(data) {\r\n        const key = this._hashFn(data);\r\n        let node = this._nodes.get(key);\r\n        if (!node) {\r\n            node = new Node(key, data);\r\n            this._nodes.set(key, node);\r\n        }\r\n        return node;\r\n    }\r\n    isEmpty() {\r\n        return this._nodes.size === 0;\r\n    }\r\n    toString() {\r\n        const data = [];\r\n        for (const [key, value] of this._nodes) {\r\n            data.push(`${key}\\n\\t(-> incoming)[${[...value.incoming.keys()].join(', ')}]\\n\\t(outgoing ->)[${[...value.outgoing.keys()].join(',')}]\\n`);\r\n        }\r\n        return data.join('\\n');\r\n    }\r\n    /**\r\n     * This is brute force and slow and **only** be used\r\n     * to trouble shoot.\r\n     */\r\n    findCycleSlow() {\r\n        for (const [id, node] of this._nodes) {\r\n            const seen = new Set([id]);\r\n            const res = this._findCycle(node, seen);\r\n            if (res) {\r\n                return res;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    _findCycle(node, seen) {\r\n        for (const [id, outgoing] of node.outgoing) {\r\n            if (seen.has(id)) {\r\n                return [...seen, id].join(' -> ');\r\n            }\r\n            seen.add(id);\r\n            const value = this._findCycle(outgoing, seen);\r\n            if (value) {\r\n                return value;\r\n            }\r\n            seen.delete(id);\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { GlobalIdleValue } from '../../../base/common/async.js';\r\nimport { illegalState } from '../../../base/common/errors.js';\r\nimport { toDisposable } from '../../../base/common/lifecycle.js';\r\nimport { SyncDescriptor } from './descriptors.js';\r\nimport { Graph } from './graph.js';\r\nimport { IInstantiationService, _util } from './instantiation.js';\r\nimport { ServiceCollection } from './serviceCollection.js';\r\nimport { LinkedList } from '../../../base/common/linkedList.js';\r\n// TRACING\r\nconst _enableAllTracing = false;\r\nclass CyclicDependencyError extends Error {\r\n    constructor(graph) {\r\n        var _a;\r\n        super('cyclic dependency between services');\r\n        this.message = (_a = graph.findCycleSlow()) !== null && _a !== void 0 ? _a : `UNABLE to detect cycle, dumping graph: \\n${graph.toString()}`;\r\n    }\r\n}\r\nexport class InstantiationService {\r\n    constructor(_services = new ServiceCollection(), _strict = false, _parent, _enableTracing = _enableAllTracing) {\r\n        var _a;\r\n        this._services = _services;\r\n        this._strict = _strict;\r\n        this._parent = _parent;\r\n        this._enableTracing = _enableTracing;\r\n        this._activeInstantiations = new Set();\r\n        this._services.set(IInstantiationService, this);\r\n        this._globalGraph = _enableTracing ? (_a = _parent === null || _parent === void 0 ? void 0 : _parent._globalGraph) !== null && _a !== void 0 ? _a : new Graph(e => e) : undefined;\r\n    }\r\n    createChild(services) {\r\n        return new InstantiationService(services, this._strict, this, this._enableTracing);\r\n    }\r\n    invokeFunction(fn, ...args) {\r\n        const _trace = Trace.traceInvocation(this._enableTracing, fn);\r\n        let _done = false;\r\n        try {\r\n            const accessor = {\r\n                get: (id) => {\r\n                    if (_done) {\r\n                        throw illegalState('service accessor is only valid during the invocation of its target method');\r\n                    }\r\n                    const result = this._getOrCreateServiceInstance(id, _trace);\r\n                    if (!result) {\r\n                        throw new Error(`[invokeFunction] unknown service '${id}'`);\r\n                    }\r\n                    return result;\r\n                }\r\n            };\r\n            return fn(accessor, ...args);\r\n        }\r\n        finally {\r\n            _done = true;\r\n            _trace.stop();\r\n        }\r\n    }\r\n    createInstance(ctorOrDescriptor, ...rest) {\r\n        let _trace;\r\n        let result;\r\n        if (ctorOrDescriptor instanceof SyncDescriptor) {\r\n            _trace = Trace.traceCreation(this._enableTracing, ctorOrDescriptor.ctor);\r\n            result = this._createInstance(ctorOrDescriptor.ctor, ctorOrDescriptor.staticArguments.concat(rest), _trace);\r\n        }\r\n        else {\r\n            _trace = Trace.traceCreation(this._enableTracing, ctorOrDescriptor);\r\n            result = this._createInstance(ctorOrDescriptor, rest, _trace);\r\n        }\r\n        _trace.stop();\r\n        return result;\r\n    }\r\n    _createInstance(ctor, args = [], _trace) {\r\n        // arguments defined by service decorators\r\n        const serviceDependencies = _util.getServiceDependencies(ctor).sort((a, b) => a.index - b.index);\r\n        const serviceArgs = [];\r\n        for (const dependency of serviceDependencies) {\r\n            const service = this._getOrCreateServiceInstance(dependency.id, _trace);\r\n            if (!service) {\r\n                this._throwIfStrict(`[createInstance] ${ctor.name} depends on UNKNOWN service ${dependency.id}.`, false);\r\n            }\r\n            serviceArgs.push(service);\r\n        }\r\n        const firstServiceArgPos = serviceDependencies.length > 0 ? serviceDependencies[0].index : args.length;\r\n        // check for argument mismatches, adjust static args if needed\r\n        if (args.length !== firstServiceArgPos) {\r\n            console.trace(`[createInstance] First service dependency of ${ctor.name} at position ${firstServiceArgPos + 1} conflicts with ${args.length} static arguments`);\r\n            const delta = firstServiceArgPos - args.length;\r\n            if (delta > 0) {\r\n                args = args.concat(new Array(delta));\r\n            }\r\n            else {\r\n                args = args.slice(0, firstServiceArgPos);\r\n            }\r\n        }\r\n        // now create the instance\r\n        return Reflect.construct(ctor, args.concat(serviceArgs));\r\n    }\r\n    _setServiceInstance(id, instance) {\r\n        if (this._services.get(id) instanceof SyncDescriptor) {\r\n            this._services.set(id, instance);\r\n        }\r\n        else if (this._parent) {\r\n            this._parent._setServiceInstance(id, instance);\r\n        }\r\n        else {\r\n            throw new Error('illegalState - setting UNKNOWN service instance');\r\n        }\r\n    }\r\n    _getServiceInstanceOrDescriptor(id) {\r\n        const instanceOrDesc = this._services.get(id);\r\n        if (!instanceOrDesc && this._parent) {\r\n            return this._parent._getServiceInstanceOrDescriptor(id);\r\n        }\r\n        else {\r\n            return instanceOrDesc;\r\n        }\r\n    }\r\n    _getOrCreateServiceInstance(id, _trace) {\r\n        if (this._globalGraph && this._globalGraphImplicitDependency) {\r\n            this._globalGraph.insertEdge(this._globalGraphImplicitDependency, String(id));\r\n        }\r\n        const thing = this._getServiceInstanceOrDescriptor(id);\r\n        if (thing instanceof SyncDescriptor) {\r\n            return this._safeCreateAndCacheServiceInstance(id, thing, _trace.branch(id, true));\r\n        }\r\n        else {\r\n            _trace.branch(id, false);\r\n            return thing;\r\n        }\r\n    }\r\n    _safeCreateAndCacheServiceInstance(id, desc, _trace) {\r\n        if (this._activeInstantiations.has(id)) {\r\n            throw new Error(`illegal state - RECURSIVELY instantiating service '${id}'`);\r\n        }\r\n        this._activeInstantiations.add(id);\r\n        try {\r\n            return this._createAndCacheServiceInstance(id, desc, _trace);\r\n        }\r\n        finally {\r\n            this._activeInstantiations.delete(id);\r\n        }\r\n    }\r\n    _createAndCacheServiceInstance(id, desc, _trace) {\r\n        var _a;\r\n        const graph = new Graph(data => data.id.toString());\r\n        let cycleCount = 0;\r\n        const stack = [{ id, desc, _trace }];\r\n        while (stack.length) {\r\n            const item = stack.pop();\r\n            graph.lookupOrInsertNode(item);\r\n            // a weak but working heuristic for cycle checks\r\n            if (cycleCount++ > 1000) {\r\n                throw new CyclicDependencyError(graph);\r\n            }\r\n            // check all dependencies for existence and if they need to be created first\r\n            for (const dependency of _util.getServiceDependencies(item.desc.ctor)) {\r\n                const instanceOrDesc = this._getServiceInstanceOrDescriptor(dependency.id);\r\n                if (!instanceOrDesc) {\r\n                    this._throwIfStrict(`[createInstance] ${id} depends on ${dependency.id} which is NOT registered.`, true);\r\n                }\r\n                // take note of all service dependencies\r\n                (_a = this._globalGraph) === null || _a === void 0 ? void 0 : _a.insertEdge(String(item.id), String(dependency.id));\r\n                if (instanceOrDesc instanceof SyncDescriptor) {\r\n                    const d = { id: dependency.id, desc: instanceOrDesc, _trace: item._trace.branch(dependency.id, true) };\r\n                    graph.insertEdge(item, d);\r\n                    stack.push(d);\r\n                }\r\n            }\r\n        }\r\n        while (true) {\r\n            const roots = graph.roots();\r\n            // if there is no more roots but still\r\n            // nodes in the graph we have a cycle\r\n            if (roots.length === 0) {\r\n                if (!graph.isEmpty()) {\r\n                    throw new CyclicDependencyError(graph);\r\n                }\r\n                break;\r\n            }\r\n            for (const { data } of roots) {\r\n                // Repeat the check for this still being a service sync descriptor. That's because\r\n                // instantiating a dependency might have side-effect and recursively trigger instantiation\r\n                // so that some dependencies are now fullfilled already.\r\n                const instanceOrDesc = this._getServiceInstanceOrDescriptor(data.id);\r\n                if (instanceOrDesc instanceof SyncDescriptor) {\r\n                    // create instance and overwrite the service collections\r\n                    const instance = this._createServiceInstanceWithOwner(data.id, data.desc.ctor, data.desc.staticArguments, data.desc.supportsDelayedInstantiation, data._trace);\r\n                    this._setServiceInstance(data.id, instance);\r\n                }\r\n                graph.removeNode(data);\r\n            }\r\n        }\r\n        return this._getServiceInstanceOrDescriptor(id);\r\n    }\r\n    _createServiceInstanceWithOwner(id, ctor, args = [], supportsDelayedInstantiation, _trace) {\r\n        if (this._services.get(id) instanceof SyncDescriptor) {\r\n            return this._createServiceInstance(id, ctor, args, supportsDelayedInstantiation, _trace);\r\n        }\r\n        else if (this._parent) {\r\n            return this._parent._createServiceInstanceWithOwner(id, ctor, args, supportsDelayedInstantiation, _trace);\r\n        }\r\n        else {\r\n            throw new Error(`illegalState - creating UNKNOWN service instance ${ctor.name}`);\r\n        }\r\n    }\r\n    _createServiceInstance(id, ctor, args = [], supportsDelayedInstantiation, _trace) {\r\n        if (!supportsDelayedInstantiation) {\r\n            // eager instantiation\r\n            return this._createInstance(ctor, args, _trace);\r\n        }\r\n        else {\r\n            const child = new InstantiationService(undefined, this._strict, this, this._enableTracing);\r\n            child._globalGraphImplicitDependency = String(id);\r\n            // Return a proxy object that's backed by an idle value. That\r\n            // strategy is to instantiate services in our idle time or when actually\r\n            // needed but not when injected into a consumer\r\n            // return \"empty events\" when the service isn't instantiated yet\r\n            const earlyListeners = new Map();\r\n            const idle = new GlobalIdleValue(() => {\r\n                const result = child._createInstance(ctor, args, _trace);\r\n                // early listeners that we kept are now being subscribed to\r\n                // the real service\r\n                for (const [key, values] of earlyListeners) {\r\n                    const candidate = result[key];\r\n                    if (typeof candidate === 'function') {\r\n                        for (const listener of values) {\r\n                            candidate.apply(result, listener);\r\n                        }\r\n                    }\r\n                }\r\n                earlyListeners.clear();\r\n                return result;\r\n            });\r\n            return new Proxy(Object.create(null), {\r\n                get(target, key) {\r\n                    if (!idle.isInitialized) {\r\n                        // looks like an event\r\n                        if (typeof key === 'string' && (key.startsWith('onDid') || key.startsWith('onWill'))) {\r\n                            let list = earlyListeners.get(key);\r\n                            if (!list) {\r\n                                list = new LinkedList();\r\n                                earlyListeners.set(key, list);\r\n                            }\r\n                            const event = (callback, thisArg, disposables) => {\r\n                                const rm = list.push([callback, thisArg, disposables]);\r\n                                return toDisposable(rm);\r\n                            };\r\n                            return event;\r\n                        }\r\n                    }\r\n                    // value already exists\r\n                    if (key in target) {\r\n                        return target[key];\r\n                    }\r\n                    // create value\r\n                    const obj = idle.value;\r\n                    let prop = obj[key];\r\n                    if (typeof prop !== 'function') {\r\n                        return prop;\r\n                    }\r\n                    prop = prop.bind(obj);\r\n                    target[key] = prop;\r\n                    return prop;\r\n                },\r\n                set(_target, p, value) {\r\n                    idle.value[p] = value;\r\n                    return true;\r\n                },\r\n                getPrototypeOf(_target) {\r\n                    return ctor.prototype;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _throwIfStrict(msg, printWarning) {\r\n        if (printWarning) {\r\n            console.warn(msg);\r\n        }\r\n        if (this._strict) {\r\n            throw new Error(msg);\r\n        }\r\n    }\r\n}\r\nexport class Trace {\r\n    static traceInvocation(_enableTracing, ctor) {\r\n        return !_enableTracing ? Trace._None : new Trace(2 /* TraceType.Invocation */, ctor.name || new Error().stack.split('\\n').slice(3, 4).join('\\n'));\r\n    }\r\n    static traceCreation(_enableTracing, ctor) {\r\n        return !_enableTracing ? Trace._None : new Trace(1 /* TraceType.Creation */, ctor.name);\r\n    }\r\n    constructor(type, name) {\r\n        this.type = type;\r\n        this.name = name;\r\n        this._start = Date.now();\r\n        this._dep = [];\r\n    }\r\n    branch(id, first) {\r\n        const child = new Trace(3 /* TraceType.Branch */, id.toString());\r\n        this._dep.push([id, first, child]);\r\n        return child;\r\n    }\r\n    stop() {\r\n        const dur = Date.now() - this._start;\r\n        Trace._totals += dur;\r\n        let causedCreation = false;\r\n        function printChild(n, trace) {\r\n            const res = [];\r\n            const prefix = new Array(n + 1).join('\\t');\r\n            for (const [id, first, child] of trace._dep) {\r\n                if (first && child) {\r\n                    causedCreation = true;\r\n                    res.push(`${prefix}CREATES -> ${id}`);\r\n                    const nested = printChild(n + 1, child);\r\n                    if (nested) {\r\n                        res.push(nested);\r\n                    }\r\n                }\r\n                else {\r\n                    res.push(`${prefix}uses -> ${id}`);\r\n                }\r\n            }\r\n            return res.join('\\n');\r\n        }\r\n        const lines = [\r\n            `${this.type === 1 /* TraceType.Creation */ ? 'CREATE' : 'CALL'} ${this.name}`,\r\n            `${printChild(1, this)}`,\r\n            `DONE, took ${dur.toFixed(2)}ms (grand total ${Trace._totals.toFixed(2)}ms)`\r\n        ];\r\n        if (dur > 2 || causedCreation) {\r\n            Trace.all.add(lines.join('\\n'));\r\n        }\r\n    }\r\n}\r\nTrace.all = new Set();\r\nTrace._None = new class extends Trace {\r\n    constructor() { super(0 /* TraceType.None */, null); }\r\n    stop() { }\r\n    branch() { return this; }\r\n};\r\nTrace._totals = 0;\r\n//#endregion\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { isFalsyOrEmpty, isNonEmptyArray } from '../../../base/common/arrays.js';\r\nimport { DebounceEmitter } from '../../../base/common/event.js';\r\nimport { Iterable } from '../../../base/common/iterator.js';\r\nimport { ResourceMap } from '../../../base/common/map.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { MarkerSeverity } from './markers.js';\r\nexport const unsupportedSchemas = new Set([Schemas.inMemory, Schemas.vscodeSourceControl, Schemas.walkThrough, Schemas.walkThroughSnippet]);\r\nclass DoubleResourceMap {\r\n    constructor() {\r\n        this._byResource = new ResourceMap();\r\n        this._byOwner = new Map();\r\n    }\r\n    set(resource, owner, value) {\r\n        let ownerMap = this._byResource.get(resource);\r\n        if (!ownerMap) {\r\n            ownerMap = new Map();\r\n            this._byResource.set(resource, ownerMap);\r\n        }\r\n        ownerMap.set(owner, value);\r\n        let resourceMap = this._byOwner.get(owner);\r\n        if (!resourceMap) {\r\n            resourceMap = new ResourceMap();\r\n            this._byOwner.set(owner, resourceMap);\r\n        }\r\n        resourceMap.set(resource, value);\r\n    }\r\n    get(resource, owner) {\r\n        const ownerMap = this._byResource.get(resource);\r\n        return ownerMap === null || ownerMap === void 0 ? void 0 : ownerMap.get(owner);\r\n    }\r\n    delete(resource, owner) {\r\n        let removedA = false;\r\n        let removedB = false;\r\n        const ownerMap = this._byResource.get(resource);\r\n        if (ownerMap) {\r\n            removedA = ownerMap.delete(owner);\r\n        }\r\n        const resourceMap = this._byOwner.get(owner);\r\n        if (resourceMap) {\r\n            removedB = resourceMap.delete(resource);\r\n        }\r\n        if (removedA !== removedB) {\r\n            throw new Error('illegal state');\r\n        }\r\n        return removedA && removedB;\r\n    }\r\n    values(key) {\r\n        var _a, _b, _c, _d;\r\n        if (typeof key === 'string') {\r\n            return (_b = (_a = this._byOwner.get(key)) === null || _a === void 0 ? void 0 : _a.values()) !== null && _b !== void 0 ? _b : Iterable.empty();\r\n        }\r\n        if (URI.isUri(key)) {\r\n            return (_d = (_c = this._byResource.get(key)) === null || _c === void 0 ? void 0 : _c.values()) !== null && _d !== void 0 ? _d : Iterable.empty();\r\n        }\r\n        return Iterable.map(Iterable.concat(...this._byOwner.values()), map => map[1]);\r\n    }\r\n}\r\nclass MarkerStats {\r\n    constructor(service) {\r\n        this.errors = 0;\r\n        this.infos = 0;\r\n        this.warnings = 0;\r\n        this.unknowns = 0;\r\n        this._data = new ResourceMap();\r\n        this._service = service;\r\n        this._subscription = service.onMarkerChanged(this._update, this);\r\n    }\r\n    dispose() {\r\n        this._subscription.dispose();\r\n    }\r\n    _update(resources) {\r\n        for (const resource of resources) {\r\n            const oldStats = this._data.get(resource);\r\n            if (oldStats) {\r\n                this._substract(oldStats);\r\n            }\r\n            const newStats = this._resourceStats(resource);\r\n            this._add(newStats);\r\n            this._data.set(resource, newStats);\r\n        }\r\n    }\r\n    _resourceStats(resource) {\r\n        const result = { errors: 0, warnings: 0, infos: 0, unknowns: 0 };\r\n        // TODO this is a hack\r\n        if (unsupportedSchemas.has(resource.scheme)) {\r\n            return result;\r\n        }\r\n        for (const { severity } of this._service.read({ resource })) {\r\n            if (severity === MarkerSeverity.Error) {\r\n                result.errors += 1;\r\n            }\r\n            else if (severity === MarkerSeverity.Warning) {\r\n                result.warnings += 1;\r\n            }\r\n            else if (severity === MarkerSeverity.Info) {\r\n                result.infos += 1;\r\n            }\r\n            else {\r\n                result.unknowns += 1;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    _substract(op) {\r\n        this.errors -= op.errors;\r\n        this.warnings -= op.warnings;\r\n        this.infos -= op.infos;\r\n        this.unknowns -= op.unknowns;\r\n    }\r\n    _add(op) {\r\n        this.errors += op.errors;\r\n        this.warnings += op.warnings;\r\n        this.infos += op.infos;\r\n        this.unknowns += op.unknowns;\r\n    }\r\n}\r\nexport class MarkerService {\r\n    constructor() {\r\n        this._onMarkerChanged = new DebounceEmitter({\r\n            delay: 0,\r\n            merge: MarkerService._merge\r\n        });\r\n        this.onMarkerChanged = this._onMarkerChanged.event;\r\n        this._data = new DoubleResourceMap();\r\n        this._stats = new MarkerStats(this);\r\n    }\r\n    dispose() {\r\n        this._stats.dispose();\r\n        this._onMarkerChanged.dispose();\r\n    }\r\n    remove(owner, resources) {\r\n        for (const resource of resources || []) {\r\n            this.changeOne(owner, resource, []);\r\n        }\r\n    }\r\n    changeOne(owner, resource, markerData) {\r\n        if (isFalsyOrEmpty(markerData)) {\r\n            // remove marker for this (owner,resource)-tuple\r\n            const removed = this._data.delete(resource, owner);\r\n            if (removed) {\r\n                this._onMarkerChanged.fire([resource]);\r\n            }\r\n        }\r\n        else {\r\n            // insert marker for this (owner,resource)-tuple\r\n            const markers = [];\r\n            for (const data of markerData) {\r\n                const marker = MarkerService._toMarker(owner, resource, data);\r\n                if (marker) {\r\n                    markers.push(marker);\r\n                }\r\n            }\r\n            this._data.set(resource, owner, markers);\r\n            this._onMarkerChanged.fire([resource]);\r\n        }\r\n    }\r\n    static _toMarker(owner, resource, data) {\r\n        let { code, severity, message, source, startLineNumber, startColumn, endLineNumber, endColumn, relatedInformation, tags, } = data;\r\n        if (!message) {\r\n            return undefined;\r\n        }\r\n        // santize data\r\n        startLineNumber = startLineNumber > 0 ? startLineNumber : 1;\r\n        startColumn = startColumn > 0 ? startColumn : 1;\r\n        endLineNumber = endLineNumber >= startLineNumber ? endLineNumber : startLineNumber;\r\n        endColumn = endColumn > 0 ? endColumn : startColumn;\r\n        return {\r\n            resource,\r\n            owner,\r\n            code,\r\n            severity,\r\n            message,\r\n            source,\r\n            startLineNumber,\r\n            startColumn,\r\n            endLineNumber,\r\n            endColumn,\r\n            relatedInformation,\r\n            tags,\r\n        };\r\n    }\r\n    changeAll(owner, data) {\r\n        const changes = [];\r\n        // remove old marker\r\n        const existing = this._data.values(owner);\r\n        if (existing) {\r\n            for (const data of existing) {\r\n                const first = Iterable.first(data);\r\n                if (first) {\r\n                    changes.push(first.resource);\r\n                    this._data.delete(first.resource, owner);\r\n                }\r\n            }\r\n        }\r\n        // add new markers\r\n        if (isNonEmptyArray(data)) {\r\n            // group by resource\r\n            const groups = new ResourceMap();\r\n            for (const { resource, marker: markerData } of data) {\r\n                const marker = MarkerService._toMarker(owner, resource, markerData);\r\n                if (!marker) {\r\n                    // filter bad markers\r\n                    continue;\r\n                }\r\n                const array = groups.get(resource);\r\n                if (!array) {\r\n                    groups.set(resource, [marker]);\r\n                    changes.push(resource);\r\n                }\r\n                else {\r\n                    array.push(marker);\r\n                }\r\n            }\r\n            // insert all\r\n            for (const [resource, value] of groups) {\r\n                this._data.set(resource, owner, value);\r\n            }\r\n        }\r\n        if (changes.length > 0) {\r\n            this._onMarkerChanged.fire(changes);\r\n        }\r\n    }\r\n    read(filter = Object.create(null)) {\r\n        let { owner, resource, severities, take } = filter;\r\n        if (!take || take < 0) {\r\n            take = -1;\r\n        }\r\n        if (owner && resource) {\r\n            // exactly one owner AND resource\r\n            const data = this._data.get(resource, owner);\r\n            if (!data) {\r\n                return [];\r\n            }\r\n            else {\r\n                const result = [];\r\n                for (const marker of data) {\r\n                    if (MarkerService._accept(marker, severities)) {\r\n                        const newLen = result.push(marker);\r\n                        if (take > 0 && newLen === take) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n        else if (!owner && !resource) {\r\n            // all\r\n            const result = [];\r\n            for (const markers of this._data.values()) {\r\n                for (const data of markers) {\r\n                    if (MarkerService._accept(data, severities)) {\r\n                        const newLen = result.push(data);\r\n                        if (take > 0 && newLen === take) {\r\n                            return result;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            // of one resource OR owner\r\n            const iterable = this._data.values(resource !== null && resource !== void 0 ? resource : owner);\r\n            const result = [];\r\n            for (const markers of iterable) {\r\n                for (const data of markers) {\r\n                    if (MarkerService._accept(data, severities)) {\r\n                        const newLen = result.push(data);\r\n                        if (take > 0 && newLen === take) {\r\n                            return result;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    static _accept(marker, severities) {\r\n        return severities === undefined || (severities & marker.severity) === marker.severity;\r\n    }\r\n    // --- event debounce logic\r\n    static _merge(all) {\r\n        const set = new ResourceMap();\r\n        for (const array of all) {\r\n            for (const item of array) {\r\n                set.set(item, true);\r\n            }\r\n        }\r\n        return Array.from(set.keys());\r\n    }\r\n}\r\n", "import { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { ConfigurationModel } from './configurationModels.js';\r\nimport { Extensions } from './configurationRegistry.js';\r\nimport { Registry } from '../../registry/common/platform.js';\r\nexport class DefaultConfiguration extends Disposable {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._configurationModel = new ConfigurationModel();\r\n    }\r\n    get configurationModel() {\r\n        return this._configurationModel;\r\n    }\r\n    reload() {\r\n        this.resetConfigurationModel();\r\n        return this.configurationModel;\r\n    }\r\n    getConfigurationDefaultOverrides() {\r\n        return {};\r\n    }\r\n    resetConfigurationModel() {\r\n        this._configurationModel = new ConfigurationModel();\r\n        const properties = Registry.as(Extensions.Configuration).getConfigurationProperties();\r\n        this.updateConfigurationModel(Object.keys(properties), properties);\r\n    }\r\n    updateConfigurationModel(properties, configurationProperties) {\r\n        const configurationDefaultsOverrides = this.getConfigurationDefaultOverrides();\r\n        for (const key of properties) {\r\n            const defaultOverrideValue = configurationDefaultsOverrides[key];\r\n            const propertySchema = configurationProperties[key];\r\n            if (defaultOverrideValue !== undefined) {\r\n                this._configurationModel.addValue(key, defaultOverrideValue);\r\n            }\r\n            else if (propertySchema) {\r\n                this._configurationModel.addValue(key, propertySchema.default);\r\n            }\r\n            else {\r\n                this._configurationModel.removeValue(key);\r\n            }\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { MultiplexLogger } from './log.js';\r\nexport class LogService extends Disposable {\r\n    constructor(primaryLogger, otherLoggers = []) {\r\n        super();\r\n        this.logger = new MultiplexLogger([primaryLogger, ...otherLoggers]);\r\n        this._register(primaryLogger.onDidChangeLogLevel(level => this.setLevel(level)));\r\n    }\r\n    get onDidChangeLogLevel() {\r\n        return this.logger.onDidChangeLogLevel;\r\n    }\r\n    setLevel(level) {\r\n        this.logger.setLevel(level);\r\n    }\r\n    getLevel() {\r\n        return this.logger.getLevel();\r\n    }\r\n    trace(message, ...args) {\r\n        this.logger.trace(message, ...args);\r\n    }\r\n    debug(message, ...args) {\r\n        this.logger.debug(message, ...args);\r\n    }\r\n    info(message, ...args) {\r\n        this.logger.info(message, ...args);\r\n    }\r\n    warn(message, ...args) {\r\n        this.logger.warn(message, ...args);\r\n    }\r\n    error(message, ...args) {\r\n        this.logger.error(message, ...args);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nconst editorFeatures = [];\r\n/**\r\n * Registers an editor feature. Editor features will be instantiated only once, as soon as\r\n * the first code editor is instantiated.\r\n */\r\nexport function registerEditorFeature(ctor) {\r\n    editorFeatures.push(ctor);\r\n}\r\nexport function getEditorFeatures() {\r\n    return editorFeatures.slice(0);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport '../../common/languages/languageConfigurationRegistry.js';\r\nimport './standaloneCodeEditorService.js';\r\nimport './standaloneLayoutService.js';\r\nimport '../../../platform/undoRedo/common/undoRedoService.js';\r\nimport '../../common/services/languageFeatureDebounce.js';\r\nimport '../../common/services/semanticTokensStylingService.js';\r\nimport '../../common/services/languageFeaturesService.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { KeyCodeChord, decodeKeybinding } from '../../../base/common/keybindings.js';\r\nimport { ImmortalReference, toDisposable, DisposableStore, Disposable, combinedDisposable } from '../../../base/common/lifecycle.js';\r\nimport { OS, isLinux, isMacintosh } from '../../../base/common/platform.js';\r\nimport Severity from '../../../base/common/severity.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { IBulkEditService, ResourceEdit, ResourceTextEdit } from '../../browser/services/bulkEditService.js';\r\nimport { isDiffEditorConfigurationKey, isEditorConfigurationKey } from '../../common/config/editorConfigurationSchema.js';\r\nimport { EditOperation } from '../../common/core/editOperation.js';\r\nimport { Position as Pos } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { IModelService } from '../../common/services/model.js';\r\nimport { ITextModelService } from '../../common/services/resolverService.js';\r\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfiguration.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { Configuration, ConfigurationModel, ConfigurationChangeEvent } from '../../../platform/configuration/common/configurationModels.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\r\nimport { createDecorator, IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { AbstractKeybindingService } from '../../../platform/keybinding/common/abstractKeybindingService.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { KeybindingResolver } from '../../../platform/keybinding/common/keybindingResolver.js';\r\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\r\nimport { ResolvedKeybindingItem } from '../../../platform/keybinding/common/resolvedKeybindingItem.js';\r\nimport { USLayoutResolvedKeybinding } from '../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\r\nimport { ILabelService } from '../../../platform/label/common/label.js';\r\nimport { INotificationService, NoOpNotification } from '../../../platform/notification/common/notification.js';\r\nimport { IEditorProgressService, IProgressService } from '../../../platform/progress/common/progress.js';\r\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\r\nimport { IWorkspaceContextService, WorkspaceFolder, STANDALONE_EDITOR_WORKSPACE_ID } from '../../../platform/workspace/common/workspace.js';\r\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\r\nimport { StandaloneServicesNLS } from '../../common/standaloneStrings.js';\r\nimport { basename } from '../../../base/common/resources.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { ConsoleLogger, ILogService } from '../../../platform/log/common/log.js';\r\nimport { IWorkspaceTrustManagementService } from '../../../platform/workspace/common/workspaceTrust.js';\r\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\r\nimport { LanguageService } from '../../common/services/languageService.js';\r\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\r\nimport { getSingletonServiceDescriptors, registerSingleton } from '../../../platform/instantiation/common/extensions.js';\r\nimport { OpenerService } from '../../browser/services/openerService.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorker.js';\r\nimport { EditorWorkerService } from '../../browser/services/editorWorkerService.js';\r\nimport { ILanguageService } from '../../common/languages/language.js';\r\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsService.js';\r\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\r\nimport { ModelService } from '../../common/services/modelService.js';\r\nimport { StandaloneQuickInputService } from './quickInput/standaloneQuickInputService.js';\r\nimport { StandaloneThemeService } from './standaloneThemeService.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\r\nimport { AccessibilityService } from '../../../platform/accessibility/browser/accessibilityService.js';\r\nimport { IAccessibilityService, IAccessibleNotificationService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\r\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\r\nimport { BrowserClipboardService } from '../../../platform/clipboard/browser/clipboardService.js';\r\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\r\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\r\nimport { SyncDescriptor } from '../../../platform/instantiation/common/descriptors.js';\r\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\r\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\r\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\r\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\r\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { IQuickInputService } from '../../../platform/quickinput/common/quickInput.js';\r\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\r\nimport { DefaultConfiguration } from '../../../platform/configuration/common/configurations.js';\r\nimport { IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\r\nimport { LogService } from '../../../platform/log/common/logService.js';\r\nimport { getEditorFeatures } from '../../common/editorFeatures.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\r\nimport { mainWindow } from '../../../base/browser/window.js';\r\nclass SimpleModel {\r\n    constructor(model) {\r\n        this.disposed = false;\r\n        this.model = model;\r\n        this._onWillDispose = new Emitter();\r\n    }\r\n    get textEditorModel() {\r\n        return this.model;\r\n    }\r\n    dispose() {\r\n        this.disposed = true;\r\n        this._onWillDispose.fire();\r\n    }\r\n}\r\nlet StandaloneTextModelService = class StandaloneTextModelService {\r\n    constructor(modelService) {\r\n        this.modelService = modelService;\r\n    }\r\n    createModelReference(resource) {\r\n        const model = this.modelService.getModel(resource);\r\n        if (!model) {\r\n            return Promise.reject(new Error(`Model not found`));\r\n        }\r\n        return Promise.resolve(new ImmortalReference(new SimpleModel(model)));\r\n    }\r\n};\r\nStandaloneTextModelService = __decorate([\r\n    __param(0, IModelService)\r\n], StandaloneTextModelService);\r\nclass StandaloneEditorProgressService {\r\n    show() {\r\n        return StandaloneEditorProgressService.NULL_PROGRESS_RUNNER;\r\n    }\r\n    async showWhile(promise, delay) {\r\n        await promise;\r\n    }\r\n}\r\nStandaloneEditorProgressService.NULL_PROGRESS_RUNNER = {\r\n    done: () => { },\r\n    total: () => { },\r\n    worked: () => { }\r\n};\r\nclass StandaloneProgressService {\r\n    withProgress(_options, task, onDidCancel) {\r\n        return task({\r\n            report: () => { },\r\n        });\r\n    }\r\n}\r\nclass StandaloneEnvironmentService {\r\n    constructor() {\r\n        this.isExtensionDevelopment = false;\r\n        this.isBuilt = false;\r\n    }\r\n}\r\nclass StandaloneDialogService {\r\n    async confirm(confirmation) {\r\n        const confirmed = this.doConfirm(confirmation.message, confirmation.detail);\r\n        return {\r\n            confirmed,\r\n            checkboxChecked: false // unsupported\r\n        };\r\n    }\r\n    doConfirm(message, detail) {\r\n        let messageText = message;\r\n        if (detail) {\r\n            messageText = messageText + '\\n\\n' + detail;\r\n        }\r\n        return mainWindow.confirm(messageText);\r\n    }\r\n    async prompt(prompt) {\r\n        var _a, _b;\r\n        let result = undefined;\r\n        const confirmed = this.doConfirm(prompt.message, prompt.detail);\r\n        if (confirmed) {\r\n            const promptButtons = [...((_a = prompt.buttons) !== null && _a !== void 0 ? _a : [])];\r\n            if (prompt.cancelButton && typeof prompt.cancelButton !== 'string' && typeof prompt.cancelButton !== 'boolean') {\r\n                promptButtons.push(prompt.cancelButton);\r\n            }\r\n            result = await ((_b = promptButtons[0]) === null || _b === void 0 ? void 0 : _b.run({ checkboxChecked: false }));\r\n        }\r\n        return { result };\r\n    }\r\n    async error(message, detail) {\r\n        await this.prompt({ type: Severity.Error, message, detail });\r\n    }\r\n}\r\nexport class StandaloneNotificationService {\r\n    info(message) {\r\n        return this.notify({ severity: Severity.Info, message });\r\n    }\r\n    warn(message) {\r\n        return this.notify({ severity: Severity.Warning, message });\r\n    }\r\n    error(error) {\r\n        return this.notify({ severity: Severity.Error, message: error });\r\n    }\r\n    notify(notification) {\r\n        switch (notification.severity) {\r\n            case Severity.Error:\r\n                console.error(notification.message);\r\n                break;\r\n            case Severity.Warning:\r\n                console.warn(notification.message);\r\n                break;\r\n            default:\r\n                console.log(notification.message);\r\n                break;\r\n        }\r\n        return StandaloneNotificationService.NO_OP;\r\n    }\r\n    prompt(severity, message, choices, options) {\r\n        return StandaloneNotificationService.NO_OP;\r\n    }\r\n    status(message, options) {\r\n        return Disposable.None;\r\n    }\r\n}\r\nStandaloneNotificationService.NO_OP = new NoOpNotification();\r\nlet StandaloneCommandService = class StandaloneCommandService {\r\n    constructor(instantiationService) {\r\n        this._onWillExecuteCommand = new Emitter();\r\n        this._onDidExecuteCommand = new Emitter();\r\n        this.onDidExecuteCommand = this._onDidExecuteCommand.event;\r\n        this._instantiationService = instantiationService;\r\n    }\r\n    executeCommand(id, ...args) {\r\n        const command = CommandsRegistry.getCommand(id);\r\n        if (!command) {\r\n            return Promise.reject(new Error(`command '${id}' not found`));\r\n        }\r\n        try {\r\n            this._onWillExecuteCommand.fire({ commandId: id, args });\r\n            const result = this._instantiationService.invokeFunction.apply(this._instantiationService, [command.handler, ...args]);\r\n            this._onDidExecuteCommand.fire({ commandId: id, args });\r\n            return Promise.resolve(result);\r\n        }\r\n        catch (err) {\r\n            return Promise.reject(err);\r\n        }\r\n    }\r\n};\r\nStandaloneCommandService = __decorate([\r\n    __param(0, IInstantiationService)\r\n], StandaloneCommandService);\r\nexport { StandaloneCommandService };\r\nlet StandaloneKeybindingService = class StandaloneKeybindingService extends AbstractKeybindingService {\r\n    constructor(contextKeyService, commandService, telemetryService, notificationService, logService, codeEditorService) {\r\n        super(contextKeyService, commandService, telemetryService, notificationService, logService);\r\n        this._cachedResolver = null;\r\n        this._dynamicKeybindings = [];\r\n        this._domNodeListeners = [];\r\n        const addContainer = (domNode) => {\r\n            const disposables = new DisposableStore();\r\n            // for standard keybindings\r\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => {\r\n                const keyEvent = new StandardKeyboardEvent(e);\r\n                const shouldPreventDefault = this._dispatch(keyEvent, keyEvent.target);\r\n                if (shouldPreventDefault) {\r\n                    keyEvent.preventDefault();\r\n                    keyEvent.stopPropagation();\r\n                }\r\n            }));\r\n            // for single modifier chord keybindings (e.g. shift shift)\r\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => {\r\n                const keyEvent = new StandardKeyboardEvent(e);\r\n                const shouldPreventDefault = this._singleModifierDispatch(keyEvent, keyEvent.target);\r\n                if (shouldPreventDefault) {\r\n                    keyEvent.preventDefault();\r\n                }\r\n            }));\r\n            this._domNodeListeners.push(new DomNodeListeners(domNode, disposables));\r\n        };\r\n        const removeContainer = (domNode) => {\r\n            for (let i = 0; i < this._domNodeListeners.length; i++) {\r\n                const domNodeListeners = this._domNodeListeners[i];\r\n                if (domNodeListeners.domNode === domNode) {\r\n                    this._domNodeListeners.splice(i, 1);\r\n                    domNodeListeners.dispose();\r\n                }\r\n            }\r\n        };\r\n        const addCodeEditor = (codeEditor) => {\r\n            if (codeEditor.getOption(61 /* EditorOption.inDiffEditor */)) {\r\n                return;\r\n            }\r\n            addContainer(codeEditor.getContainerDomNode());\r\n        };\r\n        const removeCodeEditor = (codeEditor) => {\r\n            if (codeEditor.getOption(61 /* EditorOption.inDiffEditor */)) {\r\n                return;\r\n            }\r\n            removeContainer(codeEditor.getContainerDomNode());\r\n        };\r\n        this._register(codeEditorService.onCodeEditorAdd(addCodeEditor));\r\n        this._register(codeEditorService.onCodeEditorRemove(removeCodeEditor));\r\n        codeEditorService.listCodeEditors().forEach(addCodeEditor);\r\n        const addDiffEditor = (diffEditor) => {\r\n            addContainer(diffEditor.getContainerDomNode());\r\n        };\r\n        const removeDiffEditor = (diffEditor) => {\r\n            removeContainer(diffEditor.getContainerDomNode());\r\n        };\r\n        this._register(codeEditorService.onDiffEditorAdd(addDiffEditor));\r\n        this._register(codeEditorService.onDiffEditorRemove(removeDiffEditor));\r\n        codeEditorService.listDiffEditors().forEach(addDiffEditor);\r\n    }\r\n    addDynamicKeybinding(command, keybinding, handler, when) {\r\n        return combinedDisposable(CommandsRegistry.registerCommand(command, handler), this.addDynamicKeybindings([{\r\n                keybinding,\r\n                command,\r\n                when\r\n            }]));\r\n    }\r\n    addDynamicKeybindings(rules) {\r\n        const entries = rules.map((rule) => {\r\n            var _a;\r\n            const keybinding = decodeKeybinding(rule.keybinding, OS);\r\n            return {\r\n                keybinding,\r\n                command: (_a = rule.command) !== null && _a !== void 0 ? _a : null,\r\n                commandArgs: rule.commandArgs,\r\n                when: rule.when,\r\n                weight1: 1000,\r\n                weight2: 0,\r\n                extensionId: null,\r\n                isBuiltinExtension: false\r\n            };\r\n        });\r\n        this._dynamicKeybindings = this._dynamicKeybindings.concat(entries);\r\n        this.updateResolver();\r\n        return toDisposable(() => {\r\n            // Search the first entry and remove them all since they will be contiguous\r\n            for (let i = 0; i < this._dynamicKeybindings.length; i++) {\r\n                if (this._dynamicKeybindings[i] === entries[0]) {\r\n                    this._dynamicKeybindings.splice(i, entries.length);\r\n                    this.updateResolver();\r\n                    return;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    updateResolver() {\r\n        this._cachedResolver = null;\r\n        this._onDidUpdateKeybindings.fire();\r\n    }\r\n    _getResolver() {\r\n        if (!this._cachedResolver) {\r\n            const defaults = this._toNormalizedKeybindingItems(KeybindingsRegistry.getDefaultKeybindings(), true);\r\n            const overrides = this._toNormalizedKeybindingItems(this._dynamicKeybindings, false);\r\n            this._cachedResolver = new KeybindingResolver(defaults, overrides, (str) => this._log(str));\r\n        }\r\n        return this._cachedResolver;\r\n    }\r\n    _documentHasFocus() {\r\n        return mainWindow.document.hasFocus();\r\n    }\r\n    _toNormalizedKeybindingItems(items, isDefault) {\r\n        const result = [];\r\n        let resultLen = 0;\r\n        for (const item of items) {\r\n            const when = item.when || undefined;\r\n            const keybinding = item.keybinding;\r\n            if (!keybinding) {\r\n                // This might be a removal keybinding item in user settings => accept it\r\n                result[resultLen++] = new ResolvedKeybindingItem(undefined, item.command, item.commandArgs, when, isDefault, null, false);\r\n            }\r\n            else {\r\n                const resolvedKeybindings = USLayoutResolvedKeybinding.resolveKeybinding(keybinding, OS);\r\n                for (const resolvedKeybinding of resolvedKeybindings) {\r\n                    result[resultLen++] = new ResolvedKeybindingItem(resolvedKeybinding, item.command, item.commandArgs, when, isDefault, null, false);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    resolveKeyboardEvent(keyboardEvent) {\r\n        const chord = new KeyCodeChord(keyboardEvent.ctrlKey, keyboardEvent.shiftKey, keyboardEvent.altKey, keyboardEvent.metaKey, keyboardEvent.keyCode);\r\n        return new USLayoutResolvedKeybinding([chord], OS);\r\n    }\r\n};\r\nStandaloneKeybindingService = __decorate([\r\n    __param(0, IContextKeyService),\r\n    __param(1, ICommandService),\r\n    __param(2, ITelemetryService),\r\n    __param(3, INotificationService),\r\n    __param(4, ILogService),\r\n    __param(5, ICodeEditorService)\r\n], StandaloneKeybindingService);\r\nexport { StandaloneKeybindingService };\r\nclass DomNodeListeners extends Disposable {\r\n    constructor(domNode, disposables) {\r\n        super();\r\n        this.domNode = domNode;\r\n        this._register(disposables);\r\n    }\r\n}\r\nfunction isConfigurationOverrides(thing) {\r\n    return thing\r\n        && typeof thing === 'object'\r\n        && (!thing.overrideIdentifier || typeof thing.overrideIdentifier === 'string')\r\n        && (!thing.resource || thing.resource instanceof URI);\r\n}\r\nexport class StandaloneConfigurationService {\r\n    constructor() {\r\n        this._onDidChangeConfiguration = new Emitter();\r\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\r\n        const defaultConfiguration = new DefaultConfiguration();\r\n        this._configuration = new Configuration(defaultConfiguration.reload(), new ConfigurationModel(), new ConfigurationModel(), new ConfigurationModel());\r\n        defaultConfiguration.dispose();\r\n    }\r\n    getValue(arg1, arg2) {\r\n        const section = typeof arg1 === 'string' ? arg1 : undefined;\r\n        const overrides = isConfigurationOverrides(arg1) ? arg1 : isConfigurationOverrides(arg2) ? arg2 : {};\r\n        return this._configuration.getValue(section, overrides, undefined);\r\n    }\r\n    updateValues(values) {\r\n        const previous = { data: this._configuration.toData() };\r\n        const changedKeys = [];\r\n        for (const entry of values) {\r\n            const [key, value] = entry;\r\n            if (this.getValue(key) === value) {\r\n                continue;\r\n            }\r\n            this._configuration.updateValue(key, value);\r\n            changedKeys.push(key);\r\n        }\r\n        if (changedKeys.length > 0) {\r\n            const configurationChangeEvent = new ConfigurationChangeEvent({ keys: changedKeys, overrides: [] }, previous, this._configuration);\r\n            configurationChangeEvent.source = 8 /* ConfigurationTarget.MEMORY */;\r\n            configurationChangeEvent.sourceConfig = null;\r\n            this._onDidChangeConfiguration.fire(configurationChangeEvent);\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    updateValue(key, value, arg3, arg4) {\r\n        return this.updateValues([[key, value]]);\r\n    }\r\n    inspect(key, options = {}) {\r\n        return this._configuration.inspect(key, options, undefined);\r\n    }\r\n}\r\nlet StandaloneResourceConfigurationService = class StandaloneResourceConfigurationService {\r\n    constructor(configurationService, modelService, languageService) {\r\n        this.configurationService = configurationService;\r\n        this.modelService = modelService;\r\n        this.languageService = languageService;\r\n        this._onDidChangeConfiguration = new Emitter();\r\n        this.configurationService.onDidChangeConfiguration((e) => {\r\n            this._onDidChangeConfiguration.fire({ affectedKeys: e.affectedKeys, affectsConfiguration: (resource, configuration) => e.affectsConfiguration(configuration) });\r\n        });\r\n    }\r\n    getValue(resource, arg2, arg3) {\r\n        const position = Pos.isIPosition(arg2) ? arg2 : null;\r\n        const section = position ? (typeof arg3 === 'string' ? arg3 : undefined) : (typeof arg2 === 'string' ? arg2 : undefined);\r\n        const language = resource ? this.getLanguage(resource, position) : undefined;\r\n        if (typeof section === 'undefined') {\r\n            return this.configurationService.getValue({\r\n                resource,\r\n                overrideIdentifier: language\r\n            });\r\n        }\r\n        return this.configurationService.getValue(section, {\r\n            resource,\r\n            overrideIdentifier: language\r\n        });\r\n    }\r\n    getLanguage(resource, position) {\r\n        const model = this.modelService.getModel(resource);\r\n        if (model) {\r\n            return position ? model.getLanguageIdAtPosition(position.lineNumber, position.column) : model.getLanguageId();\r\n        }\r\n        return this.languageService.guessLanguageIdByFilepathOrFirstLine(resource);\r\n    }\r\n};\r\nStandaloneResourceConfigurationService = __decorate([\r\n    __param(0, IConfigurationService),\r\n    __param(1, IModelService),\r\n    __param(2, ILanguageService)\r\n], StandaloneResourceConfigurationService);\r\nlet StandaloneResourcePropertiesService = class StandaloneResourcePropertiesService {\r\n    constructor(configurationService) {\r\n        this.configurationService = configurationService;\r\n    }\r\n    getEOL(resource, language) {\r\n        const eol = this.configurationService.getValue('files.eol', { overrideIdentifier: language, resource });\r\n        if (eol && typeof eol === 'string' && eol !== 'auto') {\r\n            return eol;\r\n        }\r\n        return (isLinux || isMacintosh) ? '\\n' : '\\r\\n';\r\n    }\r\n};\r\nStandaloneResourcePropertiesService = __decorate([\r\n    __param(0, IConfigurationService)\r\n], StandaloneResourcePropertiesService);\r\nclass StandaloneTelemetryService {\r\n    publicLog2() { }\r\n}\r\nclass StandaloneWorkspaceContextService {\r\n    constructor() {\r\n        const resource = URI.from({ scheme: StandaloneWorkspaceContextService.SCHEME, authority: 'model', path: '/' });\r\n        this.workspace = { id: STANDALONE_EDITOR_WORKSPACE_ID, folders: [new WorkspaceFolder({ uri: resource, name: '', index: 0 })] };\r\n    }\r\n    getWorkspace() {\r\n        return this.workspace;\r\n    }\r\n    getWorkspaceFolder(resource) {\r\n        return resource && resource.scheme === StandaloneWorkspaceContextService.SCHEME ? this.workspace.folders[0] : null;\r\n    }\r\n}\r\nStandaloneWorkspaceContextService.SCHEME = 'inmemory';\r\nexport function updateConfigurationService(configurationService, source, isDiffEditor) {\r\n    if (!source) {\r\n        return;\r\n    }\r\n    if (!(configurationService instanceof StandaloneConfigurationService)) {\r\n        return;\r\n    }\r\n    const toUpdate = [];\r\n    Object.keys(source).forEach((key) => {\r\n        if (isEditorConfigurationKey(key)) {\r\n            toUpdate.push([`editor.${key}`, source[key]]);\r\n        }\r\n        if (isDiffEditor && isDiffEditorConfigurationKey(key)) {\r\n            toUpdate.push([`diffEditor.${key}`, source[key]]);\r\n        }\r\n    });\r\n    if (toUpdate.length > 0) {\r\n        configurationService.updateValues(toUpdate);\r\n    }\r\n}\r\nlet StandaloneBulkEditService = class StandaloneBulkEditService {\r\n    constructor(_modelService) {\r\n        this._modelService = _modelService;\r\n        //\r\n    }\r\n    hasPreviewHandler() {\r\n        return false;\r\n    }\r\n    async apply(editsIn, _options) {\r\n        const edits = Array.isArray(editsIn) ? editsIn : ResourceEdit.convert(editsIn);\r\n        const textEdits = new Map();\r\n        for (const edit of edits) {\r\n            if (!(edit instanceof ResourceTextEdit)) {\r\n                throw new Error('bad edit - only text edits are supported');\r\n            }\r\n            const model = this._modelService.getModel(edit.resource);\r\n            if (!model) {\r\n                throw new Error('bad edit - model not found');\r\n            }\r\n            if (typeof edit.versionId === 'number' && model.getVersionId() !== edit.versionId) {\r\n                throw new Error('bad state - model changed in the meantime');\r\n            }\r\n            let array = textEdits.get(model);\r\n            if (!array) {\r\n                array = [];\r\n                textEdits.set(model, array);\r\n            }\r\n            array.push(EditOperation.replaceMove(Range.lift(edit.textEdit.range), edit.textEdit.text));\r\n        }\r\n        let totalEdits = 0;\r\n        let totalFiles = 0;\r\n        for (const [model, edits] of textEdits) {\r\n            model.pushStackElement();\r\n            model.pushEditOperations([], edits, () => []);\r\n            model.pushStackElement();\r\n            totalFiles += 1;\r\n            totalEdits += edits.length;\r\n        }\r\n        return {\r\n            ariaSummary: strings.format(StandaloneServicesNLS.bulkEditServiceSummary, totalEdits, totalFiles),\r\n            isApplied: totalEdits > 0\r\n        };\r\n    }\r\n};\r\nStandaloneBulkEditService = __decorate([\r\n    __param(0, IModelService)\r\n], StandaloneBulkEditService);\r\nclass StandaloneUriLabelService {\r\n    getUriLabel(resource, options) {\r\n        if (resource.scheme === 'file') {\r\n            return resource.fsPath;\r\n        }\r\n        return resource.path;\r\n    }\r\n    getUriBasenameLabel(resource) {\r\n        return basename(resource);\r\n    }\r\n}\r\nlet StandaloneContextViewService = class StandaloneContextViewService extends ContextViewService {\r\n    constructor(layoutService, _codeEditorService) {\r\n        super(layoutService);\r\n        this._codeEditorService = _codeEditorService;\r\n    }\r\n    showContextView(delegate, container, shadowRoot) {\r\n        if (!container) {\r\n            const codeEditor = this._codeEditorService.getFocusedCodeEditor() || this._codeEditorService.getActiveCodeEditor();\r\n            if (codeEditor) {\r\n                container = codeEditor.getContainerDomNode();\r\n            }\r\n        }\r\n        return super.showContextView(delegate, container, shadowRoot);\r\n    }\r\n};\r\nStandaloneContextViewService = __decorate([\r\n    __param(0, ILayoutService),\r\n    __param(1, ICodeEditorService)\r\n], StandaloneContextViewService);\r\nclass StandaloneWorkspaceTrustManagementService {\r\n    constructor() {\r\n        this._neverEmitter = new Emitter();\r\n        this.onDidChangeTrust = this._neverEmitter.event;\r\n    }\r\n    isWorkspaceTrusted() {\r\n        return true;\r\n    }\r\n}\r\nclass StandaloneLanguageService extends LanguageService {\r\n    constructor() {\r\n        super();\r\n    }\r\n}\r\nclass StandaloneLogService extends LogService {\r\n    constructor() {\r\n        super(new ConsoleLogger());\r\n    }\r\n}\r\nlet StandaloneContextMenuService = class StandaloneContextMenuService extends ContextMenuService {\r\n    constructor(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService) {\r\n        super(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService);\r\n        this.configure({ blockMouse: false }); // we do not want that in the standalone editor\r\n    }\r\n};\r\nStandaloneContextMenuService = __decorate([\r\n    __param(0, ITelemetryService),\r\n    __param(1, INotificationService),\r\n    __param(2, IContextViewService),\r\n    __param(3, IKeybindingService),\r\n    __param(4, IMenuService),\r\n    __param(5, IContextKeyService)\r\n], StandaloneContextMenuService);\r\nclass StandaloneAudioService {\r\n    async playAudioCue(cue, options) {\r\n    }\r\n}\r\nclass StandaloneAccessibleNotificationService {\r\n    notify(event, userGesture) {\r\n        // NOOP\r\n    }\r\n}\r\nregisterSingleton(IConfigurationService, StandaloneConfigurationService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(ITextResourceConfigurationService, StandaloneResourceConfigurationService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(ITextResourcePropertiesService, StandaloneResourcePropertiesService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IWorkspaceContextService, StandaloneWorkspaceContextService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(ILabelService, StandaloneUriLabelService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(ITelemetryService, StandaloneTelemetryService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IDialogService, StandaloneDialogService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IEnvironmentService, StandaloneEnvironmentService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(INotificationService, StandaloneNotificationService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IMarkerService, MarkerService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(ILanguageService, StandaloneLanguageService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IStandaloneThemeService, StandaloneThemeService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(ILogService, StandaloneLogService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IModelService, ModelService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IMarkerDecorationsService, MarkerDecorationsService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IContextKeyService, ContextKeyService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IProgressService, StandaloneProgressService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IEditorProgressService, StandaloneEditorProgressService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IStorageService, InMemoryStorageService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IEditorWorkerService, EditorWorkerService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IBulkEditService, StandaloneBulkEditService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IWorkspaceTrustManagementService, StandaloneWorkspaceTrustManagementService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(ITextModelService, StandaloneTextModelService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IAccessibilityService, AccessibilityService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IListService, ListService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(ICommandService, StandaloneCommandService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IKeybindingService, StandaloneKeybindingService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IQuickInputService, StandaloneQuickInputService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IContextViewService, StandaloneContextViewService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IOpenerService, OpenerService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IClipboardService, BrowserClipboardService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IContextMenuService, StandaloneContextMenuService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IMenuService, MenuService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IAudioCueService, StandaloneAudioService, 0 /* InstantiationType.Eager */);\r\nregisterSingleton(IAccessibleNotificationService, StandaloneAccessibleNotificationService, 0 /* InstantiationType.Eager */);\r\n/**\r\n * We don't want to eagerly instantiate services because embedders get a one time chance\r\n * to override services when they create the first editor.\r\n */\r\nexport var StandaloneServices;\r\n(function (StandaloneServices) {\r\n    const serviceCollection = new ServiceCollection();\r\n    for (const [id, descriptor] of getSingletonServiceDescriptors()) {\r\n        serviceCollection.set(id, descriptor);\r\n    }\r\n    const instantiationService = new InstantiationService(serviceCollection, true);\r\n    serviceCollection.set(IInstantiationService, instantiationService);\r\n    function get(serviceId) {\r\n        if (!initialized) {\r\n            initialize({});\r\n        }\r\n        const r = serviceCollection.get(serviceId);\r\n        if (!r) {\r\n            throw new Error('Missing service ' + serviceId);\r\n        }\r\n        if (r instanceof SyncDescriptor) {\r\n            return instantiationService.invokeFunction((accessor) => accessor.get(serviceId));\r\n        }\r\n        else {\r\n            return r;\r\n        }\r\n    }\r\n    StandaloneServices.get = get;\r\n    let initialized = false;\r\n    const onDidInitialize = new Emitter();\r\n    function initialize(overrides) {\r\n        if (initialized) {\r\n            return instantiationService;\r\n        }\r\n        initialized = true;\r\n        // Add singletons that were registered after this module loaded\r\n        for (const [id, descriptor] of getSingletonServiceDescriptors()) {\r\n            if (!serviceCollection.get(id)) {\r\n                serviceCollection.set(id, descriptor);\r\n            }\r\n        }\r\n        // Initialize the service collection with the overrides, but only if the\r\n        // service was not instantiated in the meantime.\r\n        for (const serviceId in overrides) {\r\n            if (overrides.hasOwnProperty(serviceId)) {\r\n                const serviceIdentifier = createDecorator(serviceId);\r\n                const r = serviceCollection.get(serviceIdentifier);\r\n                if (r instanceof SyncDescriptor) {\r\n                    serviceCollection.set(serviceIdentifier, overrides[serviceId]);\r\n                }\r\n            }\r\n        }\r\n        // Instantiate all editor features\r\n        const editorFeatures = getEditorFeatures();\r\n        for (const feature of editorFeatures) {\r\n            try {\r\n                instantiationService.createInstance(feature);\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n        }\r\n        onDidInitialize.fire();\r\n        return instantiationService;\r\n    }\r\n    StandaloneServices.initialize = initialize;\r\n    /**\r\n     * Executes callback once services are initialized.\r\n     */\r\n    function withServices(callback) {\r\n        if (initialized) {\r\n            return callback();\r\n        }\r\n        const disposable = new DisposableStore();\r\n        const listener = disposable.add(onDidInitialize.event(() => {\r\n            listener.dispose();\r\n            disposable.add(callback());\r\n        }));\r\n        return disposable;\r\n    }\r\n    StandaloneServices.withServices = withServices;\r\n})(StandaloneServices || (StandaloneServices = {}));\r\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { $, getWindow, h } from '../../../../base/browser/dom.js';\r\nimport { findLast } from '../../../../base/common/arraysFind.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableValue, recomputeInitiallyAndOnChange, subtransaction, transaction } from '../../../../base/common/observable.js';\r\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\r\nimport './style.css';\r\nimport { EditorExtensionsRegistry } from '../../editorExtensions.js';\r\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\r\nimport { StableEditorScrollState } from '../../stableEditorScroll.js';\r\nimport { CodeEditorWidget } from '../codeEditorWidget.js';\r\nimport { AccessibleDiffViewer } from './accessibleDiffViewer.js';\r\nimport { DiffEditorDecorations } from './diffEditorDecorations.js';\r\nimport { DiffEditorSash } from './diffEditorSash.js';\r\nimport { HideUnchangedRegionsFeature } from './hideUnchangedRegionsFeature.js';\r\nimport { ViewZoneManager } from './lineAlignment.js';\r\nimport { MovedBlocksLinesPart } from './movedBlocksLines.js';\r\nimport { OverviewRulerPart } from './overviewRulerPart.js';\r\nimport { ObservableElementSizeObserver, applyStyle, applyViewZones, bindContextKey, readHotReloadableExport, translatePosition } from './utils.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorType } from '../../../common/editorCommon.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\r\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\r\nimport './colors.js';\r\nimport { DelegatingEditor } from './delegatingEditorImpl.js';\r\nimport { DiffEditorEditors } from './diffEditorEditors.js';\r\nimport { DiffEditorOptions } from './diffEditorOptions.js';\r\nimport { DiffEditorViewModel } from './diffEditorViewModel.js';\r\nlet DiffEditorWidget = class DiffEditorWidget extends DelegatingEditor {\r\n    get onDidContentSizeChange() { return this._editors.onDidContentSizeChange; }\r\n    constructor(_domElement, options, codeEditorWidgetOptions, _parentContextKeyService, _parentInstantiationService, codeEditorService, _audioCueService, _editorProgressService) {\r\n        var _a;\r\n        super();\r\n        this._domElement = _domElement;\r\n        this._parentContextKeyService = _parentContextKeyService;\r\n        this._parentInstantiationService = _parentInstantiationService;\r\n        this._audioCueService = _audioCueService;\r\n        this._editorProgressService = _editorProgressService;\r\n        this.elements = h('div.monaco-diff-editor.side-by-side', { style: { position: 'relative', height: '100%' } }, [\r\n            h('div.noModificationsOverlay@overlay', { style: { position: 'absolute', height: '100%', visibility: 'hidden', } }, [$('span', {}, 'No Changes')]),\r\n            h('div.editor.original@original', { style: { position: 'absolute', height: '100%' } }),\r\n            h('div.editor.modified@modified', { style: { position: 'absolute', height: '100%' } }),\r\n            h('div.accessibleDiffViewer@accessibleDiffViewer', { style: { position: 'absolute', height: '100%' } }),\r\n        ]);\r\n        this._diffModel = observableValue(this, undefined);\r\n        this._shouldDisposeDiffModel = false;\r\n        this.onDidChangeModel = Event.fromObservableLight(this._diffModel);\r\n        this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._domElement));\r\n        this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\r\n        this._boundarySashes = observableValue(this, undefined);\r\n        this._accessibleDiffViewerShouldBeVisible = observableValue(this, false);\r\n        this._accessibleDiffViewerVisible = derived(this, reader => this._options.onlyShowAccessibleDiffViewer.read(reader)\r\n            ? true\r\n            : this._accessibleDiffViewerShouldBeVisible.read(reader));\r\n        this._movedBlocksLinesPart = observableValue(this, undefined);\r\n        this._layoutInfo = derived(this, reader => {\r\n            var _a, _b, _c, _d, _e;\r\n            const width = this._rootSizeObserver.width.read(reader);\r\n            const height = this._rootSizeObserver.height.read(reader);\r\n            const sashLeft = (_a = this._sash.read(reader)) === null || _a === void 0 ? void 0 : _a.sashLeft.read(reader);\r\n            const originalWidth = sashLeft !== null && sashLeft !== void 0 ? sashLeft : Math.max(5, this._editors.original.getLayoutInfo().decorationsLeft);\r\n            const modifiedWidth = width - originalWidth - ((_c = (_b = this._overviewRulerPart.read(reader)) === null || _b === void 0 ? void 0 : _b.width) !== null && _c !== void 0 ? _c : 0);\r\n            const movedBlocksLinesWidth = (_e = (_d = this._movedBlocksLinesPart.read(reader)) === null || _d === void 0 ? void 0 : _d.width.read(reader)) !== null && _e !== void 0 ? _e : 0;\r\n            const originalWidthWithoutMovedBlockLines = originalWidth - movedBlocksLinesWidth;\r\n            this.elements.original.style.width = originalWidthWithoutMovedBlockLines + 'px';\r\n            this.elements.original.style.left = '0px';\r\n            this.elements.modified.style.width = modifiedWidth + 'px';\r\n            this.elements.modified.style.left = originalWidth + 'px';\r\n            this._editors.original.layout({ width: originalWidthWithoutMovedBlockLines, height }, true);\r\n            this._editors.modified.layout({ width: modifiedWidth, height }, true);\r\n            return {\r\n                modifiedEditor: this._editors.modified.getLayoutInfo(),\r\n                originalEditor: this._editors.original.getLayoutInfo(),\r\n            };\r\n        });\r\n        this._diffValue = this._diffModel.map((m, r) => m === null || m === void 0 ? void 0 : m.diff.read(r));\r\n        this.onDidUpdateDiff = Event.fromObservableLight(this._diffValue);\r\n        codeEditorService.willCreateDiffEditor();\r\n        this._contextKeyService.createKey('isInDiffEditor', true);\r\n        this._domElement.appendChild(this.elements.root);\r\n        this._register(toDisposable(() => this._domElement.removeChild(this.elements.root)));\r\n        this._rootSizeObserver = this._register(new ObservableElementSizeObserver(this.elements.root, options.dimension));\r\n        this._rootSizeObserver.setAutomaticLayout((_a = options.automaticLayout) !== null && _a !== void 0 ? _a : false);\r\n        this._options = new DiffEditorOptions(options);\r\n        this._register(autorun(reader => {\r\n            this._options.setWidth(this._rootSizeObserver.width.read(reader));\r\n        }));\r\n        this._contextKeyService.createKey(EditorContextKeys.isEmbeddedDiffEditor.key, false);\r\n        this._register(bindContextKey(EditorContextKeys.isEmbeddedDiffEditor, this._contextKeyService, reader => this._options.isInEmbeddedEditor.read(reader)));\r\n        this._register(bindContextKey(EditorContextKeys.comparingMovedCode, this._contextKeyService, reader => { var _a; return !!((_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader)); }));\r\n        this._register(bindContextKey(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, this._contextKeyService, reader => this._options.couldShowInlineViewBecauseOfSize.read(reader)));\r\n        this._register(bindContextKey(EditorContextKeys.hasChanges, this._contextKeyService, reader => { var _a, _b, _c; return ((_c = (_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) !== null && _c !== void 0 ? _c : 0) > 0; }));\r\n        this._editors = this._register(this._instantiationService.createInstance(DiffEditorEditors, this.elements.original, this.elements.modified, this._options, codeEditorWidgetOptions, (i, c, o, o2) => this._createInnerEditor(i, c, o, o2)));\r\n        this._overviewRulerPart = derivedDisposable(this, reader => !this._options.renderOverviewRuler.read(reader)\r\n            ? undefined\r\n            : this._instantiationService.createInstance(readHotReloadableExport(OverviewRulerPart, reader), this._editors, this.elements.root, this._diffModel, this._rootSizeObserver.width, this._rootSizeObserver.height, this._layoutInfo.map(i => i.modifiedEditor))).recomputeInitiallyAndOnChange(this._store);\r\n        this._sash = derivedDisposable(this, reader => {\r\n            const showSash = this._options.renderSideBySide.read(reader);\r\n            this.elements.root.classList.toggle('side-by-side', showSash);\r\n            return !showSash ? undefined : new DiffEditorSash(this._options, this.elements.root, {\r\n                height: this._rootSizeObserver.height,\r\n                width: this._rootSizeObserver.width.map((w, reader) => { var _a, _b; return w - ((_b = (_a = this._overviewRulerPart.read(reader)) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0); }),\r\n            }, this._boundarySashes);\r\n        }).recomputeInitiallyAndOnChange(this._store);\r\n        const unchangedRangesFeature = derivedDisposable(this, reader => /** @description UnchangedRangesFeature */ this._instantiationService.createInstance(readHotReloadableExport(HideUnchangedRegionsFeature, reader), this._editors, this._diffModel, this._options)).recomputeInitiallyAndOnChange(this._store);\r\n        derivedDisposable(this, reader => /** @description DiffEditorDecorations */ this._instantiationService.createInstance(readHotReloadableExport(DiffEditorDecorations, reader), this._editors, this._diffModel, this._options, this)).recomputeInitiallyAndOnChange(this._store);\r\n        const origViewZoneIdsToIgnore = new Set();\r\n        const modViewZoneIdsToIgnore = new Set();\r\n        let isUpdatingViewZones = false;\r\n        const viewZoneManager = derivedDisposable(this, reader => /** @description ViewZoneManager */ this._instantiationService.createInstance(readHotReloadableExport(ViewZoneManager, reader), getWindow(this._domElement), this._editors, this._diffModel, this._options, this, () => isUpdatingViewZones || unchangedRangesFeature.get().isUpdatingHiddenAreas, origViewZoneIdsToIgnore, modViewZoneIdsToIgnore)).recomputeInitiallyAndOnChange(this._store);\r\n        const originalViewZones = derived(this, (reader) => {\r\n            const orig = viewZoneManager.read(reader).viewZones.read(reader).orig;\r\n            const orig2 = unchangedRangesFeature.read(reader).viewZones.read(reader).origViewZones;\r\n            return orig.concat(orig2);\r\n        });\r\n        const modifiedViewZones = derived(this, (reader) => {\r\n            const mod = viewZoneManager.read(reader).viewZones.read(reader).mod;\r\n            const mod2 = unchangedRangesFeature.read(reader).viewZones.read(reader).modViewZones;\r\n            return mod.concat(mod2);\r\n        });\r\n        this._register(applyViewZones(this._editors.original, originalViewZones, isUpdatingOrigViewZones => {\r\n            isUpdatingViewZones = isUpdatingOrigViewZones;\r\n        }, origViewZoneIdsToIgnore));\r\n        let scrollState;\r\n        this._register(applyViewZones(this._editors.modified, modifiedViewZones, isUpdatingModViewZones => {\r\n            isUpdatingViewZones = isUpdatingModViewZones;\r\n            if (isUpdatingViewZones) {\r\n                scrollState = StableEditorScrollState.capture(this._editors.modified);\r\n            }\r\n            else {\r\n                scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(this._editors.modified);\r\n                scrollState = undefined;\r\n            }\r\n        }, modViewZoneIdsToIgnore));\r\n        this._accessibleDiffViewer = derivedDisposable(this, reader => this._instantiationService.createInstance(readHotReloadableExport(AccessibleDiffViewer, reader), this.elements.accessibleDiffViewer, this._accessibleDiffViewerVisible, (visible, tx) => this._accessibleDiffViewerShouldBeVisible.set(visible, tx), this._options.onlyShowAccessibleDiffViewer.map(v => !v), this._rootSizeObserver.width, this._rootSizeObserver.height, this._diffModel.map((m, r) => { var _a; return (_a = m === null || m === void 0 ? void 0 : m.diff.read(r)) === null || _a === void 0 ? void 0 : _a.mappings.map(m => m.lineRangeMapping); }), this._editors)).recomputeInitiallyAndOnChange(this._store);\r\n        const visibility = this._accessibleDiffViewerVisible.map(v => v ? 'hidden' : 'visible');\r\n        this._register(applyStyle(this.elements.modified, { visibility }));\r\n        this._register(applyStyle(this.elements.original, { visibility }));\r\n        this._createDiffEditorContributions();\r\n        codeEditorService.addDiffEditor(this);\r\n        this._register(recomputeInitiallyAndOnChange(this._layoutInfo));\r\n        derivedDisposable(this, reader => /** @description MovedBlocksLinesPart */ new (readHotReloadableExport(MovedBlocksLinesPart, reader))(this.elements.root, this._diffModel, this._layoutInfo.map(i => i.originalEditor), this._layoutInfo.map(i => i.modifiedEditor), this._editors)).recomputeInitiallyAndOnChange(this._store, value => {\r\n            // This is to break the layout info <-> moved blocks lines part dependency cycle.\r\n            this._movedBlocksLinesPart.set(value, undefined);\r\n        });\r\n        this._register(applyStyle(this.elements.overlay, {\r\n            width: this._layoutInfo.map((i, r) => i.originalEditor.width + (this._options.renderSideBySide.read(r) ? 0 : i.modifiedEditor.width)),\r\n            visibility: derived(reader => /** @description visibility */ {\r\n                var _a, _b;\r\n                return (this._options.hideUnchangedRegions.read(reader) && ((_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) === 0)\r\n                    ? 'visible' : 'hidden';\r\n            }),\r\n        }));\r\n        this._register(Event.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition, (e) => {\r\n            var _a, _b;\r\n            if ((e === null || e === void 0 ? void 0 : e.reason) === 3 /* CursorChangeReason.Explicit */) {\r\n                const diff = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.find(m => m.lineRangeMapping.modified.contains(e.position.lineNumber));\r\n                if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.modified.isEmpty) {\r\n                    this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, { source: 'diffEditor.cursorPositionChanged' });\r\n                }\r\n                else if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.original.isEmpty) {\r\n                    this._audioCueService.playAudioCue(AudioCue.diffLineInserted, { source: 'diffEditor.cursorPositionChanged' });\r\n                }\r\n                else if (diff) {\r\n                    this._audioCueService.playAudioCue(AudioCue.diffLineModified, { source: 'diffEditor.cursorPositionChanged' });\r\n                }\r\n            }\r\n        }));\r\n        const isInitializingDiff = this._diffModel.map(this, (m, reader) => {\r\n            /** @isInitializingDiff isDiffUpToDate */\r\n            if (!m) {\r\n                return undefined;\r\n            }\r\n            return m.diff.read(reader) === undefined && !m.isDiffUpToDate.read(reader);\r\n        });\r\n        this._register(autorunWithStore((reader, store) => {\r\n            /** @description DiffEditorWidgetHelper.ShowProgress */\r\n            if (isInitializingDiff.read(reader) === true) {\r\n                const r = this._editorProgressService.show(true, 1000);\r\n                store.add(toDisposable(() => r.done()));\r\n            }\r\n        }));\r\n        this._register(toDisposable(() => {\r\n            var _a;\r\n            if (this._shouldDisposeDiffModel) {\r\n                (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.dispose();\r\n            }\r\n        }));\r\n    }\r\n    _createInnerEditor(instantiationService, container, options, editorWidgetOptions) {\r\n        const editor = instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\r\n        return editor;\r\n    }\r\n    _createDiffEditorContributions() {\r\n        const contributions = EditorExtensionsRegistry.getDiffEditorContributions();\r\n        for (const desc of contributions) {\r\n            try {\r\n                this._register(this._instantiationService.createInstance(desc.ctor, this));\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n        }\r\n    }\r\n    get _targetEditor() { return this._editors.modified; }\r\n    getEditorType() { return EditorType.IDiffEditor; }\r\n    layout(dimension) {\r\n        this._rootSizeObserver.observe(dimension);\r\n    }\r\n    hasTextFocus() { return this._editors.original.hasTextFocus() || this._editors.modified.hasTextFocus(); }\r\n    saveViewState() {\r\n        var _a;\r\n        const originalViewState = this._editors.original.saveViewState();\r\n        const modifiedViewState = this._editors.modified.saveViewState();\r\n        return {\r\n            original: originalViewState,\r\n            modified: modifiedViewState,\r\n            modelState: (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.serializeState(),\r\n        };\r\n    }\r\n    restoreViewState(s) {\r\n        var _a;\r\n        if (s && s.original && s.modified) {\r\n            const diffEditorState = s;\r\n            this._editors.original.restoreViewState(diffEditorState.original);\r\n            this._editors.modified.restoreViewState(diffEditorState.modified);\r\n            if (diffEditorState.modelState) {\r\n                (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.restoreSerializedState(diffEditorState.modelState);\r\n            }\r\n        }\r\n    }\r\n    handleInitialized() {\r\n        this._editors.original.handleInitialized();\r\n        this._editors.modified.handleInitialized();\r\n    }\r\n    createViewModel(model) {\r\n        return this._instantiationService.createInstance(DiffEditorViewModel, model, this._options);\r\n    }\r\n    getModel() { var _a, _b; return (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model) !== null && _b !== void 0 ? _b : null; }\r\n    setModel(model, tx) {\r\n        if (!model && this._diffModel.get()) {\r\n            // Transitioning from a model to no-model\r\n            this._accessibleDiffViewer.get().close();\r\n        }\r\n        const vm = model ? ('model' in model) ? { model, shouldDispose: false } : { model: this.createViewModel(model), shouldDispose: true } : undefined;\r\n        if (this._diffModel.get() !== (vm === null || vm === void 0 ? void 0 : vm.model)) {\r\n            subtransaction(tx, tx => {\r\n                var _a;\r\n                /** @description DiffEditorWidget.setModel */\r\n                observableFromEvent.batchEventsGlobally(tx, () => {\r\n                    this._editors.original.setModel(vm ? vm.model.model.original : null);\r\n                    this._editors.modified.setModel(vm ? vm.model.model.modified : null);\r\n                });\r\n                const prevValue = this._diffModel.get();\r\n                const shouldDispose = this._shouldDisposeDiffModel;\r\n                this._shouldDisposeDiffModel = (_a = vm === null || vm === void 0 ? void 0 : vm.shouldDispose) !== null && _a !== void 0 ? _a : false;\r\n                this._diffModel.set(vm === null || vm === void 0 ? void 0 : vm.model, tx);\r\n                if (shouldDispose) {\r\n                    prevValue === null || prevValue === void 0 ? void 0 : prevValue.dispose();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * @param changedOptions Only has values for top-level options that have actually changed.\r\n     */\r\n    updateOptions(changedOptions) {\r\n        this._options.updateOptions(changedOptions);\r\n    }\r\n    getContainerDomNode() { return this._domElement; }\r\n    getOriginalEditor() { return this._editors.original; }\r\n    getModifiedEditor() { return this._editors.modified; }\r\n    /**\r\n     * @deprecated Use `this.getDiffComputationResult().changes2` instead.\r\n     */\r\n    getLineChanges() {\r\n        var _a;\r\n        const diffState = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get();\r\n        if (!diffState) {\r\n            return null;\r\n        }\r\n        return toLineChanges(diffState);\r\n    }\r\n    revert(diff) {\r\n        var _a;\r\n        if (diff.innerChanges) {\r\n            this.revertRangeMappings(diff.innerChanges);\r\n            return;\r\n        }\r\n        const model = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model;\r\n        if (!model) {\r\n            return;\r\n        }\r\n        this._editors.modified.executeEdits('diffEditor', [\r\n            {\r\n                range: diff.modified.toExclusiveRange(),\r\n                text: model.original.getValueInRange(diff.original.toExclusiveRange())\r\n            }\r\n        ]);\r\n    }\r\n    revertRangeMappings(diffs) {\r\n        const model = this._diffModel.get();\r\n        if (!model || !model.isDiffUpToDate.get()) {\r\n            return;\r\n        }\r\n        const changes = diffs.map(c => ({\r\n            range: c.modifiedRange,\r\n            text: model.model.original.getValueInRange(c.originalRange)\r\n        }));\r\n        this._editors.modified.executeEdits('diffEditor', changes);\r\n    }\r\n    _goTo(diff) {\r\n        this._editors.modified.setPosition(new Position(diff.lineRangeMapping.modified.startLineNumber, 1));\r\n        this._editors.modified.revealRangeInCenter(diff.lineRangeMapping.modified.toExclusiveRange());\r\n    }\r\n    goToDiff(target) {\r\n        var _a, _b, _c, _d;\r\n        const diffs = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings;\r\n        if (!diffs || diffs.length === 0) {\r\n            return;\r\n        }\r\n        const curLineNumber = this._editors.modified.getPosition().lineNumber;\r\n        let diff;\r\n        if (target === 'next') {\r\n            diff = (_c = diffs.find(d => d.lineRangeMapping.modified.startLineNumber > curLineNumber)) !== null && _c !== void 0 ? _c : diffs[0];\r\n        }\r\n        else {\r\n            diff = (_d = findLast(diffs, d => d.lineRangeMapping.modified.startLineNumber < curLineNumber)) !== null && _d !== void 0 ? _d : diffs[diffs.length - 1];\r\n        }\r\n        this._goTo(diff);\r\n        if (diff.lineRangeMapping.modified.isEmpty) {\r\n            this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, { source: 'diffEditor.goToDiff' });\r\n        }\r\n        else if (diff.lineRangeMapping.original.isEmpty) {\r\n            this._audioCueService.playAudioCue(AudioCue.diffLineInserted, { source: 'diffEditor.goToDiff' });\r\n        }\r\n        else if (diff) {\r\n            this._audioCueService.playAudioCue(AudioCue.diffLineModified, { source: 'diffEditor.goToDiff' });\r\n        }\r\n    }\r\n    revealFirstDiff() {\r\n        const diffModel = this._diffModel.get();\r\n        if (!diffModel) {\r\n            return;\r\n        }\r\n        // wait for the diff computation to finish\r\n        this.waitForDiff().then(() => {\r\n            var _a;\r\n            const diffs = (_a = diffModel.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings;\r\n            if (!diffs || diffs.length === 0) {\r\n                return;\r\n            }\r\n            this._goTo(diffs[0]);\r\n        });\r\n    }\r\n    accessibleDiffViewerNext() { this._accessibleDiffViewer.get().next(); }\r\n    accessibleDiffViewerPrev() { this._accessibleDiffViewer.get().prev(); }\r\n    async waitForDiff() {\r\n        const diffModel = this._diffModel.get();\r\n        if (!diffModel) {\r\n            return;\r\n        }\r\n        await diffModel.waitForDiff();\r\n    }\r\n    mapToOtherSide() {\r\n        var _a, _b;\r\n        const isModifiedFocus = this._editors.modified.hasWidgetFocus();\r\n        const source = isModifiedFocus ? this._editors.modified : this._editors.original;\r\n        const destination = isModifiedFocus ? this._editors.original : this._editors.modified;\r\n        let destinationSelection;\r\n        const sourceSelection = source.getSelection();\r\n        if (sourceSelection) {\r\n            const mappings = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.map(m => isModifiedFocus ? m.lineRangeMapping.flip() : m.lineRangeMapping);\r\n            if (mappings) {\r\n                const newRange1 = translatePosition(sourceSelection.getStartPosition(), mappings);\r\n                const newRange2 = translatePosition(sourceSelection.getEndPosition(), mappings);\r\n                destinationSelection = Range.plusRange(newRange1, newRange2);\r\n            }\r\n        }\r\n        return { destination, destinationSelection };\r\n    }\r\n    switchSide() {\r\n        const { destination, destinationSelection } = this.mapToOtherSide();\r\n        destination.focus();\r\n        if (destinationSelection) {\r\n            destination.setSelection(destinationSelection);\r\n        }\r\n    }\r\n    exitCompareMove() {\r\n        const model = this._diffModel.get();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        model.movedTextToCompare.set(undefined, undefined);\r\n    }\r\n    collapseAllUnchangedRegions() {\r\n        var _a;\r\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\r\n        if (!unchangedRegions) {\r\n            return;\r\n        }\r\n        transaction(tx => {\r\n            for (const region of unchangedRegions) {\r\n                region.collapseAll(tx);\r\n            }\r\n        });\r\n    }\r\n    showAllUnchangedRegions() {\r\n        var _a;\r\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\r\n        if (!unchangedRegions) {\r\n            return;\r\n        }\r\n        transaction(tx => {\r\n            for (const region of unchangedRegions) {\r\n                region.showAll(tx);\r\n            }\r\n        });\r\n    }\r\n};\r\nDiffEditorWidget = __decorate([\r\n    __param(3, IContextKeyService),\r\n    __param(4, IInstantiationService),\r\n    __param(5, ICodeEditorService),\r\n    __param(6, IAudioCueService),\r\n    __param(7, IEditorProgressService)\r\n], DiffEditorWidget);\r\nexport { DiffEditorWidget };\r\nfunction toLineChanges(state) {\r\n    return state.mappings.map(x => {\r\n        const m = x.lineRangeMapping;\r\n        let originalStartLineNumber;\r\n        let originalEndLineNumber;\r\n        let modifiedStartLineNumber;\r\n        let modifiedEndLineNumber;\r\n        let innerChanges = m.innerChanges;\r\n        if (m.original.isEmpty) {\r\n            // Insertion\r\n            originalStartLineNumber = m.original.startLineNumber - 1;\r\n            originalEndLineNumber = 0;\r\n            innerChanges = undefined;\r\n        }\r\n        else {\r\n            originalStartLineNumber = m.original.startLineNumber;\r\n            originalEndLineNumber = m.original.endLineNumberExclusive - 1;\r\n        }\r\n        if (m.modified.isEmpty) {\r\n            // Deletion\r\n            modifiedStartLineNumber = m.modified.startLineNumber - 1;\r\n            modifiedEndLineNumber = 0;\r\n            innerChanges = undefined;\r\n        }\r\n        else {\r\n            modifiedStartLineNumber = m.modified.startLineNumber;\r\n            modifiedEndLineNumber = m.modified.endLineNumberExclusive - 1;\r\n        }\r\n        return {\r\n            originalStartLineNumber,\r\n            originalEndLineNumber,\r\n            modifiedStartLineNumber,\r\n            modifiedEndLineNumber,\r\n            charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(m => ({\r\n                originalStartLineNumber: m.originalRange.startLineNumber,\r\n                originalStartColumn: m.originalRange.startColumn,\r\n                originalEndLineNumber: m.originalRange.endLineNumber,\r\n                originalEndColumn: m.originalRange.endColumn,\r\n                modifiedStartLineNumber: m.modifiedRange.startLineNumber,\r\n                modifiedStartColumn: m.modifiedRange.startColumn,\r\n                modifiedEndLineNumber: m.modifiedRange.endLineNumber,\r\n                modifiedEndColumn: m.modifiedRange.endColumn,\r\n            }))\r\n        };\r\n    });\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { env } from './process.js';\r\nexport function isHotReloadEnabled() {\r\n    return env && !!env['VSCODE_DEV'];\r\n}\r\nexport function registerHotReloadHandler(handler) {\r\n    if (!isHotReloadEnabled()) {\r\n        return { dispose() { } };\r\n    }\r\n    else {\r\n        const handlers = registerGlobalHotReloadHandler();\r\n        handlers.add(handler);\r\n        return {\r\n            dispose() { handlers.delete(handler); }\r\n        };\r\n    }\r\n}\r\nfunction registerGlobalHotReloadHandler() {\r\n    if (!hotReloadHandlers) {\r\n        hotReloadHandlers = new Set();\r\n    }\r\n    const g = globalThis;\r\n    if (!g.$hotReload_applyNewExports) {\r\n        g.$hotReload_applyNewExports = oldExports => {\r\n            for (const h of hotReloadHandlers) {\r\n                const result = h(oldExports);\r\n                if (result) {\r\n                    return result;\r\n                }\r\n            }\r\n            return undefined;\r\n        };\r\n    }\r\n    return hotReloadHandlers;\r\n}\r\nlet hotReloadHandlers = undefined;\r\nif (isHotReloadEnabled()) {\r\n    // This code does not run in production.\r\n    registerHotReloadHandler(({ oldExports, newSrc }) => {\r\n        // Don't match its own source code\r\n        if (newSrc.indexOf('/* ' + 'hot-reload:patch-prototype-methods */') === -1) {\r\n            return undefined;\r\n        }\r\n        return newExports => {\r\n            var _a, _b;\r\n            for (const key in newExports) {\r\n                const exportedItem = newExports[key];\r\n                console.log(`[hot-reload] Patching prototype methods of '${key}'`, { exportedItem });\r\n                if (typeof exportedItem === 'function' && exportedItem.prototype) {\r\n                    const oldExportedItem = oldExports[key];\r\n                    if (oldExportedItem) {\r\n                        for (const prop of Object.getOwnPropertyNames(exportedItem.prototype)) {\r\n                            const descriptor = Object.getOwnPropertyDescriptor(exportedItem.prototype, prop);\r\n                            const oldDescriptor = Object.getOwnPropertyDescriptor(oldExportedItem.prototype, prop);\r\n                            if (((_a = descriptor === null || descriptor === void 0 ? void 0 : descriptor.value) === null || _a === void 0 ? void 0 : _a.toString()) !== ((_b = oldDescriptor === null || oldDescriptor === void 0 ? void 0 : oldDescriptor.value) === null || _b === void 0 ? void 0 : _b.toString())) {\r\n                                console.log(`[hot-reload] Patching prototype method '${key}.${prop}'`);\r\n                            }\r\n                            Object.defineProperty(oldExportedItem.prototype, prop, descriptor);\r\n                        }\r\n                        newExports[key] = oldExportedItem;\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n    });\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { findLast } from '../../../../base/common/arraysFind.js';\r\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { isHotReloadEnabled, registerHotReloadHandler } from '../../../../base/common/hotReload.js';\r\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, autorunHandleChanges, autorunOpts, autorunWithStore, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\r\nimport { ElementSizeObserver } from '../../config/elementSizeObserver.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { LengthObj } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/length.js';\r\nexport function joinCombine(arr1, arr2, keySelector, combine) {\r\n    if (arr1.length === 0) {\r\n        return arr2;\r\n    }\r\n    if (arr2.length === 0) {\r\n        return arr1;\r\n    }\r\n    const result = [];\r\n    let i = 0;\r\n    let j = 0;\r\n    while (i < arr1.length && j < arr2.length) {\r\n        const val1 = arr1[i];\r\n        const val2 = arr2[j];\r\n        const key1 = keySelector(val1);\r\n        const key2 = keySelector(val2);\r\n        if (key1 < key2) {\r\n            result.push(val1);\r\n            i++;\r\n        }\r\n        else if (key1 > key2) {\r\n            result.push(val2);\r\n            j++;\r\n        }\r\n        else {\r\n            result.push(combine(val1, val2));\r\n            i++;\r\n            j++;\r\n        }\r\n    }\r\n    while (i < arr1.length) {\r\n        result.push(arr1[i]);\r\n        i++;\r\n    }\r\n    while (j < arr2.length) {\r\n        result.push(arr2[j]);\r\n        j++;\r\n    }\r\n    return result;\r\n}\r\n// TODO make utility\r\nexport function applyObservableDecorations(editor, decorations) {\r\n    const d = new DisposableStore();\r\n    const decorationsCollection = editor.createDecorationsCollection();\r\n    d.add(autorunOpts({ debugName: () => `Apply decorations from ${decorations.debugName}` }, reader => {\r\n        const d = decorations.read(reader);\r\n        decorationsCollection.set(d);\r\n    }));\r\n    d.add({\r\n        dispose: () => {\r\n            decorationsCollection.clear();\r\n        }\r\n    });\r\n    return d;\r\n}\r\nexport function appendRemoveOnDispose(parent, child) {\r\n    parent.appendChild(child);\r\n    return toDisposable(() => {\r\n        parent.removeChild(child);\r\n    });\r\n}\r\nexport class ObservableElementSizeObserver extends Disposable {\r\n    get width() { return this._width; }\r\n    get height() { return this._height; }\r\n    constructor(element, dimension) {\r\n        super();\r\n        this.elementSizeObserver = this._register(new ElementSizeObserver(element, dimension));\r\n        this._width = observableValue(this, this.elementSizeObserver.getWidth());\r\n        this._height = observableValue(this, this.elementSizeObserver.getHeight());\r\n        this._register(this.elementSizeObserver.onDidChange(e => transaction(tx => {\r\n            /** @description Set width/height from elementSizeObserver */\r\n            this._width.set(this.elementSizeObserver.getWidth(), tx);\r\n            this._height.set(this.elementSizeObserver.getHeight(), tx);\r\n        })));\r\n    }\r\n    observe(dimension) {\r\n        this.elementSizeObserver.observe(dimension);\r\n    }\r\n    setAutomaticLayout(automaticLayout) {\r\n        if (automaticLayout) {\r\n            this.elementSizeObserver.startObserving();\r\n        }\r\n        else {\r\n            this.elementSizeObserver.stopObserving();\r\n        }\r\n    }\r\n}\r\nexport function animatedObservable(targetWindow, base, store) {\r\n    let targetVal = base.get();\r\n    let startVal = targetVal;\r\n    let curVal = targetVal;\r\n    const result = observableValue('animatedValue', targetVal);\r\n    let animationStartMs = -1;\r\n    const durationMs = 300;\r\n    let animationFrame = undefined;\r\n    store.add(autorunHandleChanges({\r\n        createEmptyChangeSummary: () => ({ animate: false }),\r\n        handleChange: (ctx, s) => {\r\n            if (ctx.didChange(base)) {\r\n                s.animate = s.animate || ctx.change;\r\n            }\r\n            return true;\r\n        }\r\n    }, (reader, s) => {\r\n        /** @description update value */\r\n        if (animationFrame !== undefined) {\r\n            targetWindow.cancelAnimationFrame(animationFrame);\r\n            animationFrame = undefined;\r\n        }\r\n        startVal = curVal;\r\n        targetVal = base.read(reader);\r\n        animationStartMs = Date.now() - (s.animate ? 0 : durationMs);\r\n        update();\r\n    }));\r\n    function update() {\r\n        const passedMs = Date.now() - animationStartMs;\r\n        curVal = Math.floor(easeOutExpo(passedMs, startVal, targetVal - startVal, durationMs));\r\n        if (passedMs < durationMs) {\r\n            animationFrame = targetWindow.requestAnimationFrame(update);\r\n        }\r\n        else {\r\n            curVal = targetVal;\r\n        }\r\n        result.set(curVal, undefined);\r\n    }\r\n    return result;\r\n}\r\nfunction easeOutExpo(t, b, c, d) {\r\n    return t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\r\n}\r\nexport class ViewZoneOverlayWidget extends Disposable {\r\n    constructor(editor, viewZone, htmlElement) {\r\n        super();\r\n        this._register(new ManagedOverlayWidget(editor, htmlElement));\r\n        this._register(applyStyle(htmlElement, {\r\n            height: viewZone.actualHeight,\r\n            top: viewZone.actualTop,\r\n        }));\r\n    }\r\n}\r\nexport class PlaceholderViewZone {\r\n    get afterLineNumber() { return this._afterLineNumber.get(); }\r\n    constructor(_afterLineNumber, heightInPx) {\r\n        this._afterLineNumber = _afterLineNumber;\r\n        this.heightInPx = heightInPx;\r\n        this.domNode = document.createElement('div');\r\n        this._actualTop = observableValue(this, undefined);\r\n        this._actualHeight = observableValue(this, undefined);\r\n        this.actualTop = this._actualTop;\r\n        this.actualHeight = this._actualHeight;\r\n        this.showInHiddenAreas = true;\r\n        this.onChange = this._afterLineNumber;\r\n        this.onDomNodeTop = (top) => {\r\n            this._actualTop.set(top, undefined);\r\n        };\r\n        this.onComputedHeight = (height) => {\r\n            this._actualHeight.set(height, undefined);\r\n        };\r\n    }\r\n}\r\nexport class ManagedOverlayWidget {\r\n    constructor(_editor, _domElement) {\r\n        this._editor = _editor;\r\n        this._domElement = _domElement;\r\n        this._overlayWidgetId = `managedOverlayWidget-${ManagedOverlayWidget._counter++}`;\r\n        this._overlayWidget = {\r\n            getId: () => this._overlayWidgetId,\r\n            getDomNode: () => this._domElement,\r\n            getPosition: () => null\r\n        };\r\n        this._editor.addOverlayWidget(this._overlayWidget);\r\n    }\r\n    dispose() {\r\n        this._editor.removeOverlayWidget(this._overlayWidget);\r\n    }\r\n}\r\nManagedOverlayWidget._counter = 0;\r\nexport function applyStyle(domNode, style) {\r\n    return autorun(reader => {\r\n        /** @description applyStyle */\r\n        for (let [key, val] of Object.entries(style)) {\r\n            if (val && typeof val === 'object' && 'read' in val) {\r\n                val = val.read(reader);\r\n            }\r\n            if (typeof val === 'number') {\r\n                val = `${val}px`;\r\n            }\r\n            key = key.replace(/[A-Z]/g, m => '-' + m.toLowerCase());\r\n            domNode.style[key] = val;\r\n        }\r\n    });\r\n}\r\nexport function readHotReloadableExport(value, reader) {\r\n    observeHotReloadableExports([value], reader);\r\n    return value;\r\n}\r\nexport function observeHotReloadableExports(values, reader) {\r\n    if (isHotReloadEnabled()) {\r\n        const o = observableSignalFromEvent('reload', event => registerHotReloadHandler(({ oldExports }) => {\r\n            if (![...Object.values(oldExports)].some(v => values.includes(v))) {\r\n                return undefined;\r\n            }\r\n            return (_newExports) => {\r\n                event(undefined);\r\n                return true;\r\n            };\r\n        }));\r\n        o.read(reader);\r\n    }\r\n}\r\nexport function applyViewZones(editor, viewZones, setIsUpdating, zoneIds) {\r\n    const store = new DisposableStore();\r\n    const lastViewZoneIds = [];\r\n    store.add(autorunWithStore((reader, store) => {\r\n        /** @description applyViewZones */\r\n        const curViewZones = viewZones.read(reader);\r\n        const viewZonIdsPerViewZone = new Map();\r\n        const viewZoneIdPerOnChangeObservable = new Map();\r\n        // Add/remove view zones\r\n        if (setIsUpdating) {\r\n            setIsUpdating(true);\r\n        }\r\n        editor.changeViewZones(a => {\r\n            for (const id of lastViewZoneIds) {\r\n                a.removeZone(id);\r\n                zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.delete(id);\r\n            }\r\n            lastViewZoneIds.length = 0;\r\n            for (const z of curViewZones) {\r\n                const id = a.addZone(z);\r\n                if (z.setZoneId) {\r\n                    z.setZoneId(id);\r\n                }\r\n                lastViewZoneIds.push(id);\r\n                zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.add(id);\r\n                viewZonIdsPerViewZone.set(z, id);\r\n            }\r\n        });\r\n        if (setIsUpdating) {\r\n            setIsUpdating(false);\r\n        }\r\n        // Layout zone on change\r\n        store.add(autorunHandleChanges({\r\n            createEmptyChangeSummary() {\r\n                return { zoneIds: [] };\r\n            },\r\n            handleChange(context, changeSummary) {\r\n                const id = viewZoneIdPerOnChangeObservable.get(context.changedObservable);\r\n                if (id !== undefined) {\r\n                    changeSummary.zoneIds.push(id);\r\n                }\r\n                return true;\r\n            },\r\n        }, (reader, changeSummary) => {\r\n            /** @description layoutZone on change */\r\n            for (const vz of curViewZones) {\r\n                if (vz.onChange) {\r\n                    viewZoneIdPerOnChangeObservable.set(vz.onChange, viewZonIdsPerViewZone.get(vz));\r\n                    vz.onChange.read(reader);\r\n                }\r\n            }\r\n            if (setIsUpdating) {\r\n                setIsUpdating(true);\r\n            }\r\n            editor.changeViewZones(a => { for (const id of changeSummary.zoneIds) {\r\n                a.layoutZone(id);\r\n            } });\r\n            if (setIsUpdating) {\r\n                setIsUpdating(false);\r\n            }\r\n        }));\r\n    }));\r\n    store.add({\r\n        dispose() {\r\n            if (setIsUpdating) {\r\n                setIsUpdating(true);\r\n            }\r\n            editor.changeViewZones(a => { for (const id of lastViewZoneIds) {\r\n                a.removeZone(id);\r\n            } });\r\n            zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.clear();\r\n            if (setIsUpdating) {\r\n                setIsUpdating(false);\r\n            }\r\n        }\r\n    });\r\n    return store;\r\n}\r\nexport class DisposableCancellationTokenSource extends CancellationTokenSource {\r\n    dispose() {\r\n        super.dispose(true);\r\n    }\r\n}\r\nexport function translatePosition(posInOriginal, mappings) {\r\n    const mapping = findLast(mappings, m => m.original.startLineNumber <= posInOriginal.lineNumber);\r\n    if (!mapping) {\r\n        // No changes before the position\r\n        return Range.fromPositions(posInOriginal);\r\n    }\r\n    if (mapping.original.endLineNumberExclusive <= posInOriginal.lineNumber) {\r\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.endLineNumberExclusive + mapping.modified.endLineNumberExclusive;\r\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\r\n    }\r\n    if (!mapping.innerChanges) {\r\n        // Only for legacy algorithm\r\n        return Range.fromPositions(new Position(mapping.modified.startLineNumber, 1));\r\n    }\r\n    const innerMapping = findLast(mapping.innerChanges, m => m.originalRange.getStartPosition().isBeforeOrEqual(posInOriginal));\r\n    if (!innerMapping) {\r\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.startLineNumber + mapping.modified.startLineNumber;\r\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\r\n    }\r\n    if (innerMapping.originalRange.containsPosition(posInOriginal)) {\r\n        return innerMapping.modifiedRange;\r\n    }\r\n    else {\r\n        const l = lengthBetweenPositions(innerMapping.originalRange.getEndPosition(), posInOriginal);\r\n        return Range.fromPositions(addLength(innerMapping.modifiedRange.getEndPosition(), l));\r\n    }\r\n}\r\nfunction lengthBetweenPositions(position1, position2) {\r\n    if (position1.lineNumber === position2.lineNumber) {\r\n        return new LengthObj(0, position2.column - position1.column);\r\n    }\r\n    else {\r\n        return new LengthObj(position2.lineNumber - position1.lineNumber, position2.column - 1);\r\n    }\r\n}\r\nfunction addLength(position, length) {\r\n    if (length.lineCount === 0) {\r\n        return new Position(position.lineNumber, position.column + length.columnCount);\r\n    }\r\n    else {\r\n        return new Position(position.lineNumber + length.lineCount, length.columnCount + 1);\r\n    }\r\n}\r\nexport function bindContextKey(key, service, computeValue) {\r\n    const boundKey = key.bindTo(service);\r\n    return autorunOpts({ debugName: () => `Update ${key.key}` }, reader => {\r\n        boundKey.set(computeValue(reader));\r\n    });\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../base/browser/dom.js';\r\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\r\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { Action } from '../../../../base/common/actions.js';\r\nimport { forEachAdjacent, groupAdjacentBy } from '../../../../base/common/arrays.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableValue, subtransaction, transaction } from '../../../../base/common/observable.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { applyFontInfo } from '../../config/domFontInfo.js';\r\nimport { applyStyle } from './utils.js';\r\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\r\nimport { LineRange } from '../../../common/core/lineRange.js';\r\nimport { OffsetRange } from '../../../common/core/offsetRange.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { LineRangeMapping } from '../../../common/diff/rangeMapping.js';\r\nimport { ILanguageService } from '../../../common/languages/language.js';\r\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\r\nimport { RenderLineInput, renderViewLine2 } from '../../../common/viewLayout/viewLineRenderer.js';\r\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\r\nimport './accessibleDiffViewer.css';\r\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\r\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\r\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\r\nlet AccessibleDiffViewer = class AccessibleDiffViewer extends Disposable {\r\n    constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _editors, _instantiationService) {\r\n        super();\r\n        this._parentNode = _parentNode;\r\n        this._visible = _visible;\r\n        this._setVisible = _setVisible;\r\n        this._canClose = _canClose;\r\n        this._width = _width;\r\n        this._height = _height;\r\n        this._diffs = _diffs;\r\n        this._editors = _editors;\r\n        this._instantiationService = _instantiationService;\r\n        this._state = derivedWithStore(this, (reader, store) => {\r\n            const visible = this._visible.read(reader);\r\n            this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\r\n            if (!visible) {\r\n                return null;\r\n            }\r\n            const model = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._editors, this._setVisible, this._canClose));\r\n            const view = store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._editors));\r\n            return { model, view, };\r\n        }).recomputeInitiallyAndOnChange(this._store);\r\n    }\r\n    next() {\r\n        transaction(tx => {\r\n            const isVisible = this._visible.get();\r\n            this._setVisible(true, tx);\r\n            if (isVisible) {\r\n                this._state.get().model.nextGroup(tx);\r\n            }\r\n        });\r\n    }\r\n    prev() {\r\n        transaction(tx => {\r\n            this._setVisible(true, tx);\r\n            this._state.get().model.previousGroup(tx);\r\n        });\r\n    }\r\n    close() {\r\n        transaction(tx => {\r\n            this._setVisible(false, tx);\r\n        });\r\n    }\r\n};\r\nAccessibleDiffViewer._ttPolicy = createTrustedTypesPolicy('diffReview', { createHTML: value => value });\r\nAccessibleDiffViewer = __decorate([\r\n    __param(8, IInstantiationService)\r\n], AccessibleDiffViewer);\r\nexport { AccessibleDiffViewer };\r\nlet ViewModel = class ViewModel extends Disposable {\r\n    constructor(_diffs, _editors, _setVisible, canClose, _audioCueService) {\r\n        super();\r\n        this._diffs = _diffs;\r\n        this._editors = _editors;\r\n        this._setVisible = _setVisible;\r\n        this.canClose = canClose;\r\n        this._audioCueService = _audioCueService;\r\n        this._groups = observableValue(this, []);\r\n        this._currentGroupIdx = observableValue(this, 0);\r\n        this._currentElementIdx = observableValue(this, 0);\r\n        this.groups = this._groups;\r\n        this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\r\n        this.currentGroupIndex = this._currentGroupIdx;\r\n        this.currentElement = this._currentElementIdx.map((idx, r) => { var _a; return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx]; });\r\n        this._register(autorun(reader => {\r\n            /** @description update groups */\r\n            const diffs = this._diffs.read(reader);\r\n            if (!diffs) {\r\n                this._groups.set([], undefined);\r\n                return;\r\n            }\r\n            const groups = computeViewElementGroups(diffs, this._editors.original.getModel().getLineCount(), this._editors.modified.getModel().getLineCount());\r\n            transaction(tx => {\r\n                const p = this._editors.modified.getPosition();\r\n                if (p) {\r\n                    const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);\r\n                    if (nextGroup !== -1) {\r\n                        this._currentGroupIdx.set(nextGroup, tx);\r\n                    }\r\n                }\r\n                this._groups.set(groups, tx);\r\n            });\r\n        }));\r\n        this._register(autorun(reader => {\r\n            /** @description play audio-cue for diff */\r\n            const currentViewItem = this.currentElement.read(reader);\r\n            if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\r\n                this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, { source: 'accessibleDiffViewer.currentElementChanged' });\r\n            }\r\n            else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\r\n                this._audioCueService.playAudioCue(AudioCue.diffLineInserted, { source: 'accessibleDiffViewer.currentElementChanged' });\r\n            }\r\n        }));\r\n        this._register(autorun(reader => {\r\n            var _a;\r\n            /** @description select lines in editor */\r\n            // This ensures editor commands (like revert/stage) work\r\n            const currentViewItem = this.currentElement.read(reader);\r\n            if (currentViewItem && currentViewItem.type !== LineType.Header) {\r\n                const lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modified.startLineNumber;\r\n                this._editors.modified.setSelection(Range.fromPositions(new Position(lineNumber, 1)));\r\n            }\r\n        }));\r\n    }\r\n    _goToGroupDelta(delta, tx) {\r\n        const groups = this.groups.get();\r\n        if (!groups || groups.length <= 1) {\r\n            return;\r\n        }\r\n        subtransaction(tx, tx => {\r\n            this._currentGroupIdx.set(OffsetRange.ofLength(groups.length).clipCyclic(this._currentGroupIdx.get() + delta), tx);\r\n            this._currentElementIdx.set(0, tx);\r\n        });\r\n    }\r\n    nextGroup(tx) { this._goToGroupDelta(1, tx); }\r\n    previousGroup(tx) { this._goToGroupDelta(-1, tx); }\r\n    _goToLineDelta(delta) {\r\n        const group = this.currentGroup.get();\r\n        if (!group || group.lines.length <= 1) {\r\n            return;\r\n        }\r\n        transaction(tx => {\r\n            this._currentElementIdx.set(OffsetRange.ofLength(group.lines.length).clip(this._currentElementIdx.get() + delta), tx);\r\n        });\r\n    }\r\n    goToNextLine() { this._goToLineDelta(1); }\r\n    goToPreviousLine() { this._goToLineDelta(-1); }\r\n    goToLine(line) {\r\n        const group = this.currentGroup.get();\r\n        if (!group) {\r\n            return;\r\n        }\r\n        const idx = group.lines.indexOf(line);\r\n        if (idx === -1) {\r\n            return;\r\n        }\r\n        transaction(tx => {\r\n            this._currentElementIdx.set(idx, tx);\r\n        });\r\n    }\r\n    revealCurrentElementInEditor() {\r\n        this._setVisible(false, undefined);\r\n        const curElem = this.currentElement.get();\r\n        if (curElem) {\r\n            if (curElem.type === LineType.Deleted) {\r\n                this._editors.original.setSelection(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\r\n                this._editors.original.revealLine(curElem.originalLineNumber);\r\n                this._editors.original.focus();\r\n            }\r\n            else {\r\n                if (curElem.type !== LineType.Header) {\r\n                    this._editors.modified.setSelection(Range.fromPositions(new Position(curElem.modifiedLineNumber, 1)));\r\n                    this._editors.modified.revealLine(curElem.modifiedLineNumber);\r\n                }\r\n                this._editors.modified.focus();\r\n            }\r\n        }\r\n    }\r\n    close() {\r\n        this._setVisible(false, undefined);\r\n        this._editors.modified.focus();\r\n    }\r\n};\r\nViewModel = __decorate([\r\n    __param(4, IAudioCueService)\r\n], ViewModel);\r\nconst viewElementGroupLineMargin = 3;\r\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\r\n    const result = [];\r\n    for (const g of groupAdjacentBy(diffs, (a, b) => (b.modified.startLineNumber - a.modified.endLineNumberExclusive < 2 * viewElementGroupLineMargin))) {\r\n        const viewElements = [];\r\n        viewElements.push(new HeaderViewElement());\r\n        const origFullRange = new LineRange(Math.max(1, g[0].original.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].original.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\r\n        const modifiedFullRange = new LineRange(Math.max(1, g[0].modified.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modified.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\r\n        forEachAdjacent(g, (a, b) => {\r\n            const origRange = new LineRange(a ? a.original.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.original.startLineNumber : origFullRange.endLineNumberExclusive);\r\n            const modifiedRange = new LineRange(a ? a.modified.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modified.startLineNumber : modifiedFullRange.endLineNumberExclusive);\r\n            origRange.forEach(origLineNumber => {\r\n                viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\r\n            });\r\n            if (b) {\r\n                b.original.forEach(origLineNumber => {\r\n                    viewElements.push(new DeletedLineViewElement(b, origLineNumber));\r\n                });\r\n                b.modified.forEach(modifiedLineNumber => {\r\n                    viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\r\n                });\r\n            }\r\n        });\r\n        const modifiedRange = g[0].modified.join(g[g.length - 1].modified);\r\n        const originalRange = g[0].original.join(g[g.length - 1].original);\r\n        result.push(new ViewElementGroup(new LineRangeMapping(modifiedRange, originalRange), viewElements));\r\n    }\r\n    return result;\r\n}\r\nvar LineType;\r\n(function (LineType) {\r\n    LineType[LineType[\"Header\"] = 0] = \"Header\";\r\n    LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\r\n    LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\r\n    LineType[LineType[\"Added\"] = 3] = \"Added\";\r\n})(LineType || (LineType = {}));\r\nclass ViewElementGroup {\r\n    constructor(range, lines) {\r\n        this.range = range;\r\n        this.lines = lines;\r\n    }\r\n}\r\nclass HeaderViewElement {\r\n    constructor() {\r\n        this.type = LineType.Header;\r\n    }\r\n}\r\nclass DeletedLineViewElement {\r\n    constructor(diff, originalLineNumber) {\r\n        this.diff = diff;\r\n        this.originalLineNumber = originalLineNumber;\r\n        this.type = LineType.Deleted;\r\n        this.modifiedLineNumber = undefined;\r\n    }\r\n}\r\nclass AddedLineViewElement {\r\n    constructor(diff, modifiedLineNumber) {\r\n        this.diff = diff;\r\n        this.modifiedLineNumber = modifiedLineNumber;\r\n        this.type = LineType.Added;\r\n        this.originalLineNumber = undefined;\r\n    }\r\n}\r\nclass UnchangedLineViewElement {\r\n    constructor(originalLineNumber, modifiedLineNumber) {\r\n        this.originalLineNumber = originalLineNumber;\r\n        this.modifiedLineNumber = modifiedLineNumber;\r\n        this.type = LineType.Unchanged;\r\n    }\r\n}\r\nlet View = class View extends Disposable {\r\n    constructor(_element, _model, _width, _height, _editors, _languageService) {\r\n        super();\r\n        this._element = _element;\r\n        this._model = _model;\r\n        this._width = _width;\r\n        this._height = _height;\r\n        this._editors = _editors;\r\n        this._languageService = _languageService;\r\n        this.domNode = this._element;\r\n        this.domNode.className = 'diff-review monaco-editor-background';\r\n        const actionBarContainer = document.createElement('div');\r\n        actionBarContainer.className = 'diff-review-actions';\r\n        this._actionBar = this._register(new ActionBar(actionBarContainer));\r\n        this._register(autorun(reader => {\r\n            /** @description update actions */\r\n            this._actionBar.clear();\r\n            if (this._model.canClose.read(reader)) {\r\n                this._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, async () => _model.close()), { label: false, icon: true });\r\n            }\r\n        }));\r\n        this._content = document.createElement('div');\r\n        this._content.className = 'diff-review-content';\r\n        this._content.setAttribute('role', 'code');\r\n        this._scrollbar = this._register(new DomScrollableElement(this._content, {}));\r\n        reset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\r\n        this._register(toDisposable(() => { reset(this.domNode); }));\r\n        this._register(applyStyle(this.domNode, { width: this._width, height: this._height }));\r\n        this._register(applyStyle(this._content, { width: this._width, height: this._height }));\r\n        this._register(autorunWithStore((reader, store) => {\r\n            /** @description render */\r\n            this._model.currentGroup.read(reader);\r\n            this._render(store);\r\n        }));\r\n        // TODO@hediet use commands\r\n        this._register(addStandardDisposableListener(this.domNode, 'keydown', (e) => {\r\n            if (e.equals(18 /* KeyCode.DownArrow */)\r\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)\r\n                || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\r\n                e.preventDefault();\r\n                this._model.goToNextLine();\r\n            }\r\n            if (e.equals(16 /* KeyCode.UpArrow */)\r\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */)\r\n                || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\r\n                e.preventDefault();\r\n                this._model.goToPreviousLine();\r\n            }\r\n            if (e.equals(9 /* KeyCode.Escape */)\r\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */)\r\n                || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */)\r\n                || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\r\n                e.preventDefault();\r\n                this._model.close();\r\n            }\r\n            if (e.equals(10 /* KeyCode.Space */)\r\n                || e.equals(3 /* KeyCode.Enter */)) {\r\n                e.preventDefault();\r\n                this._model.revealCurrentElementInEditor();\r\n            }\r\n        }));\r\n    }\r\n    _render(store) {\r\n        const originalOptions = this._editors.original.getOptions();\r\n        const modifiedOptions = this._editors.modified.getOptions();\r\n        const container = document.createElement('div');\r\n        container.className = 'diff-review-table';\r\n        container.setAttribute('role', 'list');\r\n        container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\r\n        applyFontInfo(container, modifiedOptions.get(50 /* EditorOption.fontInfo */));\r\n        reset(this._content, container);\r\n        const originalModel = this._editors.original.getModel();\r\n        const modifiedModel = this._editors.modified.getModel();\r\n        if (!originalModel || !modifiedModel) {\r\n            return;\r\n        }\r\n        const originalModelOpts = originalModel.getOptions();\r\n        const modifiedModelOpts = modifiedModel.getOptions();\r\n        const lineHeight = modifiedOptions.get(66 /* EditorOption.lineHeight */);\r\n        const group = this._model.currentGroup.get();\r\n        for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {\r\n            if (!group) {\r\n                break;\r\n            }\r\n            let row;\r\n            if (viewItem.type === LineType.Header) {\r\n                const header = document.createElement('div');\r\n                header.className = 'diff-review-row';\r\n                header.setAttribute('role', 'listitem');\r\n                const r = group.range;\r\n                const diffIndex = this._model.currentGroupIndex.get();\r\n                const diffsLength = this._model.groups.get().length;\r\n                const getAriaLines = (lines) => lines === 0 ? localize('no_lines_changed', \"no lines changed\")\r\n                    : lines === 1 ? localize('one_line_changed', \"1 line changed\")\r\n                        : localize('more_lines_changed', \"{0} lines changed\", lines);\r\n                const originalChangedLinesCntAria = getAriaLines(r.original.length);\r\n                const modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\r\n                header.setAttribute('aria-label', localize({\r\n                    key: 'header',\r\n                    comment: [\r\n                        'This is the ARIA label for a git diff header.',\r\n                        'A git diff header looks like this: @@ -154,12 +159,39 @@.',\r\n                        'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\r\n                        'Variables 0 and 1 refer to the diff index out of total number of diffs.',\r\n                        'Variables 2 and 4 will be numbers (a line number).',\r\n                        'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\r\n                    ]\r\n                }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", (diffIndex + 1), diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\r\n                const cell = document.createElement('div');\r\n                cell.className = 'diff-review-cell diff-review-summary';\r\n                // e.g.: `1/10: @@ -504,7 +517,7 @@`\r\n                cell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\r\n                header.appendChild(cell);\r\n                row = header;\r\n            }\r\n            else {\r\n                row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\r\n            }\r\n            container.appendChild(row);\r\n            const isSelectedObs = derived(reader => /** @description isSelected */ this._model.currentElement.read(reader) === viewItem);\r\n            store.add(autorun(reader => {\r\n                /** @description update tab index */\r\n                const isSelected = isSelectedObs.read(reader);\r\n                row.tabIndex = isSelected ? 0 : -1;\r\n                if (isSelected) {\r\n                    row.focus();\r\n                }\r\n            }));\r\n            store.add(addDisposableListener(row, 'focus', () => {\r\n                this._model.goToLine(viewItem);\r\n            }));\r\n        }\r\n        this._scrollbar.scanDomNode();\r\n    }\r\n    _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\r\n        const originalLayoutInfo = originalOptions.get(143 /* EditorOption.layoutInfo */);\r\n        const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\r\n        const modifiedLayoutInfo = modifiedOptions.get(143 /* EditorOption.layoutInfo */);\r\n        const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\r\n        let rowClassName = 'diff-review-row';\r\n        let lineNumbersExtraClassName = '';\r\n        const spacerClassName = 'diff-review-spacer';\r\n        let spacerIcon = null;\r\n        switch (item.type) {\r\n            case LineType.Added:\r\n                rowClassName = 'diff-review-row line-insert';\r\n                lineNumbersExtraClassName = ' char-insert';\r\n                spacerIcon = accessibleDiffViewerInsertIcon;\r\n                break;\r\n            case LineType.Deleted:\r\n                rowClassName = 'diff-review-row line-delete';\r\n                lineNumbersExtraClassName = ' char-delete';\r\n                spacerIcon = accessibleDiffViewerRemoveIcon;\r\n                break;\r\n        }\r\n        const row = document.createElement('div');\r\n        row.style.minWidth = width + 'px';\r\n        row.className = rowClassName;\r\n        row.setAttribute('role', 'listitem');\r\n        row.ariaLevel = '';\r\n        const cell = document.createElement('div');\r\n        cell.className = 'diff-review-cell';\r\n        cell.style.height = `${lineHeight}px`;\r\n        row.appendChild(cell);\r\n        const originalLineNumber = document.createElement('span');\r\n        originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\r\n        originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\r\n        originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\r\n        if (item.originalLineNumber !== undefined) {\r\n            originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\r\n        }\r\n        else {\r\n            originalLineNumber.innerText = '\\u00a0';\r\n        }\r\n        cell.appendChild(originalLineNumber);\r\n        const modifiedLineNumber = document.createElement('span');\r\n        modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\r\n        modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\r\n        modifiedLineNumber.style.paddingRight = '10px';\r\n        modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\r\n        if (item.modifiedLineNumber !== undefined) {\r\n            modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\r\n        }\r\n        else {\r\n            modifiedLineNumber.innerText = '\\u00a0';\r\n        }\r\n        cell.appendChild(modifiedLineNumber);\r\n        const spacer = document.createElement('span');\r\n        spacer.className = spacerClassName;\r\n        if (spacerIcon) {\r\n            const spacerCodicon = document.createElement('span');\r\n            spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\r\n            spacerCodicon.innerText = '\\u00a0\\u00a0';\r\n            spacer.appendChild(spacerCodicon);\r\n        }\r\n        else {\r\n            spacer.innerText = '\\u00a0\\u00a0';\r\n        }\r\n        cell.appendChild(spacer);\r\n        let lineContent;\r\n        if (item.modifiedLineNumber !== undefined) {\r\n            let html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\r\n            if (AccessibleDiffViewer._ttPolicy) {\r\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\r\n            }\r\n            cell.insertAdjacentHTML('beforeend', html);\r\n            lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\r\n        }\r\n        else {\r\n            let html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\r\n            if (AccessibleDiffViewer._ttPolicy) {\r\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\r\n            }\r\n            cell.insertAdjacentHTML('beforeend', html);\r\n            lineContent = originalModel.getLineContent(item.originalLineNumber);\r\n        }\r\n        if (lineContent.length === 0) {\r\n            lineContent = localize('blankLine', \"blank\");\r\n        }\r\n        let ariaLabel = '';\r\n        switch (item.type) {\r\n            case LineType.Unchanged:\r\n                if (item.originalLineNumber === item.modifiedLineNumber) {\r\n                    ariaLabel = localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\r\n                }\r\n                else {\r\n                    ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\r\n                }\r\n                break;\r\n            case LineType.Added:\r\n                ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\r\n                break;\r\n            case LineType.Deleted:\r\n                ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\r\n                break;\r\n        }\r\n        row.setAttribute('aria-label', ariaLabel);\r\n        return row;\r\n    }\r\n    _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\r\n        const lineContent = model.getLineContent(lineNumber);\r\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\r\n        const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\r\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\r\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\r\n        const r = renderViewLine2(new RenderLineInput((fontInfo.isMonospace && !options.get(33 /* EditorOption.disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(116 /* EditorOption.stopRenderingLineAfter */), options.get(98 /* EditorOption.renderWhitespace */), options.get(93 /* EditorOption.renderControlCharacters */), options.get(51 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\r\n        return r.html;\r\n    }\r\n};\r\nView = __decorate([\r\n    __param(5, ILanguageService)\r\n], View);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\r\nexport const diffInsertIcon = registerIcon('diff-insert', Codicon.add, localize('diffInsertIcon', 'Line decoration for inserts in the diff editor.'));\r\nexport const diffRemoveIcon = registerIcon('diff-remove', Codicon.remove, localize('diffRemoveIcon', 'Line decoration for removals in the diff editor.'));\r\nexport const diffLineAddDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\r\n    className: 'line-insert',\r\n    description: 'line-insert',\r\n    isWholeLine: true,\r\n    linesDecorationsClassName: 'insert-sign ' + ThemeIcon.asClassName(diffInsertIcon),\r\n    marginClassName: 'gutter-insert',\r\n});\r\nexport const diffLineDeleteDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\r\n    className: 'line-delete',\r\n    description: 'line-delete',\r\n    isWholeLine: true,\r\n    linesDecorationsClassName: 'delete-sign ' + ThemeIcon.asClassName(diffRemoveIcon),\r\n    marginClassName: 'gutter-delete',\r\n});\r\nexport const diffLineAddDecorationBackground = ModelDecorationOptions.register({\r\n    className: 'line-insert',\r\n    description: 'line-insert',\r\n    isWholeLine: true,\r\n    marginClassName: 'gutter-insert',\r\n});\r\nexport const diffLineDeleteDecorationBackground = ModelDecorationOptions.register({\r\n    className: 'line-delete',\r\n    description: 'line-delete',\r\n    isWholeLine: true,\r\n    marginClassName: 'gutter-delete',\r\n});\r\nexport const diffAddDecoration = ModelDecorationOptions.register({\r\n    className: 'char-insert',\r\n    description: 'char-insert',\r\n    shouldFillLineOnLineBreak: true,\r\n});\r\nexport const diffWholeLineAddDecoration = ModelDecorationOptions.register({\r\n    className: 'char-insert',\r\n    description: 'char-insert',\r\n    isWholeLine: true,\r\n});\r\nexport const diffAddDecorationEmpty = ModelDecorationOptions.register({\r\n    className: 'char-insert diff-range-empty',\r\n    description: 'char-insert diff-range-empty',\r\n});\r\nexport const diffDeleteDecoration = ModelDecorationOptions.register({\r\n    className: 'char-delete',\r\n    description: 'char-delete',\r\n    shouldFillLineOnLineBreak: true,\r\n});\r\nexport const diffWholeLineDeleteDecoration = ModelDecorationOptions.register({\r\n    className: 'char-delete',\r\n    description: 'char-delete',\r\n    isWholeLine: true,\r\n});\r\nexport const diffDeleteDecorationEmpty = ModelDecorationOptions.register({\r\n    className: 'char-delete diff-range-empty',\r\n    description: 'char-delete diff-range-empty',\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { h } from '../../../../base/browser/dom.js';\r\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { Action } from '../../../../base/common/actions.js';\r\nimport { booleanComparator, compareBy, numberComparator, tieBreakComparators } from '../../../../base/common/arrays.js';\r\nimport { findMaxIdxBy } from '../../../../base/common/arraysFind.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, autorunHandleChanges, autorunWithStore, constObservable, derived, derivedWithStore, observableFromEvent, observableSignalFromEvent, observableValue, recomputeInitiallyAndOnChange } from '../../../../base/common/observable.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { PlaceholderViewZone, ViewZoneOverlayWidget, applyStyle, applyViewZones } from './utils.js';\r\nimport { OffsetRange, OffsetRangeSet } from '../../../common/core/offsetRange.js';\r\nimport { localize } from '../../../../nls.js';\r\nexport class MovedBlocksLinesPart extends Disposable {\r\n    constructor(_rootElement, _diffModel, _originalEditorLayoutInfo, _modifiedEditorLayoutInfo, _editors) {\r\n        super();\r\n        this._rootElement = _rootElement;\r\n        this._diffModel = _diffModel;\r\n        this._originalEditorLayoutInfo = _originalEditorLayoutInfo;\r\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\r\n        this._editors = _editors;\r\n        this._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => this._editors.original.getScrollTop());\r\n        this._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\r\n        this._viewZonesChanged = observableSignalFromEvent('onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\r\n        this.width = observableValue(this, 0);\r\n        this._modifiedViewZonesChangedSignal = observableSignalFromEvent('modified.onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\r\n        this._originalViewZonesChangedSignal = observableSignalFromEvent('original.onDidChangeViewZones', this._editors.original.onDidChangeViewZones);\r\n        this._state = derivedWithStore(this, (reader, store) => {\r\n            /** @description state */\r\n            var _a;\r\n            this._element.replaceChildren();\r\n            const model = this._diffModel.read(reader);\r\n            const moves = (_a = model === null || model === void 0 ? void 0 : model.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTexts;\r\n            if (!moves || moves.length === 0) {\r\n                this.width.set(0, undefined);\r\n                return;\r\n            }\r\n            this._viewZonesChanged.read(reader);\r\n            const infoOrig = this._originalEditorLayoutInfo.read(reader);\r\n            const infoMod = this._modifiedEditorLayoutInfo.read(reader);\r\n            if (!infoOrig || !infoMod) {\r\n                this.width.set(0, undefined);\r\n                return;\r\n            }\r\n            this._modifiedViewZonesChangedSignal.read(reader);\r\n            this._originalViewZonesChangedSignal.read(reader);\r\n            const lines = moves.map((move) => {\r\n                function computeLineStart(range, editor) {\r\n                    const t1 = editor.getTopForLineNumber(range.startLineNumber, true);\r\n                    const t2 = editor.getTopForLineNumber(range.endLineNumberExclusive, true);\r\n                    return (t1 + t2) / 2;\r\n                }\r\n                const start = computeLineStart(move.lineRangeMapping.original, this._editors.original);\r\n                const startOffset = this._originalScrollTop.read(reader);\r\n                const end = computeLineStart(move.lineRangeMapping.modified, this._editors.modified);\r\n                const endOffset = this._modifiedScrollTop.read(reader);\r\n                const from = start - startOffset;\r\n                const to = end - endOffset;\r\n                const top = Math.min(start, end);\r\n                const bottom = Math.max(start, end);\r\n                return { range: new OffsetRange(top, bottom), from, to, fromWithoutScroll: start, toWithoutScroll: end, move };\r\n            });\r\n            lines.sort(tieBreakComparators(compareBy(l => l.fromWithoutScroll > l.toWithoutScroll, booleanComparator), compareBy(l => l.fromWithoutScroll > l.toWithoutScroll ? l.fromWithoutScroll : -l.toWithoutScroll, numberComparator)));\r\n            const layout = LinesLayout.compute(lines.map(l => l.range));\r\n            const padding = 10;\r\n            const lineAreaLeft = infoOrig.verticalScrollbarWidth;\r\n            const lineAreaWidth = (layout.getTrackCount() - 1) * 10 + padding * 2;\r\n            const width = lineAreaLeft + lineAreaWidth + (infoMod.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding);\r\n            let idx = 0;\r\n            for (const line of lines) {\r\n                const track = layout.getTrack(idx);\r\n                const verticalY = lineAreaLeft + padding + track * 10;\r\n                const arrowHeight = 15;\r\n                const arrowWidth = 15;\r\n                const right = width;\r\n                const rectWidth = infoMod.glyphMarginWidth + infoMod.lineNumbersWidth;\r\n                const rectHeight = 18;\r\n                const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n                rect.classList.add('arrow-rectangle');\r\n                rect.setAttribute('x', `${right - rectWidth}`);\r\n                rect.setAttribute('y', `${line.to - rectHeight / 2}`);\r\n                rect.setAttribute('width', `${rectWidth}`);\r\n                rect.setAttribute('height', `${rectHeight}`);\r\n                this._element.appendChild(rect);\r\n                const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n                path.setAttribute('d', `M ${0} ${line.from} L ${verticalY} ${line.from} L ${verticalY} ${line.to} L ${right - arrowWidth} ${line.to}`);\r\n                path.setAttribute('fill', 'none');\r\n                g.appendChild(path);\r\n                const arrowRight = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\r\n                arrowRight.classList.add('arrow');\r\n                store.add(autorun(reader => {\r\n                    path.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\r\n                    arrowRight.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\r\n                }));\r\n                arrowRight.setAttribute('points', `${right - arrowWidth},${line.to - arrowHeight / 2} ${right},${line.to} ${right - arrowWidth},${line.to + arrowHeight / 2}`);\r\n                g.appendChild(arrowRight);\r\n                this._element.appendChild(g);\r\n                /*\r\n                TODO@hediet\r\n                path.addEventListener('mouseenter', () => {\r\n                    model.setHoveredMovedText(line.move);\r\n                });\r\n                path.addEventListener('mouseleave', () => {\r\n                    model.setHoveredMovedText(undefined);\r\n                });*/\r\n                idx++;\r\n            }\r\n            this.width.set(lineAreaWidth, undefined);\r\n        });\r\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        this._element.setAttribute('class', 'moved-blocks-lines');\r\n        this._rootElement.appendChild(this._element);\r\n        this._register(toDisposable(() => this._element.remove()));\r\n        this._register(autorun(reader => {\r\n            /** @description update moved blocks lines positioning */\r\n            const info = this._originalEditorLayoutInfo.read(reader);\r\n            const info2 = this._modifiedEditorLayoutInfo.read(reader);\r\n            if (!info || !info2) {\r\n                return;\r\n            }\r\n            this._element.style.left = `${info.width - info.verticalScrollbarWidth}px`;\r\n            this._element.style.height = `${info.height}px`;\r\n            this._element.style.width = `${info.verticalScrollbarWidth + info.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding + this.width.read(reader)}px`;\r\n        }));\r\n        this._register(recomputeInitiallyAndOnChange(this._state));\r\n        const movedBlockViewZones = derived(reader => {\r\n            const model = this._diffModel.read(reader);\r\n            const d = model === null || model === void 0 ? void 0 : model.diff.read(reader);\r\n            if (!d) {\r\n                return [];\r\n            }\r\n            return d.movedTexts.map(move => ({\r\n                move,\r\n                original: new PlaceholderViewZone(constObservable(move.lineRangeMapping.original.startLineNumber - 1), 18),\r\n                modified: new PlaceholderViewZone(constObservable(move.lineRangeMapping.modified.startLineNumber - 1), 18),\r\n            }));\r\n        });\r\n        this._register(applyViewZones(this._editors.original, movedBlockViewZones.map(zones => /** @description movedBlockViewZones.original */ zones.map(z => z.original))));\r\n        this._register(applyViewZones(this._editors.modified, movedBlockViewZones.map(zones => /** @description movedBlockViewZones.modified */ zones.map(z => z.modified))));\r\n        this._register(autorunWithStore((reader, store) => {\r\n            const blocks = movedBlockViewZones.read(reader);\r\n            for (const b of blocks) {\r\n                store.add(new MovedBlockOverlayWidget(this._editors.original, b.original, b.move, 'original', this._diffModel.get()));\r\n                store.add(new MovedBlockOverlayWidget(this._editors.modified, b.modified, b.move, 'modified', this._diffModel.get()));\r\n            }\r\n        }));\r\n        const originalCursorPosition = observableFromEvent(this._editors.original.onDidChangeCursorPosition, () => this._editors.original.getPosition());\r\n        const modifiedCursorPosition = observableFromEvent(this._editors.modified.onDidChangeCursorPosition, () => this._editors.modified.getPosition());\r\n        const originalHasFocus = observableSignalFromEvent('original.onDidFocusEditorWidget', e => this._editors.original.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0)));\r\n        const modifiedHasFocus = observableSignalFromEvent('modified.onDidFocusEditorWidget', e => this._editors.modified.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0)));\r\n        let lastChangedEditor = 'modified';\r\n        this._register(autorunHandleChanges({\r\n            createEmptyChangeSummary: () => undefined,\r\n            handleChange: (ctx, summary) => {\r\n                if (ctx.didChange(originalHasFocus)) {\r\n                    lastChangedEditor = 'original';\r\n                }\r\n                if (ctx.didChange(modifiedHasFocus)) {\r\n                    lastChangedEditor = 'modified';\r\n                }\r\n                return true;\r\n            }\r\n        }, reader => {\r\n            /** @description MovedBlocksLines.setActiveMovedTextFromCursor */\r\n            originalHasFocus.read(reader);\r\n            modifiedHasFocus.read(reader);\r\n            const m = this._diffModel.read(reader);\r\n            if (!m) {\r\n                return;\r\n            }\r\n            const diff = m.diff.read(reader);\r\n            let movedText = undefined;\r\n            if (diff && lastChangedEditor === 'original') {\r\n                const originalPos = originalCursorPosition.read(reader);\r\n                if (originalPos) {\r\n                    movedText = diff.movedTexts.find(m => m.lineRangeMapping.original.contains(originalPos.lineNumber));\r\n                }\r\n            }\r\n            if (diff && lastChangedEditor === 'modified') {\r\n                const modifiedPos = modifiedCursorPosition.read(reader);\r\n                if (modifiedPos) {\r\n                    movedText = diff.movedTexts.find(m => m.lineRangeMapping.modified.contains(modifiedPos.lineNumber));\r\n                }\r\n            }\r\n            if (movedText !== m.movedTextToCompare.get()) {\r\n                m.movedTextToCompare.set(undefined, undefined);\r\n            }\r\n            m.setActiveMovedText(movedText);\r\n        }));\r\n    }\r\n}\r\nMovedBlocksLinesPart.movedCodeBlockPadding = 4;\r\nclass LinesLayout {\r\n    static compute(lines) {\r\n        const setsPerTrack = [];\r\n        const trackPerLineIdx = [];\r\n        for (const line of lines) {\r\n            let trackIdx = setsPerTrack.findIndex(set => !set.intersectsStrict(line));\r\n            if (trackIdx === -1) {\r\n                const maxTrackCount = 6;\r\n                if (setsPerTrack.length >= maxTrackCount) {\r\n                    trackIdx = findMaxIdxBy(setsPerTrack, compareBy(set => set.intersectWithRangeLength(line), numberComparator));\r\n                }\r\n                else {\r\n                    trackIdx = setsPerTrack.length;\r\n                    setsPerTrack.push(new OffsetRangeSet());\r\n                }\r\n            }\r\n            setsPerTrack[trackIdx].addRange(line);\r\n            trackPerLineIdx.push(trackIdx);\r\n        }\r\n        return new LinesLayout(setsPerTrack.length, trackPerLineIdx);\r\n    }\r\n    constructor(_trackCount, trackPerLineIdx) {\r\n        this._trackCount = _trackCount;\r\n        this.trackPerLineIdx = trackPerLineIdx;\r\n    }\r\n    getTrack(lineIdx) {\r\n        return this.trackPerLineIdx[lineIdx];\r\n    }\r\n    getTrackCount() {\r\n        return this._trackCount;\r\n    }\r\n}\r\nclass MovedBlockOverlayWidget extends ViewZoneOverlayWidget {\r\n    constructor(_editor, _viewZone, _move, _kind, _diffModel) {\r\n        const root = h('div.diff-hidden-lines-widget');\r\n        super(_editor, _viewZone, root.root);\r\n        this._editor = _editor;\r\n        this._move = _move;\r\n        this._kind = _kind;\r\n        this._diffModel = _diffModel;\r\n        this._nodes = h('div.diff-moved-code-block', { style: { marginRight: '4px' } }, [\r\n            h('div.text-content@textContent'),\r\n            h('div.action-bar@actionBar'),\r\n        ]);\r\n        root.root.appendChild(this._nodes.root);\r\n        const editorLayout = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\r\n        this._register(applyStyle(this._nodes.root, {\r\n            paddingRight: editorLayout.map(l => l.verticalScrollbarWidth)\r\n        }));\r\n        let text;\r\n        if (_move.changes.length > 0) {\r\n            text = this._kind === 'original' ? localize('codeMovedToWithChanges', 'Code moved with changes to line {0}-{1}', this._move.lineRangeMapping.modified.startLineNumber, this._move.lineRangeMapping.modified.endLineNumberExclusive - 1) : localize('codeMovedFromWithChanges', 'Code moved with changes from line {0}-{1}', this._move.lineRangeMapping.original.startLineNumber, this._move.lineRangeMapping.original.endLineNumberExclusive - 1);\r\n        }\r\n        else {\r\n            text = this._kind === 'original' ? localize('codeMovedTo', 'Code moved to line {0}-{1}', this._move.lineRangeMapping.modified.startLineNumber, this._move.lineRangeMapping.modified.endLineNumberExclusive - 1) : localize('codeMovedFrom', 'Code moved from line {0}-{1}', this._move.lineRangeMapping.original.startLineNumber, this._move.lineRangeMapping.original.endLineNumberExclusive - 1);\r\n        }\r\n        const actionBar = this._register(new ActionBar(this._nodes.actionBar, {\r\n            highlightToggledItems: true,\r\n        }));\r\n        const caption = new Action('', text, '', false);\r\n        actionBar.push(caption, { icon: false, label: true });\r\n        const actionCompare = new Action('', 'Compare', ThemeIcon.asClassName(Codicon.compareChanges), true, () => {\r\n            this._editor.focus();\r\n            this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get() === _move ? undefined : this._move, undefined);\r\n        });\r\n        this._register(autorun(reader => {\r\n            const isActive = this._diffModel.movedTextToCompare.read(reader) === _move;\r\n            actionCompare.checked = isActive;\r\n        }));\r\n        actionBar.push(actionCompare, { icon: false, label: true });\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { h } from '../../../../base/browser/dom.js';\r\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorunWithStore, derived } from '../../../../base/common/observable.js';\r\nimport { diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecoration, diffDeleteDecorationEmpty, diffLineAddDecorationBackground, diffLineAddDecorationBackgroundWithIndicator, diffLineDeleteDecorationBackground, diffLineDeleteDecorationBackgroundWithIndicator, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from './decorations.js';\r\nimport { MovedBlocksLinesPart } from './movedBlocksLines.js';\r\nimport { applyObservableDecorations } from './utils.js';\r\nimport { LineRange, LineRangeSet } from '../../../common/core/lineRange.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { GlyphMarginLane } from '../../../common/model.js';\r\nimport { localize } from '../../../../nls.js';\r\nexport class DiffEditorDecorations extends Disposable {\r\n    constructor(_editors, _diffModel, _options, widget) {\r\n        super();\r\n        this._editors = _editors;\r\n        this._diffModel = _diffModel;\r\n        this._options = _options;\r\n        this._decorations = derived(this, (reader) => {\r\n            var _a;\r\n            const diff = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader);\r\n            if (!diff) {\r\n                return null;\r\n            }\r\n            const movedTextToCompare = this._diffModel.read(reader).movedTextToCompare.read(reader);\r\n            const renderIndicators = this._options.renderIndicators.read(reader);\r\n            const showEmptyDecorations = this._options.showEmptyDecorations.read(reader);\r\n            const originalDecorations = [];\r\n            const modifiedDecorations = [];\r\n            if (!movedTextToCompare) {\r\n                for (const m of diff.mappings) {\r\n                    if (!m.lineRangeMapping.original.isEmpty) {\r\n                        originalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange(), options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\r\n                    }\r\n                    if (!m.lineRangeMapping.modified.isEmpty) {\r\n                        modifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange(), options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\r\n                    }\r\n                    if (m.lineRangeMapping.modified.isEmpty || m.lineRangeMapping.original.isEmpty) {\r\n                        if (!m.lineRangeMapping.original.isEmpty) {\r\n                            originalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange(), options: diffWholeLineDeleteDecoration });\r\n                        }\r\n                        if (!m.lineRangeMapping.modified.isEmpty) {\r\n                            modifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange(), options: diffWholeLineAddDecoration });\r\n                        }\r\n                    }\r\n                    else {\r\n                        for (const i of m.lineRangeMapping.innerChanges || []) {\r\n                            // Don't show empty markers outside the line range\r\n                            if (m.lineRangeMapping.original.contains(i.originalRange.startLineNumber)) {\r\n                                originalDecorations.push({ range: i.originalRange, options: (i.originalRange.isEmpty() && showEmptyDecorations) ? diffDeleteDecorationEmpty : diffDeleteDecoration });\r\n                            }\r\n                            if (m.lineRangeMapping.modified.contains(i.modifiedRange.startLineNumber)) {\r\n                                modifiedDecorations.push({ range: i.modifiedRange, options: (i.modifiedRange.isEmpty() && showEmptyDecorations) ? diffAddDecorationEmpty : diffAddDecoration });\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (movedTextToCompare) {\r\n                for (const m of movedTextToCompare.changes) {\r\n                    const fullRangeOriginal = m.original.toInclusiveRange();\r\n                    if (fullRangeOriginal) {\r\n                        originalDecorations.push({ range: fullRangeOriginal, options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\r\n                    }\r\n                    const fullRangeModified = m.modified.toInclusiveRange();\r\n                    if (fullRangeModified) {\r\n                        modifiedDecorations.push({ range: fullRangeModified, options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\r\n                    }\r\n                    for (const i of m.innerChanges || []) {\r\n                        originalDecorations.push({ range: i.originalRange, options: diffDeleteDecoration });\r\n                        modifiedDecorations.push({ range: i.modifiedRange, options: diffAddDecoration });\r\n                    }\r\n                }\r\n            }\r\n            const activeMovedText = this._diffModel.read(reader).activeMovedText.read(reader);\r\n            for (const m of diff.movedTexts) {\r\n                originalDecorations.push({\r\n                    range: m.lineRangeMapping.original.toInclusiveRange(), options: {\r\n                        description: 'moved',\r\n                        blockClassName: 'movedOriginal' + (m === activeMovedText ? ' currentMove' : ''),\r\n                        blockPadding: [MovedBlocksLinesPart.movedCodeBlockPadding, 0, MovedBlocksLinesPart.movedCodeBlockPadding, MovedBlocksLinesPart.movedCodeBlockPadding],\r\n                    }\r\n                });\r\n                modifiedDecorations.push({\r\n                    range: m.lineRangeMapping.modified.toInclusiveRange(), options: {\r\n                        description: 'moved',\r\n                        blockClassName: 'movedModified' + (m === activeMovedText ? ' currentMove' : ''),\r\n                        blockPadding: [4, 0, 4, 4],\r\n                    }\r\n                });\r\n            }\r\n            return { originalDecorations, modifiedDecorations };\r\n        });\r\n        this._register(new RevertButtonsFeature(_editors, _diffModel, _options, widget));\r\n        this._register(applyObservableDecorations(this._editors.original, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.originalDecorations) || [])));\r\n        this._register(applyObservableDecorations(this._editors.modified, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.modifiedDecorations) || [])));\r\n    }\r\n}\r\nclass RevertButtonsFeature extends Disposable {\r\n    constructor(_editors, _diffModel, _options, _widget) {\r\n        super();\r\n        this._editors = _editors;\r\n        this._diffModel = _diffModel;\r\n        this._options = _options;\r\n        this._widget = _widget;\r\n        const emptyArr = [];\r\n        const selectedDiffs = derived(this, (reader) => {\r\n            /** @description selectedDiffs */\r\n            const model = this._diffModel.read(reader);\r\n            const diff = model === null || model === void 0 ? void 0 : model.diff.read(reader);\r\n            if (!diff) {\r\n                return emptyArr;\r\n            }\r\n            const selections = this._editors.modifiedSelections.read(reader);\r\n            if (selections.every(s => s.isEmpty())) {\r\n                return emptyArr;\r\n            }\r\n            const lineRanges = new LineRangeSet(selections.map(s => LineRange.fromRangeInclusive(s)));\r\n            const mappings = diff.mappings.filter(m => m.lineRangeMapping.innerChanges && lineRanges.intersects(m.lineRangeMapping.modified));\r\n            const result = mappings.map(mapping => ({\r\n                mapping,\r\n                rangeMappings: mapping.lineRangeMapping.innerChanges.filter(c => selections.some(s => Range.areIntersecting(c.modifiedRange, s)))\r\n            }));\r\n            if (result.length === 0 || result.every(r => r.rangeMappings.length === 0)) {\r\n                return emptyArr;\r\n            }\r\n            return result;\r\n        });\r\n        this._register(autorunWithStore((reader, store) => {\r\n            const model = this._diffModel.read(reader);\r\n            const diff = model === null || model === void 0 ? void 0 : model.diff.read(reader);\r\n            if (!model || !diff) {\r\n                return;\r\n            }\r\n            const movedTextToCompare = this._diffModel.read(reader).movedTextToCompare.read(reader);\r\n            if (movedTextToCompare) {\r\n                return;\r\n            }\r\n            if (!this._options.shouldRenderRevertArrows.read(reader)) {\r\n                return;\r\n            }\r\n            const glyphWidgetsModified = [];\r\n            const selectedDiffs_ = selectedDiffs.read(reader);\r\n            const diffsSet = new Set(selectedDiffs_.map(d => d.mapping));\r\n            if (selectedDiffs_.length > 0) {\r\n                const selections = this._editors.modifiedSelections.read(reader);\r\n                const btn = new RevertButton(selections[selections.length - 1].positionLineNumber, this._widget, selectedDiffs_.flatMap(d => d.rangeMappings), true);\r\n                this._editors.modified.addGlyphMarginWidget(btn);\r\n                glyphWidgetsModified.push(btn);\r\n            }\r\n            for (const m of diff.mappings) {\r\n                if (diffsSet.has(m)) {\r\n                    continue;\r\n                }\r\n                if (!m.lineRangeMapping.modified.isEmpty && m.lineRangeMapping.innerChanges) {\r\n                    const btn = new RevertButton(m.lineRangeMapping.modified.startLineNumber, this._widget, m.lineRangeMapping.innerChanges, false);\r\n                    this._editors.modified.addGlyphMarginWidget(btn);\r\n                    glyphWidgetsModified.push(btn);\r\n                }\r\n            }\r\n            store.add(toDisposable(() => {\r\n                for (const w of glyphWidgetsModified) {\r\n                    this._editors.modified.removeGlyphMarginWidget(w);\r\n                }\r\n            }));\r\n        }));\r\n    }\r\n}\r\nclass RevertButton {\r\n    getId() { return this._id; }\r\n    constructor(_lineNumber, _widget, _diffs, _selection) {\r\n        this._lineNumber = _lineNumber;\r\n        this._widget = _widget;\r\n        this._diffs = _diffs;\r\n        this._selection = _selection;\r\n        this._id = `revertButton${RevertButton.counter++}`;\r\n        this._domNode = h('div.revertButton', {\r\n            title: this._selection\r\n                ? localize('revertSelectedChanges', 'Revert Selected Changes')\r\n                : localize('revertChange', 'Revert Change')\r\n        }, [renderIcon(Codicon.arrowRight)]).root;\r\n        this._domNode.onmousedown = e => {\r\n            // don't prevent context menu from showing up\r\n            if (e.button !== 2) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n            }\r\n        };\r\n        this._domNode.onmouseup = e => {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        };\r\n        this._domNode.onclick = (e) => {\r\n            this._widget.revertRangeMappings(this._diffs);\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        };\r\n    }\r\n    /**\r\n     * Get the dom node of the glyph widget.\r\n     */\r\n    getDomNode() {\r\n        return this._domNode;\r\n    }\r\n    /**\r\n     * Get the placement of the glyph widget.\r\n     */\r\n    getPosition() {\r\n        return {\r\n            lane: GlyphMarginLane.Right,\r\n            range: {\r\n                startColumn: 1,\r\n                startLineNumber: this._lineNumber,\r\n                endColumn: 1,\r\n                endLineNumber: this._lineNumber,\r\n            },\r\n            zIndex: 10001,\r\n        };\r\n    }\r\n}\r\nRevertButton.counter = 0;\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, derived, observableValue } from '../../../../base/common/observable.js';\r\nexport class DiffEditorSash extends Disposable {\r\n    constructor(_options, _domNode, _dimensions, _sashes) {\r\n        super();\r\n        this._options = _options;\r\n        this._domNode = _domNode;\r\n        this._dimensions = _dimensions;\r\n        this._sashes = _sashes;\r\n        this._sashRatio = observableValue(this, undefined);\r\n        this.sashLeft = derived(this, reader => {\r\n            var _a;\r\n            const ratio = (_a = this._sashRatio.read(reader)) !== null && _a !== void 0 ? _a : this._options.splitViewDefaultRatio.read(reader);\r\n            return this._computeSashLeft(ratio, reader);\r\n        });\r\n        this._sash = this._register(new Sash(this._domNode, {\r\n            getVerticalSashTop: (_sash) => 0,\r\n            getVerticalSashLeft: (_sash) => this.sashLeft.get(),\r\n            getVerticalSashHeight: (_sash) => this._dimensions.height.get(),\r\n        }, { orientation: 0 /* Orientation.VERTICAL */ }));\r\n        this._startSashPosition = undefined;\r\n        this._register(this._sash.onDidStart(() => {\r\n            this._startSashPosition = this.sashLeft.get();\r\n        }));\r\n        this._register(this._sash.onDidChange((e) => {\r\n            const contentWidth = this._dimensions.width.get();\r\n            const sashPosition = this._computeSashLeft((this._startSashPosition + (e.currentX - e.startX)) / contentWidth, undefined);\r\n            this._sashRatio.set(sashPosition / contentWidth, undefined);\r\n        }));\r\n        this._register(this._sash.onDidEnd(() => this._sash.layout()));\r\n        this._register(this._sash.onDidReset(() => this._sashRatio.set(undefined, undefined)));\r\n        this._register(autorun(reader => {\r\n            const sashes = this._sashes.read(reader);\r\n            if (sashes) {\r\n                this._sash.orthogonalEndSash = sashes.bottom;\r\n            }\r\n        }));\r\n        this._register(autorun(reader => {\r\n            /** @description DiffEditorSash.layoutSash */\r\n            const enabled = this._options.enableSplitViewResizing.read(reader);\r\n            this._sash.state = enabled ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\r\n            this.sashLeft.read(reader);\r\n            this._dimensions.height.read(reader);\r\n            this._sash.layout();\r\n        }));\r\n    }\r\n    /** @pure */\r\n    _computeSashLeft(desiredRatio, reader) {\r\n        const contentWidth = this._dimensions.width.read(reader);\r\n        const midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\r\n        const sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\r\n        const MINIMUM_EDITOR_WIDTH = 100;\r\n        if (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\r\n            return midPoint;\r\n        }\r\n        if (sashLeft < MINIMUM_EDITOR_WIDTH) {\r\n            return MINIMUM_EDITOR_WIDTH;\r\n        }\r\n        if (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\r\n            return contentWidth - MINIMUM_EDITOR_WIDTH;\r\n        }\r\n        return sashLeft;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { equals } from '../../../../base/common/arrays.js';\r\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { Iterable } from '../../../../base/common/iterator.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\n// TODO@hediet: These classes are copied from outlineModel.ts because of layering issues.\r\n// Because these classes just depend on the DocumentSymbolProvider (which is in the core editor),\r\n// they should be moved to the core editor as well.\r\nexport class TreeElement {\r\n    remove() {\r\n        var _a;\r\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.delete(this.id);\r\n    }\r\n    static findId(candidate, container) {\r\n        // complex id-computation which contains the origin/extension,\r\n        // the parent path, and some dedupe logic when names collide\r\n        let candidateId;\r\n        if (typeof candidate === 'string') {\r\n            candidateId = `${container.id}/${candidate}`;\r\n        }\r\n        else {\r\n            candidateId = `${container.id}/${candidate.name}`;\r\n            if (container.children.get(candidateId) !== undefined) {\r\n                candidateId = `${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`;\r\n            }\r\n        }\r\n        let id = candidateId;\r\n        for (let i = 0; container.children.get(id) !== undefined; i++) {\r\n            id = `${candidateId}_${i}`;\r\n        }\r\n        return id;\r\n    }\r\n    static empty(element) {\r\n        return element.children.size === 0;\r\n    }\r\n}\r\nexport class OutlineElement extends TreeElement {\r\n    constructor(id, parent, symbol) {\r\n        super();\r\n        this.id = id;\r\n        this.parent = parent;\r\n        this.symbol = symbol;\r\n        this.children = new Map();\r\n    }\r\n}\r\nexport class OutlineGroup extends TreeElement {\r\n    constructor(id, parent, label, order) {\r\n        super();\r\n        this.id = id;\r\n        this.parent = parent;\r\n        this.label = label;\r\n        this.order = order;\r\n        this.children = new Map();\r\n    }\r\n}\r\nexport class OutlineModel extends TreeElement {\r\n    static create(registry, textModel, token) {\r\n        const cts = new CancellationTokenSource(token);\r\n        const result = new OutlineModel(textModel.uri);\r\n        const provider = registry.ordered(textModel);\r\n        const promises = provider.map((provider, index) => {\r\n            var _a;\r\n            const id = TreeElement.findId(`provider_${index}`, result);\r\n            const group = new OutlineGroup(id, result, (_a = provider.displayName) !== null && _a !== void 0 ? _a : 'Unknown Outline Provider', index);\r\n            return Promise.resolve(provider.provideDocumentSymbols(textModel, cts.token)).then(result => {\r\n                for (const info of result || []) {\r\n                    OutlineModel._makeOutlineElement(info, group);\r\n                }\r\n                return group;\r\n            }, err => {\r\n                onUnexpectedExternalError(err);\r\n                return group;\r\n            }).then(group => {\r\n                if (!TreeElement.empty(group)) {\r\n                    result._groups.set(id, group);\r\n                }\r\n                else {\r\n                    group.remove();\r\n                }\r\n            });\r\n        });\r\n        const listener = registry.onDidChange(() => {\r\n            const newProvider = registry.ordered(textModel);\r\n            if (!equals(newProvider, provider)) {\r\n                cts.cancel();\r\n            }\r\n        });\r\n        return Promise.all(promises).then(() => {\r\n            if (cts.token.isCancellationRequested && !token.isCancellationRequested) {\r\n                return OutlineModel.create(registry, textModel, token);\r\n            }\r\n            else {\r\n                return result._compact();\r\n            }\r\n        }).finally(() => {\r\n            cts.dispose();\r\n            listener.dispose();\r\n        });\r\n    }\r\n    static _makeOutlineElement(info, container) {\r\n        const id = TreeElement.findId(info, container);\r\n        const res = new OutlineElement(id, container, info);\r\n        if (info.children) {\r\n            for (const childInfo of info.children) {\r\n                OutlineModel._makeOutlineElement(childInfo, res);\r\n            }\r\n        }\r\n        container.children.set(res.id, res);\r\n    }\r\n    constructor(uri) {\r\n        super();\r\n        this.uri = uri;\r\n        this.id = 'root';\r\n        this.parent = undefined;\r\n        this._groups = new Map();\r\n        this.children = new Map();\r\n        this.id = 'root';\r\n        this.parent = undefined;\r\n    }\r\n    _compact() {\r\n        let count = 0;\r\n        for (const [key, group] of this._groups) {\r\n            if (group.children.size === 0) { // empty\r\n                this._groups.delete(key);\r\n            }\r\n            else {\r\n                count += 1;\r\n            }\r\n        }\r\n        if (count !== 1) {\r\n            //\r\n            this.children = this._groups;\r\n        }\r\n        else {\r\n            // adopt all elements of the first group\r\n            const group = Iterable.first(this._groups.values());\r\n            for (const [, child] of group.children) {\r\n                child.parent = this;\r\n                this.children.set(child.id, child);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    getTopLevelSymbols() {\r\n        const roots = [];\r\n        for (const child of this.children.values()) {\r\n            if (child instanceof OutlineElement) {\r\n                roots.push(child.symbol);\r\n            }\r\n            else {\r\n                roots.push(...Iterable.map(child.children.values(), child => child.symbol));\r\n            }\r\n        }\r\n        return roots.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\r\n    }\r\n    asListOfDocumentSymbols() {\r\n        const roots = this.getTopLevelSymbols();\r\n        const bucket = [];\r\n        OutlineModel._flattenDocumentSymbols(bucket, roots, '');\r\n        return bucket.sort((a, b) => Position.compare(Range.getStartPosition(a.range), Range.getStartPosition(b.range)) || Position.compare(Range.getEndPosition(b.range), Range.getEndPosition(a.range)));\r\n    }\r\n    static _flattenDocumentSymbols(bucket, entries, overrideContainerLabel) {\r\n        for (const entry of entries) {\r\n            bucket.push({\r\n                kind: entry.kind,\r\n                tags: entry.tags,\r\n                name: entry.name,\r\n                detail: entry.detail,\r\n                containerName: entry.containerName || overrideContainerLabel,\r\n                range: entry.range,\r\n                selectionRange: entry.selectionRange,\r\n                children: undefined, // we flatten it...\r\n            });\r\n            // Recurse over children\r\n            if (entry.children) {\r\n                OutlineModel._flattenDocumentSymbols(bucket, entry.children, entry.name);\r\n            }\r\n        }\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { $, addDisposableListener, getWindow, h, reset } from '../../../../base/browser/dom.js';\r\nimport { renderIcon, renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\r\nimport { compareBy, numberComparator, reverseOrder } from '../../../../base/common/arrays.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Event } from '../../../../base/common/event.js';\r\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableFromEvent, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\r\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { isDefined } from '../../../../base/common/types.js';\r\nimport { OutlineModel } from './outlineModel.js';\r\nimport { DisposableCancellationTokenSource, PlaceholderViewZone, ViewZoneOverlayWidget, applyObservableDecorations, applyStyle } from './utils.js';\r\nimport { LineRange } from '../../../common/core/lineRange.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { SymbolKinds } from '../../../common/languages.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { localize } from '../../../../nls.js';\r\n/**\r\n * Make sure to add the view zones to the editor!\r\n */\r\nlet HideUnchangedRegionsFeature = class HideUnchangedRegionsFeature extends Disposable {\r\n    get isUpdatingHiddenAreas() { return this._isUpdatingHiddenAreas; }\r\n    constructor(_editors, _diffModel, _options, _languageFeaturesService) {\r\n        super();\r\n        this._editors = _editors;\r\n        this._diffModel = _diffModel;\r\n        this._options = _options;\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._modifiedOutlineSource = derivedDisposable(this, reader => {\r\n            const m = this._editors.modifiedModel.read(reader);\r\n            return !m ? undefined : new OutlineSource(this._languageFeaturesService, m);\r\n        });\r\n        this._isUpdatingHiddenAreas = false;\r\n        this._register(this._editors.original.onDidChangeCursorPosition(e => {\r\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\r\n                const m = this._diffModel.get();\r\n                transaction(tx => {\r\n                    for (const s of this._editors.original.getSelections() || []) {\r\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getStartPosition().lineNumber, tx);\r\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getEndPosition().lineNumber, tx);\r\n                    }\r\n                });\r\n            }\r\n        }));\r\n        this._register(this._editors.modified.onDidChangeCursorPosition(e => {\r\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\r\n                const m = this._diffModel.get();\r\n                transaction(tx => {\r\n                    for (const s of this._editors.modified.getSelections() || []) {\r\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getStartPosition().lineNumber, tx);\r\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getEndPosition().lineNumber, tx);\r\n                    }\r\n                });\r\n            }\r\n        }));\r\n        const unchangedRegions = this._diffModel.map((m, reader) => { var _a, _b; return ((_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0 ? [] : (_b = m === null || m === void 0 ? void 0 : m.unchangedRegions.read(reader)) !== null && _b !== void 0 ? _b : []; });\r\n        this.viewZones = derivedWithStore(this, (reader, store) => {\r\n            /** @description view Zones */\r\n            const modifiedOutlineSource = this._modifiedOutlineSource.read(reader);\r\n            if (!modifiedOutlineSource) {\r\n                return { origViewZones: [], modViewZones: [] };\r\n            }\r\n            const origViewZones = [];\r\n            const modViewZones = [];\r\n            const sideBySide = this._options.renderSideBySide.read(reader);\r\n            const curUnchangedRegions = unchangedRegions.read(reader);\r\n            for (const r of curUnchangedRegions) {\r\n                if (r.shouldHideControls(reader)) {\r\n                    continue;\r\n                }\r\n                {\r\n                    const d = derived(this, reader => /** @description hiddenOriginalRangeStart */ r.getHiddenOriginalRange(reader).startLineNumber - 1);\r\n                    const origVz = new PlaceholderViewZone(d, 24);\r\n                    origViewZones.push(origVz);\r\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.original, origVz, r, r.originalUnchangedRange, !sideBySide, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, undefined), this._options));\r\n                }\r\n                {\r\n                    const d = derived(this, reader => /** @description hiddenModifiedRangeStart */ r.getHiddenModifiedRange(reader).startLineNumber - 1);\r\n                    const modViewZone = new PlaceholderViewZone(d, 24);\r\n                    modViewZones.push(modViewZone);\r\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.modified, modViewZone, r, r.modifiedUnchangedRange, false, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, undefined), this._options));\r\n                }\r\n            }\r\n            return { origViewZones, modViewZones, };\r\n        });\r\n        const unchangedLinesDecoration = {\r\n            description: 'unchanged lines',\r\n            className: 'diff-unchanged-lines',\r\n            isWholeLine: true,\r\n        };\r\n        const unchangedLinesDecorationShow = {\r\n            description: 'Fold Unchanged',\r\n            glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true })\r\n                .appendMarkdown(localize('foldUnchanged', 'Fold Unchanged Region')),\r\n            glyphMarginClassName: 'fold-unchanged ' + ThemeIcon.asClassName(Codicon.fold),\r\n            zIndex: 10001,\r\n        };\r\n        this._register(applyObservableDecorations(this._editors.original, derived(this, reader => {\r\n            /** @description decorations */\r\n            const curUnchangedRegions = unchangedRegions.read(reader);\r\n            const result = curUnchangedRegions.map(r => ({\r\n                range: r.originalUnchangedRange.toInclusiveRange(),\r\n                options: unchangedLinesDecoration,\r\n            }));\r\n            for (const r of curUnchangedRegions) {\r\n                if (r.shouldHideControls(reader)) {\r\n                    result.push({\r\n                        range: Range.fromPositions(new Position(r.originalLineNumber, 1)),\r\n                        options: unchangedLinesDecorationShow,\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        })));\r\n        this._register(applyObservableDecorations(this._editors.modified, derived(this, reader => {\r\n            /** @description decorations */\r\n            const curUnchangedRegions = unchangedRegions.read(reader);\r\n            const result = curUnchangedRegions.map(r => ({\r\n                range: r.modifiedUnchangedRange.toInclusiveRange(),\r\n                options: unchangedLinesDecoration,\r\n            }));\r\n            for (const r of curUnchangedRegions) {\r\n                if (r.shouldHideControls(reader)) {\r\n                    result.push({\r\n                        range: LineRange.ofLength(r.modifiedLineNumber, 1).toInclusiveRange(),\r\n                        options: unchangedLinesDecorationShow,\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        })));\r\n        this._register(autorun((reader) => {\r\n            /** @description update folded unchanged regions */\r\n            const curUnchangedRegions = unchangedRegions.read(reader);\r\n            this._isUpdatingHiddenAreas = true;\r\n            try {\r\n                this._editors.original.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenOriginalRange(reader).toInclusiveRange()).filter(isDefined));\r\n                this._editors.modified.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenModifiedRange(reader).toInclusiveRange()).filter(isDefined));\r\n            }\r\n            finally {\r\n                this._isUpdatingHiddenAreas = false;\r\n            }\r\n        }));\r\n        this._register(this._editors.modified.onMouseUp(event => {\r\n            var _a;\r\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\r\n                const lineNumber = event.target.position.lineNumber;\r\n                const model = this._diffModel.get();\r\n                if (!model) {\r\n                    return;\r\n                }\r\n                const region = model.unchangedRegions.get().find(r => r.modifiedUnchangedRange.includes(lineNumber));\r\n                if (!region) {\r\n                    return;\r\n                }\r\n                region.collapseAll(undefined);\r\n                event.event.stopPropagation();\r\n                event.event.preventDefault();\r\n            }\r\n        }));\r\n        this._register(this._editors.original.onMouseUp(event => {\r\n            var _a;\r\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\r\n                const lineNumber = event.target.position.lineNumber;\r\n                const model = this._diffModel.get();\r\n                if (!model) {\r\n                    return;\r\n                }\r\n                const region = model.unchangedRegions.get().find(r => r.originalUnchangedRange.includes(lineNumber));\r\n                if (!region) {\r\n                    return;\r\n                }\r\n                region.collapseAll(undefined);\r\n                event.event.stopPropagation();\r\n                event.event.preventDefault();\r\n            }\r\n        }));\r\n    }\r\n};\r\nHideUnchangedRegionsFeature = __decorate([\r\n    __param(3, ILanguageFeaturesService)\r\n], HideUnchangedRegionsFeature);\r\nexport { HideUnchangedRegionsFeature };\r\nclass CollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\r\n    constructor(_editor, _viewZone, _unchangedRegion, _unchangedRegionRange, _hide, _modifiedOutlineSource, _revealModifiedHiddenLine, _options) {\r\n        const root = h('div.diff-hidden-lines-widget');\r\n        super(_editor, _viewZone, root.root);\r\n        this._editor = _editor;\r\n        this._unchangedRegion = _unchangedRegion;\r\n        this._unchangedRegionRange = _unchangedRegionRange;\r\n        this._hide = _hide;\r\n        this._modifiedOutlineSource = _modifiedOutlineSource;\r\n        this._revealModifiedHiddenLine = _revealModifiedHiddenLine;\r\n        this._options = _options;\r\n        this._nodes = h('div.diff-hidden-lines', [\r\n            h('div.top@top', { title: localize('diff.hiddenLines.top', 'Click or drag to show more above') }),\r\n            h('div.center@content', { style: { display: 'flex' } }, [\r\n                h('div@first', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center', flexShrink: '0' } }, [$('a', { title: localize('showUnchangedRegion', 'Show Unchanged Region'), role: 'button', onclick: () => { this._unchangedRegion.showAll(undefined); } }, ...renderLabelWithIcons('$(unfold)'))]),\r\n                h('div@others', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center' } }),\r\n            ]),\r\n            h('div.bottom@bottom', { title: localize('diff.bottom', 'Click or drag to show more below'), role: 'button' }),\r\n        ]);\r\n        root.root.appendChild(this._nodes.root);\r\n        const layoutInfo = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\r\n        if (!this._hide) {\r\n            this._register(applyStyle(this._nodes.first, { width: layoutInfo.map((l) => l.contentLeft) }));\r\n        }\r\n        else {\r\n            reset(this._nodes.first);\r\n        }\r\n        this._register(autorun(reader => {\r\n            const isFullyRevealed = this._unchangedRegion.visibleLineCountTop.read(reader) + this._unchangedRegion.visibleLineCountBottom.read(reader) === this._unchangedRegion.lineCount;\r\n            this._nodes.bottom.classList.toggle('canMoveTop', !isFullyRevealed);\r\n            this._nodes.bottom.classList.toggle('canMoveBottom', this._unchangedRegion.visibleLineCountBottom.read(reader) > 0);\r\n            this._nodes.top.classList.toggle('canMoveTop', this._unchangedRegion.visibleLineCountTop.read(reader) > 0);\r\n            this._nodes.top.classList.toggle('canMoveBottom', !isFullyRevealed);\r\n            const isDragged = this._unchangedRegion.isDragged.read(reader);\r\n            const domNode = this._editor.getDomNode();\r\n            if (domNode) {\r\n                domNode.classList.toggle('draggingUnchangedRegion', !!isDragged);\r\n                if (isDragged === 'top') {\r\n                    domNode.classList.toggle('canMoveTop', this._unchangedRegion.visibleLineCountTop.read(reader) > 0);\r\n                    domNode.classList.toggle('canMoveBottom', !isFullyRevealed);\r\n                }\r\n                else if (isDragged === 'bottom') {\r\n                    domNode.classList.toggle('canMoveTop', !isFullyRevealed);\r\n                    domNode.classList.toggle('canMoveBottom', this._unchangedRegion.visibleLineCountBottom.read(reader) > 0);\r\n                }\r\n                else {\r\n                    domNode.classList.toggle('canMoveTop', false);\r\n                    domNode.classList.toggle('canMoveBottom', false);\r\n                }\r\n            }\r\n        }));\r\n        const editor = this._editor;\r\n        this._register(addDisposableListener(this._nodes.top, 'mousedown', e => {\r\n            if (e.button !== 0) {\r\n                return;\r\n            }\r\n            this._nodes.top.classList.toggle('dragging', true);\r\n            this._nodes.root.classList.toggle('dragging', true);\r\n            e.preventDefault();\r\n            const startTop = e.clientY;\r\n            let didMove = false;\r\n            const cur = this._unchangedRegion.visibleLineCountTop.get();\r\n            this._unchangedRegion.isDragged.set('top', undefined);\r\n            const window = getWindow(this._nodes.top);\r\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\r\n                const currentTop = e.clientY;\r\n                const delta = currentTop - startTop;\r\n                didMove = didMove || Math.abs(delta) > 2;\r\n                const lineDelta = Math.round(delta / editor.getOption(66 /* EditorOption.lineHeight */));\r\n                const newVal = Math.max(0, Math.min(cur + lineDelta, this._unchangedRegion.getMaxVisibleLineCountTop()));\r\n                this._unchangedRegion.visibleLineCountTop.set(newVal, undefined);\r\n            });\r\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\r\n                if (!didMove) {\r\n                    this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\r\n                }\r\n                this._nodes.top.classList.toggle('dragging', false);\r\n                this._nodes.root.classList.toggle('dragging', false);\r\n                this._unchangedRegion.isDragged.set(undefined, undefined);\r\n                mouseMoveListener.dispose();\r\n                mouseUpListener.dispose();\r\n            });\r\n        }));\r\n        this._register(addDisposableListener(this._nodes.bottom, 'mousedown', e => {\r\n            if (e.button !== 0) {\r\n                return;\r\n            }\r\n            this._nodes.bottom.classList.toggle('dragging', true);\r\n            this._nodes.root.classList.toggle('dragging', true);\r\n            e.preventDefault();\r\n            const startTop = e.clientY;\r\n            let didMove = false;\r\n            const cur = this._unchangedRegion.visibleLineCountBottom.get();\r\n            this._unchangedRegion.isDragged.set('bottom', undefined);\r\n            const window = getWindow(this._nodes.bottom);\r\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\r\n                const currentTop = e.clientY;\r\n                const delta = currentTop - startTop;\r\n                didMove = didMove || Math.abs(delta) > 2;\r\n                const lineDelta = Math.round(delta / editor.getOption(66 /* EditorOption.lineHeight */));\r\n                const newVal = Math.max(0, Math.min(cur - lineDelta, this._unchangedRegion.getMaxVisibleLineCountBottom()));\r\n                const top = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\r\n                this._unchangedRegion.visibleLineCountBottom.set(newVal, undefined);\r\n                const top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\r\n                editor.setScrollTop(editor.getScrollTop() + (top2 - top));\r\n            });\r\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\r\n                this._unchangedRegion.isDragged.set(undefined, undefined);\r\n                if (!didMove) {\r\n                    const top = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\r\n                    this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\r\n                    const top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\r\n                    editor.setScrollTop(editor.getScrollTop() + (top2 - top));\r\n                }\r\n                this._nodes.bottom.classList.toggle('dragging', false);\r\n                this._nodes.root.classList.toggle('dragging', false);\r\n                mouseMoveListener.dispose();\r\n                mouseUpListener.dispose();\r\n            });\r\n        }));\r\n        this._register(autorun(reader => {\r\n            /** @description update labels */\r\n            const children = [];\r\n            if (!this._hide) {\r\n                const lineCount = _unchangedRegion.getHiddenModifiedRange(reader).length;\r\n                const linesHiddenText = localize('hiddenLines', '{0} hidden lines', lineCount);\r\n                const span = $('span', { title: localize('diff.hiddenLines.expandAll', 'Double click to unfold') }, linesHiddenText);\r\n                span.addEventListener('dblclick', e => {\r\n                    if (e.button !== 0) {\r\n                        return;\r\n                    }\r\n                    e.preventDefault();\r\n                    this._unchangedRegion.showAll(undefined);\r\n                });\r\n                children.push(span);\r\n                const range = this._unchangedRegion.getHiddenModifiedRange(reader);\r\n                const items = this._modifiedOutlineSource.getBreadcrumbItems(range, reader);\r\n                if (items.length > 0) {\r\n                    children.push($('span', undefined, '\\u00a0\\u00a0|\\u00a0\\u00a0'));\r\n                    for (let i = 0; i < items.length; i++) {\r\n                        const item = items[i];\r\n                        const icon = SymbolKinds.toIcon(item.kind);\r\n                        const divItem = h('div.breadcrumb-item', {\r\n                            style: { display: 'flex', alignItems: 'center' },\r\n                        }, [\r\n                            renderIcon(icon),\r\n                            '\\u00a0',\r\n                            item.name,\r\n                            ...(i === items.length - 1\r\n                                ? []\r\n                                : [renderIcon(Codicon.chevronRight)])\r\n                        ]).root;\r\n                        children.push(divItem);\r\n                        divItem.onclick = () => {\r\n                            this._revealModifiedHiddenLine(item.startLineNumber);\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n            reset(this._nodes.others, ...children);\r\n        }));\r\n    }\r\n}\r\nlet OutlineSource = class OutlineSource extends Disposable {\r\n    constructor(_languageFeaturesService, _textModel) {\r\n        super();\r\n        this._languageFeaturesService = _languageFeaturesService;\r\n        this._textModel = _textModel;\r\n        this._currentModel = observableValue(this, undefined);\r\n        const documentSymbolProviderChanged = observableSignalFromEvent('documentSymbolProvider.onDidChange', this._languageFeaturesService.documentSymbolProvider.onDidChange);\r\n        const textModelChanged = observableSignalFromEvent('_textModel.onDidChangeContent', Event.debounce(e => this._textModel.onDidChangeContent(e), () => undefined, 100));\r\n        this._register(autorunWithStore(async (reader, store) => {\r\n            documentSymbolProviderChanged.read(reader);\r\n            textModelChanged.read(reader);\r\n            const src = store.add(new DisposableCancellationTokenSource());\r\n            const model = await OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, this._textModel, src.token);\r\n            if (store.isDisposed) {\r\n                return;\r\n            }\r\n            this._currentModel.set(model, undefined);\r\n        }));\r\n    }\r\n    getBreadcrumbItems(startRange, reader) {\r\n        const m = this._currentModel.read(reader);\r\n        if (!m) {\r\n            return [];\r\n        }\r\n        const symbols = m.asListOfDocumentSymbols()\r\n            .filter(s => startRange.contains(s.range.startLineNumber) && !startRange.contains(s.range.endLineNumber));\r\n        symbols.sort(reverseOrder(compareBy(s => s.range.endLineNumber - s.range.startLineNumber, numberComparator)));\r\n        return symbols.map(s => ({ name: s.name, kind: s.kind, startLineNumber: s.range.startLineNumber }));\r\n    }\r\n};\r\nOutlineSource = __decorate([\r\n    __param(0, ILanguageFeaturesService)\r\n], OutlineSource);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar WorkerBasedDocumentDiffProvider_1;\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\r\nimport { LineRange } from '../../../common/core/lineRange.js';\r\nimport { DetailedLineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\r\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\r\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\r\nlet WorkerBasedDocumentDiffProvider = WorkerBasedDocumentDiffProvider_1 = class WorkerBasedDocumentDiffProvider {\r\n    constructor(options, editorWorkerService, telemetryService) {\r\n        this.editorWorkerService = editorWorkerService;\r\n        this.telemetryService = telemetryService;\r\n        this.onDidChangeEventEmitter = new Emitter();\r\n        this.onDidChange = this.onDidChangeEventEmitter.event;\r\n        this.diffAlgorithm = 'advanced';\r\n        this.diffAlgorithmOnDidChangeSubscription = undefined;\r\n        this.setOptions(options);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\r\n    }\r\n    async computeDiff(original, modified, options, cancellationToken) {\r\n        var _a, _b;\r\n        if (typeof this.diffAlgorithm !== 'string') {\r\n            return this.diffAlgorithm.computeDiff(original, modified, options, cancellationToken);\r\n        }\r\n        // This significantly speeds up the case when the original file is empty\r\n        if (original.getLineCount() === 1 && original.getLineMaxColumn(1) === 1) {\r\n            if (modified.getLineCount() === 1 && modified.getLineMaxColumn(1) === 1) {\r\n                return {\r\n                    changes: [],\r\n                    identical: true,\r\n                    quitEarly: false,\r\n                    moves: [],\r\n                };\r\n            }\r\n            return {\r\n                changes: [\r\n                    new DetailedLineRangeMapping(new LineRange(1, 2), new LineRange(1, modified.getLineCount() + 1), [\r\n                        new RangeMapping(original.getFullModelRange(), modified.getFullModelRange())\r\n                    ])\r\n                ],\r\n                identical: false,\r\n                quitEarly: false,\r\n                moves: [],\r\n            };\r\n        }\r\n        const uriKey = JSON.stringify([original.uri.toString(), modified.uri.toString()]);\r\n        const context = JSON.stringify([original.id, modified.id, original.getAlternativeVersionId(), modified.getAlternativeVersionId(), JSON.stringify(options)]);\r\n        const c = WorkerBasedDocumentDiffProvider_1.diffCache.get(uriKey);\r\n        if (c && c.context === context) {\r\n            return c.result;\r\n        }\r\n        const sw = StopWatch.create();\r\n        const result = await this.editorWorkerService.computeDiff(original.uri, modified.uri, options, this.diffAlgorithm);\r\n        const timeMs = sw.elapsed();\r\n        this.telemetryService.publicLog2('diffEditor.computeDiff', {\r\n            timeMs,\r\n            timedOut: (_a = result === null || result === void 0 ? void 0 : result.quitEarly) !== null && _a !== void 0 ? _a : true,\r\n            detectedMoves: options.computeMoves ? ((_b = result === null || result === void 0 ? void 0 : result.moves.length) !== null && _b !== void 0 ? _b : 0) : -1,\r\n        });\r\n        if (cancellationToken.isCancellationRequested) {\r\n            // Text models might be disposed!\r\n            return {\r\n                changes: [],\r\n                identical: false,\r\n                quitEarly: true,\r\n                moves: [],\r\n            };\r\n        }\r\n        if (!result) {\r\n            throw new Error('no diff result available');\r\n        }\r\n        // max 10 items in cache\r\n        if (WorkerBasedDocumentDiffProvider_1.diffCache.size > 10) {\r\n            WorkerBasedDocumentDiffProvider_1.diffCache.delete(WorkerBasedDocumentDiffProvider_1.diffCache.keys().next().value);\r\n        }\r\n        WorkerBasedDocumentDiffProvider_1.diffCache.set(uriKey, { result, context });\r\n        return result;\r\n    }\r\n    setOptions(newOptions) {\r\n        var _a;\r\n        let didChange = false;\r\n        if (newOptions.diffAlgorithm) {\r\n            if (this.diffAlgorithm !== newOptions.diffAlgorithm) {\r\n                (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\r\n                this.diffAlgorithmOnDidChangeSubscription = undefined;\r\n                this.diffAlgorithm = newOptions.diffAlgorithm;\r\n                if (typeof newOptions.diffAlgorithm !== 'string') {\r\n                    this.diffAlgorithmOnDidChangeSubscription = newOptions.diffAlgorithm.onDidChange(() => this.onDidChangeEventEmitter.fire());\r\n                }\r\n                didChange = true;\r\n            }\r\n        }\r\n        if (didChange) {\r\n            this.onDidChangeEventEmitter.fire();\r\n        }\r\n    }\r\n};\r\nWorkerBasedDocumentDiffProvider.diffCache = new Map();\r\nWorkerBasedDocumentDiffProvider = WorkerBasedDocumentDiffProvider_1 = __decorate([\r\n    __param(1, IEditorWorkerService),\r\n    __param(2, ITelemetryService)\r\n], WorkerBasedDocumentDiffProvider);\r\nexport { WorkerBasedDocumentDiffProvider };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { WorkerBasedDocumentDiffProvider } from './workerBasedDocumentDiffProvider.js';\r\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { IInstantiationService, createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\r\nexport const IDiffProviderFactoryService = createDecorator('diffProviderFactoryService');\r\nlet DiffProviderFactoryService = class DiffProviderFactoryService {\r\n    constructor(instantiationService) {\r\n        this.instantiationService = instantiationService;\r\n    }\r\n    createDiffProvider(options) {\r\n        return this.instantiationService.createInstance(WorkerBasedDocumentDiffProvider, options);\r\n    }\r\n};\r\nDiffProviderFactoryService = __decorate([\r\n    __param(0, IInstantiationService)\r\n], DiffProviderFactoryService);\r\nexport { DiffProviderFactoryService };\r\nregisterSingleton(IDiffProviderFactoryService, DiffProviderFactoryService, 1 /* InstantiationType.Delayed */);\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\r\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorunWithStore, derived, observableSignal, observableSignalFromEvent, observableValue, transaction, waitForState } from '../../../../base/common/observable.js';\r\nimport { IDiffProviderFactoryService } from './diffProviderFactoryService.js';\r\nimport { readHotReloadableExport } from './utils.js';\r\nimport { LineRange } from '../../../common/core/lineRange.js';\r\nimport { DefaultLinesDiffComputer } from '../../../common/diff/defaultLinesDiffComputer/defaultLinesDiffComputer.js';\r\nimport { DetailedLineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\r\nimport { TextEditInfo } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js';\r\nimport { combineTextEditInfos } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/combineTextEditInfos.js';\r\nimport { optimizeSequenceDiffs } from '../../../common/diff/defaultLinesDiffComputer/heuristicSequenceOptimizations.js';\r\nlet DiffEditorViewModel = class DiffEditorViewModel extends Disposable {\r\n    setActiveMovedText(movedText) {\r\n        this._activeMovedText.set(movedText, undefined);\r\n    }\r\n    constructor(model, _options, _diffProviderFactoryService) {\r\n        super();\r\n        this.model = model;\r\n        this._options = _options;\r\n        this._diffProviderFactoryService = _diffProviderFactoryService;\r\n        this._isDiffUpToDate = observableValue(this, false);\r\n        this.isDiffUpToDate = this._isDiffUpToDate;\r\n        this._diff = observableValue(this, undefined);\r\n        this.diff = this._diff;\r\n        this._unchangedRegions = observableValue(this, { regions: [], originalDecorationIds: [], modifiedDecorationIds: [] });\r\n        this.unchangedRegions = derived(this, r => {\r\n            if (this._options.hideUnchangedRegions.read(r)) {\r\n                return this._unchangedRegions.read(r).regions;\r\n            }\r\n            else {\r\n                // Reset state\r\n                transaction(tx => {\r\n                    for (const r of this._unchangedRegions.get().regions) {\r\n                        r.collapseAll(tx);\r\n                    }\r\n                });\r\n                return [];\r\n            }\r\n        });\r\n        this.movedTextToCompare = observableValue(this, undefined);\r\n        this._activeMovedText = observableValue(this, undefined);\r\n        this._hoveredMovedText = observableValue(this, undefined);\r\n        this.activeMovedText = derived(this, r => { var _a, _b; return (_b = (_a = this.movedTextToCompare.read(r)) !== null && _a !== void 0 ? _a : this._hoveredMovedText.read(r)) !== null && _b !== void 0 ? _b : this._activeMovedText.read(r); });\r\n        this._cancellationTokenSource = new CancellationTokenSource();\r\n        this._diffProvider = derived(this, reader => {\r\n            const diffProvider = this._diffProviderFactoryService.createDiffProvider({\r\n                diffAlgorithm: this._options.diffAlgorithm.read(reader)\r\n            });\r\n            const onChangeSignal = observableSignalFromEvent('onDidChange', diffProvider.onDidChange);\r\n            return {\r\n                diffProvider,\r\n                onChangeSignal,\r\n            };\r\n        });\r\n        this._register(toDisposable(() => this._cancellationTokenSource.cancel()));\r\n        const contentChangedSignal = observableSignal('contentChangedSignal');\r\n        const debouncer = this._register(new RunOnceScheduler(() => contentChangedSignal.trigger(undefined), 200));\r\n        const updateUnchangedRegions = (result, tx, reader) => {\r\n            const newUnchangedRegions = UnchangedRegion.fromDiffs(result.changes, model.original.getLineCount(), model.modified.getLineCount(), this._options.hideUnchangedRegionsMinimumLineCount.read(reader), this._options.hideUnchangedRegionsContextLineCount.read(reader));\r\n            // Transfer state from cur state\r\n            const lastUnchangedRegions = this._unchangedRegions.get();\r\n            const lastUnchangedRegionsOrigRanges = lastUnchangedRegions.originalDecorationIds\r\n                .map(id => model.original.getDecorationRange(id))\r\n                .map(r => r ? LineRange.fromRange(r) : undefined);\r\n            const lastUnchangedRegionsModRanges = lastUnchangedRegions.modifiedDecorationIds\r\n                .map(id => model.modified.getDecorationRange(id))\r\n                .map(r => r ? LineRange.fromRange(r) : undefined);\r\n            const originalDecorationIds = model.original.deltaDecorations(lastUnchangedRegions.originalDecorationIds, newUnchangedRegions.map(r => ({ range: r.originalUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\r\n            const modifiedDecorationIds = model.modified.deltaDecorations(lastUnchangedRegions.modifiedDecorationIds, newUnchangedRegions.map(r => ({ range: r.modifiedUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\r\n            for (const r of newUnchangedRegions) {\r\n                for (let i = 0; i < lastUnchangedRegions.regions.length; i++) {\r\n                    if (lastUnchangedRegionsOrigRanges[i] && r.originalUnchangedRange.intersectsStrict(lastUnchangedRegionsOrigRanges[i])\r\n                        && lastUnchangedRegionsModRanges[i] && r.modifiedUnchangedRange.intersectsStrict(lastUnchangedRegionsModRanges[i])) {\r\n                        r.setHiddenModifiedRange(lastUnchangedRegions.regions[i].getHiddenModifiedRange(undefined), tx);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            this._unchangedRegions.set({\r\n                regions: newUnchangedRegions,\r\n                originalDecorationIds,\r\n                modifiedDecorationIds\r\n            }, tx);\r\n        };\r\n        this._register(model.modified.onDidChangeContent((e) => {\r\n            const diff = this._diff.get();\r\n            if (diff) {\r\n                const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\r\n                const result = applyModifiedEdits(this._lastDiff, textEdits, model.original, model.modified);\r\n                if (result) {\r\n                    this._lastDiff = result;\r\n                    transaction(tx => {\r\n                        this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\r\n                        updateUnchangedRegions(result, tx);\r\n                        const currentSyncedMovedText = this.movedTextToCompare.get();\r\n                        this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\r\n                    });\r\n                }\r\n            }\r\n            this._isDiffUpToDate.set(false, undefined);\r\n            debouncer.schedule();\r\n        }));\r\n        this._register(model.original.onDidChangeContent((e) => {\r\n            const diff = this._diff.get();\r\n            if (diff) {\r\n                const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\r\n                const result = applyOriginalEdits(this._lastDiff, textEdits, model.original, model.modified);\r\n                if (result) {\r\n                    this._lastDiff = result;\r\n                    transaction(tx => {\r\n                        this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\r\n                        updateUnchangedRegions(result, tx);\r\n                        const currentSyncedMovedText = this.movedTextToCompare.get();\r\n                        this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\r\n                    });\r\n                }\r\n            }\r\n            this._isDiffUpToDate.set(false, undefined);\r\n            debouncer.schedule();\r\n        }));\r\n        this._register(autorunWithStore(async (reader, store) => {\r\n            /** @description compute diff */\r\n            var _a, _b;\r\n            // So that they get recomputed when these settings change\r\n            this._options.hideUnchangedRegionsMinimumLineCount.read(reader);\r\n            this._options.hideUnchangedRegionsContextLineCount.read(reader);\r\n            debouncer.cancel();\r\n            contentChangedSignal.read(reader);\r\n            const documentDiffProvider = this._diffProvider.read(reader);\r\n            documentDiffProvider.onChangeSignal.read(reader);\r\n            readHotReloadableExport(DefaultLinesDiffComputer, reader);\r\n            readHotReloadableExport(optimizeSequenceDiffs, reader);\r\n            this._isDiffUpToDate.set(false, undefined);\r\n            let originalTextEditInfos = [];\r\n            store.add(model.original.onDidChangeContent((e) => {\r\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\r\n                originalTextEditInfos = combineTextEditInfos(originalTextEditInfos, edits);\r\n            }));\r\n            let modifiedTextEditInfos = [];\r\n            store.add(model.modified.onDidChangeContent((e) => {\r\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\r\n                modifiedTextEditInfos = combineTextEditInfos(modifiedTextEditInfos, edits);\r\n            }));\r\n            let result = await documentDiffProvider.diffProvider.computeDiff(model.original, model.modified, {\r\n                ignoreTrimWhitespace: this._options.ignoreTrimWhitespace.read(reader),\r\n                maxComputationTimeMs: this._options.maxComputationTimeMs.read(reader),\r\n                computeMoves: this._options.showMoves.read(reader),\r\n            }, this._cancellationTokenSource.token);\r\n            if (this._cancellationTokenSource.token.isCancellationRequested) {\r\n                return;\r\n            }\r\n            result = normalizeDocumentDiff(result, model.original, model.modified);\r\n            result = (_a = applyOriginalEdits(result, originalTextEditInfos, model.original, model.modified)) !== null && _a !== void 0 ? _a : result;\r\n            result = (_b = applyModifiedEdits(result, modifiedTextEditInfos, model.original, model.modified)) !== null && _b !== void 0 ? _b : result;\r\n            transaction(tx => {\r\n                /** @description write diff result */\r\n                updateUnchangedRegions(result, tx);\r\n                this._lastDiff = result;\r\n                const state = DiffState.fromDiffResult(result);\r\n                this._diff.set(state, tx);\r\n                this._isDiffUpToDate.set(true, tx);\r\n                const currentSyncedMovedText = this.movedTextToCompare.get();\r\n                this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\r\n            });\r\n        }));\r\n    }\r\n    ensureModifiedLineIsVisible(lineNumber, tx) {\r\n        var _a;\r\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\r\n            return;\r\n        }\r\n        const unchangedRegions = this._unchangedRegions.get().regions;\r\n        for (const r of unchangedRegions) {\r\n            if (r.getHiddenModifiedRange(undefined).contains(lineNumber)) {\r\n                r.showModifiedLine(lineNumber, tx);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    ensureOriginalLineIsVisible(lineNumber, tx) {\r\n        var _a;\r\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\r\n            return;\r\n        }\r\n        const unchangedRegions = this._unchangedRegions.get().regions;\r\n        for (const r of unchangedRegions) {\r\n            if (r.getHiddenOriginalRange(undefined).contains(lineNumber)) {\r\n                r.showOriginalLine(lineNumber, tx);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    async waitForDiff() {\r\n        await waitForState(this.isDiffUpToDate, s => s);\r\n    }\r\n    serializeState() {\r\n        const regions = this._unchangedRegions.get();\r\n        return {\r\n            collapsedRegions: regions.regions.map(r => ({ range: r.getHiddenModifiedRange(undefined).serialize() }))\r\n        };\r\n    }\r\n    restoreSerializedState(state) {\r\n        const ranges = state.collapsedRegions.map(r => LineRange.deserialize(r.range));\r\n        const regions = this._unchangedRegions.get();\r\n        transaction(tx => {\r\n            for (const r of regions.regions) {\r\n                for (const range of ranges) {\r\n                    if (r.modifiedUnchangedRange.intersect(range)) {\r\n                        r.setHiddenModifiedRange(range, tx);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n};\r\nDiffEditorViewModel = __decorate([\r\n    __param(2, IDiffProviderFactoryService)\r\n], DiffEditorViewModel);\r\nexport { DiffEditorViewModel };\r\nfunction normalizeDocumentDiff(diff, original, modified) {\r\n    return {\r\n        changes: diff.changes.map(c => new DetailedLineRangeMapping(c.original, c.modified, c.innerChanges ? c.innerChanges.map(i => normalizeRangeMapping(i, original, modified)) : undefined)),\r\n        moves: diff.moves,\r\n        identical: diff.identical,\r\n        quitEarly: diff.quitEarly,\r\n    };\r\n}\r\nfunction normalizeRangeMapping(rangeMapping, original, modified) {\r\n    let originalRange = rangeMapping.originalRange;\r\n    let modifiedRange = rangeMapping.modifiedRange;\r\n    if ((originalRange.endColumn !== 1 || modifiedRange.endColumn !== 1) &&\r\n        originalRange.endColumn === original.getLineMaxColumn(originalRange.endLineNumber)\r\n        && modifiedRange.endColumn === modified.getLineMaxColumn(modifiedRange.endLineNumber)\r\n        && originalRange.endLineNumber < original.getLineCount()\r\n        && modifiedRange.endLineNumber < modified.getLineCount()) {\r\n        originalRange = originalRange.setEndPosition(originalRange.endLineNumber + 1, 1);\r\n        modifiedRange = modifiedRange.setEndPosition(modifiedRange.endLineNumber + 1, 1);\r\n    }\r\n    return new RangeMapping(originalRange, modifiedRange);\r\n}\r\nexport class DiffState {\r\n    static fromDiffResult(result) {\r\n        return new DiffState(result.changes.map(c => new DiffMapping(c)), result.moves || [], result.identical, result.quitEarly);\r\n    }\r\n    constructor(mappings, movedTexts, identical, quitEarly) {\r\n        this.mappings = mappings;\r\n        this.movedTexts = movedTexts;\r\n        this.identical = identical;\r\n        this.quitEarly = quitEarly;\r\n    }\r\n}\r\nexport class DiffMapping {\r\n    constructor(lineRangeMapping) {\r\n        this.lineRangeMapping = lineRangeMapping;\r\n        /*\r\n        readonly movedTo: MovedText | undefined,\r\n        readonly movedFrom: MovedText | undefined,\r\n\r\n        if (movedTo) {\r\n            assertFn(() =>\r\n                movedTo.lineRangeMapping.modifiedRange.equals(lineRangeMapping.modifiedRange)\r\n                && lineRangeMapping.originalRange.isEmpty\r\n                && !movedFrom\r\n            );\r\n        } else if (movedFrom) {\r\n            assertFn(() =>\r\n                movedFrom.lineRangeMapping.originalRange.equals(lineRangeMapping.originalRange)\r\n                && lineRangeMapping.modifiedRange.isEmpty\r\n                && !movedTo\r\n            );\r\n        }\r\n        */\r\n    }\r\n}\r\nexport class UnchangedRegion {\r\n    static fromDiffs(changes, originalLineCount, modifiedLineCount, minHiddenLineCount, minContext) {\r\n        const inversedMappings = DetailedLineRangeMapping.inverse(changes, originalLineCount, modifiedLineCount);\r\n        const result = [];\r\n        for (const mapping of inversedMappings) {\r\n            let origStart = mapping.original.startLineNumber;\r\n            let modStart = mapping.modified.startLineNumber;\r\n            let length = mapping.original.length;\r\n            const atStart = origStart === 1 && modStart === 1;\r\n            const atEnd = origStart + length === originalLineCount + 1 && modStart + length === modifiedLineCount + 1;\r\n            if ((atStart || atEnd) && length >= minContext + minHiddenLineCount) {\r\n                if (atStart && !atEnd) {\r\n                    length -= minContext;\r\n                }\r\n                if (atEnd && !atStart) {\r\n                    origStart += minContext;\r\n                    modStart += minContext;\r\n                    length -= minContext;\r\n                }\r\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\r\n            }\r\n            else if (length >= minContext * 2 + minHiddenLineCount) {\r\n                origStart += minContext;\r\n                modStart += minContext;\r\n                length -= minContext * 2;\r\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    get originalUnchangedRange() {\r\n        return LineRange.ofLength(this.originalLineNumber, this.lineCount);\r\n    }\r\n    get modifiedUnchangedRange() {\r\n        return LineRange.ofLength(this.modifiedLineNumber, this.lineCount);\r\n    }\r\n    constructor(originalLineNumber, modifiedLineNumber, lineCount, visibleLineCountTop, visibleLineCountBottom) {\r\n        this.originalLineNumber = originalLineNumber;\r\n        this.modifiedLineNumber = modifiedLineNumber;\r\n        this.lineCount = lineCount;\r\n        this._visibleLineCountTop = observableValue(this, 0);\r\n        this.visibleLineCountTop = this._visibleLineCountTop;\r\n        this._visibleLineCountBottom = observableValue(this, 0);\r\n        this.visibleLineCountBottom = this._visibleLineCountBottom;\r\n        this._shouldHideControls = derived(this, reader => /** @description isVisible */ this.visibleLineCountTop.read(reader) + this.visibleLineCountBottom.read(reader) === this.lineCount && !this.isDragged.read(reader));\r\n        this.isDragged = observableValue(this, undefined);\r\n        this._visibleLineCountTop.set(visibleLineCountTop, undefined);\r\n        this._visibleLineCountBottom.set(visibleLineCountBottom, undefined);\r\n    }\r\n    shouldHideControls(reader) {\r\n        return this._shouldHideControls.read(reader);\r\n    }\r\n    getHiddenOriginalRange(reader) {\r\n        return LineRange.ofLength(this.originalLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\r\n    }\r\n    getHiddenModifiedRange(reader) {\r\n        return LineRange.ofLength(this.modifiedLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\r\n    }\r\n    setHiddenModifiedRange(range, tx) {\r\n        const visibleLineCountTop = range.startLineNumber - this.modifiedLineNumber;\r\n        const visibleLineCountBottom = (this.modifiedLineNumber + this.lineCount) - range.endLineNumberExclusive;\r\n        this.setState(visibleLineCountTop, visibleLineCountBottom, tx);\r\n    }\r\n    getMaxVisibleLineCountTop() {\r\n        return this.lineCount - this._visibleLineCountBottom.get();\r\n    }\r\n    getMaxVisibleLineCountBottom() {\r\n        return this.lineCount - this._visibleLineCountTop.get();\r\n    }\r\n    showMoreAbove(count = 10, tx) {\r\n        const maxVisibleLineCountTop = this.getMaxVisibleLineCountTop();\r\n        this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + count, maxVisibleLineCountTop), tx);\r\n    }\r\n    showMoreBelow(count = 10, tx) {\r\n        const maxVisibleLineCountBottom = this.lineCount - this._visibleLineCountTop.get();\r\n        this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + count, maxVisibleLineCountBottom), tx);\r\n    }\r\n    showAll(tx) {\r\n        this._visibleLineCountBottom.set(this.lineCount - this._visibleLineCountTop.get(), tx);\r\n    }\r\n    showModifiedLine(lineNumber, tx) {\r\n        const top = lineNumber + 1 - (this.modifiedLineNumber + this._visibleLineCountTop.get());\r\n        const bottom = (this.modifiedLineNumber - this._visibleLineCountBottom.get() + this.lineCount) - lineNumber;\r\n        if (top < bottom) {\r\n            this._visibleLineCountTop.set(this._visibleLineCountTop.get() + top, tx);\r\n        }\r\n        else {\r\n            this._visibleLineCountBottom.set(this._visibleLineCountBottom.get() + bottom, tx);\r\n        }\r\n    }\r\n    showOriginalLine(lineNumber, tx) {\r\n        const top = lineNumber - this.originalLineNumber;\r\n        const bottom = (this.originalLineNumber + this.lineCount) - lineNumber;\r\n        if (top < bottom) {\r\n            this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + bottom - top, this.getMaxVisibleLineCountTop()), tx);\r\n        }\r\n        else {\r\n            this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + top - bottom, this.getMaxVisibleLineCountBottom()), tx);\r\n        }\r\n    }\r\n    collapseAll(tx) {\r\n        this._visibleLineCountTop.set(0, tx);\r\n        this._visibleLineCountBottom.set(0, tx);\r\n    }\r\n    setState(visibleLineCountTop, visibleLineCountBottom, tx) {\r\n        visibleLineCountTop = Math.max(Math.min(visibleLineCountTop, this.lineCount), 0);\r\n        visibleLineCountBottom = Math.max(Math.min(visibleLineCountBottom, this.lineCount - visibleLineCountTop), 0);\r\n        this._visibleLineCountTop.set(visibleLineCountTop, tx);\r\n        this._visibleLineCountBottom.set(visibleLineCountBottom, tx);\r\n    }\r\n}\r\nfunction applyOriginalEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\r\n    return undefined;\r\n    /*\r\n    TODO@hediet\r\n    if (textEdits.length === 0) {\r\n        return diff;\r\n    }\r\n\r\n    const diff2 = flip(diff);\r\n    const diff3 = applyModifiedEdits(diff2, textEdits, modifiedTextModel, originalTextModel);\r\n    if (!diff3) {\r\n        return undefined;\r\n    }\r\n    return flip(diff3);*/\r\n}\r\n/*\r\nfunction flip(diff: IDocumentDiff): IDocumentDiff {\r\n    return {\r\n        changes: diff.changes.map(c => c.flip()),\r\n        moves: diff.moves.map(m => m.flip()),\r\n        identical: diff.identical,\r\n        quitEarly: diff.quitEarly,\r\n    };\r\n}\r\n*/\r\nfunction applyModifiedEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\r\n    return undefined;\r\n    /*\r\n    TODO@hediet\r\n    if (textEdits.length === 0) {\r\n        return diff;\r\n    }\r\n    if (diff.changes.some(c => !c.innerChanges) || diff.moves.length > 0) {\r\n        // TODO support these cases\r\n        return undefined;\r\n    }\r\n\r\n    const changes = applyModifiedEditsToLineRangeMappings(diff.changes, textEdits, originalTextModel, modifiedTextModel);\r\n\r\n    const moves = diff.moves.map(m => {\r\n        const newModifiedRange = applyEditToLineRange(m.lineRangeMapping.modified, textEdits);\r\n        return newModifiedRange ? new MovedText(\r\n            new SimpleLineRangeMapping(m.lineRangeMapping.original, newModifiedRange),\r\n            applyModifiedEditsToLineRangeMappings(m.changes, textEdits, originalTextModel, modifiedTextModel),\r\n        ) : undefined;\r\n    }).filter(isDefined);\r\n\r\n    return {\r\n        identical: false,\r\n        quitEarly: false,\r\n        changes,\r\n        moves,\r\n    };*/\r\n}\r\n/*\r\nfunction applyEditToLineRange(range: LineRange, textEdits: TextEditInfo[]): LineRange | undefined {\r\n    let rangeStartLineNumber = range.startLineNumber;\r\n    let rangeEndLineNumberEx = range.endLineNumberExclusive;\r\n\r\n    for (let i = textEdits.length - 1; i >= 0; i--) {\r\n        const textEdit = textEdits[i];\r\n        const textEditStartLineNumber = lengthGetLineCount(textEdit.startOffset) + 1;\r\n        const textEditEndLineNumber = lengthGetLineCount(textEdit.endOffset) + 1;\r\n        const newLengthLineCount = lengthGetLineCount(textEdit.newLength);\r\n        const delta = newLengthLineCount - (textEditEndLineNumber - textEditStartLineNumber);\r\n\r\n        if (textEditEndLineNumber < rangeStartLineNumber) {\r\n            // the text edit is before us\r\n            rangeStartLineNumber += delta;\r\n            rangeEndLineNumberEx += delta;\r\n        } else if (textEditStartLineNumber > rangeEndLineNumberEx) {\r\n            // the text edit is after us\r\n            // NOOP\r\n        } else if (textEditStartLineNumber < rangeStartLineNumber && rangeEndLineNumberEx < textEditEndLineNumber) {\r\n            // the range is fully contained in the text edit\r\n            return undefined;\r\n        } else if (textEditStartLineNumber < rangeStartLineNumber && textEditEndLineNumber <= rangeEndLineNumberEx) {\r\n            // the text edit ends inside our range\r\n            rangeStartLineNumber = textEditEndLineNumber + 1;\r\n            rangeStartLineNumber += delta;\r\n            rangeEndLineNumberEx += delta;\r\n        } else if (rangeStartLineNumber <= textEditStartLineNumber && textEditEndLineNumber < rangeStartLineNumber) {\r\n            // the text edit starts inside our range\r\n            rangeEndLineNumberEx = textEditStartLineNumber;\r\n        } else {\r\n            rangeEndLineNumberEx += delta;\r\n        }\r\n    }\r\n\r\n    return new LineRange(rangeStartLineNumber, rangeEndLineNumberEx);\r\n}\r\n\r\nfunction applyModifiedEditsToLineRangeMappings(changes: readonly LineRangeMapping[], textEdits: TextEditInfo[], originalTextModel: ITextModel, modifiedTextModel: ITextModel): LineRangeMapping[] {\r\n    const diffTextEdits = changes.flatMap(c => c.innerChanges!.map(c => new TextEditInfo(\r\n        positionToLength(c.originalRange.getStartPosition()),\r\n        positionToLength(c.originalRange.getEndPosition()),\r\n        lengthOfRange(c.modifiedRange).toLength(),\r\n    )));\r\n\r\n    const combined = combineTextEditInfos(diffTextEdits, textEdits);\r\n\r\n    let lastOriginalEndOffset = lengthZero;\r\n    let lastModifiedEndOffset = lengthZero;\r\n    const rangeMappings = combined.map(c => {\r\n        const modifiedStartOffset = lengthAdd(lastModifiedEndOffset, lengthDiffNonNegative(lastOriginalEndOffset, c.startOffset));\r\n        lastOriginalEndOffset = c.endOffset;\r\n        lastModifiedEndOffset = lengthAdd(modifiedStartOffset, c.newLength);\r\n\r\n        return new RangeMapping(\r\n            Range.fromPositions(lengthToPosition(c.startOffset), lengthToPosition(c.endOffset)),\r\n            Range.fromPositions(lengthToPosition(modifiedStartOffset), lengthToPosition(lastModifiedEndOffset)),\r\n        );\r\n    });\r\n\r\n    const newChanges = lineRangeMappingFromRangeMappings(\r\n        rangeMappings,\r\n        originalTextModel.getLinesContent(),\r\n        modifiedTextModel.getLinesContent(),\r\n    );\r\n    return newChanges;\r\n}\r\n*/\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { addStandardDisposableListener, getDomNodePagePosition } from '../../../../base/browser/dom.js';\r\nimport { Action } from '../../../../base/common/actions.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { isIOS } from '../../../../base/common/platform.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { localize } from '../../../../nls.js';\r\nexport class InlineDiffDeletedCodeMargin extends Disposable {\r\n    get visibility() {\r\n        return this._visibility;\r\n    }\r\n    set visibility(_visibility) {\r\n        if (this._visibility !== _visibility) {\r\n            this._visibility = _visibility;\r\n            this._diffActions.style.visibility = _visibility ? 'visible' : 'hidden';\r\n        }\r\n    }\r\n    constructor(_getViewZoneId, _marginDomNode, _modifiedEditor, _diff, _editor, _viewLineCounts, _originalTextModel, _contextMenuService, _clipboardService) {\r\n        super();\r\n        this._getViewZoneId = _getViewZoneId;\r\n        this._marginDomNode = _marginDomNode;\r\n        this._modifiedEditor = _modifiedEditor;\r\n        this._diff = _diff;\r\n        this._editor = _editor;\r\n        this._viewLineCounts = _viewLineCounts;\r\n        this._originalTextModel = _originalTextModel;\r\n        this._contextMenuService = _contextMenuService;\r\n        this._clipboardService = _clipboardService;\r\n        this._visibility = false;\r\n        // make sure the diff margin shows above overlay.\r\n        this._marginDomNode.style.zIndex = '10';\r\n        this._diffActions = document.createElement('div');\r\n        this._diffActions.className = ThemeIcon.asClassName(Codicon.lightBulb) + ' lightbulb-glyph';\r\n        this._diffActions.style.position = 'absolute';\r\n        const lineHeight = this._modifiedEditor.getOption(66 /* EditorOption.lineHeight */);\r\n        this._diffActions.style.right = '0px';\r\n        this._diffActions.style.visibility = 'hidden';\r\n        this._diffActions.style.height = `${lineHeight}px`;\r\n        this._diffActions.style.lineHeight = `${lineHeight}px`;\r\n        this._marginDomNode.appendChild(this._diffActions);\r\n        let currentLineNumberOffset = 0;\r\n        const useShadowDOM = _modifiedEditor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\r\n        const showContextMenu = (x, y) => {\r\n            var _a;\r\n            this._contextMenuService.showContextMenu({\r\n                domForShadowRoot: useShadowDOM ? (_a = _modifiedEditor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\r\n                getAnchor: () => ({ x, y }),\r\n                getActions: () => {\r\n                    const actions = [];\r\n                    const isDeletion = _diff.modified.isEmpty;\r\n                    // default action\r\n                    actions.push(new Action('diff.clipboard.copyDeletedContent', isDeletion\r\n                        ? (_diff.original.length > 1\r\n                            ? localize('diff.clipboard.copyDeletedLinesContent.label', \"Copy deleted lines\")\r\n                            : localize('diff.clipboard.copyDeletedLinesContent.single.label', \"Copy deleted line\"))\r\n                        : (_diff.original.length > 1\r\n                            ? localize('diff.clipboard.copyChangedLinesContent.label', \"Copy changed lines\")\r\n                            : localize('diff.clipboard.copyChangedLinesContent.single.label', \"Copy changed line\")), undefined, true, async () => {\r\n                        const originalText = this._originalTextModel.getValueInRange(_diff.original.toExclusiveRange());\r\n                        await this._clipboardService.writeText(originalText);\r\n                    }));\r\n                    if (_diff.original.length > 1) {\r\n                        actions.push(new Action('diff.clipboard.copyDeletedLineContent', isDeletion\r\n                            ? localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", _diff.original.startLineNumber + currentLineNumberOffset)\r\n                            : localize('diff.clipboard.copyChangedLineContent.label', \"Copy changed line ({0})\", _diff.original.startLineNumber + currentLineNumberOffset), undefined, true, async () => {\r\n                            let lineContent = this._originalTextModel.getLineContent(_diff.original.startLineNumber + currentLineNumberOffset);\r\n                            if (lineContent === '') {\r\n                                // empty line -> new line\r\n                                const eof = this._originalTextModel.getEndOfLineSequence();\r\n                                lineContent = eof === 0 /* EndOfLineSequence.LF */ ? '\\n' : '\\r\\n';\r\n                            }\r\n                            await this._clipboardService.writeText(lineContent);\r\n                        }));\r\n                    }\r\n                    const readOnly = _modifiedEditor.getOption(90 /* EditorOption.readOnly */);\r\n                    if (!readOnly) {\r\n                        actions.push(new Action('diff.inline.revertChange', localize('diff.inline.revertChange.label', \"Revert this change\"), undefined, true, async () => {\r\n                            this._editor.revert(this._diff);\r\n                        }));\r\n                    }\r\n                    return actions;\r\n                },\r\n                autoSelectFirstItem: true\r\n            });\r\n        };\r\n        this._register(addStandardDisposableListener(this._diffActions, 'mousedown', e => {\r\n            if (!e.leftButton) {\r\n                return;\r\n            }\r\n            const { top, height } = getDomNodePagePosition(this._diffActions);\r\n            const pad = Math.floor(lineHeight / 3);\r\n            e.preventDefault();\r\n            showContextMenu(e.posx, top + height + pad);\r\n        }));\r\n        this._register(_modifiedEditor.onMouseMove((e) => {\r\n            if ((e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) && e.target.detail.viewZoneId === this._getViewZoneId()) {\r\n                currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\r\n                this.visibility = true;\r\n            }\r\n            else {\r\n                this.visibility = false;\r\n            }\r\n        }));\r\n        this._register(_modifiedEditor.onMouseDown((e) => {\r\n            if (!e.event.leftButton) {\r\n                return;\r\n            }\r\n            if (e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\r\n                const viewZoneId = e.target.detail.viewZoneId;\r\n                if (viewZoneId === this._getViewZoneId()) {\r\n                    e.event.preventDefault();\r\n                    currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\r\n                    showContextMenu(e.event.posx, e.event.posy + lineHeight);\r\n                }\r\n            }\r\n        }));\r\n    }\r\n    _updateLightBulbPosition(marginDomNode, y, lineHeight) {\r\n        const { top } = getDomNodePagePosition(marginDomNode);\r\n        const offset = y - top;\r\n        const lineNumberOffset = Math.floor(offset / lineHeight);\r\n        const newTop = lineNumberOffset * lineHeight;\r\n        this._diffActions.style.top = `${newTop}px`;\r\n        if (this._viewLineCounts) {\r\n            let acc = 0;\r\n            for (let i = 0; i < this._viewLineCounts.length; i++) {\r\n                acc += this._viewLineCounts[i];\r\n                if (lineNumberOffset < acc) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return lineNumberOffset;\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\r\nimport { applyFontInfo } from '../../config/domFontInfo.js';\r\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\r\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\r\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\r\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\r\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\r\nconst ttPolicy = createTrustedTypesPolicy('diffEditorWidget', { createHTML: value => value });\r\nexport function renderLines(source, options, decorations, domNode) {\r\n    applyFontInfo(domNode, options.fontInfo);\r\n    const hasCharChanges = (decorations.length > 0);\r\n    const sb = new StringBuilder(10000);\r\n    let maxCharsPerLine = 0;\r\n    let renderedLineCount = 0;\r\n    const viewLineCounts = [];\r\n    for (let lineIndex = 0; lineIndex < source.lineTokens.length; lineIndex++) {\r\n        const lineNumber = lineIndex + 1;\r\n        const lineTokens = source.lineTokens[lineIndex];\r\n        const lineBreakData = source.lineBreakData[lineIndex];\r\n        const actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, Number.MAX_SAFE_INTEGER);\r\n        if (lineBreakData) {\r\n            let lastBreakOffset = 0;\r\n            for (const breakOffset of lineBreakData.breakOffsets) {\r\n                const viewLineTokens = lineTokens.sliceAndInflate(lastBreakOffset, breakOffset, 0);\r\n                maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, viewLineTokens, LineDecoration.extractWrapped(actualDecorations, lastBreakOffset, breakOffset), hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\r\n                renderedLineCount++;\r\n                lastBreakOffset = breakOffset;\r\n            }\r\n            viewLineCounts.push(lineBreakData.breakOffsets.length);\r\n        }\r\n        else {\r\n            viewLineCounts.push(1);\r\n            maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, lineTokens, actualDecorations, hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\r\n            renderedLineCount++;\r\n        }\r\n    }\r\n    maxCharsPerLine += options.scrollBeyondLastColumn;\r\n    const html = sb.build();\r\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\r\n    domNode.innerHTML = trustedhtml;\r\n    const minWidthInPx = (maxCharsPerLine * options.typicalHalfwidthCharacterWidth);\r\n    return {\r\n        heightInLines: renderedLineCount,\r\n        minWidthInPx,\r\n        viewLineCounts,\r\n    };\r\n}\r\nexport class LineSource {\r\n    constructor(lineTokens, lineBreakData, mightContainNonBasicASCII, mightContainRTL) {\r\n        this.lineTokens = lineTokens;\r\n        this.lineBreakData = lineBreakData;\r\n        this.mightContainNonBasicASCII = mightContainNonBasicASCII;\r\n        this.mightContainRTL = mightContainRTL;\r\n    }\r\n}\r\nexport class RenderOptions {\r\n    static fromEditor(editor) {\r\n        var _a;\r\n        const modifiedEditorOptions = editor.getOptions();\r\n        const fontInfo = modifiedEditorOptions.get(50 /* EditorOption.fontInfo */);\r\n        const layoutInfo = modifiedEditorOptions.get(143 /* EditorOption.layoutInfo */);\r\n        return new RenderOptions(((_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getOptions().tabSize) || 0, fontInfo, modifiedEditorOptions.get(33 /* EditorOption.disableMonospaceOptimizations */), fontInfo.typicalHalfwidthCharacterWidth, modifiedEditorOptions.get(103 /* EditorOption.scrollBeyondLastColumn */), modifiedEditorOptions.get(66 /* EditorOption.lineHeight */), layoutInfo.decorationsWidth, modifiedEditorOptions.get(116 /* EditorOption.stopRenderingLineAfter */), modifiedEditorOptions.get(98 /* EditorOption.renderWhitespace */), modifiedEditorOptions.get(93 /* EditorOption.renderControlCharacters */), modifiedEditorOptions.get(51 /* EditorOption.fontLigatures */));\r\n    }\r\n    constructor(tabSize, fontInfo, disableMonospaceOptimizations, typicalHalfwidthCharacterWidth, scrollBeyondLastColumn, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures) {\r\n        this.tabSize = tabSize;\r\n        this.fontInfo = fontInfo;\r\n        this.disableMonospaceOptimizations = disableMonospaceOptimizations;\r\n        this.typicalHalfwidthCharacterWidth = typicalHalfwidthCharacterWidth;\r\n        this.scrollBeyondLastColumn = scrollBeyondLastColumn;\r\n        this.lineHeight = lineHeight;\r\n        this.lineDecorationsWidth = lineDecorationsWidth;\r\n        this.stopRenderingLineAfter = stopRenderingLineAfter;\r\n        this.renderWhitespace = renderWhitespace;\r\n        this.renderControlCharacters = renderControlCharacters;\r\n        this.fontLigatures = fontLigatures;\r\n    }\r\n}\r\nfunction renderOriginalLine(viewLineIdx, lineTokens, decorations, hasCharChanges, mightContainNonBasicASCII, mightContainRTL, options, sb) {\r\n    sb.appendString('<div class=\"view-line');\r\n    if (!hasCharChanges) {\r\n        // No char changes\r\n        sb.appendString(' char-delete');\r\n    }\r\n    sb.appendString('\" style=\"top:');\r\n    sb.appendString(String(viewLineIdx * options.lineHeight));\r\n    sb.appendString('px;width:1000000px;\">');\r\n    const lineContent = lineTokens.getLineContent();\r\n    const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, mightContainNonBasicASCII);\r\n    const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, mightContainRTL);\r\n    const output = renderViewLine(new RenderLineInput((options.fontInfo.isMonospace && !options.disableMonospaceOptimizations), options.fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, decorations, options.tabSize, 0, options.fontInfo.spaceWidth, options.fontInfo.middotWidth, options.fontInfo.wsmiddotWidth, options.stopRenderingLineAfter, options.renderWhitespace, options.renderControlCharacters, options.fontLigatures !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\r\n    ), sb);\r\n    sb.appendString('</div>');\r\n    return output.characterMapping.getHorizontalOffset(output.characterMapping.length);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { $, addDisposableListener } from '../../../../base/browser/dom.js';\r\nimport { ArrayQueue } from '../../../../base/common/arrays.js';\r\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, derived, derivedWithStore, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\r\nimport { ThemeIcon } from '../../../../base/common/themables.js';\r\nimport { assertIsDefined } from '../../../../base/common/types.js';\r\nimport { applyFontInfo } from '../../config/domFontInfo.js';\r\nimport { diffDeleteDecoration, diffRemoveIcon } from './decorations.js';\r\nimport { DiffMapping } from './diffEditorViewModel.js';\r\nimport { InlineDiffDeletedCodeMargin } from './inlineDiffDeletedCodeMargin.js';\r\nimport { LineSource, RenderOptions, renderLines } from './renderLines.js';\r\nimport { animatedObservable, joinCombine } from './utils.js';\r\nimport { LineRange } from '../../../common/core/lineRange.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { InlineDecoration } from '../../../common/viewModel.js';\r\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\r\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\r\n/**\r\n * Ensures both editors have the same height by aligning unchanged lines.\r\n * In inline view mode, inserts viewzones to show deleted code from the original text model in the modified code editor.\r\n * Synchronizes scrolling.\r\n *\r\n * Make sure to add the view zones!\r\n */\r\nlet ViewZoneManager = class ViewZoneManager extends Disposable {\r\n    constructor(_targetWindow, _editors, _diffModel, _options, _diffEditorWidget, _canIgnoreViewZoneUpdateEvent, _origViewZonesToIgnore, _modViewZonesToIgnore, _clipboardService, _contextMenuService) {\r\n        super();\r\n        this._targetWindow = _targetWindow;\r\n        this._editors = _editors;\r\n        this._diffModel = _diffModel;\r\n        this._options = _options;\r\n        this._diffEditorWidget = _diffEditorWidget;\r\n        this._canIgnoreViewZoneUpdateEvent = _canIgnoreViewZoneUpdateEvent;\r\n        this._origViewZonesToIgnore = _origViewZonesToIgnore;\r\n        this._modViewZonesToIgnore = _modViewZonesToIgnore;\r\n        this._clipboardService = _clipboardService;\r\n        this._contextMenuService = _contextMenuService;\r\n        this._originalTopPadding = observableValue(this, 0);\r\n        this._originalScrollOffset = observableValue(this, 0);\r\n        this._originalScrollOffsetAnimated = animatedObservable(this._targetWindow, this._originalScrollOffset, this._store);\r\n        this._modifiedTopPadding = observableValue(this, 0);\r\n        this._modifiedScrollOffset = observableValue(this, 0);\r\n        this._modifiedScrollOffsetAnimated = animatedObservable(this._targetWindow, this._modifiedScrollOffset, this._store);\r\n        const state = observableValue('invalidateAlignmentsState', 0);\r\n        const updateImmediately = this._register(new RunOnceScheduler(() => {\r\n            state.set(state.get() + 1, undefined);\r\n        }, 0));\r\n        this._register(this._editors.original.onDidChangeViewZones((_args) => { if (!this._canIgnoreViewZoneUpdateEvent()) {\r\n            updateImmediately.schedule();\r\n        } }));\r\n        this._register(this._editors.modified.onDidChangeViewZones((_args) => { if (!this._canIgnoreViewZoneUpdateEvent()) {\r\n            updateImmediately.schedule();\r\n        } }));\r\n        this._register(this._editors.original.onDidChangeConfiguration((args) => {\r\n            if (args.hasChanged(144 /* EditorOption.wrappingInfo */) || args.hasChanged(66 /* EditorOption.lineHeight */)) {\r\n                updateImmediately.schedule();\r\n            }\r\n        }));\r\n        this._register(this._editors.modified.onDidChangeConfiguration((args) => {\r\n            if (args.hasChanged(144 /* EditorOption.wrappingInfo */) || args.hasChanged(66 /* EditorOption.lineHeight */)) {\r\n                updateImmediately.schedule();\r\n            }\r\n        }));\r\n        const originalModelTokenizationCompleted = this._diffModel.map(m => m ? observableFromEvent(m.model.original.onDidChangeTokens, () => m.model.original.tokenization.backgroundTokenizationState === 2 /* BackgroundTokenizationState.Completed */) : undefined).map((m, reader) => m === null || m === void 0 ? void 0 : m.read(reader));\r\n        const alignments = derived((reader) => {\r\n            /** @description alignments */\r\n            const diffModel = this._diffModel.read(reader);\r\n            const diff = diffModel === null || diffModel === void 0 ? void 0 : diffModel.diff.read(reader);\r\n            if (!diffModel || !diff) {\r\n                return null;\r\n            }\r\n            state.read(reader);\r\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\r\n            const innerHunkAlignment = renderSideBySide;\r\n            return computeRangeAlignment(this._editors.original, this._editors.modified, diff.mappings, this._origViewZonesToIgnore, this._modViewZonesToIgnore, innerHunkAlignment);\r\n        });\r\n        const alignmentsSyncedMovedText = derived((reader) => {\r\n            var _a;\r\n            /** @description alignmentsSyncedMovedText */\r\n            const syncedMovedText = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader);\r\n            if (!syncedMovedText) {\r\n                return null;\r\n            }\r\n            state.read(reader);\r\n            const mappings = syncedMovedText.changes.map(c => new DiffMapping(c));\r\n            // TODO dont include alignments outside syncedMovedText\r\n            return computeRangeAlignment(this._editors.original, this._editors.modified, mappings, this._origViewZonesToIgnore, this._modViewZonesToIgnore, true);\r\n        });\r\n        function createFakeLinesDiv() {\r\n            const r = document.createElement('div');\r\n            r.className = 'diagonal-fill';\r\n            return r;\r\n        }\r\n        const alignmentViewZonesDisposables = this._register(new DisposableStore());\r\n        this.viewZones = derivedWithStore(this, (reader, store) => {\r\n            var _a, _b, _c, _d, _e, _f, _g, _h;\r\n            alignmentViewZonesDisposables.clear();\r\n            const alignmentsVal = alignments.read(reader) || [];\r\n            const origViewZones = [];\r\n            const modViewZones = [];\r\n            const modifiedTopPaddingVal = this._modifiedTopPadding.read(reader);\r\n            if (modifiedTopPaddingVal > 0) {\r\n                modViewZones.push({\r\n                    afterLineNumber: 0,\r\n                    domNode: document.createElement('div'),\r\n                    heightInPx: modifiedTopPaddingVal,\r\n                    showInHiddenAreas: true,\r\n                    suppressMouseDown: true,\r\n                });\r\n            }\r\n            const originalTopPaddingVal = this._originalTopPadding.read(reader);\r\n            if (originalTopPaddingVal > 0) {\r\n                origViewZones.push({\r\n                    afterLineNumber: 0,\r\n                    domNode: document.createElement('div'),\r\n                    heightInPx: originalTopPaddingVal,\r\n                    showInHiddenAreas: true,\r\n                    suppressMouseDown: true,\r\n                });\r\n            }\r\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\r\n            const deletedCodeLineBreaksComputer = !renderSideBySide ? (_a = this._editors.modified._getViewModel()) === null || _a === void 0 ? void 0 : _a.createLineBreaksComputer() : undefined;\r\n            if (deletedCodeLineBreaksComputer) {\r\n                for (const a of alignmentsVal) {\r\n                    if (a.diff) {\r\n                        for (let i = a.originalRange.startLineNumber; i < a.originalRange.endLineNumberExclusive; i++) {\r\n                            deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.addRequest(this._editors.original.getModel().getLineContent(i), null, null);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            const lineBreakData = (_b = deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.finalize()) !== null && _b !== void 0 ? _b : [];\r\n            let lineBreakDataIdx = 0;\r\n            const modLineHeight = this._editors.modified.getOption(66 /* EditorOption.lineHeight */);\r\n            const syncedMovedText = (_c = this._diffModel.read(reader)) === null || _c === void 0 ? void 0 : _c.movedTextToCompare.read(reader);\r\n            const mightContainNonBasicASCII = (_e = (_d = this._editors.original.getModel()) === null || _d === void 0 ? void 0 : _d.mightContainNonBasicASCII()) !== null && _e !== void 0 ? _e : false;\r\n            const mightContainRTL = (_g = (_f = this._editors.original.getModel()) === null || _f === void 0 ? void 0 : _f.mightContainRTL()) !== null && _g !== void 0 ? _g : false;\r\n            const renderOptions = RenderOptions.fromEditor(this._editors.modified);\r\n            for (const a of alignmentsVal) {\r\n                if (a.diff && !renderSideBySide) {\r\n                    if (!a.originalRange.isEmpty) {\r\n                        originalModelTokenizationCompleted.read(reader); // Update view-zones once tokenization completes\r\n                        const deletedCodeDomNode = document.createElement('div');\r\n                        deletedCodeDomNode.classList.add('view-lines', 'line-delete', 'monaco-mouse-cursor-text');\r\n                        const source = new LineSource(a.originalRange.mapToLineArray(l => this._editors.original.getModel().tokenization.getLineTokens(l)), a.originalRange.mapToLineArray(_ => lineBreakData[lineBreakDataIdx++]), mightContainNonBasicASCII, mightContainRTL);\r\n                        const decorations = [];\r\n                        for (const i of a.diff.innerChanges || []) {\r\n                            decorations.push(new InlineDecoration(i.originalRange.delta(-(a.diff.original.startLineNumber - 1)), diffDeleteDecoration.className, 0 /* InlineDecorationType.Regular */));\r\n                        }\r\n                        const result = renderLines(source, renderOptions, decorations, deletedCodeDomNode);\r\n                        const marginDomNode = document.createElement('div');\r\n                        marginDomNode.className = 'inline-deleted-margin-view-zone';\r\n                        applyFontInfo(marginDomNode, renderOptions.fontInfo);\r\n                        if (this._options.renderIndicators.read(reader)) {\r\n                            for (let i = 0; i < result.heightInLines; i++) {\r\n                                const marginElement = document.createElement('div');\r\n                                marginElement.className = `delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`;\r\n                                marginElement.setAttribute('style', `position:absolute;top:${i * modLineHeight}px;width:${renderOptions.lineDecorationsWidth}px;height:${modLineHeight}px;right:0;`);\r\n                                marginDomNode.appendChild(marginElement);\r\n                            }\r\n                        }\r\n                        let zoneId = undefined;\r\n                        alignmentViewZonesDisposables.add(new InlineDiffDeletedCodeMargin(() => assertIsDefined(zoneId), marginDomNode, this._editors.modified, a.diff, this._diffEditorWidget, result.viewLineCounts, this._editors.original.getModel(), this._contextMenuService, this._clipboardService));\r\n                        for (let i = 0; i < result.viewLineCounts.length; i++) {\r\n                            const count = result.viewLineCounts[i];\r\n                            // Account for wrapped lines in the (collapsed) original editor (which doesn't wrap lines).\r\n                            if (count > 1) {\r\n                                origViewZones.push({\r\n                                    afterLineNumber: a.originalRange.startLineNumber + i,\r\n                                    domNode: createFakeLinesDiv(),\r\n                                    heightInPx: (count - 1) * modLineHeight,\r\n                                    showInHiddenAreas: true,\r\n                                    suppressMouseDown: true,\r\n                                });\r\n                            }\r\n                        }\r\n                        modViewZones.push({\r\n                            afterLineNumber: a.modifiedRange.startLineNumber - 1,\r\n                            domNode: deletedCodeDomNode,\r\n                            heightInPx: result.heightInLines * modLineHeight,\r\n                            minWidthInPx: result.minWidthInPx,\r\n                            marginDomNode,\r\n                            setZoneId(id) { zoneId = id; },\r\n                            showInHiddenAreas: true,\r\n                            suppressMouseDown: true,\r\n                        });\r\n                    }\r\n                    const marginDomNode = document.createElement('div');\r\n                    marginDomNode.className = 'gutter-delete';\r\n                    origViewZones.push({\r\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\r\n                        domNode: createFakeLinesDiv(),\r\n                        heightInPx: a.modifiedHeightInPx,\r\n                        marginDomNode,\r\n                        showInHiddenAreas: true,\r\n                        suppressMouseDown: true,\r\n                    });\r\n                }\r\n                else {\r\n                    const delta = a.modifiedHeightInPx - a.originalHeightInPx;\r\n                    if (delta > 0) {\r\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.delta(-1).deltaLength(2).contains(a.originalRange.endLineNumberExclusive - 1)) {\r\n                            continue;\r\n                        }\r\n                        origViewZones.push({\r\n                            afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\r\n                            domNode: createFakeLinesDiv(),\r\n                            heightInPx: delta,\r\n                            showInHiddenAreas: true,\r\n                            suppressMouseDown: true,\r\n                        });\r\n                    }\r\n                    else {\r\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(a.modifiedRange.endLineNumberExclusive - 1)) {\r\n                            continue;\r\n                        }\r\n                        function createViewZoneMarginArrow() {\r\n                            const arrow = document.createElement('div');\r\n                            arrow.className = 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight);\r\n                            store.add(addDisposableListener(arrow, 'mousedown', e => e.stopPropagation()));\r\n                            store.add(addDisposableListener(arrow, 'click', e => {\r\n                                e.stopPropagation();\r\n                                _diffEditorWidget.revert(a.diff);\r\n                            }));\r\n                            return $('div', {}, arrow);\r\n                        }\r\n                        let marginDomNode = undefined;\r\n                        if (a.diff && a.diff.modified.isEmpty && this._options.shouldRenderRevertArrows.read(reader)) {\r\n                            marginDomNode = createViewZoneMarginArrow();\r\n                        }\r\n                        modViewZones.push({\r\n                            afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\r\n                            domNode: createFakeLinesDiv(),\r\n                            heightInPx: -delta,\r\n                            marginDomNode,\r\n                            showInHiddenAreas: true,\r\n                            suppressMouseDown: true,\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            for (const a of (_h = alignmentsSyncedMovedText.read(reader)) !== null && _h !== void 0 ? _h : []) {\r\n                if (!(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.intersect(a.originalRange))\r\n                    || !(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.intersect(a.modifiedRange))) {\r\n                    // ignore unrelated alignments outside the synced moved text\r\n                    continue;\r\n                }\r\n                const delta = a.modifiedHeightInPx - a.originalHeightInPx;\r\n                if (delta > 0) {\r\n                    origViewZones.push({\r\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\r\n                        domNode: createFakeLinesDiv(),\r\n                        heightInPx: delta,\r\n                        showInHiddenAreas: true,\r\n                        suppressMouseDown: true,\r\n                    });\r\n                }\r\n                else {\r\n                    modViewZones.push({\r\n                        afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\r\n                        domNode: createFakeLinesDiv(),\r\n                        heightInPx: -delta,\r\n                        showInHiddenAreas: true,\r\n                        suppressMouseDown: true,\r\n                    });\r\n                }\r\n            }\r\n            return { orig: origViewZones, mod: modViewZones };\r\n        });\r\n        let ignoreChange = false;\r\n        this._register(this._editors.original.onDidScrollChange(e => {\r\n            if (e.scrollLeftChanged && !ignoreChange) {\r\n                ignoreChange = true;\r\n                this._editors.modified.setScrollLeft(e.scrollLeft);\r\n                ignoreChange = false;\r\n            }\r\n        }));\r\n        this._register(this._editors.modified.onDidScrollChange(e => {\r\n            if (e.scrollLeftChanged && !ignoreChange) {\r\n                ignoreChange = true;\r\n                this._editors.original.setScrollLeft(e.scrollLeft);\r\n                ignoreChange = false;\r\n            }\r\n        }));\r\n        this._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => /** @description original.getScrollTop */ this._editors.original.getScrollTop());\r\n        this._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => /** @description modified.getScrollTop */ this._editors.modified.getScrollTop());\r\n        // origExtraHeight + origOffset - origScrollTop = modExtraHeight + modOffset - modScrollTop\r\n        // origScrollTop = origExtraHeight + origOffset - modExtraHeight - modOffset + modScrollTop\r\n        // modScrollTop = modExtraHeight + modOffset - origExtraHeight - origOffset + origScrollTop\r\n        // origOffset - modOffset = heightOfLines(1..Y) - heightOfLines(1..X)\r\n        // origScrollTop >= 0, modScrollTop >= 0\r\n        this._register(autorun(reader => {\r\n            /** @description update scroll modified */\r\n            const newScrollTopModified = this._originalScrollTop.read(reader)\r\n                - (this._originalScrollOffsetAnimated.get() - this._modifiedScrollOffsetAnimated.read(reader))\r\n                - (this._originalTopPadding.get() - this._modifiedTopPadding.read(reader));\r\n            if (newScrollTopModified !== this._editors.modified.getScrollTop()) {\r\n                this._editors.modified.setScrollTop(newScrollTopModified, 1 /* ScrollType.Immediate */);\r\n            }\r\n        }));\r\n        this._register(autorun(reader => {\r\n            /** @description update scroll original */\r\n            const newScrollTopOriginal = this._modifiedScrollTop.read(reader)\r\n                - (this._modifiedScrollOffsetAnimated.get() - this._originalScrollOffsetAnimated.read(reader))\r\n                - (this._modifiedTopPadding.get() - this._originalTopPadding.read(reader));\r\n            if (newScrollTopOriginal !== this._editors.original.getScrollTop()) {\r\n                this._editors.original.setScrollTop(newScrollTopOriginal, 1 /* ScrollType.Immediate */);\r\n            }\r\n        }));\r\n        this._register(autorun(reader => {\r\n            var _a;\r\n            /** @description update editor top offsets */\r\n            const m = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader);\r\n            let deltaOrigToMod = 0;\r\n            if (m) {\r\n                const trueTopOriginal = this._editors.original.getTopForLineNumber(m.lineRangeMapping.original.startLineNumber, true) - this._originalTopPadding.get();\r\n                const trueTopModified = this._editors.modified.getTopForLineNumber(m.lineRangeMapping.modified.startLineNumber, true) - this._modifiedTopPadding.get();\r\n                deltaOrigToMod = trueTopModified - trueTopOriginal;\r\n            }\r\n            if (deltaOrigToMod > 0) {\r\n                this._modifiedTopPadding.set(0, undefined);\r\n                this._originalTopPadding.set(deltaOrigToMod, undefined);\r\n            }\r\n            else if (deltaOrigToMod < 0) {\r\n                this._modifiedTopPadding.set(-deltaOrigToMod, undefined);\r\n                this._originalTopPadding.set(0, undefined);\r\n            }\r\n            else {\r\n                setTimeout(() => {\r\n                    this._modifiedTopPadding.set(0, undefined);\r\n                    this._originalTopPadding.set(0, undefined);\r\n                }, 400);\r\n            }\r\n            if (this._editors.modified.hasTextFocus()) {\r\n                this._originalScrollOffset.set(this._modifiedScrollOffset.get() - deltaOrigToMod, undefined, true);\r\n            }\r\n            else {\r\n                this._modifiedScrollOffset.set(this._originalScrollOffset.get() + deltaOrigToMod, undefined, true);\r\n            }\r\n        }));\r\n    }\r\n};\r\nViewZoneManager = __decorate([\r\n    __param(8, IClipboardService),\r\n    __param(9, IContextMenuService)\r\n], ViewZoneManager);\r\nexport { ViewZoneManager };\r\nfunction computeRangeAlignment(originalEditor, modifiedEditor, diffs, originalEditorAlignmentViewZones, modifiedEditorAlignmentViewZones, innerHunkAlignment) {\r\n    const originalLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(originalEditor, originalEditorAlignmentViewZones));\r\n    const modifiedLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(modifiedEditor, modifiedEditorAlignmentViewZones));\r\n    const origLineHeight = originalEditor.getOption(66 /* EditorOption.lineHeight */);\r\n    const modLineHeight = modifiedEditor.getOption(66 /* EditorOption.lineHeight */);\r\n    const result = [];\r\n    let lastOriginalLineNumber = 0;\r\n    let lastModifiedLineNumber = 0;\r\n    function handleAlignmentsOutsideOfDiffs(untilOriginalLineNumberExclusive, untilModifiedLineNumberExclusive) {\r\n        while (true) {\r\n            let origNext = originalLineHeightOverrides.peek();\r\n            let modNext = modifiedLineHeightOverrides.peek();\r\n            if (origNext && origNext.lineNumber >= untilOriginalLineNumberExclusive) {\r\n                origNext = undefined;\r\n            }\r\n            if (modNext && modNext.lineNumber >= untilModifiedLineNumberExclusive) {\r\n                modNext = undefined;\r\n            }\r\n            if (!origNext && !modNext) {\r\n                break;\r\n            }\r\n            const distOrig = origNext ? origNext.lineNumber - lastOriginalLineNumber : Number.MAX_VALUE;\r\n            const distNext = modNext ? modNext.lineNumber - lastModifiedLineNumber : Number.MAX_VALUE;\r\n            if (distOrig < distNext) {\r\n                originalLineHeightOverrides.dequeue();\r\n                modNext = {\r\n                    lineNumber: origNext.lineNumber - lastOriginalLineNumber + lastModifiedLineNumber,\r\n                    heightInPx: 0,\r\n                };\r\n            }\r\n            else if (distOrig > distNext) {\r\n                modifiedLineHeightOverrides.dequeue();\r\n                origNext = {\r\n                    lineNumber: modNext.lineNumber - lastModifiedLineNumber + lastOriginalLineNumber,\r\n                    heightInPx: 0,\r\n                };\r\n            }\r\n            else {\r\n                originalLineHeightOverrides.dequeue();\r\n                modifiedLineHeightOverrides.dequeue();\r\n            }\r\n            result.push({\r\n                originalRange: LineRange.ofLength(origNext.lineNumber, 1),\r\n                modifiedRange: LineRange.ofLength(modNext.lineNumber, 1),\r\n                originalHeightInPx: origLineHeight + origNext.heightInPx,\r\n                modifiedHeightInPx: modLineHeight + modNext.heightInPx,\r\n                diff: undefined,\r\n            });\r\n        }\r\n    }\r\n    for (const m of diffs) {\r\n        const c = m.lineRangeMapping;\r\n        handleAlignmentsOutsideOfDiffs(c.original.startLineNumber, c.modified.startLineNumber);\r\n        let first = true;\r\n        let lastModLineNumber = c.modified.startLineNumber;\r\n        let lastOrigLineNumber = c.original.startLineNumber;\r\n        function emitAlignment(origLineNumberExclusive, modLineNumberExclusive) {\r\n            var _a, _b, _c, _d;\r\n            if (origLineNumberExclusive < lastOrigLineNumber || modLineNumberExclusive < lastModLineNumber) {\r\n                return;\r\n            }\r\n            if (first) {\r\n                first = false;\r\n            }\r\n            else if (origLineNumberExclusive === lastOrigLineNumber || modLineNumberExclusive === lastModLineNumber) {\r\n                return;\r\n            }\r\n            const originalRange = new LineRange(lastOrigLineNumber, origLineNumberExclusive);\r\n            const modifiedRange = new LineRange(lastModLineNumber, modLineNumberExclusive);\r\n            if (originalRange.isEmpty && modifiedRange.isEmpty) {\r\n                return;\r\n            }\r\n            const originalAdditionalHeight = (_b = (_a = originalLineHeightOverrides\r\n                .takeWhile(v => v.lineNumber < origLineNumberExclusive)) === null || _a === void 0 ? void 0 : _a.reduce((p, c) => p + c.heightInPx, 0)) !== null && _b !== void 0 ? _b : 0;\r\n            const modifiedAdditionalHeight = (_d = (_c = modifiedLineHeightOverrides\r\n                .takeWhile(v => v.lineNumber < modLineNumberExclusive)) === null || _c === void 0 ? void 0 : _c.reduce((p, c) => p + c.heightInPx, 0)) !== null && _d !== void 0 ? _d : 0;\r\n            result.push({\r\n                originalRange,\r\n                modifiedRange,\r\n                originalHeightInPx: originalRange.length * origLineHeight + originalAdditionalHeight,\r\n                modifiedHeightInPx: modifiedRange.length * modLineHeight + modifiedAdditionalHeight,\r\n                diff: m.lineRangeMapping,\r\n            });\r\n            lastOrigLineNumber = origLineNumberExclusive;\r\n            lastModLineNumber = modLineNumberExclusive;\r\n        }\r\n        if (innerHunkAlignment) {\r\n            for (const i of c.innerChanges || []) {\r\n                if (i.originalRange.startColumn > 1 && i.modifiedRange.startColumn > 1) {\r\n                    // There is some unmodified text on this line before the diff\r\n                    emitAlignment(i.originalRange.startLineNumber, i.modifiedRange.startLineNumber);\r\n                }\r\n                if (i.originalRange.endColumn < originalEditor.getModel().getLineMaxColumn(i.originalRange.endLineNumber)) {\r\n                    // // There is some unmodified text on this line after the diff\r\n                    emitAlignment(i.originalRange.endLineNumber, i.modifiedRange.endLineNumber);\r\n                }\r\n            }\r\n        }\r\n        emitAlignment(c.original.endLineNumberExclusive, c.modified.endLineNumberExclusive);\r\n        lastOriginalLineNumber = c.original.endLineNumberExclusive;\r\n        lastModifiedLineNumber = c.modified.endLineNumberExclusive;\r\n    }\r\n    handleAlignmentsOutsideOfDiffs(Number.MAX_VALUE, Number.MAX_VALUE);\r\n    return result;\r\n}\r\nfunction getAdditionalLineHeights(editor, viewZonesToIgnore) {\r\n    const viewZoneHeights = [];\r\n    const wrappingZoneHeights = [];\r\n    const hasWrapping = editor.getOption(144 /* EditorOption.wrappingInfo */).wrappingColumn !== -1;\r\n    const coordinatesConverter = editor._getViewModel().coordinatesConverter;\r\n    const editorLineHeight = editor.getOption(66 /* EditorOption.lineHeight */);\r\n    if (hasWrapping) {\r\n        for (let i = 1; i <= editor.getModel().getLineCount(); i++) {\r\n            const lineCount = coordinatesConverter.getModelLineViewLineCount(i);\r\n            if (lineCount > 1) {\r\n                wrappingZoneHeights.push({ lineNumber: i, heightInPx: editorLineHeight * (lineCount - 1) });\r\n            }\r\n        }\r\n    }\r\n    for (const w of editor.getWhitespaces()) {\r\n        if (viewZonesToIgnore.has(w.id)) {\r\n            continue;\r\n        }\r\n        const modelLineNumber = w.afterLineNumber === 0 ? 0 : coordinatesConverter.convertViewPositionToModelPosition(new Position(w.afterLineNumber, 1)).lineNumber;\r\n        viewZoneHeights.push({ lineNumber: modelLineNumber, heightInPx: w.height });\r\n    }\r\n    const result = joinCombine(viewZoneHeights, wrappingZoneHeights, v => v.lineNumber, (v1, v2) => ({ lineNumber: v1.lineNumber, heightInPx: v1.heightInPx + v2.heightInPx }));\r\n    return result;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar OverviewRulerPart_1;\r\nimport { EventType, addDisposableListener, addStandardDisposableListener, h } from '../../../../base/browser/dom.js';\r\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\r\nimport { ScrollbarState } from '../../../../base/browser/ui/scrollbar/scrollbarState.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableSignalFromEvent } from '../../../../base/common/observable.js';\r\nimport { appendRemoveOnDispose } from './utils.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { OverviewRulerZone } from '../../../common/viewModel/overviewZoneManager.js';\r\nimport { defaultInsertColor, defaultRemoveColor, diffInserted, diffOverviewRulerInserted, diffOverviewRulerRemoved, diffRemoved } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nlet OverviewRulerPart = OverviewRulerPart_1 = class OverviewRulerPart extends Disposable {\r\n    constructor(_editors, _rootElement, _diffModel, _rootWidth, _rootHeight, _modifiedEditorLayoutInfo, _themeService) {\r\n        super();\r\n        this._editors = _editors;\r\n        this._rootElement = _rootElement;\r\n        this._diffModel = _diffModel;\r\n        this._rootWidth = _rootWidth;\r\n        this._rootHeight = _rootHeight;\r\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\r\n        this._themeService = _themeService;\r\n        this.width = OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n        const currentColorTheme = observableFromEvent(this._themeService.onDidColorThemeChange, () => this._themeService.getColorTheme());\r\n        const currentColors = derived(reader => {\r\n            /** @description colors */\r\n            const theme = currentColorTheme.read(reader);\r\n            const insertColor = theme.getColor(diffOverviewRulerInserted) || (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\r\n            const removeColor = theme.getColor(diffOverviewRulerRemoved) || (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\r\n            return { insertColor, removeColor };\r\n        });\r\n        const viewportDomElement = createFastDomNode(document.createElement('div'));\r\n        viewportDomElement.setClassName('diffViewport');\r\n        viewportDomElement.setPosition('absolute');\r\n        const diffOverviewRoot = h('div.diffOverview', {\r\n            style: { position: 'absolute', top: '0px', width: OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px' }\r\n        }).root;\r\n        this._register(appendRemoveOnDispose(diffOverviewRoot, viewportDomElement.domNode));\r\n        this._register(addStandardDisposableListener(diffOverviewRoot, EventType.POINTER_DOWN, (e) => {\r\n            this._editors.modified.delegateVerticalScrollbarPointerDown(e);\r\n        }));\r\n        this._register(addDisposableListener(diffOverviewRoot, EventType.MOUSE_WHEEL, (e) => {\r\n            this._editors.modified.delegateScrollFromMouseWheelEvent(e);\r\n        }, { passive: false }));\r\n        this._register(appendRemoveOnDispose(this._rootElement, diffOverviewRoot));\r\n        this._register(autorunWithStore((reader, store) => {\r\n            /** @description recreate overview rules when model changes */\r\n            const m = this._diffModel.read(reader);\r\n            const originalOverviewRuler = this._editors.original.createOverviewRuler('original diffOverviewRuler');\r\n            if (originalOverviewRuler) {\r\n                store.add(originalOverviewRuler);\r\n                store.add(appendRemoveOnDispose(diffOverviewRoot, originalOverviewRuler.getDomNode()));\r\n            }\r\n            const modifiedOverviewRuler = this._editors.modified.createOverviewRuler('modified diffOverviewRuler');\r\n            if (modifiedOverviewRuler) {\r\n                store.add(modifiedOverviewRuler);\r\n                store.add(appendRemoveOnDispose(diffOverviewRoot, modifiedOverviewRuler.getDomNode()));\r\n            }\r\n            if (!originalOverviewRuler || !modifiedOverviewRuler) {\r\n                // probably no model\r\n                return;\r\n            }\r\n            const origViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.original.onDidChangeViewZones);\r\n            const modViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.modified.onDidChangeViewZones);\r\n            const origHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.original.onDidChangeHiddenAreas);\r\n            const modHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.modified.onDidChangeHiddenAreas);\r\n            store.add(autorun(reader => {\r\n                var _a;\r\n                /** @description set overview ruler zones */\r\n                origViewZonesChanged.read(reader);\r\n                modViewZonesChanged.read(reader);\r\n                origHiddenRangesChanged.read(reader);\r\n                modHiddenRangesChanged.read(reader);\r\n                const colors = currentColors.read(reader);\r\n                const diff = (_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings;\r\n                function createZones(ranges, color, editor) {\r\n                    const vm = editor._getViewModel();\r\n                    if (!vm) {\r\n                        return [];\r\n                    }\r\n                    return ranges\r\n                        .filter(d => d.length > 0)\r\n                        .map(r => {\r\n                        const start = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.startLineNumber, 1));\r\n                        const end = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.endLineNumberExclusive, 1));\r\n                        // By computing the lineCount, we won't ask the view model later for the bottom vertical position.\r\n                        // (The view model will take into account the alignment viewzones, which will give\r\n                        // modifications and deletetions always the same height.)\r\n                        const lineCount = end.lineNumber - start.lineNumber;\r\n                        return new OverviewRulerZone(start.lineNumber, end.lineNumber, lineCount, color.toString());\r\n                    });\r\n                }\r\n                const originalZones = createZones((diff || []).map(d => d.lineRangeMapping.original), colors.removeColor, this._editors.original);\r\n                const modifiedZones = createZones((diff || []).map(d => d.lineRangeMapping.modified), colors.insertColor, this._editors.modified);\r\n                originalOverviewRuler === null || originalOverviewRuler === void 0 ? void 0 : originalOverviewRuler.setZones(originalZones);\r\n                modifiedOverviewRuler === null || modifiedOverviewRuler === void 0 ? void 0 : modifiedOverviewRuler.setZones(modifiedZones);\r\n            }));\r\n            store.add(autorun(reader => {\r\n                /** @description layout overview ruler */\r\n                const height = this._rootHeight.read(reader);\r\n                const width = this._rootWidth.read(reader);\r\n                const layoutInfo = this._modifiedEditorLayoutInfo.read(reader);\r\n                if (layoutInfo) {\r\n                    const freeSpace = OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * OverviewRulerPart_1.ONE_OVERVIEW_WIDTH;\r\n                    originalOverviewRuler.setLayout({\r\n                        top: 0,\r\n                        height: height,\r\n                        right: freeSpace + OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\r\n                        width: OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\r\n                    });\r\n                    modifiedOverviewRuler.setLayout({\r\n                        top: 0,\r\n                        height: height,\r\n                        right: 0,\r\n                        width: OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\r\n                    });\r\n                    const scrollTop = this._editors.modifiedScrollTop.read(reader);\r\n                    const scrollHeight = this._editors.modifiedScrollHeight.read(reader);\r\n                    const scrollBarOptions = this._editors.modified.getOption(102 /* EditorOption.scrollbar */);\r\n                    const state = new ScrollbarState(scrollBarOptions.verticalHasArrows ? scrollBarOptions.arrowSize : 0, scrollBarOptions.verticalScrollbarSize, 0, layoutInfo.height, scrollHeight, scrollTop);\r\n                    viewportDomElement.setTop(state.getSliderPosition());\r\n                    viewportDomElement.setHeight(state.getSliderSize());\r\n                }\r\n                else {\r\n                    viewportDomElement.setTop(0);\r\n                    viewportDomElement.setHeight(0);\r\n                }\r\n                diffOverviewRoot.style.height = height + 'px';\r\n                diffOverviewRoot.style.left = (width - OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\r\n                viewportDomElement.setWidth(OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH);\r\n            }));\r\n        }));\r\n    }\r\n};\r\nOverviewRulerPart.ONE_OVERVIEW_WIDTH = 15;\r\nOverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH = OverviewRulerPart_1.ONE_OVERVIEW_WIDTH * 2;\r\nOverviewRulerPart = OverviewRulerPart_1 = __decorate([\r\n    __param(6, IThemeService)\r\n], OverviewRulerPart);\r\nexport { OverviewRulerPart };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { localize } from '../../../../nls.js';\r\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\r\nexport const diffMoveBorder = registerColor('diffEditor.move.border', { dark: '#8b8b8b9c', light: '#8b8b8b9c', hcDark: '#8b8b8b9c', hcLight: '#8b8b8b9c', }, localize('diffEditor.move.border', 'The border color for text that got moved in the diff editor.'));\r\nexport const diffMoveBorderActive = registerColor('diffEditor.moveActive.border', { dark: '#FFA500', light: '#FFA500', hcDark: '#FFA500', hcLight: '#FFA500', }, localize('diffEditor.moveActive.border', 'The active border color for text that got moved in the diff editor.'));\r\nexport const diffEditorUnchangedRegionShadow = registerColor('diffEditor.unchangedRegionShadow', { dark: '#000000', light: '#737373BF', hcDark: '#000000', hcLight: '#737373BF', }, localize('diffEditor.unchangedRegionShadow', 'The color of the shadow around unchanged region widgets.'));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nexport class DelegatingEditor extends Disposable {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._id = ++DelegatingEditor.idCounter;\r\n        this._onDidDispose = this._register(new Emitter());\r\n        this.onDidDispose = this._onDidDispose.event;\r\n        // #endregion\r\n    }\r\n    getId() { return this.getEditorType() + ':v2:' + this._id; }\r\n    // #region editorBrowser.IDiffEditor: Delegating to modified Editor\r\n    getVisibleColumnFromPosition(position) {\r\n        return this._targetEditor.getVisibleColumnFromPosition(position);\r\n    }\r\n    getPosition() {\r\n        return this._targetEditor.getPosition();\r\n    }\r\n    setPosition(position, source = 'api') {\r\n        this._targetEditor.setPosition(position, source);\r\n    }\r\n    revealLine(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealLine(lineNumber, scrollType);\r\n    }\r\n    revealLineInCenter(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealLineInCenter(lineNumber, scrollType);\r\n    }\r\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\r\n    }\r\n    revealLineNearTop(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealLineNearTop(lineNumber, scrollType);\r\n    }\r\n    revealPosition(position, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealPosition(position, scrollType);\r\n    }\r\n    revealPositionInCenter(position, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealPositionInCenter(position, scrollType);\r\n    }\r\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\r\n    }\r\n    revealPositionNearTop(position, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealPositionNearTop(position, scrollType);\r\n    }\r\n    getSelection() {\r\n        return this._targetEditor.getSelection();\r\n    }\r\n    getSelections() {\r\n        return this._targetEditor.getSelections();\r\n    }\r\n    setSelection(something, source = 'api') {\r\n        this._targetEditor.setSelection(something, source);\r\n    }\r\n    setSelections(ranges, source = 'api') {\r\n        this._targetEditor.setSelections(ranges, source);\r\n    }\r\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealLines(startLineNumber, endLineNumber, scrollType);\r\n    }\r\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\r\n    }\r\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\r\n    }\r\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealLinesNearTop(startLineNumber, endLineNumber, scrollType);\r\n    }\r\n    revealRange(range, scrollType = 0 /* ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\r\n        this._targetEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\r\n    }\r\n    revealRangeInCenter(range, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealRangeInCenter(range, scrollType);\r\n    }\r\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\r\n    }\r\n    revealRangeNearTop(range, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealRangeNearTop(range, scrollType);\r\n    }\r\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealRangeNearTopIfOutsideViewport(range, scrollType);\r\n    }\r\n    revealRangeAtTop(range, scrollType = 0 /* ScrollType.Smooth */) {\r\n        this._targetEditor.revealRangeAtTop(range, scrollType);\r\n    }\r\n    getSupportedActions() {\r\n        return this._targetEditor.getSupportedActions();\r\n    }\r\n    focus() {\r\n        this._targetEditor.focus();\r\n    }\r\n    trigger(source, handlerId, payload) {\r\n        this._targetEditor.trigger(source, handlerId, payload);\r\n    }\r\n    createDecorationsCollection(decorations) {\r\n        return this._targetEditor.createDecorationsCollection(decorations);\r\n    }\r\n    changeDecorations(callback) {\r\n        return this._targetEditor.changeDecorations(callback);\r\n    }\r\n}\r\nDelegatingEditor.idCounter = 0;\r\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorunHandleChanges, observableFromEvent } from '../../../../base/common/observable.js';\r\nimport { OverviewRulerPart } from './overviewRulerPart.js';\r\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nlet DiffEditorEditors = class DiffEditorEditors extends Disposable {\r\n    get onDidContentSizeChange() { return this._onDidContentSizeChange.event; }\r\n    constructor(originalEditorElement, modifiedEditorElement, _options, codeEditorWidgetOptions, _createInnerEditor, _instantiationService, _keybindingService) {\r\n        super();\r\n        this.originalEditorElement = originalEditorElement;\r\n        this.modifiedEditorElement = modifiedEditorElement;\r\n        this._options = _options;\r\n        this._createInnerEditor = _createInnerEditor;\r\n        this._instantiationService = _instantiationService;\r\n        this._keybindingService = _keybindingService;\r\n        this._onDidContentSizeChange = this._register(new Emitter());\r\n        this.original = this._register(this._createLeftHandSideEditor(_options.editorOptions.get(), codeEditorWidgetOptions.originalEditor || {}));\r\n        this.modified = this._register(this._createRightHandSideEditor(_options.editorOptions.get(), codeEditorWidgetOptions.modifiedEditor || {}));\r\n        this.modifiedModel = observableFromEvent(this.modified.onDidChangeModel, () => /** @description modified.model */ this.modified.getModel());\r\n        this.modifiedScrollTop = observableFromEvent(this.modified.onDidScrollChange, () => /** @description modified.getScrollTop */ this.modified.getScrollTop());\r\n        this.modifiedScrollHeight = observableFromEvent(this.modified.onDidScrollChange, () => /** @description modified.getScrollHeight */ this.modified.getScrollHeight());\r\n        this.modifiedSelections = observableFromEvent(this.modified.onDidChangeCursorSelection, () => { var _a; return (_a = this.modified.getSelections()) !== null && _a !== void 0 ? _a : []; });\r\n        this.modifiedCursor = observableFromEvent(this.modified.onDidChangeCursorPosition, () => { var _a; return (_a = this.modified.getPosition()) !== null && _a !== void 0 ? _a : new Position(1, 1); });\r\n        this._register(autorunHandleChanges({\r\n            createEmptyChangeSummary: () => ({}),\r\n            handleChange: (ctx, changeSummary) => {\r\n                if (ctx.didChange(_options.editorOptions)) {\r\n                    Object.assign(changeSummary, ctx.change.changedOptions);\r\n                }\r\n                return true;\r\n            }\r\n        }, (reader, changeSummary) => {\r\n            /** @description update editor options */\r\n            _options.editorOptions.read(reader);\r\n            this._options.renderSideBySide.read(reader);\r\n            this.modified.updateOptions(this._adjustOptionsForRightHandSide(reader, changeSummary));\r\n            this.original.updateOptions(this._adjustOptionsForLeftHandSide(reader, changeSummary));\r\n        }));\r\n    }\r\n    _createLeftHandSideEditor(options, codeEditorWidgetOptions) {\r\n        const leftHandSideOptions = this._adjustOptionsForLeftHandSide(undefined, options);\r\n        const editor = this._constructInnerEditor(this._instantiationService, this.originalEditorElement, leftHandSideOptions, codeEditorWidgetOptions);\r\n        editor.setContextValue('isInDiffLeftEditor', true);\r\n        return editor;\r\n    }\r\n    _createRightHandSideEditor(options, codeEditorWidgetOptions) {\r\n        const rightHandSideOptions = this._adjustOptionsForRightHandSide(undefined, options);\r\n        const editor = this._constructInnerEditor(this._instantiationService, this.modifiedEditorElement, rightHandSideOptions, codeEditorWidgetOptions);\r\n        editor.setContextValue('isInDiffRightEditor', true);\r\n        return editor;\r\n    }\r\n    _constructInnerEditor(instantiationService, container, options, editorWidgetOptions) {\r\n        const editor = this._createInnerEditor(instantiationService, container, options, editorWidgetOptions);\r\n        this._register(editor.onDidContentSizeChange(e => {\r\n            const width = this.original.getContentWidth() + this.modified.getContentWidth() + OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n            const height = Math.max(this.modified.getContentHeight(), this.original.getContentHeight());\r\n            this._onDidContentSizeChange.fire({\r\n                contentHeight: height,\r\n                contentWidth: width,\r\n                contentHeightChanged: e.contentHeightChanged,\r\n                contentWidthChanged: e.contentWidthChanged\r\n            });\r\n        }));\r\n        return editor;\r\n    }\r\n    _adjustOptionsForLeftHandSide(_reader, changedOptions) {\r\n        const result = this._adjustOptionsForSubEditor(changedOptions);\r\n        if (!this._options.renderSideBySide.get()) {\r\n            // never wrap hidden editor\r\n            result.wordWrapOverride1 = 'off';\r\n            result.wordWrapOverride2 = 'off';\r\n            result.stickyScroll = { enabled: false };\r\n            // Disable unicode highlighting for the original side in inline mode, as they are not shown anyway.\r\n            result.unicodeHighlight = { nonBasicASCII: false, ambiguousCharacters: false, invisibleCharacters: false };\r\n        }\r\n        else {\r\n            result.unicodeHighlight = this._options.editorOptions.get().unicodeHighlight || {};\r\n            result.wordWrapOverride1 = this._options.diffWordWrap.get();\r\n        }\r\n        result.glyphMargin = this._options.renderSideBySide.get();\r\n        if (changedOptions.originalAriaLabel) {\r\n            result.ariaLabel = changedOptions.originalAriaLabel;\r\n        }\r\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\r\n        result.readOnly = !this._options.originalEditable.get();\r\n        result.dropIntoEditor = { enabled: !result.readOnly };\r\n        result.extraEditorClassName = 'original-in-monaco-diff-editor';\r\n        return result;\r\n    }\r\n    _adjustOptionsForRightHandSide(reader, changedOptions) {\r\n        const result = this._adjustOptionsForSubEditor(changedOptions);\r\n        if (changedOptions.modifiedAriaLabel) {\r\n            result.ariaLabel = changedOptions.modifiedAriaLabel;\r\n        }\r\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\r\n        result.wordWrapOverride1 = this._options.diffWordWrap.get();\r\n        result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n        result.scrollbar.verticalHasArrows = false;\r\n        result.extraEditorClassName = 'modified-in-monaco-diff-editor';\r\n        return result;\r\n    }\r\n    _adjustOptionsForSubEditor(options) {\r\n        const clonedOptions = {\r\n            ...options,\r\n            dimension: {\r\n                height: 0,\r\n                width: 0\r\n            },\r\n        };\r\n        clonedOptions.inDiffEditor = true;\r\n        clonedOptions.automaticLayout = false;\r\n        // Clone scrollbar options before changing them\r\n        clonedOptions.scrollbar = { ...(clonedOptions.scrollbar || {}) };\r\n        clonedOptions.folding = false;\r\n        clonedOptions.codeLens = this._options.diffCodeLens.get();\r\n        clonedOptions.fixedOverflowWidgets = true;\r\n        // Clone minimap options before changing them\r\n        clonedOptions.minimap = { ...(clonedOptions.minimap || {}) };\r\n        clonedOptions.minimap.enabled = false;\r\n        if (this._options.hideUnchangedRegions.get()) {\r\n            clonedOptions.stickyScroll = { enabled: false };\r\n        }\r\n        else {\r\n            clonedOptions.stickyScroll = this._options.editorOptions.get().stickyScroll;\r\n        }\r\n        return clonedOptions;\r\n    }\r\n    _updateAriaLabel(ariaLabel) {\r\n        var _a;\r\n        if (!ariaLabel) {\r\n            ariaLabel = '';\r\n        }\r\n        const ariaNavigationTip = localize('diff-aria-navigation-tip', ' use {0} to open the accessibility help.', (_a = this._keybindingService.lookupKeybinding('editor.action.accessibilityHelp')) === null || _a === void 0 ? void 0 : _a.getAriaLabel());\r\n        if (this._options.accessibilityVerbose.get()) {\r\n            return ariaLabel + ariaNavigationTip;\r\n        }\r\n        else if (ariaLabel) {\r\n            return ariaLabel.replaceAll(ariaNavigationTip, '');\r\n        }\r\n        return '';\r\n    }\r\n};\r\nDiffEditorEditors = __decorate([\r\n    __param(5, IInstantiationService),\r\n    __param(6, IKeybindingService)\r\n], DiffEditorEditors);\r\nexport { DiffEditorEditors };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { derived, observableValue } from '../../../../base/common/observable.js';\r\nimport { diffEditorDefaultOptions } from '../../../common/config/diffEditor.js';\r\nimport { clampedFloat, clampedInt, boolean as validateBooleanOption, stringSet as validateStringSetOption } from '../../../common/config/editorOptions.js';\r\nexport class DiffEditorOptions {\r\n    get editorOptions() { return this._options; }\r\n    constructor(options) {\r\n        this._diffEditorWidth = observableValue(this, 0);\r\n        this.couldShowInlineViewBecauseOfSize = derived(this, reader => this._options.read(reader).renderSideBySide && this._diffEditorWidth.read(reader) <= this._options.read(reader).renderSideBySideInlineBreakpoint);\r\n        this.renderOverviewRuler = derived(this, reader => this._options.read(reader).renderOverviewRuler);\r\n        this.renderSideBySide = derived(this, reader => this._options.read(reader).renderSideBySide\r\n            && !(this._options.read(reader).useInlineViewWhenSpaceIsLimited && this.couldShowInlineViewBecauseOfSize.read(reader)));\r\n        this.readOnly = derived(this, reader => this._options.read(reader).readOnly);\r\n        this.shouldRenderRevertArrows = derived(this, reader => {\r\n            if (!this._options.read(reader).renderMarginRevertIcon) {\r\n                return false;\r\n            }\r\n            if (!this.renderSideBySide.read(reader)) {\r\n                return false;\r\n            }\r\n            if (this.readOnly.read(reader)) {\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        this.renderIndicators = derived(this, reader => this._options.read(reader).renderIndicators);\r\n        this.enableSplitViewResizing = derived(this, reader => this._options.read(reader).enableSplitViewResizing);\r\n        this.splitViewDefaultRatio = derived(this, reader => this._options.read(reader).splitViewDefaultRatio);\r\n        this.ignoreTrimWhitespace = derived(this, reader => this._options.read(reader).ignoreTrimWhitespace);\r\n        this.maxComputationTimeMs = derived(this, reader => this._options.read(reader).maxComputationTime);\r\n        this.showMoves = derived(this, reader => this._options.read(reader).experimental.showMoves && this.renderSideBySide.read(reader));\r\n        this.isInEmbeddedEditor = derived(this, reader => this._options.read(reader).isInEmbeddedEditor);\r\n        this.diffWordWrap = derived(this, reader => this._options.read(reader).diffWordWrap);\r\n        this.originalEditable = derived(this, reader => this._options.read(reader).originalEditable);\r\n        this.diffCodeLens = derived(this, reader => this._options.read(reader).diffCodeLens);\r\n        this.accessibilityVerbose = derived(this, reader => this._options.read(reader).accessibilityVerbose);\r\n        this.diffAlgorithm = derived(this, reader => this._options.read(reader).diffAlgorithm);\r\n        this.showEmptyDecorations = derived(this, reader => this._options.read(reader).experimental.showEmptyDecorations);\r\n        this.onlyShowAccessibleDiffViewer = derived(this, reader => this._options.read(reader).onlyShowAccessibleDiffViewer);\r\n        this.hideUnchangedRegions = derived(this, reader => this._options.read(reader).hideUnchangedRegions.enabled);\r\n        this.hideUnchangedRegionsRevealLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.revealLineCount);\r\n        this.hideUnchangedRegionsContextLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.contextLineCount);\r\n        this.hideUnchangedRegionsMinimumLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.minimumLineCount);\r\n        const optionsCopy = { ...options, ...validateDiffEditorOptions(options, diffEditorDefaultOptions) };\r\n        this._options = observableValue(this, optionsCopy);\r\n    }\r\n    updateOptions(changedOptions) {\r\n        const newDiffEditorOptions = validateDiffEditorOptions(changedOptions, this._options.get());\r\n        const newOptions = { ...this._options.get(), ...changedOptions, ...newDiffEditorOptions };\r\n        this._options.set(newOptions, undefined, { changedOptions: changedOptions });\r\n    }\r\n    setWidth(width) {\r\n        this._diffEditorWidth.set(width, undefined);\r\n    }\r\n}\r\nfunction validateDiffEditorOptions(options, defaults) {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h;\r\n    return {\r\n        enableSplitViewResizing: validateBooleanOption(options.enableSplitViewResizing, defaults.enableSplitViewResizing),\r\n        splitViewDefaultRatio: clampedFloat(options.splitViewDefaultRatio, 0.5, 0.1, 0.9),\r\n        renderSideBySide: validateBooleanOption(options.renderSideBySide, defaults.renderSideBySide),\r\n        renderMarginRevertIcon: validateBooleanOption(options.renderMarginRevertIcon, defaults.renderMarginRevertIcon),\r\n        maxComputationTime: clampedInt(options.maxComputationTime, defaults.maxComputationTime, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\r\n        maxFileSize: clampedInt(options.maxFileSize, defaults.maxFileSize, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\r\n        ignoreTrimWhitespace: validateBooleanOption(options.ignoreTrimWhitespace, defaults.ignoreTrimWhitespace),\r\n        renderIndicators: validateBooleanOption(options.renderIndicators, defaults.renderIndicators),\r\n        originalEditable: validateBooleanOption(options.originalEditable, defaults.originalEditable),\r\n        diffCodeLens: validateBooleanOption(options.diffCodeLens, defaults.diffCodeLens),\r\n        renderOverviewRuler: validateBooleanOption(options.renderOverviewRuler, defaults.renderOverviewRuler),\r\n        diffWordWrap: validateStringSetOption(options.diffWordWrap, defaults.diffWordWrap, ['off', 'on', 'inherit']),\r\n        diffAlgorithm: validateStringSetOption(options.diffAlgorithm, defaults.diffAlgorithm, ['legacy', 'advanced'], { 'smart': 'legacy', 'experimental': 'advanced' }),\r\n        accessibilityVerbose: validateBooleanOption(options.accessibilityVerbose, defaults.accessibilityVerbose),\r\n        experimental: {\r\n            showMoves: validateBooleanOption((_a = options.experimental) === null || _a === void 0 ? void 0 : _a.showMoves, defaults.experimental.showMoves),\r\n            showEmptyDecorations: validateBooleanOption((_b = options.experimental) === null || _b === void 0 ? void 0 : _b.showEmptyDecorations, defaults.experimental.showEmptyDecorations),\r\n        },\r\n        hideUnchangedRegions: {\r\n            enabled: validateBooleanOption((_d = (_c = options.hideUnchangedRegions) === null || _c === void 0 ? void 0 : _c.enabled) !== null && _d !== void 0 ? _d : (_e = options.experimental) === null || _e === void 0 ? void 0 : _e.collapseUnchangedRegions, defaults.hideUnchangedRegions.enabled),\r\n            contextLineCount: clampedInt((_f = options.hideUnchangedRegions) === null || _f === void 0 ? void 0 : _f.contextLineCount, defaults.hideUnchangedRegions.contextLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\r\n            minimumLineCount: clampedInt((_g = options.hideUnchangedRegions) === null || _g === void 0 ? void 0 : _g.minimumLineCount, defaults.hideUnchangedRegions.minimumLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\r\n            revealLineCount: clampedInt((_h = options.hideUnchangedRegions) === null || _h === void 0 ? void 0 : _h.revealLineCount, defaults.hideUnchangedRegions.revealLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\r\n        },\r\n        isInEmbeddedEditor: validateBooleanOption(options.isInEmbeddedEditor, defaults.isInEmbeddedEditor),\r\n        onlyShowAccessibleDiffViewer: validateBooleanOption(options.onlyShowAccessibleDiffViewer, defaults.onlyShowAccessibleDiffViewer),\r\n        renderSideBySideInlineBreakpoint: clampedInt(options.renderSideBySideInlineBreakpoint, defaults.renderSideBySideInlineBreakpoint, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\r\n        useInlineViewWhenSpaceIsLimited: validateBooleanOption(options.useInlineViewWhenSpaceIsLimited, defaults.useInlineViewWhenSpaceIsLimited),\r\n    };\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\r\nimport { Disposable, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { CodeEditorWidget } from '../../browser/widget/codeEditorWidget.js';\r\nimport { InternalEditorAction } from '../../common/editorAction.js';\r\nimport { StandaloneKeybindingService, updateConfigurationService } from './standaloneServices.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\r\nimport { MenuId, MenuRegistry } from '../../../platform/actions/common/actions.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { StandaloneCodeEditorNLS } from '../../common/standaloneStrings.js';\r\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nimport { IModelService } from '../../common/services/model.js';\r\nimport { ILanguageService } from '../../common/languages/language.js';\r\nimport { StandaloneCodeEditorService } from './standaloneCodeEditorService.js';\r\nimport { PLAINTEXT_LANGUAGE_ID } from '../../common/languages/modesRegistry.js';\r\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\r\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\r\nimport { DiffEditorWidget } from '../../browser/widget/diffEditor/diffEditorWidget.js';\r\nimport { IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\r\nimport { mainWindow } from '../../../base/browser/window.js';\r\nlet LAST_GENERATED_COMMAND_ID = 0;\r\nlet ariaDomNodeCreated = false;\r\n/**\r\n * Create ARIA dom node inside parent,\r\n * or only for the first editor instantiation inside document.body.\r\n * @param parent container element for ARIA dom node\r\n */\r\nfunction createAriaDomNode(parent) {\r\n    if (!parent) {\r\n        if (ariaDomNodeCreated) {\r\n            return;\r\n        }\r\n        ariaDomNodeCreated = true;\r\n    }\r\n    aria.setARIAContainer(parent || mainWindow.document.body);\r\n}\r\n/**\r\n * A code editor to be used both by the standalone editor and the standalone diff editor.\r\n */\r\nlet StandaloneCodeEditor = class StandaloneCodeEditor extends CodeEditorWidget {\r\n    constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\r\n        const options = { ..._options };\r\n        options.ariaLabel = options.ariaLabel || StandaloneCodeEditorNLS.editorViewAccessibleLabel;\r\n        options.ariaLabel = options.ariaLabel + ';' + (StandaloneCodeEditorNLS.accessibilityHelpMessage);\r\n        super(domElement, options, {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\r\n        if (keybindingService instanceof StandaloneKeybindingService) {\r\n            this._standaloneKeybindingService = keybindingService;\r\n        }\r\n        else {\r\n            this._standaloneKeybindingService = null;\r\n        }\r\n        createAriaDomNode(options.ariaContainerElement);\r\n    }\r\n    addCommand(keybinding, handler, context) {\r\n        if (!this._standaloneKeybindingService) {\r\n            console.warn('Cannot add command because the editor is configured with an unrecognized KeybindingService');\r\n            return null;\r\n        }\r\n        const commandId = 'DYNAMIC_' + (++LAST_GENERATED_COMMAND_ID);\r\n        const whenExpression = ContextKeyExpr.deserialize(context);\r\n        this._standaloneKeybindingService.addDynamicKeybinding(commandId, keybinding, handler, whenExpression);\r\n        return commandId;\r\n    }\r\n    createContextKey(key, defaultValue) {\r\n        return this._contextKeyService.createKey(key, defaultValue);\r\n    }\r\n    addAction(_descriptor) {\r\n        if ((typeof _descriptor.id !== 'string') || (typeof _descriptor.label !== 'string') || (typeof _descriptor.run !== 'function')) {\r\n            throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\r\n        }\r\n        if (!this._standaloneKeybindingService) {\r\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\r\n            return Disposable.None;\r\n        }\r\n        // Read descriptor options\r\n        const id = _descriptor.id;\r\n        const label = _descriptor.label;\r\n        const precondition = ContextKeyExpr.and(ContextKeyExpr.equals('editorId', this.getId()), ContextKeyExpr.deserialize(_descriptor.precondition));\r\n        const keybindings = _descriptor.keybindings;\r\n        const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(_descriptor.keybindingContext));\r\n        const contextMenuGroupId = _descriptor.contextMenuGroupId || null;\r\n        const contextMenuOrder = _descriptor.contextMenuOrder || 0;\r\n        const run = (_accessor, ...args) => {\r\n            return Promise.resolve(_descriptor.run(this, ...args));\r\n        };\r\n        const toDispose = new DisposableStore();\r\n        // Generate a unique id to allow the same descriptor.id across multiple editor instances\r\n        const uniqueId = this.getId() + ':' + id;\r\n        // Register the command\r\n        toDispose.add(CommandsRegistry.registerCommand(uniqueId, run));\r\n        // Register the context menu item\r\n        if (contextMenuGroupId) {\r\n            const menuItem = {\r\n                command: {\r\n                    id: uniqueId,\r\n                    title: label\r\n                },\r\n                when: precondition,\r\n                group: contextMenuGroupId,\r\n                order: contextMenuOrder\r\n            };\r\n            toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\r\n        }\r\n        // Register the keybindings\r\n        if (Array.isArray(keybindings)) {\r\n            for (const kb of keybindings) {\r\n                toDispose.add(this._standaloneKeybindingService.addDynamicKeybinding(uniqueId, kb, run, keybindingsWhen));\r\n            }\r\n        }\r\n        // Finally, register an internal editor action\r\n        const internalAction = new InternalEditorAction(uniqueId, label, label, undefined, precondition, (...args) => Promise.resolve(_descriptor.run(this, ...args)), this._contextKeyService);\r\n        // Store it under the original id, such that trigger with the original id will work\r\n        this._actions.set(id, internalAction);\r\n        toDispose.add(toDisposable(() => {\r\n            this._actions.delete(id);\r\n        }));\r\n        return toDispose;\r\n    }\r\n    _triggerCommand(handlerId, payload) {\r\n        if (this._codeEditorService instanceof StandaloneCodeEditorService) {\r\n            // Help commands find this editor as the active editor\r\n            try {\r\n                this._codeEditorService.setActiveCodeEditor(this);\r\n                super._triggerCommand(handlerId, payload);\r\n            }\r\n            finally {\r\n                this._codeEditorService.setActiveCodeEditor(null);\r\n            }\r\n        }\r\n        else {\r\n            super._triggerCommand(handlerId, payload);\r\n        }\r\n    }\r\n};\r\nStandaloneCodeEditor = __decorate([\r\n    __param(2, IInstantiationService),\r\n    __param(3, ICodeEditorService),\r\n    __param(4, ICommandService),\r\n    __param(5, IContextKeyService),\r\n    __param(6, IKeybindingService),\r\n    __param(7, IThemeService),\r\n    __param(8, INotificationService),\r\n    __param(9, IAccessibilityService),\r\n    __param(10, ILanguageConfigurationService),\r\n    __param(11, ILanguageFeaturesService)\r\n], StandaloneCodeEditor);\r\nexport { StandaloneCodeEditor };\r\nlet StandaloneEditor = class StandaloneEditor extends StandaloneCodeEditor {\r\n    constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, configurationService, accessibilityService, modelService, languageService, languageConfigurationService, languageFeaturesService) {\r\n        const options = { ..._options };\r\n        updateConfigurationService(configurationService, options, false);\r\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\r\n        if (typeof options.theme === 'string') {\r\n            themeService.setTheme(options.theme);\r\n        }\r\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\r\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\r\n        }\r\n        const _model = options.model;\r\n        delete options.model;\r\n        super(domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\r\n        this._configurationService = configurationService;\r\n        this._standaloneThemeService = themeService;\r\n        this._register(themeDomRegistration);\r\n        let model;\r\n        if (typeof _model === 'undefined') {\r\n            const languageId = languageService.getLanguageIdByMimeType(options.language) || options.language || PLAINTEXT_LANGUAGE_ID;\r\n            model = createTextModel(modelService, languageService, options.value || '', languageId, undefined);\r\n            this._ownsModel = true;\r\n        }\r\n        else {\r\n            model = _model;\r\n            this._ownsModel = false;\r\n        }\r\n        this._attachModel(model);\r\n        if (model) {\r\n            const e = {\r\n                oldModelUrl: null,\r\n                newModelUrl: model.uri\r\n            };\r\n            this._onDidChangeModel.fire(e);\r\n        }\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    updateOptions(newOptions) {\r\n        updateConfigurationService(this._configurationService, newOptions, false);\r\n        if (typeof newOptions.theme === 'string') {\r\n            this._standaloneThemeService.setTheme(newOptions.theme);\r\n        }\r\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\r\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\r\n        }\r\n        super.updateOptions(newOptions);\r\n    }\r\n    _postDetachModelCleanup(detachedModel) {\r\n        super._postDetachModelCleanup(detachedModel);\r\n        if (detachedModel && this._ownsModel) {\r\n            detachedModel.dispose();\r\n            this._ownsModel = false;\r\n        }\r\n    }\r\n};\r\nStandaloneEditor = __decorate([\r\n    __param(2, IInstantiationService),\r\n    __param(3, ICodeEditorService),\r\n    __param(4, ICommandService),\r\n    __param(5, IContextKeyService),\r\n    __param(6, IKeybindingService),\r\n    __param(7, IStandaloneThemeService),\r\n    __param(8, INotificationService),\r\n    __param(9, IConfigurationService),\r\n    __param(10, IAccessibilityService),\r\n    __param(11, IModelService),\r\n    __param(12, ILanguageService),\r\n    __param(13, ILanguageConfigurationService),\r\n    __param(14, ILanguageFeaturesService)\r\n], StandaloneEditor);\r\nexport { StandaloneEditor };\r\nlet StandaloneDiffEditor2 = class StandaloneDiffEditor2 extends DiffEditorWidget {\r\n    constructor(domElement, _options, instantiationService, contextKeyService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService, audioCueService) {\r\n        const options = { ..._options };\r\n        updateConfigurationService(configurationService, options, true);\r\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\r\n        if (typeof options.theme === 'string') {\r\n            themeService.setTheme(options.theme);\r\n        }\r\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\r\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\r\n        }\r\n        super(domElement, options, {}, contextKeyService, instantiationService, codeEditorService, audioCueService, editorProgressService);\r\n        this._configurationService = configurationService;\r\n        this._standaloneThemeService = themeService;\r\n        this._register(themeDomRegistration);\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    updateOptions(newOptions) {\r\n        updateConfigurationService(this._configurationService, newOptions, true);\r\n        if (typeof newOptions.theme === 'string') {\r\n            this._standaloneThemeService.setTheme(newOptions.theme);\r\n        }\r\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\r\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\r\n        }\r\n        super.updateOptions(newOptions);\r\n    }\r\n    _createInnerEditor(instantiationService, container, options) {\r\n        return instantiationService.createInstance(StandaloneCodeEditor, container, options);\r\n    }\r\n    getOriginalEditor() {\r\n        return super.getOriginalEditor();\r\n    }\r\n    getModifiedEditor() {\r\n        return super.getModifiedEditor();\r\n    }\r\n    addCommand(keybinding, handler, context) {\r\n        return this.getModifiedEditor().addCommand(keybinding, handler, context);\r\n    }\r\n    createContextKey(key, defaultValue) {\r\n        return this.getModifiedEditor().createContextKey(key, defaultValue);\r\n    }\r\n    addAction(descriptor) {\r\n        return this.getModifiedEditor().addAction(descriptor);\r\n    }\r\n};\r\nStandaloneDiffEditor2 = __decorate([\r\n    __param(2, IInstantiationService),\r\n    __param(3, IContextKeyService),\r\n    __param(4, ICodeEditorService),\r\n    __param(5, IStandaloneThemeService),\r\n    __param(6, INotificationService),\r\n    __param(7, IConfigurationService),\r\n    __param(8, IContextMenuService),\r\n    __param(9, IEditorProgressService),\r\n    __param(10, IClipboardService),\r\n    __param(11, IAudioCueService)\r\n], StandaloneDiffEditor2);\r\nexport { StandaloneDiffEditor2 };\r\n/**\r\n * @internal\r\n */\r\nexport function createTextModel(modelService, languageService, value, languageId, uri) {\r\n    value = value || '';\r\n    if (!languageId) {\r\n        const firstLF = value.indexOf('\\n');\r\n        let firstLine = value;\r\n        if (firstLF !== -1) {\r\n            firstLine = value.substring(0, firstLF);\r\n        }\r\n        return doCreateModel(modelService, value, languageService.createByFilepathOrFirstLine(uri || null, firstLine), uri);\r\n    }\r\n    return doCreateModel(modelService, value, languageService.createById(languageId), uri);\r\n}\r\n/**\r\n * @internal\r\n */\r\nfunction doCreateModel(modelService, value, languageSelection, uri) {\r\n    return modelService.createModel(value, languageSelection, uri);\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { getWindow, h, scheduleAtNextAnimationFrame } from '../../../../base/browser/dom.js';\r\nimport { SmoothScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { findFirstMaxBy } from '../../../../base/common/arraysFind.js';\r\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, derived, derivedObservableWithCache, derivedWithStore, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\r\nimport { disposableObservableValue, globalTransaction, transaction } from '../../../../base/common/observableInternal/base.js';\r\nimport { Scrollable } from '../../../../base/common/scrollable.js';\r\nimport './style.css';\r\nimport { ObservableElementSizeObserver } from '../diffEditor/utils.js';\r\nimport { OffsetRange } from '../../../common/core/offsetRange.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { DiffEditorItemTemplate, TemplateData } from './diffEditorItemTemplate.js';\r\nimport { ObjectPool } from './objectPool.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nlet MultiDiffEditorWidgetImpl = class MultiDiffEditorWidgetImpl extends Disposable {\r\n    constructor(_element, _dimension, _viewModel, _workbenchUIElementFactory, _parentContextKeyService, _parentInstantiationService) {\r\n        super();\r\n        this._element = _element;\r\n        this._dimension = _dimension;\r\n        this._viewModel = _viewModel;\r\n        this._workbenchUIElementFactory = _workbenchUIElementFactory;\r\n        this._parentContextKeyService = _parentContextKeyService;\r\n        this._parentInstantiationService = _parentInstantiationService;\r\n        this._elements = h('div', {\r\n            style: {\r\n                overflowY: 'hidden',\r\n            }\r\n        }, [\r\n            h('div@content', {\r\n                style: {\r\n                    overflow: 'hidden',\r\n                }\r\n            }),\r\n            h('div.monaco-editor@overflowWidgetsDomNode', {}),\r\n        ]);\r\n        this._sizeObserver = this._register(new ObservableElementSizeObserver(this._element, undefined));\r\n        this._objectPool = this._register(new ObjectPool((data) => {\r\n            const template = this._instantiationService.createInstance(DiffEditorItemTemplate, this._elements.content, this._elements.overflowWidgetsDomNode, this._workbenchUIElementFactory);\r\n            template.setData(data);\r\n            return template;\r\n        }));\r\n        this._scrollable = this._register(new Scrollable({\r\n            forceIntegerValues: false,\r\n            scheduleAtNextAnimationFrame: (cb) => scheduleAtNextAnimationFrame(getWindow(this._element), cb),\r\n            smoothScrollDuration: 100,\r\n        }));\r\n        this._scrollableElement = this._register(new SmoothScrollableElement(this._elements.root, {\r\n            vertical: 1 /* ScrollbarVisibility.Auto */,\r\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\r\n            className: 'monaco-component',\r\n            useShadows: false,\r\n        }, this._scrollable));\r\n        this.scrollTop = observableFromEvent(this._scrollableElement.onScroll, () => /** @description scrollTop */ this._scrollableElement.getScrollPosition().scrollTop);\r\n        this.scrollLeft = observableFromEvent(this._scrollableElement.onScroll, () => /** @description scrollLeft */ this._scrollableElement.getScrollPosition().scrollLeft);\r\n        this._viewItems = derivedWithStore(this, (reader, store) => {\r\n            const vm = this._viewModel.read(reader);\r\n            if (!vm) {\r\n                return [];\r\n            }\r\n            const items = vm.items.read(reader);\r\n            return items.map(d => store.add(new VirtualizedViewItem(d, this._objectPool, this.scrollLeft)));\r\n        });\r\n        this._totalHeight = this._viewItems.map(this, (items, reader) => items.reduce((r, i) => r + i.contentHeight.read(reader), 0));\r\n        this.activeDiffItem = derived(this, reader => this._viewItems.read(reader).find(i => { var _a; return (_a = i.template.read(reader)) === null || _a === void 0 ? void 0 : _a.isFocused.read(reader); }));\r\n        this.lastActiveDiffItem = derivedObservableWithCache((reader, lastValue) => { var _a; return (_a = this.activeDiffItem.read(reader)) !== null && _a !== void 0 ? _a : lastValue; });\r\n        this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._element));\r\n        this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\r\n        this._contextKeyService.createKey(EditorContextKeys.inMultiDiffEditor.key, true);\r\n        const ctxAllCollapsed = this._parentContextKeyService.createKey(EditorContextKeys.multiDiffEditorAllCollapsed.key, false);\r\n        this._register(autorun((reader) => {\r\n            const viewModel = this._viewModel.read(reader);\r\n            if (viewModel) {\r\n                const allCollapsed = viewModel.items.read(reader).every(item => item.collapsed.read(reader));\r\n                ctxAllCollapsed.set(allCollapsed);\r\n            }\r\n        }));\r\n        this._register(autorun((reader) => {\r\n            const lastActiveDiffItem = this.lastActiveDiffItem.read(reader);\r\n            transaction(tx => {\r\n                var _a;\r\n                (_a = this._viewModel.read(reader)) === null || _a === void 0 ? void 0 : _a.activeDiffItem.set(lastActiveDiffItem === null || lastActiveDiffItem === void 0 ? void 0 : lastActiveDiffItem.viewModel, tx);\r\n            });\r\n        }));\r\n        this._register(autorun((reader) => {\r\n            /** @description Update widget dimension */\r\n            const dimension = this._dimension.read(reader);\r\n            this._sizeObserver.observe(dimension);\r\n        }));\r\n        this._elements.content.style.position = 'relative';\r\n        this._register(autorun((reader) => {\r\n            /** @description Update scroll dimensions */\r\n            const height = this._sizeObserver.height.read(reader);\r\n            this._elements.root.style.height = `${height}px`;\r\n            const totalHeight = this._totalHeight.read(reader);\r\n            this._elements.content.style.height = `${totalHeight}px`;\r\n            const width = this._sizeObserver.width.read(reader);\r\n            let scrollWidth = width;\r\n            const viewItems = this._viewItems.read(reader);\r\n            const max = findFirstMaxBy(viewItems, i => i.maxScroll.read(reader).maxScroll);\r\n            if (max) {\r\n                const maxScroll = max.maxScroll.read(reader);\r\n                scrollWidth = width + maxScroll.maxScroll;\r\n            }\r\n            this._scrollableElement.setScrollDimensions({\r\n                width: width,\r\n                height: height,\r\n                scrollHeight: totalHeight,\r\n                scrollWidth,\r\n            });\r\n        }));\r\n        _element.replaceChildren(this._scrollableElement.getDomNode());\r\n        this._register(toDisposable(() => {\r\n            _element.replaceChildren();\r\n        }));\r\n        this._register(this._register(autorun(reader => {\r\n            /** @description Render all */\r\n            globalTransaction(tx => {\r\n                this.render(reader);\r\n            });\r\n        })));\r\n    }\r\n    render(reader) {\r\n        const scrollTop = this.scrollTop.read(reader);\r\n        let contentScrollOffsetToScrollOffset = 0;\r\n        let itemHeightSumBefore = 0;\r\n        let itemContentHeightSumBefore = 0;\r\n        const viewPortHeight = this._sizeObserver.height.read(reader);\r\n        const contentViewPort = OffsetRange.ofStartAndLength(scrollTop, viewPortHeight);\r\n        const width = this._sizeObserver.width.read(reader);\r\n        for (const v of this._viewItems.read(reader)) {\r\n            const itemContentHeight = v.contentHeight.read(reader);\r\n            const itemHeight = Math.min(itemContentHeight, viewPortHeight);\r\n            const itemRange = OffsetRange.ofStartAndLength(itemHeightSumBefore, itemHeight);\r\n            const itemContentRange = OffsetRange.ofStartAndLength(itemContentHeightSumBefore, itemContentHeight);\r\n            if (itemContentRange.isBefore(contentViewPort)) {\r\n                contentScrollOffsetToScrollOffset -= itemContentHeight - itemHeight;\r\n                v.hide();\r\n            }\r\n            else if (itemContentRange.isAfter(contentViewPort)) {\r\n                v.hide();\r\n            }\r\n            else {\r\n                const scroll = Math.max(0, Math.min(contentViewPort.start - itemContentRange.start, itemContentHeight - itemHeight));\r\n                contentScrollOffsetToScrollOffset -= scroll;\r\n                const viewPort = OffsetRange.ofStartAndLength(scrollTop + contentScrollOffsetToScrollOffset, viewPortHeight);\r\n                v.render(itemRange, scroll, width, viewPort);\r\n            }\r\n            itemHeightSumBefore += itemHeight;\r\n            itemContentHeightSumBefore += itemContentHeight;\r\n        }\r\n        this._elements.content.style.transform = `translateY(${-(scrollTop + contentScrollOffsetToScrollOffset)}px)`;\r\n    }\r\n};\r\nMultiDiffEditorWidgetImpl = __decorate([\r\n    __param(4, IContextKeyService),\r\n    __param(5, IInstantiationService)\r\n], MultiDiffEditorWidgetImpl);\r\nexport { MultiDiffEditorWidgetImpl };\r\nclass VirtualizedViewItem extends Disposable {\r\n    constructor(viewModel, _objectPool, _scrollLeft) {\r\n        super();\r\n        this.viewModel = viewModel;\r\n        this._objectPool = _objectPool;\r\n        this._scrollLeft = _scrollLeft;\r\n        // TODO this should be in the view model\r\n        this._lastTemplateData = observableValue(this, { contentHeight: 500, maxScroll: { maxScroll: 0, width: 0 }, });\r\n        this._templateRef = this._register(disposableObservableValue(this, undefined));\r\n        this.contentHeight = derived(this, reader => { var _a, _b, _c; return (_c = (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.height) === null || _b === void 0 ? void 0 : _b.read(reader)) !== null && _c !== void 0 ? _c : this._lastTemplateData.read(reader).contentHeight; });\r\n        this.maxScroll = derived(this, reader => { var _a, _b; return (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.maxScroll.read(reader)) !== null && _b !== void 0 ? _b : this._lastTemplateData.read(reader).maxScroll; });\r\n        this.template = derived(this, reader => { var _a; return (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object; });\r\n        this._isHidden = observableValue(this, false);\r\n        this._register(autorun((reader) => {\r\n            var _a;\r\n            const scrollLeft = this._scrollLeft.read(reader);\r\n            (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.setScrollLeft(scrollLeft);\r\n        }));\r\n        this._register(autorun(reader => {\r\n            const ref = this._templateRef.read(reader);\r\n            if (!ref) {\r\n                return;\r\n            }\r\n            const isHidden = this._isHidden.read(reader);\r\n            if (!isHidden) {\r\n                return;\r\n            }\r\n            const isFocused = ref.object.isFocused.read(reader);\r\n            if (isFocused) {\r\n                return;\r\n            }\r\n            transaction(tx => {\r\n                this._lastTemplateData.set({\r\n                    contentHeight: ref.object.height.get(),\r\n                    maxScroll: { maxScroll: 0, width: 0, } // Reset max scroll\r\n                }, tx);\r\n                ref.object.hide();\r\n                this._templateRef.set(undefined, tx);\r\n            });\r\n        }));\r\n    }\r\n    dispose() {\r\n        this.hide();\r\n        super.dispose();\r\n    }\r\n    toString() {\r\n        return `VirtualViewItem(${this.viewModel.entry.value.title})`;\r\n    }\r\n    hide() {\r\n        this._isHidden.set(true, undefined);\r\n    }\r\n    render(verticalSpace, offset, width, viewPort) {\r\n        this._isHidden.set(false, undefined);\r\n        let ref = this._templateRef.get();\r\n        if (!ref) {\r\n            ref = this._objectPool.getUnusedObj(new TemplateData(this.viewModel));\r\n            this._templateRef.set(ref, undefined);\r\n        }\r\n        ref.object.render(verticalSpace, width, offset, viewPort);\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { ActionRunner } from '../../../../base/common/actions.js';\r\nexport class ActionRunnerWithContext extends ActionRunner {\r\n    constructor(_getContext) {\r\n        super();\r\n        this._getContext = _getContext;\r\n    }\r\n    runAction(action, _context) {\r\n        return super.runAction(action, this._getContext());\r\n    }\r\n}\r\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { h } from '../../../../base/browser/dom.js';\r\nimport { Button } from '../../../../base/browser/ui/button/button.js';\r\nimport { Codicon } from '../../../../base/common/codicons.js';\r\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { autorun, derived, observableFromEvent } from '../../../../base/common/observable.js';\r\nimport { globalTransaction, observableValue } from '../../../../base/common/observableInternal/base.js';\r\nimport { DiffEditorWidget } from '../diffEditor/diffEditorWidget.js';\r\nimport { MenuWorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\r\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { ActionRunnerWithContext } from './utils.js';\r\nexport class TemplateData {\r\n    constructor(viewModel) {\r\n        this.viewModel = viewModel;\r\n    }\r\n    getId() {\r\n        return this.viewModel;\r\n    }\r\n}\r\nlet DiffEditorItemTemplate = class DiffEditorItemTemplate extends Disposable {\r\n    constructor(_container, _overflowWidgetsDomNode, _workbenchUIElementFactory, _instantiationService) {\r\n        super();\r\n        this._container = _container;\r\n        this._overflowWidgetsDomNode = _overflowWidgetsDomNode;\r\n        this._workbenchUIElementFactory = _workbenchUIElementFactory;\r\n        this._instantiationService = _instantiationService;\r\n        this._viewModel = observableValue(this, undefined);\r\n        this._collapsed = derived(this, reader => { var _a; return (_a = this._viewModel.read(reader)) === null || _a === void 0 ? void 0 : _a.collapsed.read(reader); });\r\n        this._contentHeight = observableValue(this, 500);\r\n        this.height = derived(this, reader => {\r\n            const h = this._collapsed.read(reader) ? 0 : this._contentHeight.read(reader);\r\n            return h + this._outerEditorHeight;\r\n        });\r\n        this._modifiedContentWidth = observableValue(this, 0);\r\n        this._modifiedWidth = observableValue(this, 0);\r\n        this._originalContentWidth = observableValue(this, 0);\r\n        this._originalWidth = observableValue(this, 0);\r\n        this.maxScroll = derived(this, reader => {\r\n            const scroll1 = this._modifiedContentWidth.read(reader) - this._modifiedWidth.read(reader);\r\n            const scroll2 = this._originalContentWidth.read(reader) - this._originalWidth.read(reader);\r\n            if (scroll1 > scroll2) {\r\n                return { maxScroll: scroll1, width: this._modifiedWidth.read(reader) };\r\n            }\r\n            else {\r\n                return { maxScroll: scroll2, width: this._originalWidth.read(reader) };\r\n            }\r\n        });\r\n        this._elements = h('div.multiDiffEntry', [\r\n            h('div.content', {\r\n                style: {\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    flex: '1',\r\n                    overflow: 'hidden',\r\n                }\r\n            }, [\r\n                h('div.header@header', [\r\n                    h('div.collapse-button@collapseButton'),\r\n                    h('div.title.show-file-icons@title', []),\r\n                    h('div.actions@actions'),\r\n                ]),\r\n                h('div.editorParent', {\r\n                    style: {\r\n                        flex: '1',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                    }\r\n                }, [\r\n                    h('div.editorContainer@editor', { style: { flex: '1' } }),\r\n                ])\r\n            ])\r\n        ]);\r\n        this.editor = this._register(this._instantiationService.createInstance(DiffEditorWidget, this._elements.editor, {\r\n            overflowWidgetsDomNode: this._overflowWidgetsDomNode,\r\n        }, {}));\r\n        this.isModifedFocused = isFocused(this.editor.getModifiedEditor());\r\n        this.isOriginalFocused = isFocused(this.editor.getOriginalEditor());\r\n        this.isFocused = derived(this, reader => this.isModifedFocused.read(reader) || this.isOriginalFocused.read(reader));\r\n        this._resourceLabel = this._workbenchUIElementFactory.createResourceLabel\r\n            ? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.title))\r\n            : undefined;\r\n        this._dataStore = new DisposableStore();\r\n        this._headerHeight = this._elements.header.clientHeight;\r\n        const btn = new Button(this._elements.collapseButton, {});\r\n        this._register(autorun(reader => {\r\n            btn.element.className = '';\r\n            btn.icon = this._collapsed.read(reader) ? Codicon.chevronRight : Codicon.chevronDown;\r\n        }));\r\n        this._register(btn.onDidClick(() => {\r\n            var _a;\r\n            (_a = this._viewModel.get()) === null || _a === void 0 ? void 0 : _a.collapsed.set(!this._collapsed.get(), undefined);\r\n        }));\r\n        this._register(autorun(reader => {\r\n            this._elements.editor.style.display = this._collapsed.read(reader) ? 'none' : 'block';\r\n        }));\r\n        this.editor.getModifiedEditor().onDidLayoutChange(e => {\r\n            const width = this.editor.getModifiedEditor().getLayoutInfo().contentWidth;\r\n            this._modifiedWidth.set(width, undefined);\r\n        });\r\n        this.editor.getOriginalEditor().onDidLayoutChange(e => {\r\n            const width = this.editor.getOriginalEditor().getLayoutInfo().contentWidth;\r\n            this._originalWidth.set(width, undefined);\r\n        });\r\n        this._register(this.editor.onDidContentSizeChange(e => {\r\n            globalTransaction(tx => {\r\n                this._contentHeight.set(e.contentHeight, tx);\r\n                this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(), tx);\r\n                this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(), tx);\r\n            });\r\n        }));\r\n        this._register(autorun(reader => {\r\n            const isFocused = this.isFocused.read(reader);\r\n            this._elements.root.classList.toggle('focused', isFocused);\r\n        }));\r\n        this._container.appendChild(this._elements.root);\r\n        this._outerEditorHeight = 38;\r\n        this._register(this._instantiationService.createInstance(MenuWorkbenchToolBar, this._elements.actions, MenuId.MultiDiffEditorFileToolbar, {\r\n            actionRunner: this._register(new ActionRunnerWithContext(() => { var _a, _b; return ((_b = (_a = this._viewModel.get()) === null || _a === void 0 ? void 0 : _a.diffEditorViewModel) === null || _b === void 0 ? void 0 : _b.model.modified.uri); })),\r\n            menuOptions: {\r\n                shouldForwardArgs: true,\r\n            }\r\n        }));\r\n    }\r\n    setScrollLeft(left) {\r\n        if (this._modifiedContentWidth.get() - this._modifiedWidth.get() > this._originalContentWidth.get() - this._originalWidth.get()) {\r\n            this.editor.getModifiedEditor().setScrollLeft(left);\r\n        }\r\n        else {\r\n            this.editor.getOriginalEditor().setScrollLeft(left);\r\n        }\r\n    }\r\n    setData(data) {\r\n        function updateOptions(options) {\r\n            return {\r\n                ...options,\r\n                scrollBeyondLastLine: false,\r\n                hideUnchangedRegions: {\r\n                    enabled: true,\r\n                },\r\n                scrollbar: {\r\n                    vertical: 'hidden',\r\n                    horizontal: 'hidden',\r\n                    handleMouseWheel: false,\r\n                    useShadows: false,\r\n                },\r\n                renderOverviewRuler: false,\r\n                fixedOverflowWidgets: true,\r\n            };\r\n        }\r\n        const value = data.viewModel.entry.value; // TODO\r\n        if (value.onOptionsDidChange) {\r\n            this._dataStore.add(value.onOptionsDidChange(() => {\r\n                var _a;\r\n                this.editor.updateOptions(updateOptions((_a = value.options) !== null && _a !== void 0 ? _a : {}));\r\n            }));\r\n        }\r\n        globalTransaction(tx => {\r\n            var _a, _b;\r\n            (_a = this._resourceLabel) === null || _a === void 0 ? void 0 : _a.setUri(data.viewModel.diffEditorViewModel.model.modified.uri);\r\n            this._dataStore.clear();\r\n            this._viewModel.set(data.viewModel, tx);\r\n            this.editor.setModel(data.viewModel.diffEditorViewModel, tx);\r\n            this.editor.updateOptions(updateOptions((_b = value.options) !== null && _b !== void 0 ? _b : {}));\r\n        });\r\n    }\r\n    render(verticalRange, width, editorScroll, viewPort) {\r\n        this._elements.root.style.visibility = 'visible';\r\n        this._elements.root.style.top = `${verticalRange.start}px`;\r\n        this._elements.root.style.height = `${verticalRange.length}px`;\r\n        this._elements.root.style.width = `${width}px`;\r\n        this._elements.root.style.position = 'absolute';\r\n        // For sticky scroll\r\n        const delta = Math.max(0, Math.min(verticalRange.length - this._headerHeight, viewPort.start - verticalRange.start));\r\n        this._elements.header.style.transform = `translateY(${delta}px)`;\r\n        globalTransaction(tx => {\r\n            this.editor.layout({\r\n                width: width,\r\n                height: verticalRange.length - this._outerEditorHeight,\r\n            });\r\n        });\r\n        this.editor.getOriginalEditor().setScrollTop(editorScroll);\r\n        this._elements.header.classList.toggle('shadow', delta > 0 || editorScroll > 0);\r\n    }\r\n    hide() {\r\n        this._elements.root.style.top = `-100000px`;\r\n        this._elements.root.style.visibility = 'hidden'; // Some editor parts are still visible\r\n    }\r\n};\r\nDiffEditorItemTemplate = __decorate([\r\n    __param(3, IInstantiationService)\r\n], DiffEditorItemTemplate);\r\nexport { DiffEditorItemTemplate };\r\nfunction isFocused(editor) {\r\n    return observableFromEvent(h => {\r\n        const store = new DisposableStore();\r\n        store.add(editor.onDidFocusEditorWidget(() => h(true)));\r\n        store.add(editor.onDidBlurEditorWidget(() => h(false)));\r\n        return store;\r\n    }, () => editor.hasWidgetFocus());\r\n}\r\n", "export class ObjectPool {\r\n    constructor(_create) {\r\n        this._create = _create;\r\n        this._unused = new Set();\r\n        this._used = new Set();\r\n        this._itemData = new Map();\r\n    }\r\n    getUnusedObj(data) {\r\n        var _a;\r\n        let obj;\r\n        if (this._unused.size === 0) {\r\n            obj = this._create(data);\r\n            this._itemData.set(obj, data);\r\n        }\r\n        else {\r\n            const values = [...this._unused.values()];\r\n            obj = (_a = values.find(obj => this._itemData.get(obj).getId() === data.getId())) !== null && _a !== void 0 ? _a : values[0];\r\n            this._unused.delete(obj);\r\n            this._itemData.set(obj, data);\r\n            obj.setData(data);\r\n        }\r\n        this._used.add(obj);\r\n        return {\r\n            object: obj,\r\n            dispose: () => {\r\n                this._used.delete(obj);\r\n                if (this._unused.size > 5) {\r\n                    obj.dispose();\r\n                }\r\n                else {\r\n                    this._unused.add(obj);\r\n                }\r\n            }\r\n        };\r\n    }\r\n    dispose() {\r\n        for (const obj of this._used) {\r\n            obj.dispose();\r\n        }\r\n        for (const obj of this._unused) {\r\n            obj.dispose();\r\n        }\r\n        this._used.clear();\r\n        this._unused.clear();\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { localize } from '../../../../nls.js';\r\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\r\nexport const multiDiffEditorHeaderBackground = registerColor('multiDiffEditor.headerBackground', { dark: '#808080', light: '#b4b4b4', hcDark: '#808080', hcLight: '#b4b4b4', }, localize('multiDiffEditor.headerBackground', 'The background color of the diff editor\\'s header'));\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { derivedWithStore, observableValue, recomputeInitiallyAndOnChange } from '../../../../base/common/observable.js';\r\nimport { readHotReloadableExport } from '../diffEditor/utils.js';\r\nimport { MultiDiffEditorWidgetImpl } from './multiDiffEditorWidgetImpl.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport './colors.js';\r\nimport { DiffEditorItemTemplate } from './diffEditorItemTemplate.js';\r\nlet MultiDiffEditorWidget = class MultiDiffEditorWidget extends Disposable {\r\n    constructor(_element, _workbenchUIElementFactory, _instantiationService) {\r\n        super();\r\n        this._element = _element;\r\n        this._workbenchUIElementFactory = _workbenchUIElementFactory;\r\n        this._instantiationService = _instantiationService;\r\n        this._dimension = observableValue(this, undefined);\r\n        this._viewModel = observableValue(this, undefined);\r\n        this._widgetImpl = derivedWithStore(this, (reader, store) => {\r\n            readHotReloadableExport(DiffEditorItemTemplate, reader);\r\n            return store.add(this._instantiationService.createInstance((readHotReloadableExport(MultiDiffEditorWidgetImpl, reader)), this._element, this._dimension, this._viewModel, this._workbenchUIElementFactory));\r\n        });\r\n        this._register(recomputeInitiallyAndOnChange(this._widgetImpl));\r\n    }\r\n};\r\nMultiDiffEditorWidget = __decorate([\r\n    __param(2, IInstantiationService)\r\n], MultiDiffEditorWidget);\r\nexport { MultiDiffEditorWidget };\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n/*\r\n * This module only exports 'compile' which compiles a JSON language definition\r\n * into a typed and checked ILexer definition.\r\n */\r\nimport * as monarchCommon from './monarchCommon.js';\r\n/*\r\n * Type helpers\r\n *\r\n * Note: this is just for sanity checks on the JSON description which is\r\n * helpful for the programmer. No checks are done anymore once the lexer is\r\n * already 'compiled and checked'.\r\n *\r\n */\r\nfunction isArrayOf(elemType, obj) {\r\n    if (!obj) {\r\n        return false;\r\n    }\r\n    if (!(Array.isArray(obj))) {\r\n        return false;\r\n    }\r\n    for (const el of obj) {\r\n        if (!(elemType(el))) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction bool(prop, defValue) {\r\n    if (typeof prop === 'boolean') {\r\n        return prop;\r\n    }\r\n    return defValue;\r\n}\r\nfunction string(prop, defValue) {\r\n    if (typeof (prop) === 'string') {\r\n        return prop;\r\n    }\r\n    return defValue;\r\n}\r\nfunction arrayToHash(array) {\r\n    const result = {};\r\n    for (const e of array) {\r\n        result[e] = true;\r\n    }\r\n    return result;\r\n}\r\nfunction createKeywordMatcher(arr, caseInsensitive = false) {\r\n    if (caseInsensitive) {\r\n        arr = arr.map(function (x) { return x.toLowerCase(); });\r\n    }\r\n    const hash = arrayToHash(arr);\r\n    if (caseInsensitive) {\r\n        return function (word) {\r\n            return hash[word.toLowerCase()] !== undefined && hash.hasOwnProperty(word.toLowerCase());\r\n        };\r\n    }\r\n    else {\r\n        return function (word) {\r\n            return hash[word] !== undefined && hash.hasOwnProperty(word);\r\n        };\r\n    }\r\n}\r\n// Lexer helpers\r\n/**\r\n * Compiles a regular expression string, adding the 'i' flag if 'ignoreCase' is set, and the 'u' flag if 'unicode' is set.\r\n * Also replaces @\\w+ or sequences with the content of the specified attribute\r\n * @\\w+ replacement can be avoided by escaping `@` signs with another `@` sign.\r\n * @example /@attr/ will be replaced with the value of lexer[attr]\r\n * @example /@@text/ will not be replaced and will become /@text/.\r\n */\r\nfunction compileRegExp(lexer, str) {\r\n    // @@ must be interpreted as a literal @, so we replace all occurences of @@ with a placeholder character\r\n    str = str.replace(/@@/g, `\\x01`);\r\n    let n = 0;\r\n    let hadExpansion;\r\n    do {\r\n        hadExpansion = false;\r\n        str = str.replace(/@(\\w+)/g, function (s, attr) {\r\n            hadExpansion = true;\r\n            let sub = '';\r\n            if (typeof (lexer[attr]) === 'string') {\r\n                sub = lexer[attr];\r\n            }\r\n            else if (lexer[attr] && lexer[attr] instanceof RegExp) {\r\n                sub = lexer[attr].source;\r\n            }\r\n            else {\r\n                if (lexer[attr] === undefined) {\r\n                    throw monarchCommon.createError(lexer, 'language definition does not contain attribute \\'' + attr + '\\', used at: ' + str);\r\n                }\r\n                else {\r\n                    throw monarchCommon.createError(lexer, 'attribute reference \\'' + attr + '\\' must be a string, used at: ' + str);\r\n                }\r\n            }\r\n            return (monarchCommon.empty(sub) ? '' : '(?:' + sub + ')');\r\n        });\r\n        n++;\r\n    } while (hadExpansion && n < 5);\r\n    // handle escaped @@\r\n    str = str.replace(/\\x01/g, '@');\r\n    const flags = (lexer.ignoreCase ? 'i' : '') + (lexer.unicode ? 'u' : '');\r\n    return new RegExp(str, flags);\r\n}\r\n/**\r\n * Compiles guard functions for case matches.\r\n * This compiles 'cases' attributes into efficient match functions.\r\n *\r\n */\r\nfunction selectScrutinee(id, matches, state, num) {\r\n    if (num < 0) {\r\n        return id;\r\n    }\r\n    if (num < matches.length) {\r\n        return matches[num];\r\n    }\r\n    if (num >= 100) {\r\n        num = num - 100;\r\n        const parts = state.split('.');\r\n        parts.unshift(state);\r\n        if (num < parts.length) {\r\n            return parts[num];\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction createGuard(lexer, ruleName, tkey, val) {\r\n    // get the scrutinee and pattern\r\n    let scrut = -1; // -1: $!, 0-99: $n, 100+n: $Sn\r\n    let oppat = tkey;\r\n    let matches = tkey.match(/^\\$(([sS]?)(\\d\\d?)|#)(.*)$/);\r\n    if (matches) {\r\n        if (matches[3]) { // if digits\r\n            scrut = parseInt(matches[3]);\r\n            if (matches[2]) {\r\n                scrut = scrut + 100; // if [sS] present\r\n            }\r\n        }\r\n        oppat = matches[4];\r\n    }\r\n    // get operator\r\n    let op = '~';\r\n    let pat = oppat;\r\n    if (!oppat || oppat.length === 0) {\r\n        op = '!=';\r\n        pat = '';\r\n    }\r\n    else if (/^\\w*$/.test(pat)) { // just a word\r\n        op = '==';\r\n    }\r\n    else {\r\n        matches = oppat.match(/^(@|!@|~|!~|==|!=)(.*)$/);\r\n        if (matches) {\r\n            op = matches[1];\r\n            pat = matches[2];\r\n        }\r\n    }\r\n    // set the tester function\r\n    let tester;\r\n    // special case a regexp that matches just words\r\n    if ((op === '~' || op === '!~') && /^(\\w|\\|)*$/.test(pat)) {\r\n        const inWords = createKeywordMatcher(pat.split('|'), lexer.ignoreCase);\r\n        tester = function (s) { return (op === '~' ? inWords(s) : !inWords(s)); };\r\n    }\r\n    else if (op === '@' || op === '!@') {\r\n        const words = lexer[pat];\r\n        if (!words) {\r\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' is not defined, in rule: ' + ruleName);\r\n        }\r\n        if (!(isArrayOf(function (elem) { return (typeof (elem) === 'string'); }, words))) {\r\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' must be an array of strings, in rule: ' + ruleName);\r\n        }\r\n        const inWords = createKeywordMatcher(words, lexer.ignoreCase);\r\n        tester = function (s) { return (op === '@' ? inWords(s) : !inWords(s)); };\r\n    }\r\n    else if (op === '~' || op === '!~') {\r\n        if (pat.indexOf('$') < 0) {\r\n            // precompile regular expression\r\n            const re = compileRegExp(lexer, '^' + pat + '$');\r\n            tester = function (s) { return (op === '~' ? re.test(s) : !re.test(s)); };\r\n        }\r\n        else {\r\n            tester = function (s, id, matches, state) {\r\n                const re = compileRegExp(lexer, '^' + monarchCommon.substituteMatches(lexer, pat, id, matches, state) + '$');\r\n                return re.test(s);\r\n            };\r\n        }\r\n    }\r\n    else { // if (op==='==' || op==='!=') {\r\n        if (pat.indexOf('$') < 0) {\r\n            const patx = monarchCommon.fixCase(lexer, pat);\r\n            tester = function (s) { return (op === '==' ? s === patx : s !== patx); };\r\n        }\r\n        else {\r\n            const patx = monarchCommon.fixCase(lexer, pat);\r\n            tester = function (s, id, matches, state, eos) {\r\n                const patexp = monarchCommon.substituteMatches(lexer, patx, id, matches, state);\r\n                return (op === '==' ? s === patexp : s !== patexp);\r\n            };\r\n        }\r\n    }\r\n    // return the branch object\r\n    if (scrut === -1) {\r\n        return {\r\n            name: tkey, value: val, test: function (id, matches, state, eos) {\r\n                return tester(id, id, matches, state, eos);\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            name: tkey, value: val, test: function (id, matches, state, eos) {\r\n                const scrutinee = selectScrutinee(id, matches, state, scrut);\r\n                return tester(!scrutinee ? '' : scrutinee, id, matches, state, eos);\r\n            }\r\n        };\r\n    }\r\n}\r\n/**\r\n * Compiles an action: i.e. optimize regular expressions and case matches\r\n * and do many sanity checks.\r\n *\r\n * This is called only during compilation but if the lexer definition\r\n * contains user functions as actions (which is usually not allowed), then this\r\n * may be called during lexing. It is important therefore to compile common cases efficiently\r\n */\r\nfunction compileAction(lexer, ruleName, action) {\r\n    if (!action) {\r\n        return { token: '' };\r\n    }\r\n    else if (typeof (action) === 'string') {\r\n        return action; // { token: action };\r\n    }\r\n    else if (action.token || action.token === '') {\r\n        if (typeof (action.token) !== 'string') {\r\n            throw monarchCommon.createError(lexer, 'a \\'token\\' attribute must be of type string, in rule: ' + ruleName);\r\n        }\r\n        else {\r\n            // only copy specific typed fields (only happens once during compile Lexer)\r\n            const newAction = { token: action.token };\r\n            if (action.token.indexOf('$') >= 0) {\r\n                newAction.tokenSubst = true;\r\n            }\r\n            if (typeof (action.bracket) === 'string') {\r\n                if (action.bracket === '@open') {\r\n                    newAction.bracket = 1 /* monarchCommon.MonarchBracket.Open */;\r\n                }\r\n                else if (action.bracket === '@close') {\r\n                    newAction.bracket = -1 /* monarchCommon.MonarchBracket.Close */;\r\n                }\r\n                else {\r\n                    throw monarchCommon.createError(lexer, 'a \\'bracket\\' attribute must be either \\'@open\\' or \\'@close\\', in rule: ' + ruleName);\r\n                }\r\n            }\r\n            if (action.next) {\r\n                if (typeof (action.next) !== 'string') {\r\n                    throw monarchCommon.createError(lexer, 'the next state must be a string value in rule: ' + ruleName);\r\n                }\r\n                else {\r\n                    let next = action.next;\r\n                    if (!/^(@pop|@push|@popall)$/.test(next)) {\r\n                        if (next[0] === '@') {\r\n                            next = next.substr(1); // peel off starting @ sign\r\n                        }\r\n                        if (next.indexOf('$') < 0) { // no dollar substitution, we can check if the state exists\r\n                            if (!monarchCommon.stateExists(lexer, monarchCommon.substituteMatches(lexer, next, '', [], ''))) {\r\n                                throw monarchCommon.createError(lexer, 'the next state \\'' + action.next + '\\' is not defined in rule: ' + ruleName);\r\n                            }\r\n                        }\r\n                    }\r\n                    newAction.next = next;\r\n                }\r\n            }\r\n            if (typeof (action.goBack) === 'number') {\r\n                newAction.goBack = action.goBack;\r\n            }\r\n            if (typeof (action.switchTo) === 'string') {\r\n                newAction.switchTo = action.switchTo;\r\n            }\r\n            if (typeof (action.log) === 'string') {\r\n                newAction.log = action.log;\r\n            }\r\n            if (typeof (action.nextEmbedded) === 'string') {\r\n                newAction.nextEmbedded = action.nextEmbedded;\r\n                lexer.usesEmbedded = true;\r\n            }\r\n            return newAction;\r\n        }\r\n    }\r\n    else if (Array.isArray(action)) {\r\n        const results = [];\r\n        for (let i = 0, len = action.length; i < len; i++) {\r\n            results[i] = compileAction(lexer, ruleName, action[i]);\r\n        }\r\n        return { group: results };\r\n    }\r\n    else if (action.cases) {\r\n        // build an array of test cases\r\n        const cases = [];\r\n        // for each case, push a test function and result value\r\n        for (const tkey in action.cases) {\r\n            if (action.cases.hasOwnProperty(tkey)) {\r\n                const val = compileAction(lexer, ruleName, action.cases[tkey]);\r\n                // what kind of case\r\n                if (tkey === '@default' || tkey === '@' || tkey === '') {\r\n                    cases.push({ test: undefined, value: val, name: tkey });\r\n                }\r\n                else if (tkey === '@eos') {\r\n                    cases.push({ test: function (id, matches, state, eos) { return eos; }, value: val, name: tkey });\r\n                }\r\n                else {\r\n                    cases.push(createGuard(lexer, ruleName, tkey, val)); // call separate function to avoid local variable capture\r\n                }\r\n            }\r\n        }\r\n        // create a matching function\r\n        const def = lexer.defaultToken;\r\n        return {\r\n            test: function (id, matches, state, eos) {\r\n                for (const _case of cases) {\r\n                    const didmatch = (!_case.test || _case.test(id, matches, state, eos));\r\n                    if (didmatch) {\r\n                        return _case.value;\r\n                    }\r\n                }\r\n                return def;\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        throw monarchCommon.createError(lexer, 'an action must be a string, an object with a \\'token\\' or \\'cases\\' attribute, or an array of actions; in rule: ' + ruleName);\r\n    }\r\n}\r\n/**\r\n * Helper class for creating matching rules\r\n */\r\nclass Rule {\r\n    constructor(name) {\r\n        this.regex = new RegExp('');\r\n        this.action = { token: '' };\r\n        this.matchOnlyAtLineStart = false;\r\n        this.name = '';\r\n        this.name = name;\r\n    }\r\n    setRegex(lexer, re) {\r\n        let sregex;\r\n        if (typeof (re) === 'string') {\r\n            sregex = re;\r\n        }\r\n        else if (re instanceof RegExp) {\r\n            sregex = re.source;\r\n        }\r\n        else {\r\n            throw monarchCommon.createError(lexer, 'rules must start with a match string or regular expression: ' + this.name);\r\n        }\r\n        this.matchOnlyAtLineStart = (sregex.length > 0 && sregex[0] === '^');\r\n        this.name = this.name + ': ' + sregex;\r\n        this.regex = compileRegExp(lexer, '^(?:' + (this.matchOnlyAtLineStart ? sregex.substr(1) : sregex) + ')');\r\n    }\r\n    setAction(lexer, act) {\r\n        this.action = compileAction(lexer, this.name, act);\r\n    }\r\n}\r\n/**\r\n * Compiles a json description function into json where all regular expressions,\r\n * case matches etc, are compiled and all include rules are expanded.\r\n * We also compile the bracket definitions, supply defaults, and do many sanity checks.\r\n * If the 'jsonStrict' parameter is 'false', we allow at certain locations\r\n * regular expression objects and functions that get called during lexing.\r\n * (Currently we have no samples that need this so perhaps we should always have\r\n * jsonStrict to true).\r\n */\r\nexport function compile(languageId, json) {\r\n    if (!json || typeof (json) !== 'object') {\r\n        throw new Error('Monarch: expecting a language definition object');\r\n    }\r\n    // Create our lexer\r\n    const lexer = {};\r\n    lexer.languageId = languageId;\r\n    lexer.includeLF = bool(json.includeLF, false);\r\n    lexer.noThrow = false; // raise exceptions during compilation\r\n    lexer.maxStack = 100;\r\n    // Set standard fields: be defensive about types\r\n    lexer.start = (typeof json.start === 'string' ? json.start : null);\r\n    lexer.ignoreCase = bool(json.ignoreCase, false);\r\n    lexer.unicode = bool(json.unicode, false);\r\n    lexer.tokenPostfix = string(json.tokenPostfix, '.' + lexer.languageId);\r\n    lexer.defaultToken = string(json.defaultToken, 'source');\r\n    lexer.usesEmbedded = false; // becomes true if we find a nextEmbedded action\r\n    // For calling compileAction later on\r\n    const lexerMin = json;\r\n    lexerMin.languageId = languageId;\r\n    lexerMin.includeLF = lexer.includeLF;\r\n    lexerMin.ignoreCase = lexer.ignoreCase;\r\n    lexerMin.unicode = lexer.unicode;\r\n    lexerMin.noThrow = lexer.noThrow;\r\n    lexerMin.usesEmbedded = lexer.usesEmbedded;\r\n    lexerMin.stateNames = json.tokenizer;\r\n    lexerMin.defaultToken = lexer.defaultToken;\r\n    // Compile an array of rules into newrules where RegExp objects are created.\r\n    function addRules(state, newrules, rules) {\r\n        for (const rule of rules) {\r\n            let include = rule.include;\r\n            if (include) {\r\n                if (typeof (include) !== 'string') {\r\n                    throw monarchCommon.createError(lexer, 'an \\'include\\' attribute must be a string at: ' + state);\r\n                }\r\n                if (include[0] === '@') {\r\n                    include = include.substr(1); // peel off starting @\r\n                }\r\n                if (!json.tokenizer[include]) {\r\n                    throw monarchCommon.createError(lexer, 'include target \\'' + include + '\\' is not defined at: ' + state);\r\n                }\r\n                addRules(state + '.' + include, newrules, json.tokenizer[include]);\r\n            }\r\n            else {\r\n                const newrule = new Rule(state);\r\n                // Set up new rule attributes\r\n                if (Array.isArray(rule) && rule.length >= 1 && rule.length <= 3) {\r\n                    newrule.setRegex(lexerMin, rule[0]);\r\n                    if (rule.length >= 3) {\r\n                        if (typeof (rule[1]) === 'string') {\r\n                            newrule.setAction(lexerMin, { token: rule[1], next: rule[2] });\r\n                        }\r\n                        else if (typeof (rule[1]) === 'object') {\r\n                            const rule1 = rule[1];\r\n                            rule1.next = rule[2];\r\n                            newrule.setAction(lexerMin, rule1);\r\n                        }\r\n                        else {\r\n                            throw monarchCommon.createError(lexer, 'a next state as the last element of a rule can only be given if the action is either an object or a string, at: ' + state);\r\n                        }\r\n                    }\r\n                    else {\r\n                        newrule.setAction(lexerMin, rule[1]);\r\n                    }\r\n                }\r\n                else {\r\n                    if (!rule.regex) {\r\n                        throw monarchCommon.createError(lexer, 'a rule must either be an array, or an object with a \\'regex\\' or \\'include\\' field at: ' + state);\r\n                    }\r\n                    if (rule.name) {\r\n                        if (typeof rule.name === 'string') {\r\n                            newrule.name = rule.name;\r\n                        }\r\n                    }\r\n                    if (rule.matchOnlyAtStart) {\r\n                        newrule.matchOnlyAtLineStart = bool(rule.matchOnlyAtLineStart, false);\r\n                    }\r\n                    newrule.setRegex(lexerMin, rule.regex);\r\n                    newrule.setAction(lexerMin, rule.action);\r\n                }\r\n                newrules.push(newrule);\r\n            }\r\n        }\r\n    }\r\n    // compile the tokenizer rules\r\n    if (!json.tokenizer || typeof (json.tokenizer) !== 'object') {\r\n        throw monarchCommon.createError(lexer, 'a language definition must define the \\'tokenizer\\' attribute as an object');\r\n    }\r\n    lexer.tokenizer = [];\r\n    for (const key in json.tokenizer) {\r\n        if (json.tokenizer.hasOwnProperty(key)) {\r\n            if (!lexer.start) {\r\n                lexer.start = key;\r\n            }\r\n            const rules = json.tokenizer[key];\r\n            lexer.tokenizer[key] = new Array();\r\n            addRules('tokenizer.' + key, lexer.tokenizer[key], rules);\r\n        }\r\n    }\r\n    lexer.usesEmbedded = lexerMin.usesEmbedded; // can be set during compileAction\r\n    // Set simple brackets\r\n    if (json.brackets) {\r\n        if (!(Array.isArray(json.brackets))) {\r\n            throw monarchCommon.createError(lexer, 'the \\'brackets\\' attribute must be defined as an array');\r\n        }\r\n    }\r\n    else {\r\n        json.brackets = [\r\n            { open: '{', close: '}', token: 'delimiter.curly' },\r\n            { open: '[', close: ']', token: 'delimiter.square' },\r\n            { open: '(', close: ')', token: 'delimiter.parenthesis' },\r\n            { open: '<', close: '>', token: 'delimiter.angle' }\r\n        ];\r\n    }\r\n    const brackets = [];\r\n    for (const el of json.brackets) {\r\n        let desc = el;\r\n        if (desc && Array.isArray(desc) && desc.length === 3) {\r\n            desc = { token: desc[2], open: desc[0], close: desc[1] };\r\n        }\r\n        if (desc.open === desc.close) {\r\n            throw monarchCommon.createError(lexer, 'open and close brackets in a \\'brackets\\' attribute must be different: ' + desc.open +\r\n                '\\n hint: use the \\'bracket\\' attribute if matching on equal brackets is required.');\r\n        }\r\n        if (typeof desc.open === 'string' && typeof desc.token === 'string' && typeof desc.close === 'string') {\r\n            brackets.push({\r\n                token: desc.token + lexer.tokenPostfix,\r\n                open: monarchCommon.fixCase(lexer, desc.open),\r\n                close: monarchCommon.fixCase(lexer, desc.close)\r\n            });\r\n        }\r\n        else {\r\n            throw monarchCommon.createError(lexer, 'every element in the \\'brackets\\' array must be a \\'{open,close,token}\\' object or array');\r\n        }\r\n    }\r\n    lexer.brackets = brackets;\r\n    // Disable throw so the syntax highlighter goes, no matter what\r\n    lexer.noThrow = true;\r\n    return lexer;\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Color } from '../../../base/common/color.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport * as languages from '../../common/languages.js';\r\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\r\nimport { ModesRegistry } from '../../common/languages/modesRegistry.js';\r\nimport { ILanguageService } from '../../common/languages/language.js';\r\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\r\nimport { StandaloneServices } from './standaloneServices.js';\r\nimport { compile } from '../common/monarch/monarchCompile.js';\r\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\r\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\r\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\n/**\r\n * Register information about a new language.\r\n */\r\nexport function register(language) {\r\n    // Intentionally using the `ModesRegistry` here to avoid\r\n    // instantiating services too quickly in the standalone editor.\r\n    ModesRegistry.registerLanguage(language);\r\n}\r\n/**\r\n * Get the information of all the registered languages.\r\n */\r\nexport function getLanguages() {\r\n    let result = [];\r\n    result = result.concat(ModesRegistry.getLanguages());\r\n    return result;\r\n}\r\nexport function getEncodedLanguageId(languageId) {\r\n    const languageService = StandaloneServices.get(ILanguageService);\r\n    return languageService.languageIdCodec.encodeLanguageId(languageId);\r\n}\r\n/**\r\n * An event emitted when a language is associated for the first time with a text model.\r\n * @event\r\n */\r\nexport function onLanguage(languageId, callback) {\r\n    return StandaloneServices.withServices(() => {\r\n        const languageService = StandaloneServices.get(ILanguageService);\r\n        const disposable = languageService.onDidRequestRichLanguageFeatures((encounteredLanguageId) => {\r\n            if (encounteredLanguageId === languageId) {\r\n                // stop listening\r\n                disposable.dispose();\r\n                // invoke actual listener\r\n                callback();\r\n            }\r\n        });\r\n        return disposable;\r\n    });\r\n}\r\n/**\r\n * An event emitted when a language is associated for the first time with a text model or\r\n * when a language is encountered during the tokenization of another language.\r\n * @event\r\n */\r\nexport function onLanguageEncountered(languageId, callback) {\r\n    return StandaloneServices.withServices(() => {\r\n        const languageService = StandaloneServices.get(ILanguageService);\r\n        const disposable = languageService.onDidRequestBasicLanguageFeatures((encounteredLanguageId) => {\r\n            if (encounteredLanguageId === languageId) {\r\n                // stop listening\r\n                disposable.dispose();\r\n                // invoke actual listener\r\n                callback();\r\n            }\r\n        });\r\n        return disposable;\r\n    });\r\n}\r\n/**\r\n * Set the editing configuration for a language.\r\n */\r\nexport function setLanguageConfiguration(languageId, configuration) {\r\n    const languageService = StandaloneServices.get(ILanguageService);\r\n    if (!languageService.isRegisteredLanguageId(languageId)) {\r\n        throw new Error(`Cannot set configuration for unknown language ${languageId}`);\r\n    }\r\n    const languageConfigurationService = StandaloneServices.get(ILanguageConfigurationService);\r\n    return languageConfigurationService.register(languageId, configuration, 100);\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport class EncodedTokenizationSupportAdapter {\r\n    constructor(languageId, actual) {\r\n        this._languageId = languageId;\r\n        this._actual = actual;\r\n    }\r\n    dispose() {\r\n        // NOOP\r\n    }\r\n    getInitialState() {\r\n        return this._actual.getInitialState();\r\n    }\r\n    tokenize(line, hasEOL, state) {\r\n        if (typeof this._actual.tokenize === 'function') {\r\n            return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\r\n        }\r\n        throw new Error('Not supported!');\r\n    }\r\n    tokenizeEncoded(line, hasEOL, state) {\r\n        const result = this._actual.tokenizeEncoded(line, state);\r\n        return new languages.EncodedTokenizationResult(result.tokens, result.endState);\r\n    }\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport class TokenizationSupportAdapter {\r\n    constructor(_languageId, _actual, _languageService, _standaloneThemeService) {\r\n        this._languageId = _languageId;\r\n        this._actual = _actual;\r\n        this._languageService = _languageService;\r\n        this._standaloneThemeService = _standaloneThemeService;\r\n    }\r\n    dispose() {\r\n        // NOOP\r\n    }\r\n    getInitialState() {\r\n        return this._actual.getInitialState();\r\n    }\r\n    static _toClassicTokens(tokens, language) {\r\n        const result = [];\r\n        let previousStartIndex = 0;\r\n        for (let i = 0, len = tokens.length; i < len; i++) {\r\n            const t = tokens[i];\r\n            let startIndex = t.startIndex;\r\n            // Prevent issues stemming from a buggy external tokenizer.\r\n            if (i === 0) {\r\n                // Force first token to start at first index!\r\n                startIndex = 0;\r\n            }\r\n            else if (startIndex < previousStartIndex) {\r\n                // Force tokens to be after one another!\r\n                startIndex = previousStartIndex;\r\n            }\r\n            result[i] = new languages.Token(startIndex, t.scopes, language);\r\n            previousStartIndex = startIndex;\r\n        }\r\n        return result;\r\n    }\r\n    static adaptTokenize(language, actual, line, state) {\r\n        const actualResult = actual.tokenize(line, state);\r\n        const tokens = TokenizationSupportAdapter._toClassicTokens(actualResult.tokens, language);\r\n        let endState;\r\n        // try to save an object if possible\r\n        if (actualResult.endState.equals(state)) {\r\n            endState = state;\r\n        }\r\n        else {\r\n            endState = actualResult.endState;\r\n        }\r\n        return new languages.TokenizationResult(tokens, endState);\r\n    }\r\n    tokenize(line, hasEOL, state) {\r\n        return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\r\n    }\r\n    _toBinaryTokens(languageIdCodec, tokens) {\r\n        const languageId = languageIdCodec.encodeLanguageId(this._languageId);\r\n        const tokenTheme = this._standaloneThemeService.getColorTheme().tokenTheme;\r\n        const result = [];\r\n        let resultLen = 0;\r\n        let previousStartIndex = 0;\r\n        for (let i = 0, len = tokens.length; i < len; i++) {\r\n            const t = tokens[i];\r\n            const metadata = tokenTheme.match(languageId, t.scopes) | 1024 /* MetadataConsts.BALANCED_BRACKETS_MASK */;\r\n            if (resultLen > 0 && result[resultLen - 1] === metadata) {\r\n                // same metadata\r\n                continue;\r\n            }\r\n            let startIndex = t.startIndex;\r\n            // Prevent issues stemming from a buggy external tokenizer.\r\n            if (i === 0) {\r\n                // Force first token to start at first index!\r\n                startIndex = 0;\r\n            }\r\n            else if (startIndex < previousStartIndex) {\r\n                // Force tokens to be after one another!\r\n                startIndex = previousStartIndex;\r\n            }\r\n            result[resultLen++] = startIndex;\r\n            result[resultLen++] = metadata;\r\n            previousStartIndex = startIndex;\r\n        }\r\n        const actualResult = new Uint32Array(resultLen);\r\n        for (let i = 0; i < resultLen; i++) {\r\n            actualResult[i] = result[i];\r\n        }\r\n        return actualResult;\r\n    }\r\n    tokenizeEncoded(line, hasEOL, state) {\r\n        const actualResult = this._actual.tokenize(line, state);\r\n        const tokens = this._toBinaryTokens(this._languageService.languageIdCodec, actualResult.tokens);\r\n        let endState;\r\n        // try to save an object if possible\r\n        if (actualResult.endState.equals(state)) {\r\n            endState = state;\r\n        }\r\n        else {\r\n            endState = actualResult.endState;\r\n        }\r\n        return new languages.EncodedTokenizationResult(tokens, endState);\r\n    }\r\n}\r\nfunction isATokensProvider(provider) {\r\n    return (typeof provider.getInitialState === 'function');\r\n}\r\nfunction isEncodedTokensProvider(provider) {\r\n    return 'tokenizeEncoded' in provider;\r\n}\r\nfunction isThenable(obj) {\r\n    return obj && typeof obj.then === 'function';\r\n}\r\n/**\r\n * Change the color map that is used for token colors.\r\n * Supported formats (hex): #RRGGBB, $RRGGBBAA, #RGB, #RGBA\r\n */\r\nexport function setColorMap(colorMap) {\r\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\r\n    if (colorMap) {\r\n        const result = [null];\r\n        for (let i = 1, len = colorMap.length; i < len; i++) {\r\n            result[i] = Color.fromHex(colorMap[i]);\r\n        }\r\n        standaloneThemeService.setColorMapOverride(result);\r\n    }\r\n    else {\r\n        standaloneThemeService.setColorMapOverride(null);\r\n    }\r\n}\r\n/**\r\n * @internal\r\n */\r\nfunction createTokenizationSupportAdapter(languageId, provider) {\r\n    if (isEncodedTokensProvider(provider)) {\r\n        return new EncodedTokenizationSupportAdapter(languageId, provider);\r\n    }\r\n    else {\r\n        return new TokenizationSupportAdapter(languageId, provider, StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService));\r\n    }\r\n}\r\n/**\r\n * Register a tokens provider factory for a language. This tokenizer will be exclusive with a tokenizer\r\n * set using `setTokensProvider` or one created using `setMonarchTokensProvider`, but will work together\r\n * with a tokens provider set using `registerDocumentSemanticTokensProvider` or `registerDocumentRangeSemanticTokensProvider`.\r\n */\r\nexport function registerTokensProviderFactory(languageId, factory) {\r\n    const adaptedFactory = new languages.LazyTokenizationSupport(async () => {\r\n        const result = await Promise.resolve(factory.create());\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        if (isATokensProvider(result)) {\r\n            return createTokenizationSupportAdapter(languageId, result);\r\n        }\r\n        return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, result), StandaloneServices.get(IConfigurationService));\r\n    });\r\n    return languages.TokenizationRegistry.registerFactory(languageId, adaptedFactory);\r\n}\r\n/**\r\n * Set the tokens provider for a language (manual implementation). This tokenizer will be exclusive\r\n * with a tokenizer created using `setMonarchTokensProvider`, or with `registerTokensProviderFactory`,\r\n * but will work together with a tokens provider set using `registerDocumentSemanticTokensProvider`\r\n * or `registerDocumentRangeSemanticTokensProvider`.\r\n */\r\nexport function setTokensProvider(languageId, provider) {\r\n    const languageService = StandaloneServices.get(ILanguageService);\r\n    if (!languageService.isRegisteredLanguageId(languageId)) {\r\n        throw new Error(`Cannot set tokens provider for unknown language ${languageId}`);\r\n    }\r\n    if (isThenable(provider)) {\r\n        return registerTokensProviderFactory(languageId, { create: () => provider });\r\n    }\r\n    return languages.TokenizationRegistry.register(languageId, createTokenizationSupportAdapter(languageId, provider));\r\n}\r\n/**\r\n * Set the tokens provider for a language (monarch implementation). This tokenizer will be exclusive\r\n * with a tokenizer set using `setTokensProvider`, or with `registerTokensProviderFactory`, but will\r\n * work together with a tokens provider set using `registerDocumentSemanticTokensProvider` or\r\n * `registerDocumentRangeSemanticTokensProvider`.\r\n */\r\nexport function setMonarchTokensProvider(languageId, languageDef) {\r\n    const create = (languageDef) => {\r\n        return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, languageDef), StandaloneServices.get(IConfigurationService));\r\n    };\r\n    if (isThenable(languageDef)) {\r\n        return registerTokensProviderFactory(languageId, { create: () => languageDef });\r\n    }\r\n    return languages.TokenizationRegistry.register(languageId, create(languageDef));\r\n}\r\n/**\r\n * Register a reference provider (used by e.g. reference search).\r\n */\r\nexport function registerReferenceProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.referenceProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a rename provider (used by e.g. rename symbol).\r\n */\r\nexport function registerRenameProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.renameProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a signature help provider (used by e.g. parameter hints).\r\n */\r\nexport function registerSignatureHelpProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.signatureHelpProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a hover provider (used by e.g. editor hover).\r\n */\r\nexport function registerHoverProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.hoverProvider.register(languageSelector, {\r\n        provideHover: (model, position, token) => {\r\n            const word = model.getWordAtPosition(position);\r\n            return Promise.resolve(provider.provideHover(model, position, token)).then((value) => {\r\n                if (!value) {\r\n                    return undefined;\r\n                }\r\n                if (!value.range && word) {\r\n                    value.range = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\r\n                }\r\n                if (!value.range) {\r\n                    value.range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n                }\r\n                return value;\r\n            });\r\n        }\r\n    });\r\n}\r\n/**\r\n * Register a document symbol provider (used by e.g. outline).\r\n */\r\nexport function registerDocumentSymbolProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.documentSymbolProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a document highlight provider (used by e.g. highlight occurrences).\r\n */\r\nexport function registerDocumentHighlightProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.documentHighlightProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register an linked editing range provider.\r\n */\r\nexport function registerLinkedEditingRangeProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.linkedEditingRangeProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a definition provider (used by e.g. go to definition).\r\n */\r\nexport function registerDefinitionProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.definitionProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a implementation provider (used by e.g. go to implementation).\r\n */\r\nexport function registerImplementationProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.implementationProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a type definition provider (used by e.g. go to type definition).\r\n */\r\nexport function registerTypeDefinitionProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.typeDefinitionProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a code lens provider (used by e.g. inline code lenses).\r\n */\r\nexport function registerCodeLensProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.codeLensProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a code action provider (used by e.g. quick fix).\r\n */\r\nexport function registerCodeActionProvider(languageSelector, provider, metadata) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.codeActionProvider.register(languageSelector, {\r\n        providedCodeActionKinds: metadata === null || metadata === void 0 ? void 0 : metadata.providedCodeActionKinds,\r\n        documentation: metadata === null || metadata === void 0 ? void 0 : metadata.documentation,\r\n        provideCodeActions: (model, range, context, token) => {\r\n            const markerService = StandaloneServices.get(IMarkerService);\r\n            const markers = markerService.read({ resource: model.uri }).filter(m => {\r\n                return Range.areIntersectingOrTouching(m, range);\r\n            });\r\n            return provider.provideCodeActions(model, range, { markers, only: context.only, trigger: context.trigger }, token);\r\n        },\r\n        resolveCodeAction: provider.resolveCodeAction\r\n    });\r\n}\r\n/**\r\n * Register a formatter that can handle only entire models.\r\n */\r\nexport function registerDocumentFormattingEditProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.documentFormattingEditProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a formatter that can handle a range inside a model.\r\n */\r\nexport function registerDocumentRangeFormattingEditProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.documentRangeFormattingEditProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a formatter than can do formatting as the user types.\r\n */\r\nexport function registerOnTypeFormattingEditProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.onTypeFormattingEditProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a link provider that can find links in text.\r\n */\r\nexport function registerLinkProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.linkProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a completion item provider (use by e.g. suggestions).\r\n */\r\nexport function registerCompletionItemProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.completionProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a document color provider (used by Color Picker, Color Decorator).\r\n */\r\nexport function registerColorProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.colorProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a folding range provider\r\n */\r\nexport function registerFoldingRangeProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.foldingRangeProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a declaration provider\r\n */\r\nexport function registerDeclarationProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.declarationProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a selection range provider\r\n */\r\nexport function registerSelectionRangeProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.selectionRangeProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a document semantic tokens provider. A semantic tokens provider will complement and enhance a\r\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\r\n * or `setTokensProvider`.\r\n *\r\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\r\n */\r\nexport function registerDocumentSemanticTokensProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.documentSemanticTokensProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register a document range semantic tokens provider. A semantic tokens provider will complement and enhance a\r\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\r\n * or `setTokensProvider`.\r\n *\r\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\r\n */\r\nexport function registerDocumentRangeSemanticTokensProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.documentRangeSemanticTokensProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register an inline completions provider.\r\n */\r\nexport function registerInlineCompletionsProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.inlineCompletionsProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * Register an inlay hints provider.\r\n */\r\nexport function registerInlayHintsProvider(languageSelector, provider) {\r\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\r\n    return languageFeaturesService.inlayHintsProvider.register(languageSelector, provider);\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function createMonacoLanguagesAPI() {\r\n    return {\r\n        register: register,\r\n        getLanguages: getLanguages,\r\n        onLanguage: onLanguage,\r\n        onLanguageEncountered: onLanguageEncountered,\r\n        getEncodedLanguageId: getEncodedLanguageId,\r\n        // provider methods\r\n        setLanguageConfiguration: setLanguageConfiguration,\r\n        setColorMap: setColorMap,\r\n        registerTokensProviderFactory: registerTokensProviderFactory,\r\n        setTokensProvider: setTokensProvider,\r\n        setMonarchTokensProvider: setMonarchTokensProvider,\r\n        registerReferenceProvider: registerReferenceProvider,\r\n        registerRenameProvider: registerRenameProvider,\r\n        registerCompletionItemProvider: registerCompletionItemProvider,\r\n        registerSignatureHelpProvider: registerSignatureHelpProvider,\r\n        registerHoverProvider: registerHoverProvider,\r\n        registerDocumentSymbolProvider: registerDocumentSymbolProvider,\r\n        registerDocumentHighlightProvider: registerDocumentHighlightProvider,\r\n        registerLinkedEditingRangeProvider: registerLinkedEditingRangeProvider,\r\n        registerDefinitionProvider: registerDefinitionProvider,\r\n        registerImplementationProvider: registerImplementationProvider,\r\n        registerTypeDefinitionProvider: registerTypeDefinitionProvider,\r\n        registerCodeLensProvider: registerCodeLensProvider,\r\n        registerCodeActionProvider: registerCodeActionProvider,\r\n        registerDocumentFormattingEditProvider: registerDocumentFormattingEditProvider,\r\n        registerDocumentRangeFormattingEditProvider: registerDocumentRangeFormattingEditProvider,\r\n        registerOnTypeFormattingEditProvider: registerOnTypeFormattingEditProvider,\r\n        registerLinkProvider: registerLinkProvider,\r\n        registerColorProvider: registerColorProvider,\r\n        registerFoldingRangeProvider: registerFoldingRangeProvider,\r\n        registerDeclarationProvider: registerDeclarationProvider,\r\n        registerSelectionRangeProvider: registerSelectionRangeProvider,\r\n        registerDocumentSemanticTokensProvider: registerDocumentSemanticTokensProvider,\r\n        registerDocumentRangeSemanticTokensProvider: registerDocumentRangeSemanticTokensProvider,\r\n        registerInlineCompletionsProvider: registerInlineCompletionsProvider,\r\n        registerInlayHintsProvider: registerInlayHintsProvider,\r\n        // enums\r\n        DocumentHighlightKind: standaloneEnums.DocumentHighlightKind,\r\n        CompletionItemKind: standaloneEnums.CompletionItemKind,\r\n        CompletionItemTag: standaloneEnums.CompletionItemTag,\r\n        CompletionItemInsertTextRule: standaloneEnums.CompletionItemInsertTextRule,\r\n        SymbolKind: standaloneEnums.SymbolKind,\r\n        SymbolTag: standaloneEnums.SymbolTag,\r\n        IndentAction: standaloneEnums.IndentAction,\r\n        CompletionTriggerKind: standaloneEnums.CompletionTriggerKind,\r\n        SignatureHelpTriggerKind: standaloneEnums.SignatureHelpTriggerKind,\r\n        InlayHintKind: standaloneEnums.InlayHintKind,\r\n        InlineCompletionTriggerKind: standaloneEnums.InlineCompletionTriggerKind,\r\n        CodeActionTriggerType: standaloneEnums.CodeActionTriggerType,\r\n        // classes\r\n        FoldingRangeKind: languages.FoldingRangeKind,\r\n        SelectedSuggestionInfo: languages.SelectedSuggestionInfo,\r\n    };\r\n}\r\n", "/**\r\n * **!Do not construct directly!**\r\n *\r\n * **!Only static methods because it gets serialized!**\r\n *\r\n * This represents the \"canonical\" version for an extension identifier. Extension ids\r\n * have to be case-insensitive (due to the marketplace), but we must ensure case\r\n * preservation because the extension API is already public at this time.\r\n *\r\n * For example, given an extension with the publisher `\"Hello\"` and the name `\"World\"`,\r\n * its canonical extension identifier is `\"Hello.World\"`. This extension could be\r\n * referenced in some other extension's dependencies using the string `\"hello.world\"`.\r\n *\r\n * To make matters more complicated, an extension can optionally have an UUID. When two\r\n * extensions have the same UUID, they are considered equal even if their identifier is different.\r\n */\r\nexport class ExtensionIdentifier {\r\n    constructor(value) {\r\n        this.value = value;\r\n        this._lower = value.toLowerCase();\r\n    }\r\n    /**\r\n     * Gives the value by which to index (for equality).\r\n     */\r\n    static toKey(id) {\r\n        if (typeof id === 'string') {\r\n            return id.toLowerCase();\r\n        }\r\n        return id._lower;\r\n    }\r\n}\r\nexport class ExtensionIdentifierSet {\r\n    constructor(iterable) {\r\n        this._set = new Set();\r\n        if (iterable) {\r\n            for (const value of iterable) {\r\n                this.add(value);\r\n            }\r\n        }\r\n    }\r\n    add(id) {\r\n        this._set.add(ExtensionIdentifier.toKey(id));\r\n    }\r\n    has(id) {\r\n        return this._set.has(ExtensionIdentifier.toKey(id));\r\n    }\r\n}\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { asArray, isNonEmptyArray } from '../../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\r\nimport { Iterable } from '../../../../base/common/iterator.js';\r\nimport { LinkedList } from '../../../../base/common/linkedList.js';\r\nimport { assertType } from '../../../../base/common/types.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { EditorStateCancellationTokenSource, TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\r\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Selection } from '../../../common/core/selection.js';\r\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { FormattingEdit } from './formattingEdit.js';\r\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\r\nimport { ExtensionIdentifierSet } from '../../../../platform/extensions/common/extensions.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\r\nimport { ILogService } from '../../../../platform/log/common/log.js';\r\nimport { IAccessibleNotificationService } from '../../../../platform/accessibility/common/accessibility.js';\r\nexport function getRealAndSyntheticDocumentFormattersOrdered(documentFormattingEditProvider, documentRangeFormattingEditProvider, model) {\r\n    const result = [];\r\n    const seen = new ExtensionIdentifierSet();\r\n    // (1) add all document formatter\r\n    const docFormatter = documentFormattingEditProvider.ordered(model);\r\n    for (const formatter of docFormatter) {\r\n        result.push(formatter);\r\n        if (formatter.extensionId) {\r\n            seen.add(formatter.extensionId);\r\n        }\r\n    }\r\n    // (2) add all range formatter as document formatter (unless the same extension already did that)\r\n    const rangeFormatter = documentRangeFormattingEditProvider.ordered(model);\r\n    for (const formatter of rangeFormatter) {\r\n        if (formatter.extensionId) {\r\n            if (seen.has(formatter.extensionId)) {\r\n                continue;\r\n            }\r\n            seen.add(formatter.extensionId);\r\n        }\r\n        result.push({\r\n            displayName: formatter.displayName,\r\n            extensionId: formatter.extensionId,\r\n            provideDocumentFormattingEdits(model, options, token) {\r\n                return formatter.provideDocumentRangeFormattingEdits(model, model.getFullModelRange(), options, token);\r\n            }\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexport class FormattingConflicts {\r\n    static setFormatterSelector(selector) {\r\n        const remove = FormattingConflicts._selectors.unshift(selector);\r\n        return { dispose: remove };\r\n    }\r\n    static async select(formatter, document, mode) {\r\n        if (formatter.length === 0) {\r\n            return undefined;\r\n        }\r\n        const selector = Iterable.first(FormattingConflicts._selectors);\r\n        if (selector) {\r\n            return await selector(formatter, document, mode);\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nFormattingConflicts._selectors = new LinkedList();\r\nexport async function formatDocumentRangesWithSelectedProvider(accessor, editorOrModel, rangeOrRanges, mode, progress, token, userGesture) {\r\n    const instaService = accessor.get(IInstantiationService);\r\n    const { documentRangeFormattingEditProvider: documentRangeFormattingEditProviderRegistry } = accessor.get(ILanguageFeaturesService);\r\n    const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\r\n    const provider = documentRangeFormattingEditProviderRegistry.ordered(model);\r\n    const selected = await FormattingConflicts.select(provider, model, mode);\r\n    if (selected) {\r\n        progress.report(selected);\r\n        await instaService.invokeFunction(formatDocumentRangesWithProvider, selected, editorOrModel, rangeOrRanges, token, userGesture);\r\n    }\r\n}\r\nexport async function formatDocumentRangesWithProvider(accessor, provider, editorOrModel, rangeOrRanges, token, userGesture) {\r\n    var _a, _b;\r\n    const workerService = accessor.get(IEditorWorkerService);\r\n    const logService = accessor.get(ILogService);\r\n    const accessibleNotificationService = accessor.get(IAccessibleNotificationService);\r\n    let model;\r\n    let cts;\r\n    if (isCodeEditor(editorOrModel)) {\r\n        model = editorOrModel.getModel();\r\n        cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\r\n    }\r\n    else {\r\n        model = editorOrModel;\r\n        cts = new TextModelCancellationTokenSource(editorOrModel, token);\r\n    }\r\n    // make sure that ranges don't overlap nor touch each other\r\n    const ranges = [];\r\n    let len = 0;\r\n    for (const range of asArray(rangeOrRanges).sort(Range.compareRangesUsingStarts)) {\r\n        if (len > 0 && Range.areIntersectingOrTouching(ranges[len - 1], range)) {\r\n            ranges[len - 1] = Range.fromPositions(ranges[len - 1].getStartPosition(), range.getEndPosition());\r\n        }\r\n        else {\r\n            len = ranges.push(range);\r\n        }\r\n    }\r\n    const computeEdits = async (range) => {\r\n        var _a, _b;\r\n        logService.trace(`[format][provideDocumentRangeFormattingEdits] (request)`, (_a = provider.extensionId) === null || _a === void 0 ? void 0 : _a.value, range);\r\n        const result = (await provider.provideDocumentRangeFormattingEdits(model, range, model.getFormattingOptions(), cts.token)) || [];\r\n        logService.trace(`[format][provideDocumentRangeFormattingEdits] (response)`, (_b = provider.extensionId) === null || _b === void 0 ? void 0 : _b.value, result);\r\n        return result;\r\n    };\r\n    const hasIntersectingEdit = (a, b) => {\r\n        if (!a.length || !b.length) {\r\n            return false;\r\n        }\r\n        // quick exit if the list of ranges are completely unrelated [O(n)]\r\n        const mergedA = a.reduce((acc, val) => { return Range.plusRange(acc, val.range); }, a[0].range);\r\n        if (!b.some(x => { return Range.intersectRanges(mergedA, x.range); })) {\r\n            return false;\r\n        }\r\n        // fallback to a complete check [O(n^2)]\r\n        for (const edit of a) {\r\n            for (const otherEdit of b) {\r\n                if (Range.intersectRanges(edit.range, otherEdit.range)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    const allEdits = [];\r\n    const rawEditsList = [];\r\n    try {\r\n        if (typeof provider.provideDocumentRangesFormattingEdits === 'function') {\r\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (request)`, (_a = provider.extensionId) === null || _a === void 0 ? void 0 : _a.value, ranges);\r\n            const result = (await provider.provideDocumentRangesFormattingEdits(model, ranges, model.getFormattingOptions(), cts.token)) || [];\r\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (response)`, (_b = provider.extensionId) === null || _b === void 0 ? void 0 : _b.value, result);\r\n            rawEditsList.push(result);\r\n        }\r\n        else {\r\n            for (const range of ranges) {\r\n                if (cts.token.isCancellationRequested) {\r\n                    return true;\r\n                }\r\n                rawEditsList.push(await computeEdits(range));\r\n            }\r\n            for (let i = 0; i < ranges.length; ++i) {\r\n                for (let j = i + 1; j < ranges.length; ++j) {\r\n                    if (cts.token.isCancellationRequested) {\r\n                        return true;\r\n                    }\r\n                    if (hasIntersectingEdit(rawEditsList[i], rawEditsList[j])) {\r\n                        // Merge ranges i and j into a single range, recompute the associated edits\r\n                        const mergedRange = Range.plusRange(ranges[i], ranges[j]);\r\n                        const edits = await computeEdits(mergedRange);\r\n                        ranges.splice(j, 1);\r\n                        ranges.splice(i, 1);\r\n                        ranges.push(mergedRange);\r\n                        rawEditsList.splice(j, 1);\r\n                        rawEditsList.splice(i, 1);\r\n                        rawEditsList.push(edits);\r\n                        // Restart scanning\r\n                        i = 0;\r\n                        j = 0;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (const rawEdits of rawEditsList) {\r\n            if (cts.token.isCancellationRequested) {\r\n                return true;\r\n            }\r\n            const minimalEdits = await workerService.computeMoreMinimalEdits(model.uri, rawEdits);\r\n            if (minimalEdits) {\r\n                allEdits.push(...minimalEdits);\r\n            }\r\n        }\r\n    }\r\n    finally {\r\n        cts.dispose();\r\n    }\r\n    if (allEdits.length === 0) {\r\n        return false;\r\n    }\r\n    if (isCodeEditor(editorOrModel)) {\r\n        // use editor to apply edits\r\n        FormattingEdit.execute(editorOrModel, allEdits, true);\r\n        editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\r\n    }\r\n    else {\r\n        // use model to apply edits\r\n        const [{ range }] = allEdits;\r\n        const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\r\n        model.pushEditOperations([initialSelection], allEdits.map(edit => {\r\n            return {\r\n                text: edit.text,\r\n                range: Range.lift(edit.range),\r\n                forceMoveMarkers: true\r\n            };\r\n        }), undoEdits => {\r\n            for (const { range } of undoEdits) {\r\n                if (Range.areIntersectingOrTouching(range, initialSelection)) {\r\n                    return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\r\n                }\r\n            }\r\n            return null;\r\n        });\r\n    }\r\n    accessibleNotificationService.notify(\"format\" /* AccessibleNotificationEvent.Format */, userGesture);\r\n    return true;\r\n}\r\nexport async function formatDocumentWithSelectedProvider(accessor, editorOrModel, mode, progress, token, userGesture) {\r\n    const instaService = accessor.get(IInstantiationService);\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\r\n    const provider = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\r\n    const selected = await FormattingConflicts.select(provider, model, mode);\r\n    if (selected) {\r\n        progress.report(selected);\r\n        await instaService.invokeFunction(formatDocumentWithProvider, selected, editorOrModel, mode, token, userGesture);\r\n    }\r\n}\r\nexport async function formatDocumentWithProvider(accessor, provider, editorOrModel, mode, token, userGesture) {\r\n    const workerService = accessor.get(IEditorWorkerService);\r\n    const accessibleNotificationService = accessor.get(IAccessibleNotificationService);\r\n    let model;\r\n    let cts;\r\n    if (isCodeEditor(editorOrModel)) {\r\n        model = editorOrModel.getModel();\r\n        cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\r\n    }\r\n    else {\r\n        model = editorOrModel;\r\n        cts = new TextModelCancellationTokenSource(editorOrModel, token);\r\n    }\r\n    let edits;\r\n    try {\r\n        const rawEdits = await provider.provideDocumentFormattingEdits(model, model.getFormattingOptions(), cts.token);\r\n        edits = await workerService.computeMoreMinimalEdits(model.uri, rawEdits);\r\n        if (cts.token.isCancellationRequested) {\r\n            return true;\r\n        }\r\n    }\r\n    finally {\r\n        cts.dispose();\r\n    }\r\n    if (!edits || edits.length === 0) {\r\n        return false;\r\n    }\r\n    if (isCodeEditor(editorOrModel)) {\r\n        // use editor to apply edits\r\n        FormattingEdit.execute(editorOrModel, edits, mode !== 2 /* FormattingMode.Silent */);\r\n        if (mode !== 2 /* FormattingMode.Silent */) {\r\n            editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\r\n        }\r\n    }\r\n    else {\r\n        // use model to apply edits\r\n        const [{ range }] = edits;\r\n        const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\r\n        model.pushEditOperations([initialSelection], edits.map(edit => {\r\n            return {\r\n                text: edit.text,\r\n                range: Range.lift(edit.range),\r\n                forceMoveMarkers: true\r\n            };\r\n        }), undoEdits => {\r\n            for (const { range } of undoEdits) {\r\n                if (Range.areIntersectingOrTouching(range, initialSelection)) {\r\n                    return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\r\n                }\r\n            }\r\n            return null;\r\n        });\r\n    }\r\n    accessibleNotificationService.notify(\"format\" /* AccessibleNotificationEvent.Format */, userGesture);\r\n    return true;\r\n}\r\nexport async function getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, model, range, options, token) {\r\n    const providers = languageFeaturesService.documentRangeFormattingEditProvider.ordered(model);\r\n    for (const provider of providers) {\r\n        const rawEdits = await Promise.resolve(provider.provideDocumentRangeFormattingEdits(model, range, options, token)).catch(onUnexpectedExternalError);\r\n        if (isNonEmptyArray(rawEdits)) {\r\n            return await workerService.computeMoreMinimalEdits(model.uri, rawEdits);\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexport async function getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, model, options, token) {\r\n    const providers = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\r\n    for (const provider of providers) {\r\n        const rawEdits = await Promise.resolve(provider.provideDocumentFormattingEdits(model, options, token)).catch(onUnexpectedExternalError);\r\n        if (isNonEmptyArray(rawEdits)) {\r\n            return await workerService.computeMoreMinimalEdits(model.uri, rawEdits);\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexport function getOnTypeFormattingEdits(workerService, languageFeaturesService, model, position, ch, options, token) {\r\n    const providers = languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\r\n    if (providers.length === 0) {\r\n        return Promise.resolve(undefined);\r\n    }\r\n    if (providers[0].autoFormatTriggerCharacters.indexOf(ch) < 0) {\r\n        return Promise.resolve(undefined);\r\n    }\r\n    return Promise.resolve(providers[0].provideOnTypeFormattingEdits(model, position, ch, options, token)).catch(onUnexpectedExternalError).then(edits => {\r\n        return workerService.computeMoreMinimalEdits(model.uri, edits);\r\n    });\r\n}\r\nCommandsRegistry.registerCommand('_executeFormatRangeProvider', async function (accessor, ...args) {\r\n    const [resource, range, options] = args;\r\n    assertType(URI.isUri(resource));\r\n    assertType(Range.isIRange(range));\r\n    const resolverService = accessor.get(ITextModelService);\r\n    const workerService = accessor.get(IEditorWorkerService);\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const reference = await resolverService.createModelReference(resource);\r\n    try {\r\n        return getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, Range.lift(range), options, CancellationToken.None);\r\n    }\r\n    finally {\r\n        reference.dispose();\r\n    }\r\n});\r\nCommandsRegistry.registerCommand('_executeFormatDocumentProvider', async function (accessor, ...args) {\r\n    const [resource, options] = args;\r\n    assertType(URI.isUri(resource));\r\n    const resolverService = accessor.get(ITextModelService);\r\n    const workerService = accessor.get(IEditorWorkerService);\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const reference = await resolverService.createModelReference(resource);\r\n    try {\r\n        return getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, options, CancellationToken.None);\r\n    }\r\n    finally {\r\n        reference.dispose();\r\n    }\r\n});\r\nCommandsRegistry.registerCommand('_executeFormatOnTypeProvider', async function (accessor, ...args) {\r\n    const [resource, position, ch, options] = args;\r\n    assertType(URI.isUri(resource));\r\n    assertType(Position.isIPosition(position));\r\n    assertType(typeof ch === 'string');\r\n    const resolverService = accessor.get(ITextModelService);\r\n    const workerService = accessor.get(IEditorWorkerService);\r\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\r\n    const reference = await resolverService.createModelReference(resource);\r\n    try {\r\n        return getOnTypeFormattingEdits(workerService, languageFeaturesService, reference.object.textEditorModel, Position.lift(position), ch, options, CancellationToken.None);\r\n    }\r\n    finally {\r\n        reference.dispose();\r\n    }\r\n});\r\n", "/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { EditorOptions } from './common/config/editorOptions.js';\r\nimport { createMonacoBaseAPI } from './common/services/editorBaseApi.js';\r\nimport { createMonacoEditorAPI } from './standalone/browser/standaloneEditor.js';\r\nimport { createMonacoLanguagesAPI } from './standalone/browser/standaloneLanguages.js';\r\nimport { FormattingConflicts } from './contrib/format/browser/format.js';\r\n// Set defaults for standalone editor\r\nEditorOptions.wrappingIndent.defaultValue = 0 /* WrappingIndent.None */;\r\nEditorOptions.glyphMargin.defaultValue = false;\r\nEditorOptions.autoIndent.defaultValue = 3 /* EditorAutoIndentStrategy.Advanced */;\r\nEditorOptions.overviewRulerLanes.defaultValue = 2;\r\n// We need to register a formatter selector which simply picks the first available formatter.\r\n// See https://github.com/microsoft/monaco-editor/issues/2327\r\nFormattingConflicts.setFormatterSelector((formatter, document, mode) => Promise.resolve(formatter[0]));\r\nconst api = createMonacoBaseAPI();\r\napi.editor = createMonacoEditorAPI();\r\napi.languages = createMonacoLanguagesAPI();\r\nexport const CancellationTokenSource = api.CancellationTokenSource;\r\nexport const Emitter = api.Emitter;\r\nexport const KeyCode = api.KeyCode;\r\nexport const KeyMod = api.KeyMod;\r\nexport const Position = api.Position;\r\nexport const Range = api.Range;\r\nexport const Selection = api.Selection;\r\nexport const SelectionDirection = api.SelectionDirection;\r\nexport const MarkerSeverity = api.MarkerSeverity;\r\nexport const MarkerTag = api.MarkerTag;\r\nexport const Uri = api.Uri;\r\nexport const Token = api.Token;\r\nexport const editor = api.editor;\r\nexport const languages = api.languages;\r\nconst monacoEnvironment = globalThis.MonacoEnvironment;\r\nif ((monacoEnvironment === null || monacoEnvironment === void 0 ? void 0 : monacoEnvironment.globalAPI) || (typeof define === 'function' && define.amd)) {\r\n    globalThis.monaco = api;\r\n}\r\nif (typeof globalThis.require !== 'undefined' && typeof globalThis.require.config === 'function') {\r\n    globalThis.require.config({\r\n        ignoreDuplicateModules: [\r\n            'vscode-languageserver-types',\r\n            'vscode-languageserver-types/main',\r\n            'vscode-languageserver-textdocument',\r\n            'vscode-languageserver-textdocument/main',\r\n            'vscode-nls',\r\n            'vscode-nls/vscode-nls',\r\n            'jsonc-parser',\r\n            'jsonc-parser/main',\r\n            'vscode-uri',\r\n            'vscode-uri/index',\r\n            'vs/basic-languages/typescript/typescript'\r\n        ]\r\n    });\r\n}\r\n"],
  "mappings": "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;AAClC,EAAAA,SAAQA,SAAQ,QAAQ,IAAI,EAAE,IAAI;AAClC,EAAAA,SAAQA,SAAQ,QAAQ,IAAI,EAAE,IAAI;AAClC,EAAAA,SAAQA,SAAQ,QAAQ,IAAI,EAAE,IAAI;AAClC,EAAAA,SAAQA,SAAQ,QAAQ,IAAI,EAAE,IAAI;AAClC,EAAAA,SAAQA,SAAQ,QAAQ,IAAI,EAAE,IAAI;AAClC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,IAAI;AAChC,EAAAA,SAAQA,SAAQ,MAAM,IAAI,EAAE,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;AAAA,EAOzB,WAAW,QAAQ,aAAa,CAAC;AAAA,EACjC,WAAW,QAAQ,WAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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",
  "names": ["AccessibilitySupport", "CodeActionTriggerType", "CompletionItemInsertTextRule", "CompletionItemKind", "CompletionItemTag", "CompletionTriggerKind", "ContentWidgetPositionPreference", "CursorChangeReason", "DefaultEndOfLine", "DocumentHighlightKind", "EditorAutoIndentStrategy", "EditorOption", "EndOfLinePreference", "EndOfLineSequence", "GlyphMarginLane", "IndentAction", "InjectedTextCursorStops", "InlayHintKind", "InlineCompletionTriggerKind", "KeyCode", "MarkerSeverity", "MarkerTag", "MinimapPosition", "MouseTargetType", "OverlayWidgetPositionPreference", "OverviewRulerLane", "PositionAffinity", "RenderLineNumbersType", "RenderMinimap", "ScrollType", "ScrollbarVisibility", "SelectionDirection", "ShowAiIconMode", "SignatureHelpTriggerKind", "SymbolKind", "SymbolTag", "TextEditorCursorBlinkingStyle", "TextEditorCursorStyle", "TrackedRangeStickiness", "WrappingIndent", "MarkerSeverity", "createProxyObject", "monacoEnvironment", "range", "range", "codePoint", "isBasicASCII", "r", "c", "timeout", "range", "key", "timeout", "s1", "s2", "timeout", "i", "range", "score", "timeout", "range", "score", "LineSequence", "range", "timeout", "LineSequence", "range", "match", "range", "match", "range", "m", "EditorWorkerService", "range", "c", "word", "range", "proxyMethodRequest", "sanitize", "__decorate", "__param", "MonarchTokenizer", "rule", "enteringEmbeddedLanguage", "embeddedLanguageData", "sanitize", "ttPolicy", "isBasicASCII", "__decorate", "__param", "AbstractCodeEditorService", "editor", "__decorate", "__param", "StandaloneCodeEditorService", "editor", "__decorate", "__param", "StandaloneLayoutService", "EditorScopedLayoutService", "__decorate", "__param", "UndoRedoService", "strResource", "UndoChoice", "__decorate", "__param", "SemanticTokensProviderStyling", "__decorate", "__param", "SemanticTokensStylingService", "match", "basename", "pattern", "parse", "resultExpression", "withBasenames", "allPaths", "basenames", "patterns", "score", "score", "entry", "equals", "log", "i", "InspectTokensNLS", "GoToLineNLS", "QuickHelpNLS", "QuickCommandNLS", "QuickOutlineNLS", "StandaloneCodeEditorNLS", "ToggleHighContrastNLS", "StandaloneServicesNLS", "LayoutAnchorMode", "Range", "__decorate", "__param", "ContextViewService", "parse", "Direction", "actions", "EventType", "__decorate", "__param", "ContextMenuService", "ContextMenuMenuDelegate", "EditorOpenSource", "__decorate", "__param", "CommandOpener", "EditorOpener", "OpenerService", "__decorate", "__param", "MarkerDecorationsService", "__decorate", "__param", "ModelService", "editor", "equals", "model", "DefaultQuickAccessFilterValue", "Extensions", "QuickInputHideReason", "ItemActivation", "__decorate", "__param", "QuickAccessController", "Extensions", "value", "EventType", "$", "range", "__decorate", "match", "$", "EventType", "__decorate", "$", "_a", "index", "QuickInputListFocus", "e", "match", "$", "activeItem", "quickInputTitleBackground", "quickInputBackground", "quickInputForeground", "widgetBorder", "widgetShadow", "__decorate", "__param", "QuickInputService", "options", "__decorate", "__param", "EditorScopedQuickInputService", "editor", "StandaloneQuickInputService", "editor", "match", "Extensions", "editorForeground", "editorBackground", "__decorate", "__param", "AccessibilityService", "__decorate", "__param", "MenuService", "PersistedMenuHideState", "__decorate", "__param", "MenuInfo", "MenuImpl", "hide", "__decorate", "__param", "BrowserClipboardService", "__decorate", "__param", "ContextKeyService", "data", "__decorate", "__param", "StandaloneTextModelService", "StandaloneCommandService", "StandaloneKeybindingService", "__decorate", "__param", "StandaloneResourceConfigurationService", "__decorate", "__param", "StandaloneResourcePropertiesService", "StandaloneBulkEditService", "edits", "basename", "StandaloneContextViewService", "StandaloneContextMenuService", "StandaloneServices", "editorFeatures", "h", "editor", "d", "store", "reader", "__decorate", "__param", "AccessibleDiffViewer", "ViewModel", "tx", "__decorate", "__param", "modifiedRange", "LineType", "range", "View", "isBasicASCII", "range", "editor", "layout", "reader", "m", "provider", "result", "group", "child", "__decorate", "__param", "HideUnchangedRegionsFeature", "reader", "editor", "e", "range", "OutlineSource", "__decorate", "__param", "__decorate", "__param", "WorkerBasedDocumentDiffProvider", "__decorate", "__param", "DiffProviderFactoryService", "__decorate", "__param", "DiffEditorViewModel", "r", "range", "range", "ttPolicy", "editor", "isBasicASCII", "__decorate", "__param", "ViewZoneManager", "marginDomNode", "c", "editor", "__decorate", "__param", "OverviewRulerPart", "reader", "editor", "range", "__decorate", "__param", "DiffEditorEditors", "editor", "__decorate", "__param", "DiffEditorWidget", "_a", "reader", "m", "editor", "tx", "m", "__decorate", "__param", "StandaloneCodeEditor", "StandaloneEditor", "__decorate", "__param", "StandaloneDiffEditor2", "__decorate", "__param", "__decorate", "__param", "DiffEditorItemTemplate", "h", "isFocused", "editor", "h", "obj", "__decorate", "__param", "MultiDiffEditorWidgetImpl", "isFocused", "__decorate", "__param", "MultiDiffEditorWidget", "editor", "accessor", "args", "createWebWorker", "MinimapPosition", "OverviewRulerLane", "GlyphMarginLane", "matches", "isThenable", "create", "languageDef", "range", "model", "document", "range", "document", "CancellationTokenSource", "Emitter", "KeyCode", "KeyMod", "Position", "Range", "Selection", "SelectionDirection", "MarkerSeverity", "MarkerTag", "Token"]
}
